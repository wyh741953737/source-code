(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[18],{

/***/ "../src/pages/mycj/dropshipping-orders/drop-await-payment.js":
/*!*******************************************************************!*\
  !*** ../src/pages/mycj/dropshipping-orders/drop-await-payment.js ***!
  \*******************************************************************/
/*! exports provided: dropAwaitPaymentFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dropAwaitPaymentFactory\", function() { return dropAwaitPaymentFactory; });\n/* harmony import */ var _src_pages_mycj_mycj_constant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @src/pages/mycj/mycj.constant */ \"../src/pages/mycj/mycj.constant.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nfunction dropAwaitPaymentFactory(angular) {\n  var app = angular.module('drop-await-payment.module', ['service']); // var mark1 = 0;\n\n  app.controller('drop-await-payment.ctrl', ['$scope', 'dsp', '$sce', function ($scope, dsp, $sce) {\n    var base64 = new Base64();\n    dsp.domainData().then(function (res) {\n      // 请求成功的结果\n      console.log(res);\n      $scope.iscj = res.iscj;\n\n      if ($scope.iscj == '1') {\n        //cj\n        $scope.websiteName = 'CJ';\n      } else {\n        //客户\n        $scope.websiteName = res.websiteName || 'CJ';\n      }\n    });\n    $scope.dataFound = true;\n    $scope.zdataFound = true;\n    var bs = new Base64();\n    var ordZeroTips = localStorage.getItem('ordZeroTips') || '';\n\n    if (ordZeroTips) {\n      $scope.addCartResonFlag = true;\n      $scope.addCartResonText = ordZeroTips;\n      localStorage.removeItem('ordZeroTips');\n    } //给左侧的导航添加滚动事件\n\n\n    $(document).scroll(function () {\n      if ($(document).scrollTop() >= 0) {\n        $('.left-nav').css({\n          position: 'fixed',\n          top: '80px'\n        });\n      } else {\n        $('.left-nav').css({\n          position: 'relative',\n          top: '80px'\n        });\n      }\n    }); //获取url中的参数方法\n\n    function getUrlParamByKey(href, key) {\n      if (!href) return '';\n      var vars = href.split(\"&\");\n\n      for (var i = 0; i < vars.length; i++) {\n        var pair = vars[i].split(\"=\");\n\n        if (pair[0] == key) {\n          return pair[1];\n        }\n      }\n    }\n\n    function initIsCheckout() {\n      // 判断当前是否存在ckosessionid\n      $scope.ckoSessionId = base64.decode(localStorage.getItem('ckoSessionId') || '') && JSON.parse(base64.decode(localStorage.getItem('ckoSessionId') || ''));\n\n      if ($scope.ckoSessionId) {\n        getList();\n        getCheckoutTrade();\n        return;\n      }\n\n      var href = window.location.href;\n\n      if (href.indexOf('?') >= 0) {\n        var regexp = /\\?[\\w\\W]*\\#/;\n        $scope.sessionId = getUrlParamByKey(href.match(regexp) && href.match(regexp)[0].slice(1, -1), 'cko-payment-id') || getUrlParamByKey(href.match(regexp) && href.match(regexp)[0].slice(1, -1), 'cko-session-id');\n\n        if ($scope.sessionId) {\n          localStorage.setItem('ckoSessionId', base64.encode(JSON.stringify($scope.sessionId))); // 后端接口返回状态较慢，延迟一秒再刷新当前页面\n\n          var timer = setTimeout(function () {\n            clearTimeout(timer);\n            window.location.href = window.location.origin + '/myCJ.html#/dropshipping-orders';\n          }, 200);\n          getList();\n          return;\n        }\n      }\n    }\n\n    initIsCheckout();\n\n    function getElementLeft(element) {\n      var actualLeft = element.offsetLeft;\n      var current = element.offsetParent;\n\n      while (current !== null) {\n        actualLeft += current.offsetLeft;\n        current = current.offsetParent;\n      }\n\n      return actualLeft;\n    }\n\n    function getElementTop(element) {\n      var actualTop = element.offsetTop;\n      var current = element.offsetParent;\n\n      while (current !== null) {\n        actualTop += current.offsetTop;\n        current = current.offsetParent;\n      }\n\n      return actualTop;\n    } //设置默认时间\n\n\n    function GetDateStr(AddDayCount) {\n      var dd = new Date();\n      dd.setDate(dd.getDate() + AddDayCount); //获取AddDayCount天后的日期\n\n      var y = dd.getFullYear();\n      var m = dd.getMonth() + 1; //获取当前月份的日期\n\n      var d = dd.getDate();\n\n      if (m < 10) {\n        m = '0' + m;\n      }\n\n      if (d < 10) {\n        d = '0' + d;\n      }\n\n      return y + \"-\" + m + \"-\" + d;\n    }\n\n    var aDate = GetDateStr(-45);\n    var enDate = GetDateStr(0);\n    $(\"#cj-stime\").val(aDate); //关键语句\n    //鼠标划过事件\n\n    $('.orders-table').on('mouseenter', '.order-detail', function () {\n      // $(this).next().show();\n      $('.orders-table .order-detail').removeClass('order-detail-active');\n      $(this).addClass('order-detail-active');\n    });\n    $('.orders-table').on('mouseleave', '.order-detail', function () {\n      $(this).next().hide();\n    });\n    $('.orders-table').mouseleave(function () {\n      $('.orders-table .order-detail').removeClass('order-detail-active');\n    }); //导出订单的提示\n\n    $('.export-orders').click(function () {\n      layer.msg('This feature will work soon.');\n    });\n    $scope.cjdropawaitpList = ''; //存储所有的订单\n\n    $scope.erpordTnum = ''; //存储订单的条数\n\n    $scope.pageSize = '50';\n    $scope.pageNum = 1;\n    getList();\n\n    function getList() {\n      $scope.cjdropawaitpList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var ordId = $.trim($('.ord-search-inp').val());\n      var dapData = {};\n      dapData.data = {};\n      dapData.data.status = '3';\n      dapData.data.page = $scope.pageNum;\n      dapData.data.limit = $scope.pageSize;\n      dapData.data.dateBegin = $('#cj-stime').val(); //cj开始时间\n\n      dapData.data.dateEnd = $('#cj-etime').val(); //cj开始时间\n\n      if (ordId.indexOf('CJ') >= 0) {\n        dapData.data.numid = ordId;\n      } else {\n        dapData.data.orderId = ordId;\n      }\n\n      dapData.data = JSON.stringify(dapData.data);\n      console.log(dapData);\n      console.log(JSON.stringify(dapData));\n      dsp.postFun('app/order/queryShipmentsOrder', JSON.stringify(dapData), function (data) {\n        console.log(data.data);\n        var cjdropawaitp = JSON.parse(data.data.result);\n        $scope.erpordTnum = cjdropawaitp.countNumber;\n        $scope.fulfillmentStatus = cjdropawaitp.fulfillmentStatus;\n        $scope.cjdropawaitpList = cjdropawaitp.orderList; //获取所有的订单\n\n        console.log($scope.cjdropawaitpList);\n\n        if ($scope.erpordTnum > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          dsp.addNodataPic($('.orders-list'), $(window).height() - 171, 47, 0, {\n            width: '100%'\n          });\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        $scope.ordstatusNum = cjdropawaitp.allOrderCount2; //各种状态订单的数量\n\n        numFun(); //调用给订单赋值的函数\n\n        $scope.totalCounts = Math.ceil($scope.erpordTnum / $scope.pageSize);\n        $scope.$broadcast('page-data', {\n          pageNum: $scope.pageNum,\n          totalNum: $scope.totalCounts,\n          totalCounts: $scope.erpordTnum,\n          pageSize: $scope.pageSize,\n          pagesizeList: ['30', '50', '100']\n        });\n      }, function () {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      });\n    }\n\n    $scope.$on('pagedata-fa', function (d, data) {\n      console.log(data);\n      $scope.pageNum = data.pageNum;\n      $scope.pageSize = data.pageSize;\n      getList();\n    }); //给订单状态赋值的函数\n\n    function numFun() {\n      $scope.awaitNum = $scope.ordstatusNum.yi;\n      $scope.dropprocessNum = $scope.ordstatusNum.er;\n      $scope.dropprocessedNum = $scope.ordstatusNum.san;\n      $scope.completeNum = $scope.ordstatusNum.si;\n      $scope.closedNum = $scope.ordstatusNum.wu;\n    }\n\n    $scope.navList = [{\n      name: 'Awaiting Payment',\n      href: '#/dropshipping-orders',\n      show: true\n    }, {\n      name: 'Processing',\n      href: '#/drop-proce'\n    }, {\n      name: 'Processed',\n      href: '#/drop-processed'\n    }, {\n      name: 'Completed',\n      href: '#/drop-complet'\n    }, {\n      name: 'Closed',\n      href: '#/drop-close'\n    }];\n    var customerCjNum = localStorage.getItem('customerCjNum') || '';\n    var userId = localStorage.getItem('userId') ? bs.decode(localStorage.getItem('userId')) : ''; // 获取个人信息\n\n    var token = localStorage.getItem('token') ? bs.decode(localStorage.getItem('token')) : \"\";\n    var noInvoiceArr = dsp.noInvoiceArr;\n\n    function getUserInfo() {\n      var params = {\n        data: JSON.stringify({\n          userId: userId,\n          token: token\n        })\n      };\n      dsp.postFun('app/info/userinfo', params, function (_ref) {\n        var data = _ref.data;\n        var result = JSON.parse(data.result)[0];\n        var cjNum = result.num;\n        localStorage.setItem('customerCjNum', cjNum);\n        $scope.isHideInvoiceFlag = noInvoiceArr.includes(cjNum);\n      }, function (data) {\n        console.log(data);\n      });\n    }\n\n    if (!customerCjNum) {\n      getUserInfo();\n    } else {\n      $scope.isHideInvoiceFlag = noInvoiceArr.includes(customerCjNum);\n    } //疫情期间使用\n\n\n    var payItem, payIndex;\n\n    $scope.countryTipFun = function (item, index) {\n      // 是否验证邮件处理\n      if (dsp.isVerifyEmail()) return;\n      payItem = item;\n      payIndex = index;\n      /** 2021-02-01 pay支付抵扣中判断 */\n\n      dsp.postFun('app/goodsInfo/checkOrderOutGoodsInfoOpt', {\n        shipOrderId: item.ID\n      }, function (_ref2) {\n        var data = _ref2.data;\n\n        if (+data.code === 200) {\n          dsp.postFun('app/dispute/getTipsListByType', {}, function (data) {\n            var oresult = data.data.result ? JSON.parse(data.data.result) : '';\n\n            if (oresult) {\n              $scope.holidayTips = {\n                title: oresult.title,\n                content: $sce.trustAsHtml(oresult.content)\n              };\n              $scope.showCountryTip = true;\n            } else {\n              $scope.payFun();\n            }\n          }, function (err) {});\n        } else {\n          layer.msg(data === null || data === void 0 ? void 0 : data.message);\n        }\n      }, function (err) {});\n    }; // $scope.payFun = function (item, index) {\n\n\n    $scope.payFun = function () {\n      var item = payItem;\n      console.log(payItem);\n      var index = payIndex;\n      var homeType = payItem.HOMETYPE;\n      layer.load(2);\n      $scope.noInventoryArr = [];\n      $scope.itemMuId = item.ID;\n      dsp.postFun('order-center/proxyOrder/payRelevant/getParentOrderInfo', {\n        shipmentsId: item.ID,\n        totalAmount: item.ORDERMONEY\n      }, function (data) {\n        var res = data.data;\n\n        if (res.data.shipmentsId && res.data.orderCodes) {\n          localStorage.removeItem('deductionOfInventory');\n          localStorage.removeItem('orderNumbers');\n          localStorage.removeItem('shipmentsId');\n          localStorage.setItem('orderNumbers', JSON.stringify(res.data.orderCodes));\n          localStorage.setItem('shipmentsId', JSON.stringify(res.data.shipmentsId));\n          layer.closeAll(\"loading\");\n          location.href = '/newmycj/dropshipping/orderConfirmation';\n        } else {\n          layer.msg(res.message);\n        }\n      });\n\n      if (homeType != '0') {\n        dsp.postFun('order/order/checkInventory', {\n          shipmentsOrderId: item.ID\n        }, function (data) {\n          $scope.showCountryTip = false; // 疫情提示弹窗隐藏\n\n          var resData = data.data;\n\n          if (resData.statusCode == 200) {\n            $scope.noInventoryArr = resData.result;\n\n            if ($scope.noInventoryArr.length > 0) {\n              layer.closeAll(\"loading\");\n              $scope.inventotyTipFlag = true;\n\n              if ($scope.noInventoryArr.length == item.ORDERNUMBER) {\n                //所有子订单都没有库存\n                layer.msg('Insufficient inventory. Payment failed.');\n              }\n            } else {\n              //都有库存\n              $scope.muordMoney = bs.encode(item.ORDERMONEY.toString()); //订单金额\n\n              payFun2(item, index); //新版支付\n\n              $scope.payType = 2;\n            }\n          } else if (data.data.statusCode == 400) {\n            $scope.errorShowFlag = true;\n            var temp = JSON.parse(data.data.result);\n            $scope.logisticsReasonList = temp.map(function (item) {\n              return {\n                recordNum: item,\n                message: data.data.message\n              };\n            });\n            layer.closeAll(\"loading\");\n          } else {\n            layer.closeAll(\"loading\");\n            dsp.cjMesFun(1);\n          }\n        }, function (data) {\n          console.log(data);\n          layer.closeAll(\"loading\");\n        });\n      } else {\n        $scope.muordMoney = bs.encode(item.ORDERMONEY.toString()); //订单金额\n\n        payFun2(item, index); //新版支付\n\n        $scope.payType = 2;\n      }\n    };\n\n    $scope.sureDelNoinvenOrd = function () {\n      //移除无库存的订单\n      layer.load(2);\n      var removeNoInvenIds = $scope.noInventoryArr.join(',');\n      dsp.postFun('order/order/removeOrderInShipmentsOrder', {\n        shipmentsOrderId: $scope.itemMuId,\n        removeOrderIds: removeNoInvenIds\n      }, function (data) {\n        console.log(data);\n        var resData = data.data;\n\n        if (resData.statusCode == 200) {\n          $scope.inventotyTipFlag = false;\n          freshGetList();\n        } else {\n          layer.msg(resData.message);\n        }\n\n        layer.closeAll('loading');\n      }, function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n      });\n    };\n\n    $scope.serviceGoodsModal = false;\n    $scope.inventoryShortage = [];\n\n    $scope.handleCloseServiceGoods = function () {\n      $scope.serviceGoodsModal = false;\n      $scope.inventoryShortage = [];\n    };\n\n    function payFun2(item, index) {\n      $scope.payOrdNum = bs.encode(item.ID);\n      $scope.ordquantity = bs.encode(item.ORDERNUMBER.toString());\n      window.location.href = \"myCJ.html?route=payment#/payment/\".concat($scope.payOrdNum, \"/\").concat($scope.muordMoney, \"/\").concat($scope.ordquantity);\n    }\n\n    function payFun1(item, index) {\n      console.log(item.ORDERMONEY);\n      $scope.itemIndex = index;\n      $scope.itemId = item.ID;\n      $scope.siyoucangku = 'init';\n      var payData = {};\n      payData.shipOrderId = item.ID;\n      payData.money = item.ORDERMONEY;\n      payData.siyoucangku = 'init'; // cj/cjOrderPay/checkPay\n\n      dsp.postFun('app/order/checkPay', JSON.stringify(payData), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n\n        if (data.data.code == '205') {\n          layer.msg(data.data.message);\n          return;\n        }\n\n        $scope.totalServerPrice = data.data.totalServerPrice;\n\n        if (data.data.childOrders) {\n          console.log(data.data.totalPrivace);\n          $scope.totalServerPrice = 0;\n          $scope.totalServerPrice = data.data.totalServerPrice;\n\n          if (data.data.totalPrivace - 0 + (data.data.balance - 0) >= item.ORDERMONEY) {\n            $scope.balanceM = 0;\n            console.log('库存加余额大于订单金额');\n          } else {\n            $scope.balanceM = data.data.balance;\n          }\n\n          if (data.data.inventoryList && userId != '738CB2BD-0D8C-4587-9779-8CFA9F788047') {\n            $scope.inventoryList = data.data.inventoryList;\n          } else {\n            $scope.inventoryList = [];\n          }\n\n          console.log($scope.balanceM);\n          console.log($scope.inventoryList);\n\n          if ($scope.balanceM > 0) {\n            console.log($scope.balanceM);\n            $scope.isDkFlag = true;\n          }\n\n          if ($scope.inventoryList.length > 0) {\n            $scope.iskcFlag = true;\n            console.log($scope.iskcFlag);\n          }\n\n          if ($scope.balanceM <= 0 && $scope.inventoryList.length <= 0) {\n            meiXiFun();\n          }\n\n          $scope.totalPrivace = data.data.totalPrivace;\n        } else {\n          layer.msg('Sorry, The order related to this payment is not found, please double check and resubmit it or contact your agent.', {\n            time: 5000\n          });\n        }\n      });\n    }\n\n    function meiXiFun() {\n      $scope.siyoucangku = '美西';\n      var ORDERMONEY = $scope.muordMoney;\n      ORDERMONEY = bs.decode(ORDERMONEY);\n      console.log(ORDERMONEY);\n      var payData = {};\n      payData.shipOrderId = $scope.itemId;\n      payData.money = ORDERMONEY;\n      payData.siyoucangku = '美西'; // cj/cjOrderPay/checkPay\n\n      dsp.postFun('app/order/checkPay', JSON.stringify(payData), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n        $scope.totalServerPrice = data.data.totalServerPrice;\n\n        if (data.data.childOrders) {\n          $scope.totalServerPrice = 0;\n          $scope.totalServerPrice = data.data.totalServerPrice;\n          var muOrdMoney = $scope.muordMoney;\n          $scope.inventoryList = data.data.inventoryList;\n          muOrdMoney = bs.decode(muOrdMoney); //抵扣后的金额\n\n          console.log($scope.inventoryList);\n          console.log(data.data.totalPrivace - 0, data.data.totalPrivace - 0 <= muOrdMoney - 0);\n\n          if ($scope.inventoryList && $scope.inventoryList.length > 0 && data.data.totalPrivace - 0 <= muOrdMoney - 0) {\n            $scope.iskcFlag = true;\n          } else if (!$scope.inventoryList) {\n            meiDongFun();\n          } else {\n            location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n          }\n\n          $scope.totalPrivace = data.data.totalPrivace;\n        } else {\n          layer.msg('Sorry, The order related to this payment is not found, please double check and resubmit it or contact your agent.', {\n            time: 5000\n          });\n        }\n      });\n    }\n\n    function meiDongFun() {\n      $scope.siyoucangku = '美东';\n      var ORDERMONEY = $scope.muordMoney;\n      ORDERMONEY = bs.decode(ORDERMONEY);\n      console.log(ORDERMONEY);\n      var payData = {};\n      payData.shipOrderId = $scope.itemId;\n      payData.money = ORDERMONEY;\n      payData.siyoucangku = '美东'; // cj/cjOrderPay/checkPay\n\n      dsp.postFun('app/order/checkPay', JSON.stringify(payData), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n\n        if (data.data.childOrders) {\n          $scope.totalServerPrice = 0;\n          $scope.totalServerPrice = data.data.totalServerPrice;\n          var muOrdMoney = $scope.muordMoney;\n          $scope.totalServerPrice = data.data.totalServerPrice;\n          $scope.inventoryList = data.data.inventoryList;\n          muOrdMoney = bs.decode(muOrdMoney); //抵扣后的金额\n\n          console.log($scope.inventoryList);\n          console.log(data.data.totalPrivace - 0, data.data.totalPrivace - 0 <= muOrdMoney - 0);\n\n          if ($scope.inventoryList && $scope.inventoryList.length > 0 && data.data.totalPrivace - 0 <= muOrdMoney - 0) {\n            $scope.iskcFlag = true;\n          } else {\n            location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n          }\n\n          $scope.totalPrivace = data.data.totalPrivace;\n        } else {\n          layer.msg('Sorry, The order related to this payment is not found, please double check and resubmit it or contact your agent.', {\n            time: 5000\n          });\n        }\n      });\n    } // skip\n\n\n    $scope.handleSkip = function () {\n      var params = $scope.packageList.map(function (o) {\n        return {\n          cjOrderId: o.cjOrderId,\n          cjProductId: o.cjProductId\n        };\n      });\n      layer.load(2);\n      dsp.postFun('cj/cjOrderPay/removePack', params, function (_ref3) {\n        var data = _ref3.data;\n        layer.closeAll('loading');\n\n        if (data.statusCode === '200') {\n          $scope.inventoryModal = false;\n          freshGetList();\n        }\n      }, function (err) {\n        return console.log(err);\n      });\n    }; //不用余额抵扣\n\n\n    $scope.noDkYeFun = function () {\n      $scope.isDkFlag = false;\n      $scope.balanceM = 0;\n\n      if ($scope.payType == 2) {\n        location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n      } else if ($scope.inventoryList.length < 1) {\n        if ($scope.siyoucangku == 'init') {\n          meiXiFun();\n        } else if ($scope.siyoucangku == '美西') {\n          meiDongFun();\n        } else if ($scope.siyoucangku == '美东') {\n          location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n        }\n      }\n    }; //余额抵扣\n\n\n    $scope.deductMFun = function () {\n      if ($scope.balanceM - bs.decode($scope.muordMoney) > 0) {\n        // layer.msg('余额大于订单金额!!!!')\n        location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n        return;\n      }\n\n      var deData = {};\n      deData.shid = $scope.itemId;\n      deData.money = $scope.balanceM;\n      layer.load(2);\n      dsp.postFun('app/finance/prepayment', JSON.stringify(deData), function (data) {\n        layer.closeAll('loading');\n        $scope.isDkFlag = false;\n\n        if (data.data.result) {\n          layer.msg('deduct success');\n          $scope.muordMoney = bs.decode($scope.muordMoney) - $scope.balanceM;\n          $scope.muordMoney = $scope.muordMoney.toFixed(2);\n          $scope.muordMoney = bs.encode($scope.muordMoney.toString());\n\n          if ($scope.payType == 2) {\n            location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n          } else if ($scope.inventoryList.length < 1) {\n            if ($scope.siyoucangku == 'init') {\n              meiXiFun();\n            } else if ($scope.siyoucangku == '美西') {\n              meiDongFun();\n            } else if ($scope.siyoucangku == '美东') {\n              location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n            }\n          } //location.href = '#/payment/'+$scope.payOrdNum+'/'+$scope.muordMoney+'/'+$scope.ordquantity;\n\n        } else {\n          layer.msg('deduct error');\n        }\n      });\n    }; //跳过抵库存\n\n\n    $scope.skipKcFun = function () {\n      $scope.iskcFlag = false;\n      $scope.inventoryList = [];\n\n      if ($scope.balanceM <= 0) {\n        if ($scope.siyoucangku == 'init') {\n          location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n        } else if ($scope.siyoucangku == '美西') {\n          meiDongFun();\n        } else if ($scope.siyoucangku == '美东') {\n          location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n        } // if ($scope.siyoucangku=='美东') {\n        // \tlocation.href = '#/payment/'+$scope.payOrdNum+'/'+$scope.muordMoney+'/'+$scope.ordquantity;\n        // } else {\n        // \tmeiDongFun()\n        // }\n\n      } else {\n        if ($scope.siyoucangku == 'init') {\n          //如果初次跳过  默认不进行库存抵扣\n          $scope.siyoucangku == '美东';\n        }\n      }\n    }; //取消抵库存\n\n\n    $scope.cancelDkFun = function () {\n      $scope.isSureDecuntFlag = false;\n      $scope.inventoryList = [];\n\n      if ($scope.balanceM <= 0) {\n        if ($scope.siyoucangku == 'init') {\n          location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n        } else if ($scope.siyoucangku == '美西') {\n          meiDongFun();\n        } else if ($scope.siyoucangku == '美东') {\n          location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n        }\n      } else {\n        if ($scope.siyoucangku == 'init') {\n          //如果初次跳过  默认不进行库存抵扣\n          $scope.siyoucangku == '美东';\n        }\n      }\n    }; //确定抵库存\n\n\n    $scope.errorShowFlag = false;\n\n    $scope.sureDecuentFun = function () {\n      layer.load(2);\n      var deData = {};\n      deData.shipOrderId = $scope.itemId;\n      deData.siyoucangku = $scope.siyoucangku; // cj/cjOrderPay/cjOrderDeduction\n\n      dsp.postFun('app/goodsInfo/orderOutGoodsInfoOpt', JSON.stringify(deData), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n        console.log(data.data.result);\n\n        if (data.data.result == true) {\n          layer.msg('Deducted Successfully', {\n            time: 3000\n          });\n          $scope.muordMoney = bs.decode($scope.muordMoney) - $scope.totalPrivace;\n\n          if (!$scope.totalServerPrice) {\n            $scope.totalServerPrice = 0;\n          } else {\n            $scope.muordMoney = $scope.muordMoney + ($scope.totalServerPrice - 0);\n          }\n\n          console.log($scope.muordMoney);\n          $scope.muordMoney = $scope.muordMoney.toFixed(2);\n          console.log($scope.muordMoney);\n          $scope.muordMoney = bs.encode($scope.muordMoney.toString());\n\n          if ($scope.siyoucangku == 'init') {\n            meiXiFun();\n          } else if ($scope.siyoucangku == '美西') {\n            meiDongFun();\n          } else if ($scope.siyoucangku == '美东') {\n            if ($scope.balanceM <= 0) {\n              location.href = 'myCJ.html?route=payment#/payment/' + $scope.payOrdNum + '/' + $scope.muordMoney + '/' + $scope.ordquantity;\n            }\n          }\n        } else {\n          if (data.data.code == 400) {\n            $scope.errorShowFlag = true;\n            $scope.logisticsReasonList = data.data.data.map(function (item) {\n              return {\n                recordNum: item,\n                message: data.data.message\n              };\n            });\n          } else {\n            layer.msg('Deduct error');\n          }\n        }\n      }, function (data) {\n        layer.closeAll('loading');\n        console.log(data);\n      });\n    }; // $scope.payFun = function (item) {\n    // \tvar payOrdNum = bs.encode(item.ID);\n    // \tvar muordMoney = bs.encode(item.ORDERMONEY.toString());\n    // \tvar ordquantity = bs.encode(item.ORDERNUMBER.toString());\n    // \tvar payData = {};\n    // \tpayData.shipOrderId = item.ID;\n    // \tdsp.postFun('app/order/checkChildOrders',JSON.stringify(payData),function (data) {\n    // \t\tconsole.log(data)\n    // \t\tif (data.data.result) {\n    // \t\t\tlocation.href = '#/payment/'+payOrdNum+'/'+muordMoney+'/'+ordquantity;\n    // \t\t}else{\n    // \t\t\tlayer.msg('Sorry, The order related to this payment is not found, please double check and resubmit it or contact your agent.',{time:5000})\n    // \t\t}\n    // \t},function (data) {\n    // \t\tconsole.log(data)\n    // \t})\n    // \tconsole.log(payOrdNum,muordMoney,ordquantity)\n    // }\n    //发票按钮事件\n\n\n    $scope.invoiceFun = function (id) {\n      console.log(id);\n      dsp.isinvoiceDialog(id, '');\n    }; // 导出订单\n\n\n    var daochuOrdId;\n\n    $scope.exportOrder = function (item) {\n      $scope.dcordFlag = true;\n      daochuOrdId = item.ID;\n    };\n\n    $scope.goActexportOrder = function () {\n      layer.load(2);\n      dsp.postFun('app/client_erp/exportPaymentOrders', JSON.stringify({\n        id: daochuOrdId\n      }), function (data) {\n        layer.closeAll('loading');\n        console.log(data);\n\n        if (data.data.statusCode == 200) {\n          $scope.dcordFlag = false;\n          $scope.dcordCallbackFlag = true;\n          $scope.excelHref = JSON.parse(data.data.result).href;\n        } else {\n          layer.msg('Export order error.');\n        }\n      });\n    }; // 给处理订单的按钮添加鼠标移入移出\n\n\n    $('.deal-style').hover(function () {\n      $(this).css('background-color', 'rgb(249, 148, 41)');\n      $(this).css('color', '#fff');\n    }, function () {\n      $(this).css('background-color', '');\n      $(this).css('color', '#f99429');\n    }); // 给导出订单的按钮添加鼠标移入移出\n\n    $('.export-orders').hover(function () {\n      $(this).css('background-color', 'rgb(11, 98, 130)');\n    }, function () {\n      $(this).css('background-color', 'rgb(11, 78, 103)');\n    }); //显示隐藏高级搜索\n\n    $('.toggle-moresearch').click(function () {\n      $('.more-search').toggle(300);\n      console.log(22222222);\n      $('#toggle-logo').toggleClass('.glyphicon glyphicon-triangle-top');\n    }); //设置下单时间\n\n    var orderData = new Date();\n    var orderyear = orderData.getFullYear();\n    var ordermonth = orderData.getMonth() + 1;\n    var orderday = orderData.getDate();\n    var orderhour = orderData.getHours();\n    var ordermin = orderData.getMinutes(); // var ordersecond = orderData.getSeconds();\n\n    var $p1 = $('<p>' + orderyear + '-' + ordermonth + '-' + orderday + orderhour + ':' + ordermin + '</p>'); // var $p2 = $('<p>'+orderhour + ':'+ordermin+'</p>');\n\n    $('.order-time').append($p1); // $('.order-time').append($p2);\n    //给代付款添加选中非选中事件\n\n    var awitIndex = 0;\n    $('#await-table').on('click', '.zcheckbox', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        awitIndex++;\n\n        if (awitIndex == $('#await-table .zcheckbox').length) {\n          // alert('quanbuxuanzhogn')\n          $('#await-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        awitIndex--;\n\n        if (awitIndex != $('#await-table .zcheckbox').length) {\n          $('#await-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //全选\n\n    $('#await-table').on('click', '.zchecked-all', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        awitIndex = $('#await-table .zcheckbox').length;\n        $('#await-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        awitIndex = 0;\n        $('#await-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    });\n    var zawitIndex = 0;\n    $('#zawait-tab').on('click', '.zcheckbox', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        zawitIndex++;\n\n        if (zawitIndex == $('#zawait-tab .zcheckbox').length) {\n          // alert('quanbuxuanzhogn')\n          $('#zawait-tab .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        zawitIndex--;\n\n        if (zawitIndex != $('#zawait-tab .zcheckbox').length) {\n          $('#zawait-tab .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //全选\n\n    $('#zawait-tab').on('click', '.zchecked-all', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        zawitIndex = $('#zawait-tab .zcheckbox').length;\n        $('#zawait-tab .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        zawitIndex = 0;\n        $('#zawait-tab .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    }); //删除母订单\n\n    $scope.isdelFlag = false;\n    var delId = ''; //存储要删除的订单id\n\n    $scope.deletMuFun = function (item) {\n      $scope.isdelFlag = true;\n      delId = item.ID;\n    };\n\n    $scope.cancelDelFun = function () {\n      $scope.isdelFlag = false;\n      delId = '';\n    };\n\n    $scope.sureDeletMuFun = function () {\n      $scope.isdelFlag = false;\n      var idcs = {};\n      idcs.id = delId; // alert(idcs.id)\n\n      console.log(idcs);\n      console.log(JSON.stringify(idcs)); // return;\n\n      dsp.postFun('app/order/deleteShipmentsOrder', JSON.stringify(idcs), function (data) {\n        console.log(data);\n\n        if (data.data.result == 'true') {\n          $scope.pageNum = 1;\n          getList();\n        } else {\n          layer.closeAll(\"loading\");\n          dsp.closeLoadPercent($('.orders-list'));\n          layer.msg('Deleting failed. The order cannot be deleted with deducted products.');\n        }\n      }, function (data) {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        console.log(data);\n      });\n    }; //cj开始日期搜索\n\n\n    $(\"#cj-stime\").click(function () {\n      var cjendtime = $(\"#cj-stime\").val();\n      var interval = setInterval(function () {\n        var endtime2 = $(\"#cj-stime\").val();\n\n        if (endtime2 != cjendtime) {\n          $scope.ordersList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          clearInterval(interval);\n          $scope.pageNum = 1;\n          getList();\n        }\n      }, 100);\n    }); //cj结束日期搜索\n\n    $(\"#cj-etime\").click(function () {\n      var cjendtime = $(\"#cj-etime\").val();\n      var interval = setInterval(function () {\n        var endtime2 = $(\"#cj-etime\").val();\n\n        if (endtime2 != cjendtime) {\n          $scope.ordersList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          clearInterval(interval);\n          $scope.pageNum = 1;\n          getList();\n        }\n      }, 100);\n    }); //按订单号搜索\n\n    $('.ord-search-inp').keypress(function (Event) {\n      if (Event.keyCode == 13) {\n        $scope.searchOrdNumFun();\n      }\n    });\n\n    $scope.searchOrdNumFun = function () {\n      $scope.pageNum = 1;\n      getList();\n    }; // var pageH = $(window).height()-80;\n    // var docH = $(document).height();\n\n\n    $('.d-direct-right').css({\n      'min-height': $(window).height() * 1 - 15 + 'px'\n    }); // $('.direct-right').height()\n    //子订单的详情\n\n    $('.orders-list').on('click', '.zi-order-num', function () {\n      location.href = \"#/order-detail\";\n    });\n\n    $scope.ziordFun = function (item) {\n      var muordid = bs.encode(item.ID);\n      location.href = '#/drop-home-zi/' + muordid;\n    };\n    /*------*/\n\n\n    $scope.TrackingInfoChange = function () {\n      console.log($scope.fulfillmentStatus);\n      dsp.postFun('cj/fulfillmnet/updateFulfillmentStatus', {\n        flag: $scope.fulfillmentStatus\n      }, function (data) {\n        layer.closeAll(\"loading\");\n\n        if (data.data.statusCode == 200) {\n          if ($scope.fulfillmentStatus == '1') {\n            layer.msg('Set Successfully');\n          } else if ($scope.fulfillmentStatus == '0') {\n            layer.msg('Set Successfully');\n          }\n        }\n      });\n    };\n\n    $scope.showOrderDetail = false;\n\n    $scope.goOrderDetail = function (item, index) {\n      var params = _objectSpread(_objectSpread({}, JSON.parse(sessionStorage.getItem('order_info'))), {}, {\n        index: index\n      });\n\n      params.type = '4';\n      sessionStorage.setItem('order_info', JSON.stringify(params));\n      window.location.href = '#/order-pay';\n    };\n\n    function freshGetList() {\n      $scope.pageNum = 1;\n      getList();\n    } // stripe和checkuot交易状态查询\n\n\n    function stripeTradeQuery(parmas) {\n      layer.load(2);\n      dsp.postFun('app/pay/stripeTradeQuery', parmas, function (_ref4) {\n        var data = _ref4.data;\n        layer.closeAll('loading');\n\n        if (data.code == 200) {\n          $scope.stripeStatus = +data.data;\n\n          if (parmas && parmas.paymentType === 'Stripe') {\n            /** 1待支付 2支付中 3支付成功 4支付失败 5支付异常 6支付取消 */\n            switch (+data.data) {\n              case 1:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 2:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 3:\n                layer.msg('Payment Successful.');\n                break;\n\n              case 4:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              case 5:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              case 6:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              default:\n                '';\n            }\n          }\n\n          if (parmas && parmas.paymentType === 'Checkout') {\n            /** 1待支付 2支付中 3支付成功 4支付失败 5支付异常 6支付取消 */\n            switch (+data.data) {\n              case 1:\n                layer.msg('Awaiting Payment.');\n                break;\n\n              case 2:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 3:\n                layer.msg('Payment Successful.');\n                break;\n\n              case 4:\n                layer.msg('Payment via CheckOut failed. Please try again.');\n                break;\n\n              case 5:\n                layer.msg('Payment via CheckOut failed. Please try again.');\n                break;\n\n              case 6:\n                layer.msg('Payment Cancelled.');\n                break;\n\n              default:\n                break;\n            } // window.location.href = window.location.origin + '/myCJ.html#/drop-proce';\n\n\n            getList();\n          }\n        } else {\n          return layer.msg(data.msg);\n        }\n      }, function (err) {\n        console.log(err);\n      });\n    } // checkout交易状态查询\n\n\n    function getCheckoutTrade() {\n      var checkoutObj = bs.decode(localStorage.getItem('checkoutObj') || '') && JSON.parse(bs.decode(localStorage.getItem('checkoutObj') || ''));\n      localStorage.removeItem('checkoutObj');\n      localStorage.removeItem('ckoSessionId');\n\n      if (!(checkoutObj && checkoutObj.paymentType === 'Checkout')) {\n        return;\n      }\n\n      var parmas = {\n        'orderId': checkoutObj && checkoutObj.orderId,\n        'code': checkoutObj && checkoutObj.stripeCode,\n        'paymentType': checkoutObj && checkoutObj.paymentType,\n        'payId': checkoutObj && checkoutObj.payId,\n        'sessionId': $scope.ckoSessionId\n      };\n      stripeTradeQuery(parmas);\n    }\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovZHJvcHNoaXBwaW5nLW9yZGVycy9kcm9wLWF3YWl0LXBheW1lbnQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vc3JjL3BhZ2VzL215Y2ovZHJvcHNoaXBwaW5nLW9yZGVycy9kcm9wLWF3YWl0LXBheW1lbnQuanM/MDJiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBTkFOX0FDQ09VTlQgfSBmcm9tICdAc3JjL3BhZ2VzL215Y2ovbXljai5jb25zdGFudCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJvcEF3YWl0UGF5bWVudEZhY3RvcnkoYW5ndWxhcikge1xyXG4gIGNvbnN0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdkcm9wLWF3YWl0LXBheW1lbnQubW9kdWxlJywgWydzZXJ2aWNlJ10pO1xyXG4gIC8vIHZhciBtYXJrMSA9IDA7XHJcbiAgYXBwLmNvbnRyb2xsZXIoJ2Ryb3AtYXdhaXQtcGF5bWVudC5jdHJsJywgWyckc2NvcGUnLCAnZHNwJywnJHNjZScsXHJcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCBkc3AsJHNjZSkge1xyXG4gICAgICBsZXQgYmFzZTY0ID0gbmV3IEJhc2U2NCgpO1xyXG4gICAgICBkc3AuZG9tYWluRGF0YSgpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIC8vIOivt+axguaIkOWKn+eahOe7k+aenFxyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcclxuICAgICAgICAkc2NvcGUuaXNjaiA9IHJlcy5pc2NqO1xyXG4gICAgICAgIGlmICgkc2NvcGUuaXNjaiA9PSAnMScpIHtcclxuICAgICAgICAgIC8vY2pcclxuICAgICAgICAgICRzY29wZS53ZWJzaXRlTmFtZSA9ICdDSic7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8v5a6i5oi3XHJcbiAgICAgICAgICAkc2NvcGUud2Vic2l0ZU5hbWUgPSByZXMud2Vic2l0ZU5hbWUgfHwgJ0NKJztcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgICRzY29wZS5kYXRhRm91bmQgPSB0cnVlO1xyXG4gICAgICAkc2NvcGUuemRhdGFGb3VuZCA9IHRydWU7XHJcbiAgICAgIHZhciBicyA9IG5ldyBCYXNlNjQoKTtcclxuICAgICAgbGV0IG9yZFplcm9UaXBzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ29yZFplcm9UaXBzJykgfHwgJydcclxuICAgICAgaWYob3JkWmVyb1RpcHMpe1xyXG4gICAgICAgICRzY29wZS5hZGRDYXJ0UmVzb25GbGFnID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUuYWRkQ2FydFJlc29uVGV4dCA9IG9yZFplcm9UaXBzO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdvcmRaZXJvVGlwcycpXHJcbiAgICAgIH1cclxuICAgICAgLy/nu5nlt6bkvqfnmoTlr7zoiKrmt7vliqDmu5rliqjkuovku7ZcclxuICAgICAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPj0gMCkge1xyXG4gICAgICAgICAgJCgnLmxlZnQtbmF2JykuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXHJcbiAgICAgICAgICAgIHRvcDogJzgwcHgnXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAkKCcubGVmdC1uYXYnKS5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcclxuICAgICAgICAgICAgdG9wOiAnODBweCdcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvL+iOt+WPlnVybOS4reeahOWPguaVsOaWueazlVxyXG4gICAgICBmdW5jdGlvbiBnZXRVcmxQYXJhbUJ5S2V5IChocmVmLCBrZXkpIHtcclxuICAgICAgICBpZighaHJlZikgcmV0dXJuICcnXHJcbiAgICAgICAgdmFyIHZhcnMgPSBocmVmLnNwbGl0KFwiJlwiKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDtpIDwgdmFycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgdmFyIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgIGlmKHBhaXJbMF0gPT0ga2V5KSB7IHJldHVybiBwYWlyWzFdOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBpbml0SXNDaGVja291dCgpIHtcclxuICAgICAgICAvLyDliKTmlq3lvZPliY3mmK/lkKblrZjlnKhja29zZXNzaW9uaWRcclxuICAgICAgICAkc2NvcGUuY2tvU2Vzc2lvbklkID0gYmFzZTY0LmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2tvU2Vzc2lvbklkJykgfHwgJycpICYmIEpTT04ucGFyc2UoYmFzZTY0LmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2tvU2Vzc2lvbklkJykgfHwgJycpKVxyXG4gICAgICAgIGlmKCRzY29wZS5ja29TZXNzaW9uSWQpIHtcclxuICAgICAgICAgIGdldExpc3QoKVxyXG4gICAgICAgICAgZ2V0Q2hlY2tvdXRUcmFkZSgpXHJcbiAgICAgICAgICByZXR1cm4gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgaWYgKGhyZWYuaW5kZXhPZignPycpID49IDApIHtcclxuICAgICAgICAgIGNvbnN0IHJlZ2V4cCA9IC9cXD9bXFx3XFxXXSpcXCMvXHJcbiAgICAgICAgICAkc2NvcGUuc2Vzc2lvbklkID0gZ2V0VXJsUGFyYW1CeUtleShocmVmLm1hdGNoKHJlZ2V4cCkgJiYgaHJlZi5tYXRjaChyZWdleHApWzBdLnNsaWNlKDEsLTEpLCdja28tcGF5bWVudC1pZCcpIHx8IGdldFVybFBhcmFtQnlLZXkoaHJlZi5tYXRjaChyZWdleHApICYmIGhyZWYubWF0Y2gocmVnZXhwKVswXS5zbGljZSgxLC0xKSwnY2tvLXNlc3Npb24taWQnKVxyXG4gICAgICAgICAgaWYoJHNjb3BlLnNlc3Npb25JZCkge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2tvU2Vzc2lvbklkJywgYmFzZTY0LmVuY29kZShKU09OLnN0cmluZ2lmeSgkc2NvcGUuc2Vzc2lvbklkKSkpO1xyXG4gICAgICAgICAgICAvLyDlkI7nq6/mjqXlj6Pov5Tlm57nirbmgIHovoPmhaLvvIzlu7bov5/kuIDnp5Llho3liLfmlrDlvZPliY3pobXpnaJcclxuICAgICAgICAgICAgbGV0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxyXG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbXlDSi5odG1sIy9kcm9wc2hpcHBpbmctb3JkZXJzJ1xyXG4gICAgICAgICAgICB9LCAyMDApXHJcbiAgICAgICAgICAgIGdldExpc3QoKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaW5pdElzQ2hlY2tvdXQoKVxyXG5cclxuICAgICAgZnVuY3Rpb24gZ2V0RWxlbWVudExlZnQoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBhY3R1YWxMZWZ0ID0gZWxlbWVudC5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIHZhciBjdXJyZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XHJcblxyXG4gICAgICAgIHdoaWxlIChjdXJyZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBhY3R1YWxMZWZ0ICs9IGN1cnJlbnQub2Zmc2V0TGVmdDtcclxuICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm9mZnNldFBhcmVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhY3R1YWxMZWZ0O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBnZXRFbGVtZW50VG9wKGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgYWN0dWFsVG9wID0gZWxlbWVudC5vZmZzZXRUb3A7XHJcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgIGFjdHVhbFRvcCArPSBjdXJyZW50Lm9mZnNldFRvcDtcclxuICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm9mZnNldFBhcmVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhY3R1YWxUb3A7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8v6K6+572u6buY6K6k5pe26Ze0XHJcbiAgICAgIGZ1bmN0aW9uIEdldERhdGVTdHIoQWRkRGF5Q291bnQpIHtcclxuICAgICAgICB2YXIgZGQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGRkLnNldERhdGUoZGQuZ2V0RGF0ZSgpICsgQWRkRGF5Q291bnQpOy8v6I635Y+WQWRkRGF5Q291bnTlpKnlkI7nmoTml6XmnJ9cclxuICAgICAgICB2YXIgeSA9IGRkLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgdmFyIG0gPSBkZC5nZXRNb250aCgpICsgMTsvL+iOt+WPluW9k+WJjeaciOS7veeahOaXpeacn1xyXG4gICAgICAgIHZhciBkID0gZGQuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIGlmIChtIDwgMTApIHtcclxuICAgICAgICAgIG0gPSAnMCcgKyBtXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkIDwgMTApIHtcclxuICAgICAgICAgIGQgPSAnMCcgKyBkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB5ICsgXCItXCIgKyBtICsgXCItXCIgKyBkO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBhRGF0ZSA9IEdldERhdGVTdHIoLTQ1KTtcclxuICAgICAgdmFyIGVuRGF0ZSA9IEdldERhdGVTdHIoMCk7XHJcbiAgICAgICQoXCIjY2otc3RpbWVcIikudmFsKGFEYXRlKTsgICAvL+WFs+mUruivreWPpVxyXG5cclxuICAgICAgLy/pvKDmoIfliJLov4fkuovku7ZcclxuICAgICAgJCgnLm9yZGVycy10YWJsZScpLm9uKCdtb3VzZWVudGVyJywgJy5vcmRlci1kZXRhaWwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gJCh0aGlzKS5uZXh0KCkuc2hvdygpO1xyXG4gICAgICAgICQoJy5vcmRlcnMtdGFibGUgLm9yZGVyLWRldGFpbCcpLnJlbW92ZUNsYXNzKCdvcmRlci1kZXRhaWwtYWN0aXZlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnb3JkZXItZGV0YWlsLWFjdGl2ZScpO1xyXG4gICAgICB9KVxyXG4gICAgICAkKCcub3JkZXJzLXRhYmxlJykub24oJ21vdXNlbGVhdmUnLCAnLm9yZGVyLWRldGFpbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLm5leHQoKS5oaWRlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgICQoJy5vcmRlcnMtdGFibGUnKS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcub3JkZXJzLXRhYmxlIC5vcmRlci1kZXRhaWwnKS5yZW1vdmVDbGFzcygnb3JkZXItZGV0YWlsLWFjdGl2ZScpO1xyXG4gICAgICB9KTtcclxuICAgICAgLy/lr7zlh7rorqLljZXnmoTmj5DnpLpcclxuICAgICAgJCgnLmV4cG9ydC1vcmRlcnMnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGF5ZXIubXNnKCdUaGlzIGZlYXR1cmUgd2lsbCB3b3JrIHNvb24uJylcclxuICAgICAgfSlcclxuXHJcbiAgICAgICRzY29wZS5jamRyb3Bhd2FpdHBMaXN0ID0gJyc7Ly/lrZjlgqjmiYDmnInnmoTorqLljZVcclxuICAgICAgJHNjb3BlLmVycG9yZFRudW0gPSAnJzsvL+WtmOWCqOiuouWNleeahOadoeaVsFxyXG4gICAgICAkc2NvcGUucGFnZVNpemUgPSAnNTAnO1xyXG4gICAgICAkc2NvcGUucGFnZU51bSA9IDE7XHJcbiAgICAgIGdldExpc3QoKTtcclxuICAgICAgZnVuY3Rpb24gZ2V0TGlzdCgpIHtcclxuICAgICAgICAkc2NvcGUuY2pkcm9wYXdhaXRwTGlzdCA9IFtdO1xyXG4gICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgdmFyIG9yZElkID0gJC50cmltKCQoJy5vcmQtc2VhcmNoLWlucCcpLnZhbCgpKTtcclxuICAgICAgICB2YXIgZGFwRGF0YSA9IHt9O1xyXG4gICAgICAgIGRhcERhdGEuZGF0YSA9IHt9O1xyXG4gICAgICAgIGRhcERhdGEuZGF0YS5zdGF0dXMgPSAnMyc7XHJcbiAgICAgICAgZGFwRGF0YS5kYXRhLnBhZ2UgPSAkc2NvcGUucGFnZU51bTtcclxuICAgICAgICBkYXBEYXRhLmRhdGEubGltaXQgPSAkc2NvcGUucGFnZVNpemU7XHJcbiAgICAgICAgZGFwRGF0YS5kYXRhLmRhdGVCZWdpbiA9ICQoJyNjai1zdGltZScpLnZhbCgpOy8vY2rlvIDlp4vml7bpl7RcclxuICAgICAgICBkYXBEYXRhLmRhdGEuZGF0ZUVuZCA9ICQoJyNjai1ldGltZScpLnZhbCgpOy8vY2rlvIDlp4vml7bpl7RcclxuICAgICAgICBpZiAob3JkSWQuaW5kZXhPZignQ0onKSA+PSAwKSB7XHJcbiAgICAgICAgICBkYXBEYXRhLmRhdGEubnVtaWQgPSBvcmRJZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZGFwRGF0YS5kYXRhLm9yZGVySWQgPSBvcmRJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGFwRGF0YS5kYXRhID0gSlNPTi5zdHJpbmdpZnkoZGFwRGF0YS5kYXRhKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXBEYXRhKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGRhcERhdGEpKVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcXVlcnlTaGlwbWVudHNPcmRlcicsIEpTT04uc3RyaW5naWZ5KGRhcERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgdmFyIGNqZHJvcGF3YWl0cCA9IEpTT04ucGFyc2UoZGF0YS5kYXRhLnJlc3VsdClcclxuICAgICAgICAgICRzY29wZS5lcnBvcmRUbnVtID0gY2pkcm9wYXdhaXRwLmNvdW50TnVtYmVyO1xyXG4gICAgICAgICAgJHNjb3BlLmZ1bGZpbGxtZW50U3RhdHVzID0gY2pkcm9wYXdhaXRwLmZ1bGZpbGxtZW50U3RhdHVzO1xyXG4gICAgICAgICAgJHNjb3BlLmNqZHJvcGF3YWl0cExpc3QgPSBjamRyb3Bhd2FpdHAub3JkZXJMaXN0Oy8v6I635Y+W5omA5pyJ55qE6K6i5Y2VXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuY2pkcm9wYXdhaXRwTGlzdClcclxuICAgICAgICAgIGlmICgkc2NvcGUuZXJwb3JkVG51bSA+IDApIHtcclxuICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkc3AuYWRkTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwLHt3aWR0aDonMTAwJSd9KVxyXG4gICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICRzY29wZS5vcmRzdGF0dXNOdW0gPSBjamRyb3Bhd2FpdHAuYWxsT3JkZXJDb3VudDI7Ly/lkITnp43nirbmgIHorqLljZXnmoTmlbDph49cclxuICAgICAgICAgIG51bUZ1bigpOy8v6LCD55So57uZ6K6i5Y2V6LWL5YC855qE5Ye95pWwXHJcbiAgICAgICAgICAkc2NvcGUudG90YWxDb3VudHMgPSBNYXRoLmNlaWwoJHNjb3BlLmVycG9yZFRudW0gLyAkc2NvcGUucGFnZVNpemUpO1xyXG4gICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3BhZ2UtZGF0YScsIHtcclxuICAgICAgICAgICAgcGFnZU51bTogJHNjb3BlLnBhZ2VOdW0sXHJcbiAgICAgICAgICAgIHRvdGFsTnVtOiAkc2NvcGUudG90YWxDb3VudHMsXHJcbiAgICAgICAgICAgIHRvdGFsQ291bnRzOiAkc2NvcGUuZXJwb3JkVG51bSxcclxuICAgICAgICAgICAgcGFnZVNpemU6ICRzY29wZS5wYWdlU2l6ZSxcclxuICAgICAgICAgICAgcGFnZXNpemVMaXN0OiBbJzMwJywnNTAnLCcxMDAnXVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS4kb24oJ3BhZ2VkYXRhLWZhJywgZnVuY3Rpb24gKGQsIGRhdGEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICRzY29wZS5wYWdlTnVtID0gZGF0YS5wYWdlTnVtO1xyXG4gICAgICAgICRzY29wZS5wYWdlU2l6ZSA9IGRhdGEucGFnZVNpemU7XHJcbiAgICAgICAgZ2V0TGlzdCgpO1xyXG4gICAgICB9KTtcclxuICAgICAgLy/nu5norqLljZXnirbmgIHotYvlgLznmoTlh73mlbBcclxuICAgICAgZnVuY3Rpb24gbnVtRnVuKCkge1xyXG4gICAgICAgICRzY29wZS5hd2FpdE51bSA9ICRzY29wZS5vcmRzdGF0dXNOdW0ueWk7XHJcbiAgICAgICAgJHNjb3BlLmRyb3Bwcm9jZXNzTnVtID0gJHNjb3BlLm9yZHN0YXR1c051bS5lcjtcclxuICAgICAgICAkc2NvcGUuZHJvcHByb2Nlc3NlZE51bSA9ICRzY29wZS5vcmRzdGF0dXNOdW0uc2FuO1xyXG4gICAgICAgICRzY29wZS5jb21wbGV0ZU51bSA9ICRzY29wZS5vcmRzdGF0dXNOdW0uc2k7XHJcbiAgICAgICAgJHNjb3BlLmNsb3NlZE51bSA9ICRzY29wZS5vcmRzdGF0dXNOdW0ud3U7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLm5hdkxpc3QgPSBbXHJcbiAgICAgICAge25hbWU6J0F3YWl0aW5nIFBheW1lbnQnLGhyZWY6JyMvZHJvcHNoaXBwaW5nLW9yZGVycycsc2hvdzp0cnVlfSxcclxuICAgICAgICB7bmFtZTonUHJvY2Vzc2luZycsaHJlZjonIy9kcm9wLXByb2NlJ30sXHJcbiAgICAgICAge25hbWU6J1Byb2Nlc3NlZCcsaHJlZjonIy9kcm9wLXByb2Nlc3NlZCd9LFxyXG4gICAgICAgIHtuYW1lOidDb21wbGV0ZWQnLGhyZWY6JyMvZHJvcC1jb21wbGV0J30sXHJcbiAgICAgICAge25hbWU6J0Nsb3NlZCcsaHJlZjonIy9kcm9wLWNsb3NlJ30sXHJcbiAgICAgIF1cclxuICAgICAgdmFyIGN1c3RvbWVyQ2pOdW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VzdG9tZXJDak51bScpIHx8ICcnO1xyXG4gICAgICB2YXIgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpID8gYnMuZGVjb2RlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKSkgOiAnJztcclxuICAgICAgLy8g6I635Y+W5Liq5Lq65L+h5oGvXHJcbiAgICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgPyBicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpIDogXCJcIjtcclxuICAgICAgY29uc3Qgbm9JbnZvaWNlQXJyID0gZHNwLm5vSW52b2ljZUFycjtcclxuICAgICAgZnVuY3Rpb24gZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeyB1c2VySWQsIHRva2VuIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvaW5mby91c2VyaW5mbycsIHBhcmFtcywgKHtkYXRhfSk9PiB7XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKGRhdGEucmVzdWx0KVswXVxyXG4gICAgICAgICAgY29uc3QgY2pOdW0gPSByZXN1bHQubnVtO1xyXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1c3RvbWVyQ2pOdW0nLGNqTnVtKVxyXG4gICAgICAgICAgJHNjb3BlLmlzSGlkZUludm9pY2VGbGFnID0gbm9JbnZvaWNlQXJyLmluY2x1ZGVzKGNqTnVtKVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgaWYoIWN1c3RvbWVyQ2pOdW0pe1xyXG4gICAgICAgIGdldFVzZXJJbmZvKClcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgJHNjb3BlLmlzSGlkZUludm9pY2VGbGFnID0gbm9JbnZvaWNlQXJyLmluY2x1ZGVzKGN1c3RvbWVyQ2pOdW0pXHJcbiAgICAgIH1cclxuICAgICAgLy/nlqvmg4XmnJ/pl7Tkvb/nlKhcclxuICAgICAgbGV0IHBheUl0ZW0scGF5SW5kZXg7XHJcbiAgICAgICRzY29wZS5jb3VudHJ5VGlwRnVuID0gKGl0ZW0saW5kZXgpPT57XHJcbiAgICAgICAgLy8g5piv5ZCm6aqM6K+B6YKu5Lu25aSE55CGXHJcbiAgICAgICAgaWYgKGRzcC5pc1ZlcmlmeUVtYWlsKCkpIHJldHVyblxyXG4gICAgICAgIHBheUl0ZW0gPSBpdGVtO1xyXG4gICAgICAgIHBheUluZGV4PWluZGV4O1xyXG4gICAgICAgIC8qKiAyMDIxLTAyLTAxIHBheeaUr+S7mOaKteaJo+S4reWIpOaWrSAqL1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvZ29vZHNJbmZvL2NoZWNrT3JkZXJPdXRHb29kc0luZm9PcHQnLCB7XHJcbiAgICAgICAgICBzaGlwT3JkZXJJZDogaXRlbS5JRFxyXG4gICAgICAgIH0sICh7ZGF0YX0pID0+IHtcclxuICAgICAgICAgIGlmKCtkYXRhLmNvZGUgPT09IDIwMCkge1xyXG4gICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL2Rpc3B1dGUvZ2V0VGlwc0xpc3RCeVR5cGUnLHt9LCBkYXRhID0+e1xyXG4gICAgICAgICAgICAgIGxldCBvcmVzdWx0ID0gZGF0YS5kYXRhLnJlc3VsdD9KU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpOicnO1xyXG4gICAgICAgICAgICAgIGlmKG9yZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmhvbGlkYXlUaXBzID0ge1xyXG4gICAgICAgICAgICAgICAgICB0aXRsZTpvcmVzdWx0LnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICBjb250ZW50OiRzY2UudHJ1c3RBc0h0bWwob3Jlc3VsdC5jb250ZW50KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dDb3VudHJ5VGlwPXRydWU7XHJcbiAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGF5RnVuKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9LGVycj0+e1xyXG4gICAgXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5tc2coZGF0YT8ubWVzc2FnZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBlcnIgPT4ge30pXHJcbiAgICAgICAgXHJcbiAgICAgIH1cclxuICAgICAgLy8gJHNjb3BlLnBheUZ1biA9IGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAkc2NvcGUucGF5RnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBpdGVtPXBheUl0ZW07XHJcbiAgICAgICAgY29uc29sZS5sb2cocGF5SXRlbSlcclxuICAgICAgICBsZXQgaW5kZXggPSBwYXlJbmRleDtcclxuICAgICAgICBsZXQgaG9tZVR5cGUgPSBwYXlJdGVtLkhPTUVUWVBFO1xyXG4gICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgJHNjb3BlLm5vSW52ZW50b3J5QXJyID0gW107XHJcbiAgICAgICAgJHNjb3BlLml0ZW1NdUlkID0gaXRlbS5JRDtcclxuICAgICAgICBkc3AucG9zdEZ1bignb3JkZXItY2VudGVyL3Byb3h5T3JkZXIvcGF5UmVsZXZhbnQvZ2V0UGFyZW50T3JkZXJJbmZvJywge1xyXG4gICAgICAgICAgc2hpcG1lbnRzSWQ6IGl0ZW0uSUQsXHJcbiAgICAgICAgICB0b3RhbEFtb3VudDogaXRlbS5PUkRFUk1PTkVZLFxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zdCByZXMgPSBkYXRhLmRhdGFcclxuICAgICAgICBpZiAocmVzLmRhdGEuc2hpcG1lbnRzSWQgJiYgcmVzLmRhdGEub3JkZXJDb2Rlcykge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVkdWN0aW9uT2ZJbnZlbnRvcnknKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ29yZGVyTnVtYmVycycpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnc2hpcG1lbnRzSWQnKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29yZGVyTnVtYmVycycsIEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLm9yZGVyQ29kZXMpKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NoaXBtZW50c0lkJywgSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuc2hpcG1lbnRzSWQpKTtcclxuICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnL25ld215Y2ovZHJvcHNoaXBwaW5nL29yZGVyQ29uZmlybWF0aW9uJztcclxuICAgICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKHJlcy5tZXNzYWdlKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgaWYoaG9tZVR5cGUhPScwJyl7XHJcbiAgICAgICAgICBkc3AucG9zdEZ1bignb3JkZXIvb3JkZXIvY2hlY2tJbnZlbnRvcnknLCB7XHJcbiAgICAgICAgICAgIHNoaXBtZW50c09yZGVySWQ6IGl0ZW0uSURcclxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zaG93Q291bnRyeVRpcD1mYWxzZTsgLy8g55ar5oOF5o+Q56S65by556qX6ZqQ6JePXHJcbiAgICAgICAgICAgIGxldCByZXNEYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICBpZiAocmVzRGF0YS5zdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5ub0ludmVudG9yeUFyciA9IHJlc0RhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgIGlmICgkc2NvcGUubm9JbnZlbnRvcnlBcnIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW52ZW50b3R5VGlwRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm5vSW52ZW50b3J5QXJyLmxlbmd0aCA9PSBpdGVtLk9SREVSTlVNQkVSKSB7Ly/miYDmnInlrZDorqLljZXpg73msqHmnInlupPlrZhcclxuICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdJbnN1ZmZpY2llbnQgaW52ZW50b3J5LiBQYXltZW50IGZhaWxlZC4nKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7Ly/pg73mnInlupPlrZhcclxuICAgICAgICAgICAgICAgICRzY29wZS5tdW9yZE1vbmV5ID0gYnMuZW5jb2RlKGl0ZW0uT1JERVJNT05FWS50b1N0cmluZygpKTsvL+iuouWNlemHkeminVxyXG4gICAgICAgICAgICAgICAgcGF5RnVuMihpdGVtLCBpbmRleCk7Ly/mlrDniYjmlK/ku5hcclxuICAgICAgICAgICAgICAgICRzY29wZS5wYXlUeXBlID0gMjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmVycm9yU2hvd0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmxvZ2lzdGljc1JlYXNvbkxpc3QgPSB0ZW1wLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgcmVjb3JkTnVtOiBpdGVtLFxyXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkYXRhLmRhdGEubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICRzY29wZS5tdW9yZE1vbmV5ID0gYnMuZW5jb2RlKGl0ZW0uT1JERVJNT05FWS50b1N0cmluZygpKTsvL+iuouWNlemHkeminVxyXG4gICAgICAgICAgcGF5RnVuMihpdGVtLCBpbmRleCk7Ly/mlrDniYjmlK/ku5hcclxuICAgICAgICAgICRzY29wZS5wYXlUeXBlID0gMjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnN1cmVEZWxOb2ludmVuT3JkID0gZnVuY3Rpb24gKCkgey8v56e76Zmk5peg5bqT5a2Y55qE6K6i5Y2VXHJcbiAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgIGxldCByZW1vdmVOb0ludmVuSWRzID0gJHNjb3BlLm5vSW52ZW50b3J5QXJyLmpvaW4oJywnKVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdvcmRlci9vcmRlci9yZW1vdmVPcmRlckluU2hpcG1lbnRzT3JkZXInLCB7XHJcbiAgICAgICAgICBzaGlwbWVudHNPcmRlcklkOiAkc2NvcGUuaXRlbU11SWQsXHJcbiAgICAgICAgICByZW1vdmVPcmRlcklkczogcmVtb3ZlTm9JbnZlbklkc1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGV0IHJlc0RhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICBpZiAocmVzRGF0YS5zdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaW52ZW50b3R5VGlwRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmcmVzaEdldExpc3QoKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKHJlc0RhdGEubWVzc2FnZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJylcclxuICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJylcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuc2VydmljZUdvb2RzTW9kYWwgPSBmYWxzZTtcclxuICAgICAgJHNjb3BlLmludmVudG9yeVNob3J0YWdlID0gW107XHJcbiAgICAgICRzY29wZS5oYW5kbGVDbG9zZVNlcnZpY2VHb29kcyA9ICgpID0+IHtcclxuICAgICAgICAkc2NvcGUuc2VydmljZUdvb2RzTW9kYWwgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuaW52ZW50b3J5U2hvcnRhZ2UgPSBbXTtcclxuICAgICAgfVxyXG4gICAgICBmdW5jdGlvbiBwYXlGdW4yKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgJHNjb3BlLnBheU9yZE51bSA9IGJzLmVuY29kZShpdGVtLklEKTtcclxuICAgICAgICAkc2NvcGUub3JkcXVhbnRpdHkgPSBicy5lbmNvZGUoaXRlbS5PUkRFUk5VTUJFUi50b1N0cmluZygpKTtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGBteUNKLmh0bWw/cm91dGU9cGF5bWVudCMvcGF5bWVudC8keyRzY29wZS5wYXlPcmROdW19LyR7JHNjb3BlLm11b3JkTW9uZXl9LyR7JHNjb3BlLm9yZHF1YW50aXR5fWBcclxuICAgICAgfVxyXG4gICAgICBmdW5jdGlvbiBwYXlGdW4xKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGl0ZW0uT1JERVJNT05FWSlcclxuICAgICAgICAkc2NvcGUuaXRlbUluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgJHNjb3BlLml0ZW1JZCA9IGl0ZW0uSUQ7XHJcbiAgICAgICAgJHNjb3BlLnNpeW91Y2FuZ2t1ID0gJ2luaXQnO1xyXG4gICAgICAgIHZhciBwYXlEYXRhID0ge307XHJcbiAgICAgICAgcGF5RGF0YS5zaGlwT3JkZXJJZCA9IGl0ZW0uSUQ7XHJcbiAgICAgICAgcGF5RGF0YS5tb25leSA9IGl0ZW0uT1JERVJNT05FWTtcclxuICAgICAgICBwYXlEYXRhLnNpeW91Y2FuZ2t1ID0gJ2luaXQnO1xyXG4gICAgICAgIC8vIGNqL2NqT3JkZXJQYXkvY2hlY2tQYXlcclxuICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL2NoZWNrUGF5JywgSlNPTi5zdHJpbmdpZnkocGF5RGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5jb2RlID09ICcyMDUnKSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZyhkYXRhLmRhdGEubWVzc2FnZSlcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2NvcGUudG90YWxTZXJ2ZXJQcmljZSA9IGRhdGEuZGF0YS50b3RhbFNlcnZlclByaWNlO1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5jaGlsZE9yZGVycykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEudG90YWxQcml2YWNlKVxyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxTZXJ2ZXJQcmljZSA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFNlcnZlclByaWNlID0gZGF0YS5kYXRhLnRvdGFsU2VydmVyUHJpY2U7XHJcbiAgICAgICAgICAgIGlmICgoZGF0YS5kYXRhLnRvdGFsUHJpdmFjZSAtIDApICsgKGRhdGEuZGF0YS5iYWxhbmNlIC0gMCkgPj0gaXRlbS5PUkRFUk1PTkVZKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmJhbGFuY2VNID0gMFxyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflupPlrZjliqDkvZnpop3lpKfkuo7orqLljZXph5Hpop0nKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICRzY29wZS5iYWxhbmNlTSA9IGRhdGEuZGF0YS5iYWxhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuaW52ZW50b3J5TGlzdCAmJiB1c2VySWQgIT0gJzczOENCMkJELTBEOEMtNDU4Ny05Nzc5LThDRkE5Rjc4ODA0NycpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuaW52ZW50b3J5TGlzdCA9IGRhdGEuZGF0YS5pbnZlbnRvcnlMaXN0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICRzY29wZS5pbnZlbnRvcnlMaXN0ID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmJhbGFuY2VNKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuaW52ZW50b3J5TGlzdClcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5iYWxhbmNlTSA+IDApIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYmFsYW5jZU0pXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmlzRGtGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmludmVudG9yeUxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5pc2tjRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmlza2NGbGFnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuYmFsYW5jZU0gPD0gMCAmJiAkc2NvcGUuaW52ZW50b3J5TGlzdC5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgIG1laVhpRnVuKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxQcml2YWNlID0gZGF0YS5kYXRhLnRvdGFsUHJpdmFjZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnU29ycnksIFRoZSBvcmRlciByZWxhdGVkIHRvIHRoaXMgcGF5bWVudCBpcyBub3QgZm91bmQsIHBsZWFzZSBkb3VibGUgY2hlY2sgYW5kIHJlc3VibWl0IGl0IG9yIGNvbnRhY3QgeW91ciBhZ2VudC4nLCB7IHRpbWU6IDUwMDAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGZ1bmN0aW9uIG1laVhpRnVuKCkge1xyXG4gICAgICAgICRzY29wZS5zaXlvdWNhbmdrdSA9ICfnvo7opb8nO1xyXG4gICAgICAgIHZhciBPUkRFUk1PTkVZID0gJHNjb3BlLm11b3JkTW9uZXk7XHJcbiAgICAgICAgT1JERVJNT05FWSA9IGJzLmRlY29kZShPUkRFUk1PTkVZKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKE9SREVSTU9ORVkpXHJcbiAgICAgICAgdmFyIHBheURhdGEgPSB7fTtcclxuICAgICAgICBwYXlEYXRhLnNoaXBPcmRlcklkID0gJHNjb3BlLml0ZW1JZDtcclxuICAgICAgICBwYXlEYXRhLm1vbmV5ID0gT1JERVJNT05FWTtcclxuICAgICAgICBwYXlEYXRhLnNpeW91Y2FuZ2t1ID0gJ+e+juilvyc7XHJcbiAgICAgICAgLy8gY2ovY2pPcmRlclBheS9jaGVja1BheVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvY2hlY2tQYXknLCBKU09OLnN0cmluZ2lmeShwYXlEYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgICAkc2NvcGUudG90YWxTZXJ2ZXJQcmljZSA9IGRhdGEuZGF0YS50b3RhbFNlcnZlclByaWNlO1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5jaGlsZE9yZGVycykge1xyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxTZXJ2ZXJQcmljZSA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFNlcnZlclByaWNlID0gZGF0YS5kYXRhLnRvdGFsU2VydmVyUHJpY2U7XHJcbiAgICAgICAgICAgIHZhciBtdU9yZE1vbmV5ID0gJHNjb3BlLm11b3JkTW9uZXk7XHJcbiAgICAgICAgICAgICRzY29wZS5pbnZlbnRvcnlMaXN0ID0gZGF0YS5kYXRhLmludmVudG9yeUxpc3Q7XHJcbiAgICAgICAgICAgIG11T3JkTW9uZXkgPSBicy5kZWNvZGUobXVPcmRNb25leSkvL+aKteaJo+WQjueahOmHkeminVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuaW52ZW50b3J5TGlzdClcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhLnRvdGFsUHJpdmFjZSAtIDAsIChkYXRhLmRhdGEudG90YWxQcml2YWNlIC0gMCkgPD0gKG11T3JkTW9uZXkgLSAwKSlcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5pbnZlbnRvcnlMaXN0ICYmICRzY29wZS5pbnZlbnRvcnlMaXN0Lmxlbmd0aCA+IDAgJiYgKGRhdGEuZGF0YS50b3RhbFByaXZhY2UgLSAwKSA8PSAobXVPcmRNb25leSAtIDApKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmlza2NGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghJHNjb3BlLmludmVudG9yeUxpc3QpIHtcclxuICAgICAgICAgICAgICBtZWlEb25nRnVuKClcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJ215Q0ouaHRtbD9yb3V0ZT1wYXltZW50Iy9wYXltZW50LycgKyAkc2NvcGUucGF5T3JkTnVtICsgJy8nICsgJHNjb3BlLm11b3JkTW9uZXkgKyAnLycgKyAkc2NvcGUub3JkcXVhbnRpdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpdmFjZSA9IGRhdGEuZGF0YS50b3RhbFByaXZhY2U7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ1NvcnJ5LCBUaGUgb3JkZXIgcmVsYXRlZCB0byB0aGlzIHBheW1lbnQgaXMgbm90IGZvdW5kLCBwbGVhc2UgZG91YmxlIGNoZWNrIGFuZCByZXN1Ym1pdCBpdCBvciBjb250YWN0IHlvdXIgYWdlbnQuJywgeyB0aW1lOiA1MDAwIH0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICBmdW5jdGlvbiBtZWlEb25nRnVuKCkge1xyXG4gICAgICAgICRzY29wZS5zaXlvdWNhbmdrdSA9ICfnvo7kuJwnO1xyXG4gICAgICAgIHZhciBPUkRFUk1PTkVZID0gJHNjb3BlLm11b3JkTW9uZXk7XHJcbiAgICAgICAgT1JERVJNT05FWSA9IGJzLmRlY29kZShPUkRFUk1PTkVZKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKE9SREVSTU9ORVkpXHJcbiAgICAgICAgdmFyIHBheURhdGEgPSB7fTtcclxuICAgICAgICBwYXlEYXRhLnNoaXBPcmRlcklkID0gJHNjb3BlLml0ZW1JZDtcclxuICAgICAgICBwYXlEYXRhLm1vbmV5ID0gT1JERVJNT05FWTtcclxuICAgICAgICBwYXlEYXRhLnNpeW91Y2FuZ2t1ID0gJ+e+juS4nCc7XHJcbiAgICAgICAgLy8gY2ovY2pPcmRlclBheS9jaGVja1BheVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvY2hlY2tQYXknLCBKU09OLnN0cmluZ2lmeShwYXlEYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNoaWxkT3JkZXJzKSB7XHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFNlcnZlclByaWNlID0gMDtcclxuICAgICAgICAgICAgJHNjb3BlLnRvdGFsU2VydmVyUHJpY2UgPSBkYXRhLmRhdGEudG90YWxTZXJ2ZXJQcmljZTtcclxuICAgICAgICAgICAgdmFyIG11T3JkTW9uZXkgPSAkc2NvcGUubXVvcmRNb25leTtcclxuICAgICAgICAgICAgJHNjb3BlLnRvdGFsU2VydmVyUHJpY2UgPSBkYXRhLmRhdGEudG90YWxTZXJ2ZXJQcmljZTtcclxuICAgICAgICAgICAgJHNjb3BlLmludmVudG9yeUxpc3QgPSBkYXRhLmRhdGEuaW52ZW50b3J5TGlzdDtcclxuICAgICAgICAgICAgbXVPcmRNb25leSA9IGJzLmRlY29kZShtdU9yZE1vbmV5KS8v5oq15omj5ZCO55qE6YeR6aKdXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5pbnZlbnRvcnlMaXN0KVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEudG90YWxQcml2YWNlIC0gMCwgKGRhdGEuZGF0YS50b3RhbFByaXZhY2UgLSAwKSA8PSAobXVPcmRNb25leSAtIDApKVxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmludmVudG9yeUxpc3QgJiYgJHNjb3BlLmludmVudG9yeUxpc3QubGVuZ3RoID4gMCAmJiAoZGF0YS5kYXRhLnRvdGFsUHJpdmFjZSAtIDApIDw9IChtdU9yZE1vbmV5IC0gMCkpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuaXNrY0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnbXlDSi5odG1sP3JvdXRlPXBheW1lbnQjL3BheW1lbnQvJyArICRzY29wZS5wYXlPcmROdW0gKyAnLycgKyAkc2NvcGUubXVvcmRNb25leSArICcvJyArICRzY29wZS5vcmRxdWFudGl0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxQcml2YWNlID0gZGF0YS5kYXRhLnRvdGFsUHJpdmFjZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnU29ycnksIFRoZSBvcmRlciByZWxhdGVkIHRvIHRoaXMgcGF5bWVudCBpcyBub3QgZm91bmQsIHBsZWFzZSBkb3VibGUgY2hlY2sgYW5kIHJlc3VibWl0IGl0IG9yIGNvbnRhY3QgeW91ciBhZ2VudC4nLCB7IHRpbWU6IDUwMDAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vIHNraXBcclxuICAgICAgJHNjb3BlLmhhbmRsZVNraXAgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0gJHNjb3BlLnBhY2thZ2VMaXN0Lm1hcChvID0+ICh7IGNqT3JkZXJJZDogby5jak9yZGVySWQsIGNqUHJvZHVjdElkOiBvLmNqUHJvZHVjdElkIH0pKTtcclxuICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9jak9yZGVyUGF5L3JlbW92ZVBhY2snLCBwYXJhbXMsICh7IGRhdGEgfSkgPT4ge1xyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKTtcclxuICAgICAgICAgIGlmIChkYXRhLnN0YXR1c0NvZGUgPT09ICcyMDAnKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5pbnZlbnRvcnlNb2RhbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmcmVzaEdldExpc3QoKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgICAgfTtcclxuICBcclxuICAgICAgLy/kuI3nlKjkvZnpop3mirXmiaNcclxuICAgICAgJHNjb3BlLm5vRGtZZUZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUuaXNEa0ZsYWcgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuYmFsYW5jZU0gPSAwO1xyXG4gICAgICAgIGlmICgkc2NvcGUucGF5VHlwZSA9PSAyKSB7XHJcbiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJ215Q0ouaHRtbD9yb3V0ZT1wYXltZW50Iy9wYXltZW50LycgKyAkc2NvcGUucGF5T3JkTnVtICsgJy8nICsgJHNjb3BlLm11b3JkTW9uZXkgKyAnLycgKyAkc2NvcGUub3JkcXVhbnRpdHk7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuaW52ZW50b3J5TGlzdC5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICdpbml0Jykge1xyXG4gICAgICAgICAgICBtZWlYaUZ1bigpXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5zaXlvdWNhbmdrdSA9PSAn576O6KW/Jykge1xyXG4gICAgICAgICAgICBtZWlEb25nRnVuKClcclxuICAgICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICfnvo7kuJwnKSB7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnbXlDSi5odG1sP3JvdXRlPXBheW1lbnQjL3BheW1lbnQvJyArICRzY29wZS5wYXlPcmROdW0gKyAnLycgKyAkc2NvcGUubXVvcmRNb25leSArICcvJyArICRzY29wZS5vcmRxdWFudGl0eTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy/kvZnpop3mirXmiaNcclxuICAgICAgJHNjb3BlLmRlZHVjdE1GdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5iYWxhbmNlTSAtIGJzLmRlY29kZSgkc2NvcGUubXVvcmRNb25leSkgPiAwKSB7XHJcbiAgICAgICAgICAvLyBsYXllci5tc2coJ+S9memineWkp+S6juiuouWNlemHkeminSEhISEnKVxyXG4gICAgICAgICAgbG9jYXRpb24uaHJlZiA9ICdteUNKLmh0bWw/cm91dGU9cGF5bWVudCMvcGF5bWVudC8nICsgJHNjb3BlLnBheU9yZE51bSArICcvJyArICRzY29wZS5tdW9yZE1vbmV5ICsgJy8nICsgJHNjb3BlLm9yZHF1YW50aXR5O1xyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBkZURhdGEgPSB7fTtcclxuICAgICAgICBkZURhdGEuc2hpZCA9ICRzY29wZS5pdGVtSWQ7XHJcbiAgICAgICAgZGVEYXRhLm1vbmV5ID0gJHNjb3BlLmJhbGFuY2VNO1xyXG4gICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9maW5hbmNlL3ByZXBheW1lbnQnLCBKU09OLnN0cmluZ2lmeShkZURhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgJHNjb3BlLmlzRGtGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhLnJlc3VsdCkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ2RlZHVjdCBzdWNjZXNzJylcclxuICAgICAgICAgICAgJHNjb3BlLm11b3JkTW9uZXkgPSBicy5kZWNvZGUoJHNjb3BlLm11b3JkTW9uZXkpIC0gJHNjb3BlLmJhbGFuY2VNO1xyXG4gICAgICAgICAgICAkc2NvcGUubXVvcmRNb25leSA9ICRzY29wZS5tdW9yZE1vbmV5LnRvRml4ZWQoMik7XHJcbiAgICAgICAgICAgICRzY29wZS5tdW9yZE1vbmV5ID0gYnMuZW5jb2RlKCRzY29wZS5tdW9yZE1vbmV5LnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUucGF5VHlwZSA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9ICdteUNKLmh0bWw/cm91dGU9cGF5bWVudCMvcGF5bWVudC8nICsgJHNjb3BlLnBheU9yZE51bSArICcvJyArICRzY29wZS5tdW9yZE1vbmV5ICsgJy8nICsgJHNjb3BlLm9yZHF1YW50aXR5O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5pbnZlbnRvcnlMaXN0Lmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICdpbml0Jykge1xyXG4gICAgICAgICAgICAgICAgbWVpWGlGdW4oKVxyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICfnvo7opb8nKSB7XHJcbiAgICAgICAgICAgICAgICBtZWlEb25nRnVuKClcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5zaXlvdWNhbmdrdSA9PSAn576O5LicJykge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9ICdteUNKLmh0bWw/cm91dGU9cGF5bWVudCMvcGF5bWVudC8nICsgJHNjb3BlLnBheU9yZE51bSArICcvJyArICRzY29wZS5tdW9yZE1vbmV5ICsgJy8nICsgJHNjb3BlLm9yZHF1YW50aXR5O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9sb2NhdGlvbi5ocmVmID0gJyMvcGF5bWVudC8nKyRzY29wZS5wYXlPcmROdW0rJy8nKyRzY29wZS5tdW9yZE1vbmV5KycvJyskc2NvcGUub3JkcXVhbnRpdHk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ2RlZHVjdCBlcnJvcicpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICAvL+i3s+i/h+aKteW6k+WtmFxyXG4gICAgICAkc2NvcGUuc2tpcEtjRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5pc2tjRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5pbnZlbnRvcnlMaXN0ID0gW107XHJcbiAgICAgICAgaWYgKCRzY29wZS5iYWxhbmNlTSA8PSAwKSB7XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICdpbml0Jykge1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJ215Q0ouaHRtbD9yb3V0ZT1wYXltZW50Iy9wYXltZW50LycgKyAkc2NvcGUucGF5T3JkTnVtICsgJy8nICsgJHNjb3BlLm11b3JkTW9uZXkgKyAnLycgKyAkc2NvcGUub3JkcXVhbnRpdHk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5zaXlvdWNhbmdrdSA9PSAn576O6KW/Jykge1xyXG4gICAgICAgICAgICBtZWlEb25nRnVuKClcclxuICAgICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICfnvo7kuJwnKSB7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnbXlDSi5odG1sP3JvdXRlPXBheW1lbnQjL3BheW1lbnQvJyArICRzY29wZS5wYXlPcmROdW0gKyAnLycgKyAkc2NvcGUubXVvcmRNb25leSArICcvJyArICRzY29wZS5vcmRxdWFudGl0eTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIGlmICgkc2NvcGUuc2l5b3VjYW5na3U9PSfnvo7kuJwnKSB7XHJcbiAgICAgICAgICAvLyBcdGxvY2F0aW9uLmhyZWYgPSAnIy9wYXltZW50LycrJHNjb3BlLnBheU9yZE51bSsnLycrJHNjb3BlLm11b3JkTW9uZXkrJy8nKyRzY29wZS5vcmRxdWFudGl0eTtcclxuICAgICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBcdG1laURvbmdGdW4oKVxyXG4gICAgICAgICAgLy8gfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICdpbml0Jykgey8v5aaC5p6c5Yid5qyh6Lez6L+HICDpu5jorqTkuI3ov5vooYzlupPlrZjmirXmiaNcclxuICAgICAgICAgICAgJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICfnvo7kuJwnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8v5Y+W5raI5oq15bqT5a2YXHJcbiAgICAgICRzY29wZS5jYW5jZWxEa0Z1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUuaXNTdXJlRGVjdW50RmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5pbnZlbnRvcnlMaXN0ID0gW107XHJcbiAgICAgICAgaWYgKCRzY29wZS5iYWxhbmNlTSA8PSAwKSB7XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICdpbml0Jykge1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJ215Q0ouaHRtbD9yb3V0ZT1wYXltZW50Iy9wYXltZW50LycgKyAkc2NvcGUucGF5T3JkTnVtICsgJy8nICsgJHNjb3BlLm11b3JkTW9uZXkgKyAnLycgKyAkc2NvcGUub3JkcXVhbnRpdHk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5zaXlvdWNhbmdrdSA9PSAn576O6KW/Jykge1xyXG4gICAgICAgICAgICBtZWlEb25nRnVuKClcclxuICAgICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICfnvo7kuJwnKSB7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnbXlDSi5odG1sP3JvdXRlPXBheW1lbnQjL3BheW1lbnQvJyArICRzY29wZS5wYXlPcmROdW0gKyAnLycgKyAkc2NvcGUubXVvcmRNb25leSArICcvJyArICRzY29wZS5vcmRxdWFudGl0eTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKCRzY29wZS5zaXlvdWNhbmdrdSA9PSAnaW5pdCcpIHsvL+WmguaenOWIneasoei3s+i/hyAg6buY6K6k5LiN6L+b6KGM5bqT5a2Y5oq15omjXHJcbiAgICAgICAgICAgICRzY29wZS5zaXlvdWNhbmdrdSA9PSAn576O5LicJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvL+ehruWumuaKteW6k+WtmFxyXG4gICAgICAkc2NvcGUuZXJyb3JTaG93RmxhZyA9IGZhbHNlXHJcbiAgICAgICRzY29wZS5zdXJlRGVjdWVudEZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgIHZhciBkZURhdGEgPSB7fTtcclxuICAgICAgICBkZURhdGEuc2hpcE9yZGVySWQgPSAkc2NvcGUuaXRlbUlkO1xyXG4gICAgICAgIGRlRGF0YS5zaXlvdWNhbmdrdSA9ICRzY29wZS5zaXlvdWNhbmdrdTtcclxuICAgICAgICAvLyBjai9jak9yZGVyUGF5L2NqT3JkZXJEZWR1Y3Rpb25cclxuICAgICAgICBkc3AucG9zdEZ1bignYXBwL2dvb2RzSW5mby9vcmRlck91dEdvb2RzSW5mb09wdCcsIEpTT04uc3RyaW5naWZ5KGRlRGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhLnJlc3VsdClcclxuICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdEZWR1Y3RlZCBTdWNjZXNzZnVsbHknLCB7dGltZTogMzAwMH0pO1xyXG4gICAgICAgICAgICAkc2NvcGUubXVvcmRNb25leSA9IGJzLmRlY29kZSgkc2NvcGUubXVvcmRNb25leSkgLSAkc2NvcGUudG90YWxQcml2YWNlO1xyXG4gICAgICAgICAgICBpZiAoISRzY29wZS50b3RhbFNlcnZlclByaWNlKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsU2VydmVyUHJpY2UgPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICRzY29wZS5tdW9yZE1vbmV5ID0gJHNjb3BlLm11b3JkTW9uZXkgKyAoJHNjb3BlLnRvdGFsU2VydmVyUHJpY2UgLSAwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5tdW9yZE1vbmV5KVxyXG4gICAgICAgICAgICAkc2NvcGUubXVvcmRNb25leSA9ICRzY29wZS5tdW9yZE1vbmV5LnRvRml4ZWQoMik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5tdW9yZE1vbmV5KVxyXG4gICAgICAgICAgICAkc2NvcGUubXVvcmRNb25leSA9IGJzLmVuY29kZSgkc2NvcGUubXVvcmRNb25leS50b1N0cmluZygpKVxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnNpeW91Y2FuZ2t1ID09ICdpbml0Jykge1xyXG4gICAgICAgICAgICAgIG1laVhpRnVuKClcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuc2l5b3VjYW5na3UgPT0gJ+e+juilvycpIHtcclxuICAgICAgICAgICAgICBtZWlEb25nRnVuKClcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuc2l5b3VjYW5na3UgPT0gJ+e+juS4nCcpIHtcclxuICAgICAgICAgICAgICBpZiAoJHNjb3BlLmJhbGFuY2VNIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnbXlDSi5odG1sP3JvdXRlPXBheW1lbnQjL3BheW1lbnQvJyArICRzY29wZS5wYXlPcmROdW0gKyAnLycgKyAkc2NvcGUubXVvcmRNb25leSArICcvJyArICRzY29wZS5vcmRxdWFudGl0eTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEuZGF0YS5jb2RlID09IDQwMCl7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmVycm9yU2hvd0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICRzY29wZS5sb2dpc3RpY3NSZWFzb25MaXN0ID0gZGF0YS5kYXRhLmRhdGEubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICByZWNvcmROdW06IGl0ZW0sXHJcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRhdGEuZGF0YS5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdEZWR1Y3QgZXJyb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgLy8gJHNjb3BlLnBheUZ1biA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgIC8vIFx0dmFyIHBheU9yZE51bSA9IGJzLmVuY29kZShpdGVtLklEKTtcclxuICAgICAgLy8gXHR2YXIgbXVvcmRNb25leSA9IGJzLmVuY29kZShpdGVtLk9SREVSTU9ORVkudG9TdHJpbmcoKSk7XHJcbiAgICAgIC8vIFx0dmFyIG9yZHF1YW50aXR5ID0gYnMuZW5jb2RlKGl0ZW0uT1JERVJOVU1CRVIudG9TdHJpbmcoKSk7XHJcbiAgICAgIC8vIFx0dmFyIHBheURhdGEgPSB7fTtcclxuICAgICAgLy8gXHRwYXlEYXRhLnNoaXBPcmRlcklkID0gaXRlbS5JRDtcclxuICAgICAgLy8gXHRkc3AucG9zdEZ1bignYXBwL29yZGVyL2NoZWNrQ2hpbGRPcmRlcnMnLEpTT04uc3RyaW5naWZ5KHBheURhdGEpLGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgIC8vIFx0XHRjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAvLyBcdFx0aWYgKGRhdGEuZGF0YS5yZXN1bHQpIHtcclxuICAgICAgLy8gXHRcdFx0bG9jYXRpb24uaHJlZiA9ICcjL3BheW1lbnQvJytwYXlPcmROdW0rJy8nK211b3JkTW9uZXkrJy8nK29yZHF1YW50aXR5O1xyXG4gICAgICAvLyBcdFx0fWVsc2V7XHJcbiAgICAgIC8vIFx0XHRcdGxheWVyLm1zZygnU29ycnksIFRoZSBvcmRlciByZWxhdGVkIHRvIHRoaXMgcGF5bWVudCBpcyBub3QgZm91bmQsIHBsZWFzZSBkb3VibGUgY2hlY2sgYW5kIHJlc3VibWl0IGl0IG9yIGNvbnRhY3QgeW91ciBhZ2VudC4nLHt0aW1lOjUwMDB9KVxyXG4gICAgICAvLyBcdFx0fVxyXG4gICAgICAvLyBcdH0sZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgLy8gXHRcdGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgIC8vIFx0fSlcclxuICAgICAgLy8gXHRjb25zb2xlLmxvZyhwYXlPcmROdW0sbXVvcmRNb25leSxvcmRxdWFudGl0eSlcclxuICAgICAgLy8gfVxyXG4gICAgICAvL+WPkeelqOaMiemSruS6i+S7tlxyXG4gICAgICAkc2NvcGUuaW52b2ljZUZ1biA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGlkKTtcclxuICAgICAgICBkc3AuaXNpbnZvaWNlRGlhbG9nKGlkLCAnJyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8g5a+85Ye66K6i5Y2VXHJcbiAgICAgIHZhciBkYW9jaHVPcmRJZDtcclxuICAgICAgJHNjb3BlLmV4cG9ydE9yZGVyID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAkc2NvcGUuZGNvcmRGbGFnID0gdHJ1ZTtcclxuICAgICAgICBkYW9jaHVPcmRJZCA9IGl0ZW0uSUQ7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmdvQWN0ZXhwb3J0T3JkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGF5ZXIubG9hZCgyKTtcclxuICAgICAgICBkc3AucG9zdEZ1bignYXBwL2NsaWVudF9lcnAvZXhwb3J0UGF5bWVudE9yZGVycycsIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGlkOiBkYW9jaHVPcmRJZFxyXG4gICAgICAgIH0pLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZGNvcmRGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5kY29yZENhbGxiYWNrRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICRzY29wZS5leGNlbEhyZWYgPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpLmhyZWY7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0V4cG9ydCBvcmRlciBlcnJvci4nKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgLy8g57uZ5aSE55CG6K6i5Y2V55qE5oyJ6ZKu5re75Yqg6byg5qCH56e75YWl56e75Ye6XHJcbiAgICAgICQoJy5kZWFsLXN0eWxlJykuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJ3JnYigyNDksIDE0OCwgNDEpJyk7XHJcbiAgICAgICAgJCh0aGlzKS5jc3MoJ2NvbG9yJywgJyNmZmYnKTtcclxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJycpO1xyXG4gICAgICAgICQodGhpcykuY3NzKCdjb2xvcicsICcjZjk5NDI5Jyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vIOe7meWvvOWHuuiuouWNleeahOaMiemSrua3u+WKoOm8oOagh+enu+WFpeenu+WHulxyXG4gICAgICAkKCcuZXhwb3J0LW9yZGVycycpLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICdyZ2IoMTEsIDk4LCAxMzApJyk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICdyZ2IoMTEsIDc4LCAxMDMpJyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8v5pi+56S66ZqQ6JeP6auY57qn5pCc57SiXHJcbiAgICAgICQoJy50b2dnbGUtbW9yZXNlYXJjaCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcubW9yZS1zZWFyY2gnKS50b2dnbGUoMzAwKTtcclxuICAgICAgICBjb25zb2xlLmxvZygyMjIyMjIyMilcclxuICAgICAgICAkKCcjdG9nZ2xlLWxvZ28nKS50b2dnbGVDbGFzcygnLmdseXBoaWNvbiBnbHlwaGljb24tdHJpYW5nbGUtdG9wJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy/orr7nva7kuIvljZXml7bpl7RcclxuICAgICAgdmFyIG9yZGVyRGF0YSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIHZhciBvcmRlcnllYXIgPSBvcmRlckRhdGEuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgdmFyIG9yZGVybW9udGggPSBvcmRlckRhdGEuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgIHZhciBvcmRlcmRheSA9IG9yZGVyRGF0YS5nZXREYXRlKCk7XHJcbiAgICAgIHZhciBvcmRlcmhvdXIgPSBvcmRlckRhdGEuZ2V0SG91cnMoKTtcclxuICAgICAgdmFyIG9yZGVybWluID0gb3JkZXJEYXRhLmdldE1pbnV0ZXMoKTtcclxuICAgICAgLy8gdmFyIG9yZGVyc2Vjb25kID0gb3JkZXJEYXRhLmdldFNlY29uZHMoKTtcclxuICAgICAgdmFyICRwMSA9ICQoJzxwPicgKyBvcmRlcnllYXIgKyAnLScgKyBvcmRlcm1vbnRoICsgJy0nICsgb3JkZXJkYXkgKyBvcmRlcmhvdXIgKyAnOicgKyBvcmRlcm1pbiArICc8L3A+Jyk7XHJcbiAgICAgIC8vIHZhciAkcDIgPSAkKCc8cD4nK29yZGVyaG91ciArICc6JytvcmRlcm1pbisnPC9wPicpO1xyXG4gICAgICAkKCcub3JkZXItdGltZScpLmFwcGVuZCgkcDEpO1xyXG4gICAgICAvLyAkKCcub3JkZXItdGltZScpLmFwcGVuZCgkcDIpO1xyXG5cclxuICAgICAgLy/nu5nku6Pku5jmrL7mt7vliqDpgInkuK3pnZ7pgInkuK3kuovku7ZcclxuICAgICAgdmFyIGF3aXRJbmRleCA9IDA7XHJcbiAgICAgICQoJyNhd2FpdC10YWJsZScpLm9uKCdjbGljaycsICcuemNoZWNrYm94JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJykge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgYXdpdEluZGV4Kys7XHJcbiAgICAgICAgICBpZiAoYXdpdEluZGV4ID09ICQoJyNhd2FpdC10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KCdxdWFuYnV4dWFuemhvZ24nKVxyXG4gICAgICAgICAgICAkKCcjYXdhaXQtdGFibGUgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIGF3aXRJbmRleC0tO1xyXG4gICAgICAgICAgaWYgKGF3aXRJbmRleCAhPSAkKCcjYXdhaXQtdGFibGUgLnpjaGVja2JveCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAkKCcjYXdhaXQtdGFibGUgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLy/lhajpgIlcclxuICAgICAgJCgnI2F3YWl0LXRhYmxlJykub24oJ2NsaWNrJywgJy56Y2hlY2tlZC1hbGwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICBhd2l0SW5kZXggPSAkKCcjYXdhaXQtdGFibGUgLnpjaGVja2JveCcpLmxlbmd0aDtcclxuICAgICAgICAgICQoJyNhd2FpdC10YWJsZSAuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgYXdpdEluZGV4ID0gMDtcclxuICAgICAgICAgICQoJyNhd2FpdC10YWJsZSAuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICB2YXIgemF3aXRJbmRleCA9IDA7XHJcbiAgICAgICQoJyN6YXdhaXQtdGFiJykub24oJ2NsaWNrJywgJy56Y2hlY2tib3gnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICB6YXdpdEluZGV4Kys7XHJcbiAgICAgICAgICBpZiAoemF3aXRJbmRleCA9PSAkKCcjemF3YWl0LXRhYiAuemNoZWNrYm94JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KCdxdWFuYnV4dWFuemhvZ24nKVxyXG4gICAgICAgICAgICAkKCcjemF3YWl0LXRhYiAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgemF3aXRJbmRleC0tO1xyXG4gICAgICAgICAgaWYgKHphd2l0SW5kZXggIT0gJCgnI3phd2FpdC10YWIgLnpjaGVja2JveCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAkKCcjemF3YWl0LXRhYiAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAvL+WFqOmAiVxyXG4gICAgICAkKCcjemF3YWl0LXRhYicpLm9uKCdjbGljaycsICcuemNoZWNrZWQtYWxsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJykge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgemF3aXRJbmRleCA9ICQoJyN6YXdhaXQtdGFiIC56Y2hlY2tib3gnKS5sZW5ndGg7XHJcbiAgICAgICAgICAkKCcjemF3YWl0LXRhYiAuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgemF3aXRJbmRleCA9IDA7XHJcbiAgICAgICAgICAkKCcjemF3YWl0LXRhYiAuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG5cclxuXHJcbiAgICAgIC8v5Yig6Zmk5q+N6K6i5Y2VXHJcbiAgICAgICRzY29wZS5pc2RlbEZsYWcgPSBmYWxzZTtcclxuICAgICAgdmFyIGRlbElkID0gJyc7Ly/lrZjlgqjopoHliKDpmaTnmoTorqLljZVpZFxyXG4gICAgICAkc2NvcGUuZGVsZXRNdUZ1biA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgJHNjb3BlLmlzZGVsRmxhZyA9IHRydWU7XHJcbiAgICAgICAgZGVsSWQgPSBpdGVtLklEO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5jYW5jZWxEZWxGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLmlzZGVsRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIGRlbElkID0gJyc7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnN1cmVEZWxldE11RnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5pc2RlbEZsYWcgPSBmYWxzZTtcclxuICAgICAgICB2YXIgaWRjcyA9IHt9O1xyXG4gICAgICAgIGlkY3MuaWQgPSBkZWxJZDtcclxuICAgICAgICAvLyBhbGVydChpZGNzLmlkKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGlkY3MpXHJcbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoaWRjcykpXHJcbiAgICAgICAgLy8gcmV0dXJuO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvZGVsZXRlU2hpcG1lbnRzT3JkZXInLCBKU09OLnN0cmluZ2lmeShpZGNzKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhLnJlc3VsdCA9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSAxO1xyXG4gICAgICAgICAgICBnZXRMaXN0KClcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdEZWxldGluZyBmYWlsZWQuIFRoZSBvcmRlciBjYW5ub3QgYmUgZGVsZXRlZCB3aXRoIGRlZHVjdGVkIHByb2R1Y3RzLicpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vY2rlvIDlp4vml6XmnJ/mkJzntKJcclxuICAgICAgJChcIiNjai1zdGltZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNqZW5kdGltZSA9ICQoXCIjY2otc3RpbWVcIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIGVuZHRpbWUyID0gJChcIiNjai1zdGltZVwiKS52YWwoKTtcclxuICAgICAgICAgIGlmIChlbmR0aW1lMiAhPSBjamVuZHRpbWUpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKVxyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSAxO1xyXG4gICAgICAgICAgICBnZXRMaXN0KClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCAxMDApXHJcbiAgICAgIH0pXHJcbiAgICAgIC8vY2rnu5PmnZ/ml6XmnJ/mkJzntKJcclxuICAgICAgJChcIiNjai1ldGltZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNqZW5kdGltZSA9ICQoXCIjY2otZXRpbWVcIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIGVuZHRpbWUyID0gJChcIiNjai1ldGltZVwiKS52YWwoKTtcclxuICAgICAgICAgIGlmIChlbmR0aW1lMiAhPSBjamVuZHRpbWUpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKVxyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSAxO1xyXG4gICAgICAgICAgICBnZXRMaXN0KClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCAxMDApXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvL+aMieiuouWNleWPt+aQnOe0olxyXG4gICAgICAkKCcub3JkLXNlYXJjaC1pbnAnKS5rZXlwcmVzcyhmdW5jdGlvbiAoRXZlbnQpIHtcclxuICAgICAgICBpZiAoRXZlbnQua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgJHNjb3BlLnNlYXJjaE9yZE51bUZ1bigpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgJHNjb3BlLnNlYXJjaE9yZE51bUZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUucGFnZU51bSA9IDE7XHJcbiAgICAgICAgZ2V0TGlzdCgpXHJcbiAgICAgIH1cclxuICAgICAgLy8gdmFyIHBhZ2VIID0gJCh3aW5kb3cpLmhlaWdodCgpLTgwO1xyXG4gICAgICAvLyB2YXIgZG9jSCA9ICQoZG9jdW1lbnQpLmhlaWdodCgpO1xyXG4gICAgICAkKCcuZC1kaXJlY3QtcmlnaHQnKS5jc3Moe1xyXG4gICAgICAgICdtaW4taGVpZ2h0JzogJCh3aW5kb3cpLmhlaWdodCgpICogMSAtIDE1ICsgJ3B4J1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vICQoJy5kaXJlY3QtcmlnaHQnKS5oZWlnaHQoKVxyXG4gICAgICAvL+WtkOiuouWNleeahOivpuaDhVxyXG4gICAgICAkKCcub3JkZXJzLWxpc3QnKS5vbignY2xpY2snLCAnLnppLW9yZGVyLW51bScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjL29yZGVyLWRldGFpbFwiO1xyXG4gICAgICB9KVxyXG4gICAgICAkc2NvcGUuemlvcmRGdW4gPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHZhciBtdW9yZGlkID0gYnMuZW5jb2RlKGl0ZW0uSUQpXHJcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9ICcjL2Ryb3AtaG9tZS16aS8nICsgbXVvcmRpZDtcclxuICAgICAgfVxyXG4gICAgICAvKi0tLS0tLSovXHJcbiAgICAgICRzY29wZS5UcmFja2luZ0luZm9DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmZ1bGZpbGxtZW50U3RhdHVzKVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9mdWxmaWxsbW5ldC91cGRhdGVGdWxmaWxsbWVudFN0YXR1cycsIHsgZmxhZzogJHNjb3BlLmZ1bGZpbGxtZW50U3RhdHVzIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5mdWxmaWxsbWVudFN0YXR1cyA9PSAnMScpIHtcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1NldCBTdWNjZXNzZnVsbHknKVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5mdWxmaWxsbWVudFN0YXR1cyA9PSAnMCcpIHtcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1NldCBTdWNjZXNzZnVsbHknKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuc2hvd09yZGVyRGV0YWlsID0gZmFsc2U7XHJcbiAgICAgICRzY29wZS5nb09yZGVyRGV0YWlsID0gZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHtcclxuICAgICAgICAgIC4uLkpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnb3JkZXJfaW5mbycpKSxcclxuICAgICAgICAgIGluZGV4XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwYXJhbXMudHlwZT0nNCc7XHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnb3JkZXJfaW5mbycsIEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyMvb3JkZXItcGF5JztcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZnJlc2hHZXRMaXN0KCkge1xyXG4gICAgICAgICRzY29wZS5wYWdlTnVtID0gMTtcclxuICAgICAgICBnZXRMaXN0KClcclxuICAgICAgfVxyXG5cclxuICAgICAgIC8vIHN0cmlwZeWSjGNoZWNrdW905Lqk5piT54q25oCB5p+l6K+iXHJcbiAgZnVuY3Rpb24gc3RyaXBlVHJhZGVRdWVyeShwYXJtYXMpIHtcclxuICAgIGxheWVyLmxvYWQoMilcclxuICAgIGRzcC5wb3N0RnVuKCdhcHAvcGF5L3N0cmlwZVRyYWRlUXVlcnknLCBwYXJtYXMsICh7ZGF0YX0pID0+IHtcclxuICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICBpZihkYXRhLmNvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgJHNjb3BlLnN0cmlwZVN0YXR1cyA9ICtkYXRhLmRhdGFcclxuICAgICAgICBpZihwYXJtYXMgJiYgcGFybWFzLnBheW1lbnRUeXBlID09PSAnU3RyaXBlJykge1xyXG4gICAgICAgICAgLyoqIDHlvoXmlK/ku5ggMuaUr+S7mOS4rSAz5pSv5LuY5oiQ5YqfIDTmlK/ku5jlpLHotKUgNeaUr+S7mOW8guW4uCA25pSv5LuY5Y+W5raIICovXHJcbiAgICAgICAgICBzd2l0Y2goK2RhdGEuZGF0YSkge1xyXG4gICAgICAgICAgICBjYXNlIDE6ICBcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ0F3YWl0aW5nIHBheW1lbnQgY29uZmlybWF0aW9uLiBQbGVhc2UgcmVmcmVzaCBhbmQgY2hlY2sgaXQgbGF0ZXIuJyk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjogXHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdBd2FpdGluZyBwYXltZW50IGNvbmZpcm1hdGlvbi4gUGxlYXNlIHJlZnJlc2ggYW5kIGNoZWNrIGl0IGxhdGVyLicpO1xyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgMzogXHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IFN1Y2Nlc3NmdWwuJyk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNDogXHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IHZpYSBTdHJpcGUgZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDU6IFxyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnUGF5bWVudCB2aWEgU3RyaXBlIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA2OiBcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgdmlhIFN0cmlwZSBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICAnJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwYXJtYXMgJiYgcGFybWFzLnBheW1lbnRUeXBlID09PSAnQ2hlY2tvdXQnKSB7XHJcbiAgICAgICAgIC8qKiAx5b6F5pSv5LuYIDLmlK/ku5jkuK0gM+aUr+S7mOaIkOWKnyA05pSv5LuY5aSx6LSlIDXmlK/ku5jlvILluLggNuaUr+S7mOWPlua2iCAqL1xyXG5cdFx0XHRcdFx0c3dpdGNoKCtkYXRhLmRhdGEpIHtcclxuXHRcdFx0XHRcdFx0Y2FzZSAxOiAgXHJcblx0XHRcdFx0XHRcdFx0bGF5ZXIubXNnKCdBd2FpdGluZyBQYXltZW50LicpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlIDI6IFxyXG5cdFx0XHRcdFx0XHRcdGxheWVyLm1zZygnQXdhaXRpbmcgcGF5bWVudCBjb25maXJtYXRpb24uIFBsZWFzZSByZWZyZXNoIGFuZCBjaGVjayBpdCBsYXRlci4nKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSAzOiBcclxuXHRcdFx0XHRcdFx0XHRsYXllci5tc2coJ1BheW1lbnQgU3VjY2Vzc2Z1bC4nKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSA0OiBcclxuXHRcdFx0XHRcdFx0XHRsYXllci5tc2coJ1BheW1lbnQgdmlhIENoZWNrT3V0IGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSA1OiBcclxuXHRcdFx0XHRcdFx0XHRsYXllci5tc2coJ1BheW1lbnQgdmlhIENoZWNrT3V0IGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSA2OiBcclxuXHRcdFx0XHRcdFx0XHRsYXllci5tc2coJ1BheW1lbnQgQ2FuY2VsbGVkLicpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRkZWZhdWx0OiBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbXlDSi5odG1sIy9kcm9wLXByb2NlJztcclxuICAgICAgICAgIGdldExpc3QoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGxheWVyLm1zZyhkYXRhLm1zZylcclxuICAgICAgfVxyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvLyBjaGVja291dOS6pOaYk+eKtuaAgeafpeivolxyXG4gIGZ1bmN0aW9uIGdldENoZWNrb3V0VHJhZGUoKSB7XHJcbiAgICBjb25zdCBjaGVja291dE9iaiA9IGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2hlY2tvdXRPYmonKSB8fCAnJykgJiYgSlNPTi5wYXJzZShicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NoZWNrb3V0T2JqJykgfHwgJycpKTtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdjaGVja291dE9iaicpXHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY2tvU2Vzc2lvbklkJylcclxuICAgIGlmKCEoY2hlY2tvdXRPYmogJiYgY2hlY2tvdXRPYmoucGF5bWVudFR5cGUgPT09ICdDaGVja291dCcpKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgY29uc3QgcGFybWFzID0ge1xyXG4gICAgICAnb3JkZXJJZCc6IGNoZWNrb3V0T2JqICYmIGNoZWNrb3V0T2JqLm9yZGVySWQsXHJcbiAgICAgICdjb2RlJzogY2hlY2tvdXRPYmogJiYgY2hlY2tvdXRPYmouc3RyaXBlQ29kZSxcclxuICAgICAgJ3BheW1lbnRUeXBlJzogY2hlY2tvdXRPYmogJiYgY2hlY2tvdXRPYmoucGF5bWVudFR5cGUsXHJcbiAgICAgICdwYXlJZCc6IGNoZWNrb3V0T2JqICYmIGNoZWNrb3V0T2JqLnBheUlkLFxyXG4gICAgICAnc2Vzc2lvbklkJzogJHNjb3BlLmNrb1Nlc3Npb25JZFxyXG4gICAgfVxyXG4gICAgc3RyaXBlVHJhZGVRdWVyeShwYXJtYXMpXHJcbiAgfVxyXG4gICAgfV0pO1xyXG5cclxuICByZXR1cm4gYXBwO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUZBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQW5CQTtBQXFCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQW5CQTtBQUNBO0FBQ0E7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../src/pages/mycj/dropshipping-orders/drop-await-payment.js\n");

/***/ })

}]);