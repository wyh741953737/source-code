(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[24],{

/***/ "../src/pages/mycj/dropshipping-orders/drop-processing.js":
/*!****************************************************************!*\
  !*** ../src/pages/mycj/dropshipping-orders/drop-processing.js ***!
  \****************************************************************/
/*! exports provided: dropProcessingFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dropProcessingFactory\", function() { return dropProcessingFactory; });\n/* harmony import */ var _root_egg_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @root_egg/env */ \"../../env.js\");\n/* harmony import */ var _root_egg_env__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_root_egg_env__WEBPACK_IMPORTED_MODULE_0__);\n\nvar awinTesMode = ['testnew', 'development', 'test'].includes(_root_egg_env__WEBPACK_IMPORTED_MODULE_0__[\"NODE_ENV\"]) ? 1 : 0;\nfunction dropProcessingFactory(angular) {\n  var app = angular.module('drop-processing.module', ['service']);\n  app.controller('drop-processing.ctrl', ['$scope', 'dsp', '$stateParams', function ($scope, dsp, $stateParams) {\n    dsp.domainData().then(function (res) {\n      // 请求成功的结果\n      console.log(res);\n      $scope.iscj = res.iscj;\n\n      if ($scope.iscj == '1') {\n        //cj\n        $scope.websiteName = 'CJ';\n      } else {\n        //客户\n        $scope.websiteName = res.websiteName || 'CJ';\n      }\n    });\n    $scope.dataFound = true; //高级搜索\n\n    $scope.showFilter = false; //显示隐藏filter\n\n    $scope.filterObj = {\n      storeProductName: '',\n      cjProductName: '',\n      buyerName: '',\n      weight: '',\n      sku: ''\n    };\n    var bs = new Base64();\n    var base64 = new Base64();\n    var userId = localStorage.getItem('userId') ? bs.decode(localStorage.getItem('userId')) : ''; // 获取个人信息\n\n    var token = localStorage.getItem('token') ? bs.decode(localStorage.getItem('token')) : \"\";\n    var customerCjNum = localStorage.getItem('customerCjNum') || '';\n    var noInvoiceArr = dsp.noInvoiceArr;\n\n    function getUserInfo() {\n      var params = {\n        data: JSON.stringify({\n          userId: userId,\n          token: token\n        })\n      };\n      dsp.postFun('app/info/userinfo', params, function (_ref) {\n        var data = _ref.data;\n        var result = JSON.parse(data.result)[0];\n        var cjNum = result.num;\n        localStorage.setItem('customerCjNum', cjNum);\n        $scope.isHideInvoiceFlag = noInvoiceArr.includes(cjNum);\n      }, function (data) {\n        console.log(data);\n      });\n    }\n\n    if (!customerCjNum) {\n      getUserInfo();\n    } else {\n      $scope.isHideInvoiceFlag = noInvoiceArr.includes(customerCjNum);\n    }\n\n    dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0); //设置默认时间\n\n    function GetDateStr(AddDayCount) {\n      var dd = new Date();\n      dd.setDate(dd.getDate() + AddDayCount); //获取AddDayCount天后的日期 \n\n      var y = dd.getFullYear();\n      var m = dd.getMonth() + 1; //获取当前月份的日期 \n\n      var d = dd.getDate();\n\n      if (m < 10) {\n        m = '0' + m;\n      }\n\n      if (d < 10) {\n        d = '0' + d;\n      }\n\n      return y + \"-\" + m + \"-\" + d;\n    }\n\n    var aDate = GetDateStr(-45);\n    $(\"#cj-stime\").val(aDate); //关键语句\n\n    $('.orders-table').on('mouseenter', '.order-detail', function () {\n      // $(this).next().show();\n      $('.orders-table .order-detail').removeClass('order-detail-active');\n      $(this).addClass('order-detail-active');\n    });\n    $('.orders-table').on('mouseleave', '.order-detail', function () {\n      $(this).next().hide();\n    });\n    $('.orders-table').mouseleave(function () {\n      $('.orders-table .order-detail').removeClass('order-detail-active');\n    });\n    $scope.navList = [{\n      name: 'Awaiting Payment',\n      href: '#/dropshipping-orders'\n    }, {\n      name: 'Processing',\n      href: '#/drop-proce',\n      show: true\n    }, {\n      name: 'Processed',\n      href: '#/drop-processed'\n    }, {\n      name: 'Completed',\n      href: '#/drop-complet'\n    }, {\n      name: 'Closed',\n      href: '#/drop-close'\n    }]; //导出订单的提示\n\n    $('.export-orders').click(function () {\n      layer.msg('This feature will work soon.');\n    }); //判断数字是否存在\n\n    $scope.classNumber = function (n) {\n      if (!n) {\n        return 0;\n      } else {\n        return n;\n      }\n    };\n\n    $scope.pageNum = 1;\n    $scope.pageSize = '50';\n    $scope.cjdropawaitpList = ''; //存储所有的订单\n\n    $scope.erpordTnum = ''; //存储订单的条数\n\n    function getList() {\n      $scope.cjdropawaitpList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var orData = {};\n      var ordId = $.trim($('.ord-search-inp').val());\n      var notMuOrdNumFlag = false;\n      console.log(ordId);\n      var dapData = {};\n      tjFun(dapData);\n      dapData.data.dateBegin = ''; //cj开始时间\n\n      dapData.data.dateEnd = ''; //cj开始时间\n\n      if (ordId.indexOf('CJ') >= 0) {\n        dapData.data.numid = ordId;\n        notMuOrdNumFlag = false;\n      } else {\n        if (ordId) {\n          dapData.data.orderId = ordId;\n          notMuOrdNumFlag = true;\n        }\n      }\n\n      tjFun(orData);\n      orData.data = JSON.stringify(orData.data);\n      console.log(orData.data);\n      dsp.postFun('app/order/queryShipmentsOrder', JSON.stringify(orData), function (data) {\n        console.log(data.data);\n        var cjdropawaitp = JSON.parse(data.data.result);\n        $scope.erpordTnum = cjdropawaitp.countNumber;\n        $scope.cjdropawaitpList = cjdropawaitp.orderList; //获取所有的订单\n\n        console.log($scope.cjdropawaitpList);\n\n        if (notMuOrdNumFlag) {\n          if ($scope.erpordTnum > 0) {\n            var muordid = $scope.cjdropawaitpList[0].ID;\n            var ziid = ordId;\n            muordid = bs.encode(muordid);\n            ziid = bs.encode(ziid);\n            location.href = '#/drop-proce-zi/' + muordid + '/' + ziid + '//';\n          }\n        }\n\n        if ($scope.erpordTnum > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          dsp.addNodataPic($('.orders-list'), $(window).height() - 171, 47, 0, {\n            width: '100%'\n          });\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        $scope.ordstatusNum = cjdropawaitp.allOrderCount2; //各种状态订单的数量\n\n        numFun(); //调用给订单赋值的函数\n\n        $scope.totalCounts = Math.ceil($scope.erpordTnum / $scope.pageSize);\n        $scope.$broadcast('page-data', {\n          pageNum: $scope.pageNum,\n          totalNum: $scope.totalCounts,\n          totalCounts: $scope.erpordTnum,\n          pageSize: $scope.pageSize,\n          pagesizeList: ['30', '50', '100']\n        });\n      }, function () {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      });\n    }\n\n    getList();\n    $scope.$on('pagedata-fa', function (d, data) {\n      console.log(data);\n      $scope.pageNum = data.pageNum;\n      $scope.pageSize = data.pageSize;\n      getList();\n    }); //获取url中的参数方法\n\n    function getUrlParamByKey(href, key) {\n      if (!href) return '';\n      var vars = href.split(\"&\");\n\n      for (var i = 0; i < vars.length; i++) {\n        var pair = vars[i].split(\"=\");\n\n        if (pair[0] == key) {\n          return pair[1];\n        }\n      }\n    } //获取地址栏的链接\n\n\n    function initIsCheckout() {\n      // 判断当前是否存在ckosessionid\n      $scope.ckoSessionId = bs.decode(localStorage.getItem('ckoSessionId') || '') && JSON.parse(bs.decode(localStorage.getItem('ckoSessionId') || ''));\n\n      if ($scope.ckoSessionId) {\n        getList(dsp, $scope);\n        getCheckoutTrade();\n        return;\n      }\n\n      var href = window.location.href;\n\n      if (href.indexOf('?') >= 0) {\n        var regexp = /\\?[\\w\\W]*\\#/;\n        $scope.sessionId = getUrlParamByKey(href.match(regexp) && href.match(regexp)[0].slice(1, -1), 'cko-payment-id') || getUrlParamByKey(href.match(regexp) && href.match(regexp)[0].slice(1, -1), 'cko-session-id');\n\n        if ($scope.sessionId) {\n          localStorage.setItem('ckoSessionId', bs.encode(JSON.stringify($scope.sessionId))); // 后端接口返回状态较慢，延迟一秒再刷新当前页面\n\n          var timer = setTimeout(function () {\n            clearTimeout(timer);\n            window.location.href = window.location.origin + '/myCJ.html#/drop-proce';\n          }, 200);\n          getList(dsp, $scope);\n          return;\n        }\n\n        var hrefArr = href.split('?');\n        var paydataArr = hrefArr[1].split('&');\n        var lengthPay = paydataArr.length;\n\n        if (lengthPay == 3) {\n          var paymentArr = paydataArr[0].split('=');\n          var tokenArr = paydataArr[1].split('=');\n          var payidArr = paydataArr[2].split('=');\n          var payCS = {};\n          payCS.paymentId = paymentArr[1];\n          payCS.token = tokenArr[1];\n          payCS.payerID = payidArr[1];\n          payCS.code = 1;\n          payCS.awc = dsp.getCookie(\"awc\") || '';\n          console.log(payCS);\n          console.log(JSON.stringify(payCS));\n          var isToken = localStorage.getItem('payToken');\n          console.log(isToken);\n\n          if (isToken == tokenArr[1]) {\n            return;\n          } else {\n            dsp.postFun('app/pay/pay', JSON.stringify(payCS), function (data) {\n              console.log(data);\n\n              if (data.data.result !== true) {\n                console.log(1111);\n                layer.msg('Payment Failed');\n              } else {\n                layer.msg('Payment Succeed');\n                localStorage.setItem('payToken', tokenArr[1]);\n                $scope.pageNum = 1;\n                getList(); //awin 发送支付成功fall-back\n\n                var awinLocalParams = null;\n\n                try {\n                  awinLocalParams = JSON.parse(localStorage.getItem(\"_paypal_\".concat(payCS.token)));\n                  console.log(awinLocalParams);\n                } catch (err) {\n                  console.log('解析错误');\n                }\n\n                if (awinLocalParams) {\n                  var awinJS = function awinJS() {\n                    var content = '<script >' + ' var AWIN = {};' + '  AWIN.Tracking = {};' + ' AWIN.Tracking.Sale = {};' + ' AWIN.Tracking.Sale.amount =' + awinLocalParams.awinAmount + ';' + ' AWIN.Tracking.Sale.orderRef =\"' + awinLocalParams.awinRef + '\";' + ' AWIN.Tracking.Sale.parts  =\"' + \"DEFAULT:\" + awinLocalParams.awinAmount + '\";' + 'AWIN.Tracking.Sale.currency = \"USD\";' + ' AWIN.Tracking.Sale.test = \"' + awinTesMode + '\";' + 'AWIN.Tracking.Sale.channel = \"aw\";' + +'<\\/script>';\n                    $('body').append(content);\n                    var osrc = 'https://www.dwin1.com/21578.js';\n                    var script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.src = osrc;\n                    document.getElementsByTagName('body')[0].appendChild(script);\n                  };\n\n                  var imgHttpFun = function imgHttpFun() {\n                    var orderCountMoney = awinLocalParams.awinAmount.toFixed(2);\n                    var BasketImage = new Image(1, 1);\n                    BasketImage.src = \"https://www.awin1.com/sread.img?tt=ns&tv=2&merchant=21578&amount=\".concat(orderCountMoney, \"&ch=aw&parts=DEFAULT:\").concat(orderCountMoney, \"&cr=USD&ref=\").concat(awinLocalParams.awinRef, \"&tesmode=\").concat(awinTesMode);\n                    localStorage.removeItem(\"_paypal_\".concat(payCS.token));\n                  };\n\n                  var awcText = dsp.getCookie('awc');\n                  var utmSource = localStorage.getItem('utmSource');\n\n                  if (awcText && utmSource == 'awin') {\n                    //有awin的awc值 并且登录平台来源是awin\n                    awinJS();\n                    imgHttpFun();\n                  }\n                }\n              }\n            }, function (data) {\n              console.log(data);\n            });\n          }\n        }\n      }\n    }\n\n    initIsCheckout(); //给导航按钮添加点击事件 隐藏子订单\n\n    $('.drop-orderstatus-nav').click(function () {\n      $('.dropshippingStatus-nav').show(); // 隐藏子订单页面\n\n      $('.processing-subOrders').hide();\n    }); // 给处理订单的按钮添加鼠标移入移出\n\n    $('.deal-style').hover(function () {\n      $(this).css('background-color', 'rgb(249, 148, 41)');\n      $(this).css('color', '#fff');\n    }, function () {\n      $(this).css('background-color', '');\n      $(this).css('color', '#f99429');\n    }); // 给导出订单的按钮添加鼠标移入移出\n\n    $('.export-orders').hover(function () {\n      $(this).css('background-color', 'rgb(11, 98, 130)');\n    }, function () {\n      $(this).css('background-color', 'rgb(11, 78, 103)');\n    }); //给processing下的订单添加选中非选中\n\n    var proceIndex = 0;\n    $('#proce-table').on('click', '.zcheckbox', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        proceIndex++;\n\n        if (proceIndex == $('#proce-table .zcheckbox').length) {\n          // alert('quanbuxuanzhogn')\n          $('#proce-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        proceIndex--;\n\n        if (proceIndex != $('#proce-table .zcheckbox').length) {\n          $('#proce-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //全选\n\n    $('#proce-table').on('click', '.zchecked-all', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        proceIndex = $('#proce-table .zcheckbox').length;\n        $('#proce-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        proceIndex = 0;\n        $('#proce-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    });\n    var zproIndex = 0;\n    $('#zproce-tab').on('click', '.zcheckbox', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        zproIndex++;\n\n        if (zproIndex == $('#zproce-tab .zcheckbox').length) {\n          // alert('quanbuxuanzhogn')\n          $('#zproce-tab .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        zproIndex--;\n\n        if (zproIndex != $('#zproce-tab .zcheckbox').length) {\n          $('#zproce-tab .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //全选\n\n    $('#zproce-tab').on('click', '.zchecked-all', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        zproIndex = $('#zproce-tab .zcheckbox').length;\n        $('#zproce-tab .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        zproIndex = 0;\n        $('#zproce-tab .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    });\n    $('.d-direct-right').css({\n      'min-height': $(window).height() * 1 - 15 + 'px'\n    }); //给订单状态赋值的函数\n\n    function numFun() {\n      $scope.awaitNum = $scope.ordstatusNum.yi;\n      $scope.dropprocessNum = $scope.ordstatusNum.er;\n      $scope.dropprocessedNum = $scope.ordstatusNum.san;\n      $scope.completeNum = $scope.ordstatusNum.si;\n      $scope.closedNum = $scope.ordstatusNum.wu; // $scope.dispatchNum = $scope.ordstatusNum.liu;\n    } //订单号搜索\n\n\n    $('.ord-search-inp').keypress(function (Event) {\n      if (Event.keyCode == 13) {\n        $scope.searchOrdNumFun();\n      }\n    });\n\n    function tjFun(cs) {\n      var ordId = $.trim($('.ord-search-inp').val());\n      var data = {};\n      cs.data = {};\n      cs.data.status = '2';\n      cs.data.page = $scope.pageNum - 0;\n\n      if (ordId.indexOf('CJ') >= 0) {\n        cs.data.numid = ordId;\n      } else {\n        cs.data.orderId = ordId;\n      }\n\n      cs.data.limit = $scope.pageSize - 0;\n      cs.data.dateBegin = $('#cj-stime').val(); //cj开始时间\n\n      cs.data.dateEnd = $('#cj-etime').val(); //cj开始时间\n      //高级搜索\n\n      cs.data.storeOrderDateBegin = $('#filter-startdate').val();\n      cs.data.storeOrderDateEnd = $('#filter-enddate').val();\n      cs.data.storeProductName = $scope.filterObj.storeProductName;\n      cs.data.cjProductName = $scope.filterObj.cjProductName;\n      cs.data.buyerName = $scope.filterObj.buyerName;\n      cs.data.weight = $scope.filterObj.weight;\n      cs.data.sku = $scope.filterObj.sku;\n    } //按订单号搜索\n\n\n    $scope.searchOrdNumFun = function () {\n      $scope.pageNum = 1;\n      getList();\n    }; //根据订单状态查询订单\n\n\n    $scope.enterZiFun = function (item, stu) {\n      var muordid = bs.encode(item.ID);\n      console.log(stu); //将纠纷请求参数存入\n\n      stu == 5 ? localStorage.setItem('drop-proce-isDispute', 1) : localStorage.setItem('drop-proce-isDispute', 0);\n      location.href = '#/drop-proce-zi/' + muordid + '/' + '/' + stu + '/';\n    }; //cj开始日期搜索\n\n\n    $(\"#cj-stime\").click(function () {\n      var cjendtime = $(\"#cj-stime\").val();\n      var interval = setInterval(function () {\n        var endtime2 = $(\"#cj-stime\").val();\n\n        if (endtime2 != cjendtime) {\n          // alert(endtime2+'!='+cjendtime)\n          $scope.cjdropawaitpList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          clearInterval(interval);\n          $scope.pageNum = 1;\n          getList();\n        }\n      }, 100);\n    }); //cj结束日期搜索\n\n    $(\"#cj-etime\").click(function () {\n      var cjendtime = $(\"#cj-etime\").val();\n      var interval = setInterval(function () {\n        var endtime2 = $(\"#cj-etime\").val();\n\n        if (endtime2 != cjendtime) {\n          // alert(endtime2+'!='+cjendtime)\n          $scope.cjdropawaitpList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          clearInterval(interval);\n          $scope.pageNum = 1;\n          getList();\n        }\n      }, 100);\n    }); //点击子订单的返回按钮 隐藏子订单\n\n    $('.back-mu-ord').click(function () {\n      $('.sub-orders').hide();\n      $('.dropshippingStatus-nav').show();\n    });\n    var aa = {}; //存储 需要拼接发送的参数\n\n    $scope.ziordFun = function (item) {\n      // 隐藏二级界面\n      // alert(3234)\n      // $('.dropshippingStatus-nav').hide();\n      console.log(item);\n      var muordid = bs.encode(item.ID);\n      location.href = '#/drop-proce-zi/' + muordid + '///' + $scope.filterObj.sku;\n    };\n\n    $scope.gotoNofh = function (item) {\n      var muordid = bs.encode(item.ID);\n      location.href = '#/drop-proce-zi/1/' + muordid + '//';\n    }; //导出订单\n\n\n    $scope.dcordFlag = false;\n    $scope.dcordCallbackFlag = false; //返回链接弹框\n\n    $scope.exportOrdFun = function (item) {\n      $scope.dcordFlag = true;\n      $scope.itemId = item.ID;\n    };\n\n    $scope.exportSureFun = function () {\n      layer.load(2);\n      dsp.postFun('app/order/exportCJOrderM', {\n        id: $scope.itemId,\n        sku: $scope.filterObj.sku\n      }, function (data) {\n        layer.closeAll(\"loading\");\n        $scope.dcordFlag = false;\n        console.log(data);\n\n        if (data.data.href.indexOf('http') >= 0) {\n          $scope.dcordCallbackFlag = true;\n          $scope.excelHref = data.data.href;\n        } else {\n          layer.msg('Export order error.');\n          $scope.dcordCallbackFlag = false;\n        }\n      }, errFun);\n    };\n\n    $scope.exportQxFun = function () {\n      $scope.dcordFlag = false;\n    }; //关闭返回的链接弹框\n\n\n    $scope.closeLinkFun = function () {\n      $scope.dcordCallbackFlag = false;\n    };\n\n    function errFun(data) {\n      console.log(data);\n      layer.closeAll(\"loading\");\n      dsp.closeLoadPercent($('.orders-list'));\n      dsp.cjMesFun(1);\n    } //发票按钮事件\n\n\n    $scope.invoiceFun = function (id) {\n      console.log(id);\n      dsp.isinvoiceDialog(id, '');\n    }; //高级搜索部分的查询\n\n\n    $scope.advanceSearch = function () {\n      $scope.pageNum = 1;\n      getList();\n    }; // stripe和checkuot交易状态查询\n\n\n    function stripeTradeQuery(parmas) {\n      layer.load(2);\n      dsp.postFun('app/pay/stripeTradeQuery', parmas, function (_ref2) {\n        var data = _ref2.data;\n        layer.closeAll('loading');\n\n        if (data.code == 200) {\n          $scope.stripeStatus = +data.data;\n\n          if (parmas && parmas.paymentType === 'Stripe') {\n            /** 1待支付 2支付中 3支付成功 4支付失败 5支付异常 6支付取消 */\n            switch (+data.data) {\n              case 1:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 2:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 3:\n                layer.msg('Payment Successful.');\n                break;\n\n              case 4:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              case 5:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              case 6:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              default:\n                '';\n            }\n          }\n\n          if (parmas && parmas.paymentType === 'Checkout') {\n            /** 1待支付 2支付中 3支付成功 4支付失败 5支付异常 6支付取消 */\n            switch (+data.data) {\n              case 1:\n                layer.msg('Awaiting Payment.');\n                break;\n\n              case 2:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 3:\n                layer.msg('Payment Successful.');\n                break;\n\n              case 4:\n                layer.msg('Payment via CheckOut failed. Please try again.');\n                break;\n\n              case 5:\n                layer.msg('Payment via CheckOut failed. Please try again.');\n                break;\n\n              case 6:\n                layer.msg('Payment Cancelled.');\n                break;\n\n              default:\n                break;\n            } // window.location.href = window.location.origin + '/myCJ.html#/drop-proce';\n\n\n            getList(dsp, $scope);\n          }\n        } else {\n          return layer.msg(data.msg);\n        }\n      }, function (err) {\n        console.log(err);\n      });\n    } // stripe交易状态查询\n\n\n    function getStripeTrade() {\n      var stripeObj = bs.decode(localStorage.getItem('stripeObj') || '') && JSON.parse(bs.decode(localStorage.getItem('stripeObj') || ''));\n      localStorage.removeItem('stripeObj');\n\n      if (!(stripeObj && stripeObj.orderId)) {\n        return;\n      }\n\n      var ordid = $stateParams.ordid;\n\n      if (ordid !== stripeObj.showOrdId) {\n        return;\n      }\n\n      var parmas = {\n        'orderId': stripeObj && stripeObj.orderId,\n        'code': stripeObj && stripeObj.stripeCode,\n        'payId': stripeObj && stripeObj.payId,\n        'paymentType': stripeObj && stripeObj.paymentType\n      };\n      stripeTradeQuery(parmas);\n    }\n\n    getStripeTrade(); // checkout交易状态查询\n\n    function getCheckoutTrade() {\n      var checkoutObj = bs.decode(localStorage.getItem('checkoutObj') || '') && JSON.parse(bs.decode(localStorage.getItem('checkoutObj') || ''));\n      localStorage.removeItem('checkoutObj');\n      localStorage.removeItem('ckoSessionId');\n\n      if (!(checkoutObj && checkoutObj.paymentType === 'Checkout')) {\n        return;\n      }\n\n      var parmas = {\n        'orderId': checkoutObj && checkoutObj.orderId,\n        'code': checkoutObj && checkoutObj.stripeCode,\n        'paymentType': checkoutObj && checkoutObj.paymentType,\n        'payId': checkoutObj && checkoutObj.payId,\n        'sessionId': $scope.ckoSessionId\n      };\n      stripeTradeQuery(parmas);\n    }\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovZHJvcHNoaXBwaW5nLW9yZGVycy9kcm9wLXByb2Nlc3NpbmcuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vc3JjL3BhZ2VzL215Y2ovZHJvcHNoaXBwaW5nLW9yZGVycy9kcm9wLXByb2Nlc3NpbmcuanM/ZTNmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOT0RFX0VOViB9IGZyb20gJ0Byb290X2VnZy9lbnYnO1xyXG5jb25zdCBhd2luVGVzTW9kZSA9IFsndGVzdG5ldycsICdkZXZlbG9wbWVudCcsICd0ZXN0J10uaW5jbHVkZXMoTk9ERV9FTlYpID8gMSA6IDA7XHJcbmV4cG9ydCBmdW5jdGlvbiBkcm9wUHJvY2Vzc2luZ0ZhY3RvcnkoYW5ndWxhcikge1xyXG4gIGNvbnN0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdkcm9wLXByb2Nlc3NpbmcubW9kdWxlJywgWydzZXJ2aWNlJ10pO1xyXG5cclxuICBhcHAuY29udHJvbGxlcignZHJvcC1wcm9jZXNzaW5nLmN0cmwnLCBbJyRzY29wZScsICdkc3AnLCAnJHN0YXRlUGFyYW1zJyxcclxuICAgIGZ1bmN0aW9uICgkc2NvcGUsIGRzcCwgJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgIGRzcC5kb21haW5EYXRhKCkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgLy8g6K+35rGC5oiQ5Yqf55qE57uT5p6cXHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxyXG4gICAgICAgICRzY29wZS5pc2NqID0gcmVzLmlzY2o7XHJcbiAgICAgICAgaWYgKCRzY29wZS5pc2NqID09ICcxJykge1xyXG4gICAgICAgICAgLy9jalxyXG4gICAgICAgICAgJHNjb3BlLndlYnNpdGVOYW1lID0gJ0NKJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy/lrqLmiLdcclxuICAgICAgICAgICRzY29wZS53ZWJzaXRlTmFtZSA9IHJlcy53ZWJzaXRlTmFtZSB8fCAnQ0onO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgJHNjb3BlLmRhdGFGb3VuZCA9IHRydWU7XHJcblxyXG4gICAgICAvL+mrmOe6p+aQnOe0olxyXG4gICAgICAkc2NvcGUuc2hvd0ZpbHRlciA9IGZhbHNlOy8v5pi+56S66ZqQ6JePZmlsdGVyXHJcbiAgICAgICRzY29wZS5maWx0ZXJPYmogPSB7XHJcbiAgICAgICAgc3RvcmVQcm9kdWN0TmFtZTogJycsXHJcbiAgICAgICAgY2pQcm9kdWN0TmFtZTogJycsXHJcbiAgICAgICAgYnV5ZXJOYW1lOiAnJyxcclxuICAgICAgICB3ZWlnaHQ6ICcnLFxyXG4gICAgICAgIHNrdTogJydcclxuICAgICAgfVxyXG4gICAgICB2YXIgYnMgPSBuZXcgQmFzZTY0KCk7XHJcbiAgICAgIHZhciBiYXNlNjQgPSBuZXcgQmFzZTY0KCk7XHJcbiAgICAgIHZhciB1c2VySWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykgPyBicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpKSA6ICcnO1xyXG4gICAgICAvLyDojrflj5bkuKrkurrkv6Hmga9cclxuICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSA/IGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkgOiBcIlwiO1xyXG4gICAgICB2YXIgY3VzdG9tZXJDak51bSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXN0b21lckNqTnVtJykgfHwgJyc7XHJcbiAgICAgIGNvbnN0IG5vSW52b2ljZUFyciA9IGRzcC5ub0ludm9pY2VBcnI7XHJcbiAgICAgIGZ1bmN0aW9uIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHsgdXNlcklkLCB0b2tlbiB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBkc3AucG9zdEZ1bignYXBwL2luZm8vdXNlcmluZm8nLCBwYXJhbXMsICh7ZGF0YX0pPT4ge1xyXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhLnJlc3VsdClbMF1cclxuICAgICAgICAgIGNvbnN0IGNqTnVtID0gcmVzdWx0Lm51bTtcclxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXN0b21lckNqTnVtJyxjak51bSlcclxuICAgICAgICAgICRzY29wZS5pc0hpZGVJbnZvaWNlRmxhZyA9IG5vSW52b2ljZUFyci5pbmNsdWRlcyhjak51bSlcclxuICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGlmKCFjdXN0b21lckNqTnVtKXtcclxuICAgICAgICBnZXRVc2VySW5mbygpXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgICRzY29wZS5pc0hpZGVJbnZvaWNlRmxhZyA9IG5vSW52b2ljZUFyci5pbmNsdWRlcyhjdXN0b21lckNqTnVtKVxyXG4gICAgICB9XHJcbiAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgIC8v6K6+572u6buY6K6k5pe26Ze0XHJcbiAgICAgIGZ1bmN0aW9uIEdldERhdGVTdHIoQWRkRGF5Q291bnQpIHtcclxuICAgICAgICB2YXIgZGQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGRkLnNldERhdGUoZGQuZ2V0RGF0ZSgpICsgQWRkRGF5Q291bnQpOy8v6I635Y+WQWRkRGF5Q291bnTlpKnlkI7nmoTml6XmnJ8gXHJcbiAgICAgICAgdmFyIHkgPSBkZC5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIHZhciBtID0gZGQuZ2V0TW9udGgoKSArIDE7Ly/ojrflj5blvZPliY3mnIjku73nmoTml6XmnJ8gXHJcbiAgICAgICAgdmFyIGQgPSBkZC5nZXREYXRlKCk7XHJcbiAgICAgICAgaWYgKG0gPCAxMCkge1xyXG4gICAgICAgICAgbSA9ICcwJyArIG1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGQgPCAxMCkge1xyXG4gICAgICAgICAgZCA9ICcwJyArIGRcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHkgKyBcIi1cIiArIG0gKyBcIi1cIiArIGQ7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGFEYXRlID0gR2V0RGF0ZVN0cigtNDUpO1xyXG4gICAgICAkKFwiI2NqLXN0aW1lXCIpLnZhbChhRGF0ZSk7ICAgLy/lhbPplK7or63lj6VcclxuXHJcbiAgICAgICQoJy5vcmRlcnMtdGFibGUnKS5vbignbW91c2VlbnRlcicsICcub3JkZXItZGV0YWlsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vICQodGhpcykubmV4dCgpLnNob3coKTtcclxuICAgICAgICAkKCcub3JkZXJzLXRhYmxlIC5vcmRlci1kZXRhaWwnKS5yZW1vdmVDbGFzcygnb3JkZXItZGV0YWlsLWFjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ29yZGVyLWRldGFpbC1hY3RpdmUnKTtcclxuICAgICAgfSlcclxuICAgICAgJCgnLm9yZGVycy10YWJsZScpLm9uKCdtb3VzZWxlYXZlJywgJy5vcmRlci1kZXRhaWwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5uZXh0KCkuaGlkZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAkKCcub3JkZXJzLXRhYmxlJykubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLm9yZGVycy10YWJsZSAub3JkZXItZGV0YWlsJykucmVtb3ZlQ2xhc3MoJ29yZGVyLWRldGFpbC1hY3RpdmUnKTtcclxuICAgICAgfSk7XHJcbiAgICAgICRzY29wZS5uYXZMaXN0ID0gW1xyXG4gICAgICAgIHtuYW1lOidBd2FpdGluZyBQYXltZW50JyxocmVmOicjL2Ryb3BzaGlwcGluZy1vcmRlcnMnfSxcclxuICAgICAgICB7bmFtZTonUHJvY2Vzc2luZycsaHJlZjonIy9kcm9wLXByb2NlJyxzaG93OnRydWV9LFxyXG4gICAgICAgIHtuYW1lOidQcm9jZXNzZWQnLGhyZWY6JyMvZHJvcC1wcm9jZXNzZWQnfSxcclxuICAgICAgICB7bmFtZTonQ29tcGxldGVkJyxocmVmOicjL2Ryb3AtY29tcGxldCd9LFxyXG4gICAgICAgIHtuYW1lOidDbG9zZWQnLGhyZWY6JyMvZHJvcC1jbG9zZSd9LFxyXG4gICAgICBdXHJcbiAgICAgIC8v5a+85Ye66K6i5Y2V55qE5o+Q56S6XHJcbiAgICAgICQoJy5leHBvcnQtb3JkZXJzJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxheWVyLm1zZygnVGhpcyBmZWF0dXJlIHdpbGwgd29yayBzb29uLicpXHJcbiAgICAgIH0pO1xyXG4gICAgICAvL+WIpOaWreaVsOWtl+aYr+WQpuWtmOWcqFxyXG4gICAgICAkc2NvcGUuY2xhc3NOdW1iZXIgPSBmdW5jdGlvbiAobikge1xyXG4gICAgICAgIGlmICghbikge1xyXG4gICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLnBhZ2VOdW0gPSAxO1xyXG4gICAgICAkc2NvcGUucGFnZVNpemUgPSAnNTAnO1xyXG4gICAgICAkc2NvcGUuY2pkcm9wYXdhaXRwTGlzdCA9ICcnOy8v5a2Y5YKo5omA5pyJ55qE6K6i5Y2VXHJcbiAgICAgICRzY29wZS5lcnBvcmRUbnVtID0gJyc7Ly/lrZjlgqjorqLljZXnmoTmnaHmlbBcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGdldExpc3QgKCkge1xyXG4gICAgICAgICRzY29wZS5jamRyb3Bhd2FpdHBMaXN0ID0gW107XHJcbiAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICB2YXIgb3JEYXRhID0ge307XHJcbiAgICAgICAgdmFyIG9yZElkID0gJC50cmltKCQoJy5vcmQtc2VhcmNoLWlucCcpLnZhbCgpKTtcclxuICAgICAgICB2YXIgbm90TXVPcmROdW1GbGFnID0gZmFsc2U7XHJcbiAgICAgICAgY29uc29sZS5sb2cob3JkSWQpXHJcbiAgICAgICAgdmFyIGRhcERhdGEgPSB7fTtcclxuICAgICAgICB0akZ1bihkYXBEYXRhKTtcclxuICAgICAgICBkYXBEYXRhLmRhdGEuZGF0ZUJlZ2luID0gJyc7Ly9jauW8gOWni+aXtumXtFxyXG4gICAgICAgIGRhcERhdGEuZGF0YS5kYXRlRW5kID0gJyc7Ly9jauW8gOWni+aXtumXtFxyXG4gICAgICAgIGlmIChvcmRJZC5pbmRleE9mKCdDSicpID49IDApIHtcclxuICAgICAgICAgIGRhcERhdGEuZGF0YS5udW1pZCA9IG9yZElkO1xyXG4gICAgICAgICAgbm90TXVPcmROdW1GbGFnID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChvcmRJZCkge1xyXG4gICAgICAgICAgICBkYXBEYXRhLmRhdGEub3JkZXJJZCA9IG9yZElkO1xyXG4gICAgICAgICAgICBub3RNdU9yZE51bUZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSlcclxuICAgICAgICBjb25zb2xlLmxvZyhvckRhdGEuZGF0YSlcclxuICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5U2hpcG1lbnRzT3JkZXInLCBKU09OLnN0cmluZ2lmeShvckRhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKTtcclxuICAgICAgICAgIHZhciBjamRyb3Bhd2FpdHAgPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpXHJcbiAgICAgICAgICAkc2NvcGUuZXJwb3JkVG51bSA9IGNqZHJvcGF3YWl0cC5jb3VudE51bWJlcjtcclxuICAgICAgICAgICRzY29wZS5jamRyb3Bhd2FpdHBMaXN0ID0gY2pkcm9wYXdhaXRwLm9yZGVyTGlzdDsvL+iOt+WPluaJgOacieeahOiuouWNlVxyXG4gICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmNqZHJvcGF3YWl0cExpc3QpXHJcbiAgICAgICAgICBpZiAobm90TXVPcmROdW1GbGFnKSB7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZXJwb3JkVG51bSA+IDApIHtcclxuICAgICAgICAgICAgICB2YXIgbXVvcmRpZCA9ICRzY29wZS5jamRyb3Bhd2FpdHBMaXN0WzBdLklEO1xyXG4gICAgICAgICAgICAgIHZhciB6aWlkID0gb3JkSWQ7XHJcbiAgICAgICAgICAgICAgbXVvcmRpZCA9IGJzLmVuY29kZShtdW9yZGlkKTtcclxuICAgICAgICAgICAgICB6aWlkID0gYnMuZW5jb2RlKHppaWQpO1xyXG4gICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnIy9kcm9wLXByb2NlLXppLycgKyBtdW9yZGlkICsgJy8nICsgemlpZCArICcvLyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICgkc2NvcGUuZXJwb3JkVG51bSA+IDApIHtcclxuICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkc3AuYWRkTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpLCQod2luZG93KS5oZWlnaHQoKS0xNzEsNDcsMCx7d2lkdGg6JzEwMCUnfSlcclxuICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2NvcGUub3Jkc3RhdHVzTnVtID0gY2pkcm9wYXdhaXRwLmFsbE9yZGVyQ291bnQyOy8v5ZCE56eN54q25oCB6K6i5Y2V55qE5pWw6YePXHJcbiAgICAgICAgICBudW1GdW4oKTsvL+iwg+eUqOe7meiuouWNlei1i+WAvOeahOWHveaVsFxyXG4gICAgICAgICAgJHNjb3BlLnRvdGFsQ291bnRzID0gTWF0aC5jZWlsKCRzY29wZS5lcnBvcmRUbnVtIC8gJHNjb3BlLnBhZ2VTaXplKTtcclxuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdwYWdlLWRhdGEnLCB7XHJcbiAgICAgICAgICAgIHBhZ2VOdW06ICRzY29wZS5wYWdlTnVtLFxyXG4gICAgICAgICAgICB0b3RhbE51bTogJHNjb3BlLnRvdGFsQ291bnRzLFxyXG4gICAgICAgICAgICB0b3RhbENvdW50czogJHNjb3BlLmVycG9yZFRudW0sXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiAkc2NvcGUucGFnZVNpemUsXHJcbiAgICAgICAgICAgIHBhZ2VzaXplTGlzdDogWyczMCcsJzUwJywnMTAwJ11cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICBnZXRMaXN0KClcclxuICAgICAgJHNjb3BlLiRvbigncGFnZWRhdGEtZmEnLCBmdW5jdGlvbiAoZCwgZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSBkYXRhLnBhZ2VOdW07XHJcbiAgICAgICAgJHNjb3BlLnBhZ2VTaXplID0gZGF0YS5wYWdlU2l6ZTtcclxuICAgICAgICBnZXRMaXN0KCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy/ojrflj5Z1cmzkuK3nmoTlj4LmlbDmlrnms5VcclxuICAgICAgZnVuY3Rpb24gZ2V0VXJsUGFyYW1CeUtleSAoaHJlZiwga2V5KSB7XHJcbiAgICAgICAgaWYoIWhyZWYpIHJldHVybiAnJ1xyXG4gICAgICAgIHZhciB2YXJzID0gaHJlZi5zcGxpdChcIiZcIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7aSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHZhciBwYWlyID0gdmFyc1tpXS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgICBpZihwYWlyWzBdID09IGtleSkgeyByZXR1cm4gcGFpclsxXTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy/ojrflj5blnLDlnYDmoI/nmoTpk77mjqVcclxuICAgICAgZnVuY3Rpb24gaW5pdElzQ2hlY2tvdXQoKSB7XHJcbiAgICAgICAgLy8g5Yik5pat5b2T5YmN5piv5ZCm5a2Y5ZyoY2tvc2Vzc2lvbmlkXHJcbiAgICAgICAgJHNjb3BlLmNrb1Nlc3Npb25JZCA9IGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2tvU2Vzc2lvbklkJykgfHwgJycpICYmIEpTT04ucGFyc2UoYnMuZGVjb2RlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdja29TZXNzaW9uSWQnKSB8fCAnJykpXHJcbiAgICAgICAgaWYoJHNjb3BlLmNrb1Nlc3Npb25JZCkge1xyXG4gICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSlcclxuICAgICAgICAgIGdldENoZWNrb3V0VHJhZGUoKVxyXG4gICAgICAgICAgcmV0dXJuIFxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgIGlmIChocmVmLmluZGV4T2YoJz8nKSA+PSAwKSB7XHJcbiAgICAgICAgICBjb25zdCByZWdleHAgPSAvXFw/W1xcd1xcV10qXFwjL1xyXG4gICAgICAgICAgJHNjb3BlLnNlc3Npb25JZCA9IGdldFVybFBhcmFtQnlLZXkoaHJlZi5tYXRjaChyZWdleHApICYmIGhyZWYubWF0Y2gocmVnZXhwKVswXS5zbGljZSgxLC0xKSwnY2tvLXBheW1lbnQtaWQnKSB8fCBnZXRVcmxQYXJhbUJ5S2V5KGhyZWYubWF0Y2gocmVnZXhwKSAmJiBocmVmLm1hdGNoKHJlZ2V4cClbMF0uc2xpY2UoMSwtMSksJ2Nrby1zZXNzaW9uLWlkJylcclxuICAgICAgICAgIGlmKCRzY29wZS5zZXNzaW9uSWQpIHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Nrb1Nlc3Npb25JZCcsIGJzLmVuY29kZShKU09OLnN0cmluZ2lmeSgkc2NvcGUuc2Vzc2lvbklkKSkpO1xyXG4gICAgICAgICAgICAvLyDlkI7nq6/mjqXlj6Pov5Tlm57nirbmgIHovoPmhaLvvIzlu7bov5/kuIDnp5Llho3liLfmlrDlvZPliY3pobXpnaJcclxuICAgICAgICAgICAgbGV0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxyXG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbXlDSi5odG1sIy9kcm9wLXByb2NlJ1xyXG4gICAgICAgICAgICB9LCAyMDApXHJcbiAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIGhyZWZBcnIgPSBocmVmLnNwbGl0KCc/Jyk7XHJcbiAgICAgICAgICB2YXIgcGF5ZGF0YUFyciA9IGhyZWZBcnJbMV0uc3BsaXQoJyYnKVxyXG4gICAgICAgICAgdmFyIGxlbmd0aFBheSA9IHBheWRhdGFBcnIubGVuZ3RoO1xyXG4gICAgICAgICAgaWYgKGxlbmd0aFBheSA9PSAzKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXltZW50QXJyID0gcGF5ZGF0YUFyclswXS5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICB2YXIgdG9rZW5BcnIgPSBwYXlkYXRhQXJyWzFdLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIHZhciBwYXlpZEFyciA9IHBheWRhdGFBcnJbMl0uc3BsaXQoJz0nKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwYXlDUyA9IHt9O1xyXG4gICAgICAgICAgICBwYXlDUy5wYXltZW50SWQgPSBwYXltZW50QXJyWzFdO1xyXG4gICAgICAgICAgICBwYXlDUy50b2tlbiA9IHRva2VuQXJyWzFdO1xyXG4gICAgICAgICAgICBwYXlDUy5wYXllcklEID0gcGF5aWRBcnJbMV07XHJcbiAgICAgICAgICAgIHBheUNTLmNvZGUgPSAxO1xyXG4gICAgICAgICAgICBwYXlDUy5hd2MgPSBkc3AuZ2V0Q29va2llKFwiYXdjXCIpIHx8ICcnO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2cocGF5Q1MpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHBheUNTKSlcclxuICAgICAgICAgICAgdmFyIGlzVG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGF5VG9rZW4nKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaXNUb2tlbilcclxuICAgICAgICAgICAgaWYgKGlzVG9rZW4gPT0gdG9rZW5BcnJbMV0pIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9wYXkvcGF5JywgSlNPTi5zdHJpbmdpZnkocGF5Q1MpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDExMTEpXHJcbiAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGF5bWVudCBGYWlsZWQnKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IFN1Y2NlZWQnKVxyXG4gICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGF5VG9rZW4nLCB0b2tlbkFyclsxXSlcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlTnVtID0gMTtcclxuICAgICAgICAgICAgICAgICAgZ2V0TGlzdCgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAvL2F3aW4g5Y+R6YCB5pSv5LuY5oiQ5YqfZmFsbC1iYWNrXHJcbiAgICAgICAgICAgICAgICAgIGxldCBhd2luTG9jYWxQYXJhbXMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3aW5Mb2NhbFBhcmFtcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oYF9wYXlwYWxfJHtwYXlDUy50b2tlbn1gKSlcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhd2luTG9jYWxQYXJhbXMpXHJcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUubG9nKCfop6PmnpDplJnor68nKTsgfVxyXG4gICAgICAgICAgICAgICAgICBpZihhd2luTG9jYWxQYXJhbXMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGF3aW5KUyAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9ICc8c2NyaXB0ID4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcgdmFyIEFXSU4gPSB7fTsnICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJyAgQVdJTi5UcmFja2luZyA9IHt9OycgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcgQVdJTi5UcmFja2luZy5TYWxlID0ge307JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJyBBV0lOLlRyYWNraW5nLlNhbGUuYW1vdW50ID0nICsgYXdpbkxvY2FsUGFyYW1zLmF3aW5BbW91bnQgKyAnOycgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcgQVdJTi5UcmFja2luZy5TYWxlLm9yZGVyUmVmID1cIicgKyBhd2luTG9jYWxQYXJhbXMuYXdpblJlZisgJ1wiOycgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcgQVdJTi5UcmFja2luZy5TYWxlLnBhcnRzICA9XCInICsgXCJERUZBVUxUOlwiICsgYXdpbkxvY2FsUGFyYW1zLmF3aW5BbW91bnQrICdcIjsnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnQVdJTi5UcmFja2luZy5TYWxlLmN1cnJlbmN5ID0gXCJVU0RcIjsnK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcgQVdJTi5UcmFja2luZy5TYWxlLnRlc3QgPSBcIicgKyBhd2luVGVzTW9kZSArICdcIjsnK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdBV0lOLlRyYWNraW5nLlNhbGUuY2hhbm5lbCA9IFwiYXdcIjsnK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICsnPFxcL3NjcmlwdD4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvc3JjID0gJ2h0dHBzOi8vd3d3LmR3aW4xLmNvbS8yMTU3OC5qcyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0LnNyYyA9IG9zcmM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGltZ0h0dHBGdW4oKXtcclxuICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmRlckNvdW50TW9uZXkgPSBhd2luTG9jYWxQYXJhbXMuYXdpbkFtb3VudC50b0ZpeGVkKDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgQmFza2V0SW1hZ2UgPSBuZXcgSW1hZ2UoMSwxKTtcclxuICAgICAgICAgICAgICAgICAgICAgIEJhc2tldEltYWdlLnNyYyA9IGBodHRwczovL3d3dy5hd2luMS5jb20vc3JlYWQuaW1nP3R0PW5zJnR2PTImbWVyY2hhbnQ9MjE1NzgmYW1vdW50PSR7b3JkZXJDb3VudE1vbmV5fSZjaD1hdyZwYXJ0cz1ERUZBVUxUOiR7b3JkZXJDb3VudE1vbmV5fSZjcj1VU0QmcmVmPSR7YXdpbkxvY2FsUGFyYW1zLmF3aW5SZWZ9JnRlc21vZGU9JHthd2luVGVzTW9kZX1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYF9wYXlwYWxfJHtwYXlDUy50b2tlbn1gKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXdjVGV4dCA9IGRzcC5nZXRDb29raWUoJ2F3YycpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHV0bVNvdXJjZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1dG1Tb3VyY2UnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihhd2NUZXh0ICYmIHV0bVNvdXJjZSA9PSAnYXdpbicpey8v5pyJYXdpbueahGF3Y+WAvCDlubbkuJTnmbvlvZXlubPlj7DmnaXmupDmmK9hd2luXHJcbiAgICAgICAgICAgICAgICAgICAgICBhd2luSlMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgaW1nSHR0cEZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpbml0SXNDaGVja291dCgpXHJcblxyXG4gICAgICAvL+e7meWvvOiIquaMiemSrua3u+WKoOeCueWHu+S6i+S7tiDpmpDol4/lrZDorqLljZVcclxuICAgICAgJCgnLmRyb3Atb3JkZXJzdGF0dXMtbmF2JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kcm9wc2hpcHBpbmdTdGF0dXMtbmF2Jykuc2hvdygpO1xyXG4gICAgICAgIC8vIOmakOiXj+WtkOiuouWNlemhtemdolxyXG4gICAgICAgICQoJy5wcm9jZXNzaW5nLXN1Yk9yZGVycycpLmhpZGUoKTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIOe7meWkhOeQhuiuouWNleeahOaMiemSrua3u+WKoOm8oOagh+enu+WFpeenu+WHulxyXG4gICAgICAkKCcuZGVhbC1zdHlsZScpLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICdyZ2IoMjQ5LCAxNDgsIDQxKScpO1xyXG4gICAgICAgICQodGhpcykuY3NzKCdjb2xvcicsICcjZmZmJyk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICcnKTtcclxuICAgICAgICAkKHRoaXMpLmNzcygnY29sb3InLCAnI2Y5OTQyOScpO1xyXG4gICAgICB9KVxyXG4gICAgICAvLyDnu5nlr7zlh7rorqLljZXnmoTmjInpkq7mt7vliqDpvKDmoIfnp7vlhaXnp7vlh7pcclxuICAgICAgJCgnLmV4cG9ydC1vcmRlcnMnKS5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAncmdiKDExLCA5OCwgMTMwKScpO1xyXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAncmdiKDExLCA3OCwgMTAzKScpO1xyXG4gICAgICB9KVxyXG4gICAgICAvL+e7mXByb2Nlc3NpbmfkuIvnmoTorqLljZXmt7vliqDpgInkuK3pnZ7pgInkuK1cclxuICAgICAgdmFyIHByb2NlSW5kZXggPSAwO1xyXG4gICAgICAkKCcjcHJvY2UtdGFibGUnKS5vbignY2xpY2snLCAnLnpjaGVja2JveCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICAgIHByb2NlSW5kZXgrKztcclxuICAgICAgICAgIGlmIChwcm9jZUluZGV4ID09ICQoJyNwcm9jZS10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KCdxdWFuYnV4dWFuemhvZ24nKVxyXG4gICAgICAgICAgICAkKCcjcHJvY2UtdGFibGUgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIHByb2NlSW5kZXgtLTtcclxuICAgICAgICAgIGlmIChwcm9jZUluZGV4ICE9ICQoJyNwcm9jZS10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICQoJyNwcm9jZS10YWJsZSAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAvL+WFqOmAiVxyXG4gICAgICAkKCcjcHJvY2UtdGFibGUnKS5vbignY2xpY2snLCAnLnpjaGVja2VkLWFsbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICAgIHByb2NlSW5kZXggPSAkKCcjcHJvY2UtdGFibGUgLnpjaGVja2JveCcpLmxlbmd0aDtcclxuICAgICAgICAgICQoJyNwcm9jZS10YWJsZSAuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgcHJvY2VJbmRleCA9IDA7XHJcbiAgICAgICAgICAkKCcjcHJvY2UtdGFibGUgLnpjaGVja2JveCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgdmFyIHpwcm9JbmRleCA9IDA7XHJcbiAgICAgICQoJyN6cHJvY2UtdGFiJykub24oJ2NsaWNrJywgJy56Y2hlY2tib3gnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICB6cHJvSW5kZXgrKztcclxuICAgICAgICAgIGlmICh6cHJvSW5kZXggPT0gJCgnI3pwcm9jZS10YWIgLnpjaGVja2JveCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBhbGVydCgncXVhbmJ1eHVhbnpob2duJylcclxuICAgICAgICAgICAgJCgnI3pwcm9jZS10YWIgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIHpwcm9JbmRleC0tO1xyXG4gICAgICAgICAgaWYgKHpwcm9JbmRleCAhPSAkKCcjenByb2NlLXRhYiAuemNoZWNrYm94JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICQoJyN6cHJvY2UtdGFiIC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC8v5YWo6YCJXHJcbiAgICAgICQoJyN6cHJvY2UtdGFiJykub24oJ2NsaWNrJywgJy56Y2hlY2tlZC1hbGwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICB6cHJvSW5kZXggPSAkKCcjenByb2NlLXRhYiAuemNoZWNrYm94JykubGVuZ3RoO1xyXG4gICAgICAgICAgJCgnI3pwcm9jZS10YWIgLnpjaGVja2JveCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIHpwcm9JbmRleCA9IDA7XHJcbiAgICAgICAgICAkKCcjenByb2NlLXRhYiAuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgICQoJy5kLWRpcmVjdC1yaWdodCcpLmNzcyh7XHJcbiAgICAgICAgJ21pbi1oZWlnaHQnOiAkKHdpbmRvdykuaGVpZ2h0KCkgKiAxIC0gMTUgKyAncHgnXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgXHJcbiAgICAgIC8v57uZ6K6i5Y2V54q25oCB6LWL5YC855qE5Ye95pWwXHJcbiAgICAgIGZ1bmN0aW9uIG51bUZ1bigpIHtcclxuICAgICAgICAkc2NvcGUuYXdhaXROdW0gPSAkc2NvcGUub3Jkc3RhdHVzTnVtLnlpO1xyXG4gICAgICAgICRzY29wZS5kcm9wcHJvY2Vzc051bSA9ICRzY29wZS5vcmRzdGF0dXNOdW0uZXI7XHJcbiAgICAgICAgJHNjb3BlLmRyb3Bwcm9jZXNzZWROdW0gPSAkc2NvcGUub3Jkc3RhdHVzTnVtLnNhbjtcclxuICAgICAgICAkc2NvcGUuY29tcGxldGVOdW0gPSAkc2NvcGUub3Jkc3RhdHVzTnVtLnNpO1xyXG4gICAgICAgICRzY29wZS5jbG9zZWROdW0gPSAkc2NvcGUub3Jkc3RhdHVzTnVtLnd1O1xyXG4gICAgICAgIC8vICRzY29wZS5kaXNwYXRjaE51bSA9ICRzY29wZS5vcmRzdGF0dXNOdW0ubGl1O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+iuouWNleWPt+aQnOe0olxyXG4gICAgICAkKCcub3JkLXNlYXJjaC1pbnAnKS5rZXlwcmVzcyhmdW5jdGlvbiAoRXZlbnQpIHtcclxuICAgICAgICBpZiAoRXZlbnQua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgJHNjb3BlLnNlYXJjaE9yZE51bUZ1bigpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgZnVuY3Rpb24gdGpGdW4oY3MpIHtcclxuICAgICAgICB2YXIgb3JkSWQgPSAkLnRyaW0oJCgnLm9yZC1zZWFyY2gtaW5wJykudmFsKCkpO1xyXG4gICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgY3MuZGF0YSA9IHt9O1xyXG4gICAgICAgIGNzLmRhdGEuc3RhdHVzID0gJzInO1xyXG4gICAgICAgIGNzLmRhdGEucGFnZSA9ICRzY29wZS5wYWdlTnVtIC0gMDtcclxuICAgICAgICBpZiAob3JkSWQuaW5kZXhPZignQ0onKSA+PSAwKSB7XHJcbiAgICAgICAgICBjcy5kYXRhLm51bWlkID0gb3JkSWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNzLmRhdGEub3JkZXJJZCA9IG9yZElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjcy5kYXRhLmxpbWl0ID0gJHNjb3BlLnBhZ2VTaXplIC0gMDtcclxuICAgICAgICBjcy5kYXRhLmRhdGVCZWdpbiA9ICQoJyNjai1zdGltZScpLnZhbCgpOy8vY2rlvIDlp4vml7bpl7RcclxuICAgICAgICBjcy5kYXRhLmRhdGVFbmQgPSAkKCcjY2otZXRpbWUnKS52YWwoKTsvL2Nq5byA5aeL5pe26Ze0XHJcbiAgICAgICAgLy/pq5jnuqfmkJzntKJcclxuICAgICAgICBjcy5kYXRhLnN0b3JlT3JkZXJEYXRlQmVnaW4gPSAkKCcjZmlsdGVyLXN0YXJ0ZGF0ZScpLnZhbCgpO1xyXG4gICAgICAgIGNzLmRhdGEuc3RvcmVPcmRlckRhdGVFbmQgPSAkKCcjZmlsdGVyLWVuZGRhdGUnKS52YWwoKTtcclxuICAgICAgICBjcy5kYXRhLnN0b3JlUHJvZHVjdE5hbWUgPSAkc2NvcGUuZmlsdGVyT2JqLnN0b3JlUHJvZHVjdE5hbWU7XHJcbiAgICAgICAgY3MuZGF0YS5jalByb2R1Y3ROYW1lID0gJHNjb3BlLmZpbHRlck9iai5jalByb2R1Y3ROYW1lO1xyXG4gICAgICAgIGNzLmRhdGEuYnV5ZXJOYW1lID0gJHNjb3BlLmZpbHRlck9iai5idXllck5hbWU7XHJcbiAgICAgICAgY3MuZGF0YS53ZWlnaHQgPSAkc2NvcGUuZmlsdGVyT2JqLndlaWdodDtcclxuICAgICAgICBjcy5kYXRhLnNrdSA9ICRzY29wZS5maWx0ZXJPYmouc2t1O1xyXG4gICAgICB9XHJcbiAgICAgIC8v5oyJ6K6i5Y2V5Y+35pCc57SiXHJcbiAgICAgICRzY29wZS5zZWFyY2hPcmROdW1GdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSAxO1xyXG4gICAgICAgIGdldExpc3QoKVxyXG4gICAgICB9XHJcbiAgICAgIC8v5qC55o2u6K6i5Y2V54q25oCB5p+l6K+i6K6i5Y2VXHJcbiAgICAgICRzY29wZS5lbnRlclppRnVuID0gZnVuY3Rpb24gKGl0ZW0sIHN0dSkge1xyXG4gICAgICAgIHZhciBtdW9yZGlkID0gYnMuZW5jb2RlKGl0ZW0uSUQpXHJcbiAgICAgICAgY29uc29sZS5sb2coc3R1KVxyXG4gICAgICAgIC8v5bCG57qg57q36K+35rGC5Y+C5pWw5a2Y5YWlXHJcbiAgICAgICAgc3R1ID09IDUgPyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZHJvcC1wcm9jZS1pc0Rpc3B1dGUnLCAxKSA6IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkcm9wLXByb2NlLWlzRGlzcHV0ZScsIDApOyBcclxuICAgICAgICBsb2NhdGlvbi5ocmVmID0gJyMvZHJvcC1wcm9jZS16aS8nICsgbXVvcmRpZCArICcvJyArICcvJyArIHN0dSArICcvJztcclxuICAgICAgfVxyXG4gICAgICAvL2Nq5byA5aeL5pel5pyf5pCc57SiXHJcbiAgICAgICQoXCIjY2otc3RpbWVcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjamVuZHRpbWUgPSAkKFwiI2NqLXN0aW1lXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHZhciBlbmR0aW1lMiA9ICQoXCIjY2otc3RpbWVcIikudmFsKCk7XHJcbiAgICAgICAgICBpZiAoZW5kdGltZTIgIT0gY2plbmR0aW1lKSB7XHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KGVuZHRpbWUyKychPScrY2plbmR0aW1lKVxyXG4gICAgICAgICAgICAkc2NvcGUuY2pkcm9wYXdhaXRwTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICBkc3AubG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JyksICQod2luZG93KS5oZWlnaHQoKSAtIDE3MSwgNDcsIDApO1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSAxO1xyXG4gICAgICAgICAgICBnZXRMaXN0KClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCAxMDApXHJcbiAgICAgIH0pXHJcbiAgICAgIC8vY2rnu5PmnZ/ml6XmnJ/mkJzntKJcclxuICAgICAgJChcIiNjai1ldGltZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNqZW5kdGltZSA9ICQoXCIjY2otZXRpbWVcIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIGVuZHRpbWUyID0gJChcIiNjai1ldGltZVwiKS52YWwoKTtcclxuICAgICAgICAgIGlmIChlbmR0aW1lMiAhPSBjamVuZHRpbWUpIHtcclxuICAgICAgICAgICAgLy8gYWxlcnQoZW5kdGltZTIrJyE9JytjamVuZHRpbWUpXHJcbiAgICAgICAgICAgICRzY29wZS5jamRyb3Bhd2FpdHBMaXN0ID0gW107XHJcbiAgICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAkc2NvcGUucGFnZU51bSA9IDE7XHJcbiAgICAgICAgICAgIGdldExpc3QoKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMClcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8v54K55Ye75a2Q6K6i5Y2V55qE6L+U5Zue5oyJ6ZKuIOmakOiXj+WtkOiuouWNlVxyXG4gICAgICAkKCcuYmFjay1tdS1vcmQnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnN1Yi1vcmRlcnMnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmRyb3BzaGlwcGluZ1N0YXR1cy1uYXYnKS5zaG93KCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIHZhciBhYSA9IHt9Oy8v5a2Y5YKoIOmcgOimgeaLvOaOpeWPkemAgeeahOWPguaVsFxyXG5cclxuICAgICAgJHNjb3BlLnppb3JkRnVuID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAvLyDpmpDol4/kuoznuqfnlYzpnaJcclxuICAgICAgICAvLyBhbGVydCgzMjM0KVxyXG4gICAgICAgIC8vICQoJy5kcm9wc2hpcHBpbmdTdGF0dXMtbmF2JykuaGlkZSgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xyXG4gICAgICAgIHZhciBtdW9yZGlkID0gYnMuZW5jb2RlKGl0ZW0uSUQpO1xyXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnIy9kcm9wLXByb2NlLXppLycgKyBtdW9yZGlkICsgJy8vLycgKyAkc2NvcGUuZmlsdGVyT2JqLnNrdTtcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuZ290b05vZmggPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHZhciBtdW9yZGlkID0gYnMuZW5jb2RlKGl0ZW0uSUQpO1xyXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnIy9kcm9wLXByb2NlLXppLzEvJyArIG11b3JkaWQgKyAnLy8nO1xyXG4gICAgICB9XHJcbiAgICAgIC8v5a+85Ye66K6i5Y2VXHJcbiAgICAgICRzY29wZS5kY29yZEZsYWcgPSBmYWxzZTtcclxuICAgICAgJHNjb3BlLmRjb3JkQ2FsbGJhY2tGbGFnID0gZmFsc2U7Ly/ov5Tlm57pk77mjqXlvLnmoYZcclxuICAgICAgJHNjb3BlLmV4cG9ydE9yZEZ1biA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgJHNjb3BlLmRjb3JkRmxhZyA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLml0ZW1JZCA9IGl0ZW0uSUQ7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmV4cG9ydFN1cmVGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGF5ZXIubG9hZCgyKTtcclxuICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL2V4cG9ydENKT3JkZXJNJywge1xyXG4gICAgICAgICAgaWQ6ICRzY29wZS5pdGVtSWQsXHJcbiAgICAgICAgICBza3U6ICRzY29wZS5maWx0ZXJPYmouc2t1XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgJHNjb3BlLmRjb3JkRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgIGlmIChkYXRhLmRhdGEuaHJlZi5pbmRleE9mKCdodHRwJykgPj0gMCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZGNvcmRDYWxsYmFja0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXhjZWxIcmVmID0gZGF0YS5kYXRhLmhyZWY7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0V4cG9ydCBvcmRlciBlcnJvci4nKVxyXG4gICAgICAgICAgICAkc2NvcGUuZGNvcmRDYWxsYmFja0ZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBlcnJGdW4pXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmV4cG9ydFF4RnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5kY29yZEZsYWcgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICAvL+WFs+mXrei/lOWbnueahOmTvuaOpeW8ueahhlxyXG4gICAgICAkc2NvcGUuY2xvc2VMaW5rRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5kY29yZENhbGxiYWNrRmxhZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGZ1bmN0aW9uIGVyckZ1bihkYXRhKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgIH1cclxuICAgICAgLy/lj5HnpajmjInpkq7kuovku7ZcclxuICAgICAgJHNjb3BlLmludm9pY2VGdW4gPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhpZCk7XHJcbiAgICAgICAgZHNwLmlzaW52b2ljZURpYWxvZyhpZCwgJycpO1xyXG4gICAgICB9XHJcbiAgICAgIC8v6auY57qn5pCc57Si6YOo5YiG55qE5p+l6K+iXHJcbiAgICAgICRzY29wZS5hZHZhbmNlU2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5wYWdlTnVtID0gMTtcclxuICAgICAgICBnZXRMaXN0KClcclxuICAgICAgfVxyXG4gICAgICBcclxuICAvLyBzdHJpcGXlkoxjaGVja3VvdOS6pOaYk+eKtuaAgeafpeivolxyXG4gIGZ1bmN0aW9uIHN0cmlwZVRyYWRlUXVlcnkocGFybWFzKSB7XHJcbiAgICBsYXllci5sb2FkKDIpXHJcbiAgICBkc3AucG9zdEZ1bignYXBwL3BheS9zdHJpcGVUcmFkZVF1ZXJ5JywgcGFybWFzLCAoe2RhdGF9KSA9PiB7XHJcbiAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJylcclxuICAgICAgaWYoZGF0YS5jb2RlID09IDIwMCkge1xyXG4gICAgICAgICRzY29wZS5zdHJpcGVTdGF0dXMgPSArZGF0YS5kYXRhXHJcbiAgICAgICAgaWYocGFybWFzICYmIHBhcm1hcy5wYXltZW50VHlwZSA9PT0gJ1N0cmlwZScpIHtcclxuICAgICAgICAgIC8qKiAx5b6F5pSv5LuYIDLmlK/ku5jkuK0gM+aUr+S7mOaIkOWKnyA05pSv5LuY5aSx6LSlIDXmlK/ku5jlvILluLggNuaUr+S7mOWPlua2iCAqL1xyXG4gICAgICAgICAgc3dpdGNoKCtkYXRhLmRhdGEpIHtcclxuICAgICAgICAgICAgY2FzZSAxOiAgXHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdBd2FpdGluZyBwYXltZW50IGNvbmZpcm1hdGlvbi4gUGxlYXNlIHJlZnJlc2ggYW5kIGNoZWNrIGl0IGxhdGVyLicpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI6IFxyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnQXdhaXRpbmcgcGF5bWVudCBjb25maXJtYXRpb24uIFBsZWFzZSByZWZyZXNoIGFuZCBjaGVjayBpdCBsYXRlci4nKTtcclxuICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBjYXNlIDM6IFxyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnUGF5bWVudCBTdWNjZXNzZnVsLicpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQ6IFxyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnUGF5bWVudCB2aWEgU3RyaXBlIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA1OiBcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgdmlhIFN0cmlwZSBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNjogXHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IHZpYSBTdHJpcGUgZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OiAgJydcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGFybWFzICYmIHBhcm1hcy5wYXltZW50VHlwZSA9PT0gJ0NoZWNrb3V0Jykge1xyXG4gICAgICAgICAgLyoqIDHlvoXmlK/ku5ggMuaUr+S7mOS4rSAz5pSv5LuY5oiQ5YqfIDTmlK/ku5jlpLHotKUgNeaUr+S7mOW8guW4uCA25pSv5LuY5Y+W5raIICovXHJcblx0XHRcdFx0XHRzd2l0Y2goK2RhdGEuZGF0YSkge1xyXG5cdFx0XHRcdFx0XHRjYXNlIDE6ICBcclxuXHRcdFx0XHRcdFx0XHRsYXllci5tc2coJ0F3YWl0aW5nIFBheW1lbnQuJyk7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgMjogXHJcblx0XHRcdFx0XHRcdFx0bGF5ZXIubXNnKCdBd2FpdGluZyBwYXltZW50IGNvbmZpcm1hdGlvbi4gUGxlYXNlIHJlZnJlc2ggYW5kIGNoZWNrIGl0IGxhdGVyLicpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlIDM6IFxyXG5cdFx0XHRcdFx0XHRcdGxheWVyLm1zZygnUGF5bWVudCBTdWNjZXNzZnVsLicpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlIDQ6IFxyXG5cdFx0XHRcdFx0XHRcdGxheWVyLm1zZygnUGF5bWVudCB2aWEgQ2hlY2tPdXQgZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlIDU6IFxyXG5cdFx0XHRcdFx0XHRcdGxheWVyLm1zZygnUGF5bWVudCB2aWEgQ2hlY2tPdXQgZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlIDY6IFxyXG5cdFx0XHRcdFx0XHRcdGxheWVyLm1zZygnUGF5bWVudCBDYW5jZWxsZWQuJyk7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGRlZmF1bHQ6IGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9teUNKLmh0bWwjL2Ryb3AtcHJvY2UnO1xyXG4gICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBsYXllci5tc2coZGF0YS5tc2cpXHJcbiAgICAgIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8gc3RyaXBl5Lqk5piT54q25oCB5p+l6K+iXHJcbiAgZnVuY3Rpb24gZ2V0U3RyaXBlVHJhZGUoKSB7XHJcbiAgICBjb25zdCBzdHJpcGVPYmogPSBicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0cmlwZU9iaicpIHx8ICcnKSAmJiBKU09OLnBhcnNlKGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3RyaXBlT2JqJykgfHwgJycpKTtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzdHJpcGVPYmonKVxyXG4gICAgaWYoIShzdHJpcGVPYmogJiYgc3RyaXBlT2JqLm9yZGVySWQpKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgY29uc3Qgb3JkaWQgPSAkc3RhdGVQYXJhbXMub3JkaWQ7XHJcbiAgICBpZihvcmRpZCAhPT0gc3RyaXBlT2JqLnNob3dPcmRJZCkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IHBhcm1hcyA9IHtcclxuICAgICAgJ29yZGVySWQnOiBzdHJpcGVPYmogJiYgc3RyaXBlT2JqLm9yZGVySWQsXHJcbiAgICAgICdjb2RlJzogc3RyaXBlT2JqICYmIHN0cmlwZU9iai5zdHJpcGVDb2RlLFxyXG4gICAgICAncGF5SWQnOiBzdHJpcGVPYmogJiYgc3RyaXBlT2JqLnBheUlkLFxyXG4gICAgICAncGF5bWVudFR5cGUnOiBzdHJpcGVPYmogJiYgc3RyaXBlT2JqLnBheW1lbnRUeXBlLFxyXG4gICAgfVxyXG4gICAgc3RyaXBlVHJhZGVRdWVyeShwYXJtYXMpXHJcbiAgfVxyXG4gIGdldFN0cmlwZVRyYWRlKClcclxuXHJcbiAgLy8gY2hlY2tvdXTkuqTmmJPnirbmgIHmn6Xor6JcclxuICBmdW5jdGlvbiBnZXRDaGVja291dFRyYWRlKCkge1xyXG4gICAgY29uc3QgY2hlY2tvdXRPYmogPSBicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NoZWNrb3V0T2JqJykgfHwgJycpICYmIEpTT04ucGFyc2UoYnMuZGVjb2RlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjaGVja291dE9iaicpIHx8ICcnKSk7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY2hlY2tvdXRPYmonKVxyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2Nrb1Nlc3Npb25JZCcpXHJcbiAgICBpZighKGNoZWNrb3V0T2JqICYmIGNoZWNrb3V0T2JqLnBheW1lbnRUeXBlID09PSAnQ2hlY2tvdXQnKSkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IHBhcm1hcyA9IHtcclxuICAgICAgJ29yZGVySWQnOiBjaGVja291dE9iaiAmJiBjaGVja291dE9iai5vcmRlcklkLFxyXG4gICAgICAnY29kZSc6IGNoZWNrb3V0T2JqICYmIGNoZWNrb3V0T2JqLnN0cmlwZUNvZGUsXHJcbiAgICAgICdwYXltZW50VHlwZSc6IGNoZWNrb3V0T2JqICYmIGNoZWNrb3V0T2JqLnBheW1lbnRUeXBlLFxyXG4gICAgICAncGF5SWQnOiBjaGVja291dE9iaiAmJiBjaGVja291dE9iai5wYXlJZCxcclxuICAgICAgJ3Nlc3Npb25JZCc6ICRzY29wZS5ja29TZXNzaW9uSWRcclxuICAgIH1cclxuICAgIHN0cmlwZVRyYWRlUXVlcnkocGFybWFzKVxyXG4gIH1cclxuXHJcbiAgICB9XSk7XHJcblxyXG4gIHJldHVybiBhcHA7XHJcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBbkJBO0FBcUJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBbkJBO0FBQ0E7QUFDQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFFQTtBQUVBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../src/pages/mycj/dropshipping-orders/drop-processing.js\n");

/***/ })

}]);