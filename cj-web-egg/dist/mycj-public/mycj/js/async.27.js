(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[27],{

/***/ "../src/pages/mycj/favorites/favorites.js":
/*!************************************************!*\
  !*** ../src/pages/mycj/favorites/favorites.js ***!
  \************************************************/
/*! exports provided: favoritesFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"favoritesFactory\", function() { return favoritesFactory; });\nfunction favoritesFactory(angular) {\n  var app = angular.module('mycj-favorites.module', ['service', 'home-service']);\n  app.directive('onFinishRender', ['$timeout', '$parse', function ($timeout, $parse) {\n    return {\n      restrict: 'A',\n      link: function link(scope, element, attr) {\n        if (scope.$last === true) {\n          $timeout(function () {\n            scope.$emit(\"ngLoadFinished\");\n          });\n        }\n      }\n    };\n  }]);\n  var winHeight = $(window).height() * 1;\n  var nodataHeight = winHeight - 311;\n  app.controller('mycj-favorites.ctrl', ['$scope', '$rootScope', 'dsp', 'cjhome', '$stateParams', '$timeout', function ($scope, $rootScope, dsp, cjhome, $stateParams, $timeout) {\n    var userInfo = $rootScope.userInfo;\n    $scope.isVip = userInfo.vip;\n    $scope.userId = userInfo.userId;\n    $scope.loginName = userInfo.loginName;\n    $scope.token = userInfo.token;\n    dsp.setRightMinHeight(); // 根据shopify判断按钮\n\n    var getShopData = {};\n    getShopData.data = JSON.stringify({\n      userId: $scope.userId\n    }); //获取商品类目\n    // dsp.getCateList(function (data) {\n    //   $scope.categoryListOne = data;\n    // })\n\n    function getCategoryList() {\n      var params = {\n        flag: '',\n        filter: '{\"categoryId\":\"\",\"inputStr\":\"\"}',\n        //filter这个参数暂时没用到，传一个json格式的空字符串\n        pressId: $scope.selectedCategory //收藏夹id\n\n      };\n      dsp.postFun('cj/Collect/selectCollectCategory', JSON.stringify(params), function (res) {\n        var postResult = res.data;\n        console.log(postResult);\n\n        if (postResult && postResult.statusCode == '200') {\n          $scope.categoryListOne = postResult.result;\n        } else {\n          layer.msg('Get Category List Fieled.');\n        }\n      });\n    }\n\n    $rootScope.$on('cj/homePage/huoQuShouCangLieBiao', function (_, bool) {\n      return $scope.loading = bool;\n    }); // flag = 0 全部, flag = 1 爬虫, flag = 2 本地\n\n    $scope.favoriteList = [];\n    $scope.pageNum = '1';\n    $scope.pageSize = '10';\n    $scope.favFalg = '0';\n    $scope.totalNum = 0;\n    $scope.seletedCate = '';\n    $scope.searchVal = '';\n    $scope.noListData = false;\n    $scope.checkoutWishList = []; // 选中的心愿单\n\n    $scope.customCategoryList = [];\n    $scope.selectedCategory = \"\"; //选中的分类列表\n\n    $scope.categoryName = \"\"; //自定义心愿单名称\n\n    $scope.isHideScrollBtn = false; //是否隐藏滑动按钮\n\n    $scope.selectedPrdList = []; //选中的商品列表\n\n    $scope.moveToCategory = ''; // $scope.noData = true;\n\n    $scope.getFavoriteList = function (pageNum, pageSize, categoryId, inputStr, flag, scb) {\n      // var getFavData = {};\n      // getFavData.pageNo = pageNum;\n      // getFavData.pageSize = pageSize;\n      // getFavData.flag = flag;\n      // getFavData.filter = JSON.stringify({\n      //   categoryId: categoryId,\n      //   inputStr: inputStr\n      // });\n      var filterObj = {\n        categoryId: categoryId,\n        inputStr: inputStr\n      };\n      var params = {\n        pageNo: pageNum,\n        pageSize: pageSize,\n        flag: flag,\n        filter: JSON.stringify(filterObj),\n        pressId: $scope.selectedCategory\n      };\n      $scope.favoriteList = [];\n      dsp.postFun('cj/Collect/selectProductList', JSON.stringify(params), function (data) {\n        //'cj/homePage/huoQuShouCangLieBiao' 原始接口\n        var data = data.data;\n\n        if (data.statusCode != 200) {\n          layer.msg('Get the wish list error');\n          return false;\n        }\n\n        var result = data.result;\n        $.each(result.list, function (i, v) {\n          //BIGIMG\n          v.BIGIMG = updateImg(v.BIGIMG);\n        });\n        console.log(result);\n        scb(result);\n      });\n    };\n\n    function updateImg(imgurl) {\n      var url;\n\n      if (imgurl && imgurl.indexOf('https') != -1) {\n        url = imgurl.replace('https://', 'https://');\n      } else if (imgurl && imgurl.indexOf('http://') != -1) {\n        url = imgurl.replace('http://', 'https://');\n      } else if (imgurl) {\n        url = \"https://\" + imgurl;\n      } else {\n        url = '';\n      }\n\n      return url;\n    }\n\n    $scope.hasListData = true;\n\n    $scope.firstRender = function () {\n      $scope.getFavoriteList($scope.pageNum, $scope.pageSize, $scope.seletedCate, $scope.searchVal, $scope.favFalg, function (data) {\n        console.log('list', data);\n        $scope.totalNum = data.totalNum;\n        dsp.removeNodataPic($('.favorite-cont'));\n\n        if ($scope.totalNum > 0) {\n          $scope.hasListData = true;\n          $scope.noListData = false;\n          $scope.noData = false; //settleData(data);\n\n          $scope.favoriteList = data.list;\n          $scope.checkoutWishList = data.list;\n          $scope.check_All_Wish = false;\n          removeImgHttp($scope.favoriteList);\n          setPagination($scope.totalNum);\n        } else {\n          $scope.hasListData = false;\n          $scope.noData = true; // 一点数据也没有，展示默认图\n\n          $scope.noListData = false;\n\n          if ($scope.selectedCategoryItem.wishproductSum > 0) {\n            $scope.noListData = true; // 没有搜索到数据，展示nodata图\n\n            $scope.noData = false;\n            dsp.addNodataPicNewStyle($('.favorite-cont'), $scope.isVip === \"1\" ? true : false);\n          }\n        }\n\n        $scope.totalCounts = Math.ceil($scope.totalNum / $scope.pageSize);\n        $scope.$broadcast('page-data', {\n          pageNum: $scope.pageNum,\n          totalNum: $scope.totalCounts,\n          totalCounts: $scope.totalNum,\n          pageSize: $scope.pageSize\n        });\n      });\n    }; // $scope.firstRender();\n\n\n    $scope.searchFavList = function () {\n      $scope.pageNum = '1';\n      $scope.firstRender();\n    };\n\n    $scope.enterSearch = function (event) {\n      if (event.keyCode == 13) {\n        $scope.searchFavList();\n      }\n    };\n\n    $scope.chingeVarient = function (index) {\n      alert(index);\n    };\n\n    $('.pay-wares-list').on('change', 'li .varient-sel', function () {\n      var curVarIndex = $(this).attr('index') * 1;\n      var filterKeysOne = [];\n      var cid = $(this).parent().siblings('.id-span').html();\n      var cIndex = dsp.findIndexByKey($scope.localList, 'id', cid);\n      var varientKeysInner = $scope.localList[cIndex].varientKeysInner;\n      var varientArr = $scope.localList[cIndex].varientArr;\n\n      for (var i = 0; i < varientKeysInner.length; i++) {\n        var curVarKey = varientKeysInner[i].split('-');\n\n        if (curVarKey[curVarIndex] == $(this).val()) {\n          filterKeysOne.push(curVarKey);\n        }\n      } // console.log(filterKeysOne);\n\n\n      for (var i = 0; i < varientArr.length; i++) {\n        // console.log(i);\n        if (i == curVarIndex) continue;\n        var canbeTwo = []; // console.log(filterKeysOne);\n\n        for (var j = 0; j < filterKeysOne.length; j++) {\n          canbeTwo.push(filterKeysOne[j][i]);\n        } // console.log(canbeTwo);\n        // var curVarTwoIndex = curVarIndex + 1;\n\n\n        var OtherSel1 = $(this).parent().find('.varient-sel').eq(i).val();\n        var isInTwo = $.inArray(OtherSel1, canbeTwo);\n\n        if (isInTwo == -1) {\n          $(this).parent().find('.varient-sel').eq(i).val(canbeTwo[0]);\n        }\n\n        var filterKeysTwo = [];\n        var curValTwo = $(this).parent().find('.varient-sel').eq(i).val();\n\n        for (var k = 0; k < filterKeysOne.length; k++) {\n          if (filterKeysOne[k][i] == curValTwo) {\n            filterKeysTwo.push(filterKeysOne[k]);\n          }\n        }\n\n        filterKeysOne = filterKeysTwo;\n      }\n    });\n\n    function addFlag0(arr) {\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].flag = 0;\n      }\n    }\n\n    function addFlag1(arr) {\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].flag = 1;\n      }\n    }\n\n    function removeImgHttp(arr) {\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i].bigImg) arr[i].bigImg = 'https://' + arr[i].bigImg.replace('https://', '').replace('http://', '');\n      }\n    } // 处理返回数据\n\n\n    function settleData(data) {\n      var locaList = data[0].location[0] == null ? [] : data[0].location;\n      var reptLust = data[0].reptile;\n      removeImgHttp(locaList);\n      addFlag1(locaList);\n      addFlag0(reptLust);\n      $scope.localList = locaList;\n      $scope.favoriteList = locaList.concat(reptLust); // $scope.totalNum = data[0].all;\n\n      var localIds = [];\n\n      for (var i = 0; i < $scope.localList.length; i++) {\n        localIds.push($scope.localList[i].id);\n      } // console.log(localIds);\n\n\n      if (localIds.length == 0) return;\n      dsp.getFun('pojo/product/getByIds?ids=' + localIds.join(','), function (data) {\n        var data = data.data;\n        var result = JSON.parse(data.result);\n        console.log('varient', result);\n        var varientKeysInnerObj = {};\n\n        for (var k in result) {\n          var varientKeysInner = [];\n\n          for (var i = 0; i < result[k].length; i++) {\n            varientKeysInner.push(result[k][i].variantKey);\n          }\n\n          if (varientKeysInner[0] == 'default') {\n            varientKeysInner = [];\n          }\n\n          varientKeysInnerObj[k] = varientKeysInner;\n        }\n\n        for (var i = 0; i < $scope.localList.length; i++) {\n          $scope.localList[i].stanProducts = result[$scope.localList[i].id];\n          $scope.localList[i].varientKeysInner = varientKeysInnerObj[$scope.localList[i].id];\n        }\n\n        for (var i = 0; i < $scope.localList.length; i++) {\n          // console.log(i);\n          var varientArr = [];\n          var varientKeys = [];\n\n          if ($scope.localList[i].variantKeyEn != '') {\n            varientKeys = $scope.localList[i].variantKeyEn.split('-');\n\n            for (var h = 0; h < varientKeys.length; h++) {\n              varientArr.push({\n                name: varientKeys[h],\n                key: []\n              });\n            }\n\n            for (var j = 0; j < $scope.localList[i].stanProducts.length; j++) {\n              if ($scope.localList[i].stanProducts[j].variantKey != null) {\n                var curVarientVal = $scope.localList[i].stanProducts[j].variantKey.split('-');\n\n                for (var k = 0; k < curVarientVal.length; k++) {\n                  varientArr[k].key.push(curVarientVal[k]);\n                }\n              }\n            }\n\n            for (var m = 0; m < varientArr.length; m++) {\n              varientArr[m].key = $.unique(varientArr[m].key);\n            }\n          } else {\n            varientArr = [];\n          }\n\n          if (varientArr.length == 1 && varientArr[0].key.length == 0) {\n            varientArr = [];\n          } // console.log(varientArr);\n\n\n          $scope.localList[i].varientArr = varientArr;\n        } // console.log($scope.localList);\n\n\n        $scope.favoriteList = $scope.localList.concat(reptLust);\n      });\n    } //处理分页函数\n\n\n    function setPagination(totalCounts) {\n      $(\".page-index\").jqPaginator({\n        // totalPages: 20,//分页的总页数\n        totalCounts: totalCounts,\n        pageSize: $scope.pageSize * 1,\n        visiblePages: 5,\n        //显示多少页\n        currentPage: $scope.pageNum * 1,\n        //当钱第几页\n        activeClass: 'current',\n        prev: '<a class=\"prev\" href=\"javascript:void(0);\">&lt;<\\/a>',\n        next: '<a class=\"next\" href=\"javascript:void(0);\">&gt;<\\/a>',\n        page: '<a href=\"javascript:void(0);\">{{page}}<\\/a>',\n        first: '<a class=\"prev\" href=\"javascript:void(0);\">&lt&lt;<\\/a>',\n        last: '<a class=\"prev\" href=\"javascript:void(0);\">&gt&gt;<\\/a>',\n        onPageChange: function onPageChange(n, type) {\n          if (type == 'init') return;\n          $scope.getFavoriteList(n + '', $scope.pageSize, '', '', $scope.favFalg, function (data) {\n            console.log('list', data);\n            $scope.favoriteList = data.list;\n            removeImgHttp($scope.favoriteList); //settleData(data);\n          });\n        }\n      });\n    } // source按钮\n\n\n    $scope.goActSource = function (id) {\n      cjhome.goActSource(id);\n    }; //刊登编辑按钮\n    // this.parentctrl = 'myCJfavorited';\n\n\n    $scope.addEditFrame = function (id, podFlag) {\n      if (id) {\n        $scope.editFrameShow = true;\n        $scope.editFrameData = {\n          from: 'myCJ-favorites',\n          pid: id,\n          podFlag: podFlag\n        };\n      }\n    }; // 关闭编辑刊登\n\n\n    $scope.closeEditFrame = function () {\n      console.log(arguments);\n      $scope.editFrameShow = false;\n    };\n\n    $scope.cancelCollection = function (item, idx) {\n      dsp.postFun(\"cj/homePage/shouCangShnagPin\", {\n        productId: item.ID\n      }, function (data) {\n        if (data.status == 200) {\n          layer.msg('Deleted Successfully');\n          $scope.favoriteList.splice(idx, 1);\n          $scope.getCustomCategory();\n        }\n      });\n    }; // 获取购物车数据\n    //加入购物车\n\n\n    $scope.buylist = [];\n\n    function getCartdata() {\n      dsp.postFun('app/buyOrder/getShoppingCart', {}, function (data) {\n        console.log(data);\n\n        if (data.data.code == 200) {\n          if (data.data.shoppingCart && data.data.shoppingCart.productList) {\n            $scope.buylist = data.data.shoppingCart.productList;\n          } else {\n            $scope.buylist = [];\n          }\n\n          console.log($scope.buylist);\n\n          if ($stateParams.pid) {\n            var arr = $stateParams.pid.split('&&');\n            $scope.addEditFrame(arr[0], arr[1]);\n          }\n        }\n      }, function (data) {});\n    }\n\n    getCartdata();\n\n    $scope.addDia = function (id) {\n      $scope.itemcount = 1;\n      $scope.additem = '';\n      $scope.addDialog = true;\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      dsp.postFun('cj/locProduct/huoQuShangPinXiangQing', JSON.stringify({\n        id: id,\n        token: ''\n      }), function (data) {\n        // console.log(data);\n        msgLoading.hide();\n        if (data.data.statusCode != 200) return;\n        if (!data.data.result) return;\n        $scope.additem = data.data.result;\n        console.log($scope.additem);\n        console.log($scope.additem.CATEGORYID); //获取推荐商品\n\n        $scope.stanProducts = $scope.additem.stanProducts;\n        $scope.varientArr = [];\n        $scope.varientKeys = [];\n\n        if ($scope.additem.VARIANTKEYEN != '') {\n          $scope.varientKeys = $scope.additem.VARIANTKEYEN.split('-');\n\n          for (var i = 0; i < $scope.varientKeys.length; i++) {\n            $scope.varientArr.push({\n              name: $scope.varientKeys[i],\n              key: []\n            });\n          }\n\n          for (var i = 0; i < $scope.stanProducts.length; i++) {\n            if ($scope.stanProducts[i].VARIANTKEY != null) {\n              var curVarientVal = $scope.stanProducts[i].VARIANTKEY.split('-');\n\n              for (var j = 0; j < curVarientVal.length; j++) {\n                $scope.varientArr[j].key.push(curVarientVal[j]);\n              }\n            }\n          }\n\n          for (var i = 0; i < $scope.varientArr.length; i++) {\n            $scope.varientArr[i].key = $.unique($scope.varientArr[i].key);\n            $scope.varientArr[i].val = $scope.varientArr[i].key[0];\n          }\n        } else {\n          $scope.varientArr = [];\n        }\n\n        if ($scope.varientArr.length == 1 && $scope.varientArr[0].key.length == 0) {\n          $scope.varientArr = [];\n        }\n\n        console.log($scope.varientArr);\n        $scope.varientKeysInner = [];\n\n        for (var i = 0; i < $scope.stanProducts.length; i++) {\n          $scope.varientKeysInner.push($scope.stanProducts[i].VARIANTKEY);\n\n          if ($scope.stanProducts[i].sellDiscount != null && $scope.stanProducts[i].sellDiscount < 100) {\n            $scope.stanProducts[i].SELLPRICEDIS = ($scope.stanProducts[i].SELLPRICE * $scope.stanProducts[i].sellDiscount / 100).toFixed(2);\n          } else {\n            $scope.stanProducts[i].SELLPRICEDIS = $scope.stanProducts[i].SELLPRICE;\n          }\n        }\n\n        console.log($scope.varientKeysInner);\n        getTheVitem();\n      }, function (data) {}, function () {\n        msgLoading.hide();\n      });\n    };\n\n    $scope.chanVariant = function (val, index) {\n      var filterKeysOne = [];\n\n      for (var i = 0; i < $scope.varientKeysInner.length; i++) {\n        var curVarKey = $scope.varientKeysInner[i].split('-');\n\n        if (curVarKey[index] == val) {\n          filterKeysOne.push(curVarKey);\n        }\n      }\n\n      for (var i = 0; i < $scope.varientArr.length; i++) {\n        if (i == index) continue;\n        var canbeTwo = [];\n\n        for (var j = 0; j < filterKeysOne.length; j++) {\n          canbeTwo.push(filterKeysOne[j][i]);\n        }\n\n        var OtherSel1 = $scope.varientArr[i].val;\n        var isInTwo = $.inArray(OtherSel1, canbeTwo);\n\n        if (isInTwo == -1) {\n          $scope.varientArr[i].val = canbeTwo[0];\n        }\n\n        var filterKeysTwo = [];\n        var curValTwo = $scope.varientArr[i].val;\n\n        for (var k = 0; k < filterKeysOne.length; k++) {\n          if (filterKeysOne[k][i] == curValTwo) {\n            filterKeysTwo.push(filterKeysOne[k]);\n          }\n        }\n\n        filterKeysOne = filterKeysTwo;\n      }\n\n      getTheVitem();\n    };\n\n    function getTheVitem() {\n      if ($scope.varientArr.length == 0) {\n        $scope.variantItem = $scope.stanProducts[0];\n      } else {\n        var curVarKeyArr = [];\n\n        for (var i = 0; i < $scope.varientArr.length; i++) {\n          curVarKeyArr.push($scope.varientArr[i].val);\n        }\n\n        $scope.curVarientKey = curVarKeyArr.join('-');\n        var curVarientIndex = dsp.findIndexByKey($scope.stanProducts, 'VARIANTKEY', $scope.curVarientKey);\n        $scope.variantItem = $scope.stanProducts[curVarientIndex];\n      }\n\n      console.log($scope.variantItem);\n    }\n\n    $scope.checkIsNum = function (val) {\n      console.log(val);\n\n      if (!val || isNaN(val) || val == '0') {\n        $scope.itemcount = '1';\n      }\n\n      allprice();\n    };\n\n    $scope.plusOne = function (val, index) {\n      if (index >= 0) {\n        $scope.buylist[index].itemcount = $scope.buylist[index].itemcount * 1 + 1 + ''; // localStorage.setItem('buylist', JSON.stringify($scope.buylist));\n\n        allprice();\n      } else {\n        $scope.itemcount = $scope.itemcount * 1 + 1 + '';\n      }\n    };\n\n    $scope.minusOne = function (val, index) {\n      if (val == '1') return;\n\n      if (index >= 0) {\n        if (val == '') {\n          $scope.buylist[index].itemcount = '1';\n        } else {\n          $scope.buylist[index].itemcount = $scope.buylist[index].itemcount * 1 - 1 + '';\n        } // localStorage.setItem('buylist', JSON.stringify($scope.buylist));\n\n\n        allprice();\n      } else {\n        if (val == '') {\n          $scope.itemcount = '1';\n        } else {\n          $scope.itemcount = $scope.itemcount * 1 - 1 + '';\n        }\n      }\n    }; //计算价钱\n\n\n    function allprice() {\n      $scope.total = 0;\n      $scope.sum = 0;\n      var arr = [];\n      $scope.buylist.forEach(function (o, i) {\n        if (o.checked) {\n          arr.push(o);\n        }\n      });\n\n      if ($scope.buylist.length > 0) {\n        if (arr.length == $scope.buylist.length) {\n          $scope.checked = true;\n        } else {\n          $scope.checked = false;\n        }\n      }\n\n      arr.forEach(function (o, i) {\n        $scope.total += Number(o.SELLPRICE) * Number(o.itemcount);\n        $scope.sum += Number(o.itemcount);\n      });\n    } //添加\n\n\n    $scope.addbuy = function ($event) {\n      var findIdx = dsp.findIndexByKey($scope.buylist, 'SKU', $scope.variantItem.SKU);\n      dsp.postFun('app/buyOrder/gouWuCheMaiDian', {\n        productId: $scope.additem.ID\n      }, function (data) {});\n      console.log('=====>', $scope.additem);\n      console.log('=====>', $scope.variantItem);\n\n      if (findIdx === -1) {\n        $scope.buylist.push({\n          NAMEEN: $scope.additem.NAMEEN,\n          BIGIMG: $scope.additem.BIGIMG,\n          isCollect: $scope.additem.isCollect,\n          nowPrice: $scope.variantItem.nowPrice,\n          ID: $scope.variantItem.ID,\n          CollectID: $scope.variantItem.PID,\n          SKU: $scope.variantItem.SKU,\n          SELLPRICE: $scope.variantItem.SELLPRICE,\n          itemcount: $scope.itemcount,\n          checked: true\n        });\n      } else {\n        $scope.buylist[findIdx].itemcount = $scope.buylist[findIdx].itemcount * 1 + $scope.itemcount * 1;\n        $scope.buylist[findIdx].checked = true;\n      }\n\n      console.log($scope.buylist);\n      dataStorage();\n    }; //数据操作存储后台\n\n\n    function dataStorage() {\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      dsp.postFun('app/buyOrder/editShoppingCart', {\n        productList: $scope.buylist\n      }, function (data) {\n        if (data.data.code === '200') {\n          msgLoading.hide();\n          layer.msg('Added Successfully');\n        }\n      }, function (data) {\n        msgLoading.hide();\n      });\n    } //关闭弹窗\n\n\n    $scope.close = function () {\n      $scope.addDialog = false;\n    };\n    /* 头部菜单进入埋点 */\n\n\n    function trackFun() {\n      dsp.postFun('pojo/home/addStatisByType', {\n        entryPage: +dsp.getQueryString('track')\n      }, function (res) {\n        console.log(res.data);\n      });\n    }\n\n    if (+dsp.getQueryString('track') == 2) {\n      trackFun();\n    } // 保留2位数\n\n\n    $scope.toFixed2 = function (val) {\n      if (!val) return;\n      return Number(val).toFixed(2);\n    }; // 全选wishlist\n\n\n    $scope.handleCheckAllWish = function () {\n      $scope.check_All_Wish = !$scope.check_All_Wish;\n\n      if ($scope.check_All_Wish) {\n        $scope.checkoutWishList.forEach(function (item) {\n          item.check = true;\n        });\n      } else {\n        $scope.checkoutWishList.forEach(function (item) {\n          item.check = false;\n        });\n      }\n    }; // 单选或多选wishlist\n\n\n    $scope.handleCheckItem = function (item, index) {\n      item.check = !item.check;\n\n      if (item.check) {\n        var num = 0;\n\n        for (var i = 0; i < $scope.checkoutWishList.length; i++) {\n          if ($scope.checkoutWishList[i].check) {\n            num++;\n          }\n        }\n\n        if (num == $scope.checkoutWishList.length) {\n          $scope.check_All_Wish = true;\n        }\n      } else {\n        $scope.check_All_Wish = false;\n      }\n    };\n\n    $scope.handleDelete = function () {\n      var checkoutlist = $scope.checkoutWishList.filter(function (item) {\n        return item.check;\n      });\n\n      if (checkoutlist.length == 0) {\n        layer.msg('Please select 1 product as least');\n        return false;\n      }\n\n      var params = {\n        idList: []\n      };\n      checkoutlist.map(function (item) {\n        return params.idList.push(item.ID);\n      });\n      dsp.postFun('cj/homePage/batchDeleteFavorites', JSON.stringify(params), function (res) {\n        var _res$data = res.data,\n            message = _res$data.message,\n            statusCode = _res$data.statusCode;\n\n        if (statusCode == 200) {\n          layer.msg('Deleted  Successfully');\n          $scope.getCustomCategory();\n        } else {\n          layer.msg(message);\n        }\n      });\n    }; //分页\n\n\n    $scope.$on('pagedata-fa', function (d, data) {\n      console.log(data);\n      $scope.pageNum = data.pageNum;\n      $scope.pageSize = data.pageSize;\n      $scope.firstRender();\n    });\n    /** 自定义分类列表相关 */\n\n    $scope.disableScrollType = \"left\"; //get custom category list\n\n    $scope.getCustomCategory = function () {\n      _postFn('cj/Collect/selectCollectCommodity', {\n        id: ''\n      }, '', 'Get WishList Error', function (postResult) {\n        $scope.customCategoryList = postResult.result || [];\n\n        if ($scope.customCategoryList.length) {\n          $scope.firstCategoryList = $scope.customCategoryList[0];\n          $scope.customCategoryList.splice(0, 1);\n          $scope.selectedCategory = $scope.selectedCategory ? $scope.selectedCategory : $scope.firstCategoryList.id;\n          $scope.selectedCategoryItem = $scope.selectedCategoryItem ? $scope.selectedCategoryItem : $scope.firstCategoryList;\n          $scope.firstRender();\n          getCategoryList(); // 删除添加判断是否需要禁用滑动按钮\n\n          $timeout(function () {\n            // 定宽box\n            $scope.scrollBox = $(\".scroll-box\")[0]; //ul的dom\n\n            $scope.ulDom = $(\".scroll-box-ul\")[0];\n            var liList = $scope.ulDom.children;\n            var ulWidth = 0;\n\n            for (var i = 0; i < liList.length; i++) {\n              var wid = liList[i].offsetWidth + 33;\n              ulWidth += wid;\n            } //所有li的宽度综合\n\n\n            $scope.ulWidth = ulWidth;\n            var wrapWidth = $scope.scrollBox.offsetWidth;\n            $scope.isHideScrollBtn = wrapWidth > $scope.ulWidth ? false : true;\n\n            if (wrapWidth > $scope.ulWidth) {\n              $(\".scroll-box-ul\")[0].style.transform = \"translateX(0px)\";\n            }\n          });\n        }\n      });\n    }; // 获取自定义分类列表长度\n\n\n    $scope.$on('ngLoadFinished', function (args) {\n      judgeIsHideScrollBtn();\n    });\n\n    window.onresize = function () {\n      judgeIsHideScrollBtn();\n    }; //判断是否禁用滑动按钮\n\n\n    function judgeIsHideScrollBtn() {\n      // 定宽box\n      $scope.scrollBox = $(\".scroll-box\")[0]; //ul的dom\n\n      $scope.ulDom = $(\".scroll-box-ul\")[0];\n      var liList = $scope.ulDom.children;\n\n      if (!$scope.ulWidth) {\n        var ulWidth = 0;\n\n        for (var i = 0; i < liList.length; i++) {\n          var wid = liList[i].offsetWidth + 33;\n          ulWidth += wid;\n        } //所有li的宽度综合\n\n\n        $scope.ulWidth = ulWidth;\n      }\n\n      var wrapWidth = $scope.scrollBox.offsetWidth; //判断是否隐藏滑动按钮\n\n      $scope.$apply(function () {\n        var compareWidth = $scope.selectedCategory ? $scope.ulWidth + 50 : $scope.ulWidth;\n        $scope.isHideScrollBtn = wrapWidth > compareWidth ? false : true;\n\n        if (wrapWidth > $scope.ulWidth) {\n          $(\".scroll-box-ul\")[0].style.transform = \"translateX(0px)\";\n        }\n      });\n    } //选择分类列表\n\n\n    $scope.selectCategory = function (item, index) {\n      if ($scope.selectedCategory === item.id) {\n        return null;\n      }\n\n      $scope.selectedCategory = item.id;\n      $scope.selectedCategoryItem = item; // 判断是否需要滑动\n      // const liList = $scope.ulDom.children;\n      // const targetLiLeft = liList[index].getBoundingClientRect().right;\n      // const scrollBoxLeft = $scope.scrollBox.getBoundingClientRect().right;\n      // if (targetLiLeft + 120 > scrollBoxLeft) {\n      //   const scrollWidth = targetLiLeft + 120 - scrollBoxLeft;\n      //   let ulDomScrollX = $scope.ulDom.style.transform;\n      //   ulDomScrollX = Number(ulDomScrollX.substring(ulDomScrollX.indexOf('(') + 1, ulDomScrollX.indexOf('px'))) || 0;\n      //   $scope.ulDom.style.transform = `translateX(${ulDomScrollX - scrollWidth}px)`;\n      // }\n      // $scope.searchVal = \"\";\n\n      $scope.firstRender();\n      getCategoryList();\n    }; //滑动分类列表 按钮\n\n\n    $scope.scrollCategoryList = function (type) {\n      var ulDomScrollX = $scope.ulDom.style.transform;\n      var scrollBoxWidth = $scope.scrollBox.offsetWidth;\n      var ulWidth = $scope.ulWidth - scrollBoxWidth + 50; //50是蒙层的宽度\n      //获取原来滑动的值\n\n      ulDomScrollX = Number(ulDomScrollX.substring(ulDomScrollX.indexOf('(') + 1, ulDomScrollX.indexOf('px'))) || 0;\n\n      if (type && ulDomScrollX !== 0) {\n        var scrollWidth = scrollBoxWidth + ulDomScrollX - 80;\n        $scope.ulDom.style.transform = \"translateX(\".concat(scrollWidth > 0 ? 0 : scrollWidth, \"px)\"); //判断是否禁用\n\n        $scope.disableScrollType = scrollWidth >= 0 ? 'left' : \"\";\n      }\n\n      if (!type && Math.abs(ulDomScrollX) <= ulWidth) {\n        var scrollWidh = -scrollBoxWidth + ulDomScrollX + 80;\n        $scope.ulDom.style.transform = \"translateX(\".concat(scrollWidh, \"px)\"); //判断是否禁用\n\n        $scope.disableScrollType = Math.abs(scrollWidh) >= ulWidth ? 'right' : \"\";\n      }\n    }; //打开modal\n\n\n    $scope.openCategoryModal = function (type, category) {\n      switch (type) {\n        case 'move':\n          if (category) {\n            // 单个商品移动\n            $scope.selectedPrdList = [{\n              id: category\n            }];\n          } else {\n            //批量移动\n            var checkoutlist = $scope.checkoutWishList.filter(function (item) {\n              return item.check;\n            });\n\n            if (checkoutlist.length == 0) {\n              return layer.msg('Please select 1 product as least');\n            } else {\n              $scope.selectedPrdList = checkoutlist.map(function (item) {\n                return {\n                  id: item.wishid\n                };\n              });\n            }\n          }\n\n          break;\n\n        case 'add':\n          if ($scope.customCategoryList.length >= 10) return layer.msg('Only up to 10 folders can be created.');\n          $scope.categoryName = '';\n          break;\n\n        case 'rename':\n          $scope.categoryName = category;\n          break;\n      }\n\n      $scope.selectDanger = $scope.requireDanger = $scope.sameDanger = false;\n      $scope.showCategoryModal = true;\n      $scope.categoryModalType = type;\n    }; //分类弹窗 确定按钮\n\n\n    $scope.cgyModalConfirm = function () {\n      switch ($scope.categoryModalType) {\n        case 'move':\n          if (!$scope.moveToCategory) {\n            return $scope.selectDanger = true;\n          }\n\n          moveProdToList();\n          break;\n\n        case 'add':\n          if (!$scope.categoryName) {\n            $scope.requireDanger = true;\n            $scope.sameDanger = false;\n            return;\n          }\n\n          var trimName = $scope.categoryName.trim().toLowerCase();\n\n          if ($scope.customCategoryList.find(function (x) {\n            return x.wishName.toLowerCase() === trimName;\n          }) || trimName == \"wishlist\") {\n            $scope.sameDanger = true;\n            $scope.requireDanger = false;\n            return;\n          }\n\n          addCustomCgy();\n          break;\n\n        case 'rename':\n          if (!$scope.categoryName) {\n            $scope.requireDanger = true;\n            $scope.sameDanger = false;\n            return;\n          }\n\n          if ($scope.customCategoryList.find(function (x) {\n            return x.wishName === $scope.categoryName;\n          })) {\n            $scope.sameDanger = true;\n            $scope.requireDanger = false;\n            return;\n          }\n\n          renameCustomList();\n          break;\n\n        case 'delete':\n          deleteCustomList();\n          break;\n      }\n\n      $scope.showCategoryModal = false;\n    }; //添加分类\n\n\n    var addCustomCgy = function addCustomCgy() {\n      var params = {\n        wishName: $scope.categoryName.trim()\n      };\n\n      _postFn(\"cj/Collect/insertCollect\", params, \"Added successfully.\", \"Add wishlist failed.\", function () {\n        $scope.getCustomCategory();\n      });\n    }; //移动商品\n\n\n    function moveProdToList() {\n      var params = {\n        dbCollectPressVO: {\n          //这装的是收藏夹的信息，暂时只需要id\n          id: $scope.moveToCategory\n        },\n        dbWishProducts: $scope.selectedPrdList //这个数组里装的是商品的信息，暂时只需要id\n\n      };\n\n      _postFn('cj/Collect/updateProductMove', params, 'Move succeed.', 'Move Failed.', function () {\n        // $scope.firstRender();\n        $scope.getCustomCategory();\n      });\n    } //删除分类\n\n\n    function deleteCustomList() {\n      _postFn(\"cj/Collect/deleteCollectProduct\", {\n        dbCollect: [$scope.selectedCategory]\n      }, 'Deleted successfully.', 'Delete failed.', function () {\n        $scope.getCustomCategory();\n      });\n    } //重命名分类\n\n\n    function renameCustomList() {\n      var params = {\n        id: $scope.selectedCategory,\n        wishName: $scope.categoryName\n      };\n\n      _postFn(\"cj/Collect/updateCollectProduct\", params, 'Modified successfully.', 'Modified Failed.', function () {\n        $scope.getCustomCategory();\n      });\n    }\n    /**\r\n     * \r\n     * @param {string} url 接口\r\n     * @param {object} params 接口传参\r\n     * @param {string} sucMsg 成功后的提示信息\r\n     * @param {string} failMsg 失败后的提示信息\r\n     * @param {function} callback 回调\r\n     */\n\n\n    function _postFn(url, params, sucMsg, failMsg, callback) {\n      dsp.postFun(url, JSON.stringify(params), function (res) {\n        try {\n          var postResult = res.data;\n\n          if (postResult && postResult.statusCode == '200') {\n            sucMsg ? layer.msg(sucMsg) : null;\n            callback(postResult);\n          } else {\n            failMsg ? layer.msg(failMsg) : null;\n          }\n        } catch (error) {\n          layer.msg('Unexpect Error.');\n        }\n      });\n    }\n\n    $scope.getCustomCategory();\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovZmF2b3JpdGVzL2Zhdm9yaXRlcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9zcmMvcGFnZXMvbXljai9mYXZvcml0ZXMvZmF2b3JpdGVzLmpzPzZkNTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGZhdm9yaXRlc0ZhY3RvcnkoYW5ndWxhcikge1xyXG4gIGNvbnN0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteWNqLWZhdm9yaXRlcy5tb2R1bGUnLCBbJ3NlcnZpY2UnLCAnaG9tZS1zZXJ2aWNlJ10pO1xyXG5cclxuICBhcHAuZGlyZWN0aXZlKCdvbkZpbmlzaFJlbmRlcicsIFsnJHRpbWVvdXQnLCAnJHBhcnNlJywgZnVuY3Rpb24oJHRpbWVvdXQsICRwYXJzZSl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDonQScsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKXtcclxuICAgICAgICBpZihzY29wZS4kbGFzdCA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzY29wZS4kZW1pdChcIm5nTG9hZEZpbmlzaGVkXCIpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1dKVxyXG5cclxuICB2YXIgd2luSGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpICogMTtcclxuICB2YXIgbm9kYXRhSGVpZ2h0ID0gd2luSGVpZ2h0IC0gMzExO1xyXG4gIGFwcC5jb250cm9sbGVyKCdteWNqLWZhdm9yaXRlcy5jdHJsJywgWyckc2NvcGUnLCAnJHJvb3RTY29wZScsICdkc3AnLCAnY2pob21lJywgJyRzdGF0ZVBhcmFtcycsICckdGltZW91dCcsXHJcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCAkcm9vdFNjb3BlLCBkc3AsIGNqaG9tZSwgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwpIHtcclxuICAgICAgY29uc3QgdXNlckluZm8gPSAkcm9vdFNjb3BlLnVzZXJJbmZvO1xyXG4gICAgICAkc2NvcGUuaXNWaXAgPSB1c2VySW5mby52aXA7XHJcbiAgICAgICRzY29wZS51c2VySWQgPSB1c2VySW5mby51c2VySWQ7XHJcbiAgICAgICRzY29wZS5sb2dpbk5hbWUgPSB1c2VySW5mby5sb2dpbk5hbWU7XHJcbiAgICAgICRzY29wZS50b2tlbiA9IHVzZXJJbmZvLnRva2VuO1xyXG4gICAgICBkc3Auc2V0UmlnaHRNaW5IZWlnaHQoKTtcclxuICAgICAgLy8g5qC55o2uc2hvcGlmeeWIpOaWreaMiemSrlxyXG4gICAgICB2YXIgZ2V0U2hvcERhdGEgPSB7fTtcclxuICAgICAgZ2V0U2hvcERhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICB1c2VySWQ6ICRzY29wZS51c2VySWRcclxuICAgICAgfSk7XHJcbiAgICAgIC8v6I635Y+W5ZWG5ZOB57G755uuXHJcbiAgICAgIC8vIGRzcC5nZXRDYXRlTGlzdChmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAvLyAgICRzY29wZS5jYXRlZ29yeUxpc3RPbmUgPSBkYXRhO1xyXG4gICAgICAvLyB9KVxyXG4gICAgICBmdW5jdGlvbiBnZXRDYXRlZ29yeUxpc3QgKCkge1xyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgIGZsYWc6ICcnLFxyXG4gICAgICAgICAgZmlsdGVyOiAgJ3tcImNhdGVnb3J5SWRcIjpcIlwiLFwiaW5wdXRTdHJcIjpcIlwifScsIC8vZmlsdGVy6L+Z5Liq5Y+C5pWw5pqC5pe25rKh55So5Yiw77yM5Lyg5LiA5LiqanNvbuagvOW8j+eahOepuuWtl+espuS4slxyXG4gICAgICAgICAgcHJlc3NJZDogJHNjb3BlLnNlbGVjdGVkQ2F0ZWdvcnksIC8v5pS26JeP5aS5aWRcclxuICAgICAgICB9XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL0NvbGxlY3Qvc2VsZWN0Q29sbGVjdENhdGVnb3J5JywgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSwgKHJlcykgPT4ge1xyXG4gICAgICAgICAgY29uc3QgcG9zdFJlc3VsdCA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocG9zdFJlc3VsdClcclxuICAgICAgICAgIGlmIChwb3N0UmVzdWx0ICYmIHBvc3RSZXN1bHQuc3RhdHVzQ29kZSA9PSAnMjAwJykge1xyXG4gICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcnlMaXN0T25lID0gcG9zdFJlc3VsdC5yZXN1bHQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdHZXQgQ2F0ZWdvcnkgTGlzdCBGaWVsZWQuJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgJHJvb3RTY29wZS4kb24oJ2NqL2hvbWVQYWdlL2h1b1F1U2hvdUNhbmdMaWVCaWFvJywgKF8sIGJvb2wpID0+ICRzY29wZS5sb2FkaW5nID0gYm9vbCk7XHJcblxyXG4gICAgICAvLyBmbGFnID0gMCDlhajpg6gsIGZsYWcgPSAxIOeIrOiZqywgZmxhZyA9IDIg5pys5ZywXHJcbiAgICAgICRzY29wZS5mYXZvcml0ZUxpc3QgPSBbXTtcclxuICAgICAgJHNjb3BlLnBhZ2VOdW0gPSAnMSc7XHJcbiAgICAgICRzY29wZS5wYWdlU2l6ZSA9ICcxMCc7XHJcbiAgICAgICRzY29wZS5mYXZGYWxnID0gJzAnO1xyXG4gICAgICAkc2NvcGUudG90YWxOdW0gPSAwO1xyXG4gICAgICAkc2NvcGUuc2VsZXRlZENhdGUgPSAnJztcclxuICAgICAgJHNjb3BlLnNlYXJjaFZhbCA9ICcnO1xyXG4gICAgICAkc2NvcGUubm9MaXN0RGF0YSA9IGZhbHNlO1xyXG4gICAgICAkc2NvcGUuY2hlY2tvdXRXaXNoTGlzdCA9IFtdOyAvLyDpgInkuK3nmoTlv4PmhL/ljZVcclxuICAgICAgJHNjb3BlLmN1c3RvbUNhdGVnb3J5TGlzdCA9IFtdO1xyXG4gICAgICAkc2NvcGUuc2VsZWN0ZWRDYXRlZ29yeSA9IFwiXCI7IC8v6YCJ5Lit55qE5YiG57G75YiX6KGoXHJcbiAgICAgICRzY29wZS5jYXRlZ29yeU5hbWUgPSBcIlwiOyAvL+iHquWumuS5ieW/g+aEv+WNleWQjeensFxyXG4gICAgICAkc2NvcGUuaXNIaWRlU2Nyb2xsQnRuID0gZmFsc2U7IC8v5piv5ZCm6ZqQ6JeP5ruR5Yqo5oyJ6ZKuXHJcbiAgICAgICRzY29wZS5zZWxlY3RlZFByZExpc3QgPSBbXTsgLy/pgInkuK3nmoTllYblk4HliJfooahcclxuICAgICAgJHNjb3BlLm1vdmVUb0NhdGVnb3J5ID0gJyc7XHJcbiAgICAgIC8vICRzY29wZS5ub0RhdGEgPSB0cnVlO1xyXG4gICAgICAkc2NvcGUuZ2V0RmF2b3JpdGVMaXN0ID0gZnVuY3Rpb24gKHBhZ2VOdW0sIHBhZ2VTaXplLCBjYXRlZ29yeUlkLCBpbnB1dFN0ciwgZmxhZywgc2NiKSB7XHJcbiAgICAgICAgLy8gdmFyIGdldEZhdkRhdGEgPSB7fTtcclxuICAgICAgICAvLyBnZXRGYXZEYXRhLnBhZ2VObyA9IHBhZ2VOdW07XHJcbiAgICAgICAgLy8gZ2V0RmF2RGF0YS5wYWdlU2l6ZSA9IHBhZ2VTaXplO1xyXG4gICAgICAgIC8vIGdldEZhdkRhdGEuZmxhZyA9IGZsYWc7XHJcbiAgICAgICAgLy8gZ2V0RmF2RGF0YS5maWx0ZXIgPSBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgLy8gICBjYXRlZ29yeUlkOiBjYXRlZ29yeUlkLFxyXG4gICAgICAgIC8vICAgaW5wdXRTdHI6IGlucHV0U3RyXHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgY29uc3QgZmlsdGVyT2JqID0ge1xyXG4gICAgICAgICAgY2F0ZWdvcnlJZDogY2F0ZWdvcnlJZCxcclxuICAgICAgICAgIGlucHV0U3RyOiBpbnB1dFN0clxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICBwYWdlTm86IHBhZ2VOdW0sXHJcbiAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemUsXHJcbiAgICAgICAgICBmbGFnOiBmbGFnLFxyXG4gICAgICAgICAgZmlsdGVyOiBKU09OLnN0cmluZ2lmeShmaWx0ZXJPYmopLFxyXG4gICAgICAgICAgcHJlc3NJZDogJHNjb3BlLnNlbGVjdGVkQ2F0ZWdvcnksXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuZmF2b3JpdGVMaXN0ID0gW107XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL0NvbGxlY3Qvc2VsZWN0UHJvZHVjdExpc3QnLCBKU09OLnN0cmluZ2lmeShwYXJhbXMpLCBmdW5jdGlvbiAoZGF0YSkgeyAgLy8nY2ovaG9tZVBhZ2UvaHVvUXVTaG91Q2FuZ0xpZUJpYW8nIOWOn+Wni+aOpeWPo1xyXG4gICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXNDb2RlICE9IDIwMCkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0dldCB0aGUgd2lzaCBsaXN0IGVycm9yJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhciByZXN1bHQgPSBkYXRhLnJlc3VsdDtcclxuICAgICAgICAgICQuZWFjaChyZXN1bHQubGlzdCwgZnVuY3Rpb24gKGksIHYpIHtcclxuICAgICAgICAgICAgLy9CSUdJTUdcclxuICAgICAgICAgICAgdi5CSUdJTUcgPSB1cGRhdGVJbWcodi5CSUdJTUcpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgc2NiKHJlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUltZyhpbWd1cmwpIHtcclxuICAgICAgICB2YXIgdXJsO1xyXG4gICAgICAgIGlmIChpbWd1cmwgJiYgaW1ndXJsLmluZGV4T2YoJ2h0dHBzJykgIT0gLTEpIHtcclxuICAgICAgICAgIHVybCA9IGltZ3VybC5yZXBsYWNlKCdodHRwczovLycsICdodHRwczovLycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW1ndXJsICYmIGltZ3VybC5pbmRleE9mKCdodHRwOi8vJykgIT0gLTEpIHtcclxuICAgICAgICAgIHVybCA9IGltZ3VybC5yZXBsYWNlKCdodHRwOi8vJywgJ2h0dHBzOi8vJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbWd1cmwpIHtcclxuICAgICAgICAgIHVybCA9IFwiaHR0cHM6Ly9cIiArIGltZ3VybDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdXJsID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRzY29wZS5oYXNMaXN0RGF0YSA9IHRydWU7XHJcbiAgICAgICRzY29wZS5maXJzdFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUuZ2V0RmF2b3JpdGVMaXN0KCRzY29wZS5wYWdlTnVtLCAkc2NvcGUucGFnZVNpemUsICRzY29wZS5zZWxldGVkQ2F0ZSwgJHNjb3BlLnNlYXJjaFZhbCwgJHNjb3BlLmZhdkZhbGcsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnbGlzdCcsIGRhdGEpO1xyXG4gICAgICAgICAgJHNjb3BlLnRvdGFsTnVtID0gZGF0YS50b3RhbE51bTtcclxuICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLmZhdm9yaXRlLWNvbnQnKSk7XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLnRvdGFsTnVtID4gMCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaGFzTGlzdERhdGEgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUubm9MaXN0RGF0YSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUubm9EYXRhID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vc2V0dGxlRGF0YShkYXRhKTtcclxuICAgICAgICAgICAgJHNjb3BlLmZhdm9yaXRlTGlzdCA9IGRhdGEubGlzdDtcclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNrb3V0V2lzaExpc3QgPSBkYXRhLmxpc3Q7XHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja19BbGxfV2lzaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZW1vdmVJbWdIdHRwKCRzY29wZS5mYXZvcml0ZUxpc3QpXHJcbiAgICAgICAgICAgIHNldFBhZ2luYXRpb24oJHNjb3BlLnRvdGFsTnVtKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRzY29wZS5oYXNMaXN0RGF0YSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUubm9EYXRhID0gdHJ1ZTsgLy8g5LiA54K55pWw5o2u5Lmf5rKh5pyJ77yM5bGV56S66buY6K6k5Zu+XHJcbiAgICAgICAgICAgICRzY29wZS5ub0xpc3REYXRhID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc2VsZWN0ZWRDYXRlZ29yeUl0ZW0ud2lzaHByb2R1Y3RTdW0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm5vTGlzdERhdGEgPSB0cnVlOyAvLyDmsqHmnInmkJzntKLliLDmlbDmja7vvIzlsZXnpLpub2RhdGHlm75cclxuICAgICAgICAgICAgICAkc2NvcGUubm9EYXRhID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgZHNwLmFkZE5vZGF0YVBpY05ld1N0eWxlKCQoJy5mYXZvcml0ZS1jb250JyksICRzY29wZS5pc1ZpcCA9PT0gXCIxXCIgPyB0cnVlIDogZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2NvcGUudG90YWxDb3VudHMgPSBNYXRoLmNlaWwoJHNjb3BlLnRvdGFsTnVtIC8gJHNjb3BlLnBhZ2VTaXplKTtcclxuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdwYWdlLWRhdGEnLCB7XHJcbiAgICAgICAgICAgIHBhZ2VOdW06ICRzY29wZS5wYWdlTnVtLFxyXG4gICAgICAgICAgICB0b3RhbE51bTogJHNjb3BlLnRvdGFsQ291bnRzLFxyXG4gICAgICAgICAgICB0b3RhbENvdW50czogJHNjb3BlLnRvdGFsTnVtLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogJHNjb3BlLnBhZ2VTaXplLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gJHNjb3BlLmZpcnN0UmVuZGVyKCk7XHJcblxyXG4gICAgICAkc2NvcGUuc2VhcmNoRmF2TGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUucGFnZU51bSA9ICcxJztcclxuICAgICAgICAkc2NvcGUuZmlyc3RSZW5kZXIoKTtcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuZW50ZXJTZWFyY2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgJHNjb3BlLnNlYXJjaEZhdkxpc3QoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICBcclxuICAgICAgJHNjb3BlLmNoaW5nZVZhcmllbnQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICBhbGVydChpbmRleCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICQoJy5wYXktd2FyZXMtbGlzdCcpLm9uKCdjaGFuZ2UnLCAnbGkgLnZhcmllbnQtc2VsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJWYXJJbmRleCA9ICQodGhpcykuYXR0cignaW5kZXgnKSAqIDE7XHJcbiAgICAgICAgdmFyIGZpbHRlcktleXNPbmUgPSBbXTtcclxuICAgICAgICB2YXIgY2lkID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLmlkLXNwYW4nKS5odG1sKCk7XHJcbiAgICAgICAgdmFyIGNJbmRleCA9IGRzcC5maW5kSW5kZXhCeUtleSgkc2NvcGUubG9jYWxMaXN0LCAnaWQnLCBjaWQpO1xyXG4gICAgICAgIHZhciB2YXJpZW50S2V5c0lubmVyID0gJHNjb3BlLmxvY2FsTGlzdFtjSW5kZXhdLnZhcmllbnRLZXlzSW5uZXI7XHJcbiAgICAgICAgdmFyIHZhcmllbnRBcnIgPSAkc2NvcGUubG9jYWxMaXN0W2NJbmRleF0udmFyaWVudEFycjtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcmllbnRLZXlzSW5uZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHZhciBjdXJWYXJLZXkgPSB2YXJpZW50S2V5c0lubmVyW2ldLnNwbGl0KCctJyk7XHJcbiAgICAgICAgICBpZiAoY3VyVmFyS2V5W2N1clZhckluZGV4XSA9PSAkKHRoaXMpLnZhbCgpKSB7XHJcbiAgICAgICAgICAgIGZpbHRlcktleXNPbmUucHVzaChjdXJWYXJLZXkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWx0ZXJLZXlzT25lKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcmllbnRBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGkpO1xyXG4gICAgICAgICAgaWYgKGkgPT0gY3VyVmFySW5kZXgpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgdmFyIGNhbmJlVHdvID0gW107XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWx0ZXJLZXlzT25lKTtcclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZmlsdGVyS2V5c09uZS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBjYW5iZVR3by5wdXNoKGZpbHRlcktleXNPbmVbal1baV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coY2FuYmVUd28pO1xyXG4gICAgICAgICAgLy8gdmFyIGN1clZhclR3b0luZGV4ID0gY3VyVmFySW5kZXggKyAxO1xyXG4gICAgICAgICAgdmFyIE90aGVyU2VsMSA9ICQodGhpcykucGFyZW50KCkuZmluZCgnLnZhcmllbnQtc2VsJykuZXEoaSkudmFsKCk7XHJcbiAgICAgICAgICB2YXIgaXNJblR3byA9ICQuaW5BcnJheShPdGhlclNlbDEsIGNhbmJlVHdvKTtcclxuICAgICAgICAgIGlmIChpc0luVHdvID09IC0xKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLnZhcmllbnQtc2VsJykuZXEoaSkudmFsKGNhbmJlVHdvWzBdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhciBmaWx0ZXJLZXlzVHdvID0gW107XHJcbiAgICAgICAgICB2YXIgY3VyVmFsVHdvID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcudmFyaWVudC1zZWwnKS5lcShpKS52YWwoKTtcclxuICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZmlsdGVyS2V5c09uZS5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyS2V5c09uZVtrXVtpXSA9PSBjdXJWYWxUd28pIHtcclxuICAgICAgICAgICAgICBmaWx0ZXJLZXlzVHdvLnB1c2goZmlsdGVyS2V5c09uZVtrXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZpbHRlcktleXNPbmUgPSBmaWx0ZXJLZXlzVHdvO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBhZGRGbGFnMChhcnIpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgYXJyW2ldLmZsYWcgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gYWRkRmxhZzEoYXJyKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGFycltpXS5mbGFnID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJlbW92ZUltZ0h0dHAoYXJyKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChhcnJbaV0uYmlnSW1nKVxyXG4gICAgICAgICAgICBhcnJbaV0uYmlnSW1nID0gJ2h0dHBzOi8vJyArIGFycltpXS5iaWdJbWcucmVwbGFjZSgnaHR0cHM6Ly8nLCAnJykucmVwbGFjZSgnaHR0cDovLycsICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWkhOeQhui/lOWbnuaVsOaNrlxyXG4gICAgICBmdW5jdGlvbiBzZXR0bGVEYXRhKGRhdGEpIHtcclxuICAgICAgICB2YXIgbG9jYUxpc3QgPSAoZGF0YVswXS5sb2NhdGlvblswXSA9PSBudWxsID8gW10gOiBkYXRhWzBdLmxvY2F0aW9uKTtcclxuICAgICAgICB2YXIgcmVwdEx1c3QgPSBkYXRhWzBdLnJlcHRpbGU7XHJcbiAgICAgICAgcmVtb3ZlSW1nSHR0cChsb2NhTGlzdCk7XHJcbiAgICAgICAgYWRkRmxhZzEobG9jYUxpc3QpO1xyXG4gICAgICAgIGFkZEZsYWcwKHJlcHRMdXN0KTtcclxuICAgICAgICAkc2NvcGUubG9jYWxMaXN0ID0gbG9jYUxpc3Q7XHJcbiAgICAgICAgJHNjb3BlLmZhdm9yaXRlTGlzdCA9IGxvY2FMaXN0LmNvbmNhdChyZXB0THVzdCk7XHJcbiAgICAgICAgLy8gJHNjb3BlLnRvdGFsTnVtID0gZGF0YVswXS5hbGw7XHJcbiAgICAgICAgdmFyIGxvY2FsSWRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUubG9jYWxMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsb2NhbElkcy5wdXNoKCRzY29wZS5sb2NhbExpc3RbaV0uaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhsb2NhbElkcyk7XHJcbiAgICAgICAgaWYgKGxvY2FsSWRzLmxlbmd0aCA9PSAwKSByZXR1cm47XHJcbiAgICAgICAgZHNwLmdldEZ1bigncG9qby9wcm9kdWN0L2dldEJ5SWRzP2lkcz0nICsgbG9jYWxJZHMuam9pbignLCcpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhLnJlc3VsdCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygndmFyaWVudCcsIHJlc3VsdCk7XHJcbiAgICAgICAgICB2YXIgdmFyaWVudEtleXNJbm5lck9iaiA9IHt9O1xyXG4gICAgICAgICAgZm9yICh2YXIgayBpbiByZXN1bHQpIHtcclxuICAgICAgICAgICAgdmFyIHZhcmllbnRLZXlzSW5uZXIgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHRba10ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICB2YXJpZW50S2V5c0lubmVyLnB1c2gocmVzdWx0W2tdW2ldLnZhcmlhbnRLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2YXJpZW50S2V5c0lubmVyWzBdID09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICAgIHZhcmllbnRLZXlzSW5uZXIgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXJpZW50S2V5c0lubmVyT2JqW2tdID0gdmFyaWVudEtleXNJbm5lcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmxvY2FsTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAkc2NvcGUubG9jYWxMaXN0W2ldLnN0YW5Qcm9kdWN0cyA9IHJlc3VsdFskc2NvcGUubG9jYWxMaXN0W2ldLmlkXTtcclxuICAgICAgICAgICAgJHNjb3BlLmxvY2FsTGlzdFtpXS52YXJpZW50S2V5c0lubmVyID0gdmFyaWVudEtleXNJbm5lck9ialskc2NvcGUubG9jYWxMaXN0W2ldLmlkXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmxvY2FsTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpKTtcclxuICAgICAgICAgICAgdmFyIHZhcmllbnRBcnIgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHZhcmllbnRLZXlzID0gW107XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUubG9jYWxMaXN0W2ldLnZhcmlhbnRLZXlFbiAhPSAnJykge1xyXG4gICAgICAgICAgICAgIHZhcmllbnRLZXlzID0gJHNjb3BlLmxvY2FsTGlzdFtpXS52YXJpYW50S2V5RW4uc3BsaXQoJy0nKTtcclxuICAgICAgICAgICAgICBmb3IgKHZhciBoID0gMDsgaCA8IHZhcmllbnRLZXlzLmxlbmd0aDsgaCsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXJpZW50QXJyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICBuYW1lOiB2YXJpZW50S2V5c1toXSxcclxuICAgICAgICAgICAgICAgICAga2V5OiBbXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLmxvY2FsTGlzdFtpXS5zdGFuUHJvZHVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUubG9jYWxMaXN0W2ldLnN0YW5Qcm9kdWN0c1tqXS52YXJpYW50S2V5ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIGN1clZhcmllbnRWYWwgPSAkc2NvcGUubG9jYWxMaXN0W2ldLnN0YW5Qcm9kdWN0c1tqXS52YXJpYW50S2V5LnNwbGl0KCctJyk7XHJcbiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY3VyVmFyaWVudFZhbC5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmllbnRBcnJba10ua2V5LnB1c2goY3VyVmFyaWVudFZhbFtrXSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCB2YXJpZW50QXJyLmxlbmd0aDsgbSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXJpZW50QXJyW21dLmtleSA9ICQudW5pcXVlKHZhcmllbnRBcnJbbV0ua2V5KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdmFyaWVudEFyciA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodmFyaWVudEFyci5sZW5ndGggPT0gMSAmJiB2YXJpZW50QXJyWzBdLmtleS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgIHZhcmllbnRBcnIgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codmFyaWVudEFycik7XHJcbiAgICAgICAgICAgICRzY29wZS5sb2NhbExpc3RbaV0udmFyaWVudEFyciA9IHZhcmllbnRBcnI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygkc2NvcGUubG9jYWxMaXN0KTtcclxuICAgICAgICAgICRzY29wZS5mYXZvcml0ZUxpc3QgPSAkc2NvcGUubG9jYWxMaXN0LmNvbmNhdChyZXB0THVzdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8v5aSE55CG5YiG6aG15Ye95pWwXHJcbiAgICAgIGZ1bmN0aW9uIHNldFBhZ2luYXRpb24odG90YWxDb3VudHMpIHtcclxuICAgICAgICAkKFwiLnBhZ2UtaW5kZXhcIikuanFQYWdpbmF0b3Ioe1xyXG4gICAgICAgICAgLy8gdG90YWxQYWdlczogMjAsLy/liIbpobXnmoTmgLvpobXmlbBcclxuICAgICAgICAgIHRvdGFsQ291bnRzOiB0b3RhbENvdW50cyxcclxuICAgICAgICAgIHBhZ2VTaXplOiAkc2NvcGUucGFnZVNpemUgKiAxLFxyXG4gICAgICAgICAgdmlzaWJsZVBhZ2VzOiA1LC8v5pi+56S65aSa5bCR6aG1XHJcbiAgICAgICAgICBjdXJyZW50UGFnZTogJHNjb3BlLnBhZ2VOdW0gKiAxLC8v5b2T6ZKx56ys5Yeg6aG1XHJcbiAgICAgICAgICBhY3RpdmVDbGFzczogJ2N1cnJlbnQnLFxyXG4gICAgICAgICAgcHJldjogJzxhIGNsYXNzPVwicHJldlwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmx0OzxcXC9hPicsXHJcbiAgICAgICAgICBuZXh0OiAnPGEgY2xhc3M9XCJuZXh0XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mZ3Q7PFxcL2E+JyxcclxuICAgICAgICAgIHBhZ2U6ICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPnt7cGFnZX19PFxcL2E+JyxcclxuICAgICAgICAgIGZpcnN0OiAnPGEgY2xhc3M9XCJwcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mbHQmbHQ7PFxcL2E+JyxcclxuICAgICAgICAgIGxhc3Q6ICc8YSBjbGFzcz1cInByZXZcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPiZndCZndDs8XFwvYT4nLFxyXG4gICAgICAgICAgb25QYWdlQ2hhbmdlOiBmdW5jdGlvbiAobiwgdHlwZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSAnaW5pdCcpIHJldHVybjtcclxuICAgICAgICAgICAgJHNjb3BlLmdldEZhdm9yaXRlTGlzdChuICsgJycsICRzY29wZS5wYWdlU2l6ZSwgJycsICcnLCAkc2NvcGUuZmF2RmFsZywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbGlzdCcsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5mYXZvcml0ZUxpc3QgPSBkYXRhLmxpc3Q7XHJcbiAgICAgICAgICAgICAgcmVtb3ZlSW1nSHR0cCgkc2NvcGUuZmF2b3JpdGVMaXN0KVxyXG4gICAgICAgICAgICAgIC8vc2V0dGxlRGF0YShkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICAvLyBzb3VyY2XmjInpkq5cclxuICAgICAgJHNjb3BlLmdvQWN0U291cmNlID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgY2pob21lLmdvQWN0U291cmNlKGlkKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy/liIrnmbvnvJbovpHmjInpkq5cclxuICAgICAgLy8gdGhpcy5wYXJlbnRjdHJsID0gJ215Q0pmYXZvcml0ZWQnO1xyXG4gICAgICAkc2NvcGUuYWRkRWRpdEZyYW1lID0gZnVuY3Rpb24gKGlkLCBwb2RGbGFnKSB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAkc2NvcGUuZWRpdEZyYW1lU2hvdyA9IHRydWU7XHJcbiAgICAgICAgICAkc2NvcGUuZWRpdEZyYW1lRGF0YSA9IHsgZnJvbTogJ215Q0otZmF2b3JpdGVzJywgcGlkOiBpZCwgcG9kRmxhZzogcG9kRmxhZyB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuICAgICAgLy8g5YWz6Zet57yW6L6R5YiK55m7XHJcbiAgICAgICRzY29wZS5jbG9zZUVkaXRGcmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhhcmd1bWVudHMpO1xyXG4gICAgICAgICRzY29wZS5lZGl0RnJhbWVTaG93ID0gZmFsc2U7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAkc2NvcGUuY2FuY2VsQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChpdGVtLCBpZHgpIHtcclxuICAgICAgICBkc3AucG9zdEZ1bihcImNqL2hvbWVQYWdlL3Nob3VDYW5nU2huYWdQaW5cIiwgeyBwcm9kdWN0SWQ6IGl0ZW0uSUQgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdEZWxldGVkIFN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmF2b3JpdGVMaXN0LnNwbGljZShpZHgsIDEpXHJcbiAgICAgICAgICAgICRzY29wZS5nZXRDdXN0b21DYXRlZ29yeSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOiOt+WPlui0reeJqei9puaVsOaNrlxyXG4gICAgICAvL+WKoOWFpei0reeJqei9plxyXG4gICAgICAkc2NvcGUuYnV5bGlzdCA9IFtdO1xyXG4gICAgICBmdW5jdGlvbiBnZXRDYXJ0ZGF0YSgpIHtcclxuICAgICAgICBkc3AucG9zdEZ1bignYXBwL2J1eU9yZGVyL2dldFNob3BwaW5nQ2FydCcsIHt9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc2hvcHBpbmdDYXJ0ICYmIGRhdGEuZGF0YS5zaG9wcGluZ0NhcnQucHJvZHVjdExpc3QpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuYnV5bGlzdCA9IGRhdGEuZGF0YS5zaG9wcGluZ0NhcnQucHJvZHVjdExpc3Q7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmJ1eWxpc3QgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYnV5bGlzdClcclxuICAgICAgICAgICAgaWYoJHN0YXRlUGFyYW1zLnBpZCkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGFyciA9ICRzdGF0ZVBhcmFtcy5waWQuc3BsaXQoJyYmJyk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmFkZEVkaXRGcmFtZShhcnJbMF0sIGFyclsxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZ2V0Q2FydGRhdGEoKTtcclxuICAgICAgJHNjb3BlLmFkZERpYSA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICRzY29wZS5pdGVtY291bnQgPSAxO1xyXG4gICAgICAgICRzY29wZS5hZGRpdGVtID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLmFkZERpYWxvZyA9IHRydWU7XHJcbiAgICAgICAgY29uc3TCoG1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoGlzRml4ZWQ6IHRydWXCoH0pO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9sb2NQcm9kdWN0L2h1b1F1U2hhbmdQaW5YaWFuZ1FpbmcnLCBKU09OLnN0cmluZ2lmeSh7IGlkOiBpZCwgdG9rZW46ICcnIH0pLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSAhPSAyMDApIHJldHVybjtcclxuICAgICAgICAgIGlmICghZGF0YS5kYXRhLnJlc3VsdCkgcmV0dXJuO1xyXG4gICAgICAgICAgJHNjb3BlLmFkZGl0ZW0gPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmFkZGl0ZW0pO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmFkZGl0ZW0uQ0FURUdPUllJRCk7XHJcbiAgICAgICAgICAvL+iOt+WPluaOqOiNkOWVhuWTgVxyXG4gICAgICAgICAgJHNjb3BlLnN0YW5Qcm9kdWN0cyA9ICRzY29wZS5hZGRpdGVtLnN0YW5Qcm9kdWN0cztcclxuICAgICAgICAgICRzY29wZS52YXJpZW50QXJyID0gW107XHJcbiAgICAgICAgICAkc2NvcGUudmFyaWVudEtleXMgPSBbXTtcclxuICAgICAgICAgIGlmICgkc2NvcGUuYWRkaXRlbS5WQVJJQU5US0VZRU4gIT0gJycpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnZhcmllbnRLZXlzID0gJHNjb3BlLmFkZGl0ZW0uVkFSSUFOVEtFWUVOLnNwbGl0KCctJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnZhcmllbnRLZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnZhcmllbnRBcnIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAkc2NvcGUudmFyaWVudEtleXNbaV0sXHJcbiAgICAgICAgICAgICAgICBrZXk6IFtdXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc3RhblByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCRzY29wZS5zdGFuUHJvZHVjdHNbaV0uVkFSSUFOVEtFWSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VyVmFyaWVudFZhbCA9ICRzY29wZS5zdGFuUHJvZHVjdHNbaV0uVkFSSUFOVEtFWS5zcGxpdCgnLScpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjdXJWYXJpZW50VmFsLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS52YXJpZW50QXJyW2pdLmtleS5wdXNoKGN1clZhcmllbnRWYWxbal0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS52YXJpZW50QXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnZhcmllbnRBcnJbaV0ua2V5ID0gJC51bmlxdWUoJHNjb3BlLnZhcmllbnRBcnJbaV0ua2V5KTtcclxuICAgICAgICAgICAgICAkc2NvcGUudmFyaWVudEFycltpXS52YWwgPSAkc2NvcGUudmFyaWVudEFycltpXS5rZXlbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRzY29wZS52YXJpZW50QXJyID0gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLnZhcmllbnRBcnIubGVuZ3RoID09IDEgJiYgJHNjb3BlLnZhcmllbnRBcnJbMF0ua2V5Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICRzY29wZS52YXJpZW50QXJyID0gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudmFyaWVudEFycik7XHJcbiAgICAgICAgICAkc2NvcGUudmFyaWVudEtleXNJbm5lciA9IFtdO1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc3RhblByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICRzY29wZS52YXJpZW50S2V5c0lubmVyLnB1c2goJHNjb3BlLnN0YW5Qcm9kdWN0c1tpXS5WQVJJQU5US0VZKTtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zdGFuUHJvZHVjdHNbaV0uc2VsbERpc2NvdW50ICE9IG51bGwgJiYgJHNjb3BlLnN0YW5Qcm9kdWN0c1tpXS5zZWxsRGlzY291bnQgPCAxMDApIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuc3RhblByb2R1Y3RzW2ldLlNFTExQUklDRURJUyA9ICgkc2NvcGUuc3RhblByb2R1Y3RzW2ldLlNFTExQUklDRSAqICRzY29wZS5zdGFuUHJvZHVjdHNbaV0uc2VsbERpc2NvdW50IC8gMTAwKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICRzY29wZS5zdGFuUHJvZHVjdHNbaV0uU0VMTFBSSUNFRElTID0gJHNjb3BlLnN0YW5Qcm9kdWN0c1tpXS5TRUxMUFJJQ0U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS52YXJpZW50S2V5c0lubmVyKTtcclxuICAgICAgICAgIGdldFRoZVZpdGVtKCk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuY2hhblZhcmlhbnQgPSBmdW5jdGlvbiAodmFsLCBpbmRleCkge1xyXG4gICAgICAgIHZhciBmaWx0ZXJLZXlzT25lID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUudmFyaWVudEtleXNJbm5lci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgdmFyIGN1clZhcktleSA9ICRzY29wZS52YXJpZW50S2V5c0lubmVyW2ldLnNwbGl0KCctJyk7XHJcbiAgICAgICAgICBpZiAoY3VyVmFyS2V5W2luZGV4XSA9PSB2YWwpIHtcclxuICAgICAgICAgICAgZmlsdGVyS2V5c09uZS5wdXNoKGN1clZhcktleSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnZhcmllbnRBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChpID09IGluZGV4KSBjb250aW51ZTtcclxuICAgICAgICAgIHZhciBjYW5iZVR3byA9IFtdO1xyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBmaWx0ZXJLZXlzT25lLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGNhbmJlVHdvLnB1c2goZmlsdGVyS2V5c09uZVtqXVtpXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgT3RoZXJTZWwxID0gJHNjb3BlLnZhcmllbnRBcnJbaV0udmFsO1xyXG4gICAgICAgICAgdmFyIGlzSW5Ud28gPSAkLmluQXJyYXkoT3RoZXJTZWwxLCBjYW5iZVR3byk7XHJcbiAgICAgICAgICBpZiAoaXNJblR3byA9PSAtMSkge1xyXG4gICAgICAgICAgICAkc2NvcGUudmFyaWVudEFycltpXS52YWwgPSBjYW5iZVR3b1swXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhciBmaWx0ZXJLZXlzVHdvID0gW107XHJcbiAgICAgICAgICB2YXIgY3VyVmFsVHdvID0gJHNjb3BlLnZhcmllbnRBcnJbaV0udmFsO1xyXG4gICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBmaWx0ZXJLZXlzT25lLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJLZXlzT25lW2tdW2ldID09IGN1clZhbFR3bykge1xyXG4gICAgICAgICAgICAgIGZpbHRlcktleXNUd28ucHVzaChmaWx0ZXJLZXlzT25lW2tdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZmlsdGVyS2V5c09uZSA9IGZpbHRlcktleXNUd287XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldFRoZVZpdGVtKCk7XHJcbiAgICAgIH1cclxuICAgICAgZnVuY3Rpb24gZ2V0VGhlVml0ZW0oKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS52YXJpZW50QXJyLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAkc2NvcGUudmFyaWFudEl0ZW0gPSAkc2NvcGUuc3RhblByb2R1Y3RzWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YXIgY3VyVmFyS2V5QXJyID0gW107XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS52YXJpZW50QXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGN1clZhcktleUFyci5wdXNoKCRzY29wZS52YXJpZW50QXJyW2ldLnZhbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2NvcGUuY3VyVmFyaWVudEtleSA9IGN1clZhcktleUFyci5qb2luKCctJyk7XHJcbiAgICAgICAgICB2YXIgY3VyVmFyaWVudEluZGV4ID0gZHNwLmZpbmRJbmRleEJ5S2V5KCRzY29wZS5zdGFuUHJvZHVjdHMsICdWQVJJQU5US0VZJywgJHNjb3BlLmN1clZhcmllbnRLZXkpO1xyXG4gICAgICAgICAgJHNjb3BlLnZhcmlhbnRJdGVtID0gJHNjb3BlLnN0YW5Qcm9kdWN0c1tjdXJWYXJpZW50SW5kZXhdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnZhcmlhbnRJdGVtKTtcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuY2hlY2tJc051bSA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh2YWwpXHJcbiAgICAgICAgaWYgKCF2YWwgfHwgaXNOYU4odmFsKSB8fCB2YWwgPT0gJzAnKSB7XHJcbiAgICAgICAgICAkc2NvcGUuaXRlbWNvdW50ID0gJzEnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbGxwcmljZSgpXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnBsdXNPbmUgPSBmdW5jdGlvbiAodmFsLCBpbmRleCkge1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAkc2NvcGUuYnV5bGlzdFtpbmRleF0uaXRlbWNvdW50ID0gJHNjb3BlLmJ1eWxpc3RbaW5kZXhdLml0ZW1jb3VudCAqIDEgKyAxICsgJyc7XHJcbiAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYnV5bGlzdCcsIEpTT04uc3RyaW5naWZ5KCRzY29wZS5idXlsaXN0KSk7XHJcbiAgICAgICAgICBhbGxwcmljZSgpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5pdGVtY291bnQgPSAkc2NvcGUuaXRlbWNvdW50ICogMSArIDEgKyAnJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLm1pbnVzT25lID0gZnVuY3Rpb24gKHZhbCwgaW5kZXgpIHtcclxuICAgICAgICBpZiAodmFsID09ICcxJykgcmV0dXJuO1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICBpZiAodmFsID09ICcnKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5idXlsaXN0W2luZGV4XS5pdGVtY291bnQgPSAnMSc7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkc2NvcGUuYnV5bGlzdFtpbmRleF0uaXRlbWNvdW50ID0gJHNjb3BlLmJ1eWxpc3RbaW5kZXhdLml0ZW1jb3VudCAqIDEgLSAxICsgJyc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYnV5bGlzdCcsIEpTT04uc3RyaW5naWZ5KCRzY29wZS5idXlsaXN0KSk7XHJcbiAgICAgICAgICBhbGxwcmljZSgpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICh2YWwgPT0gJycpIHtcclxuICAgICAgICAgICAgJHNjb3BlLml0ZW1jb3VudCA9ICcxJztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtY291bnQgPSAkc2NvcGUuaXRlbWNvdW50ICogMSAtIDEgKyAnJztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8v6K6h566X5Lu36ZKxXHJcbiAgICAgIGZ1bmN0aW9uIGFsbHByaWNlKCkge1xyXG4gICAgICAgICRzY29wZS50b3RhbCA9IDA7XHJcbiAgICAgICAgJHNjb3BlLnN1bSA9IDA7XHJcbiAgICAgICAgdmFyIGFyciA9IFtdO1xyXG4gICAgICAgICRzY29wZS5idXlsaXN0LmZvckVhY2goZnVuY3Rpb24gKG8sIGkpIHtcclxuICAgICAgICAgIGlmIChvLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgYXJyLnB1c2gobyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZiAoJHNjb3BlLmJ1eWxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgaWYgKGFyci5sZW5ndGggPT0gJHNjb3BlLmJ1eWxpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChvLCBpKSB7XHJcbiAgICAgICAgICAkc2NvcGUudG90YWwgKz0gTnVtYmVyKG8uU0VMTFBSSUNFKSAqIE51bWJlcihvLml0ZW1jb3VudCk7XHJcbiAgICAgICAgICAkc2NvcGUuc3VtICs9IE51bWJlcihvLml0ZW1jb3VudCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgLy/mt7vliqBcclxuICAgICAgJHNjb3BlLmFkZGJ1eSA9IGZ1bmN0aW9uICgkZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBmaW5kSWR4ID0gZHNwLmZpbmRJbmRleEJ5S2V5KCRzY29wZS5idXlsaXN0LCAnU0tVJywgJHNjb3BlLnZhcmlhbnRJdGVtLlNLVSk7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9idXlPcmRlci9nb3VXdUNoZU1haURpYW4nLCB7IHByb2R1Y3RJZDogJHNjb3BlLmFkZGl0ZW0uSUQgfSwgZnVuY3Rpb24gKGRhdGEpIHsgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJz09PT09PicsJHNjb3BlLmFkZGl0ZW0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCc9PT09PT4nLCRzY29wZS52YXJpYW50SXRlbSk7XHJcbiAgICAgICAgaWYgKGZpbmRJZHggPT09IC0xKSB7XHJcbiAgICAgICAgICAkc2NvcGUuYnV5bGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgTkFNRUVOOiAkc2NvcGUuYWRkaXRlbS5OQU1FRU4sXHJcbiAgICAgICAgICAgIEJJR0lNRzogJHNjb3BlLmFkZGl0ZW0uQklHSU1HLFxyXG4gICAgICAgICAgICBpc0NvbGxlY3Q6ICRzY29wZS5hZGRpdGVtLmlzQ29sbGVjdCxcclxuICAgICAgICAgICAgbm93UHJpY2U6ICRzY29wZS52YXJpYW50SXRlbS5ub3dQcmljZSxcclxuICAgICAgICAgICAgSUQ6ICRzY29wZS52YXJpYW50SXRlbS5JRCxcclxuICAgICAgICAgICAgQ29sbGVjdElEOiAkc2NvcGUudmFyaWFudEl0ZW0uUElELFxyXG4gICAgICAgICAgICBTS1U6ICRzY29wZS52YXJpYW50SXRlbS5TS1UsXHJcbiAgICAgICAgICAgIFNFTExQUklDRTogJHNjb3BlLnZhcmlhbnRJdGVtLlNFTExQUklDRSxcclxuICAgICAgICAgICAgaXRlbWNvdW50OiAkc2NvcGUuaXRlbWNvdW50LFxyXG4gICAgICAgICAgICBjaGVja2VkOiB0cnVlXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuYnV5bGlzdFtmaW5kSWR4XS5pdGVtY291bnQgPSAoJHNjb3BlLmJ1eWxpc3RbZmluZElkeF0uaXRlbWNvdW50ICogMSkgKyAoJHNjb3BlLml0ZW1jb3VudCAqIDEpO1xyXG4gICAgICAgICAgJHNjb3BlLmJ1eWxpc3RbZmluZElkeF0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5idXlsaXN0KTtcclxuICAgICAgICBkYXRhU3RvcmFnZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIC8v5pWw5o2u5pON5L2c5a2Y5YKo5ZCO5Y+wXHJcbiAgICAgIGZ1bmN0aW9uIGRhdGFTdG9yYWdlKCkge1xyXG7CoMKgwqDCoMKgwqDCoMKgY29uc3TCoG1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoGlzRml4ZWQ6IHRydWXCoH0pO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvYnV5T3JkZXIvZWRpdFNob3BwaW5nQ2FydCcsIHsgcHJvZHVjdExpc3Q6ICRzY29wZS5idXlsaXN0IH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBpZihkYXRhLmRhdGEuY29kZSA9PT0gJzIwMCcpe1xyXG4gICAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdBZGRlZCBTdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgbXNnTG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgLy/lhbPpl63lvLnnqpdcclxuICAgICAgJHNjb3BlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5hZGREaWFsb2cgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICAvKiDlpLTpg6joj5zljZXov5vlhaXln4vngrkgKi9cclxuICAgICAgZnVuY3Rpb24gdHJhY2tGdW4oKSB7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ3Bvam8vaG9tZS9hZGRTdGF0aXNCeVR5cGUnLCB7XHJcbiAgICAgICAgICBlbnRyeVBhZ2U6ICtkc3AuZ2V0UXVlcnlTdHJpbmcoJ3RyYWNrJylcclxuICAgICAgICB9LCByZXMgPT4geyBjb25zb2xlLmxvZyhyZXMuZGF0YSkgfSlcclxuICAgICAgfVxyXG4gICAgICBpZiAoK2RzcC5nZXRRdWVyeVN0cmluZygndHJhY2snKSA9PSAyKSB7XHJcbiAgICAgICAgdHJhY2tGdW4oKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5L+d55WZMuS9jeaVsFxyXG4gICAgICAkc2NvcGUudG9GaXhlZDIgPSB2YWwgPT57XHJcbiAgICAgICAgaWYgKCF2YWwpIHJldHVyblxyXG4gICAgICAgIHJldHVybiBOdW1iZXIodmFsKS50b0ZpeGVkKDIpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFxyXG4gICAgICAvLyDlhajpgIl3aXNobGlzdFxyXG4gICAgICAkc2NvcGUuaGFuZGxlQ2hlY2tBbGxXaXNoID0gKCkgPT4ge1xyXG4gICAgICAgICRzY29wZS5jaGVja19BbGxfV2lzaCA9ICEkc2NvcGUuY2hlY2tfQWxsX1dpc2hcclxuICAgICAgICBpZigkc2NvcGUuY2hlY2tfQWxsX1dpc2gpe1xyXG4gICAgICAgICAgJHNjb3BlLmNoZWNrb3V0V2lzaExpc3QuZm9yRWFjaChpdGVtPT57XHJcbiAgICAgICAgICAgIGl0ZW0uY2hlY2sgPSB0cnVlXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgJHNjb3BlLmNoZWNrb3V0V2lzaExpc3QuZm9yRWFjaChpdGVtPT57XHJcbiAgICAgICAgICAgIGl0ZW0uY2hlY2sgPSBmYWxzZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWNlemAieaIluWkmumAiXdpc2hsaXN0XHJcbiAgICAgICRzY29wZS5oYW5kbGVDaGVja0l0ZW0gPSAoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICBpdGVtLmNoZWNrID0gIWl0ZW0uY2hlY2tcclxuICAgICAgICBpZiAoaXRlbS5jaGVjaykge1xyXG4gICAgICAgICAgbGV0IG51bSA9IDA7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8ICRzY29wZS5jaGVja291dFdpc2hMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuY2hlY2tvdXRXaXNoTGlzdFtpXS5jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgbnVtKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChudW0gPT0gJHNjb3BlLmNoZWNrb3V0V2lzaExpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja19BbGxfV2lzaCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNrX0FsbF9XaXNoID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuaGFuZGxlRGVsZXRlID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNoZWNrb3V0bGlzdCA9ICRzY29wZS5jaGVja291dFdpc2hMaXN0LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5jaGVjayk7XHJcbiAgICAgICAgaWYoY2hlY2tvdXRsaXN0Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBzZWxlY3QgMSBwcm9kdWN0IGFzIGxlYXN0Jyk7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgIGlkTGlzdDogW11cclxuICAgICAgICB9XHJcbiAgICAgICAgY2hlY2tvdXRsaXN0Lm1hcChpdGVtID0+IHBhcmFtcy5pZExpc3QucHVzaChpdGVtLklEKSk7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL2hvbWVQYWdlL2JhdGNoRGVsZXRlRmF2b3JpdGVzJywgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSwgKHJlcykgPT4ge1xyXG4gICAgICAgICAgIGNvbnN0IHsgbWVzc2FnZSwgc3RhdHVzQ29kZSB9ID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICAgaWYoc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgIGxheWVyLm1zZygnRGVsZXRlZCAgU3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgICAgICAkc2NvcGUuZ2V0Q3VzdG9tQ2F0ZWdvcnkoKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5tc2cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICBcclxuICAgICAgLy/liIbpobVcclxuICAgICAgJHNjb3BlLiRvbigncGFnZWRhdGEtZmEnLCBmdW5jdGlvbiAoZCwgZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSBkYXRhLnBhZ2VOdW07XHJcbiAgICAgICAgJHNjb3BlLnBhZ2VTaXplID0gZGF0YS5wYWdlU2l6ZTtcclxuICAgICAgICAkc2NvcGUuZmlyc3RSZW5kZXIoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKiog6Ieq5a6a5LmJ5YiG57G75YiX6KGo55u45YWzICovXHJcbiAgICAgICRzY29wZS5kaXNhYmxlU2Nyb2xsVHlwZSA9IFwibGVmdFwiO1xyXG5cclxuICAgICAgLy9nZXQgY3VzdG9tIGNhdGVnb3J5IGxpc3RcclxuICAgICAgJHNjb3BlLmdldEN1c3RvbUNhdGVnb3J5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9wb3N0Rm4oJ2NqL0NvbGxlY3Qvc2VsZWN0Q29sbGVjdENvbW1vZGl0eScsIHtpZDogJyd9LCAnJywgJ0dldCBXaXNoTGlzdCBFcnJvcicsIChwb3N0UmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAkc2NvcGUuY3VzdG9tQ2F0ZWdvcnlMaXN0ID0gcG9zdFJlc3VsdC5yZXN1bHQgfHwgW107XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLmN1c3RvbUNhdGVnb3J5TGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmZpcnN0Q2F0ZWdvcnlMaXN0ID0gJHNjb3BlLmN1c3RvbUNhdGVnb3J5TGlzdFswXTtcclxuICAgICAgICAgICAgJHNjb3BlLmN1c3RvbUNhdGVnb3J5TGlzdC5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZENhdGVnb3J5ID0gJHNjb3BlLnNlbGVjdGVkQ2F0ZWdvcnkgPyAkc2NvcGUuc2VsZWN0ZWRDYXRlZ29yeSA6ICRzY29wZS5maXJzdENhdGVnb3J5TGlzdC5pZDtcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ2F0ZWdvcnlJdGVtID0gJHNjb3BlLnNlbGVjdGVkQ2F0ZWdvcnlJdGVtID8gJHNjb3BlLnNlbGVjdGVkQ2F0ZWdvcnlJdGVtIDogJHNjb3BlLmZpcnN0Q2F0ZWdvcnlMaXN0O1xyXG4gICAgICAgICAgICAkc2NvcGUuZmlyc3RSZW5kZXIoKTtcclxuICAgICAgICAgICAgZ2V0Q2F0ZWdvcnlMaXN0KCk7XHJcbiAgICAgICAgICAgIC8vIOWIoOmZpOa3u+WKoOWIpOaWreaYr+WQpumcgOimgeemgeeUqOa7keWKqOaMiemSrlxyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgLy8g5a6a5a69Ym94XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNjcm9sbEJveCA9ICQoXCIuc2Nyb2xsLWJveFwiKVswXTtcclxuICAgICAgICAgICAgICAvL3Vs55qEZG9tXHJcbiAgICAgICAgICAgICAgJHNjb3BlLnVsRG9tID0gJChcIi5zY3JvbGwtYm94LXVsXCIpWzBdO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGxpTGlzdCA9ICRzY29wZS51bERvbS5jaGlsZHJlbjtcclxuICAgICAgICAgICAgICBsZXQgdWxXaWR0aCA9IDA7XHJcbiAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxpTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdpZCA9IGxpTGlzdFtpXS5vZmZzZXRXaWR0aCArIDMzO1xyXG4gICAgICAgICAgICAgICAgdWxXaWR0aCArPSB3aWRcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy/miYDmnIlsaeeahOWuveW6pue7vOWQiFxyXG4gICAgICAgICAgICAgICRzY29wZS51bFdpZHRoID0gdWxXaWR0aDtcclxuICAgICAgICAgICAgICBjb25zdCB3cmFwV2lkdGggPSAkc2NvcGUuc2Nyb2xsQm94Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICRzY29wZS5pc0hpZGVTY3JvbGxCdG4gPSB3cmFwV2lkdGggPiAkc2NvcGUudWxXaWR0aCA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICAgICAgICBpZiAod3JhcFdpZHRoID4gJHNjb3BlLnVsV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICQoXCIuc2Nyb2xsLWJveC11bFwiKVswXS5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoMHB4KVwiXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDojrflj5boh6rlrprkuYnliIbnsbvliJfooajplb/luqZcclxuICAgICAgJHNjb3BlLiRvbignbmdMb2FkRmluaXNoZWQnLGZ1bmN0aW9uIChhcmdzKXtcclxuICAgICAgICBqdWRnZUlzSGlkZVNjcm9sbEJ0bigpO1xyXG4gICAgICB9KVxyXG5cclxuICAgICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4ge1xyXG4gICAgICAgIGp1ZGdlSXNIaWRlU2Nyb2xsQnRuKClcclxuICAgICAgfVxyXG4gICAgICAvL+WIpOaWreaYr+WQpuemgeeUqOa7keWKqOaMiemSrlxyXG4gICAgICBmdW5jdGlvbiBqdWRnZUlzSGlkZVNjcm9sbEJ0bigpIHtcclxuICAgICAgICAvLyDlrprlrr1ib3hcclxuICAgICAgICAkc2NvcGUuc2Nyb2xsQm94ID0gJChcIi5zY3JvbGwtYm94XCIpWzBdO1xyXG4gICAgICAgIC8vdWznmoRkb21cclxuICAgICAgICAkc2NvcGUudWxEb20gPSAkKFwiLnNjcm9sbC1ib3gtdWxcIilbMF07XHJcbiAgICAgICAgY29uc3QgbGlMaXN0ID0gJHNjb3BlLnVsRG9tLmNoaWxkcmVuO1xyXG4gICAgICAgIGlmICghJHNjb3BlLnVsV2lkdGgpIHtcclxuICAgICAgICAgIGxldCB1bFdpZHRoID0gMDtcclxuICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsaUxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHdpZCA9IGxpTGlzdFtpXS5vZmZzZXRXaWR0aCArIDMzO1xyXG4gICAgICAgICAgICB1bFdpZHRoICs9IHdpZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy/miYDmnIlsaeeahOWuveW6pue7vOWQiFxyXG4gICAgICAgICAgJHNjb3BlLnVsV2lkdGggPSB1bFdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB3cmFwV2lkdGggPSAkc2NvcGUuc2Nyb2xsQm94Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgIC8v5Yik5pat5piv5ZCm6ZqQ6JeP5ruR5Yqo5oyJ6ZKuXHJcbiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBsZXQgY29tcGFyZVdpZHRoID0gJHNjb3BlLnNlbGVjdGVkQ2F0ZWdvcnkgPyAkc2NvcGUudWxXaWR0aCArIDUwIDogJHNjb3BlLnVsV2lkdGg7XHJcbiAgICAgICAgICAkc2NvcGUuaXNIaWRlU2Nyb2xsQnRuID0gd3JhcFdpZHRoID4gY29tcGFyZVdpZHRoID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgaWYgKHdyYXBXaWR0aCA+ICRzY29wZS51bFdpZHRoKSB7XHJcbiAgICAgICAgICAgICQoXCIuc2Nyb2xsLWJveC11bFwiKVswXS5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoMHB4KVwiXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy/pgInmi6nliIbnsbvliJfooahcclxuICAgICAgJHNjb3BlLnNlbGVjdENhdGVnb3J5ID0gKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5zZWxlY3RlZENhdGVnb3J5ID09PSBpdGVtLmlkKSB7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgICAgIH1cclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDYXRlZ29yeSA9IGl0ZW0uaWQ7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ2F0ZWdvcnlJdGVtID0gaXRlbTtcclxuICAgICAgICAvLyDliKTmlq3mmK/lkKbpnIDopoHmu5HliqhcclxuICAgICAgICAvLyBjb25zdCBsaUxpc3QgPSAkc2NvcGUudWxEb20uY2hpbGRyZW47XHJcbiAgICAgICAgLy8gY29uc3QgdGFyZ2V0TGlMZWZ0ID0gbGlMaXN0W2luZGV4XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodDtcclxuICAgICAgICAvLyBjb25zdCBzY3JvbGxCb3hMZWZ0ID0gJHNjb3BlLnNjcm9sbEJveC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodDtcclxuICAgICAgICAvLyBpZiAodGFyZ2V0TGlMZWZ0ICsgMTIwID4gc2Nyb2xsQm94TGVmdCkge1xyXG4gICAgICAgIC8vICAgY29uc3Qgc2Nyb2xsV2lkdGggPSB0YXJnZXRMaUxlZnQgKyAxMjAgLSBzY3JvbGxCb3hMZWZ0O1xyXG4gICAgICAgIC8vICAgbGV0IHVsRG9tU2Nyb2xsWCA9ICRzY29wZS51bERvbS5zdHlsZS50cmFuc2Zvcm07XHJcbiAgICAgICAgLy8gICB1bERvbVNjcm9sbFggPSBOdW1iZXIodWxEb21TY3JvbGxYLnN1YnN0cmluZyh1bERvbVNjcm9sbFguaW5kZXhPZignKCcpICsgMSwgdWxEb21TY3JvbGxYLmluZGV4T2YoJ3B4JykpKSB8fCAwO1xyXG4gICAgICAgIC8vICAgJHNjb3BlLnVsRG9tLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dWxEb21TY3JvbGxYIC0gc2Nyb2xsV2lkdGh9cHgpYDtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gJHNjb3BlLnNlYXJjaFZhbCA9IFwiXCI7XHJcbiAgICAgICAgJHNjb3BlLmZpcnN0UmVuZGVyKCk7XHJcbiAgICAgICAgZ2V0Q2F0ZWdvcnlMaXN0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8v5ruR5Yqo5YiG57G75YiX6KGoIOaMiemSrlxyXG4gICAgICAkc2NvcGUuc2Nyb2xsQ2F0ZWdvcnlMaXN0ID0gKHR5cGUpID0+IHtcclxuICAgICAgICBsZXQgdWxEb21TY3JvbGxYID0gJHNjb3BlLnVsRG9tLnN0eWxlLnRyYW5zZm9ybTtcclxuICAgICAgICBjb25zdCBzY3JvbGxCb3hXaWR0aCA9ICRzY29wZS5zY3JvbGxCb3gub2Zmc2V0V2lkdGhcclxuICAgICAgICBsZXQgdWxXaWR0aCA9ICRzY29wZS51bFdpZHRoIC0gc2Nyb2xsQm94V2lkdGggKyA1MDsgIC8vNTDmmK/okpnlsYLnmoTlrr3luqZcclxuICAgICAgICAvL+iOt+WPluWOn+adpea7keWKqOeahOWAvFxyXG4gICAgICAgIHVsRG9tU2Nyb2xsWCA9IE51bWJlcih1bERvbVNjcm9sbFguc3Vic3RyaW5nKHVsRG9tU2Nyb2xsWC5pbmRleE9mKCcoJykgKyAxLCB1bERvbVNjcm9sbFguaW5kZXhPZigncHgnKSkpIHx8IDA7XHJcblxyXG4gICAgICAgIGlmICh0eXBlICYmIHVsRG9tU2Nyb2xsWCAhPT0gMCkge1xyXG4gICAgICAgICAgbGV0IHNjcm9sbFdpZHRoID0gc2Nyb2xsQm94V2lkdGggKyB1bERvbVNjcm9sbFggLSA4MDtcclxuICAgICAgICAgICRzY29wZS51bERvbS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke3Njcm9sbFdpZHRoID4gMCA/IDAgOiBzY3JvbGxXaWR0aH1weClgO1xyXG4gICAgICAgICAgLy/liKTmlq3mmK/lkKbnpoHnlKhcclxuICAgICAgICAgICRzY29wZS5kaXNhYmxlU2Nyb2xsVHlwZSA9IHNjcm9sbFdpZHRoID49IDAgPyAnbGVmdCcgOiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXR5cGUgJiYgTWF0aC5hYnModWxEb21TY3JvbGxYKSA8PSB1bFdpZHRoKSB7XHJcbiAgICAgICAgICBjb25zdCBzY3JvbGxXaWRoID0gLXNjcm9sbEJveFdpZHRoICsgdWxEb21TY3JvbGxYICsgODA7XHJcbiAgICAgICAgICAkc2NvcGUudWxEb20uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHtzY3JvbGxXaWRofXB4KWA7XHJcbiAgICAgICAgICAvL+WIpOaWreaYr+WQpuemgeeUqFxyXG4gICAgICAgICAgJHNjb3BlLmRpc2FibGVTY3JvbGxUeXBlID0gTWF0aC5hYnMoc2Nyb2xsV2lkaCkgPj0gdWxXaWR0aCA/ICdyaWdodCcgOiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy/miZPlvIBtb2RhbFxyXG4gICAgICAkc2NvcGUub3BlbkNhdGVnb3J5TW9kYWwgPSAodHlwZSwgY2F0ZWdvcnkpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgIGNhc2UgJ21vdmUnOlxyXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkpIHsgLy8g5Y2V5Liq5ZWG5ZOB56e75YqoXHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkUHJkTGlzdCA9IFt7aWQ6IGNhdGVnb3J5fV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHsgLy/mibnph4/np7vliqhcclxuICAgICAgICAgICAgICBjb25zdCBjaGVja291dGxpc3QgPSAkc2NvcGUuY2hlY2tvdXRXaXNoTGlzdC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uY2hlY2spO1xyXG4gICAgICAgICAgICAgIGlmKGNoZWNrb3V0bGlzdC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCAxIHByb2R1Y3QgYXMgbGVhc3QnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRQcmRMaXN0ID0gY2hlY2tvdXRsaXN0Lm1hcChpdGVtID0+ICh7aWQ6IGl0ZW0ud2lzaGlkfSkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ2FkZCc6XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuY3VzdG9tQ2F0ZWdvcnlMaXN0Lmxlbmd0aCA+PSAxMClcclxuICAgICAgICAgICAgICByZXR1cm4gbGF5ZXIubXNnKCdPbmx5IHVwIHRvIDEwIGZvbGRlcnMgY2FuIGJlIGNyZWF0ZWQuJylcclxuICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3J5TmFtZSA9ICcnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ3JlbmFtZSc6XHJcbiAgICAgICAgICAgICRzY29wZS5jYXRlZ29yeU5hbWUgPSBjYXRlZ29yeTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5zZWxlY3REYW5nZXIgPSAkc2NvcGUucmVxdWlyZURhbmdlciA9ICRzY29wZS5zYW1lRGFuZ2VyID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLnNob3dDYXRlZ29yeU1vZGFsID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUuY2F0ZWdvcnlNb2RhbFR5cGUgPSB0eXBlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+WIhuexu+W8ueeqlyDnoa7lrprmjInpkq5cclxuICAgICAgJHNjb3BlLmNneU1vZGFsQ29uZmlybSA9ICgpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKCRzY29wZS5jYXRlZ29yeU1vZGFsVHlwZSkge1xyXG4gICAgICAgICAgY2FzZSAnbW92ZSc6XHJcbiAgICAgICAgICAgIGlmICghJHNjb3BlLm1vdmVUb0NhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5zZWxlY3REYW5nZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1vdmVQcm9kVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAnYWRkJzpcclxuICAgICAgICAgICAgaWYgKCEkc2NvcGUuY2F0ZWdvcnlOYW1lKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnJlcXVpcmVEYW5nZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zYW1lRGFuZ2VyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdHJpbU5hbWUgPSAkc2NvcGUuY2F0ZWdvcnlOYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuY3VzdG9tQ2F0ZWdvcnlMaXN0LmZpbmQoeCA9PiB4Lndpc2hOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRyaW1OYW1lKSB8fCB0cmltTmFtZSA9PSBcIndpc2hsaXN0XCIpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2FtZURhbmdlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnJlcXVpcmVEYW5nZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICByZXR1cm4gXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYWRkQ3VzdG9tQ2d5KClcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdyZW5hbWUnOlxyXG4gICAgICAgICAgICBpZiAoISRzY29wZS5jYXRlZ29yeU5hbWUpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUucmVxdWlyZURhbmdlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNhbWVEYW5nZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmN1c3RvbUNhdGVnb3J5TGlzdC5maW5kKHggPT4geC53aXNoTmFtZSA9PT0gJHNjb3BlLmNhdGVnb3J5TmFtZSkpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2FtZURhbmdlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnJlcXVpcmVEYW5nZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICByZXR1cm4gXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVuYW1lQ3VzdG9tTGlzdCgpXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAnZGVsZXRlJzpcclxuICAgICAgICAgICAgZGVsZXRlQ3VzdG9tTGlzdCgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLnNob3dDYXRlZ29yeU1vZGFsID0gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8v5re75Yqg5YiG57G7XHJcbiAgICAgIGNvbnN0IGFkZEN1c3RvbUNneSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICB3aXNoTmFtZTogJHNjb3BlLmNhdGVnb3J5TmFtZS50cmltKClcclxuICAgICAgICB9XHJcbiAgICAgICAgX3Bvc3RGbihcImNqL0NvbGxlY3QvaW5zZXJ0Q29sbGVjdFwiLCBwYXJhbXMsIFwiQWRkZWQgc3VjY2Vzc2Z1bGx5LlwiLCBcIkFkZCB3aXNobGlzdCBmYWlsZWQuXCIsICgpID0+IHtcclxuICAgICAgICAgICRzY29wZS5nZXRDdXN0b21DYXRlZ29yeSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgLy/np7vliqjllYblk4FcclxuICAgICAgZnVuY3Rpb24gbW92ZVByb2RUb0xpc3QoKSB7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgICAgZGJDb2xsZWN0UHJlc3NWTzogey8v6L+Z6KOF55qE5piv5pS26JeP5aS555qE5L+h5oGv77yM5pqC5pe25Y+q6ZyA6KaBaWRcclxuICAgICAgICAgICAgaWQ6ICRzY29wZS5tb3ZlVG9DYXRlZ29yeVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGRiV2lzaFByb2R1Y3RzOiAkc2NvcGUuc2VsZWN0ZWRQcmRMaXN0Ly/ov5nkuKrmlbDnu4Tph4zoo4XnmoTmmK/llYblk4HnmoTkv6Hmga/vvIzmmoLml7blj6rpnIDopoFpZFxyXG4gICAgICAgIH1cclxuICAgICAgICBfcG9zdEZuKCdjai9Db2xsZWN0L3VwZGF0ZVByb2R1Y3RNb3ZlJywgcGFyYW1zLCAnTW92ZSBzdWNjZWVkLicsICdNb3ZlIEZhaWxlZC4nLCAoKSA9PiB7XHJcbiAgICAgICAgICAvLyAkc2NvcGUuZmlyc3RSZW5kZXIoKTtcclxuICAgICAgICAgICRzY29wZS5nZXRDdXN0b21DYXRlZ29yeSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIC8v5Yig6Zmk5YiG57G7XHJcbiAgICAgIGZ1bmN0aW9uIGRlbGV0ZUN1c3RvbUxpc3QoKSB7XHJcbiAgICAgICAgX3Bvc3RGbihcImNqL0NvbGxlY3QvZGVsZXRlQ29sbGVjdFByb2R1Y3RcIiwge1xyXG4gICAgICAgICAgZGJDb2xsZWN0OiBbJHNjb3BlLnNlbGVjdGVkQ2F0ZWdvcnldXHJcbiAgICAgICAgfSwgJ0RlbGV0ZWQgc3VjY2Vzc2Z1bGx5LicsICdEZWxldGUgZmFpbGVkLicsICgpID0+IHtcclxuICAgICAgICAgICRzY29wZS5nZXRDdXN0b21DYXRlZ29yeSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgLy/ph43lkb3lkI3liIbnsbtcclxuICAgICAgZnVuY3Rpb24gcmVuYW1lQ3VzdG9tTGlzdCAoKSB7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgICAgaWQ6ICRzY29wZS5zZWxlY3RlZENhdGVnb3J5LFxyXG4gICAgICAgICAgd2lzaE5hbWU6ICRzY29wZS5jYXRlZ29yeU5hbWVcclxuICAgICAgICB9XHJcbiAgICAgICAgX3Bvc3RGbihcImNqL0NvbGxlY3QvdXBkYXRlQ29sbGVjdFByb2R1Y3RcIiwgcGFyYW1zLCAnTW9kaWZpZWQgc3VjY2Vzc2Z1bGx5LicsICdNb2RpZmllZCBGYWlsZWQuJywgKCkgPT4ge1xyXG4gICAgICAgICAgJHNjb3BlLmdldEN1c3RvbUNhdGVnb3J5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCDmjqXlj6NcclxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IHBhcmFtcyDmjqXlj6PkvKDlj4JcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHN1Y01zZyDmiJDlip/lkI7nmoTmj5DnpLrkv6Hmga9cclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZhaWxNc2cg5aSx6LSl5ZCO55qE5o+Q56S65L+h5oGvXHJcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIOWbnuiwg1xyXG4gICAgICAgKi9cclxuICAgICAgZnVuY3Rpb24gX3Bvc3RGbih1cmwsIHBhcmFtcywgc3VjTXNnLCBmYWlsTXNnLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKHVybCwgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSwgZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcG9zdFJlc3VsdCA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICBpZiAocG9zdFJlc3VsdCAmJiBwb3N0UmVzdWx0LnN0YXR1c0NvZGUgPT0gJzIwMCcpIHtcclxuICAgICAgICAgICAgICBzdWNNc2cgPyBsYXllci5tc2coc3VjTXNnKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgY2FsbGJhY2socG9zdFJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgZmFpbE1zZyA/IGxheWVyLm1zZyhmYWlsTXNnKSA6IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnVW5leHBlY3QgRXJyb3IuJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLmdldEN1c3RvbUNhdGVnb3J5KCk7XHJcblxyXG4gICAgfV0pO1xyXG4gIFxyXG4gIHJldHVybiBhcHA7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBcEJBO0FBc0JBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQXRCQTtBQUNBO0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQXBDQTtBQUNBO0FBcUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFMQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../src/pages/mycj/favorites/favorites.js\n");

/***/ })

}]);