(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[34],{

/***/ "../src/pages/mycj/imported-orders/import-process-required.js":
/*!********************************************************************!*\
  !*** ../src/pages/mycj/imported-orders/import-process-required.js ***!
  \********************************************************************/
/*! exports provided: importProcessRequiredFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"importProcessRequiredFactory\", function() { return importProcessRequiredFactory; });\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction importProcessRequiredFactory(angular) {\n  var app = angular.module('import-process-required.module', ['service']);\n  app.directive('repeatFinish', function ($timeout) {\n    return {\n      restrict: 'A',\n      link: function link(scope, elem, attr) {\n        //当前循环至最后一个\n        if (scope.$last === true) {\n          $timeout(function () {\n            //向父控制器传递事件消息\n            scope.$emit('repeatFinishCallback');\n          }, 100);\n        }\n      }\n    };\n  });\n  app.controller('import-process-required.ctrl', ['$scope', '$rootScope', 'dsp', '$stateParams', function ($scope, $rootScope, dsp, $stateParams) {\n    var base64 = $rootScope.base64;\n    var userInfo = $rootScope.userInfo;\n    $scope.userId = userInfo.userId;\n    var discounteTransferFlag = false; //是否享受美国仓物流折扣优惠\n\n    $('#yzy-merge-select').select2();\n    $('#init_select').select2();\n    dsp.domainData().then(function (res) {\n      // 请求成功的结果\n      console.log(res);\n      $scope.iscj = res.iscj;\n\n      if ($scope.iscj == '1') {\n        //cj\n        $scope.websiteName = 'CJ';\n      } else {\n        //客户\n        $scope.websiteName = res.websiteName || 'CJ';\n      }\n    });\n    $scope.storage = '';\n    $scope.storageList = [{\n      name: 'Yiwu Warehosue',\n      id: '0'\n    }, {\n      name: 'Shenzhen Warehosue',\n      id: '1'\n    }, {\n      name: 'Cal Warehouse',\n      id: '2'\n    }, {\n      name: 'NJ Warehouse',\n      id: '3'\n    }];\n    $scope.dataFound = true; //客户第一次进入订单模块的界面\n\n    $scope.isordFlag = false;\n    $scope.syStuFlag = false;\n    $scope.errorShowFlag = false; // var $navLis = $('.header-nav li');\n\n    $scope.$on('repeatFinishCallback', function () {\n      // pselwlFun(); //检测是否选择了物流\n      $('#z-dcl-ord #dcl-note').attr('disabled', 'true');\n      $('#z-dcl-ord .bj-spsku').attr('disabled', 'true');\n    }); // 20-01-19 物流原因 ---- 20-01-31 迁移\n\n    var logisticsReasonURL = 'order/order/checkOrderLogsitics';\n    $scope.logisticsReasonList = [];\n    $rootScope.$on(logisticsReasonURL, function (_, bool) {\n      bool ? layer.load(2) : layer.closeAll(\"loading\");\n    });\n\n    $scope.showLogisticsReason = function (orderItem) {\n      $scope.logisticsReasonList = [];\n      var params = {\n        orderNumber: orderItem.order.ID // orderNumber: '200116100011906809',\n\n      };\n      dsp.postFun(logisticsReasonURL, params, function (res) {\n        var data = res.data || {};\n        console.log(orderItem);\n\n        if (data.statusCode == '200') {\n          if (data.result.some(function (item) {\n            return !item.success;\n          })) {\n            // 含有不可用物流才显示列表\n            $scope.showLogisticsToggle(true);\n\n            for (var i = 0; i < data.result.length; i++) {\n              if (!data.result[i]['success']) {\n                $scope.logisticsReasonList.push(data.result[i]);\n              }\n            }\n          }\n        }\n      });\n    };\n\n    $scope.showLogisticsToggle = function () {\n      var bool = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !$scope.logisticsReasonShow;\n      $scope.logisticsReasonShow = bool;\n    };\n\n    $scope.showWlListFun = function (orderItem, products, index) {\n      console.log(orderItem);\n      $scope.itemOrdSelected = orderItem;\n      console.log($scope.itemOrdSelected);\n      $scope.itemProductSelected = products;\n      console.log($scope.itemProductSelected);\n      $scope.curOrdIndex = index;\n      console.log($scope.curOrdIndex);\n      $scope.selectWlFlag = true;\n      $scope.itemLogisticList = orderItem.LOGISTICINFO;\n      console.log($scope.itemLogisticList);\n\n      if (orderItem.LOGISTIC_NAME) {\n        $scope.checkdWlName = orderItem.LOGISTIC_NAME;\n      } else {\n        $scope.checkdWlName = '';\n      }\n\n      console.log($scope.checkdWlName);\n    };\n\n    var pageH = $(window).height() - 171;\n    var docH = $(document).height();\n    $(window).scroll(function () {\n      var before = $(window).scrollTop();\n\n      if (before > 60) {\n        if (window.innerWidth > 1330 && window.innerWidth < 1590) {\n          $('.direct-ord-fil').addClass(\"showtop\");\n        } else {\n          $('.direct-ord-fil').addClass(\"showtop1\");\n        }\n      } else {\n        $('.direct-ord-fil').removeClass(\"showtop\");\n        $('.direct-ord-fil').removeClass(\"showtop1\");\n      }\n    });\n    $('.directorders-wrap').css({\n      'min-height': $(window).height() * 1 + 'px'\n    });\n    $('.direct-right').css({\n      'min-height': $(window).height() * 1 + 'px'\n    });\n    dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0); //给更多搜索添加点击显示隐藏的动画\n\n    $('#ditect-searchmore').click(function () {\n      $('#ditect-moresearch').stop().toggle(300);\n      $('#toggle-logo1').toggleClass('glyphicon-triangle-top');\n      setTimeout(function () {\n        console.log($('#ditect-moresearch').height());\n\n        if ($('#toggle-logo1').hasClass('glyphicon-triangle-top')) {\n          console.log('显示搜索');\n          $('.direct-right').css({\n            'min-height': $(window).height() * 1 + $('#ditect-moresearch').height() + 10 + 'px'\n          });\n        } else {\n          console.log('隐藏搜索');\n          $('.direct-right').css({\n            'min-height': $(window).height() * 1 + 'px'\n          });\n        }\n      }, 400);\n    }); // var isEmpower = localStorage.getItem('isEmpower');\n    // if (isEmpower == null || isEmpower == '' || isEmpower == undefined) { } else {\n    //   if (isEmpower == '1') {\n    //     // var a = $('.tbnew-div>p:first-child');\n    //     // var left = getElementLeft(a[0]) - 14;\n    //     // var top = getElementTop(a[0]) - 4;\n    //     // console.log(left, top);\n    //     // $('.online-wrap2').css({\n    //     //   \"top\": top + 'px',\n    //     //   \"left\": left + 'px'\n    //     // });\n    //     // $scope.syStuFlag = true;\n    //     // $('.zzc').hide();\n    //     // $('.zzc2').show();\n    //   }\n    // }\n    // $('.know').click(function () {\n    //   $('.zzc').hide();\n    //   $('.zzc2').hide();\n    //   localStorage.setItem('closeFlag', '1');\n    //   location.href = '#/myCJAssociatedStore';\n    // });\n    // $('#online-content2').click(function () {\n    //   $('.zzc2').hide();\n    //   var a = $('.mycj-left-bar>ul>li').eq(0);\n    //   console.log(a)\n    //   var left = getElementLeft(a[0]) + 1;\n    //   var top = getElementTop(a[0]) - 4;\n    //   console.log(left, top);\n    //   $('.online-wrap').css({\n    //     \"top\": top + 'px',\n    //     \"left\": left + 'px'\n    //   });\n    //   //$('.reordstu-dlist').css('display','block');\n    //   $('.zzc').show();\n    // });\n    // $scope.jump = function () {\n    //   console.log('1111111111')\n    //   localStorage.setItem('closeFlag', '');\n    //   location.href = '#/dropshipping-orders';\n    // };\n\n    function getElementLeft(element) {\n      var actualLeft = element.offsetLeft;\n      var current = element.offsetParent;\n\n      while (current !== null) {\n        actualLeft += current.offsetLeft;\n        current = current.offsetParent;\n      }\n\n      return actualLeft;\n    }\n\n    function getElementTop(element) {\n      var actualTop = element.offsetTop;\n      var current = element.offsetParent;\n\n      while (current !== null) {\n        actualTop += current.offsetTop;\n        current = current.offsetParent;\n      }\n\n      return actualTop;\n    } //物流的请求\n    //选择物流的请求\n\n\n    var upShId; //税号的id\n\n    var upShIndex; //税号的index\n\n    $('#z-dcl-ord').on('change', '.dcl-ord-selwl', function (event) {\n      event.stopPropagation(); //获取选择框中的物流方式\n\n      var thisWlFs = $(this).val();\n      var countryCode = $(this).parent('.dcl-ord-wltd').siblings('.shipping-info').find('.imp-procus-country').text();\n      var taxidText = $(this).parent('.dcl-ord-wltd').siblings('.shipping-info').children('.taixd-text').text();\n\n      if ((thisWlFs == 'CJPacket' || thisWlFs == 'DHL' || thisWlFs == 'ePacket') && countryCode == 'BR' && !taxidText) {\n        upShId = $(this).parent().siblings('.ord-cai').children('.order-id').text();\n        upShIndex = $('#z-dcl-ord .dcl-ord-selwl').index(this); //订单下标\n\n        console.log(upShIndex, 'upShIndex');\n        $scope.taxidFlag = true;\n      } //如果是切换成的是USPS+ 改变发往仓库\n\n\n      console.log($(this).parent().parent().siblings('.d-toggle-tr').find('.where-from'));\n\n      if (thisWlFs == 'USPS+') {\n        $(this).parent().parent().siblings('.d-toggle-tr').find('.where-from').text('USA');\n      } else {\n        $(this).parent().parent().siblings('.d-toggle-tr').find('.where-from').text('China');\n      }\n\n      var propertyText = $(this).parent().parent().siblings('.d-toggle-tr').find('.property-text').text();\n      console.log(propertyText); //获取隐藏域中可以发的物流数据\n\n      var wlhidedata = $(this).siblings('.dclord-wl-hide').text();\n      wlhidedata = JSON.parse(wlhidedata);\n      console.log(wlhidedata);\n      var wlstuPrice = 0; //存储物流费用\n\n      for (var i = 0; i < wlhidedata.length; i++) {\n        // console.log(wlhidedata[i].logisticName)\n        if (wlhidedata[i].logisticName == thisWlFs) {\n          wlstuPrice = wlhidedata[i].price - 0;\n          $(this).css('border', '1px solid #ececec');\n          break;\n        } else {\n          $(this).css('border', '1px solid #f88f29');\n        }\n      }\n\n      console.log(wlstuPrice); //给邮费赋值\n      // $(this).parent('.dcl-ord-wltd').siblings('.ship-cost-td').children('.logis-info-wlprice').children('.wl-money-span').text(wlstuPrice);\n      //给邮费加上单位\n      // $(this).parent('.dcl-ord-wltd').siblings('.ship-cost-td').children('.logis-info-wlprice').children('.unit-span').text('USD')\n      //获取隐藏域中的商品总金额\n\n      var spallmoney = $(this).parent('.dcl-ord-wltd').siblings('.ship-cost-td').children('.dclord-amount').text() - 0; //给 订单总金额赋值\n\n      var cjAmountMoney = (wlstuPrice + spallmoney).toFixed(2); // var abc = $cjAmountMoney.toFixed(2);\n\n      $(this).parent('.dcl-ord-wltd').siblings('.z-cjord-wm').children('.cj-price-num').children('#cj-a-money').text(cjAmountMoney + 'USD'); // $scope.zlFun();\n\n      console.log(spallmoney);\n      console.log(cjAmountMoney);\n      var wlData = {};\n      var ordId = $(this).parent().siblings('.ord-cai').children('.order-id').text();\n      var nowIndex = $(this).attr('index') * 1;\n      var logistic = $(this).val();\n      console.log(ordId + '===' + logistic);\n      wlData.orderNum = ordId;\n      wlData.logisic = logistic;\n      console.log(logistic);\n      $scope.ordersList.forEach(function (o, i) {\n        if (o.order.ID == ordId) {\n          o.order.LOGISTIC_NAME = logistic;\n          o.order.POSTAGE = wlstuPrice;\n\n          for (var j = 0; j < o.order.LOGISTICINFO.length; j++) {\n            if (thisWlFs == o.order.LOGISTICINFO[j].logisticName) {\n              $scope.ordersList[i].order.cast = o.order.LOGISTICINFO[j].cast == null ? '0' : o.order.LOGISTICINFO[j].cast;\n              break;\n            }\n          }\n        }\n      });\n      console.log($scope.remark);\n      console.log($scope.remarkList);\n      $scope.ordersList[nowIndex].order.POSTAGE = wlstuPrice; // 当前选中的物流\n\n      var _$scope$ordersList$no = $scope.ordersList[nowIndex].order.LOGISTICINFO.filter(function (v) {\n        return v.logisticName === thisWlFs;\n      }),\n          _$scope$ordersList$no2 = _slicedToArray(_$scope$ordersList$no, 1),\n          currentWl = _$scope$ordersList$no2[0];\n\n      $scope.ordersList[nowIndex].order.currentWl_price = currentWl.price;\n      $scope.ordersList[nowIndex].order.currentWl_pack_price = currentWl.packPrice || 0;\n      dsp.postFun('app/order/upOrderLogisics', JSON.stringify(wlData), function (data) {\n        console.log(data);\n\n        if (data.data.result) {\n          // logisRemark($scope.list);\n          for (var j = 0; j < $scope.remarkList.length; j++) {\n            if (logistic == $scope.remarkList[j].nameen) {\n              if ($scope.remarkList[j].remark) {\n                $scope.ordersList[nowIndex].order.remark = $scope.remarkList[j].remark.toString().replace(/<br>/g, '');\n              } else {\n                $scope.ordersList[nowIndex].order.remark = $scope.remarkList[j].remark;\n              }\n\n              break;\n            }\n          }\n\n          console.log(propertyText);\n          console.log(propertyText.indexOf(\"BATTERY\") >= 0 || propertyText.indexOf(\"ELECTRONIC\") >= 0 || propertyText.indexOf(\"HAVE_CREAM\") >= 0 || propertyText.indexOf(\"HAVE_MAGNETISM\") >= 0);\n          console.log(thisWlFs);\n\n          if (thisWlFs == 'ePacket' && (propertyText.indexOf(\"BATTERY\") >= 0 || propertyText.indexOf(\"ELECTRONIC\") >= 0 || propertyText.indexOf(\"HAVE_CREAM\") >= 0 || propertyText.indexOf(\"HAVE_MAGNETISM\") >= 0)) {\n            $scope.ordersList[nowIndex].order.remark = 'We have to use a special ePacket channel to ship this order as it contains sensitive material like: battery, liquid, cream, magnet etc. The shipping cost will be 15% higher than normal ePacket.';\n          }\n\n          console.log($scope.ordersList[nowIndex]);\n\n          for (var i = 0; i < wlhidedata.length; i++) {\n            //如果有偏远费用 提示的优先级最高\n            if (wlhidedata[i].logisticName == thisWlFs) {\n              if (wlhidedata[i]['remoteFee'] > 0) {\n                $scope.ordersList[nowIndex].order.remark = 'Additional Charges for Remote Address: ' + wlhidedata[i]['remoteFee'] + 'USD';\n              }\n            }\n          }\n        }\n      }, function (data) {\n        console.log(data);\n      });\n    });\n\n    $scope.checkItem = function (item) {\n      console.log($scope.checkdWlName);\n      $scope.checkdWlName = item.logisticName;\n      $scope.confirmSelWlFun();\n    };\n\n    $scope.confirmSelWlFun = function () {\n      console.log($scope.checkdWlName);\n      console.log($scope.itemOrdSelected);\n      var curOrdObj = $scope.itemOrdSelected;\n      var curOrdProArr = $scope.itemProductSelected;\n      console.log(curOrdProArr, 'curOrdProArr'); //获取选择框中的物流方式\n\n      var thisWlFs = $scope.checkdWlName;\n      var countryCode = curOrdObj.COUNTRY_CODE;\n      var taxidText = curOrdObj.taxidExtend;\n      var curOrdId = curOrdObj.ID;\n\n      if ((thisWlFs == 'CJPacket' || thisWlFs == 'DHL' || thisWlFs == 'ePacket') && countryCode == 'BR' && !taxidText) {\n        upShId = curOrdId;\n        upShIndex = $scope.curOrdIndex; //订单下标\n\n        console.log(upShIndex, 'upShIndex');\n        $scope.taxidFlag = true;\n      }\n\n      var propertyText = '';\n      curOrdProArr.forEach(function (item, i) {\n        propertyText += curOrdProArr[i].PROPERTY;\n      }); //获取隐藏域中可以发的物流数据\n\n      var wlhidedata = curOrdObj.LOGISTICINFO;\n      var wlstuPrice = 0; //存储物流费用\n\n      for (var i = 0; i < wlhidedata.length; i++) {\n        if (wlhidedata[i].logisticName == thisWlFs) {\n          wlstuPrice = wlhidedata[i].price - 0;\n          break;\n        }\n      }\n\n      curOrdObj.POSTAGE = wlstuPrice;\n      var spallmoney = curOrdObj.ORDER_AMOUNT - 0; //给 订单总金额赋值\n\n      var cjAmountMoney = (wlstuPrice + spallmoney).toFixed(2);\n      var wlData = {};\n      var ordId = curOrdObj.ID;\n      var nowIndex = $scope.curOrdIndex;\n      var logistic = thisWlFs;\n      $scope.ordersList[nowIndex].order.POSTAGE = wlstuPrice;\n      wlData.orderNum = ordId;\n      wlData.logisic = logistic;\n      $scope.ordersList.forEach(function (o, i) {\n        if (o.order.ID == ordId) {\n          o.order.LOGISTIC_NAME = logistic;\n          o.order.POSTAGE = wlstuPrice;\n\n          for (var j = 0; j < o.order.LOGISTICINFO.length; j++) {\n            if (thisWlFs == o.order.LOGISTICINFO[j].logisticName) {\n              $scope.ordersList[i].order.cast = o.order.LOGISTICINFO[j].cast == null ? '0' : o.order.LOGISTICINFO[j].cast;\n              break;\n            }\n          }\n        }\n      });\n      console.log($scope.ordersList[nowIndex].order, '$scope.ordersList[nowIndex].order');\n      $('#z-dcl-ord .dcl-ord-selwl').eq($scope.curOrdIndex).val(thisWlFs);\n      $('#z-dcl-ord .z-cjord-wm').eq($scope.curOrdIndex).children('.cj-price-num').children('#cj-a-money').text(cjAmountMoney + 'USD'); // 当前选中的物流\n\n      var _$scope$ordersList$no3 = $scope.ordersList[nowIndex].order.LOGISTICINFO.filter(function (v) {\n        return v.logisticName === thisWlFs;\n      }),\n          _$scope$ordersList$no4 = _slicedToArray(_$scope$ordersList$no3, 1),\n          currentWl = _$scope$ordersList$no4[0];\n\n      $scope.ordersList[nowIndex].order.currentWl_price = currentWl.price;\n      $scope.ordersList[nowIndex].order.currentWl_pack_price = currentWl.packPrice || 0;\n      dsp.postFun('app/order/upOrderLogisics', JSON.stringify(wlData), function (data) {\n        $scope.selectWlFlag = false;\n\n        if (data.data.result) {\n          for (var j = 0; j < $scope.remarkList.length; j++) {\n            if (logistic == $scope.remarkList[j].nameen) {\n              if ($scope.remarkList[j].remark) {\n                $scope.ordersList[nowIndex].order.remark = $scope.remarkList[j].remark.toString().replace(/<br>/g, '');\n              } else {\n                $scope.ordersList[nowIndex].order.remark = $scope.remarkList[j].remark;\n              }\n\n              break;\n            }\n          }\n\n          if (thisWlFs == 'ePacket' && (propertyText.indexOf(\"BATTERY\") >= 0 || propertyText.indexOf(\"ELECTRONIC\") >= 0 || propertyText.indexOf(\"HAVE_CREAM\") >= 0 || propertyText.indexOf(\"HAVE_MAGNETISM\") >= 0)) {\n            $scope.ordersList[nowIndex].order.remark = 'We have to use a special ePacket channel to ship this order as it contains sensitive material like: battery, liquid, cream, magnet etc. The shipping cost will be 15% higher than normal ePacket.';\n          }\n\n          for (var i = 0; i < wlhidedata.length; i++) {\n            //如果有偏远费用 提示的优先级最高\n            if (wlhidedata[i].logisticName == thisWlFs) {\n              if (wlhidedata[i]['remoteFee'] > 0) {\n                $scope.ordersList[nowIndex].order.remark = 'Additional Charges for Remote Address: ' + wlhidedata[i]['remoteFee'] + 'USD';\n              }\n            }\n          }\n        }\n      }, function (data) {\n        console.log(data);\n      });\n    }; //确定填写税号\n\n\n    $scope.sureShFun = function () {\n      console.log(upShId);\n      console.log(upShIndex);\n\n      if (!$scope.taixeVal) {\n        layer.msg('Please enter the tax number');\n        return;\n      }\n\n      layer.load(2);\n      var uptaxid = {};\n      uptaxid.cjorderid = upShId;\n      uptaxid.taxid = $scope.taixeVal;\n      console.log(JSON.stringify(uptaxid));\n      dsp.postFun('app/order/updateTaxid', JSON.stringify(uptaxid), function (data) {\n        console.log(data);\n        layer.closeAll(\"loading\");\n\n        if (data.data.code == 1) {\n          $scope.taxidFlag = false;\n          layer.msg('Add Success');\n          $scope.ordersList[upShIndex].order.taxidExtend = $scope.taixeVal;\n          $scope.taixeVal = '';\n        } else {\n          layer.msg('Add Failed');\n        }\n      }, function (data) {\n        console.log(data);\n        layer.closeAll(\"loading\");\n      });\n    };\n\n    $scope.upShBtnFun = function (item, index) {\n      $scope.taxidFlag = true;\n      upShId = item.ID;\n      upShIndex = index;\n    };\n\n    $scope.overOption1 = function (item) {\n      $scope.remark = '';\n      $scope.bulkWlList.forEach(function (o, i) {\n        if (item.order.LOGISTIC_NAME == o.nameen) {\n          $scope.remark = o.remark;\n        }\n      });\n\n      if ($scope.remark) {\n        item.isremark = true;\n      }\n    };\n\n    $scope.overOption2 = function (item) {\n      item.isremark = false;\n    }; //留言功能\n\n\n    $scope.editnoteFlag = false;\n    var changenoteid = '';\n    var $noteObj = {};\n    var $hidenoteObj = {};\n\n    $scope.editNote = function (item, $event) {\n      // $event.stopPropagation();\n      $scope.editnoteFlag = true;\n      changenoteid = item.ID;\n      var textstr = '<textarea type=\"text\" id=\"dcl-note\"></textarea>';\n\n      if (item.NOTE_ATTRIBUTES == '' && $($event.target).parent().parent().find('#dcl-note').length == 0 || item.NOTE_ATTRIBUTES == null && $($event.target).parent().parent().find('#dcl-note').length == 0) {\n        //&&$($event.target).parent().siblings('#dcl-note')==undefined\n        $($event.target).parent().parent().prepend(textstr); // alert('创建一个文本框')\n      }\n\n      $hidenoteObj = $($event.target).parent().siblings('.hide-note-p'); //获取隐藏域的笔记内容\n\n      $('.editmess-text').val($hidenoteObj.text()); //给留言框赋当前值\n\n      $noteObj = $($event.target).parent().siblings('#dcl-note'); //获取当前的留言框\n      // return false;\n    }; //留言的取消按钮\n\n\n    $scope.cancelmessFun = function () {\n      $scope.editnoteFlag = false;\n      $('.editmess-text').val('');\n      $noteObj.attr('disabled', 'true');\n    }; //确定留言功能\n\n\n    $scope.entermessFun = function () {\n      var noteText = $.trim($('.editmess-text').val());\n      $hidenoteObj.text(noteText); //给隐藏域里笔记内容赋值\n\n      console.log(noteText);\n      var noteData = {};\n      noteData.orderNum = changenoteid;\n      noteData.note = noteText;\n      console.log(noteText);\n      console.log(noteData);\n      console.log($noteObj);\n      dsp.postFun('app/order/upOrderNote', JSON.stringify(noteData), function (data) {\n        $scope.editnoteFlag = false; //关闭留言弹窗\n\n        $noteObj.removeAttr('disabled');\n        $noteObj.val(noteText); //给修改的留言赋值\n\n        $noteObj.attr('disabled', 'true');\n        console.log(data);\n      }, function (data) {\n        console.log(data);\n      });\n    }; //国家切换，税收显示\n\n\n    $scope.showTaxid = false;\n\n    $scope.cityChange = function (city) {\n      $scope.addCountryCode = city.substr(0, 2);\n      $scope.logisticsWay();\n      console.log($scope.addCountryCode);\n    }; // $scope.countrySelect = (res) => {\n    //     console.log(res)\n    // }\n    //数组去重\n\n\n    function unique(arr) {\n      var result = new Map();\n      return arr.filter(function (a) {\n        return !result.has(a) && result.set(a, 1);\n      });\n    } //修改地址\n\n\n    $scope.modefyAddFun = function (pro, item, index) {\n      console.log(item);\n      console.log(pro);\n      $scope.property = []; //商品属性\n\n      $scope.productTypes = []; //商品类型\n\n      $scope.productOrdSku = []; //商品sku\n\n      $scope.productPrice = []; //商品价格\n\n      $scope.addModefyFlag = true;\n      $scope.addItemId = item.ID;\n      $scope.addItemIndex = index;\n      $scope.address1 = item.SHIPPING_ADDRESS; //地址\n\n      $scope.address2 = item.shippingAddress2;\n      $scope.addCity = item.CITY; //城市\n\n      $scope.addProvince = item.PROVINCE;\n      $scope.addZip = item.ZIP; //邮编\n\n      $scope.addPhone = item.PHONE;\n      $scope.addName = item.CUSTOMER_NAME;\n      $scope.addTaxid = item.dutyNo; //税号\n\n      $scope.addLogisiticName = item.LOGISTIC_NAME; //选择的发货地址\n\n      $scope.addAreaId = item.areaId; //发货地区Id\n\n      $scope.updateId = item.areaId;\n      $scope.addLogisiticinfo = item.LOGISTICINFO; //发货仓列表\n\n      $scope.addOrderWeight = item.ORDERWEIGHT; //商品总重量\n\n      $scope.addQuantity = item.ORDER_QUANTITY; //商品总数量\n\n      $scope.addCountryCode = item.COUNTRY_CODE; //目的国家\n\n      $scope.addStartCountry = item.startCountryCode; //发货国家缩写\n\n      $scope.addVolume = item.volume; //商品体积\n\n      $scope.customerId = item.MERCHANTN_NUMBER; //客户id\n\n      $scope.parameter = [{\n        orderId: $scope.addItemId,\n        transferAreaId: $scope.addAreaId\n      }]; //更新发货仓列表\n\n      $(\"#init_select\").val(item.areaId).select2();\n      $('#init_select3').select2();\n      var enName = countryEnName(item.COUNTRY_CODE);\n      $scope.countryEnName = enName;\n      console.log($scope.countryEnName);\n      console.log(enName);\n\n      if (enName) {\n        $scope.couneryInfo = item.COUNTRY_CODE + '#' + enName; //国家\n\n        $(\"#init_select2\").val(item.COUNTRY_CODE + '#' + enName).select2();\n      } else {\n        $scope.couneryInfo = '';\n      }\n\n      console.log($scope.couneryInfo);\n      pro.forEach(function (item) {\n        $scope.property.push(item.PROPERTY); //添加商品属性\n\n        $scope.productTypes.push(item.product_type); //添加商品类型\n\n        $scope.productOrdSku.push(item.SKU); //添加商品sku\n\n        $scope.productPrice.push(item.PRICE);\n      });\n      $scope.property = $scope.property.join(',').split(',');\n      $scope.property = unique($scope.property);\n      $scope.productPrice.sort();\n      $scope.maxPrice = $scope.productPrice[$scope.productPrice.length - 1];\n      $scope.phoneErr = false;\n      $scope.zipErr = false;\n      $scope.taxidErr = false;\n      $scope.opinion().then();\n    };\n\n    $scope.checkPhone = function (phone) {\n      phone = phone.replace(/[^\\d\\+\\-\\(\\)]/g, \"\");\n      $scope.addPhone = phone;\n    };\n\n    function countryEnName(code) {\n      console.log(code);\n      var len = $scope.countryList.length;\n      console.log(len);\n      var enName;\n\n      if (len > 0) {\n        for (var i = 0; i < len; i++) {\n          if (code == $scope.countryList[i].ID) {\n            enName = $scope.countryList[i].NAME_EN;\n            break;\n          }\n        }\n      }\n\n      return enName;\n    } //改变发货仓,请求物流\n\n\n    $scope.changeArea = function (areaId) {\n      $scope.addLogisiticName = '';\n      $scope.parameter[0].transferAreaId = areaId;\n      console.log(areaId);\n      $scope.areaList.forEach(function (item) {\n        if (item.areaId === +areaId) {\n          console.log(item.countryCode);\n          $scope.addStartCountry = item.countryCode;\n        }\n      });\n      $scope.logisticsWay();\n      console.log($scope.addStartCountry);\n    };\n\n    $scope.wuliuCode = []; //改变物流方式\n\n    $scope.changeLogisitic = function () {\n      if ($scope.addLogisiticinfo) {\n        var dataIndex = $scope.addLogisiticinfo.findIndex(function (item) {\n          return item.nameEn === $scope.addLogisiticName;\n        });\n\n        if (dataIndex > -1) {\n          var obj = $scope.addLogisiticinfo[dataIndex];\n          var index = obj.ruleTips.findIndex(function (i) {\n            return i.msgCode.split('')[0] === '2';\n          });\n\n          if (index > -1 || $scope.addTaxid) {\n            $scope.showTaxid = true;\n\n            if (!$scope.addTaxid) {\n              layer.msg('Please enter the tax ID.');\n            }\n          } else {\n            $scope.showTaxid = false;\n          }\n        }\n      }\n    }; //请求物流接口，获取物流方式\n\n\n    $scope.logisticsWay = function () {\n      var optionList = {\n        srcAreaCode: $scope.addStartCountry,\n        destAreaCode: $scope.addCountryCode,\n        weight: $scope.addOrderWeight,\n        //商品重量\n        productProp: $scope.property,\n        //商品属性\n        phone: $scope.addPhone,\n        zip: $scope.addZip,\n        dutyNo: $scope.addTaxid,\n        //do it\n        productTypes: $scope.productTypes,\n        //商品类型\n        skuList: $scope.productOrdSku,\n        //商品sku\n        amount: $scope.maxPrice,\n        uid: $scope.addItemId,\n        volume: $scope.addVolume,\n        //商品体积\n        platforms: '',\n        //平台\n        customerCode: $scope.customerId //客户id\n\n      };\n      console.log(optionList);\n      console.log(JSON.stringify(optionList));\n\n      if (!$scope.addTaxid) {\n        $scope.showTaxid = false;\n      }\n\n      if (!$scope.addLogisiticName) {\n        $scope.showTaxid = false;\n        layer.msg('Please select a shipping method.');\n      }\n\n      return new Promise(function (resolve, reject) {\n        dsp.postFun('freightService/cujiaLogisticsFreight/freight/option/list', JSON.stringify(optionList), function (res) {\n          $scope.arrayLogistics = res.data.data;\n          $scope.addLogisiticinfo = $scope.arrayLogistics;\n\n          if ($scope.addLogisiticinfo) {\n            var dataIndex = $scope.addLogisiticinfo.findIndex(function (item) {\n              return item.nameEn === $scope.addLogisiticName;\n            });\n\n            if (dataIndex > -1) {\n              var obj = $scope.addLogisiticinfo[dataIndex];\n              var index = obj.ruleTips.findIndex(function (i) {\n                return i.msgCode.split('')[0] === '2';\n              });\n\n              if (!$scope.addLogisiticName) {\n                return;\n              }\n\n              if (index > -1) {\n                $scope.showTaxid = true;\n                resolve(true);\n              } else if ($scope.showTaxid && !$scope.addTaxid) {\n                layer.msg('Please enter the tax ID.');\n                resolve(true);\n              } else if ($scope.addTaxid) {\n                $scope.showTaxid = true;\n                resolve(true);\n              } else {\n                $scope.showTaxid = false;\n              }\n            }\n          }\n\n          resolve(false);\n        });\n      });\n    }; //校验判断 校验城市地址邮编等发生变化了给发货方式重新赋值\n\n\n    $scope.opinion = function () {\n      return new Promise(function (resolve, reject) {\n        dsp.closeLoad();\n\n        if (!$scope.address1) {\n          layer.msg('Please enter the address.');\n          resolve(false);\n        } else if (!$scope.addCity) {\n          layer.msg('Please enter the city.');\n          resolve(false);\n        } else if (!$scope.addName) {\n          layer.msg('Please enter name.');\n          resolve(false);\n        } else if (!$scope.couneryInfo) {\n          layer.msg('Please select a country.');\n          resolve(false);\n        } else {\n          $scope.logisticsWay().then(function (data) {\n            if (data) {\n              if ($scope.showTaxid && !$scope.addTaxid) {\n                layer.msg('Please enter the tax ID.');\n                resolve(false);\n              } else {\n                resolve(true);\n              }\n            } else {\n              resolve(true);\n            }\n          });\n        }\n      });\n    }; //失去光标校验\n\n\n    $scope.lost = function () {\n      console.log('lost');\n      $scope.opinion().then();\n    }; //确认编辑\n\n\n    $scope.sureModeFun = function () {\n      layer.load(2);\n      console.log($scope.addItemIndex);\n      var addUpdata = {};\n      addUpdata.id = $scope.addItemId;\n      addUpdata.shipping_address = $scope.address1;\n      addUpdata.shipping_address2 = $scope.address2;\n      addUpdata.city = $scope.addCity;\n      addUpdata.province = $scope.addProvince;\n      addUpdata.zip = $scope.addZip;\n      addUpdata.phone = $scope.addPhone;\n      addUpdata.name = $scope.addName;\n      addUpdata.taxid = $scope.addTaxid;\n      addUpdata.startCountryCode = $scope.addStartCountry; //发货国家缩写\n\n      addUpdata.LOGISTIC_NAME = $scope.addLogisiticName; //发货物流名称\n\n      addUpdata.areaId = $scope.addAreaId; //发货区域id\n\n      addUpdata.country = $scope.countryEnName; //国家\n\n      addUpdata.countryCode = $scope.addCountryCode; //目的国家缩写\n\n      addUpdata.type = '1';\n      console.log(addUpdata);\n      console.log(JSON.stringify(addUpdata));\n\n      if ($scope.couneryInfo) {\n        addUpdata.country = $scope.couneryInfo.split('#')[1];\n        addUpdata.countryCode = $scope.couneryInfo.split('#')[0];\n      }\n\n      $scope.opinion().then(function (data) {\n        layer.load(2);\n\n        if (data) {\n          //验证成功后请求Shipping From 和 update接口\n          console.log('1');\n          dsp.postFun('order/order/orderTransferArea', {\n            transferOrderDetailPMS: $scope.parameter,\n            routeDiscounteTransfer: false\n          }, function (data) {\n            discounteTransferFlag = false;\n\n            if (data.data.statusCode == 200) {\n              closebulkWareFlag();\n              $scope.zchecked_all = false;\n              dsp.postFun('app/order/updateFiled', JSON.stringify(addUpdata), function (_ref) {\n                var data = _ref.data;\n                console.log(data.ruleMsg);\n                layer.closeAll(\"loading\");\n\n                if (data.msgCode === '505') {\n                  $scope.phoneErr = data.ruleMsg.filter(function (item) {\n                    return item.type === 'phone';\n                  }) || [];\n                  $scope.zipErr = data.ruleMsg.filter(function (item) {\n                    return item.type === 'zip';\n                  }) || [];\n                  $scope.taxidErr = data.ruleMsg.filter(function (item) {\n                    return item.type === 'dutyNo';\n                  }) || [];\n                } else if (data.result > 0) {\n                  $scope.addModefyFlag = false;\n                  layer.msg('Modified Successfully');\n                  $scope.addressOrderList = [];\n                  $scope.checkAddressList = [];\n                  freshList();\n                } else {\n                  layer.msg('Modify failed');\n                }\n              }, function (data) {\n                dsp.closeLoad();\n                console.log(data);\n              });\n            } else {\n              layer.closeAll(\"loading\");\n            }\n          });\n        } else {\n          dsp.closeLoad();\n        }\n      });\n    }; //封装更新列表\n    //提交过程中更新Shopping From\n\n\n    $scope.updateSF = function () {\n      dsp.postFun('order/order/orderTransferArea', {\n        transferOrderDetailPMS: $scope.parameter,\n        routeDiscounteTransfer: false\n      }, function (data) {\n        discounteTransferFlag = false;\n        layer.closeAll(\"loading\");\n\n        if (data.data.statusCode == 200) {\n          closebulkWareFlag();\n          $scope.zchecked_all = false; // layer.msg(\"Successfully changed shipping area！\")\n        } else {\n          layer.msg(data.data.message);\n        }\n      });\n    };\n\n    var bs = new Base64();\n    var codeInlocal = localStorage.getItem('code');\n    console.log(codeInlocal);\n    var btnWidth = 0;\n    var btnHeight = 0;\n\n    if (codeInlocal) {\n      var timer = setInterval(function () {\n        var myDate = new Date();\n        var tipHour = myDate.getHours(); //获取当前小时数(0-23)\n\n        var tipMinute = myDate.getMinutes(); //获取当前分钟数(0-59)\n\n        var tipSecond = myDate.getSeconds(); //获取当前秒数(0-59)\n\n        $('#tiphour').text(tipHour + ':');\n        $('#tipminute').text(tipMinute + ':');\n        $('#tipsecond').text(tipSecond);\n        codeInlocal = localStorage.getItem('code');\n        $scope.tipsOrdStatues = localStorage.getItem('ordTips');\n\n        if (codeInlocal == '200') {\n          // $scope.refreshBtnFlag = true;\n          $('.refresh-btn').show();\n          clearInterval(timer);\n          console.log(myDate);\n          $scope.tipsOrdStatues = localStorage.getItem('ordTips');\n          $('.titOrdTips').text($scope.tipsOrdStatues);\n        }\n      }, 1000);\n    } //刷新价格\n\n\n    $scope.freshBtnFun = function () {\n      $scope.productList2 = [];\n      $scope.searchPriceBySKU = '';\n      getProductList2();\n      $scope.freshPriceFlag = true;\n      $('#checkAll2').attr('src', 'static/image/public-img/iconxz.png').removeClass('checkAll');\n    };\n\n    $scope.freshPriceFun = function (sku) {\n      $scope.freshPriceFlag = false;\n      var freshData = {};\n      freshData.sku = sku;\n      dsp.postFun('app/order/refreshOrderPrice', JSON.stringify(freshData), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n\n        if (data.data.result) {\n          layer.msg('Change success');\n          freshList();\n        } else {\n          layer.msg('Change failed');\n        }\n      }, function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n      });\n    }; //刷新物流\n\n\n    $scope.freshlogisticBtnFun = function () {\n      $scope.productList = [];\n      $scope.searchWuliuBySKU = '';\n      getProductList();\n      $scope.freshLogisticsFlag = true;\n      $('#checkAll').attr('src', 'static/image/public-img/iconxz.png').removeClass('checkAll');\n    };\n\n    $scope.pagesize2 = '5';\n    $scope.pagesize3 = '5';\n    $scope.pagenum2 = '1';\n    $scope.pagenum3 = '1';\n\n    $scope.searchWuliu = function () {\n      $scope.pagenum2 = '1';\n      getProductList();\n    };\n\n    $scope.searchPrice = function () {\n      $scope.pagenum3 = '1';\n      getProductList2();\n    };\n\n    function getProductList2() {\n      var sendData = {\n        pageSize: $scope.pagesize3,\n        page: $scope.pagenum3,\n        sku: $scope.searchPriceBySKU ? $scope.searchPriceBySKU : ''\n      };\n      dsp.load();\n      dsp.postFun('app/order/getSkuByMerchantn', JSON.stringify(sendData), function (data) {\n        console.log(data.data);\n        dsp.closeLoad();\n\n        if (data.data.statusCode == 'CODE_200') {\n          var result = data.data.result;\n          $.each(result, function (i, v) {\n            var sku = v.sku;\n            var arr = sku.split('-')[0];\n            v.sku = arr;\n          });\n          $scope.productList2 = result;\n          $scope.totalNum3 = data.data.count;\n          pageFun3();\n        } else {\n          layer.msg('Failed to get list of items');\n        }\n      });\n    }\n\n    function getProductList() {\n      var sendData = {\n        pageSize: $scope.pagesize2,\n        page: $scope.pagenum2,\n        sku: $scope.searchWuliuBySKU ? $scope.searchWuliuBySKU : ''\n      };\n      dsp.load();\n      dsp.postFun('app/order/getSkuByMerchantn', JSON.stringify(sendData), function (data) {\n        console.log(data.data);\n        dsp.closeLoad();\n\n        if (data.data.statusCode == 'CODE_200') {\n          var result = data.data.result;\n          $.each(result, function (i, v) {\n            // console.log(i,v)\n            var sku = v.sku;\n            var arr = sku.split('-')[0];\n            v.sku = arr;\n          });\n          $scope.productList = result;\n          $scope.totalNum2 = data.data.count;\n          pageFun2();\n        } else {\n          layer.msg('Failed to get list of items');\n        }\n      });\n    }\n\n    function pageFun2() {\n      console.log('11111');\n      $(\".pagegroup\").jqPaginator({\n        totalCounts: $scope.totalNum2 || 1,\n        pageSize: $scope.pagesize2 * 1,\n        visiblePages: 5,\n        currentPage: $scope.pagenum2 * 1,\n        activeClass: 'current',\n        first: '<a class=\"prev\" href=\"javascript:void(0);\">&lt;&lt;<\\/a>',\n        prev: '<a class=\"prev\" href=\"javascript:void(0);\">&lt;<\\/a>',\n        next: '<a class=\"next\" href=\"javascript:void(0);\">&gt;<\\/a>',\n        last: '<a class=\"next\" href=\"javascript:void(0);\">&gt;&gt;<\\/a>',\n        page: '<a href=\"javascript:void(0);\">{{page}}<\\/a>',\n        onPageChange: function onPageChange(n, type) {\n          if (type == 'init') {\n            return;\n          }\n\n          $scope.pagenum2 = n + '';\n          getProductList();\n        }\n      });\n    }\n\n    function pageFun3() {\n      console.log('11111');\n      $(\".pagegroup2\").jqPaginator({\n        totalCounts: $scope.totalNum3 || 1,\n        pageSize: $scope.pagesize3 * 1,\n        visiblePages: 5,\n        currentPage: $scope.pagenum3 * 1,\n        activeClass: 'current',\n        first: '<a class=\"prev\" href=\"javascript:void(0);\">&lt;&lt;<\\/a>',\n        prev: '<a class=\"prev\" href=\"javascript:void(0);\">&lt;<\\/a>',\n        next: '<a class=\"next\" href=\"javascript:void(0);\">&gt;<\\/a>',\n        last: '<a class=\"next\" href=\"javascript:void(0);\">&gt;&gt;<\\/a>',\n        page: '<a href=\"javascript:void(0);\">{{page}}<\\/a>',\n        onPageChange: function onPageChange(n, type) {\n          if (type == 'init') {\n            return;\n          }\n\n          $scope.pagenum3 = n + '';\n          getProductList2();\n        }\n      });\n    } //跳页\n\n\n    $scope.pagenumchange3 = function () {\n      var totalPage = Math.ceil(($scope.totalNum3 - 0) / ($scope.pagesize3 - 0));\n      console.log(totalPage);\n\n      if ($scope.pagenum3 > totalPage || $scope.pagenum3 < 1) {\n        if ($scope.pagenum3 < 1) {\n          $scope.pagenum3 = '1';\n        }\n\n        layer.msg('Page does not exist.');\n        return;\n      }\n\n      getProductList2();\n    }; //条数改变\n\n\n    $scope.pagesizechange3 = function () {\n      $scope.pagenum3 = \"1\";\n      console.log($scope.pagesize);\n      getProductList2();\n    }; //跳页\n\n\n    $scope.pagenumchange2 = function () {\n      var totalPage = Math.ceil(($scope.totalNum2 - 0) / ($scope.pagesize2 - 0));\n      console.log(totalPage);\n\n      if ($scope.pagenum2 > totalPage || $scope.pagenum2 < 1) {\n        if ($scope.pagenum2 < 1) {\n          $scope.pagenum2 = '1';\n        }\n\n        layer.msg('Page does not exist.');\n        return;\n      }\n\n      getProductList();\n    }; //条数改变\n\n\n    $scope.pagesizechange2 = function () {\n      $scope.pagenum2 = \"1\";\n      console.log($scope.pagesize);\n      getProductList();\n    }; //全选\n\n\n    $('#checkAll').click(function () {\n      if ($(this).hasClass('checkAll')) {\n        $(this).attr('src', 'static/image/public-img/iconxz.png').removeClass('checkAll');\n        $('.fresh-body1').find('.checkImg').attr('src', 'static/image/public-img/iconxz.png').removeClass('checked');\n      } else {\n        $(this).attr('src', 'static/image/public-img/multiple11.png').addClass('checkAll');\n        $('.fresh-body1').find('.checkImg').attr('src', 'static/image/public-img/multiple11.png').addClass('checked');\n      }\n    });\n    $('#checkAll2').click(function () {\n      if ($(this).hasClass('checkAll')) {\n        $(this).attr('src', 'static/image/public-img/iconxz.png').removeClass('checkAll');\n        $('.fresh-body2').find('.checkImg').attr('src', 'static/image/public-img/iconxz.png').removeClass('checked');\n      } else {\n        $(this).attr('src', 'static/image/public-img/multiple11.png').addClass('checkAll');\n        $('.fresh-body2').find('.checkImg').attr('src', 'static/image/public-img/multiple11.png').addClass('checked');\n      }\n    });\n    $('.fresh-body1').on('click', '.checkImg', function () {\n      if ($(this).hasClass('checked')) {\n        $(this).attr('src', 'static/image/public-img/iconxz.png').removeClass('checked');\n      } else {\n        $(this).attr('src', 'static/image/public-img/multiple11.png').addClass('checked');\n      }\n\n      var len = $('.fresh-body1 .checkImg').length;\n      var len2 = $('.fresh-body1 .checkImg.checked').length;\n\n      if (len == len2) {\n        $('#checkAll').attr('src', 'static/image/public-img/multiple11.png').addClass('checkAll');\n      } else {\n        $('#checkAll').attr('src', 'static/image/public-img/iconxz.png').removeClass('checkAll');\n      }\n    });\n    $('.fresh-body2').on('click', '.checkImg', function () {\n      if ($(this).hasClass('checked')) {\n        $(this).attr('src', 'static/image/public-img/iconxz.png').removeClass('checked');\n      } else {\n        $(this).attr('src', 'static/image/public-img/multiple11.png').addClass('checked');\n      }\n\n      var len = $('.fresh-body2 .checkImg').length;\n      var len2 = $('.fresh-body2 .checkImg.checked').length;\n\n      if (len == len2) {\n        $('#checkAll2').attr('src', 'static/image/public-img/multiple11.png').addClass('checkAll');\n      } else {\n        $('#checkAll2').attr('src', 'static/image/public-img/iconxz.png').removeClass('checkAll');\n      }\n    });\n\n    $scope.freshLogisFun = function (sku) {\n      layer.load(2);\n      $scope.freshLogisticsFlag = false;\n      var freshData = {};\n      freshData.sku = sku;\n      dsp.postFun('app/order/refreshLogisticsPrice', JSON.stringify(freshData), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n\n        if (data.data.result) {\n          layer.msg('Change success');\n          freshList();\n        } else {\n          layer.msg('Change failed');\n        }\n      }, function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n      });\n    };\n\n    function freshList() {\n      var searchinpVal = $.trim($('.ord-search-inp').val());\n      $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n      $scope.ordersList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var orData = {};\n      tjFun(orData);\n      orData.data = JSON.stringify(orData.data);\n      console.log(JSON.stringify(orData));\n      dsp.postFun('app/order/queryOrders', JSON.stringify(orData), dclsFun, dcleFun);\n\n      function dclsFun(data) {\n        var list1 = data.data.result;\n        $scope.list = data.data.result;\n        $scope.list = JSON.parse(list1);\n        $scope.ordersList = $scope.list.ordersList;\n        console.log(data);\n        $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n        if ($scope.pcountN > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          addNotSjFun();\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n        logisRemark($scope.list);\n        importFun(); //分页函数\n\n        numFun(); //调用给订单赋值的函数\n      }\n\n      function dcleFun() {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      }\n    }\n\n    $('#updata-btn-wrap').mouseenter(function () {\n      $('.ord-updata-div').show();\n    });\n    $('#updata-btn-wrap').mouseleave(function () {\n      $('.ord-updata-div').hide();\n    });\n\n    $scope.refershFun = function () {\n      $scope.syStuFlag = false;\n      $('.reordstu-dlist').animate({\n        height: '275px'\n      }, 300);\n      $scope.syStu = 0;\n      $scope.resOrdStu = 0;\n      $('#dcl-sel').val('100');\n      $scope.ordersList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var orData = {};\n      tjFun(orData);\n      orData.data = JSON.stringify(orData.data);\n      dsp.postFun('app/order/queryOrders', JSON.stringify(orData), dclsFun, dcleFun);\n\n      function dclsFun(data) {\n        console.log(data.data);\n        var list1 = data.data.result;\n        $scope.list = data.data.result;\n        $scope.list = JSON.parse(list1);\n        $scope.ordersList = $scope.list.ordersList;\n        $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n        if ($scope.pcountN > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          addNotSjFun();\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n        logisRemark($scope.list);\n        importFun(); //分页函数\n\n        numFun(); //调用给订单赋值的函数\n      }\n\n      function dcleFun() {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      }\n    }; //设置默认时间\n\n\n    function GetDateStr(AddDayCount) {\n      var dd = new Date();\n      dd.setDate(dd.getDate() + AddDayCount); //获取AddDayCount天后的日期\n\n      var y = dd.getFullYear();\n      var m = dd.getMonth() + 1; //获取当前月份的日期\n\n      var d = dd.getDate();\n\n      if (m < 10) {\n        m = '0' + m;\n      }\n\n      if (d < 10) {\n        d = '0' + d;\n      }\n\n      return y + \"-\" + m + \"-\" + d;\n    }\n\n    var aDate = GetDateStr(-45);\n    var enDate = GetDateStr(0);\n    $(\"#cj-stime\").val(aDate); //关键语句\n    // $(\"#cj-etime\").val('Now');   //关键语句\n\n    var orData = {};\n    orData.userId = bs.decode(localStorage.getItem('userId'));\n    orData.data = {};\n    orData.data.status = '1'; //请求的订单状态\n\n    orData.data.canhandler = 'y';\n    orData.data.page = 1; //请求的第几页   10*1-10Ò³Âë\n\n    orData.data.limit = 100; //每页限制的订单条数\n    //获取时间参数\n\n    var yStoresTime = $('#y-ord-sdate').val();\n    var yStoreeTime = $('#y-ord-edate').val();\n    var cjsTime = $('#cj-stime').val();\n    var cjeTime = $('#cj-etime').val();\n    orData.data.storeOrderDateBegin = yStoresTime; //店铺开始时间\n\n    orData.data.storeOrderDateEnd = yStoreeTime; //店铺结束时间\n\n    orData.data.cjOrderDateBegin = cjsTime; //cj开始时间\n\n    orData.data.cjOrderDateEnd = cjeTime; //cj结束时间\n\n    $scope.pageLimit = orData.data.limit;\n    $scope.countNumber = ''; //Ò»¹²¶àÉÙÌõ¶©µ¥\n\n    $scope.list = ''; //¶©µ¥ºÍ²úÆ·\n\n    $scope.orderList = ''; //¶©µ¥µÄÁÐ±íÊý¾Ý\n\n    $scope.productList = ''; //²úÆ·µÄÁÐ±íÊý¾Ý\n\n    $scope.flag = false; //ÅÐ¶Ï×´Ì¬\n    //给待提交订单里的下拉框赋值\n\n    $('#dcl-sel').val('100');\n    $('.direct-orders-ctrltatus-nav').click(function () {\n      bianliangtime++;\n    });\n    var a = $stateParams.idlist;\n\n    if (a) {\n      //console.log(a);\n      var idList = base64.decode(a);\n      console.log(idList);\n      orData.data.orderNumber = idList;\n    }\n\n    orData.data = JSON.stringify(orData.data);\n    $scope.pcountN = 0; //存储待提交订单的总条数 process required\n\n    console.log(JSON.stringify(orData));\n    dsp.postFun('app/order/queryOrders', JSON.stringify(orData), dclsFun, dcleFun);\n\n    function dclsFun(data) {\n      var list1 = data.data.result;\n      $scope.list = JSON.parse(list1);\n      console.log($scope.list.orderList);\n      $scope.shops = $scope.list.shops; //店铺的数组\n\n      delShopFun($scope.shops);\n      var excelShop = {};\n      excelShop.id = 'excel';\n      excelShop.name = 'Excel';\n      excelShop.rNAME = 'Excel';\n      $scope.shops.push(excelShop);\n      console.log($scope.shops);\n      $scope.ordersList = $scope.list.ordersList;\n      console.log($scope.ordersList);\n      console.log($scope.ordersList.orderArea);\n      $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n      console.log($scope.list.allOrderCount2);\n      $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n      if ($scope.pcountN > 0) {\n        dsp.removeNodataPic($('.orders-list'));\n        dsp.closeLoadPercent($('.orders-list'));\n      } else {\n        addNotSjFun();\n        dsp.closeLoadPercent($('.orders-list'));\n      }\n\n      logisRemark($scope.list);\n      importFun(); //分页函数\n\n      numFun(); //调用给订单赋值的函数\n    }\n\n    function dcleFun() {\n      layer.closeAll(\"loading\");\n      dsp.closeLoadPercent($('.orders-list'));\n      dsp.cjMesFun(1);\n    } //给订单状态赋值的函数\n\n\n    function numFun() {\n      $scope.impprocessNum = $scope.ordstatusNum.yi;\n      $scope.cartNum = $scope.ordstatusNum.er;\n      $scope.incompleteNum = $scope.ordstatusNum.san;\n      $scope.cancelNum = $scope.ordstatusNum.si;\n      $scope.refundNum = $scope.ordstatusNum.wu;\n      $scope.allProNum = $scope.ordstatusNum.jiu;\n\n      if ($scope.impprocessNum == 0 && $scope.cartNum == 0 && $scope.incompleteNum == 0 && $scope.cancelNum == 0 && $scope.refundNum == 0) {\n        $scope.dataFound = true; //隐藏没有数据的图片\n\n        $scope.isordFlag = true; //显示关联搜索的内容\n      } else {\n        $scope.isordFlag = false; //隐藏关联搜索的内容\n      }\n    } //给物流加标记 - 物流备注信息分开写 [20-01-19]\n\n\n    function logisRemark(orderData) {\n      dsp.postFun('order/order/logisticsRemarkList', {}, function (res) {\n        var _ref2 = res || {},\n            data = _ref2.data;\n\n        if (data.statusCode == '200') {\n          logisRemarkHandle(Object.assign(orderData, {\n            remark: data.result\n          }));\n        } else {\n          logisRemarkHandle(Object.assign(orderData, {\n            remark: []\n          }));\n        }\n      }, function () {\n        logisRemarkHandle(Object.assign(orderData, {\n          remark: []\n        }));\n      });\n    } //给物流加标记\n\n\n    function logisRemarkHandle(res) {\n      console.log('订单信息 ->', res);\n      $scope.remarkList = res.remark;\n      console.log($scope.remarkList);\n      var listLength = $scope.ordersList.length;\n\n      for (var i = 0; i < listLength; i++) {\n        if ($scope.ordersList[i].order.LOGISTIC_NAME) {\n          for (var j = 0; j < $scope.remarkList.length; j++) {\n            if ($scope.ordersList[i].order.LOGISTIC_NAME == $scope.remarkList[j].nameen) {\n              if ($scope.remarkList[j].remarkstr) {\n                $scope.ordersList[i].order.remark = $scope.remarkList[j].remarkstr.toString().replace(/<br>/g, '');\n              } else {\n                $scope.ordersList[i].order.remark = $scope.remarkList[j].remark;\n              }\n\n              break; // console.log($scope.ordersList[i].order)\n            }\n          }\n\n          for (var k = 0; k < $scope.ordersList[i].order.LOGISTICINFO.length; k++) {\n            if ($scope.ordersList[i].order.LOGISTIC_NAME == $scope.ordersList[i].order.LOGISTICINFO[k].logisticName) {\n              $scope.ordersList[i].order.cast = $scope.ordersList[i].order.LOGISTICINFO[k].cast == null ? '0' : $scope.ordersList[i].order.LOGISTICINFO[k].cast;\n              break;\n            }\n          }\n\n          if ($scope.ordersList[i].order.LOGISTICINFO) {\n            for (var n = 0, nLen = $scope.ordersList[i].order.LOGISTICINFO.length; n < nLen; n++) {\n              if ($scope.ordersList[i].order.LOGISTIC_NAME == $scope.ordersList[i].order.LOGISTICINFO[n].logisticName && $scope.ordersList[i].order.LOGISTICINFO[n].remoteFee > 0) {\n                $scope.ordersList[i].order.remark = 'Additional Charges for Remote Address: ' + $scope.ordersList[i].order.LOGISTICINFO[n].remoteFee + 'USD';\n                break;\n              }\n            }\n          }\n        } //地址1包含固定值 限制相应的物流\n\n\n        if ($scope.ordersList[i].order.SHIPPING_ADDRESS && $scope.ordersList[i].order.SHIPPING_ADDRESS.indexOf('Po Box') >= 0) {\n          for (var _l = 0; _l < $scope.ordersList[i].order.LOGISTICINFO.length; _l++) {\n            if ($scope.ordersList[i].order.LOGISTIC_NAME == 'CJ Normal Express') {\n              $scope.ordersList[i].order.LOGISTIC_NAME = null;\n            }\n\n            if ($scope.ordersList[i].order.LOGISTICINFO[_l].logisticName == 'CJ Normal Express') {\n              $scope.ordersList[i].order.LOGISTICINFO.splice(_l, 1);\n              break;\n            }\n          }\n        } //循环检测epacket带电的订单\n\n\n        if ($scope.ordersList[i].order.LOGISTIC_NAME == 'ePacket') {\n          if ($scope.ordersList[i].product) {\n            for (var j = 0, len = $scope.ordersList[i].product.length; j < len; j++) {\n              if ($scope.ordersList[i].product[j].PROPERTY.indexOf(\"BATTERY\") >= 0 || $scope.ordersList[i].product[j].PROPERTY.indexOf(\"ELECTRONIC\") >= 0 || $scope.ordersList[i].product[j].PROPERTY.indexOf(\"HAVE_CREAM\") >= 0 || $scope.ordersList[i].product[j].PROPERTY.indexOf(\"HAVE_MAGNETISM\") >= 0) {\n                $scope.ordersList[i].order.remark = 'We have to use a special ePacket channel to ship this order as it contains sensitive material like: battery, liquid, cream, magnet etc. The shipping cost will be 15% higher than normal ePacket.';\n                break;\n              }\n            }\n          }\n        } //检测sku\n\n\n        if ($scope.ordersList[i].product) {\n          for (var k = 0, klen = $scope.ordersList[i].product.length; k < klen; k++) {\n            if ($scope.ordersList[i].product[k].SKU.indexOf('CJJJJTJT00947') != -1 || $scope.ordersList[i].product[k].SKU.indexOf('CJJJJTJT00700') != -1) {\n              if ($scope.ordersList[i].order.LOGISTIC_NAME == 'PostNL' || $scope.ordersList[i].order.LOGISTIC_NAME == 'S.F China Domestic') {\n                // console.log('默认是postnl')\n                $scope.ordersList[i].order.LOGISTICINFO = [];\n              } else {\n                if ($scope.ordersList[i].order.LOGISTICINFO) {\n                  // console.log('有备选物流')\n                  for (var l = 0, llen = $scope.ordersList[i].order.LOGISTICINFO.length; l < llen; l++) {\n                    if ($scope.ordersList[i].order.LOGISTICINFO[l].logisticName == 'PostNL' || $scope.ordersList[i].order.LOGISTICINFO[l].logisticName == 'S.F China Domestic') {\n                      $scope.ordersList[i].order.LOGISTIC_NAME = null;\n                      var logInfoArr = [];\n                      logInfoArr.push($scope.ordersList[i].order.LOGISTICINFO[l]);\n                      $scope.ordersList[i].order.LOGISTICINFO = logInfoArr; // console.log('备选有psotnl')\n\n                      break;\n                    } // console.log(l,llen)\n\n\n                    if (l == llen - 1) {\n                      $scope.ordersList[i].order.LOGISTIC_NAME = null;\n                      $scope.ordersList[i].order.LOGISTICINFO = []; // console.log('备选没有psotnl')\n                    }\n                  }\n                } else {// console.log('没有备选物流')\n                  }\n              }\n            }\n\n            if ($scope.ordersList[i].product[k].SKU.indexOf('CJJJJTJT01777') != -1) {\n              if ($scope.ordersList[i].order.LOGISTIC_NAME == 'CJ normal express') {\n                // console.log('默认是CJ normal express')\n                $scope.ordersList[i].order.LOGISTICINFO = [];\n              } else {\n                if ($scope.ordersList[i].order.LOGISTICINFO) {\n                  for (var m = 0, mlen = $scope.ordersList[i].order.LOGISTICINFO.length; m < mlen; m++) {\n                    if ($scope.ordersList[i].order.LOGISTICINFO[m].logisticName == 'CJ normal express') {\n                      $scope.ordersList[i].order.LOGISTIC_NAME = null;\n                      var logInfoArr = [];\n                      logInfoArr.push($scope.ordersList[i].order.LOGISTICINFO[m]);\n                      $scope.ordersList[i].order.LOGISTICINFO = logInfoArr; // console.log('备选有CJ normal express')\n\n                      break;\n                    }\n                  }\n                } else {// console.log('没有备选物流')\n                }\n              }\n            }\n\n            if ($scope.userId == '180c6f9410dd4415b45fba5c2695beee' && $scope.ordersList[i].product[k].SKU.indexOf('CJJZGJYL00009') != -1) {\n              if ($scope.ordersList[i].order.LOGISTIC_NAME == 'Electric PostNL') {\n                // console.log('默认是CJ normal express')\n                $scope.ordersList[i].order.LOGISTICINFO = [];\n              } else {\n                if ($scope.ordersList[i].order.LOGISTICINFO) {\n                  for (var m = 0, mlen = $scope.ordersList[i].order.LOGISTICINFO.length; m < mlen; m++) {\n                    if ($scope.ordersList[i].order.LOGISTICINFO[m].logisticName == 'Electric PostNL') {\n                      $scope.ordersList[i].order.LOGISTIC_NAME = null;\n                      var logInfoArr = [];\n                      logInfoArr.push($scope.ordersList[i].order.LOGISTICINFO[m]);\n                      $scope.ordersList[i].order.LOGISTICINFO = logInfoArr; // console.log('备选有CJ normal express')\n\n                      break;\n                    }\n                  }\n                } else {// console.log('没有备选物流')\n                }\n              }\n            }\n          }\n        }\n      }\n    } //显示大图\n\n\n    $('.orders-table').on('mouseenter', '.sp-smallimg', function () {\n      $(this).siblings('.hide-bigimg').show();\n    });\n    $('.orders-table').on('mouseenter', '.hide-bigimg', function () {\n      $(this).show();\n    });\n    $('.orders-table').on('mouseleave', '.sp-smallimg', function () {\n      $(this).siblings('.hide-bigimg').hide();\n    });\n    $('.orders-table').on('mouseleave', '.hide-bigimg', function () {\n      $(this).hide();\n    }); //批量修改物流 获取国家列表\n\n    dsp.postFun('app/order/getOrderCountry', null, function (data) {\n      console.log(data);\n      $scope.counList = data.data;\n      console.log($scope.counList);\n    }, function (data) {\n      console.log(data);\n    }); //获取物流方式\n\n    dsp.postFun('app/erplogistics/getLogisticType', null, function (data) {\n      console.log(data);\n      $scope.bulkWlList = data.data;\n      console.log($scope.bulkWlList);\n    }, function (data) {\n      console.log(data);\n    });\n    $scope.couneryInfo = '';\n    dsp.postFun('app/logistic/getcountry', null, function (data) {\n      console.log(data);\n\n      if (data.data.statusCode == 200) {\n        var countryObj = JSON.parse(data.data.result);\n        $scope.countryList = countryObj.countryList;\n        console.log($scope.countryList);\n      }\n    }, function (data) {\n      console.log(data);\n    });\n    console.log($scope.couneryInfo);\n    $scope.isChangeFlag = false;\n    $scope.nologistCs = 'y'; //是否无物流 查询没有物流的订单\n    //根据国家查询订单\n\n    $scope.counChangeFun = function () {\n      $scope.ordersList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      console.log($scope.countryName);\n\n      if ($scope.countryName) {\n        //选中国家\n        $scope.isChangeFlag = true;\n        var upwlData = {};\n        tjFun(upwlData);\n        upwlData.data.logisticName = $scope.nologistCs;\n        upwlData.data.country = $scope.countryName;\n        upwlData.data = JSON.stringify(upwlData.data);\n        dsp.postFun('app/order/queryOrders', JSON.stringify(upwlData), function (data) {\n          console.log(data);\n          var list1 = JSON.parse(data.data.result);\n          console.log(list1);\n          $scope.ordersList = list1.ordersList;\n          console.log($scope.ordersList);\n          $scope.pcountN = list1.countNumber; //获取总订单的条数\n\n          console.log($scope.pcountN);\n\n          if ($scope.pcountN > 0) {\n            dsp.removeNodataPic($('.orders-list'));\n            dsp.closeLoadPercent($('.orders-list'));\n          } else {\n            addNotSjFun();\n            dsp.closeLoadPercent($('.orders-list'));\n          }\n\n          logisRemark(list1);\n          importFun(); //分页函数\n        }, function (err) {\n          layer.closeAll(\"loading\");\n          dsp.closeLoadPercent($('.orders-list'));\n          dsp.cjMesFun(1);\n        });\n      } else {\n        //所有国家\n        $scope.isChangeFlag = false;\n        var upwlData = {};\n        tjFun(upwlData);\n        upwlData.data.logisticName = '';\n        upwlData.data.country = '';\n        upwlData.data = JSON.stringify(upwlData.data);\n        dsp.postFun('app/order/queryOrders', JSON.stringify(upwlData), function (data) {\n          console.log(data);\n          var list1 = JSON.parse(data.data.result);\n          console.log(list1);\n          $scope.ordersList = list1.ordersList;\n          console.log($scope.ordersList);\n          $scope.pcountN = list1.countNumber; //获取总订单的条数\n\n          if ($scope.pcountN > 0) {\n            dsp.removeNodataPic($('.orders-list'));\n            dsp.closeLoadPercent($('.orders-list'));\n          } else {\n            addNotSjFun();\n            dsp.closeLoadPercent($('.orders-list'));\n          }\n\n          logisRemark(list1);\n          importFun(); //分页函数\n        }, function (err) {\n          layer.closeAll(\"loading\");\n          dsp.closeLoadPercent($('.orders-list'));\n          dsp.cjMesFun(1);\n        });\n      }\n    };\n\n    $scope.ischeckFlag = true; //是否选中\n\n    $scope.ischekFun = function (ev) {\n      $(ev.target).prop('checked', 'true');\n      $scope.ischeckFlag = !$scope.ischeckFlag;\n      console.log($scope.ischeckFlag);\n\n      if ($scope.ischeckFlag) {\n        $scope.ischeckFlag = true;\n        $scope.nologistCs = 'y';\n        $scope.counChangeFun();\n      } else {\n        $scope.ischeckFlag = false;\n        $scope.nologistCs = '';\n        $scope.counChangeFun();\n      }\n    }; //修改物流\n\n\n    $scope.bulkChangeWlFun = function () {\n      if ($scope.logisName) {\n        $scope.ordersList = [];\n        dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n        var ids = '';\n        $('#z-dcl-ord .zcheckbox').each(function () {\n          ids += $(this).siblings('.dclord-sys-time').text() + ',';\n        });\n        console.log($scope.logisName);\n        console.log(ids);\n        var xgwlData = {};\n        xgwlData.logisic = $scope.logisName;\n        xgwlData.orderNums = ids;\n        console.log(JSON.stringify(xgwlData));\n        dsp.postFun('app/order/upOrderLogisics', JSON.stringify(xgwlData), function (data) {\n          console.log(data);\n\n          if (data.data.result == true) {\n            // alert(123)\n            $scope.logisName = ''; //把物流设置为请选择\n\n            var upwlData = {};\n            tjFun(upwlData);\n            upwlData.data.logisticName = $scope.nologistCs;\n            upwlData.data.country = $scope.countryName;\n            upwlData.data = JSON.stringify(upwlData.data);\n            dsp.postFun('app/order/queryOrders', JSON.stringify(upwlData), function (data) {\n              console.log(data);\n              var list1 = JSON.parse(data.data.result);\n              console.log(list1);\n              $scope.ordersList = list1.ordersList;\n              console.log($scope.ordersList);\n              $scope.pcountN = list1.countNumber; //获取总订单的条数\n\n              if ($scope.pcountN > 0) {\n                dsp.removeNodataPic($('.orders-list'));\n                dsp.closeLoadPercent($('.orders-list'));\n              } else {\n                addNotSjFun();\n                dsp.closeLoadPercent($('.orders-list'));\n              }\n\n              logisRemark(list1);\n              importFun(); //分页函数\n            }, function (err) {\n              layer.closeAll(\"loading\");\n              dsp.closeLoadPercent($('.orders-list'));\n              dsp.cjMesFun(1);\n            });\n          } else {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            layer.msg('Modify the logistics failure');\n          }\n        }, function (data) {\n          layer.closeAll(\"loading\");\n          dsp.closeLoadPercent($('.orders-list'));\n          console.log(data);\n        });\n      }\n    }; //高级搜索的物流查询\n\n\n    $scope.gjChangeWlFun = function () {\n      console.log($scope.gjlogisName);\n\n      if ($scope.gjlogisName) {\n        $scope.nologistCs = $scope.gjlogisName;\n      } else {\n        $scope.nologistCs = '';\n        console.log($scope.gjlogisName);\n      }\n\n      $scope.ordersList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var upwlData = {};\n      tjFun(upwlData);\n      upwlData.data.logisticName = $scope.nologistCs;\n      upwlData.data.country = $scope.countryName;\n      upwlData.data = JSON.stringify(upwlData.data);\n      console.log(upwlData);\n      dsp.postFun('app/order/queryOrders', JSON.stringify(upwlData), function (data) {\n        console.log(data);\n        var list1 = JSON.parse(data.data.result);\n        console.log(list1);\n        $scope.ordersList = list1.ordersList;\n        console.log($scope.ordersList);\n        $scope.pcountN = list1.countNumber; //获取总订单的条数\n\n        console.log($scope.pcountN);\n\n        if ($scope.pcountN > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          addNotSjFun();\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        logisRemark(list1);\n        importFun(); //分页函数\n      }, function (err) {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      });\n    };\n\n    function tjFun(tjcs) {\n      var showList = $('#dcl-sel').val() - 0;\n      var yStoresTime = $('#y-ord-sdate').val();\n      var yStoreeTime = $('#y-ord-edate').val();\n      var cjsTime = $('#cj-stime').val();\n      var cjeTime = $('#cj-etime').val();\n      var yStoreName = $.trim($('#y-pro-name').val());\n      var cjStoreName = $.trim($('#cj-pro-name').val());\n      var berName = $.trim($('.buyer-inp').val());\n      var searchinpVal = $('.ord-search-inp').val();\n      var seaWeight = $('.ord-sewei').val();\n      var seaSku = $('.ord-sesku').val();\n      var ordType = '';\n\n      if ($('.type-sel').val() == 'All') {\n        ordType = '';\n      } else if ($('.type-sel').val() == 'Shopify Imported') {\n        ordType = '2';\n      } else if ($('.type-sel').val() == 'Excel Imported') {\n        ordType = '1';\n      }\n\n      tjcs.data = {};\n      tjcs.data.status = '1'; //请求的订单状态\n\n      tjcs.data.canhandler = 'y';\n      tjcs.data.page = 1; //请求的第几页\n\n      tjcs.data.limit = showList; //每页限制的订单条数\n\n      tjcs.data.orderNumber = searchinpVal;\n      tjcs.data.storeOrderDateBegin = yStoresTime;\n      tjcs.data.cjOrderDateBegin = cjsTime;\n      tjcs.data.storeOrderDateEnd = yStoreeTime;\n      tjcs.data.cjOrderDateEnd = cjeTime;\n      tjcs.data.storeProductName = yStoreName;\n      tjcs.data.cjProductName = cjStoreName;\n      tjcs.data.buyerName = berName;\n      tjcs.data.orderType = ordType;\n      tjcs.data.weight = seaWeight;\n      tjcs.data.sku = seaSku;\n      tjcs.data.storeNumber = $scope.storeName;\n      tjcs.data.country = $scope.countryName;\n      tjcs.data.logisticName = $scope.gjlogisName;\n\n      if ($scope.userId == '738CB2BD-0D8C-4587-9779-8CFA9F788047' || $scope.userId == '{8DA0EC3E-E4A7-4D9B-8876-2A025515EBE0}') {\n        tjcs.data.storage = $scope.storage;\n      }\n    }\n\n    $scope.filterWeight = \"\";\n\n    $scope.isJustNumber = function (val) {\n      val = Number(val);\n\n      if (isNaN(val * 1) || val * 1 < 0) {\n        $scope.filterWeight = \"\";\n        return;\n      }\n\n      if (val > 9999) {\n        $scope.filterWeight = Number(\"\".concat(val).slice(0, -1));\n        return;\n      }\n\n      if (val.toString().split(\".\")[1] && val.toString().split(\".\")[1].length > 2) {\n        $scope.filterWeight = Number(Number(val).toFixed(3).slice(0, -1));\n        return;\n      }\n    };\n\n    $('.inp-num-go2').keydown(function () {\n      var curVal = $('.inp-num-go2').val();\n      curVal = curVal.replace(/[^\\d]/g, \"\");\n      $('.inp-num-go2').val(curVal);\n    });\n    $('.inp-num-go2').blur(function () {\n      var curVal = $('.inp-num-go2').val();\n      curVal = curVal.replace(/[^\\d]/g, \"\");\n      $('.inp-num-go2').val(curVal);\n    }); //鼠标移入移除 显示商品\n\n    $('.showsp-img').mouseenter(function () {\n      if ($(this).attr('src') == 'static/image/public-img/up.png') {\n        $(this).attr('src', 'static/image/public-img/up-hover.png');\n      } else if ($(this).attr('src') == 'static/image/public-img/down.png') {\n        $(this).attr('src', 'static/image/public-img/down-hover.png');\n      }\n    });\n    $('.showsp-img').mouseleave(function () {\n      if ($(this).attr('src') == 'static/image/public-img/up-hover.png') {\n        $(this).attr('src', 'static/image/public-img/up.png');\n      } else if ($(this).attr('src') == 'static/image/public-img/down-hover.png') {\n        $(this).attr('src', 'static/image/public-img/down.png');\n      }\n    });\n    $('.showsp-img').click(function () {\n      if ($(this).attr('src') == 'static/image/public-img/up-hover.png') {\n        $(this).attr('src', 'static/image/public-img/down-hover.png');\n        $('.orders-table .d-toggle-tr').show();\n        $('.orders-table .order-detail').addClass('order-click-active');\n      } else if ($(this).attr('src') == 'static/image/public-img/down-hover.png') {\n        $(this).attr('src', 'static/image/public-img/up-hover.png');\n        $('.orders-table .d-toggle-tr').hide();\n        $('.orders-table .order-detail').removeClass('order-click-active');\n      }\n    }); //点击事件\n\n    $('.orders-table').on('click', '.order-detail', function (event) {\n      // console.log(event)\n      if ($(event.target).hasClass('zcheckbox') || $(event.target).hasClass('dcl-ord-selwl')) {\n        return;\n      }\n\n      if ($(this).hasClass('order-click-active')) {\n        $(this).next().hide();\n        $(this).removeClass('order-click-active');\n      } else {\n        $(this).next().show();\n        $(this).addClass('order-click-active');\n      }\n    });\n    $('.orders-table').on('click', '.d-toggle-tr', function (event) {\n      $(this).show();\n      $(this).prev().addClass('order-click-active');\n    }); // 订单\n\n    $('.orders-table').on('mouseenter', '.order-detail>td', function () {\n      if ($(this).hasClass('order-time')) {\n        return;\n      }\n\n      $(this).parent().next().show();\n      $('.orders-table .order-detail').removeClass('order-detail-active');\n      $(this).parent().addClass('order-detail-active');\n    });\n    $('.orders-table').on('mouseleave', '.order-detail', function () {\n      if ($(this).hasClass('order-click-active')) {\n        $(this).next().show();\n      } else {\n        $(this).next().hide();\n      }\n    }); //商品\n\n    $('.orders-table').on('mouseenter', '.d-toggle-tr', function () {\n      $(this).show();\n    });\n    $('.orders-table').on('mouseleave', '.d-toggle-tr', function () {\n      if ($(this).prev().hasClass('order-click-active')) {\n        $(this).show();\n      } else {\n        $(this).hide();\n      }\n    }); //table\n\n    $('.orders-table').mouseleave(function () {\n      $('.orders-table .order-detail').removeClass('order-detail-active');\n    });\n    $scope.navList = [{\n      name: 'Process Required',\n      href: \"#/direct-orders\",\n      show: true\n    }, {\n      name: 'Cart',\n      href: \"#/imp-cart\"\n    }, {\n      name: 'Incomplete Orders',\n      href: \"#/imp-incomp\"\n    }, {\n      name: 'Canceled',\n      href: \"#/imp-cancel\"\n    }, {\n      name: 'Search All',\n      href: \"#/search-all\"\n    }, {\n      name: 'Store Orders',\n      href: \"#/AuthorizeOrder\"\n    }];\n    $('.direct-leftbara').click(function () {\n      $('.direct-leftbara').css('background-image', '');\n      $(this).css('background-image', 'linear-gradient(0deg,rgba(253, 162, 44, 1) 0%, rgba(247, 140, 41, 1) 78%, rgba(241, 118, 37, 1) 100%)');\n    }); // 左侧的导航添加滚动事件\n\n    $(document).scroll(function () {\n      if ($(document).scrollTop() >= 80) {\n        $('.left-nav').css({\n          position: 'fixed',\n          top: '80px'\n        });\n      } else {\n        $('.left-list').css({\n          position: 'relative',\n          top: '0'\n        });\n      }\n    }); //给被删除的订单添加弹框\n\n    $scope.showdelFun = function (ev, index, item) {\n      if (item.shopOrderStatus && item.shopOrderStatus != 'processing') {\n        $('.dcl-ord-tbody').eq(index).find('.hasdel-con').show();\n      }\n    };\n\n    $scope.hidedelFun = function (ev, index) {\n      $('.dcl-ord-tbody').eq(index).find('.hasdel-con').hide(); // console.log(index)\n    };\n\n    $scope.HasdeleteSureFun = function (index, item) {\n      $scope.isdelhasFlag = true;\n      $scope.hasIndex = index;\n      $scope.hasItemId = item.ID;\n    };\n\n    $scope.suredHasFun = function () {\n      layer.load(2);\n      $scope.isdelhasFlag = false;\n      var deleteData = {};\n      deleteData.orderNums = $scope.hasItemId;\n      deleteData.type = 2;\n      console.log(JSON.stringify(deleteData));\n      dsp.postFun('app/order/deleteOrder', JSON.stringify(deleteData), function (data) {\n        console.log(data);\n        layer.closeAll(\"loading\");\n\n        if (data.data.result == true) {\n          $scope.ordersList.splice($scope.hasIndex, 1);\n          layer.msg('Delete Success');\n        } else {\n          layer.closeAll(\"loading\");\n          layer.msg('Delete Error');\n        }\n      });\n    }; //恢复订单\n\n\n    $scope.keepOrdFun = function (index, item) {\n      $scope.iskeephasFlag = true;\n      $scope.hasIndex = index;\n      $scope.hasItemId = item.ID;\n    };\n\n    $scope.surekeepHasFun = function () {\n      layer.load(2);\n      $scope.iskeephasFlag = false;\n      var deleteData = {};\n      deleteData.id = $scope.hasItemId;\n      dsp.postFun('app/order/continueOrder', JSON.stringify(deleteData), function (data) {\n        console.log(data);\n        layer.closeAll(\"loading\");\n\n        if (data.data.result > 0) {\n          $scope.ordersList[$scope.hasIndex].order.shopOrderStatus = '';\n          layer.msg('Keep Success');\n        } else {\n          layer.closeAll(\"loading\");\n          layer.msg('Keep Error');\n        }\n      });\n    }; //恢复所有订单\n\n\n    $scope.keepAllFun = function () {\n      $scope.iskeepAllFlag = true;\n    };\n\n    $scope.surekeepAllFun = function () {\n      $scope.iskeepAllFlag = false;\n      layer.load(2);\n      dsp.postFun('app/order/continueOrderAll', {}, function (data) {\n        console.log(data);\n\n        if (data.data.result > 0) {\n          layer.msg('Keep Success');\n          freshList();\n        } else {\n          layer.closeAll(\"loading\");\n          layer.msg('Keep Error');\n        }\n      });\n    }; //删除所有订单\n\n\n    $scope.HasdeleteallFun = function (index, item) {\n      console.log(item);\n      $scope.shopStuType = item.shopOrderStatus;\n      $scope.isdeleteAllFlag = true;\n    };\n\n    $scope.suredeleteAllFun = function () {\n      $scope.isdeleteAllFlag = false;\n      console.log($scope.shopStuType);\n      layer.load(2);\n      var deleteAll = {};\n      deleteAll.type = $scope.shopStuType;\n      dsp.postFun('app/order/deleteOrderAll', JSON.stringify(deleteAll), function (data) {\n        console.log(data);\n\n        if (data.data.result > 0) {\n          layer.msg('Delete Success');\n          freshList();\n        } else {\n          layer.closeAll(\"loading\");\n          layer.msg('Delete Error');\n        }\n      });\n    };\n\n    var heBingIds = '';\n\n    $scope.heBingOrdFun = function () {\n      //合并订单\n      var hbAddressArr = [],\n          selCount = 0;\n      heBingIds = '';\n      $(\"#z-dcl-ord .zcheckbox\").each(function () {\n        if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n          var hbItemObj = {};\n          hbItemObj.SHIPPING_ADDRESS = $(this).parent().siblings('.shipping-info').children('.adress1').text();\n          hbItemObj.shippingAddress2 = $(this).parent().siblings('.shipping-info').children('.adress2').text();\n          hbItemObj.CITY = $(this).parent().siblings('.shipping-info').children('.buyer-adress').children('.imp-procus-city').text();\n          hbItemObj.PROVINCE = $(this).parent().siblings('.shipping-info').children('.buyer-adress').children('.imp-procus-province').text();\n          hbItemObj.COUNTRY_CODE = $(this).parent().siblings('.shipping-info').children('.buyer-adress').children('.imp-procus-country').text();\n          hbItemObj.ordId = $(this).parent().siblings('.ord-cai').children('.order-id').text();\n          heBingIds += $(this).parent().siblings('.ord-cai').children('.order-id').text() + ',';\n          hbItemObj.cusName = $(this).parent().siblings('.shipping-info').children('.buyer-name').children('.cus-name').text();\n          hbItemObj.phoneNum = $(this).parent().siblings('.shipping-info').children('.phone-num').text();\n          hbItemObj.zip = $(this).parent().siblings('.shipping-info').children('.buyer-adress').children('.post-code').text();\n          selCount++;\n          hbAddressArr.push(hbItemObj);\n        }\n      });\n      var splitSelIdsArr = hbAddressArr.map(function (item) {\n        return item.ordId;\n      });\n      console.log(splitSelIdsArr);\n      console.log($scope.ordersList); // $scope.ordersList.some(item => {\n      //   if(item.order.ORDERSOURCE_TYPE === '7' && splitSelIdsArr.includes(item.order.ID)) {\n      //     console.log('123123')\n      //   }\n      // })\n\n      if ($scope.ordersList.some(function (item) {\n        return item.order.ORDERSOURCE_TYPE === '7' && splitSelIdsArr.includes(item.order.ID);\n      })) {\n        layer.msg('Orders cannot be combined.');\n        return;\n      }\n\n      console.log(hbAddressArr); // console.log(splitSelIds)\n\n      if (selCount > 1) {\n        if (mesIsEqual(hbAddressArr)) {\n          //国家 邮编 电话 姓名是否相同\n          $scope.heBingFlag = true;\n          $scope.hbAdrList = delAddRepFun(hbAddressArr);\n          $scope.hbAdrList[0]['flag'] = true;\n          $scope.addressOrdId = $scope.hbAdrList[0].ordId;\n          var checkedList = [];\n          $scope.ordersList.forEach(function (item) {\n            if (splitSelIdsArr.includes(item.order.ID)) checkedList = [].concat(_toConsumableArray(checkedList), [item.order]);\n          }); //去除没有店铺的选中项\n\n          checkedList = checkedList.filter(function (item) {\n            return item.STORE_NUMBER;\n          });\n          console.log(checkedList);\n          var uniqueArr = uniqueArrFn(checkedList, 'STORE_NUMBER');\n          $scope.mergeShopList = uniqueArr.map(function (item) {\n            return {\n              shopName: item.STORE_NAME,\n              shopId: item.STORE_NUMBER\n            };\n          });\n          $scope.selectMergeShop = $scope.mergeShopList.length === 1 ? $scope.mergeShopList[0].shopId : '';\n          $scope.selectErrText = ''; // console.log($scope.mergeShopList)\n        }\n      } else {\n        layer.msg('Please select at least one order');\n        return;\n      }\n    };\n\n    function uniqueArrFn() {\n      var arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var field = arguments.length > 1 ? arguments[1] : undefined;\n      var json = {};\n      return arr.filter(function (item) {\n        if (json[item[field]]) {\n          return false;\n        } else {\n          json[item[field]] = 1;\n          return true;\n        }\n      });\n    }\n\n    function mesIsEqual(arr) {\n      for (var i = 1, len = arr.length; i < len; i++) {\n        if ($.trim(arr[0].COUNTRY_CODE).toUpperCase() != $.trim(arr[i].COUNTRY_CODE).toUpperCase()) {\n          layer.msg('Cannot be combined due to different country', {\n            time: 4000\n          });\n          return false;\n        }\n\n        if ($.trim(arr[0].cusName).toUpperCase() != $.trim(arr[i].cusName).toUpperCase()) {\n          layer.msg('Cannot be combined due to different receiver name', {\n            time: 4000\n          });\n          return false;\n        }\n\n        if ($.trim(arr[0].phoneNum) != $.trim(arr[i].phoneNum)) {\n          layer.msg('Cannot be combined due to different phone numbers', {\n            time: 4000\n          });\n          return false;\n        }\n\n        if ($.trim(arr[0].zip).toUpperCase() != $.trim(arr[i].zip).toUpperCase()) {\n          layer.msg('Cannot be combined due to different postal codes', {\n            time: 4000\n          });\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    function delAddRepFun(array) {\n      var temp = [];\n      var l = array.length;\n\n      for (var i = 0; i < l; i++) {\n        for (var j = i + 1; j < l; j++) {\n          if (array[i].COUNTRY_CODE.toUpperCase() == array[j].COUNTRY_CODE.toUpperCase() && array[i].CITY.toUpperCase() == array[j].CITY.toUpperCase() && array[i].PROVINCE.toUpperCase() == array[j].PROVINCE.toUpperCase() && array[i].SHIPPING_ADDRESS.toUpperCase() == array[j].SHIPPING_ADDRESS.toUpperCase() && array[i].shippingAddress2.toUpperCase() == array[j].shippingAddress2.toUpperCase()) {\n            i++;\n            j = i;\n          }\n        }\n\n        temp.push(array[i]);\n      }\n\n      return temp;\n    }\n\n    $scope.sureHbFun = function () {\n      if ($scope.mergeShopList.length && !$scope.selectMergeShop) return $scope.selectErrText = 'Please select a store.';\n      $scope.selectErrText = '';\n      layer.load(2);\n      var params = {\n        ids: heBingIds,\n        addressOrderId: $scope.addressOrdId,\n        selectedShopId: $scope.selectMergeShop\n      };\n      dsp.postFun('order/order/mergeOrder', params, function (data) {\n        console.log(data);\n\n        if (data.data.statusCode == 200) {\n          var hbResArr = JSON.parse(data.data.result);\n          var resSucCount = 0,\n              resErrorCount = 0,\n              errorMessage;\n\n          if (hbResArr && JSON.stringify(hbResArr) != '[]') {\n            $scope.heBingFlag = false;\n\n            for (var i = 0, len = hbResArr.length; i < len; i++) {\n              if (hbResArr[i].result) {\n                resSucCount++;\n              } else {\n                resErrorCount++;\n                errorMessage = hbResArr[i].message[0];\n              }\n            }\n\n            if (resSucCount > 0 && resErrorCount < 1) {\n              layer.msg('Combine success');\n              resSucFreshFun();\n            } else {\n              if (resSucCount > 0) {\n                resSucFreshFun();\n                layer.msg(errorMessage, {\n                  time: 3000\n                });\n              } else {\n                errorMessage = hbResArr[0].message[0];\n                layer.closeAll(\"loading\");\n                layer.msg(errorMessage, {\n                  time: 3000\n                });\n              }\n            }\n          } else {\n            layer.closeAll(\"loading\");\n            layer.msg('Combine error');\n          }\n        } else {\n          layer.closeAll(\"loading\");\n          layer.msg(data.data.message);\n        }\n      }, function (data) {\n        console.log(data);\n        layer.closeAll(\"loading\");\n      });\n    };\n\n    var hbRecoverOrdProCount;\n\n    $scope.heBingRecover = function () {\n      var selCount = 0;\n      heBingIds = '';\n      hbRecoverOrdProCount = 0;\n      $(\"#z-dcl-ord .zcheckbox\").each(function () {\n        if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n          heBingIds += $(this).parent().siblings('.ord-cai').children('.order-id').text() + ',';\n          hbRecoverOrdProCount = $(this).parent().siblings('.pro-count').text();\n          selCount++;\n        }\n      });\n      console.log(heBingIds.substring(0, 2));\n\n      if (selCount == 1 && heBingIds.substring(0, 2) == 'HB') {\n        $scope.heBingRecoverFlag = true;\n      } else {\n        layer.msg('You can recover only one combined order per operation. Please select a combined order.', {\n          time: 4000\n        });\n        return;\n      }\n    };\n\n    $scope.sureRecoverHbFun = function () {\n      layer.load(2);\n      dsp.postFun('order/order/recoverMergeOrder', {\n        'ids': heBingIds,\n        'quantity': hbRecoverOrdProCount\n      }, function (data) {\n        console.log(data);\n\n        if (data.data.statusCode == 200) {\n          $scope.heBingRecoverFlag = false;\n          layer.msg('recover success');\n          resSucFreshFun();\n        } else {\n          layer.closeAll(\"loading\");\n          layer.msg('Orders are possibly unqualified for recovery.', {\n            time: 3000\n          });\n        }\n      }, function (data) {\n        layer.closeAll(\"loading\");\n      });\n    };\n\n    $scope.radioCheckFun = function (item) {\n      for (var i = 0, len = $scope.hbAdrList.length; i < len; i++) {\n        $scope.hbAdrList[i]['flag'] = false;\n      }\n\n      item['flag'] = true;\n      $scope.addressOrdId = item.ordId;\n      console.log($scope.hbAdrList, $scope.addressOrdId);\n    }; //拆分订单\n\n\n    var splitSelIds = '';\n    $scope.selCountNum = 0;\n    $scope.duoPinCount = 0;\n    $scope.danPinCount = 0;\n    $scope.caiFenProArr = []; //可以拆分的商品\n\n    $scope.yiCaiFenArr = []; //已经拆分的商品\n\n    $scope.productSplitFun = function () {\n      var bool = false;\n      $scope.selCountNum = 0;\n      $scope.duoPinCount = 0;\n      $scope.danPinCount = 0;\n      $scope.caiFenProArr = []; //可以拆分的商品\n\n      $scope.yiCaiFenArr = []; //已经拆分的商品\n\n      $scope.ordSpGroup = [];\n      var itemOrdId, $curObj, itemOrdSpNum, spItemNum;\n      $(\"#z-dcl-ord .zcheckbox\").each(function () {\n        if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n          itemOrdId = $.trim($(this).parent().siblings('.ord-cai').children('.order-id').text());\n          $scope.selCountNum++;\n          $curObj = $(this).parent().parent().parent().find('.d-toggle-tab');\n          itemOrdSpNum = $(this).siblings('.ord-sp-num').text();\n\n          if (itemOrdSpNum > 1) {\n            $scope.duoPinCount++; // console.log('多品')\n\n            for (var i = 0, len = $scope.ordersList.length; i < len; i++) {\n              if (itemOrdId == $scope.ordersList[i].order.ID) {\n                if ($scope.ordersList[i].order.ORDERSOURCE_TYPE === '7') {\n                  layer.msg('Orders cannot be splited.');\n                  bool = true;\n                  return false;\n                }\n\n                for (var k = 0, kLen = $scope.ordersList[i].product.length; k < kLen; k++) {\n                  $scope.ordersList[i].product[k]['ORDER_NUMBER'] = $scope.ordersList[i].order.ORDER_NUMBER;\n\n                  if ($scope.ordersList[i].product[k].QUANTITY > 1) {\n                    for (var j = 0; j < $scope.ordersList[i].product[k].QUANTITY; j++) {\n                      $scope.caiFenProArr = $scope.caiFenProArr.concat(JSON.parse(JSON.stringify($scope.ordersList[i].product[k])));\n                      console.log($scope.caiFenProArr); // console.log('我有多个')\n                    }\n                  } else {\n                    $scope.caiFenProArr = $scope.caiFenProArr.concat($scope.ordersList[i].product[k]);\n                    console.log($scope.caiFenProArr); // console.log('我有一个')\n                  }\n                } // break\n\n              }\n            }\n\n            $scope.caiFenProArr = $scope.caiFenProArr.filter(function (o) {\n              return o.product_type !== '3';\n            });\n            console.log($scope.caiFenProArr);\n          } else if (itemOrdSpNum == 1) {\n            $scope.danPinCount++;\n            console.log('单品');\n          } else {\n            console.log('没有商品');\n          }\n        }\n      }); // const splitSelIdsArr = splitSelIds.split(',').filter(i => i)\n      // console.log(splitSelIds)\n      // $scope.ordersList.some(item => {\n      //   if(item.order.ORDERSOURCE_TYPE === '7' && splitSelIdsArr.includes(item.order.Id)) {\n      //     console.log('123')\n      // }} )\n      // if($scope.ordersList.some(item => item.order.ORDERSOURCE_TYPE === '7' && splitSelIdsArr.includes(item.order.Id))) {\n      //   layer.msg('Supplier-shipped goods cannot be split');\n      //   return;\n      // }\n\n      if (!bool) {\n        if ($scope.selCountNum > 0) {\n          if ($scope.duoPinCount > 0) {\n            $scope.splitTkFlag = true;\n          } else {\n            layer.msg('Only orders with more than 1 product can be split.', {\n              time: 3000\n            });\n          }\n        } else {\n          layer.msg('Please select order(s) first!');\n        }\n      }\n    };\n\n    var checkedArr = []; //选中的商品\n\n    $scope.ordSpGroup = [];\n    var groupNum = 0;\n\n    $scope.splitBtnFun = function () {\n      //是否可以拆分\n      checkedArr = [];\n\n      for (var i = 0, len = $scope.caiFenProArr.length; i < len; i++) {\n        if ($scope.caiFenProArr[i].check) {\n          checkedArr.push($scope.caiFenProArr[i]);\n        }\n      }\n\n      if (checkedArr.length > 0) {\n        if (isRepeatFun(checkedArr) === false) {\n          // console.log('你选中的不是同一个订单下的商品')\n          layer.msg('The products selected are not from the same order.');\n        } else {\n          //判断是否选中了所有该订单下的商品 如果选中所有不能拆分\n          var inSpCusOrdId = checkedArr[0].ORDER_NUMBER;\n          var caiFenArrNotFoundFlag = false;\n\n          for (var i = 0, iLen = $scope.caiFenProArr.length; i < iLen; i++) {\n            if ($scope.caiFenProArr[i].ORDER_NUMBER == inSpCusOrdId && !$scope.caiFenProArr[i].check) {\n              // $scope.caiFenFlag = true; //无需提示 直接移动拆分\n              splitClickFun();\n              break;\n            }\n\n            if (i == $scope.caiFenProArr.length - 1) {\n              caiFenArrNotFoundFlag = true;\n            }\n          }\n\n          console.log(caiFenArrNotFoundFlag);\n\n          if (caiFenArrNotFoundFlag) {\n            if ($scope.yiCaiFenArr.length > 0) {\n              for (var j = 0, jLen = $scope.yiCaiFenArr.length; j < jLen; j++) {\n                if ($scope.yiCaiFenArr[j].ORDER_NUMBER == inSpCusOrdId) {\n                  splitClickFun();\n                  break;\n                }\n\n                if (j == $scope.yiCaiFenArr.length - 1) {\n                  layer.msg('Each group cannot include all products from the same order.', {\n                    time: 3000\n                  });\n                }\n              }\n            } else {\n              layer.msg('Each group cannot include all products from the same order.', {\n                time: 3000\n              });\n            }\n          }\n        }\n      } else {\n        // console.log('请选择商品')\n        layer.msg('Please select the products.');\n      }\n    };\n\n    function splitClickFun() {\n      var itemIdGoup = [];\n      groupNum++;\n      $scope.caiFenFlag = false;\n      var spIds = '';\n      var heBingArr = [],\n          heBingWeight = 0,\n          targetArr = [];\n      heBingArr.push(JSON.parse(JSON.stringify(checkedArr[0])));\n\n      for (var i = 0, len = checkedArr.length; i < len; i++) {\n        checkedArr[i]['groupNum'] = groupNum;\n        checkedArr[i].check = false;\n        spIds += checkedArr[i].ID + ',';\n\n        for (var k = $scope.caiFenProArr.length - 1; k >= 0; k--) {\n          if (checkedArr[i].ID == $scope.caiFenProArr[k].ID) {\n            heBingWeight += $scope.caiFenProArr[k].GRAMS;\n            targetArr.push(JSON.parse(JSON.stringify($scope.caiFenProArr[k])));\n            $scope.caiFenProArr.splice(k, 1);\n            break;\n          }\n        }\n      }\n\n      heBingArr[0].weight = heBingWeight;\n      heBingArr[0]['yuanSu'] = targetArr;\n      spIds = spIds.substring(0, spIds.length - 1);\n      var proIdStr = proIdStrFun(spIds);\n      itemIdGoup.push({\n        productid: proIdStr,\n        groupNum: groupNum\n      });\n      $scope.yiCaiFenArr = $scope.yiCaiFenArr.concat(heBingArr);\n      var obj = {};\n      obj[checkedArr[0].CJOrderId] = itemIdGoup;\n\n      if ($scope.ordSpGroup.length > 0) {\n        for (var k = 0, kLen = $scope.ordSpGroup.length; k < kLen; k++) {\n          if ($scope.ordSpGroup[k][checkedArr[0].CJOrderId]) {\n            $scope.ordSpGroup[k][checkedArr[0].CJOrderId].push(itemIdGoup[0]);\n            break;\n          }\n\n          if (k == kLen - 1) {\n            $scope.ordSpGroup.push(obj);\n          }\n        }\n      } else {\n        $scope.ordSpGroup.push(obj);\n      }\n\n      console.log($scope.ordSpGroup);\n    }\n\n    $scope.recoverFun = function (proNum, spId, ordId, item) {\n      $scope.itemGroupNum = proNum;\n      $scope.itemSpId = spId;\n      $scope.ordIdNum = ordId;\n      $scope.targetArr = item.yuanSu;\n      $scope.recoverFlag = true;\n    };\n\n    $scope.sureIsRecoverFun = function () {\n      for (var g = $scope.ordSpGroup.length - 1; g >= 0; g--) {\n        if ($scope.ordSpGroup[g][$scope.ordIdNum] && $scope.ordSpGroup[g][$scope.ordIdNum][0].groupNum == $scope.itemGroupNum) {\n          $scope.ordSpGroup.splice(g, 1);\n          break;\n        }\n      }\n\n      for (var i = $scope.yiCaiFenArr.length - 1; i >= 0; i--) {\n        if ($scope.yiCaiFenArr[i] && $scope.yiCaiFenArr[i].groupNum == $scope.itemGroupNum) {\n          for (var j = 0, jLen = $scope.yiCaiFenArr[i].yuanSu.length; j < jLen; j++) {\n            $scope.caiFenProArr.push(JSON.parse(JSON.stringify($scope.yiCaiFenArr[i].yuanSu[j])));\n          }\n\n          $scope.yiCaiFenArr.splice(i, 1);\n        }\n      }\n\n      $scope.recoverFlag = false;\n    };\n\n    $scope.closeSplitTkFun = function () {\n      $scope.isCloseSplitFlag = true;\n    };\n\n    $scope.sureCloseSplitTkFun = function () {\n      $scope.splitTkFlag = false;\n      $scope.isCloseSplitFlag = false;\n      $scope.yiCaiFenArr = [];\n      $scope.caiFenProArr = [];\n      $scope.ordSpGroup = [];\n    };\n\n    $scope.splitComFun = function () {\n      //确定拆分\n      if ($scope.yiCaiFenArr.length < 1) {\n        layer.msg('Please select at least one product.');\n        return;\n      }\n\n      $scope.confirmEndFlag = true;\n    };\n\n    var initClickFlag = true;\n\n    $scope.splitConfirmEndFun = function () {\n      // console.log('触发几次')\n      if (!initClickFlag) {\n        return;\n      }\n\n      initClickFlag = false;\n      $scope.confirmEndFlag = false;\n      $scope.splitTkFlag = false;\n      layer.load(2);\n      var cjOrdId, spId;\n      var jsonObj = {};\n\n      if ($scope.caiFenProArr.length > 0) {\n        for (var i = 0, len = $scope.caiFenProArr.length; i < len; i++) {\n          cjOrdId = $scope.caiFenProArr[i].CJOrderId;\n          spId = $scope.caiFenProArr[i].ID;\n\n          if (jsonObj[cjOrdId]) {\n            jsonObj[cjOrdId] += ',' + spId;\n          } else {\n            jsonObj[cjOrdId] = spId;\n          }\n        }\n\n        console.log(jsonObj);\n        var proIdStr;\n\n        for (var key in jsonObj) {\n          proIdStr = proIdStrFun(jsonObj[key]);\n\n          for (var x = 0, xLen = $scope.ordSpGroup.length; x < xLen; x++) {\n            if ($scope.ordSpGroup[x][key]) {\n              $scope.ordSpGroup[x][key].push({\n                'productid': proIdStr\n              });\n              break;\n            }\n\n            if (x == xLen - 1) {\n              var weiCaiArr = [];\n              var ordItemObj = {};\n              weiCaiArr.push({\n                'productid': proIdStr\n              });\n              ordItemObj[key] = weiCaiArr;\n              $scope.ordSpGroup.push(ordItemObj);\n            }\n          }\n        }\n      }\n\n      console.log($scope.ordSpGroup);\n      $scope.caiFenProArr = []; //拼完左边清空 防止再次拼接\n\n      dsp.postFun('order/order/splitOrderByProduct', JSON.stringify($scope.ordSpGroup), function (data) {\n        console.log(data);\n        initClickFlag = true;\n\n        if (data.data.statusCode == 200) {\n          $scope.yiCaiFenArr = [];\n          $scope.ordSpGroup = [];\n          var splitResArr = JSON.parse(data.data.result);\n          var resSucCount = 0,\n              resErrorCount = 0,\n              errorMessage;\n          console.log(splitResArr);\n\n          if (splitResArr && JSON.stringify(splitResArr) != '[]') {\n            for (var i = 0, len = splitResArr.length; i < len; i++) {\n              if (splitResArr[i].result) {\n                resSucCount++;\n              } else {\n                resErrorCount++;\n                errorMessage = splitResArr[i].message[0]; // console.log(errorMessage)\n              }\n            }\n\n            if (resSucCount > 0 && resErrorCount < 1) {\n              layer.msg('split success');\n              resSucFreshFun();\n            } else {\n              if (resSucCount > 0) {\n                resSucFreshFun();\n                layer.msg(errorMessage, {\n                  time: 3000\n                });\n              } else {\n                errorMessage = splitResArr[0].message[0];\n                layer.closeAll(\"loading\");\n                layer.msg(errorMessage, {\n                  time: 3000\n                });\n              }\n            }\n          } else {\n            layer.msg(\"Oops, split failed. sNotes: 1. The Item Quantity is supposed to be greater than 1; 2. Unknown reasons. Please try it again\");\n            layer.closeAll(\"loading\");\n          }\n        } else {\n          layer.msg(\"Oops, split failed. sNotes: 1. The Item Quantity is supposed to be greater than 1; 2. Unknown reasons. Please try it again\");\n          layer.closeAll(\"loading\");\n        }\n      }, function (data) {\n        console.log(data);\n        initClickFlag = true;\n        layer.closeAll(\"loading\");\n      });\n    };\n\n    function resSucFreshFun() {\n      $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n      var orData = {};\n      tjFun(orData);\n      orData.data = JSON.stringify(orData.data);\n      dsp.postFun('app/order/queryOrders', JSON.stringify(orData), dclsFun, dcleFun);\n\n      function dclsFun(data) {\n        console.log(data.data);\n        var list1 = data.data.result;\n        $scope.list = data.data.result;\n        $scope.list = JSON.parse(list1);\n        $scope.ordersList = $scope.list.ordersList;\n        console.log($scope.ordersList);\n        $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n        if ($scope.pcountN > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          addNotSjFun();\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        layer.closeAll(\"loading\");\n        $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n        logisRemark($scope.list);\n        importFun(); //分页函数\n\n        numFun(); //调用给订单赋值的函数\n      }\n\n      function dcleFun() {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      }\n    }\n\n    function proIdStrFun(spIds) {\n      var csProArr = spIds.split(',');\n      var csHashObj = {};\n\n      for (var j = 0, jLen = csProArr.length; j < jLen; j++) {\n        if (csHashObj[csProArr[j]]) {\n          csHashObj[csProArr[j]] = csHashObj[csProArr[j]] - 0 + 1;\n        } else {\n          csHashObj[csProArr[j]] = 1;\n        }\n      }\n\n      var proIdStr = JSON.stringify(csHashObj).replace('{', '').replace('}', '').replace(/\\\"/g, '');\n      return proIdStr;\n    }\n\n    function isRepeatFun(arr) {\n      var outCusId;\n\n      for (var i = 0, len = arr.length; i < len; i++) {\n        outCusId = arr[i].ORDER_NUMBER;\n\n        for (var j = 0, jLen = arr.length; j < jLen; j++) {\n          if (outCusId != arr[j].ORDER_NUMBER) {\n            return false;\n          }\n        }\n      }\n    } //recover\n\n\n    var recoverIds;\n\n    $scope.recoverOrdBtn = function () {\n      recoverIds = '';\n      var selCount = 0;\n      $(\"#z-dcl-ord .zcheckbox\").each(function () {\n        if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n          recoverIds += $(this).parent().siblings('.ord-cai').children('.order-id').text() + ',';\n          selCount++;\n        }\n      });\n\n      if (selCount > 0) {\n        $scope.isRecoverFlag = true;\n      } else {\n        layer.msg('Please select order(s) first!');\n        return;\n      }\n    };\n\n    $scope.sureRecoverFun = function () {\n      dsp.load();\n      var upJson = {};\n      upJson.ids = recoverIds;\n      dsp.postFun('order/order/recoverSplitOrder', JSON.stringify(upJson), function (data) {\n        dsp.closeLoad();\n        $scope.isRecoverFlag = false;\n\n        if (data.data.statusCode == 200) {\n          var _dclsFun = function _dclsFun(data) {\n            console.log(data.data);\n            var list1 = data.data.result;\n            $scope.list = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n            logisRemark($scope.list);\n            importFun(); //分页函数\n\n            numFun(); //调用给订单赋值的函数\n          };\n\n          var _dcleFun = function _dcleFun() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          };\n\n          layer.msg('recover success');\n          $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n          var orData = {};\n          tjFun(orData);\n          orData.data = JSON.stringify(orData.data);\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun, _dcleFun);\n        } else {\n          layer.msg('Orders are possibly unqualified for recovery.', {\n            time: 3000\n          });\n        }\n      }, function (data) {\n        console.log(data);\n        dsp.closeLoad();\n      });\n    }; //重量拆分\n\n\n    $scope.isSplitFun = function () {\n      $scope.selCountNum = 0;\n      $scope.duoPinCount = 0;\n      $scope.danPinCount = 0;\n      $scope.caiFenProArr = []; //可以拆分的商品\n\n      $scope.yiCaiFenArr = []; //已经拆分的商品\n\n      splitSelIds = '';\n      var itemOrdId;\n      var $curObj, itemOrdSpNum, spItemNum;\n      $(\"#z-dcl-ord .zcheckbox\").each(function () {\n        if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n          itemOrdId = $.trim($(this).parent().siblings('.ord-cai').children('.order-id').text());\n          $scope.selCountNum++;\n          $curObj = $(this).parent().parent().parent().find('.d-toggle-tab');\n          itemOrdSpNum = $(this).siblings('.ord-sp-num').text();\n\n          if (itemOrdSpNum > 1) {\n            $scope.duoPinCount++;\n            splitSelIds += $(this).parent().siblings('.ord-cai').children('.order-id').text() + ',';\n          } else if (itemOrdSpNum == 1) {\n            $scope.danPinCount++;\n          } else {\n            console.log('没有商品');\n          }\n        }\n      });\n      var splitSelIdsArr = splitSelIds.split(',').filter(function (i) {\n        return i;\n      });\n      console.log(splitSelIdsArr);\n      console.log($scope.ordersList);\n\n      if ($scope.ordersList.some(function (item) {\n        return item.order.ORDERSOURCE_TYPE === '7' && splitSelIdsArr.includes(item.order.ID);\n      })) {\n        layer.msg('Orders cannot be split.');\n        return;\n      }\n\n      if ($scope.selCountNum > 0) {\n        if ($scope.duoPinCount > 0) {\n          $scope.splitFlag = true;\n        } else {\n          layer.msg('Only orders with more than 1 product can be split.', {\n            time: 3000\n          });\n        }\n      } else {\n        layer.msg('Please select order(s) first!');\n      }\n    };\n\n    $scope.splitOrdFun = function () {\n      if (!$scope.splitWeight) {\n        layer.msg('Please enter weight!');\n        return;\n      }\n\n      if ($scope.splitWeight > 2000 || $scope.splitWeight < 1) {\n        layer.msg('Please enter a correct weight');\n        return;\n      }\n\n      layer.load(2);\n      $scope.splitFlag = false;\n      var splData = {};\n      splData.ids = splitSelIds;\n      splData.weight = Math.floor($scope.splitWeight);\n      dsp.postFun('order/order/splitOrderByWeight', JSON.stringify(splData), function (data) {\n        console.log(data);\n\n        if (data.data.statusCode == 200) {\n          var splitResArr = JSON.parse(data.data.result);\n          var resSucCount = 0,\n              resErrorCount = 0,\n              errorMessage;\n          console.log(splitResArr);\n\n          if (splitResArr && JSON.stringify(splitResArr) != '[]') {\n            for (var i = 0, len = splitResArr.length; i < len; i++) {\n              if (splitResArr[i].result) {\n                resSucCount++;\n              } else {\n                resErrorCount++;\n                errorMessage = splitResArr[i].message[0];\n              }\n            }\n\n            if (resSucCount > 0 && resErrorCount < 1) {\n              layer.msg('split success');\n              resSucFreshFun();\n            } else {\n              if (resSucCount > 0) {\n                resSucFreshFun();\n                layer.msg(errorMessage, {\n                  time: 3000\n                });\n              } else {\n                errorMessage = splitResArr[0].message[0];\n                dsp.closeLoad();\n                layer.msg(errorMessage, {\n                  time: 3000\n                });\n              }\n            }\n          } else {\n            layer.msg(\"Oops, split failed.\\n              Notes: 1. The Item Quantity is supposed to be greater than 1; 2. Unknown reasons. Please try it again\");\n            dsp.closeLoad();\n          }\n        } else {\n          dsp.closeLoad();\n          layer.msg(\"Oops, split failed.\\n            Notes: 1. The Item Quantity is supposed to be greater than 1; 2. Unknown reasons. Please try it again\");\n        }\n      }, function (data) {\n        console.log(data);\n        dsp.closeLoad();\n      });\n    };\n\n    $scope.properMesFun = function (pro, sku) {\n      console.log(pro);\n      console.log(sku);\n      $scope.newCusDesignArr = [];\n\n      if (Object.prototype.toString.call(pro) === \"[object Array]\") {\n        $scope.properMesType = 'arrayType';\n        $scope.propertiesFlag = true;\n      } else if (Object.prototype.toString.call(pro) === '[object Object]') {\n        $scope.properMesType = 'objectType';\n        $scope.propertiesFlag = true;\n\n        if (pro.type == 3 || pro.type == 4) {\n          if (pro.customPodDesign) {\n            for (var i = 0, len = pro.customPodDesign.length; i < len; i++) {\n              pro.customPodDesign[i]['img'] = pro.customPodDesign[i].links[0];\n              $scope.newCusDesignArr.push(pro.customPodDesign[i]);\n            }\n          } else if (pro.customDesign || pro.customeDesign) {\n            var customDesign = pro.customDesign || pro.customeDesign;\n\n            for (var _i2 = 0, _len = customDesign.length; _i2 < _len; _i2++) {\n              customDesign[_i2]['img'] = customDesign[_i2].links[0];\n              $scope.newCusDesignArr.push(customDesign[_i2]);\n            }\n          }\n        }\n\n        console.log($scope.newCusDesignArr);\n      } else {\n        $scope.properMesType = 'otherType';\n        layer.msg('No POD details available at present.');\n      }\n\n      $scope.propertiesMes = pro;\n      $scope.propertiesMes.customMessgae = pro.customMessgae || pro.customMessage;\n      console.log($scope.propertiesMes);\n    };\n\n    $scope.tuCengFun = function (arr) {\n      $scope.tuCengArr = arr;\n      $scope.tuCengFlag = true;\n    };\n\n    $scope.copyDelFun = function (val) {\n      //如果这里换为 input 则不支持换行\n      val = JSON.stringify(val);\n      var temp = document.createElement('textarea');\n      temp.value = val;\n      console.log(val, temp.value);\n      document.body.appendChild(temp);\n      temp.select(); // 选择对象\n\n      document.execCommand(\"Copy\"); // 执行浏览器复制命令\n\n      temp.style.display = 'none';\n      layer.msg('Copied Successfully');\n    };\n\n    function isObjArr(value) {\n      if (Object.prototype.toString.call(value) === \"[object Array]\") {\n        console.log('value是数组');\n      } else if (Object.prototype.toString.call(value) === '[object Object]') {\n        console.log('value是对象');\n      } else {\n        console.log('value不是数组也不是对象');\n      }\n    }\n\n    $scope.exportOrder = function () {\n      $scope.dcordFlag = true;\n      console.log($scope.ordersList);\n    };\n\n    $scope.goActexportOrder = function () {\n      var checkIds = '';\n\n      for (var i = 0, len = $scope.ordersList.length; i < len; i++) {\n        if ($scope.ordersList[i].check) {\n          checkIds += $scope.ordersList[i].order.ID + ',';\n        }\n      }\n\n      var orData = {};\n      tjFun(orData);\n      orData.data.exportOrderIds = checkIds;\n      orData.data = JSON.stringify(orData.data);\n      layer.load(2);\n      dsp.postFun('app/client_erp/exportOrders', JSON.stringify(orData), function (data) {\n        layer.closeAll('loading');\n        console.log(data);\n\n        if (data.data.statusCode == 200) {\n          $scope.dcordFlag = false;\n          $scope.dcordCallbackFlag = true;\n          $scope.excelHref = JSON.parse(data.data.result).href;\n        } else {\n          layer.msg('Export order error.');\n        }\n      });\n    };\n\n    $scope.bjSkuFun = function (ev) {\n      $(ev.target).hide(); //把自己隐藏掉\n\n      $(ev.target).siblings('.bj-spsku').removeAttr('disabled');\n      $(ev.target).siblings('.bjsame-btn').show();\n    };\n\n    $scope.bjSkuQxFun = function (ev, sku) {\n      //隐藏保存 取消的按钮\n      $(ev.target).parent().find('.bjsame-btn').hide(); //显示编辑按钮\n\n      $(ev.target).siblings('.xg-spskubtn').show();\n      $(ev.target).siblings('.bj-spsku').val(sku); //给这条商品设置禁止输入\n\n      $(ev.target).siblings('.bj-spsku').attr('disabled', 'true');\n    };\n\n    function updateSKUFail(item) {\n      var sku = item.sku.split('-')[0];\n      layer.confirm('<p style=\"padding:20px 0\">SKU modified. Please connect the variant first.</p>', {\n        title: false,\n        closeBtn: 0,\n        btn: ['Connect', 'Cancel'] //按钮\n\n      }, function (index) {\n        layer.close(index);\n        location.href = \"#/products-connection/pending-connection///\".concat(base64.encode(sku));\n      });\n    }\n\n    $scope.bjSkuSureFun = function (ev, item, pindex, index, pItem) {\n      var bjSkuInpVal = $.trim($(ev.target).siblings('.bj-spsku').val());\n\n      if (bjSkuInpVal.includes('BZSP')) {\n        layer.msg('You cannot modify it to a packaging product SKU.');\n        return false;\n      }\n\n      layer.load(2);\n      var upData = {\n        id: item.ID,\n        sku: bjSkuInpVal,\n        STORE_NAME: pItem.STORE_NAME,\n        isGroupSku: item.isGroupProduct == 1 ? '1' : '0'\n      };\n      dsp.postFun('app/order/cjUpdateSku', JSON.stringify(upData), function (data) {\n        console.log(data);\n        dsp.closeLoad();\n\n        if (data.data.code && data.data.code != 200) {\n          layer.msg(data.data.message);\n          return;\n        }\n\n        if (data.data.result == 1) {\n          layer.msg('Modified Successfully');\n          console.log($scope.ordersList[pindex]);\n          $scope.ordersList[pindex].product[index].SKU = bjSkuInpVal;\n          $scope.ordersList[pindex].product[index].PRICE = data.data.price;\n          var oneOrdCjAmount = 0;\n          $scope.ordersList[pindex].product.forEach(function (item, i) {\n            if (item.SKU.indexOf('BZSP') == -1) oneOrdCjAmount += item.PRICE * item.QUANTITY;\n          });\n          $scope.ordersList[pindex].order.ORDER_AMOUNT = oneOrdCjAmount.toFixed(2) - 0; //显示编辑按钮\n\n          $(ev.target).siblings('.xg-spskubtn').show(); //隐藏保存 取消的按钮\n\n          $(ev.target).parent().find('.bjsame-btn').hide(); //给这条商品设置禁止输入\n\n          $(ev.target).siblings('.bj-spsku').attr('disabled', 'true');\n\n          if (data.data.type == 'image') {\n            $scope.ordersList[pindex].product[index].image = data.data.img;\n          } else {\n            $scope.ordersList[pindex].product[index].cjImage = data.data.img;\n          }\n        } else {\n          dsp.closeLoad();\n          var itemModSku = $scope.ordersList[pindex].product[index].SKU;\n          var itemSpModSku = itemModSku.split('-');\n\n          if (data.data.code == '501') {\n            return updateSKUFail({\n              sku: bjSkuInpVal\n            });\n          }\n\n          if (itemSpModSku[0] == bjSkuInpVal.split('-')[0]) {\n            layer.msg('Modify Failed');\n          } else {\n            layer.msg('SKU not found');\n          }\n        }\n      }, function (data) {\n        dsp.closeLoad();\n      });\n    };\n\n    var dclordersid = ''; //待处理订单正常订单的id\n\n    var splitordcs = ''; //存储拆分出来的参数\n\n    var splitNormalId = \"\"; //存储被拆分订单的id\n\n    var splitcjid = ''; //拆分出来订单的商品id\n\n    var splitowlfs = ''; //拆分订单的物流方式\n\n    var dclordwlstu = ''; //订单的物流方式\n\n    var remarkFlag = false;\n    var remarkCon = ''; //待处理订单被拆分过的订单\n\n    var ordRemark = ''; //存储被拆分订单的属性\n\n    var dclSecNum = 0; //存储待处理选中的订单数量\n    //给待处理订单添加选中非选中状态\n\n    $('#z-dcl-ord').on('click', '.zcheckbox', function (event) {\n      event.stopPropagation();\n\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        // alert(1)\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        dclSecNum++;\n        ordRemark = $(this).parent().parent().attr(\"remark\");\n        var equalNum = $(this).parent().parent().attr(\"equal\");\n\n        if (equalNum !== undefined) {\n          //被拆分过\n          $('#z-dcl-ord .order-detail').each(function () {\n            //循环所有的订单\n            if ($(this).attr('equal') == equalNum) {\n              $(this).children('.order-time').children('.zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n            }\n          });\n        }\n\n        if (dclSecNum == $('#z-dcl-ord .zcheckbox').length) {\n          $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        var equalNum1 = $(this).parent().parent().attr(\"equal\");\n\n        if (equalNum1 !== undefined) {\n          //被拆分过\n          $('#z-dcl-ord .order-detail').each(function () {\n            //循环所有的订单\n            if ($(this).attr('equal') == equalNum1) {\n              $(this).children('.order-time').children('.zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n            }\n          });\n        }\n\n        dclSecNum--;\n\n        if (dclSecNum != $('#z-dcl-ord .zcheckbox').length) {\n          $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //给待处理订单添加全选事件\n\n    $('#z-dcl-ord').on('click', '.zchecked-all', function () {\n      var listNum = 0;\n\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        $('#z-dcl-ord .zcheckbox').each(function () {\n          //循环所有的订单\n          var questionOrdVal = $(this).siblings('.isdel-instore').text();\n          console.log(questionOrdVal);\n\n          if (!questionOrdVal || questionOrdVal == 'processing') {\n            $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n            listNum++;\n          }\n        });\n        dclSecNum = listNum;\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        $('#z-dcl-ord .zcheckbox').each(function () {\n          //循环所有的订单\n          var questionOrdVal = $(this).siblings('.isdel-instore').text();\n\n          if (!questionOrdVal || questionOrdVal == 'processing') {\n            $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n          }\n        });\n        dclSecNum = 0;\n      }\n    }); // 生成一个随机函数给拆分的订单赋值\n\n    $scope.numFun1 = function () {\n      var str = '';\n\n      for (var i = 0; i < 5; i++) {\n        str += Math.floor(Math.random() * 10);\n      }\n\n      return str;\n    };\n\n    function transLogist(arr) {\n      layer.load(2);\n      dsp.postFun(\"app/order/updateOrderLogisicsBatch\", {\n        orderNums: arr.join(','),\n        logisic: 'USPS+'\n      }, function (data) {\n        layer.closeAll(\"loading\");\n\n        if (data.data.code == 200) {\n          closebulkWareFlag();\n          $scope.zchecked_all = false;\n          freshList(); //刷新列表\n\n          layer.msg(\"Successfully changed shipping area！\");\n        } else {\n          layer.msg(data.data.message);\n        }\n      });\n    }\n\n    $scope.usRefuse = function () {\n      $scope.usInventoryFlag = false;\n      discounteTransferFlag = false;\n      checkStock();\n    };\n\n    $scope.sureFromUS = function () {\n      var arr = $scope.usInventoryList.map(function (item) {\n        var newItem = {\n          orderId: item,\n          transferAreaId: '2' //同意默认转到美国仓\n\n        };\n        return newItem;\n      });\n      discounteTransferFlag = true;\n      $scope.usInventoryFlag = false;\n      transferAreaFun(arr).then(function (data) {\n        if (data) {\n          transLogist($scope.usInventoryList);\n        }\n      });\n    };\n\n    function checkOrderDiscount() {\n      var arr = [];\n      $scope.ordersList.filter(function (item) {\n        if (item.check) {\n          arr.push(item.order.ID);\n        }\n      });\n      var ids = arr.join(',');\n\n      if (arr.length > 0) {\n        layer.load(2);\n        dsp.postFun('order/order/checkOrderLogisticsDiscount', {\n          ids: ids\n        }, function (_ref3) {\n          var data = _ref3.data;\n          var result = data.result;\n          layer.closeAll();\n\n          if (data.statusCode == '200' && result.length > 0) {\n            $scope.usInventoryFlag = true;\n            $scope.usInventoryList = result;\n          } else {\n            checkStock();\n          }\n        }, function (data) {\n          console.log(data);\n        });\n      } else {\n        $scope.addCartFlag = true;\n      }\n    } //把待处理订单提交到待提交的按钮\n\n\n    function checkStock() {\n      var arr = [];\n      $scope.ordersList.forEach(function (item) {\n        if (item.check) {\n          // if(item.order.areaId !== '1') {\n          arr.push(item.order.ID);\n        }\n      });\n      var ids = arr.join(\",\");\n\n      if (ids) {\n        dsp.postFun('order/order/checkInventory', {\n          ids: ids\n        }, function (data) {\n          var resData = data.data;\n\n          if (resData.statusCode == 200) {\n            $scope.noInventoryArr = resData.result;\n\n            if ($scope.noInventoryArr.length > 0) {\n              $scope.notifi = true;\n\n              if ($scope.noInventoryArr.length <= 4) {\n                $scope.ordersText = $scope.noInventoryArr.join(\", \");\n              } else {\n                $scope.ordersText = $scope.noInventoryArr.slice(0, 4).join(\", \") + \"...\";\n              }\n            } else {\n              $scope.addCartFlag = true;\n            }\n          } else if (data.data.statusCode == 400) {\n            $scope.errorShowFlag = true;\n            var temp = JSON.parse(data.data.result);\n            $scope.logisticsReasonList = temp.map(function (item) {\n              return {\n                recordNum: item,\n                message: data.data.message\n              };\n            });\n          }\n        }, function (data) {\n          console.log(data);\n        });\n      } else {\n        $scope.addCartFlag = true;\n      }\n    }\n\n    var jsonOrd = {}; //存储提交订单后 需要往后台发送的参数\n\n    jsonOrd.data = {};\n    $scope.noInventoryArr = [];\n    $scope.addToCartFun = addToCartFun;\n\n    function addToCartFun() {\n      var selectNum = 0; //存储被选中的条数\n\n      var dhlNoPhoneNum = 0;\n      var delOrdCount = 0; //多少条被shopify删除的订单\n\n      var $targetDom; //当前订单行\n\n      var thisOrdWlfs; //获取将要提交的物流方式\n\n      var thisOrdPhoneNum; //当前行的手机号\n\n      var thisCity; //获取订单城市地址\n\n      var thisProvince; //获取订单省份地址\n\n      var thisCountry; //获取订单国家简码\n\n      var checkedTaxidText; //税号\n\n      var cityEqualProvince = false; //发往美国订单是否有城市跟国家相同\n\n      $scope.bxisTaxidFlag = 0; // 需要释放\n\n      var idList = [];\n      var idstr = ''; //var kucunIds = '';\n\n      $('#z-dcl-ord .order-detail').each(function () {\n        //点击提交的时候去循环查找选中的订单\n        $targetDom = $(this).children('#cj-ord-num');\n        thisOrdWlfs = $targetDom.siblings('.dcl-ord-wltd').children('.dcl-ord-selwl').val(); //获取物流方式\n\n        console.log('thisOrdWlfs:', thisOrdWlfs);\n        thisOrdPhoneNum = $targetDom.siblings('.shipping-info').children('.phone-num').text();\n\n        if ($(this).children('.order-time').children('.zcheckbox').attr('src') == 'static/image/direct-orders/multiple2.png') {\n          thisCity = $(this).children('.shipping-info').find('.imp-procus-city').text();\n          thisProvince = $(this).children('.shipping-info').find('.imp-procus-province').text();\n          thisCountry = $(this).children('.shipping-info').find('.imp-procus-country').text();\n          checkedTaxidText = $(this).children('.shipping-info').children('.taixd-text').text();\n          thisCity = thisCity.toUpperCase();\n          thisProvince = thisProvince.toUpperCase();\n\n          if (thisCountry == 'US') {\n            console.log('us');\n\n            if (thisCity != 'NEW YORK' && thisCity != 'NY' && thisProvince != 'NEW YORK' && thisProvince != 'NY') {\n              if (thisCity == thisProvince) {\n                cityEqualProvince = true;\n              }\n            } else {\n              console.log('是纽约');\n            }\n          }\n\n          if (thisCountry == 'BR' && !checkedTaxidText) {\n            $scope.bxisTaxidFlag++;\n          }\n\n          if ($targetDom.children('.isdel-instore').text() && $targetDom.children('.isdel-instore').text() != 'processing') {\n            delOrdCount++;\n            selectNum++;\n          } else {\n            if ((thisOrdWlfs.indexOf('DHL') != -1 || thisOrdWlfs == \"China EMS\" || thisOrdWlfs == \"S.F China Domestic\" || thisOrdWlfs == \"YTO China Domestic\" || thisOrdWlfs == \"South Africa Special Line\" || thisOrdWlfs == \"CJ Normal Express\") && !thisOrdPhoneNum) {\n              console.log('该行必须要有手机号');\n              $scope.isDhlFlag = true;\n              selectNum++;\n              dhlNoPhoneNum++;\n            } else {\n              selectNum++;\n            }\n          }\n\n          var data = {\n            \"id\": $(this).attr('data-id'),\n            \"adderss\": $(this).attr('data-adress')\n          };\n          idList.push(data);\n        } else {\n          var ids = $(this).find('.dclord-sys-time').html();\n          idstr += ids + ',';\n        }\n      });\n\n      if (cityEqualProvince) {\n        layer.msg('Address incorrect, City and State should not be same!');\n        return;\n      }\n\n      if ($scope.bxisTaxidFlag > 0) {\n        $scope.isBxFlag = true;\n        return;\n      }\n\n      if (selectNum <= 0) {\n        layer.msg('Please select order(s) first!');\n        return;\n      }\n\n      $scope.shopifyRemoveNum = delOrdCount;\n      $scope.nonePhoneNum = dhlNoPhoneNum;\n      $scope.addCartOrdNum = selectNum;\n\n      if (dhlNoPhoneNum == selectNum) {\n        var index = layer.msg(\"Please fill in the recipient's phone number for the selected orders.\", {\n          time: 4000\n        });\n        layer.style(index, {\n          width: '500px'\n        });\n      } else {\n        $scope.noInventoryArr = []; // checkStock()\n\n        checkOrderDiscount();\n      } //loading加载\n\n\n      var lottieDom = null;\n\n      function ceateLoading(id) {\n        var element = document.getElementById(id);\n        element.parentElement.style.display = 'flex';\n        if (!element) return;\n\n        if (!lottieDom) {\n          lottieDom = lottie.loadAnimation({\n            container: element,\n            renderer: 'svg',\n            loop: true,\n            autoplay: true,\n            path: '/egg/image/cj_lottie.json'\n          });\n        }\n      }\n\n      function removeLoading(id) {\n        var element = document.getElementById(id);\n        element.parentElement.style.display = 'none';\n        lottieDom.destroy();\n      } //提交至购物车\n\n\n      $scope.sureAddCartFun = function () {\n        var cjOrderNumber = $scope.addressOrderList.join(',');\n        console.log($scope.addressOrderList);\n\n        if ($scope.addressOrderList.length) {\n          var orderIdList = {\n            'type': 1,\n            'cjOrderNumber': cjOrderNumber\n          };\n          ceateLoading('addcardLoad');\n          $scope.addCartFlag = false;\n          dsp.postFun('app/address/checkAddress', JSON.stringify(orderIdList), function (res) {\n            removeLoading('addcardLoad');\n            console.log(res);\n\n            if (res.data.data.length) {\n              $scope.checkAddressList = res.data.data;\n            }\n\n            $scope.textFun = function (data) {\n              var list = [];\n              data.forEach(function (i) {\n                list.push(i.msgEn);\n              });\n              list = list.join(',');\n              return list;\n            };\n\n            if ($scope.checkAddressList && $scope.checkAddressList.length) {\n              $scope.checkAddress = true;\n              $scope.addCartFlag = false;\n              return;\n            } else {\n              $scope.opinionOrder();\n            }\n\n            console.log('checkAddressList', $scope.checkAddressList);\n            console.log($scope.addressOrderList);\n          });\n        } //地址不完整弹窗\n\n\n        $scope.checkAddress = false;\n\n        $scope.closeCheckAddress2 = function () {\n          $scope.checkAddress = false;\n          $scope.checkAddressList = [];\n        };\n\n        $scope.closeCheckAddress = function () {\n          if ($scope.addressOrderList.length !== $scope.checkAddressList.length) {\n            $scope.checkAddressList.forEach(function (item) {\n              if ($scope.addressOrderList.includes(item.orderId)) {\n                $scope.addressOrderList = $scope.addressOrderList.filter(function (i) {\n                  return i !== item.orderId;\n                });\n              }\n            });\n            console.log($scope.addressOrderList);\n            $scope.opinionOrder();\n          }\n\n          $scope.checkAddress = false;\n        };\n\n        $scope.opinionOrder = function () {\n          var aa = 0;\n          var selFlagBol = false; //判断提交的订单中有没有没有物流方式的订单\n\n          dclordersid = ''; //再次点击确定提交按钮时 清空\n          // normaldclwl = ''; //再次点击确定提交按钮时 清空物流方式\n\n          splitordcs = ''; //再次点击确定提交按钮时 清空存储拆分出来的参数\n\n          var isDhlPhoneNum;\n          var isHaveTax = false; //判断提交的订单中有没有地区是BR的，但是没有税号的订单\n\n          $(\"#z-dcl-ord .zcheckbox\").each(function (i) {\n            splitNormalId = ''; //再次点击确定提交按钮时 清空被拆分订单的id\n\n            splitowlfs = ''; //再次点击确定提交按钮时 清空物流方式\n\n            splitcjid = ''; //再次点击确定提交按钮时 清空拆分出来订单的商品id\n\n            var ordersid = '';\n            var itemWlName = $(this).parent().siblings('.dcl-ord-wltd').children('.dcl-ord-selwl').val(); //获取物流方式\n\n            isDhlPhoneNum = $(this).parent().siblings('.shipping-info').children('.phone-num').text();\n            var taxNumber = $(this).parent().siblings('.shipping-info').children('.taixd-text').text(); //税号\n\n            var countryCode = $(this).parent().siblings('.shipping-info').find('.imp-procus-country').text(); //城市\n\n            if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n              //判断城市是否是BR, 并且物流是否为CJPacket或DHL或ePacket\n              if (\"BR\" == countryCode && !taxNumber) {\n                isHaveTax = true;\n              }\n\n              if (itemWlName && itemWlName != 'Please select') {\n                //如果有物流方式\n                ordersid = $(this).parent().siblings('.ord-cai').children('.order-id').text();\n                console.log(ordersid);\n\n                if ($scope.addressOrderList.includes(ordersid)) {\n                  //获取订单的物流方式\n                  dclordwlstu = $(this).parent().siblings('.dcl-ord-wltd').children('.dcl-ord-selwl').val(); //获取商品是否匹配\n\n                  ordRemark = $(this).parent().parent().attr(\"remark\");\n\n                  if ((itemWlName.indexOf('DHL') != -1 || itemWlName == \"China EMS\" || itemWlName == \"S.F China Domestic\" || itemWlName == \"YTO China Domestic\" || itemWlName == \"South Africa Special Line\" || itemWlName == \"CJ Normal Express\") && !isDhlPhoneNum) {\n                    console.log('该行订单缺少必要的手机号手机号');\n                  } else {\n                    var isNoInventoryIdFlag = true;\n\n                    if ($scope.noInventoryArr.length > 0) {\n                      for (var _i3 = 0, len = $scope.noInventoryArr.length; _i3 < len; _i3++) {\n                        if (ordersid == $scope.noInventoryArr[_i3]) {\n                          isNoInventoryIdFlag = false;\n                          break;\n                        }\n                      }\n                    }\n\n                    if (isNoInventoryIdFlag) {\n                      //不是缺少库存的订单\n                      dclordersid += ordersid + \"#\" + dclordwlstu + ',';\n                    }\n                  }\n                }\n              }\n            }\n          });\n\n          if (isHaveTax) {\n            layer.closeAll(\"loading\");\n            layer.msg('The orders contains an order with a city of BR but no CPF/CNPJ');\n            return;\n          } //按订单的状态提交\n\n\n          jsonOrd.data = {};\n          jsonOrd.data.normal = dclordersid;\n          jsonOrd.data.splitNormal = splitordcs;\n          jsonOrd.data = JSON.stringify(jsonOrd.data);\n          console.log(jsonOrd);\n          console.log(dclordersid);\n\n          if (!dclordersid) {\n            layer.closeAll(\"loading\");\n            layer.msg('No available orders. Please select orders with shipping methods.');\n            return;\n          } else {\n            var orderNumber = $scope.ordersList;\n            console.log(orderNumber);\n            var arr = [];\n\n            if ($scope.checkAddressList) {\n              $scope.checkAddressList.forEach(function (item) {\n                orderNumber.forEach(function (i) {\n                  if (i.order.ID === item.orderId) {\n                    arr.push(i);\n                  }\n                });\n              });\n              arr.forEach(function (item) {\n                idList = idList.filter(function (i) {\n                  return i.id !== item.order.ORDER_NUMBER;\n                });\n              });\n            }\n\n            var data = {\n              \"orderInfo\": idList,\n              \"orderId\": idstr\n            };\n            console.log(data);\n            console.log(JSON.stringify(data));\n            dsp.postFun('app/order/repeatVerification', JSON.stringify(data), function (data) {\n              $scope.addCartFlag = false;\n              console.log(data);\n\n              if (data.data.flag == false) {\n                var count = data.data.count;\n                var idstr = data.data.ids;\n                var carlist = {\n                  \"list\": idstr,\n                  \"data\": jsonOrd\n                };\n                $scope.carNumber = count;\n                $('.carZZC').show().find('.carNumber').attr('data-number', JSON.stringify(carlist));\n              } else if (data.data.flag == true) {\n                console.log(data.data.flag);\n                addCart();\n              }\n            });\n          }\n        };\n      };\n    }\n\n    $scope.ordersList = [];\n\n    function addCart() {\n      console.log(jsonOrd);\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      dsp.postFun('app/order/submitOrders', JSON.stringify(jsonOrd), function (data) {\n        // alert('chenggong')\n        if (data.data.statusCode == 200) {\n          var _dclsFun2 = function _dclsFun2(data) {\n            var list1 = data.data.result; // console.log(list);\n\n            $scope.list = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n            logisRemark($scope.list);\n            importFun(); //分页函数\n\n            numFun(); //调用给订单赋值的函数\n          };\n\n          var _dcleFun2 = function _dcleFun2() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          };\n\n          $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n          var orData = {};\n          tjFun(orData);\n          orData.data = JSON.stringify(orData.data);\n          console.log(JSON.stringify(orData));\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun2, _dcleFun2);\n        } else if (data.data.statusCode == 406 || data.data.statusCode == 500) {\n          var _dclsFun3 = function _dclsFun3(data) {\n            var list1 = data.data.result; // console.log(list);\n\n            $scope.list = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n            logisRemark($scope.list);\n            importFun(); //分页函数\n\n            numFun(); //调用给订单赋值的函数\n          };\n\n          var _dcleFun3 = function _dcleFun3() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          };\n\n          if (data.data.statusCode == 406) {\n            layer.msg(data.data.message);\n          } else if (data.data.statusCode == 500) {\n            dsp.cjMesFun(1);\n          }\n\n          $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n          var orData = {};\n          tjFun(orData);\n          orData.data = JSON.stringify(orData.data);\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun3, _dcleFun3);\n        } else if (data.data.statusCode == 5000) {\n          $scope.addCartResonFlag = true;\n          $scope.addCartResonText = data.data.message;\n          resSucFreshFun();\n        } else if (data.data.statusCode == 400) {\n          $scope.errorShowFlag = true;\n          var temp = JSON.parse(data.data.result);\n          $scope.logisticsReasonList = temp.map(function (item) {\n            return {\n              recordNum: item,\n              message: data.data.message\n            };\n          });\n        } else {\n          layer.closeAll(\"loading\");\n          dsp.closeLoadPercent($('.orders-list'));\n          dsp.cjMesFun(1);\n          return;\n        }\n      }, function () {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      });\n    }\n\n    $scope.cancelBx = function () {\n      $scope.isBxFlag = false;\n      $scope.bxisTaxidFlag = 0;\n    };\n\n    $scope.confirmBx = function () {\n      $('#z-dcl-ord .order-detail').each(function () {\n        //点击提交的时候去循环查找选中的订单\n        var thisOrdWlfs; //获取将要提交的物流方式\n\n        var thisCountry; //获取订单国家简码\n\n        var checkedTaxidText;\n\n        if ($(this).children('.order-time').children('.zcheckbox').attr('src') == 'static/image/direct-orders/multiple2.png') {\n          thisCountry = $(this).children('.shipping-info').find('.imp-procus-country').text();\n          thisOrdWlfs = $(this).children('#cj-ord-num').siblings('.dcl-ord-wltd').children('.dcl-ord-selwl').val();\n          checkedTaxidText = $(this).children('.shipping-info').children('.taixd-text').text();\n\n          if (thisCountry == 'BR' && !checkedTaxidText) {\n            $(this).children('.order-time').children('.zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n            var brOrder = $(this).children('.order-time')[0].innerText;\n            $scope.addressOrderList = $scope.addressOrderList.filter(function (item) {\n              return item !== brOrder;\n            });\n          }\n        }\n      });\n      $scope.bxisTaxidFlag = 0;\n      $scope.isBxFlag = false;\n    };\n\n    $('.carNumber').click(function (e) {\n      var data = JSON.parse($(this).attr('data-number'));\n      var idList = data.list;\n      console.log(idList);\n      var a = base64.encode(idList);\n      console.log(a);\n      var newTab = window.open('about:blank');\n      newTab.location.href = 'myCJ.html#/direct-orders/' + a; //$('.carZZC').hide();\n    });\n    $('.carWrapConfirmBtn').click(function () {\n      $scope.addressOrderList = [];\n      $scope.checkAddressList = [];\n      $scope.addCartFlag = false;\n      var data = JSON.parse($('.carNumber').attr('data-number'));\n      console.log(data);\n      var jsonOrd = data.data;\n      var listId = data.list;\n      console.log(listId);\n      var newids = listId.split(',');\n      var newList = [];\n      var newStr = '';\n      $.each(newids, function (i, v) {\n        console.log(v);\n\n        if (i == 0) {\n          newStr += v;\n        } else {\n          if (v != '') {\n            newStr += ',' + v;\n          }\n        }\n      });\n      var savData = {\n        \"orderIds\": newStr\n      };\n      console.log(savData);\n      $scope.ordersList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      dsp.postFun('app/order/submitOrders', JSON.stringify(jsonOrd), function (data) {\n        // alert('chenggong')\n        console.log(data.data);\n\n        if (data.data.statusCode == 200) {\n          var _dclsFun4 = function _dclsFun4(data) {\n            console.log(data.data);\n            var list1 = data.data.result; // console.log(list);\n\n            $scope.list = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n            logisRemark($scope.list);\n            importFun(); //分页函数\n\n            numFun(); //调用给订单赋值的函数\n          };\n\n          var _dcleFun4 = function _dcleFun4() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          };\n\n          $('.carZZC').hide();\n          $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n          var orData = {};\n          tjFun(orData);\n          orData.data = JSON.stringify(orData.data);\n          console.log(JSON.stringify(orData));\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun4, _dcleFun4);\n        } else if (data.data.statusCode == 406 || data.data.statusCode == 500) {\n          var _dclsFun5 = function _dclsFun5(data) {\n            console.log(data.data);\n            var list1 = data.data.result; // console.log(list);\n\n            $scope.list = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n            logisRemark($scope.list);\n            importFun(); //分页函数\n\n            numFun(); //调用给订单赋值的函数\n          };\n\n          var _dcleFun5 = function _dcleFun5() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          };\n\n          if (data.data.statusCode == 406) {\n            layer.msg(data.data.message);\n          } else if (data.data.statusCode == 500) {\n            dsp.cjMesFun(1);\n          }\n\n          $('.carZZC').hide();\n          $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n          var orData = {};\n          tjFun(orData);\n          orData.data = JSON.stringify(orData.data);\n          console.log(JSON.stringify(orData));\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun5, _dcleFun5);\n        } else if (data.data.statusCode == 5000) {\n          $('.carZZC').hide();\n          $scope.addCartResonFlag = true;\n          $scope.addCartResonText = data.data.message;\n          resSucFreshFun();\n        } else if (data.data.statusCode == 400) {\n          $scope.errorShowFlag = true;\n          var temp = JSON.parse(data.data.result);\n          $scope.logisticsReasonList = temp.map(function (item) {\n            return {\n              recordNum: item,\n              message: data.data.message\n            };\n          });\n        } else {\n          layer.closeAll(\"loading\");\n          dsp.closeLoadPercent($('.orders-list'));\n          dsp.cjMesFun(1);\n          return;\n        }\n      }, function () {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      });\n      dsp.postFun('app/order/addRepeatOrderId', JSON.stringify(savData), function (data) {\n        console.log(data.data);\n      });\n    });\n\n    $scope.closeCarWrap = function () {\n      if ($scope.checkAddressList) {\n        $scope.checkAddressList.forEach(function (item) {\n          $scope.addressOrderList.push(item.orderId);\n        });\n      }\n\n      $scope.checkAddressList = [];\n      $('.carZZC').hide();\n    }; //给DHL输入手机号\n\n\n    var listIndex; //第几条订单\n\n    $scope.inpPhoneFun = function (index, ev) {\n      ev.stopPropagation();\n      $(ev.target).hide();\n      $(ev.target).siblings('.dhlsameclass').show();\n      listIndex = index;\n    };\n\n    $scope.surePhoneFun = function (index, ev, item) {\n      ev.stopPropagation();\n      var evInpVal = '';\n      console.log(evInpVal);\n      evInpVal = $.trim($(ev.target).siblings('.inp-phoneNum').val());\n      console.log(listIndex);\n\n      if (evInpVal) {\n        dsp.postFun('app/order/updatePhone', {\n          id: item.ID,\n          phone: evInpVal\n        }, function (data) {\n          console.log(data);\n\n          if (data.data.statusCode == \"CODE_200\") {\n            $scope.ordersList[listIndex].order.PHONE = evInpVal;\n          } else {\n            layer.msg('Change the phone number to fail.');\n          }\n        }, function (data) {\n          console.log(data);\n        });\n        $(ev.target).siblings('#lrPhoneBtn').show();\n        $(ev.target).parent().find('.dhlsameclass').hide();\n      } else {\n        layer.msg('Please enter phone number');\n      }\n    };\n\n    $scope.qxPhoneFun = function (ev) {\n      ev.stopPropagation();\n      $(ev.target).siblings('#lrPhoneBtn').show();\n      $(ev.target).parent().find('.dhlsameclass').hide();\n    }; //批量为客户的dhl设置手机号\n\n\n    $scope.openSetDhlFun = function (wlName) {\n      $scope.dhlNoPhoneFlag = true;\n      $scope.bulkEditWlName = wlName;\n    };\n\n    $scope.bulkSetDhlPhone = function () {\n      if ($scope.dhlPhoneNum) {\n        console.log($scope.dhlPhoneNum);\n      } else {\n        layer.msg('Please enter phone number');\n        return;\n      }\n\n      var updhlData = {};\n      updhlData.phone = $scope.dhlPhoneNum;\n      updhlData.logisticName = $scope.bulkEditWlName;\n      dsp.postFun('app/order/upDHLPhone', JSON.stringify(updhlData), function (data) {\n        $scope.dhlNoPhoneFlag = false;\n        console.log(data);\n\n        if (data.data.result == true) {\n          var _dclsFun6 = function _dclsFun6(data) {\n            $scope.copyFlag = false;\n            console.log(data.data);\n            var list1 = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n            // layer.msg('Please check the failed ones on the Draft.')\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n            logisRemark($scope.list);\n            importFun(); //分页函数\n\n            numFun(); //调用给订单赋值的函数\n          };\n\n          var _dcleFun6 = function _dcleFun6() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.closeLoadPercent($('.orders-list'));\n          };\n\n          layer.msg('Set up success');\n          $scope.dhlPhoneNum = '';\n          $scope.ordersList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          var showList = $('#dcl-sel').val() - 0;\n          var orData = {};\n          tjFun(orData);\n          orData.data = JSON.stringify(orData.data);\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun6, _dcleFun6);\n        } else {\n          layer.msg('Set up failed');\n        }\n      }, function (data) {\n        console.log(data);\n      });\n    };\n\n    $scope.isPhoneRegFun = function (ev) {\n      $(ev.target).val($(ev.target).val().replace(/[^\\d\\-\\+\\()\\s]/g, ''));\n    };\n\n    $('.input-dhlphone').on('keyup', function () {\n      $(this).val($(this).val().replace(/[^\\d\\-\\+\\()\\s]/g, ''));\n    });\n\n    $scope.importNewFun = function (e) {\n      e.stopPropagation();\n      $('.dcl-tc-wrap').show();\n    }; //选择上传 粘贴弹框的取消按钮\n\n\n    $('.can-dtw-tc').click(function () {\n      $('.dcl-tc-wrap').hide(); // $('#svc-xl').hide();\n    }); //点击copy按钮 显示copy弹窗\n\n    $('.dtwt-r').click(function () {\n      $('.copy-row-ul li').remove(); //清空复制粘贴里面所有的数据\n\n      $('.dcl-tc-wrap').hide();\n      $('.copy-wrap').show();\n      $('.copy-row-ul').eq(1).attr('isfir', '1');\n    }); //粘贴的取消按钮\n\n    $('#copy-cancel-btn').click(function () {\n      $('.copy-wrap').hide();\n      $('.copy-row-ul li').remove();\n      $('.add-text-btn').attr('src', 'static/image/public-img/add.png');\n    }); //粘贴的文本框\n\n    $scope.isadd = false;\n    var $currentObj = {}; //增加文本的图片按钮\n\n    $scope.addTextCon = function ($event) {\n      var excelTit = $($event.currentTarget).parent().parent().siblings('.c-head-tit').text(); // alert(excelTit);\n\n      $('#excel-tit').text(excelTit);\n      $currentObj = $($event.currentTarget).parent().parent();\n\n      if ($currentObj.attr('isfir') == 1) {\n        $('#add-textarea').val(''); //清空文本框\n\n        $scope.isadd = true;\n        $('.add-text-btn').attr('src', 'static/image/public-img/add.png');\n        $($event.currentTarget).attr('src', 'static/image/public-img/add-active.png');\n        $currentObj = $($event.currentTarget).parent().parent(); // console.log($currentObj)\n\n        $currentObj.children('.hide-add-data').remove();\n        $currentObj.children('.copy-row-li').remove();\n      } else if ($('.copy-row-ul').eq(1).children('.copy-row-li').length <= 0) {\n        layer.msg('Please enter order number first.');\n        return;\n      } else if ($('.copy-row-ul').eq(1).children('.copy-row-li').length > 0) {\n        $('#add-textarea').val(''); //清空文本框\n\n        $scope.isadd = true;\n        $('.add-text-btn').attr('src', 'static/image/public-img/add.png');\n        $($event.currentTarget).attr('src', 'static/image/public-img/add-active.png');\n        $currentObj = $($event.currentTarget).parent().parent(); // console.log($currentObj)\n\n        $currentObj.children('.hide-add-data').remove();\n        $currentObj.children('.copy-row-li').remove();\n      } // var textObj = $($event.currentTarget).\n      // alert($($event.currentTarget).index())\n\n    }; // 文本框的取消按钮\n\n\n    $scope.closeaddTextCon = function () {\n      $scope.isadd = false;\n    }; //文本框的确定按钮\n\n\n    var biaoji = 0;\n\n    $scope.enteraddTextCon = function (index) {\n      $scope.isadd = false; //关闭文本框\n\n      var str = '';\n\n      if ($('#add-textarea').val() == '') {\n        return;\n      } else {\n        str = $('#add-textarea').val();\n      } // var str = $('#add-textarea').val();\n\n\n      console.log(str); // console.log(str.indexOf('OrderNumber'))\n\n      var hideStr = '<p style=\"display:none;\" class=\"hide-add-data\">' + str + '</p>'; // style=\"display:none;\"\n      // console.log(str);\n\n      var strArr = str.split('\\n');\n\n      if (strArr && JSON.stringify(strArr) != '[]') {\n        if (!strArr[strArr.length - 1]) {\n          strArr.pop(); //去除最后一个元素\n        }\n      }\n\n      var listData = ''; //存储粘贴的数据\n\n      var sortNum = ''; //存储订单的序号\n\n      var index = 0;\n      console.log(strArr);\n      console.log(strArr.length);\n\n      if ($currentObj.attr('isfir') == 1) {\n        biaoji = strArr.length;\n      }\n\n      console.log(biaoji);\n\n      for (var i = 0; i < biaoji; i++) {\n        index++;\n\n        if ($currentObj.attr('isfir') == 1) {\n          if (strArr[i] == '') {\n            biaoji = i;\n            break;\n          } else {\n            $('#ctc-sort li').remove();\n            sortNum += '<li class=\"copy-row-li\"><span>' + index + '</span></li>';\n            listData += '<li class=\"copy-row-li\">' + strArr[i] + '</li>';\n          }\n        } else {\n          if (strArr[i] == undefined) {\n            break; // listData += '<li class=\"copy-row-li\"></li>';\n          } else {\n            listData += '<li class=\"copy-row-li\">' + strArr[i] + '</li>';\n          }\n        }\n      } // console.log(sortNum)\n\n\n      $('#ctc-sort').append(sortNum);\n      $currentObj.append(hideStr);\n      $currentObj.append(listData);\n    }; //提交粘贴的内容\n\n\n    $scope.copyFlag = false;\n    $('#copy-con-btn').click(function () {\n      layer.load(2);\n      $('.hide-add-data').text();\n      console.log($('.hide-add-data').text());\n      var $dataObj = $('.hide-add-data');\n      console.log($dataObj.length); // var queryData = '';//存储提交的数据\n\n      var strLen = 13;\n\n      if ($('#ctc-taxNumber .hide-add-data').text() == null || $('#ctc-taxNumber .hide-add-data').text().length == 0) {\n        //税号可以为空\n        strLen = 12;\n      }\n\n      if ($dataObj.length !== strLen) {\n        //$dataObj.length!==12\n        layer.closeAll(\"loading\");\n        layer.msg('Please fill the form completely.');\n        return;\n      } else {\n        // var $rowObj = $('.copy-row-ul');\n        // console.log($rowObj)\n        var len1 = $dataObj.eq(0).text().split('\\n').length; // 判断所有的数组长度是否相等\n\n        console.log($dataObj.length);\n        var flag = false; //判断粘贴的条数是否相等\n\n        for (var i = 1; i < $dataObj.length; i++) {\n          if (len1 == $dataObj.eq(i).text().split('\\n').length) {\n            flag = true;\n            console.log(i);\n          } else {\n            flag = false;\n            console.log(i);\n            layer.closeAll(\"loading\"); // $('.copy-row-ul').eq(i).css('background','pink')\n\n            layer.msg('The lines are not equal to each other.');\n            return;\n          }\n        }\n\n        var queryData = {}; //存储提交的数据\n\n        if (flag) {\n          //flag\n          for (var i = 0; i < $dataObj.length; i++) {\n            // queryData += $dataObj.eq(i).text()+'#';\n            switch (i) {\n              case 0:\n                // queryData += 'Order Number:'+$dataObj.eq(i).text()+'#';\n                queryData.orderNumber = $dataObj.eq(0).text();\n                break;\n\n              case 1:\n                queryData.Sku = $dataObj.eq(1).text();\n                break;\n\n              case 2:\n                queryData.Quantity = $dataObj.eq(2).text();\n                break;\n\n              case 3:\n                queryData.productTitle = $dataObj.eq(3).text();\n                break;\n\n              case 4:\n                queryData.customerName = $dataObj.eq(4).text();\n                break;\n\n              case 5:\n                queryData.address1 = $dataObj.eq(5).text();\n                break;\n\n              case 6:\n                // queryData += 'Order Number:'+$dataObj.eq(i).text()+'#';\n                queryData.address2 = $dataObj.eq(6).text();\n                break;\n\n              case 7:\n                queryData.city = $dataObj.eq(7).text();\n                break;\n\n              case 8:\n                queryData.province = $dataObj.eq(8).text();\n                break;\n\n              case 9:\n                queryData.zip = $dataObj.eq(9).text();\n                break;\n\n              case 10:\n                queryData.country = $dataObj.eq(10).text();\n                break;\n\n              case 11:\n                // queryData += 'Order Number:'+$dataObj.eq(i).text()+'#';\n                queryData.phoneNumber = $dataObj.eq(11).text();\n                break;\n\n              case 12:\n                // queryData += 'Order Number:'+$dataObj.eq(i).text()+'#';\n                queryData.taxNumber = $dataObj.eq(12).text();\n                break;\n\n              default:\n                break;\n            }\n          } // console.log(queryData)\n          // console.log(JSON.stringify(queryData))app/order/analysisOrder\n\n\n          dsp.postFun(\"order/oldOrder/analysisOrder\", JSON.stringify(queryData), function (data) {\n            // console.log(data)\n            console.log(data);\n            console.log(data.data.message); // console.log(data.data.result);\n\n            if (data.data.statusCode == '300') {\n              layer.closeAll(\"loading\");\n              layer.msg(data.data.message, {\n                time: 3000\n              });\n              return;\n            }\n\n            if (data.data.statusCode == '200') {\n              console.log(data.data.message);\n              var successObj = JSON.parse(data.data.message);\n              console.log(successObj); // alert(successObj)\n\n              if (successObj.result == 'true') {\n                layer.closeAll(\"loading\");\n                $('.copy-wrap').hide(); //隐藏粘贴框\n\n                $scope.copyFlag = true;\n                $scope.copyprototalNum = successObj.totalNumber - 0;\n                $scope.copysuceNum = successObj.success - 0;\n                $scope.copyfailNum = successObj.nothing - 0;\n                $scope.copytotalNum = $scope.copysuceNum + $scope.copyfailNum;\n                $scope.copycombinedNum = $scope.copyprototalNum - $scope.copytotalNum; //有多少订单合并\n              } else {\n                layer.closeAll(\"loading\");\n                layer.msg(successObj.message, {\n                  time: 3000\n                });\n                return;\n              }\n            }\n          });\n          $('.add-text-btn').attr('src', 'static/image/public-img/add.png');\n        }\n      }\n    }); //粘贴订单成功失败弹框的确定按钮\n\n    $scope.copyConFun = function () {\n      // $scope.copyFlag = false;\n      if ($scope.copyfailNum > 0) {\n        if ($scope.copysuceNum > 0) {\n          var _dclsFun7 = function _dclsFun7(data) {\n            $scope.copyFlag = false;\n            console.log(data.data);\n            var list1 = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n            // layer.msg('Please check the failed ones on the Draft.')\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n            logisRemark($scope.list);\n            importFun(); //分页函数\n\n            numFun(); //调用给订单赋值的函数\n          };\n\n          var _dcleFun7 = function _dcleFun7() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.closeLoadPercent($('.orders-list'));\n          }; // $scope.draftFun();\n\n\n          $scope.ordersList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          var showList = $('#dcl-sel').val() - 0;\n          var orData = {};\n          tjFun(orData);\n          orData.data = JSON.stringify(orData.data);\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun7, _dcleFun7);\n          openDFun();\n        } else {\n          // layer.msg('Please check the failed ones on the Draft.')\n          $scope.copyFlag = false; // $scope.draftFun();\n\n          openDFun();\n        }\n      } else {\n        var _dclsFun8 = function _dclsFun8(data) {\n          console.log(data.data);\n          var list1 = data.data.result;\n          $scope.list = JSON.parse(list1);\n          $scope.ordersList = $scope.list.ordersList;\n          console.log($scope.ordersList);\n          $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n          // layer.msg('Please check the failed ones on the Draft.')\n\n          if ($scope.pcountN > 0) {\n            dsp.removeNodataPic($('.orders-list'));\n            dsp.closeLoadPercent($('.orders-list'));\n          } else {\n            addNotSjFun();\n            dsp.closeLoadPercent($('.orders-list'));\n          }\n\n          $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n          logisRemark($scope.list);\n          importFun(); //分页函数\n\n          numFun(); //调用给订单赋值的函数\n        };\n\n        var _dcleFun8 = function _dcleFun8() {\n          layer.closeAll(\"loading\");\n          dsp.closeLoadPercent($('.orders-list'));\n          dsp.cjMesFun(1);\n        };\n\n        $scope.copyFlag = false; // statement\n\n        $scope.ordersList = [];\n        dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n        $scope.excelCanFlag = true;\n        $scope.copyFlag = false; // $window.location.reload();\n\n        var showList = $('#dcl-sel').val() - 0;\n        var orData = {};\n        tjFun(orData);\n        orData.data = JSON.stringify(orData.data);\n        dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun8, _dcleFun8);\n      }\n    }; //鼠标移入切换图片\n\n\n    $('.dtwt-l').mouseenter(function (event) {\n      $(this).children('img').attr('src', 'static/image/public-img/excel-aimg.png');\n    });\n    $('.dtwt-l').mouseleave(function (event) {\n      $(this).children('img').attr('src', 'static/image/public-img/excel-img.png');\n    });\n    $('.dtwt-r').mouseenter(function (event) {\n      $(this).children('img').attr('src', 'static/image/public-img/copy-aimg.png');\n    });\n    $('.dtwt-r').mouseleave(function (event) {\n      $(this).children('img').attr('src', 'static/image/public-img/copy-img.png');\n    }); // 导入excel订单按钮\n\n    $scope.uploadFlag = false; //上传成功的弹窗\n    //取消按钮的显示隐藏\n\n    $scope.excelCanFlag = false;\n    $('.dtwt-l').click(function () {\n      $('.dcl-tc-wrap').hide();\n      layer.load(2);\n      layer.open({\n        type: 1,\n        content: '<div class=\"excelalert-wrap\" style=\"width:490px\">' + '<div class=\"excel-mtop\">' + '<div class=\"excel-mtl\">' + '<p class=\"excel-mtp2\">Excel Orders Template:</p>' + '<p class=\"excel-mtp2\">Excel Orders File:</p>' + '</div>' + '<div class=\"excel-mtr\">' + '<p class=\"excel-mblp\">' + '<a class=\"excel-download\" href=\"https://cc-west-usa.oss-us-west-1.aliyuncs.com/2051/1629024423850.xlsx\"  >Download</a>' + '</p>' + '<form id=\"excel-upload\" action=\"http://192.168.5.104:8086/dsp_server/order/oldOrder/addOrderByExcel\" method=\"post\" enctype=\"multipart/form-data\">' + '<p class=\"e-upl-p\"><a class=\"upload-btn\" href=\"javascript:void(0)\">Upload</a><input id=\"uploadInp\" name=\"file\" class=\"ex-upload-inp\" type=\"file\"   />' + '<span class=\"text-tit\"></span>' + '</p>' + '</form>' + '</div>' + '</div>' + '</div>',\n        area: ['554px', '300px'],\n        closeBtn: 0,\n        // shadeClose: true,\n        title: \"Import Excel Orders\",\n        skin: \"excel-layer\",\n        btn: ['Cancel', 'Confirm'],\n        yes: function yes(index, layero) {\n          layer.close(index);\n          layer.closeAll(\"loading\");\n        },\n        btn2: function btn2(index, layero) {\n          layer.close(index);\n          var file = $(\"#uploadInp\").val();\n          var index = file.lastIndexOf(\".\");\n          console.log(file);\n          $('.text-tit').text(file);\n          var ext = file.substring(index + 1, file.length);\n\n          if (ext != \"xlsx\" && ext != \"xls\") {\n            layer.closeAll(\"loading\");\n            layer.msg('File Format Error: You need to upload EXCEL format file, other type files will not be available to system.');\n            return;\n          }\n\n          var formData = new FormData($(\"#excel-upload\")[0]);\n          var platformId = $(\".excel-mts\").text();\n          formData.append(\"platformId\", platformId);\n          console.log(formData);\n          console.log(platformId);\n          dsp.upLoadImgPost('order/oldOrder/addOrderByExcel', formData, orsFun, dreFun);\n\n          function orsFun(data) {\n            console.log(data);\n\n            if (data.data.statusCode == '300') {\n              layer.closeAll(\"loading\");\n\n              if (!data.data.message) {\n                data.data.message = 'Upload error';\n              }\n\n              layer.msg(data.data.message, {\n                time: 3000\n              });\n              return;\n            }\n\n            if (data.data.statusCode == '200') {\n              var obj = JSON.parse(data.data.message);\n              console.log(obj);\n              console.log(obj.result);\n              console.log(data.data.message);\n              var successObj = JSON.parse(data.data.message);\n              console.log(successObj); // alert(successObj)\n\n              if (successObj.result == 'true') {\n                layer.closeAll(\"loading\");\n                $scope.uploadFlag = true;\n                $scope.prototalNum = successObj.totalNumber - 0;\n                $scope.suceNum = successObj.success - 0;\n                $scope.failNum = successObj.nothing - 0;\n                $scope.totalNum = $scope.suceNum + $scope.failNum;\n                $scope.combinedNum = $scope.prototalNum - $scope.totalNum; //有多少订单合并\n                // alert($scope.failNum)\n\n                if ($scope.failNum > 0) {\n                  //取消按钮的显示隐藏\n                  $scope.excelCanFlag = false;\n                } else {\n                  $scope.excelCanFlag = true; // alert($scope.excelCanFlag)\n                }\n              } else {\n                layer.closeAll(\"loading\");\n                layer.msg(successObj.message, {\n                  time: 3000\n                });\n                return;\n              }\n            }\n          }\n\n          function dreFun() {\n            console.log(\" err ceshi\");\n            layer.closeAll(\"loading\");\n          }\n        }\n      });\n      $(\"#excel-upload\").on('change', function () {\n        var fileTit = $(\"#uploadInp\").val();\n        $('.text-tit').text(fileTit);\n      });\n    }); //上传excel订单的确定按钮\n\n    $scope.excelConFun = function () {\n      if ($scope.failNum > 0) {\n        $scope.uploadFlag = false;\n\n        if ($scope.suceNum > 0) {\n          var _dclsFun9 = function _dclsFun9(data) {\n            console.log(data.data);\n            var list1 = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n            // layer.msg('Please check the failed ones on the Draft.')\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n            logisRemark($scope.list);\n            importFun(); //分页函数\n\n            numFun(); //调用给订单赋值的函数\n          };\n\n          var _dcleFun9 = function _dcleFun9() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n          };\n\n          var showList = $('#dcl-sel').val() - 0;\n          $scope.ordersList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          var orData = {};\n          tjFun(orData);\n          orData.data = JSON.stringify(orData.data);\n          console.log(JSON.stringify(orData));\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun9, _dcleFun9);\n          localStorage.setItem('isOpenDraft', 1);\n          location.reload();\n        } else {\n          // layer.msg('Please check the failed ones on the Draft.')\n          localStorage.setItem('isOpenDraft', 1);\n          location.reload();\n        } // $scope.draftFun();\n\n      } else {\n        var _dclsFun10 = function _dclsFun10(data) {\n          console.log(data.data);\n          var list1 = data.data.result;\n          $scope.list = JSON.parse(list1);\n          $scope.ordersList = $scope.list.ordersList;\n          console.log($scope.ordersList);\n          $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n          // layer.msg('Please check the failed ones on the Draft.')\n\n          if ($scope.pcountN > 0) {\n            dsp.removeNodataPic($('.orders-list'));\n            dsp.closeLoadPercent($('.orders-list'));\n          } else {\n            addNotSjFun();\n            dsp.closeLoadPercent($('.orders-list'));\n          }\n\n          $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n          logisRemark($scope.list);\n          importFun(); //分页函数\n\n          numFun(); //调用给订单赋值的函数\n        };\n\n        var _dcleFun10 = function _dcleFun10() {\n          layer.closeAll(\"loading\");\n          dsp.closeLoadPercent($('.orders-list'));\n          dsp.cjMesFun(1);\n        };\n\n        // statement\n        $scope.ordersList = [];\n        dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n        $scope.excelCanFlag = true;\n        $scope.uploadFlag = false; // $window.location.reload();\n\n        var showList = $('#dcl-sel').val() - 0;\n        var orData = {};\n        tjFun(orData);\n        orData.data = JSON.stringify(orData.data);\n        dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun10, _dcleFun10);\n      }\n    };\n\n    $scope.cancelFun = function () {\n      $scope.uploadFlag = false;\n    };\n\n    $scope.addToCancelFun = function () {\n      layer.load(2);\n      var selectNum = 0; //存储被选中的条数\n\n      $('#z-dcl-ord .order-detail').each(function () {\n        //点击提交的时候去循环查找选中的订单\n        if ($(this).children('.order-time').children('.zcheckbox').attr('src') == 'static/image/direct-orders/multiple2.png') {\n          selectNum++;\n\n          if ($(this).attr(\"remark\") !== undefined) {\n            //如果是被拆分的订单\n            selectNum--;\n          }\n        }\n      });\n\n      if (selectNum <= 0) {\n        layer.closeAll(\"loading\");\n        layer.msg('Please select order(s) first!');\n        return;\n      }\n\n      layer.open({\n        content: \"<p>You are adding orders to Canceled.</p><p>Order Quantity:  <span id='awa-dcl-num'></span></p>\",\n        area: ['480px', '260px'],\n        closeBtn: 0,\n        // shadeClose: true,\n        title: \"Order Cancellation\",\n        skin: \"\",\n        btn: ['Cancel', 'Confirm'],\n        success: function success(layero, index) {\n          $(layero).find('#awa-dcl-num').html(selectNum);\n        },\n        yes: function yes(index, layero) {\n          layer.close(index);\n          layer.closeAll(\"loading\");\n        },\n        btn2: function btn2(index, layero) {\n          // 点击提交按钮重新发送请求\n          $scope.pcountN = 0; //存储待提交订单的总条数 process required\n\n          var cancelData = {};\n          var cancelId = ''; // var ordTypeObj = {};\n\n          $(\"#z-dcl-ord .zcheckbox\").each(function (i) {\n            if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n              cancelId += $(this).parent().siblings('.ord-cai').children('.order-id').text() + ',';\n            }\n          });\n          cancelData.orderNums = cancelId;\n          cancelData.type = 1;\n          console.log(JSON.stringify(cancelData));\n          dsp.postFun('app/order/deleteOrder', JSON.stringify(cancelData), function (data) {\n            layer.closeAll(\"loading\");\n            console.log(data);\n            console.log(data.data);\n\n            if (data.data.result == true) {\n              var _dclsFun11 = function _dclsFun11(data) {\n                console.log(data.data);\n                var list1 = data.data.result; // console.log(list);\n\n                $scope.list = data.data.result;\n                $scope.list = JSON.parse(list1); //json×Ö·û´®×ª¶ÔÏó\n\n                $scope.ordersList = $scope.list.ordersList;\n                console.log($scope.ordersList); // $scope.list.countNumber = $scope.list.countNumber;//获取总订单的条数\n\n                $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n                if ($scope.pcountN > 0) {\n                  dsp.removeNodataPic($('.orders-list'));\n                  dsp.closeLoadPercent($('.orders-list'));\n                } else {\n                  addNotSjFun();\n                  dsp.closeLoadPercent($('.orders-list'));\n                }\n\n                $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n                // alert(typeof($scope.pcountN))\n\n                logisRemark($scope.list);\n                importFun(); //分页函数\n\n                numFun(); //调用给订单赋值的函数\n              };\n\n              var _dcleFun11 = function _dcleFun11() {\n                // alert('dingdna')\n                layer.closeAll(\"loading\");\n                dsp.closeLoadPercent($('.orders-list'));\n                dsp.cjMesFun(1);\n              };\n\n              $scope.ordersList = [];\n              dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n              $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n              var orData = {};\n              tjFun(orData);\n              orData.data = JSON.stringify(orData.data);\n              console.log(JSON.stringify(orData));\n              dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun11, _dcleFun11);\n            } else {\n              // alert('tijiaoshibai')\n              layer.closeAll(\"loading\");\n              dsp.closeLoadPercent($('.orders-list'));\n              dsp.cjMesFun(1);\n              return;\n            }\n          }, function () {\n            // alert('cancel ')\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          });\n        }\n      });\n    }; //重新拉取订单\n\n\n    var timer1; //定时器\n\n    var progressLineNum = 0;\n    var progressLineNum2 = 33;\n    var progressLineNum3 = 66;\n    var progressStu = '1';\n    var bianliangtime = 1;\n\n    function testFun() {\n      // console.log((new Date().getTime()-localStorage.getItem('bianliangtime'))/1000<5)\n      if ((new Date().getTime() - localStorage.getItem('bianliangtime')) / 1000 < 5) {\n        setTimeout(function () {\n          testFun();\n        }, 5000);\n        return;\n      }\n\n      localStorage.setItem('bianliangtime', new Date().getTime());\n      var queryData = localStorage.getItem('queryData');\n      var link = location.href;\n      console.log(link);\n      dsp.postFun('app/order/getOperationOrderStatus', queryData, function (data) {\n        console.log(data);\n        progressLineNum = localStorage.getItem(\"progressLineNum\") - 0;\n        progressLineNum++;\n        progressStu = data.data.result;\n\n        switch (progressStu) {\n          case '1':\n            localStorage.setItem(\"progressLineNum\", progressLineNum);\n\n            if (progressLineNum > 32) {\n              $('.progress-bar').css('width', 33 + '%');\n              $('.progress-bar').text(33 + '%');\n            } else {\n              $('.progress-bar').css('width', progressLineNum + '%');\n              $('.progress-bar').text(progressLineNum + '%');\n            }\n\n            break;\n\n          case '2':\n            if (progressLineNum < 33) {\n              progressLineNum = 33;\n            }\n\n            localStorage.setItem(\"progressLineNum\", progressLineNum);\n\n            if (progressLineNum > 66) {\n              $('.progress-bar').css('width', 66 + '%');\n              $('.progress-bar').text(66 + '%');\n            } else {\n              $('.progress-bar').css('width', progressLineNum + '%');\n              $('.progress-bar').text(progressLineNum + '%');\n            }\n\n            break;\n\n          case '3':\n            if (progressLineNum < 66) {\n              progressLineNum = 66;\n            }\n\n            localStorage.setItem(\"progressLineNum\", progressLineNum);\n\n            if (progressLineNum > 99) {\n              $('.progress-bar').css('width', 99 + '%');\n              $('.progress-bar').text(99 + '%');\n            } else {\n              $('.progress-bar').css('width', progressLineNum + '%');\n              $('.progress-bar').text(progressLineNum + '%');\n            }\n\n            break;\n\n          case '0':\n            $scope.isupdateFlag = false;\n            localStorage.removeItem('updateTime');\n\n            if (localStorage.getItem(\"zhixing0\") == undefined) {\n              localStorage.setItem('zhixing0', \"0\");\n            } else {\n              return;\n            }\n\n            $scope.ordersList = [];\n            dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n            $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n            var orData = {};\n            orData.userId = bs.decode(localStorage.getItem('userId')); // console.log(orData.userId)\n\n            orData.token = bs.decode(localStorage.getItem('token'));\n            tjFun(orData);\n            orData.data = JSON.stringify(orData.data);\n            console.log(JSON.stringify(orData));\n            dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun12, _dcleFun12);\n\n            var _dclsFun12 = function _dclsFun12(data) {\n              console.log(data.data);\n              var list1 = data.data.result; // console.log(list);\n\n              $scope.list = data.data.result;\n              $scope.list = JSON.parse(list1);\n              $scope.ordersList = $scope.list.ordersList;\n              console.log($scope.ordersList); // $scope.list.countNumber = $scope.list.countNumber;//获取总订单的条数\n\n              $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n              if ($scope.pcountN > 0) {\n                dsp.removeNodataPic($('.orders-list'));\n                dsp.closeLoadPercent($('.orders-list'));\n              } else {\n                addNotSjFun();\n                dsp.closeLoadPercent($('.orders-list'));\n              }\n\n              $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n              // alert(typeof($scope.pcountN))\n\n              logisRemark($scope.list);\n              importFun(); //分页函数\n\n              numFun(); //调用给订单赋值的函数\n            };\n\n            var _dcleFun12 = function _dcleFun12() {\n              // alert('dingdna')\n              layer.closeAll(\"loading\");\n              dsp.closeLoadPercent($('.orders-list'));\n              dsp.cjMesFun(1);\n            };\n\n            break;\n        }\n\n        if (progressStu != \"0\") {\n          testFun();\n        }\n      }, function (data) {\n        console.log(data);\n      });\n    } // if(localStorage.getItem('updateTime')){\n    // \t$scope.isupdateFlag = true;\n    // \ttestFun ();\n    // }\n\n\n    $scope.cxlqordFun = function () {\n      // if(codeInlocal != '200'){\n      // \tlayer.msg(\"System is syncing orders, you won't be able to update orders until sync finished.\")\n      // \treturn;\n      // }\n      var selectNum = 0; //存储被选中的条数\n\n      $('#z-dcl-ord .order-detail').each(function () {\n        //点击提交的时候去循环查找选中的订单\n        if ($(this).children('.order-time').children('.zcheckbox').attr('src') == 'static/image/direct-orders/multiple2.png') {\n          selectNum++;\n\n          if ($(this).attr(\"remark\") !== undefined) {\n            //如果是被拆分的订单\n            selectNum--;\n          }\n        }\n      });\n\n      if (selectNum <= 0) {\n        layer.closeAll(\"loading\");\n        layer.msg('Please select order(s) first!');\n        return;\n      }\n\n      layer.open({\n        content: \"<p>Are you sure to Update Orders?</p><p>It will take around few miuntes to make this happen.</p><p>Order Quantity:  <span id='awa-dcl-num'></span></p>\",\n        area: ['480px', '260px'],\n        closeBtn: 0,\n        // shadeClose: true,\n        title: \"Update Orders\",\n        skin: \"\",\n        btn: ['Cancel', 'Confirm'],\n        success: function success(layero, index) {\n          $(layero).find('#awa-dcl-num').html(selectNum);\n        },\n        yes: function yes(index, layero) {\n          layer.close(index);\n          layer.closeAll(\"loading\");\n        },\n        btn2: function btn2(index, layero) {\n          // 点击提交按钮重新发送请求\n          var queryData = {};\n          var cancelId = '';\n          $(\"#z-dcl-ord .zcheckbox\").each(function (i) {\n            if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n              cancelId += $(this).parent().siblings('.ord-cai').children('.order-id').text() + ',';\n            }\n          });\n          var updateTime = new Date().getTime();\n          queryData.orderNums = cancelId;\n          queryData = JSON.stringify(queryData);\n          localStorage.setItem('queryData', queryData);\n          dsp.postFun('app/order/operationOrder', queryData, function (data) {\n            dsp.closeLoad();\n            console.log(data);\n\n            if (data.data.result == \"200\") {\n              localStorage.removeItem('zhixing0');\n              localStorage.setItem('progressLineNum', 0);\n              localStorage.setItem('bianliangtime', new Date().getTime());\n              $scope.isupdateFlag = true;\n              testFun2();\n              localStorage.setItem('updateTime', updateTime);\n            } else {\n              $scope.isupdateFlag = false;\n              layer.msg(\"System is syncing orders, you won't be able to update orders until sync finished.\");\n            }\n          }, function (data) {\n            console.log(data);\n          });\n\n          function testFun2() {\n            if ((new Date().getTime() - localStorage.getItem('bianliangtime')) / 1000 < 5) {\n              setTimeout(function () {\n                // console.log(\"等待我s\")\n                testFun2();\n              }, 5000);\n              return;\n            }\n\n            localStorage.setItem('bianliangtime', new Date().getTime());\n            dsp.postFun('app/order/getOperationOrderStatus', queryData, function (data) {\n              console.log(data);\n              progressLineNum = localStorage.getItem(\"progressLineNum\") - 0;\n              progressLineNum++;\n              progressStu = data.data.result;\n\n              switch (progressStu) {\n                case '1':\n                  localStorage.setItem(\"progressLineNum\", progressLineNum);\n\n                  if (progressLineNum > 32) {\n                    $('.progress-bar').css('width', 33 + '%');\n                    $('.progress-bar').text(33 + '%');\n                  } else {\n                    $('.progress-bar').css('width', progressLineNum + '%');\n                    $('.progress-bar').text(progressLineNum + '%');\n                  }\n\n                  break;\n\n                case '2':\n                  if (progressLineNum < 33) {\n                    progressLineNum = 33;\n                  }\n\n                  localStorage.setItem(\"progressLineNum\", progressLineNum);\n\n                  if (progressLineNum > 66) {\n                    $('.progress-bar').css('width', 66 + '%');\n                    $('.progress-bar').text(66 + '%');\n                  } else {\n                    $('.progress-bar').css('width', progressLineNum + '%');\n                    $('.progress-bar').text(progressLineNum + '%');\n                  }\n\n                  break;\n\n                case '3':\n                  if (progressLineNum < 66) {\n                    progressLineNum = 66;\n                  }\n\n                  localStorage.setItem(\"progressLineNum\", progressLineNum);\n\n                  if (progressLineNum > 99) {\n                    $('.progress-bar').css('width', 99 + '%');\n                    $('.progress-bar').text(99 + '%');\n                  } else {\n                    $('.progress-bar').css('width', progressLineNum + '%');\n                    $('.progress-bar').text(progressLineNum + '%');\n                  }\n\n                  break;\n\n                case '0':\n                  $scope.isupdateFlag = false;\n                  clearTimeout(timer1);\n                  localStorage.removeItem('updateTime');\n\n                  if (localStorage.getItem(\"zhixing0\") == undefined) {\n                    localStorage.setItem('zhixing0', \"0\");\n                  } else {\n                    return;\n                  }\n\n                  $scope.ordersList = [];\n                  dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n                  $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n                  var orData = {};\n                  orData.userId = bs.decode(localStorage.getItem('userId')); // console.log(orData.userId)\n\n                  orData.token = bs.decode(localStorage.getItem('token'));\n                  tjFun(orData);\n                  orData.data = JSON.stringify(orData.data);\n                  console.log(JSON.stringify(orData));\n                  dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun13, _dcleFun13);\n\n                  var _dclsFun13 = function _dclsFun13(data) {\n                    console.log(data.data);\n                    var list1 = data.data.result; //ËùÓÐÊý¾Ý\n                    // console.log(list);\n\n                    $scope.list = data.data.result;\n                    $scope.list = JSON.parse(list1); //json×Ö·û´®×ª¶ÔÏó\n\n                    $scope.ordersList = $scope.list.ordersList;\n                    console.log($scope.ordersList); // $scope.list.countNumber = $scope.list.countNumber;//获取总订单的条数\n\n                    $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n                    if ($scope.pcountN > 0) {\n                      dsp.removeNodataPic($('.orders-list'));\n                      dsp.closeLoadPercent($('.orders-list'));\n                    } else {\n                      addNotSjFun();\n                      dsp.closeLoadPercent($('.orders-list'));\n                    }\n\n                    $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n                    // alert(typeof($scope.pcountN))\n\n                    logisRemark($scope.list);\n                    importFun(); //分页函数\n\n                    numFun(); //调用给订单赋值的函数\n                  };\n\n                  var _dcleFun13 = function _dcleFun13() {\n                    // alert('dingdna')\n                    layer.closeAll(\"loading\");\n                    dsp.closeLoadPercent($('.orders-list'));\n                    dsp.cjMesFun(1);\n                  };\n\n                  break;\n              }\n\n              if (progressStu != \"0\") {\n                testFun2();\n              }\n            }, function (data) {\n              console.log(data);\n            });\n          }\n        }\n      });\n    }; // //取消订单的弹框\n\n\n    function delShopFun(shopArr) {\n      if (!shopArr) {\n        return;\n      }\n      /**店铺列表名字展示改成 店铺名+店铺类型+国家、增加国家全写参数、增加国家缩写参数 start */\n\n\n      shopArr.forEach(function (e) {\n        // 国家缩写转换全写。ThemeId是shopee的国家;MarketplaceUrl是lazada的国家\n        e.countryfullName = replaceCountry(e.type == 'shopee' ? e.ThemeId : e.type == 'Lazada' ? e.MarketplaceUrl : '').fullName; // 店铺名+店铺类型+国家\n\n        if (e.type) {\n          e.rNAME = \"\".concat(e.name, \" - \").concat(e.type.replace(e.type[0], e.type[0].toUpperCase()), \" \").concat(e.countryfullName ? '-' : '', \" \").concat(e.countryfullName);\n        } else {\n          e.rNAME = e.name;\n        } // 国家缩写code(大写)-物流模块传递国家需要\n\n\n        var curLogisticCountry = e.ThemeId || e.MarketplaceUrl ? e.type == 'shopee' ? e.ThemeId : e.type == 'Lazada' ? e.MarketplaceUrl : '' : '';\n\n        if (curLogisticCountry) {\n          e.logisticsCountry = curLogisticCountry.toUpperCase();\n        } else {\n          e.logisticsCountry = '';\n        } // e.logisticsCountry = (e.ThemeId || e.MarketplaceUrl) ? (e.type == 'shopee' ? e.ThemeId : e.type == 'Lazada' ? e.MarketplaceUrl : '').toUpperCase() : '';\n        // 货币代码\n\n\n        e.currencyCode = replaceCountry(e.type == 'shopee' ? e.ThemeId : e.type == 'Lazada' ? e.MarketplaceUrl : '').currencyCode;\n      });\n      $scope.shops = shopArr;\n    }\n\n    function replaceCountry(params) {\n      var fullName = '';\n      var currencyCode = '';\n\n      if (/sg/i.test(params)) {\n        fullName = 'Singapore', currencyCode = 'SGD';\n      } else if (/my/i.test(params)) {\n        fullName = 'Malaysia', currencyCode = 'MYR';\n      } else if (/id/i.test(params)) {\n        fullName = 'Indonesia', currencyCode = 'IDR';\n      } else if (/th/i.test(params)) {\n        fullName = 'Thailand', currencyCode = 'THB';\n      } else if (/ph/i.test(params)) {\n        fullName = 'Philippines', currencyCode = 'PHP';\n      } else if (/vn/i.test(params)) {\n        fullName = 'Vietnam', currencyCode = 'VND';\n      }\n\n      return {\n        fullName: fullName,\n        currencyCode: currencyCode\n      };\n    } //分页\n\n\n    function importFun() {\n      if ($scope.pcountN == 0) {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        return;\n      }\n\n      $(\".pagination-demo1\").jqPaginator({\n        totalCounts: $scope.pcountN,\n        //设置分页的总条目数\n        pageSize: $('#dcl-sel').val() - 0,\n        //设置每一页的条目数\n        visiblePages: 5,\n        currentPage: 1,\n        activeClass: 'active',\n        first: '<li class=\"first\"><a class=\"prev\" href=\"javascript:void(0);\">&lt&lt;<\\/a><\\/li>',\n        prev: '<li class=\"prev\"><a class=\"prev\" href=\"javascript:void(0);\">&lt;<\\/a><\\/li>',\n        next: '<li class=\"next\"><a class=\"next\" href=\"javascript:void(0);\">&gt;<\\/a><\\/li>',\n        last: '<li class=\"last\"><a class=\"prev\" href=\"javascript:void(0);\">&gt&gt;<\\/a><\\/li>',\n        page: '<li class=\"page\"><a href=\"javascript:void(0);\">{{page}}<\\/a><\\/li>',\n        onPageChange: function onPageChange(n, type) {\n          console.log(n);\n          console.log(type);\n\n          if (type == 'init') {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            return;\n          }\n\n          $scope.ordersList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0); //让待处理全选按钮置为非选中状态\n\n          $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n          var showList = $('#dcl-sel').val() - 0;\n          var yStoresTime = $('#y-ord-sdate').val();\n          var yStoreeTime = $('#y-ord-edate').val();\n          var cjsTime = $('#cj-stime').val();\n          var cjeTime = $('#cj-etime').val();\n          var yStoreName = $.trim($('#y-pro-name').val());\n          var cjStoreName = $.trim($('#cj-pro-name').val());\n          var berName = $.trim($('.buyer-inp').val());\n          var searchinpVal = $('.ord-search-inp').val();\n          var ordType = '';\n\n          if ($('.type-sel').val() == 'All') {\n            ordType = '';\n          } else if ($('.type-sel').val() == 'Shopify Imported') {\n            ordType = '2';\n          } else if ($('.type-sel').val() == 'Excel Imported') {\n            ordType = '1';\n          }\n\n          var orData = {};\n          tjFun(orData);\n          orData.data.page = n;\n          orData.data = JSON.stringify(orData.data);\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), function (data) {\n            // console.log(data.data)\n            console.log(data.data.result);\n            var list1 = data.data.result;\n            $scope.list = JSON.parse(list1);\n            console.log($scope.list);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            logisRemark($scope.list);\n          }, function (err) {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          });\n        }\n      });\n    } //分页选择框的查询事件\n\n\n    $('#dcl-sel').change(function () {\n      //让待处理全选按钮置为非选中状态\n      $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n      var showList = $(this).val() - 0;\n\n      if ($scope.pcountN < 1) {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        return;\n      }\n\n      $(\".pagination-demo1\").jqPaginator({\n        totalCounts: $scope.pcountN,\n        //设置分页的总条目数\n        pageSize: showList,\n        //设置每一页的条目数\n        visiblePages: 5,\n        //显示多少页\n        currentPage: 1,\n        activeClass: 'active',\n        first: '<li class=\"first\"><a class=\"prev\" href=\"javascript:void(0);\">&lt&lt;<\\/a><\\/li>',\n        prev: '<li class=\"prev\"><a class=\"prev\" href=\"javascript:void(0);\">&lt;<\\/a><\\/li>',\n        next: '<li class=\"next\"><a class=\"next\" href=\"javascript:void(0);\">&gt;<\\/a><\\/li>',\n        last: '<li class=\"last\"><a class=\"prev\" href=\"javascript:void(0);\">&gt&gt;<\\/a><\\/li>',\n        page: '<li class=\"page\"><a href=\"javascript:void(0);\">{{page}}<\\/a><\\/li>',\n        onPageChange: function onPageChange(n) {\n          $scope.ordersList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n\n          if ($('.type-sel').val() == 'All') {\n            ordType = '';\n          } else if ($('.type-sel').val() == 'Shopify Imported') {\n            ordType = '2';\n          } else if ($('.type-sel').val() == 'Excel Imported') {\n            ordType = '1';\n          }\n\n          var orData = {};\n          tjFun(orData);\n          orData.data.page = n;\n          orData.data.limit = showList;\n          orData.data = JSON.stringify(orData.data); // console.log(orData.data)\n\n          console.log(JSON.stringify(orData));\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), dclsFun, dcleFun);\n\n          function dclsFun(data) {\n            console.log(data.data);\n            var list1 = data.data.result;\n            console.log(data.data.result); // console.log(list);\n\n            $scope.list = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList); //获取总订单的条数\n\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            logisRemark($scope.list);\n          }\n\n          function dcleFun() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          }\n        }\n      });\n    }); //按店铺搜索订单\n\n    $scope.storeChangeFun = function () {\n      console.log($scope.storeName);\n      $scope.ordersList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var orData = {};\n      tjFun(orData);\n\n      if (!$scope.storeName) {\n        orData.data.storeNumber = '';\n      } else {\n        orData.data.storeNumber = $scope.storeName;\n      }\n\n      orData.data.storage = $scope.storage;\n      orData.data = JSON.stringify(orData.data);\n      console.log(orData.data);\n      console.log(JSON.stringify(orData));\n      dsp.postFun('app/order/queryOrders', JSON.stringify(orData), function (data) {\n        //让待处理全选按钮置为非选中状态\n        $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        console.log(data.data.result);\n        var list1 = data.data.result; // console.log(list);\n\n        $scope.list = data.data.result;\n        $scope.list = JSON.parse(list1);\n        $scope.ordersList = $scope.list.ordersList;\n        console.log($scope.ordersList);\n        $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n        if ($scope.pcountN > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          addNotSjFun();\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        logisRemark($scope.list);\n        importFun(); //分页函数\n      }, function (err) {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      });\n    }; //按条件分页 下\n\n\n    $('.ip-jump-btn2').click(function () {\n      var selectVal = 1; //复选框的值\n\n      selectVal = $('.ip-select-num2').val() - 0; // alert(selectVal);\n      // var inpVal = 0;//存储输入框的值\n\n      var inpVal = $('.inp-num-go2').val() - 0; //输入框 需要跳到第几页\n      // alert(inpVal)\n\n      if (inpVal == '' || inpVal < 1) {\n        layer.closeAll(\"loading\");\n        layer.msg('Page does not exist.');\n        return;\n      }\n\n      var countN = Math.ceil($scope.pcountN / selectVal); // alert(countN)\n\n      if (inpVal > countN) {\n        layer.closeAll(\"loading\");\n        layer.msg('Please input number less than page amount.');\n        return;\n      } //让全选按钮置为非选中状态\n\n\n      $('.zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n      $(\".pagination-demo1\").jqPaginator({\n        totalCounts: $scope.pcountN,\n        //设置分页的总条目数\n        pageSize: selectVal,\n        //设置每一页的条目数\n        visiblePages: 5,\n        //显示多少页\n        currentPage: inpVal,\n        activeClass: 'active',\n        first: '<li class=\"first\"><a class=\"prev\" href=\"javascript:void(0);\">&lt&lt;<\\/a><\\/li>',\n        prev: '<li class=\"prev\"><a class=\"prev\" href=\"javascript:void(0);\">&lt;<\\/a><\\/li>',\n        next: '<li class=\"next\"><a class=\"next\" href=\"javascript:void(0);\">&gt;<\\/a><\\/li>',\n        last: '<li class=\"last\"><a class=\"prev\" href=\"javascript:void(0);\">&gt&gt;<\\/a><\\/li>',\n        page: '<li class=\"page\"><a href=\"javascript:void(0);\">{{page}}<\\/a><\\/li>',\n        onPageChange: function onPageChange(n) {\n          $scope.ordersList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          var orData = {};\n          tjFun(orData);\n          orData.data.page = n;\n          orData.data = JSON.stringify(orData.data);\n          console.log(JSON.stringify(orData));\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), function (data) {\n            console.log(data.data);\n            var list1 = data.data.result;\n            $scope.list = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            logisRemark($scope.list);\n          }, function (err) {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          });\n        }\n      });\n    }); //用订单号搜索 orderNumber\n\n    $scope.searchKeydown = function (e) {\n      if (e.keyCode == 13) {\n        $scope.ordnumSearch();\n      }\n    };\n\n    $scope.ordnumSearch = function () {\n      $scope.addressOrderList = [];\n      console.log($scope.addressOrderList);\n      $scope.ordersList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var orData = {};\n      tjFun(orData);\n      orData.data = JSON.stringify(orData.data);\n      console.log(orData.data);\n      console.log(JSON.stringify(orData)); // alert(inpVal)\n\n      dsp.postFun('app/order/queryOrders', JSON.stringify(orData), dclsFun, dcleFun);\n\n      function dclsFun(data) {\n        //让待处理全选按钮置为非选中状态\n        $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        console.log(data.data.result);\n        var list1 = data.data.result;\n        $scope.list = data.data.result;\n        $scope.list = JSON.parse(list1);\n        $scope.ordersList = $scope.list.ordersList;\n        console.log($scope.ordersList);\n        $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n        if ($scope.pcountN > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          addNotSjFun();\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        logisRemark($scope.list);\n        importFun();\n        $scope.zchecked_all = false;\n      }\n\n      function dcleFun() {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      }\n    }; // function pselwlFun() {\n    //   $('.dcl-ord .order-detail').each(function () {\n    //     if ($(this).children('.dcl-ord-wltd').children('.dcl-ord-selwl').val() == 'Please select') {\n    //       $(this).children('.dcl-ord-wltd').children('.dcl-ord-selwl').css('border', '1px solid #f88f29');\n    //     } else {\n    //       $(this).children('.dcl-ord-wltd').children('.dcl-ord-selwl').css('border', '1px solid #ececec');\n    //     }\n    //   })\n    // }\n    //给左侧的导航添加滚动事件\n\n\n    $(document).scroll(function () {\n      if ($(document).scrollTop() >= 0) {\n        $('.left-nav').css({\n          position: 'fixed',\n          top: '80px'\n        });\n\n        if ($(document).scrollTop() >= 52) {\n          $('.back-wrap').css({\n            top: '80px'\n          });\n        } else {\n          $('.back-wrap').css({\n            top: '130px'\n          });\n        }\n      } else {\n        $('.left-nav').css({\n          position: 'relative',\n          top: '80px'\n        });\n      }\n    }); //高级搜索部分的查询\n\n    $('#tj-search-btn').click(function () {\n      $scope.ordersList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var orData = {};\n      tjFun(orData);\n      orData.data = JSON.stringify(orData.data);\n      console.log(orData.data);\n      console.log(JSON.stringify(orData));\n      dsp.postFun('app/order/queryOrders', JSON.stringify(orData), dclsFun, dcleFun);\n\n      function dclsFun(data) {\n        //让待处理全选按钮置为非选中状态\n        $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        console.log(data.data);\n        var list1 = data.data.result;\n        $scope.list = JSON.parse(list1);\n        $scope.ordersList = $scope.list.ordersList;\n        console.log(data.data.result);\n        $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n        // alert($scope.pcountN)\n\n        if ($scope.pcountN > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          addNotSjFun();\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        logisRemark($scope.list);\n        importFun(); //分页函数\n\n        $scope.zchecked_all = false;\n      }\n\n      function dcleFun() {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      }\n    }); //高级搜索里面的按订单类型搜索\n\n    $('.type-sel').change(function () {\n      $scope.ordersList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var orData = {};\n      tjFun(orData);\n      orData.data = JSON.stringify(orData.data);\n      console.log(orData.data);\n      console.log(JSON.stringify(orData));\n      dsp.postFun('app/order/queryOrders', JSON.stringify(orData), dclsFun, dcleFun);\n\n      function dclsFun(data) {\n        //让待处理全选按钮置为非选中状态\n        $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        console.log(data.data);\n        var list1 = data.data.result;\n        console.log(data.data.result);\n        $scope.list = data.data.result;\n        $scope.list = JSON.parse(list1);\n        $scope.ordersList = $scope.list.ordersList;\n        console.log($scope.ordersList);\n        $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n        // alert($scope.pcountN)\n\n        if ($scope.pcountN > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          addNotSjFun();\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        logisRemark($scope.list);\n        importFun(); //分页函数\n      }\n\n      function dcleFun() {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      }\n    }); //cj商品名字跳转到cj详情页\n\n    $scope.cjdetailhref = function (orditem, spitem) {\n      var id = spitem.cjProductId;\n      window.open('product-detail.html?id=' + id);\n    }; //商品名字跳转客户后台\n\n\n    $scope.hrefFun = function (orditem, spitem) {\n      console.log(orditem.STORE_NAME);\n      var storeName = orditem.STORE_NAME;\n      console.log(spitem.product_id);\n      var productId = spitem.product_id;\n\n      if (storeName == \"Excel Imported\") {\n        return;\n      } else {\n        window.open('https://' + storeName + '.myshopify.com/admin/products/' + productId);\n      }\n    };\n\n    function addNotSjFun() {\n      dsp.addNodataPic($('.orders-list'), $(window).height() - 171, 47, 0, {\n        width: '100%'\n      }, true);\n      $('.deal-orders').css('min-height', $('.cj-nodata-pic').height() + 50);\n    } //cj开始日期搜索\n\n\n    $(\"#cj-stime\").click(function () {\n      var cjendtime = $(\"#cj-stime\").val();\n      var interval = setInterval(function () {\n        var endtime2 = $(\"#cj-stime\").val();\n\n        if (endtime2 != cjendtime) {\n          var _dclsFun14 = function _dclsFun14(data) {\n            //让待处理全选按钮置为非选中状态\n            $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n            console.log(data.data);\n            console.log(data.data.result);\n            var list1 = data.data.result;\n            $scope.list = data.data.result;\n            $scope.list = JSON.parse(list1);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            logisRemark($scope.list);\n            importFun(); //分页函数\n          };\n\n          var _dcleFun14 = function _dcleFun14() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          };\n\n          $scope.ordersList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 210, 47, 0);\n          clearInterval(interval);\n          var orData = {};\n          tjFun(orData);\n          orData.data = JSON.stringify(orData.data);\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun14, _dcleFun14);\n        }\n      }, 100);\n    }); //cj结束日期搜索\n\n    $(\"#cj-etime\").click(function () {\n      var cjendtime = $(\"#cj-etime\").val();\n      var interval = setInterval(function () {\n        var endtime2 = $(\"#cj-etime\").val();\n\n        if (endtime2 != cjendtime) {\n          var _dclsFun15 = function _dclsFun15(data) {\n            //让待处理全选按钮置为非选中状态\n            $('#z-dcl-ord .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n            console.log(data.data);\n            var list1 = data.data.result;\n            $scope.list = data.data.result;\n            $scope.list = JSON.parse(list1);\n            console.log($scope.list);\n            $scope.ordersList = $scope.list.ordersList;\n            console.log($scope.ordersList);\n            $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n\n            if ($scope.pcountN > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n            } else {\n              addNotSjFun();\n              dsp.closeLoadPercent($('.orders-list'));\n            }\n\n            logisRemark($scope.list);\n            importFun(); //分页函数\n          };\n\n          var _dcleFun15 = function _dcleFun15() {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            dsp.cjMesFun(1);\n          };\n\n          $scope.ordersList = [];\n          dsp.loadPercent($('.orders-list'), $(window).height() - 210, 47, 0);\n          clearInterval(interval);\n          var orData = {};\n          tjFun(orData);\n          orData.data = JSON.stringify(orData.data);\n          dsp.postFun('app/order/queryOrders', JSON.stringify(orData), _dclsFun15, _dcleFun15);\n        }\n      }, 100);\n    });\n    $scope.cgxPageSize = '50';\n    $scope.cgxPageNum = '1';\n\n    if (localStorage.getItem('isOpenDraft')) {\n      openDFun();\n    } // 草稿箱 弹框\n\n\n    $scope.errorArr = [];\n\n    $scope.openDraftFun = function () {\n      localStorage.setItem('isOpenDraft', 1);\n      location.reload();\n    };\n\n    $scope.mesOrdIndex = 0;\n\n    $scope.draftFun = function () {\n      $('.draft-wrap').css({\n        display: 'block'\n      });\n      $('.draft-wrap table thead tr th img').attr('src', 'static/image/direct-orders/multiple1.png');\n      $('.draft-wrap table tbody tr td img').attr('src', 'static/image/direct-orders/multiple1.png');\n      layer.load(2);\n      dsp.postFun('app/order/getErrorAnalysisOrder', JSON.stringify(orData), con, err);\n\n      function con(res) {\n        console.log(res.data);\n        layer.closeAll(\"loading\");\n        $scope.listArr = res.data;\n        $scope.mesOrdIndex = 0;\n\n        for (var i = 0; i < $scope.listArr.length; i++) {\n          console.log($scope.listArr[i].message);\n          console.log(i);\n          $scope.listArr[i].message = JSON.parse($scope.listArr[i].message);\n          console.log($scope.listArr[i].message);\n\n          for (var j = 0; j < $scope.listArr[i].message.length; j++) {\n            $scope.mesOrdIndex++;\n            $scope.listArr[i].message[j].index = $scope.mesOrdIndex;\n          }\n        }\n\n        console.log($scope.listArr);\n\n        if ($scope.listArr.length == 0) {\n          $scope.noDataFound = true;\n        }\n\n        setTimeout(function () {\n          $('.draft-wrap table tbody tr td input').focus(function () {\n            $(this).css({\n              backgroundColor: '#ccc'\n            });\n          });\n          $('.draft-wrap table tbody tr td input').blur(function () {\n            $(this).css({\n              backgroundColor: '#fff'\n            });\n          });\n        }, 500);\n      }\n\n      ;\n\n      function err(res) {\n        console.log(res);\n        $scope.noDataFound = true;\n        layer.closeAll(\"loading\");\n      }\n    }; //筛选\n\n\n    $scope.showSkuFun = function () {\n      $scope.skuFilterFlag = true;\n      var sfLenth = $scope.listArr.length;\n      $scope.skuList = [];\n\n      for (var i = 0; i < sfLenth; i++) {\n        for (var j = 0; j < $scope.listArr[i].message.length; j++) {\n          if ($scope.skuList.length > 0) {\n            for (var k = 0; k < $scope.skuList.length; k++) {\n              if ($scope.listArr[i].message[j].sku == $scope.skuList[k]) {\n                break;\n              }\n\n              if (k == $scope.skuList.length - 1) {\n                $scope.skuList.push($scope.listArr[i].message[j].sku);\n              }\n            }\n          } else {\n            $scope.skuList.push($scope.listArr[i].message[j].sku);\n          }\n        }\n      }\n    };\n\n    $scope.closeFSkuFun = function () {\n      $scope.skuFilterFlag = false;\n    }; //选中后筛选\n\n\n    $scope.sureFilSkuFun = function () {\n      $scope.skuFilterFlag = false;\n      var skuArr = [];\n      $('.sku-div .zcheckbox').each(function () {\n        if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n          skuArr.push($(this).siblings('.item-sku').text());\n        }\n      });\n      console.log(skuArr);\n      console.log($scope.listArr);\n      var sfLenth = $scope.listArr.length;\n      var filterLen = skuArr.length;\n      var arr = [];\n      $scope.mesOrdIndex = 0;\n\n      for (var i = 0; i < sfLenth; i++) {\n        // var te=[];\n        for (var j = 0; j < $scope.listArr[i].message.length; j++) {\n          for (var k = 0; k < filterLen; k++) {\n            if ($scope.listArr[i].message[j].sku == skuArr[k]) {\n              $scope.listArr[i].message[j].isShow = false;\n              $scope.mesOrdIndex++;\n              $scope.listArr[i].message[j].index = $scope.mesOrdIndex;\n              break;\n            } else {\n              $scope.listArr[i].message[j].isShow = true;\n            }\n          }\n        }\n      }\n\n      console.log($scope.listArr);\n    };\n\n    $('.sku-div').on('click', '.zcheckbox', function (event) {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n      } else if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    });\n\n    function openDFun() {\n      $('.draft-wrap').css({\n        display: 'block'\n      });\n      $('.draft-wrap table thead tr th img').attr('src', 'static/image/direct-orders/multiple1.png');\n      $('.draft-wrap table tbody tr td img').attr('src', 'static/image/direct-orders/multiple1.png');\n      layer.load(2);\n      var cgxData = {};\n      cgxData.pageSize = $scope.cgxPageSize;\n      cgxData.pageNum = $scope.cgxPageNum;\n      console.log(JSON.stringify(cgxData));\n      dsp.postFun('app/order/getErrorAnalysisOrder', JSON.stringify(cgxData), con, err);\n\n      function con(res) {\n        console.log(res.data);\n        $scope.cgxTotal = res.data.count;\n        console.log($scope.cgxTotal);\n        layer.closeAll(\"loading\");\n        $scope.listArr = res.data.list;\n        var sfLenth = $scope.listArr.length;\n        $scope.skuList = [];\n        $scope.mesOrdIndex = 0;\n\n        for (var i = 0; i < sfLenth; i++) {\n          console.log(i);\n          $scope.listArr[i].message = $scope.listArr[i].message.replace(/[\\r\\n\\t]/g, \"\");\n          $scope.listArr[i].message = JSON.parse($scope.listArr[i].message);\n\n          for (var j = 0; j < $scope.listArr[i].message.length; j++) {\n            $scope.listArr[i].message[j].isShow = false;\n\n            if ($scope.skuList.length > 0) {\n              for (var k = 0; k < $scope.skuList.length; k++) {\n                if ($scope.listArr[i].message[j].sku == $scope.skuList[k]) {\n                  break;\n                }\n\n                if (k == $scope.skuList.length - 1) {\n                  $scope.skuList.push($scope.listArr[i].message[j].sku);\n                }\n              }\n            } else {\n              $scope.skuList.push($scope.listArr[i].message[j].sku);\n            }\n\n            $scope.mesOrdIndex++;\n            $scope.listArr[i].message[j].index = $scope.mesOrdIndex;\n            console.log($scope.mesOrdIndex);\n          }\n        }\n\n        console.log($scope.listArr);\n        console.log($scope.skuList);\n\n        if ($scope.listArr.length == 0) {\n          $scope.noDataFound = true;\n        }\n\n        cgxFyFun();\n        setTimeout(function () {\n          $('.draft-wrap table tbody tr td input').focus(function () {\n            $(this).css({\n              backgroundColor: '#ccc'\n            });\n          });\n          $('.draft-wrap table tbody tr td input').blur(function () {\n            $(this).css({\n              backgroundColor: '#fff'\n            });\n          });\n        }, 500);\n      }\n\n      ;\n\n      function err(res) {\n        console.log(res);\n        $scope.noDataFound = true;\n        layer.closeAll(\"loading\");\n      }\n    }\n\n    function cgxFyFun() {\n      if ($scope.cgxTotal < 1) {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        return;\n      }\n\n      $(\".cgx-pag-dom\").jqPaginator({\n        totalCounts: $scope.cgxTotal - 0,\n        //设置分页的总条目数\n        pageSize: $scope.cgxPageSize - 0,\n        //设置每一页的条目数\n        visiblePages: 5,\n        currentPage: $scope.cgxPageNum - 0,\n        activeClass: 'active',\n        first: '<li class=\"first\"><a class=\"prev\" href=\"javascript:void(0);\">&lt&lt;<\\/a><\\/li>',\n        prev: '<li class=\"prev\"><a class=\"prev\" href=\"javascript:void(0);\">&lt;<\\/a><\\/li>',\n        next: '<li class=\"next\"><a class=\"next\" href=\"javascript:void(0);\">&gt;<\\/a><\\/li>',\n        last: '<li class=\"last\"><a class=\"prev\" href=\"javascript:void(0);\">&gt&gt;<\\/a><\\/li>',\n        page: '<li class=\"page\"><a href=\"javascript:void(0);\">{{page}}<\\/a><\\/li>',\n        onPageChange: function onPageChange(n, type) {\n          console.log(n);\n          console.log(type);\n\n          if (type == 'init') {\n            layer.closeAll(\"loading\");\n            dsp.closeLoadPercent($('.orders-list'));\n            return;\n          }\n\n          $scope.cgxPageNum = n + '';\n          openDFun();\n        }\n      });\n    }\n\n    $scope.cgxChangeFun = function () {\n      $scope.cgxPageNum = '1';\n      openDFun();\n    };\n\n    $scope.cgxGoFun = function () {\n      var pageCount = Math.ceil($scope.cgxTotal / $scope.cgxPageNum);\n      console.log(pageCount);\n\n      if (pageCount < $scope.cgxPageNum) {\n        layer.msg('Please input number less than page amount.');\n        return;\n      }\n\n      openDFun();\n    };\n\n    var draftSelectNum = 0; // 选中一条\n\n    $scope.selectItemFun = function ($event) {\n      if ($($event.target).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $($event.target).attr('src', 'static/image/direct-orders/multiple2.png');\n        draftSelectNum++;\n\n        if (draftSelectNum == $('.draft-box .selectBtn .xuhao-sty').length) {\n          $('.draft-box .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else if ($($event.target).attr('src') == 'static/image/direct-orders/multiple2.png') {\n        $($event.target).attr('src', 'static/image/direct-orders/multiple1.png');\n        draftSelectNum--;\n\n        if (draftSelectNum != $('.draft-box .selectBtn .xuhao-sty').length) {\n          $('.draft-box .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n\n      console.log(draftSelectNum);\n    }; // 全选\n\n\n    $scope.selectAllFun = function ($event) {\n      if ($($event.target).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $($event.target).attr('src', 'static/image/direct-orders/multiple2.png');\n        draftSelectNum = $('.draft-box .selectBtn .xuhao-sty').length;\n        $('.draft-box .selectBtn .xuhao-sty').children('img').attr('src', 'static/image/direct-orders/multiple2.png');\n      } else {\n        $($event.target).attr('src', 'static/image/direct-orders/multiple1.png');\n        draftSelectNum = 0;\n        $('.draft-box .selectBtn .xuhao-sty').children('img').attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    }; // Cancel 按钮\n\n\n    $scope.draftCancelFun = function () {\n      localStorage.removeItem('isOpenDraft');\n      $('.draft-wrap').css({\n        display: 'none'\n      });\n      $('.draft-wrap table thead tr th img').attr('src', 'static/image/direct-orders/multiple1.png');\n      $('.draft-wrap table tbody tr td img').attr('src', 'static/image/direct-orders/multiple1.png');\n      $scope.ordersList = [];\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var showList = $('#dcl-sel').val() - 0;\n      var orData = {};\n      tjFun(orData);\n      orData.data = JSON.stringify(orData.data);\n      dsp.postFun('app/order/queryOrders', JSON.stringify(orData), dclsFun, dcleFun);\n\n      function dclsFun(data) {\n        console.log(data.data);\n        var list1 = data.data.result;\n        $scope.list = JSON.parse(list1);\n        $scope.ordersList = $scope.list.ordersList;\n        console.log($scope.ordersList);\n        $scope.pcountN = $scope.list.countNumber; //获取总订单的条数\n        // layer.msg('Please check the failed ones on the Draft.')\n\n        if ($scope.pcountN > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n        } else {\n          addNotSjFun();\n          dsp.closeLoadPercent($('.orders-list'));\n        }\n\n        $scope.ordstatusNum = $scope.list.allOrderCount2; //各种状态订单的数量\n\n        logisRemark($scope.list);\n        importFun(); //分页函数\n\n        numFun(); //调用给订单赋值的函数\n      }\n\n      function dcleFun() {\n        layer.closeAll(\"loading\");\n        dsp.closeLoadPercent($('.orders-list'));\n        dsp.cjMesFun(1);\n      }\n    }; // submit 按钮\n\n\n    $scope.submitList = [];\n\n    $scope.draftSubmitFun = function () {\n      if (draftSelectNum > 0) {\n        var submitDraft = {};\n        var trID = [];\n        var trMessage = [[\"ordernumber\", \"sku\", \"quantity\", \"producttitle\", \"customername\", \"address1\", \"address2\", \"city\", \"province\", \"zip\", \"country\", \"shippingphonenumber\", \"taxnumber\", \"shipstationid\", \"logisticsType\", \"datasource\", \"shippingMethodId\", \"productId\", \"salesorderrowid\", \"warehouse\", \"price\", \"currency\"]];\n        $('.draft-box .zcheckbox').each(function () {\n          if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n            console.log($(this).parent().siblings('.draft-id').children('input').val());\n            var trid = $(this).parent().parent().siblings('.draft-id').children('input').val();\n            var OrderNumber = $(this).parent().parent().siblings('.draf-order-num').children('input').val();\n            var SKU = $(this).parent().parent().siblings('.draf-sku').children('input').val();\n            var Quantity = $(this).parent().parent().siblings('.draf-quantity').children('input').val();\n            var ProductTitle = $(this).parent().parent().siblings('.draf-product-title').children('input').val();\n            var CustomerName = $(this).parent().parent().siblings('.draf-customer-name').children('input').val();\n            var Address1 = $(this).parent().parent().siblings('.draft-address1').children('input').val();\n            var Address2 = $(this).parent().parent().siblings('.draft-address2').children('input').val();\n            var City = $(this).parent().parent().siblings('.draft-city').children('input').val();\n            var Province = $(this).parent().parent().siblings('.draft-province').children('input').val();\n            var ZIP = $(this).parent().parent().siblings('.draft-zip').children('input').val();\n            var Country = $(this).parent().parent().siblings('.draft-country').children('input').val();\n            var ShippPhoneNum = $(this).parent().parent().siblings('.draft-shop-phonenum').children('input').val();\n            var taxNumber = $(this).parent().parent().siblings('.draft-tax-number').children('input').val();\n            var Describe = $(this).parent().parent().siblings('.draft-describe').children('input').val();\n            var Shipstationid = $(this).parent().parent().siblings('.draft-shipstationid').children('input').val();\n            var draftLogistic = $(this).parent().parent().siblings('.draft-logistictype').children('input').val();\n            var datasource = $(this).parent().parent().siblings('.datasource-td').children('input').val();\n            var shippingMethodId = $(this).parent().parent().siblings('.shippingMethodId-td').children('input').val();\n            var productId = $(this).parent().parent().siblings('.productid-td').children('input').val();\n            var price = $(this).parent().parent().siblings('.price-td').children('input').val();\n            var currency = $(this).parent().parent().siblings('.currency-td').children('input').val();\n            var salesorderrowid = $(this).parent().parent().siblings('.selesid-td').children('input').val();\n            var warehouse = $(this).parent().parent().siblings('.warehouse-td').children('input').val();\n            console.log(Shipstationid);\n            console.log(productId);\n            var tr1message = [OrderNumber, SKU, Quantity, ProductTitle, CustomerName, Address1, Address2, City, Province, ZIP, Country, ShippPhoneNum, taxNumber, Shipstationid, draftLogistic, datasource, shippingMethodId, productId, salesorderrowid, warehouse, price, currency];\n            trID.push(trid);\n            trMessage.push(tr1message);\n            submitDraft.id = trID;\n            submitDraft.message = trMessage;\n            console.log(tr1message);\n          }\n        });\n        console.log(trID);\n        console.log(trMessage);\n        console.log(submitDraft);\n        $scope.submitTip = true;\n        $scope.deleteTip = false;\n        $('.btnsTip').css({\n          display: 'block'\n        });\n\n        $scope.yesFun = function () {\n          // alert('submit');\n          $('.btnsTip').css({\n            display: 'none'\n          });\n          dsp.postFun('order/oldOrder/reAnalysisOrder', JSON.stringify(submitDraft), draftcFun, drafteFun);\n\n          function draftcFun(res) {\n            console.log(res);\n            console.log(res.data);\n            var restr = JSON.parse(res.data.message);\n            console.log(restr);\n            layer.closeAll(\"loading\");\n\n            if (res.data.statusCode == '200' && restr.result == 'true') {\n              openDFun();\n              $scope.ProductNum = restr.totalNumber - 0;\n              $scope.SuccessNum = restr.success - 0;\n              $scope.FailedNum = restr.nothing - 0;\n              $scope.TotalNum = $scope.SuccessNum + $scope.FailedNum;\n              $('.ordersTip').css({\n                display: 'block'\n              });\n\n              $scope.confirmFun = function () {\n                $('.ordersTip').css({\n                  display: 'none'\n                });\n              };\n            }\n\n            if (res.data.statusCode != '200') {\n              layer.msg(\"Submit Failed!\");\n            }\n          }\n\n          ;\n\n          function drafteFun(res) {\n            console.log(res);\n            layer.closeAll(\"loading\");\n            layer.msg(\"Submit failed!\");\n          }\n        };\n\n        $scope.noFun = function () {\n          // alert('submit');\n          $('.btnsTip').css({\n            display: 'none'\n          });\n        };\n      } else {\n        layer.msg('Please select orders！');\n      }\n    }; // Save 按钮\n\n\n    $scope.draftSaveFun = function () {\n      // alert(draftSelectNum);\n      if (draftSelectNum > 0) {\n        var draftcFun = function draftcFun(res) {\n          console.log(res);\n          layer.closeAll(\"loading\");\n          layer.msg(\"Save successfully!\");\n        };\n\n        var drafteFun = function drafteFun(res) {\n          console.log(res);\n          layer.closeAll(\"loading\");\n        };\n\n        var saveDraft = {};\n        var trID = [];\n        var UUID = [];\n        var trMessages = [];\n        $('.draft-box .zcheckbox').each(function () {\n          if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n            var trmessage = {};\n            var trid = $(this).parent().parent().siblings('.draft-id').children('input').val();\n            var OrderNumber = $(this).parent().parent().siblings('.draf-order-num').children('input').val();\n            var SKU = $(this).parent().parent().siblings('.draf-sku').children('input').val();\n            var Quantity = $(this).parent().parent().siblings('.draf-quantity').children('input').val();\n            var ProductTitle = $(this).parent().parent().siblings('.draf-product-title').children('input').val();\n            var CustomerName = $(this).parent().parent().siblings('.draf-customer-name').children('input').val();\n            var uuid = $(this).parent().parent().siblings('.draft-uuid').children('input').val();\n            var Address1 = $(this).parent().parent().siblings('.draft-address1').children('input').val();\n            var Address2 = $(this).parent().parent().siblings('.draft-address2').children('input').val();\n            var City = $(this).parent().parent().siblings('.draft-city').children('input').val();\n            var Province = $(this).parent().parent().siblings('.draft-province').children('input').val();\n            var ZIP = $(this).parent().parent().siblings('.draft-zip').children('input').val();\n            var Country = $(this).parent().parent().siblings('.draft-country').children('input').val();\n            var ShippPhoneNum = $(this).parent().parent().siblings('.draft-shop-phonenum').children('input').val();\n            var taxNumber = $(this).parent().parent().siblings('.draft-tax-number').children('input').val();\n            var Describe = $(this).parent().parent().siblings('.draft-describe').children('input').val();\n            var YY = $(this).siblings('.yy').text();\n            var HH = $(this).siblings('.hh').text();\n            var Shipstationid = $(this).parent().parent().siblings('.draft-shipstationid').children('input').val();\n            var datasource = $(this).parent().parent().siblings('.datasource-td').children('input').val();\n            var shippingMethodId = $(this).parent().parent().siblings('.shippingMethodId-td').children('input').val();\n            var productId = $(this).parent().parent().siblings('.productid-td').children('input').val();\n            var price = $(this).parent().parent().siblings('.price-td').children('input').val();\n            var currency = $(this).parent().parent().siblings('.currency-td').children('input').val();\n            var salesorderrowid = $(this).parent().parent().siblings('.selesid-td').children('input').val();\n            var warehouse = $(this).parent().parent().siblings('.warehouse-td').children('input').val();\n            console.log(Shipstationid);\n            console.log($(this).parent().parent().siblings('.draft-shipstationid').children('input'));\n            trmessage.zip = ZIP;\n            trmessage.error = Describe;\n            trmessage.customername = CustomerName;\n            trmessage.address1 = Address1;\n            trmessage.address2 = Address2;\n            trmessage.city = City;\n            trmessage.province = Province;\n            trmessage.shippingphonenumber = ShippPhoneNum;\n            trmessage.ordernumber = OrderNumber;\n            trmessage.producttitle = ProductTitle;\n            trmessage.quantity = Quantity;\n            trmessage.sku = SKU;\n            trmessage.country = Country;\n            trmessage.yyhh = YY;\n            trmessage.hh = HH;\n            trmessage.shipstationid = Shipstationid;\n            trmessage.datasource = datasource;\n            trmessage.shippingMethodId = shippingMethodId;\n            trmessage.productId = productId;\n            trmessage.price = price;\n            trmessage.currency = currency;\n            trmessage.salesorderrowid = salesorderrowid;\n            trmessage.warehouse = warehouse;\n            trmessage.taxnumber = taxNumber;\n            console.log(trmessage);\n            UUID.push(uuid);\n            trID.push(trid);\n            trMessages.push(trmessage);\n            saveDraft.id = trID;\n            saveDraft.uuids = UUID;\n            saveDraft.messages = trMessages;\n          }\n        }); // console.log(trID);\n\n        console.log(trMessages);\n        console.log(saveDraft);\n        layer.load(2);\n        dsp.postFun('app/order/upAnalysisOrder', JSON.stringify(saveDraft), draftcFun, drafteFun);\n        ;\n      } else {\n        layer.msg('Please select orders！');\n      }\n    }; // Delete 按钮\n\n\n    $scope.draftDeleteFun = function () {\n      // alert(draftSelectNum);\n      if (draftSelectNum > 0) {\n        var errorIds = {};\n        var ids = [];\n        var uuids = [];\n        $('.draft-box .zcheckbox').each(function () {\n          if ($(this).attr('src') == 'static/image/direct-orders/multiple2.png') {\n            var trid = $(this).parent().parent().siblings('.draft-id').children('input').val();\n            var uuid = $(this).parent().parent().siblings('.draft-uuid').children('input').val();\n            ids.push(trid);\n            uuids.push(uuid); // $(this).parent().parent().remove();\n\n            $(this).attr('src') == 'static/image/direct-orders/multiple1.png';\n            console.log($(this).parent().parent());\n          }\n        });\n        errorIds.ids = ids;\n        errorIds.uuids = uuids;\n        console.log(ids);\n        console.log(uuids);\n        console.log(errorIds);\n        $scope.submitTip = false;\n        $scope.deleteTip = true;\n        $('.btnsTip').css({\n          display: 'block'\n        });\n\n        $scope.yesFun = function () {\n          // alert('del');\n          $('.btnsTip').css({\n            display: 'none'\n          });\n          layer.load(2);\n          dsp.postFun('app/order/deleteErrorAnalysisOrder', JSON.stringify(errorIds), draftcFun, drafteFun);\n\n          function draftcFun(res) {\n            console.log(res);\n            layer.closeAll(\"loading\");\n            layer.msg(\"Delete successfully!\"); // $scope.draftFun();\n\n            openDFun();\n          }\n\n          ;\n\n          function drafteFun(res) {\n            console.log(res);\n            layer.closeAll(\"loading\");\n          }\n        };\n\n        $scope.noFun = function () {\n          // alert('del');\n          $('.btnsTip').css({\n            display: 'none'\n          });\n        };\n      } else {\n        layer.msg('Please select orders！');\n      }\n    }; //检查没有拉取到订单的原因\n\n\n    $scope.noOrdResonFlag = false;\n    $scope.resResonFlag = false; //展示后台返回的没有订单原因的弹框\n\n    $scope.isSelTimeFlag = true;\n\n    $scope.noOrdResonFun = function (event) {\n      event.stopPropagation();\n      $scope.noOrdResonFlag = true;\n    };\n\n    $scope.noOrdSureFun = function () {\n      if ($scope.shopOrdNum == 'undefined' || $scope.shopOrdNum == '') {\n        layer.msg('Please enter the order number in your shop.');\n        return;\n      }\n\n      $scope.productYmBtn = false;\n      layer.load(2);\n      dsp.postFun('app/order/checkSyncOrder', {\n        customerOrderId: $scope.shopOrdNum\n      }, function (data) {\n        console.log(data); // layer.closeAll(\"loading\")\n\n        $scope.noOrdResonFlag = false;\n\n        if (data.data.result != '') {\n          var cusOrdNum = $scope.shopOrdNum;\n\n          if (data.data.result == '1') {\n            if ($scope.shopOrdNum.indexOf('#') == -1) {\n              dsp.postFun('app/order/checkSyncOrder', {\n                customerOrderId: '#' + cusOrdNum\n              }, function (data) {\n                layer.closeAll(\"loading\");\n                $scope.resResonFlag = true; //打开订单未拉取的原因\n\n                $('.no-ordres-reson').text(data.data.result);\n\n                if (data.data.result == '1') {\n                  $scope.isSelTimeFlag = false;\n\n                  if (data.data.data == '1') {\n                    $scope.seaNowTime = \"Sorry, we has not pulled this order from your store yet.\";\n                  } else {\n                    $scope.seaNowTime = data.data.date;\n                  }\n                }\n              }, function (data) {\n                layer.closeAll(\"loading\");\n                console.log(data);\n              });\n            } else {\n              cusOrdNum = cusOrdNum.replace('#', '');\n              console.log(cusOrdNum);\n              dsp.postFun('app/order/checkSyncOrder', {\n                customerOrderId: cusOrdNum\n              }, function (data) {\n                layer.closeAll(\"loading\");\n                $scope.resResonFlag = true; //打开订单未拉取的原因\n\n                $('.no-ordres-reson').text(data.data.result);\n\n                if (data.data.result == '1') {\n                  $scope.isSelTimeFlag = false;\n\n                  if (data.data.data == '1') {\n                    $scope.seaNowTime = \"Sorry, we has not pulled this order from your store yet.\";\n                  } else {\n                    $scope.seaNowTime = data.data.date;\n                  }\n                }\n              }, function (data) {\n                layer.closeAll(\"loading\");\n                console.log(data);\n              });\n            }\n          } else {\n            layer.closeAll(\"loading\");\n            $scope.resResonFlag = true; //打开订单未拉取的原因\n\n            $('.no-ordres-reson').text(data.data.result);\n\n            if (data.data.result.indexOf('It looks that you had modified your store products recently') != -1) {\n              $scope.productYmBtn = true;\n            }\n\n            console.log(data.data);\n          }\n        } else {\n          layer.closeAll(\"loading\");\n          layer.msg('The query fails.');\n        }\n      }, function (data) {\n        layer.closeAll(\"loading\");\n        console.log(data);\n      });\n    };\n\n    $scope.productLinkFun = function () {\n      window.open('#/products-connection/connected');\n    };\n\n    $scope.noOrdQxFun = function () {\n      $scope.noOrdResonFlag = false;\n    };\n\n    $scope.closeResReasonFun = function () {\n      $scope.resResonFlag = false;\n      $('.no-ordres-reson').text('');\n    }; //查看订单状态的下拉框\n\n\n    $scope.syStuFlag = false; //更新订单\n\n    var issyFlag = localStorage.getItem('issy');\n    console.log(issyFlag);\n\n    if (issyFlag) {\n      $scope.syStuFlag = true;\n      localStorage.setItem('issy', 1);\n      $scope.syStu = 1; // app/order\n\n      dsp.postFun('order/oldOrder/getNewestOrder', {\n        type: 'start'\n      }, function (data) {\n        console.log(data);\n\n        if (data.data.result != 'error') {\n          $scope.resOrdStu = data.data.result - 0;\n        }\n\n        console.log($scope.resOrdStu);\n\n        if ($scope.resOrdStu != 5) {\n          var stuTimer = setInterval(function () {\n            getOrdSyFun(); // console.log('567')\n\n            if ($scope.resOrdStu == 5) {\n              localStorage.removeItem('issy');\n              $scope.syStu = 2;\n              $('.reordstu-dlist').animate({\n                height: '360px'\n              }, 300);\n              clearInterval(stuTimer);\n            }\n          }, 5000);\n          console.log(stuTimer);\n        } else {\n          $scope.syStu = 0;\n          localStorage.removeItem('issy');\n        }\n      }, function (data) {\n        console.log(data);\n      });\n    }\n\n    $scope.changesyFun = function () {\n      if ($scope.syStuFlag) {\n        $scope.syStuFlag = false;\n      } else {\n        $scope.syStuFlag = true;\n      }\n    };\n\n    $scope.syStu = 0;\n    $scope.resOrdStu = 0;\n\n    $scope.startSyFun = function () {\n      localStorage.setItem('issy', 1);\n      $scope.syStu = 1;\n      console.log($scope.isSelTimeFlag);\n      var syUpdata = {};\n      syUpdata.type = 'start';\n\n      if (!$scope.isSelTimeFlag) {\n        if (!$('#seaord-stime').val() || !$('#seaord-etime').val()) {\n          layer.msg('Please select time');\n          localStorage.removeItem('issy');\n          return;\n        }\n\n        syUpdata.startDate = $('#seaord-stime').val();\n        syUpdata.endDate = $('#seaord-etime').val();\n      }\n\n      dsp.postFun('order/oldOrder/getNewestOrder', JSON.stringify(syUpdata), function (data) {\n        console.log(data);\n\n        if (data.data.result == 'error') {\n          $scope.timeIsNValid = true;\n          layer.msg('Please enter the time as required');\n          return;\n        } else {\n          $scope.timeIsNValid = false;\n          $scope.resOrdStu = data.data.result - 0;\n        }\n\n        $scope.syStuFlag = true; //显示订单状态的面板\n\n        $scope.resResonFlag = false;\n        console.log($scope.resOrdStu);\n\n        if ($scope.resOrdStu != 5) {\n          var stuTimer = setInterval(function () {\n            getOrdSyFun();\n            console.log('567');\n\n            if ($scope.resOrdStu == 5) {\n              localStorage.removeItem('issy');\n              $scope.syStu = 2;\n              $('.reordstu-dlist').animate({\n                height: '360px'\n              }, 300);\n              clearInterval(stuTimer);\n            }\n          }, 5000);\n          console.log(stuTimer);\n        } else {\n          $scope.syStu = 0;\n          localStorage.removeItem('issy');\n        }\n      }, function (data) {\n        console.log(data);\n      });\n    };\n\n    function getOrdSyFun() {\n      var syUpdata = {};\n      syUpdata.type = 'continue';\n      dsp.postFun('order/oldOrder/getNewestOrder', JSON.stringify(syUpdata), function (data) {\n        if (data.data.result != 'error') {\n          $scope.resOrdStu = data.data.result - 0;\n        }\n      }, function (data) {\n        console.log(data);\n      });\n    } //精确按时间查找订单\n\n\n    $scope.detailSeaOrdFun = function () {\n      console.log($('#seaord-stime').val());\n      console.log($('#seaord-etime').val());\n      console.log($('#seaord-stime').val().length);\n      console.log($('#seaord-etime').val().length);\n      console.log(!$('#seaord-etime').val());\n      $scope.startSyFun();\n    }; //手动创建代发单\n\n\n    $scope.searchFor = \"sku\";\n    $scope.addProList = [];\n    $scope.addNameList = [];\n    $scope.searchForName = false;\n    $scope.cjdfdInfoFlag = false;\n    $scope.cjdfdResult = false;\n    $scope.totalPrice = 0;\n    $scope.totalCount = 0;\n    $scope.address = {\n      countryCode: \"\",\n      logistics: [],\n      shipCost: 0,\n      transferAreaId: \"\"\n    };\n    $scope.formVerify = {\n      shippingAddress: true,\n      countryCode: true,\n      province: true,\n      city: true,\n      customerName: true,\n      phone: true,\n      zip: true,\n      logisticsType: true,\n      orderNumber: true,\n      transferAreaId: true\n    };\n    console.log($scope);\n\n    $scope.addProductList = function () {\n      var key = $scope.searchFor;\n\n      if (!$scope.searchWord) {\n        layer.msg(\"Please enter keywords\");\n        return;\n      }\n\n      if ($scope.searchFor == \"sku\") {\n        layer.load(2);\n        dsp.postFun('order/manualAddCjorderController/getProductSku', _defineProperty({}, key, $scope.searchWord), function (data) {\n          console.log(data);\n          layer.closeAll(\"loading\");\n\n          if (data.data.statusCode == 200) {\n            var _data$data$result = data.data.result,\n                SKU = _data$data$result.SKU,\n                variants = _data$data$result.variants;\n            var specs = [];\n            variants.forEach(function (item) {\n              specs.push(item.VARIANTKEY);\n            });\n            data.data.result.specs = specs;\n            data.data.result.itemCount = 1;\n            var osellPrice = data.data.result.nowPrice ? data.data.result.nowPrice : data.data.result.SELLPRICE;\n            data.data.result.subs = parseFloat(osellPrice * data.data.result.itemCount).toFixed(2);\n            var isAdd = true;\n            $scope.addProList.forEach(function (item) {\n              if (item.SKU == SKU) {\n                item.itemCount += 1;\n                var oprice = item.nowPrice ? item.nowPrice : item.SELLPRICE;\n                item.subs = parseFloat(oprice * item.itemCount).toFixed(2);\n                isAdd = false;\n              }\n            });\n\n            if (isAdd) {\n              $scope.addProList.push(data.data.result);\n            }\n\n            checkPrice();\n          } else {\n            layer.msg(\"The SKU does not exist, please enter a new one.\");\n            $scope.searchWord = \"\";\n          }\n        });\n      } else {\n        searchForNameList(1, '5');\n      }\n    };\n\n    function searchForNameList(pageNum, pageSize) {\n      var _dsp$postFun2;\n\n      $scope.allProductFlag = false; //默认全选\n\n      var key = $scope.searchFor;\n      $scope.nameListPageSize = pageSize;\n      $scope.nameListPageNum = pageNum;\n      layer.load(2);\n      dsp.postFun('order/manualAddCjorderController/getProductsName', (_dsp$postFun2 = {}, _defineProperty(_dsp$postFun2, key, $scope.searchWord), _defineProperty(_dsp$postFun2, \"pageNum\", pageNum), _defineProperty(_dsp$postFun2, \"pageSize\", pageSize), _dsp$postFun2), function (data) {\n        layer.closeAll(\"loading\");\n\n        if (data.data.statusCode == 200) {\n          var res = data.data.result;\n          $scope.nameListPageCount = res.count;\n          $scope.$broadcast('page-data', {\n            pageNum: pageNum,\n            totalNum: Math.ceil(res.count / $scope.nameListPageSize),\n            totalCounts: res.count,\n            pageSize: pageSize,\n            pagesizeList: ['5', '10', '20', '30']\n          });\n          var arr = res.list;\n          $scope.searchForName = true;\n          arr.forEach(function (item) {\n            item.itemCount = 1;\n            item.subs = parseFloat(item.SELLPRICE * 1).toFixed(2);\n            var specs = [];\n            item.variants.forEach(function (it) {\n              specs.push(it.VARIANTKEY);\n            });\n            item.specs = specs; //item.VARIANTKEY = item.ASVARIANTKEY\n          });\n          $scope.addNameList = arr;\n        } else {\n          layer.msg(\"Sorry, the data is not found.\");\n          $scope.searchWord = \"\";\n        }\n      });\n    }\n\n    $scope.$on('pagedata-fa', function (d, data) {\n      //分页切换数据监听\n      console.log(data);\n      var pageNum = data.pageNum,\n          pageSize = data.pageSize;\n      var isTip = false;\n      $scope.addNameList.forEach(function (item) {\n        if (item.check) {\n          isTip = true;\n        }\n      });\n\n      if (isTip) {\n        layer.msg(\"Please add the selected products to the order list.\");\n      }\n\n      searchForNameList(pageNum, pageSize);\n    });\n\n    function checkPrice() {\n      $scope.totalPrice = 0;\n      $scope.totalCount = 0;\n      $scope.addProList.forEach(function (item) {\n        $scope.totalPrice += Number(item.subs);\n        $scope.totalCount += Number(item.itemCount);\n      });\n    }\n\n    $scope.changeSpec = function (key, idx) {\n      console.log(key);\n      console.log(idx);\n      console.log($scope.addProList);\n      $scope.addProList[idx].variants.forEach(function (item) {\n        if (item.VARIANTKEY == key) {\n          var osub = item.nowPrice ? item.nowPrice : item.SELLPRICE;\n          $scope.addProList[idx] = {\n            ID: item.ID,\n            IMG: item.IMG,\n            NAMEEN: item.NAMEEN,\n            PID: item.PID,\n            SELLPRICE: item.SELLPRICE,\n            nowPrice: item.nowPrice,\n            SKU: item.SKU,\n            itemCount: $scope.addProList[idx].itemCount,\n            VARIANTKEY: key,\n            specs: $scope.addProList[idx].specs,\n            variants: $scope.addProList[idx].variants,\n            subs: parseFloat(osub * $scope.addProList[idx].itemCount).toFixed(2)\n          };\n        }\n      });\n      $scope.addProList = uniq($scope.addProList, \"SKU\");\n      checkPrice();\n    };\n\n    $scope.deleProList = function (pro) {\n      console.log(pro);\n      $scope.addProList.forEach(function (item, idx) {\n        if (item.SKU == pro.SKU) {\n          $scope.addProList.splice(idx, 1);\n        }\n      });\n      checkPrice();\n    };\n\n    $scope.closeAddPro = closeAllCreateOrder;\n\n    function closeAllCreateOrder() {\n      $scope.searchFor = \"sku\";\n      $scope.searchWord = \"\";\n      $scope.addProList = [];\n      $scope.searchForName = false;\n      $scope.creatAddProductFlag = false;\n      $scope.totalPrice = 0;\n      $scope.totalCount = 0;\n    }\n\n    $scope.minusOne = function (count, idx) {\n      if (count == 1) return;\n      $scope.addProList[idx].itemCount -= 1;\n      var _$scope$addProList$id = $scope.addProList[idx],\n          itemCount = _$scope$addProList$id.itemCount,\n          SELLPRICE = _$scope$addProList$id.SELLPRICE,\n          nowPrice = _$scope$addProList$id.nowPrice;\n      var oprice = nowPrice ? nowPrice : SELLPRICE;\n      $scope.addProList[idx].subs = parseFloat(oprice * itemCount).toFixed(2);\n      checkPrice();\n    };\n\n    $scope.plusOne = function (count, idx) {\n      $scope.addProList[idx].itemCount += 1;\n      var _$scope$addProList$id2 = $scope.addProList[idx],\n          itemCount = _$scope$addProList$id2.itemCount,\n          SELLPRICE = _$scope$addProList$id2.SELLPRICE,\n          nowPrice = _$scope$addProList$id2.nowPrice;\n      var oprice = nowPrice ? nowPrice : SELLPRICE;\n      $scope.addProList[idx].subs = parseFloat(oprice * itemCount).toFixed(2);\n      checkPrice();\n    };\n\n    $scope.changeCount = function (count, idx) {\n      console.log(count);\n      var reg = /^[1-9]\\d*(\\.\\d+)?$/i;\n\n      if (reg.test(count)) {\n        $scope.addProList[idx].itemCount = parseInt(count);\n      } else {\n        $scope.addProList[idx].itemCount = 1;\n      }\n\n      var _$scope$addProList$id3 = $scope.addProList[idx],\n          itemCount = _$scope$addProList$id3.itemCount,\n          SELLPRICE = _$scope$addProList$id3.SELLPRICE,\n          nowPrice = _$scope$addProList$id3.nowPrice;\n      var oprice = nowPrice ? nowPrice : SELLPRICE;\n      $scope.addProList[idx].subs = parseFloat(oprice * itemCount).toFixed(2);\n      checkPrice();\n    };\n\n    function uniq(array, gWord) {\n      var res = [];\n      array.map(function (item) {\n        var flag = true;\n        res.map(function (it) {\n          if (item[gWord] === it[gWord]) {\n            flag = false;\n            it.itemCount += item.itemCount;\n            it.subs = parseFloat(it.SELLPRICE * it.itemCount).toFixed(2);\n          }\n\n          return false;\n        });\n\n        if (flag) {\n          res.push(item);\n        }\n\n        return false;\n      });\n      return res;\n    }\n\n    $scope.selectAllPro = function (e) {\n      $scope.allProductFlag = e.target.checked;\n\n      if ($scope.allProductFlag) {\n        $scope.addNameList.forEach(function (item) {\n          item.check = true;\n        });\n      } else {\n        $scope.addNameList.forEach(function (item) {\n          item.check = false;\n        });\n      }\n    };\n\n    $scope.itemSleletPro = function (e, pro) {\n      pro.check = e.target.checked;\n\n      if (e.target.checked) {\n        var num = 0;\n        $scope.addNameList.forEach(function (item) {\n          if (item.check) {\n            num++;\n          }\n        });\n\n        if (num == $scope.addNameList.length) {\n          $scope.allProductFlag = true;\n        }\n      } else {\n        console.log(99);\n        $scope.allProductFlag = false;\n      }\n    };\n\n    $scope.addNameSearchList = function () {\n      var arr = [];\n      console.log($scope.addNameList);\n      $scope.addNameList.forEach(function (item) {\n        if (item.check) {\n          var objString = JSON.stringify(item);\n          var obj2 = JSON.parse(objString);\n          arr.push(obj2);\n        }\n\n        item.check = false;\n      });\n\n      if (arr.length == 0) {\n        layer.msg(\"Please select products.\");\n      } else {\n        arr.forEach(function (item) {\n          var isAdd = true;\n          $scope.addProList.forEach(function (it) {\n            if (it.SKU == item.SKU) {\n              it.itemCount += 1;\n              it.subs = parseFloat(it.SELLPRICE * it.itemCount).toFixed(2);\n              isAdd = false;\n            }\n          });\n\n          if (isAdd) {\n            $scope.addProList.push(item);\n          }\n        });\n        $scope.allProductFlag = false;\n        layer.msg(\"Added successfully！\");\n      }\n\n      checkPrice();\n    };\n\n    $scope.closeNameSearch = closeNameSearch;\n\n    function closeNameSearch() {\n      $scope.searchForName = false;\n      $scope.allProductFlag = false;\n    }\n\n    $scope.checkoutOrderList = function () {\n      if ($scope.addProList.length == 0) {\n        layer.msg(\"Please add the product information.\");\n      } else {\n        $scope.cjdfdInfoFlag = true;\n        $scope.productOrPackage = null;\n        getShipFrom();\n        getShipingMethod();\n      }\n    };\n\n    function getShipFrom() {\n      dsp.postFun(\"warehouseBuildWeb/management/getAreaInfoById\", {\n        pageNum: 1,\n        pageSize: 10\n      }, function (res) {\n        layer.closeAll(\"loading\"); //console.log(res)\n\n        var _res$data = res.data,\n            code = _res$data.code,\n            data = _res$data.data;\n\n        if (code == 200) {\n          $scope.warehouseList = data;\n        }\n      });\n    }\n\n    $scope.getShipingMethod = getShipingMethod;\n\n    function getShipingMethod() {\n      var list = [];\n      console.log($scope.address);\n      $scope.addProList.forEach(function (item) {\n        var li = {\n          id: item.ID,\n          sku: item.SKU,\n          quantity: item.itemCount\n        };\n        list.push(li);\n      });\n      layer.load(2);\n      dsp.postFun(\"order/manualAddCjorderController/insertOrder\", {\n        countryCode: $scope.address.countryCode || \"\",\n        countLogistics: true,\n        variantsList: list,\n        merchantnNumber: $scope.userId,\n        zip: $scope.address.zip,\n        transferAreaId: $scope.address.transferAreaId || \"\",\n        phone: $scope.address.phone || \"\"\n      }, function (data) {\n        layer.closeAll(\"loading\");\n        var _data$data = data.data,\n            statusCode = _data$data.statusCode,\n            result = _data$data.result;\n\n        if (statusCode == 200) {\n          $scope.address.logistics = result.logistics;\n          $scope.address.logisticsType = result.logistics[0] ? result.logistics[0].logisticName : \"\";\n          $scope.address.shipCost = result.logistics[0] ? result.logistics[0].price : 0;\n          $scope.packPrice = result.logistics[0] ? result.logistics[0].packPrice : 0;\n          $scope.productOrPackage = $scope.productOrPackage ? $scope.productOrPackage : result.productList || [];\n          checkTotalAmount();\n        }\n      });\n    }\n\n    $scope.changeShipMethod = function (name) {\n      $scope.address.logistics.forEach(function (item) {\n        if (item.logisticName == name) {\n          $scope.address.logisticsType = item.logisticName || \"\";\n          $scope.address.shipCost = item.price || 0;\n          $scope.packPrice = item.packPrice || 0;\n          checkTotalAmount();\n        }\n      });\n    };\n\n    function checkTotalAmount() {\n      if ($scope.address.shipCost) {\n        $scope.totalAmount = parseFloat($scope.address.shipCost + $scope.totalPrice).toFixed(2);\n      } else {\n        $scope.totalAmount = $scope.totalPrice;\n      }\n    }\n\n    $scope.checkoutPhone = function () {\n      if ($scope.address.phone) {\n        var phone = $scope.address.phone.replace(/[^\\d\\+\\-\\(\\)]/g, \"\");\n        $scope.address.phone = phone;\n        getShipingMethod();\n      }\n    };\n\n    $scope.closeCjdfdInfoFlag = function () {\n      $scope.cjdfdInfoFlag = false;\n      $scope.address = {\n        countryCode: \"\",\n        logistics: [],\n        shipCost: 0,\n        transferAreaId: \"\"\n      };\n      $scope.formVerify = {\n        shippingAddress: true,\n        countryCode: true,\n        province: true,\n        city: true,\n        customerName: true,\n        phone: true,\n        zip: true,\n        logisticsType: true,\n        orderNumber: true,\n        transferAreaId: true\n      };\n    };\n\n    $scope.closeCjdfdResult = function () {\n      $scope.cjdfdResult = false;\n      freshList(); //刷新列表\n\n      closeAllCreateOrder();\n      $scope.address = {\n        countryCode: \"\",\n        logistics: [],\n        shipCost: 0,\n        transferAreaId: \"\"\n      };\n    };\n\n    $scope.createOrder = function () {\n      var verifyResult = $scope.formVerifyFun(); //console.log(\"verifyResult\",verifyResult)\n\n      if (!verifyResult) {\n        layer.msg(\"Please complete the address information.\");\n        return;\n      }\n\n      console.log($scope.address);\n      var variantsList = [];\n      $scope.addProList.forEach(function (item) {\n        var li = {\n          id: item.ID,\n          sku: item.SKU,\n          quantity: item.itemCount\n        };\n        variantsList.push(li);\n      });\n\n      var params = _objectSpread(_objectSpread({}, $scope.address), {}, {\n        countLogistics: false,\n        variantsList: variantsList,\n        merchantnNumber: $scope.userId\n      });\n\n      console.log(params);\n      layer.load(2);\n      dsp.postFun(\"order/manualAddCjorderController/insertOrder\", params, function (data) {\n        console.log(data);\n        layer.closeAll(\"loading\");\n\n        if (data.data.statusCode == 200) {\n          $scope.cjdfdInfoFlag = false;\n          $scope.creatAddProductFlag = false; //关闭前面2个弹窗\n\n          $scope.cjdfdResult = true; //打开结果弹窗\n        }\n      });\n    }; // 表单验证\n\n\n    $scope.formVerifyFun = function () {\n      var verifyValue = true;\n\n      for (var key in $scope.formVerify) {\n        if ($scope.address) {\n          $scope.formVerify[key] = $scope.address[key] === null || $scope.address[key] === undefined || $scope.address[key] === '' ? false : true;\n        } else {\n          $scope.formVerify[key] = false;\n        } // console.log(key,'-',$scope.formVerify[key]);\n\n\n        if ($scope.formVerify[key] === false) {\n          verifyValue = false;\n        }\n      }\n\n      return verifyValue;\n    }; //批量更换发货地区\n\n\n    $scope.bulkWareFlag = false;\n    $scope.notifi = false;\n    $scope.check_All = false;\n    $scope.zchecked_all = false;\n    $scope.$watch('ordersList', function () {\n      if ($scope.ordersList && $scope.ordersList.length == 0) {\n        $scope.zchecked_all = false;\n      }\n    });\n    $scope.bulkWareList = [];\n    dsp.postFun(\"warehouseBuildWeb/management/getCountryByAreaId\", {}, function (data) {\n      console.log(data);\n\n      if (data.data.code == 200) {\n        $scope.areaList = data.data.data;\n      }\n\n      console.log($scope.areaList); // $scope.areaList.forEach(it =>{\n      //     console.log(it.areaEn)\n      // })\n    });\n\n    $scope.blukChangeWare = function () {\n      var bulkWareList = [];\n      $scope.ordersList.forEach(function (item) {\n        if (item.check) {\n          //item.order.areaId = item.order.areaId || \"1\" //默认1为中国\n          bulkWareList.push(item);\n        }\n      });\n      console.log(bulkWareList);\n\n      if (bulkWareList.length == 0) {\n        layer.msg(\"Please select order(s) first\");\n      } else {\n        $scope.bulkWareFlag = true;\n        $scope.bulkWareList = bulkWareList;\n      }\n    };\n\n    $scope.addressOrderList = [];\n\n    $scope.findOrderList = function (value) {\n      $scope.addressOrderList.indexOf(value);\n    };\n\n    $scope.checkOneOrder = function (list) {\n      console.log($scope.zchecked_all);\n\n      if (list.check) {\n        list.check = false;\n        $scope.addressOrderList = $scope.addressOrderList.filter(function (item) {\n          return item !== list.order.ID;\n        });\n        $scope.zchecked_all = false;\n      } else {\n        list.check = true;\n        $scope.addressOrderList.push(list.order.ID);\n        var num = 0;\n        $scope.ordersList.forEach(function (ele) {\n          if (ele.check) {\n            num++;\n          }\n        });\n\n        if (num == $scope.ordersList.length) {\n          console.log(num);\n          $scope.zchecked_all = true;\n          $('.zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      }\n\n      console.log(list);\n      console.log($scope.addressOrderList);\n    };\n\n    $scope.checkAllOrder = function () {\n      $scope.zchecked_all = !$scope.zchecked_all;\n      console.log($scope.zchecked_all);\n      $scope.ordersList.forEach(function (item) {\n        if ($scope.zchecked_all) {\n          item.check = true;\n\n          if ($scope.addressOrderList.indexOf(item.order.ID) >= 0) {\n            $scope.addressOrderList.splice($scope.findOrderList(item.order.ID), 1);\n          }\n\n          $scope.addressOrderList.push(item.order.ID);\n          console.log($scope.addressOrderList);\n        } else {\n          item.check = false;\n          $scope.addressOrderList.splice($scope.findOrderList(item.order.ID), 1);\n          console.log($scope.addressOrderList);\n        }\n      });\n      console.log($scope.ordersList);\n    }; // 全选\n\n\n    $scope.checkAll = function () {\n      if ($scope.check_All) {\n        $scope.bulkWareList.forEach(function (ele) {\n          ele.checkin = true;\n        });\n      } else {\n        $scope.bulkWareList.forEach(function (ele) {\n          ele.checkin = false;\n        });\n      }\n    }; // 单选\n\n\n    $scope.checkOne = function (item) {\n      console.log(item);\n\n      if (item.checkin) {\n        var num = 0;\n        $scope.bulkWareList.forEach(function (ele) {\n          if (ele.checkin) {\n            num++;\n          }\n        });\n\n        if (num == $scope.bulkWareList.length) {\n          $scope.check_All = true;\n        }\n      } else {\n        $scope.check_All = false;\n      }\n    };\n\n    $scope.closebulkWareFlag = closebulkWareFlag;\n\n    function closebulkWareFlag() {\n      $scope.bulkWareFlag = false;\n      $scope.check_All = false;\n      $scope.bulkWareList = [];\n      $scope.notifi = false;\n    }\n\n    $scope.bulkChangeArea = function () {\n      var changeList = [];\n      $scope.bulkWareList.forEach(function (item) {\n        if (item.checkin) {\n          changeList.push(item);\n        }\n      });\n      console.log($scope.bulkWareList);\n\n      if (changeList.length == 0) {\n        layer.msg(\"Please select order(s) you need to change\");\n        return;\n      }\n\n      if ($scope.shipFrom && $scope.shipTo) {\n        changeList.forEach(function (item) {\n          if (item.order.areaId == $scope.shipFrom) {\n            item.order.areaId = $scope.shipTo;\n          }\n        });\n      } else {\n        layer.msg(\"Please select the area you want to change\");\n      }\n    };\n    /* 批量转仓请求 */\n\n\n    function transferAreaFun(arr) {\n      return new Promise(function (resolve) {\n        layer.load(2);\n        dsp.postFun(\"order/order/orderTransferArea\", {\n          transferOrderDetailPMS: arr,\n          routeDiscounteTransfer: discounteTransferFlag\n        }, function (data) {\n          if (data.data.statusCode == 200) {\n            resolve(true);\n          } else {\n            resolve(false);\n          }\n        });\n      });\n    }\n\n    function transArea(arr) {\n      //批量转仓功能\n      transferAreaFun(arr).then(function (data) {\n        discounteTransferFlag = false;\n        layer.closeAll(\"loading\");\n\n        if (data) {\n          closebulkWareFlag();\n          $scope.zchecked_all = false;\n          freshList(); //刷新列表\n\n          layer.msg(\"Successfully changed shipping area！\");\n        } else {\n          layer.msg(data.data.message);\n        }\n      });\n      /* layer.load(2)\r\n      dsp.postFun(\"order/order/orderTransferArea\", {\r\n          transferOrderDetailPMS: arr,\r\n          routeDiscounteTransfer: discounteTransferFlag\r\n      }, function (data) {\r\n          discounteTransferFlag = false;\r\n          layer.closeAll(\"loading\")\r\n          if (data.data.statusCode == 200) {\r\n              closebulkWareFlag()\r\n              $scope.zchecked_all = false\r\n              freshList() //刷新列表\r\n              layer.msg(\"Successfully changed shipping area！\")\r\n          } else {\r\n              layer.msg(data.data.message)\r\n          }\r\n      }) */\n    }\n\n    $scope.changeWareConfirm = function () {\n      $scope.addressOrderList = [];\n      var arr = [];\n      console.log($scope.bulkWareList);\n      $scope.bulkWareList.forEach(function (item) {\n        var li = {\n          orderId: item.order.ID,\n          transferAreaId: item.order.areaId\n        };\n        arr.push(li);\n      });\n\n      if (arr.length > 0) {\n        transArea(arr);\n      }\n    };\n\n    function clearBulk() {\n      $scope.check_All = false;\n      $scope.shipFrom = \"\";\n      $scope.shipTo = \"\";\n    }\n\n    $scope.modifyAreas = function () {\n      $scope.notifi = false;\n      var list = [];\n      $scope.ordersList.forEach(function (item) {\n        $scope.noInventoryArr.forEach(function (it) {\n          if (item.order.ID == it) {\n            list.push(item);\n          }\n        });\n      });\n      $scope.bulkWareFlag = true;\n      $scope.bulkWareList = list;\n      clearBulk();\n    };\n\n    $scope.changeOneArea = function (order) {\n      var arr = [{\n        orderId: order.ID,\n        transferAreaId: order.areaId\n      }];\n      transArea(arr);\n    };\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovaW1wb3J0ZWQtb3JkZXJzL2ltcG9ydC1wcm9jZXNzLXJlcXVpcmVkLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3NyYy9wYWdlcy9teWNqL2ltcG9ydGVkLW9yZGVycy9pbXBvcnQtcHJvY2Vzcy1yZXF1aXJlZC5qcz9iNzU4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBpbXBvcnRQcm9jZXNzUmVxdWlyZWRGYWN0b3J5KGFuZ3VsYXIpIHtcclxuICAgIGNvbnN0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdpbXBvcnQtcHJvY2Vzcy1yZXF1aXJlZC5tb2R1bGUnLCBbJ3NlcnZpY2UnXSk7XHJcblxyXG4gICAgYXBwLmRpcmVjdGl2ZSgncmVwZWF0RmluaXNoJywgZnVuY3Rpb24gKCR0aW1lb3V0KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRyKSB7XHJcbiAgICAgICAgICAgICAgICAvL+W9k+WJjeW+queOr+iHs+acgOWQjuS4gOS4qlxyXG4gICAgICAgICAgICAgICAgaWYgKHNjb3BlLiRsYXN0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WQkeeItuaOp+WItuWZqOS8oOmAkuS6i+S7tua2iOaBr1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncmVwZWF0RmluaXNoQ2FsbGJhY2snKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBhcHAuY29udHJvbGxlcignaW1wb3J0LXByb2Nlc3MtcmVxdWlyZWQuY3RybCcsIFsnJHNjb3BlJywgJyRyb290U2NvcGUnLCAnZHNwJywgJyRzdGF0ZVBhcmFtcycsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgZHNwLCAkc3RhdGVQYXJhbXMsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9ICRyb290U2NvcGUuYmFzZTY0O1xyXG4gICAgICAgICAgICBjb25zdCB1c2VySW5mbyA9ICRyb290U2NvcGUudXNlckluZm87XHJcbiAgICAgICAgICAgICRzY29wZS51c2VySWQgPSB1c2VySW5mby51c2VySWQ7XHJcbiAgICAgICAgICAgIGxldCBkaXNjb3VudGVUcmFuc2ZlckZsYWcgPSBmYWxzZTsvL+aYr+WQpuS6q+WPl+e+juWbveS7k+eJqea1geaKmOaJo+S8mOaDoFxyXG4gICAgICAgICAgICAkKCcjeXp5LW1lcmdlLXNlbGVjdCcpLnNlbGVjdDIoKVxyXG4gICAgICAgICAgICAkKCcjaW5pdF9zZWxlY3QnKS5zZWxlY3QyKClcclxuICAgICAgICAgICAgZHNwLmRvbWFpbkRhdGEoKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIOivt+axguaIkOWKn+eahOe7k+aenFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzY2ogPSByZXMuaXNjajtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuaXNjaiA9PSAnMScpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NqXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLndlYnNpdGVOYW1lID0gJ0NKJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lrqLmiLdcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUud2Vic2l0ZU5hbWUgPSByZXMud2Vic2l0ZU5hbWUgfHwgJ0NKJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJHNjb3BlLnN0b3JhZ2UgPSAnJztcclxuICAgICAgICAgICAgJHNjb3BlLnN0b3JhZ2VMaXN0ID0gW3tcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdZaXd1IFdhcmVob3N1ZScsXHJcbiAgICAgICAgICAgICAgICBpZDogJzAnXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdTaGVuemhlbiBXYXJlaG9zdWUnLFxyXG4gICAgICAgICAgICAgICAgaWQ6ICcxJ1xyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnQ2FsIFdhcmVob3VzZScsXHJcbiAgICAgICAgICAgICAgICBpZDogJzInXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdOSiBXYXJlaG91c2UnLFxyXG4gICAgICAgICAgICAgICAgaWQ6ICczJ1xyXG4gICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICAkc2NvcGUuZGF0YUZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy/lrqLmiLfnrKzkuIDmrKHov5vlhaXorqLljZXmqKHlnZfnmoTnlYzpnaJcclxuICAgICAgICAgICAgJHNjb3BlLmlzb3JkRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuc3lTdHVGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5lcnJvclNob3dGbGFnID0gZmFsc2VcclxuICAgICAgICAgICAgLy8gdmFyICRuYXZMaXMgPSAkKCcuaGVhZGVyLW5hdiBsaScpO1xyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCdyZXBlYXRGaW5pc2hDYWxsYmFjaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIHBzZWx3bEZ1bigpOyAvL+ajgOa1i+aYr+WQpumAieaLqeS6hueJqea1gVxyXG4gICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAjZGNsLW5vdGUnKS5hdHRyKCdkaXNhYmxlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjei1kY2wtb3JkIC5iai1zcHNrdScpLmF0dHIoJ2Rpc2FibGVkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gMjAtMDEtMTkg54mp5rWB5Y6f5ZugIC0tLS0gMjAtMDEtMzEg6L+B56e7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvZ2lzdGljc1JlYXNvblVSTCA9ICdvcmRlci9vcmRlci9jaGVja09yZGVyTG9nc2l0aWNzJztcclxuICAgICAgICAgICAgJHNjb3BlLmxvZ2lzdGljc1JlYXNvbkxpc3QgPSBbXTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24obG9naXN0aWNzUmVhc29uVVJMLCBmdW5jdGlvbiAoXywgYm9vbCkge1xyXG4gICAgICAgICAgICAgICAgYm9vbCA/IGxheWVyLmxvYWQoMikgOiBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd0xvZ2lzdGljc1JlYXNvbiA9IGZ1bmN0aW9uIChvcmRlckl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2dpc3RpY3NSZWFzb25MaXN0ID0gW11cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlck51bWJlcjogb3JkZXJJdGVtLm9yZGVyLklELFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9yZGVyTnVtYmVyOiAnMjAwMTE2MTAwMDExOTA2ODA5JyxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bihsb2dpc3RpY3NSZWFzb25VUkwsIHBhcmFtcywgZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXMuZGF0YSB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvcmRlckl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzQ29kZSA9PSAnMjAwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXN1bHQuc29tZShpdGVtID0+ICFpdGVtLnN1Y2Nlc3MpKSB7IC8vIOWQq+acieS4jeWPr+eUqOeJqea1geaJjeaYvuekuuWIl+ihqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dMb2dpc3RpY3NUb2dnbGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEucmVzdWx0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLnJlc3VsdFtpXVsnc3VjY2VzcyddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2dpc3RpY3NSZWFzb25MaXN0LnB1c2goZGF0YS5yZXN1bHRbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICRzY29wZS5zaG93TG9naXN0aWNzVG9nZ2xlID0gZnVuY3Rpb24gKGJvb2wgPSAhJHNjb3BlLmxvZ2lzdGljc1JlYXNvblNob3cpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2dpc3RpY3NSZWFzb25TaG93ID0gYm9vbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zaG93V2xMaXN0RnVuID0gZnVuY3Rpb24gKG9yZGVySXRlbSwgcHJvZHVjdHMsIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvcmRlckl0ZW0pXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbU9yZFNlbGVjdGVkID0gb3JkZXJJdGVtO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLml0ZW1PcmRTZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbVByb2R1Y3RTZWxlY3RlZCA9IHByb2R1Y3RzO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLml0ZW1Qcm9kdWN0U2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1ck9yZEluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuY3VyT3JkSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdFdsRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbUxvZ2lzdGljTGlzdCA9IG9yZGVySXRlbS5MT0dJU1RJQ0lORk87XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuaXRlbUxvZ2lzdGljTGlzdCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3JkZXJJdGVtLkxPR0lTVElDX05BTUUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tkV2xOYW1lID0gb3JkZXJJdGVtLkxPR0lTVElDX05BTUU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja2RXbE5hbWUgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5jaGVja2RXbE5hbWUpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBwYWdlSCA9ICQod2luZG93KS5oZWlnaHQoKSAtIDE3MTtcclxuICAgICAgICAgICAgdmFyIGRvY0ggPSAkKGRvY3VtZW50KS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmVmb3JlID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJlZm9yZSA+IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gMTMzMCAmJiB3aW5kb3cuaW5uZXJXaWR0aCA8IDE1OTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRpcmVjdC1vcmQtZmlsJykuYWRkQ2xhc3MoXCJzaG93dG9wXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5kaXJlY3Qtb3JkLWZpbCcpLmFkZENsYXNzKFwic2hvd3RvcDFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZGlyZWN0LW9yZC1maWwnKS5yZW1vdmVDbGFzcyhcInNob3d0b3BcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmRpcmVjdC1vcmQtZmlsJykucmVtb3ZlQ2xhc3MoXCJzaG93dG9wMVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJy5kaXJlY3RvcmRlcnMtd3JhcCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6ICQod2luZG93KS5oZWlnaHQoKSAqIDEgKyAncHgnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKCcuZGlyZWN0LXJpZ2h0JykuY3NzKHtcclxuICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0JzogJCh3aW5kb3cpLmhlaWdodCgpICogMSArICdweCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgICAgIC8v57uZ5pu05aSa5pCc57Si5re75Yqg54K55Ye75pi+56S66ZqQ6JeP55qE5Yqo55S7XHJcbiAgICAgICAgICAgICQoJyNkaXRlY3Qtc2VhcmNobW9yZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJyNkaXRlY3QtbW9yZXNlYXJjaCcpLnN0b3AoKS50b2dnbGUoMzAwKTtcclxuICAgICAgICAgICAgICAgICQoJyN0b2dnbGUtbG9nbzEnKS50b2dnbGVDbGFzcygnZ2x5cGhpY29uLXRyaWFuZ2xlLXRvcCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJyNkaXRlY3QtbW9yZXNlYXJjaCcpLmhlaWdodCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKCcjdG9nZ2xlLWxvZ28xJykuaGFzQ2xhc3MoJ2dseXBoaWNvbi10cmlhbmdsZS10b3AnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5pi+56S65pCc57SiJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRpcmVjdC1yaWdodCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6ICQod2luZG93KS5oZWlnaHQoKSAqIDEgKyAkKCcjZGl0ZWN0LW1vcmVzZWFyY2gnKS5oZWlnaHQoKSArIDEwICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6ZqQ6JeP5pCc57SiJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRpcmVjdC1yaWdodCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluLWhlaWdodCc6ICQod2luZG93KS5oZWlnaHQoKSAqIDEgKyAncHgnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDQwMClcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB2YXIgaXNFbXBvd2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzRW1wb3dlcicpO1xyXG4gICAgICAgICAgICAvLyBpZiAoaXNFbXBvd2VyID09IG51bGwgfHwgaXNFbXBvd2VyID09ICcnIHx8IGlzRW1wb3dlciA9PSB1bmRlZmluZWQpIHsgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICBpZiAoaXNFbXBvd2VyID09ICcxJykge1xyXG4gICAgICAgICAgICAvLyAgICAgLy8gdmFyIGEgPSAkKCcudGJuZXctZGl2PnA6Zmlyc3QtY2hpbGQnKTtcclxuICAgICAgICAgICAgLy8gICAgIC8vIHZhciBsZWZ0ID0gZ2V0RWxlbWVudExlZnQoYVswXSkgLSAxNDtcclxuICAgICAgICAgICAgLy8gICAgIC8vIHZhciB0b3AgPSBnZXRFbGVtZW50VG9wKGFbMF0pIC0gNDtcclxuICAgICAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKGxlZnQsIHRvcCk7XHJcbiAgICAgICAgICAgIC8vICAgICAvLyAkKCcub25saW5lLXdyYXAyJykuY3NzKHtcclxuICAgICAgICAgICAgLy8gICAgIC8vICAgXCJ0b3BcIjogdG9wICsgJ3B4JyxcclxuICAgICAgICAgICAgLy8gICAgIC8vICAgXCJsZWZ0XCI6IGxlZnQgKyAncHgnXHJcbiAgICAgICAgICAgIC8vICAgICAvLyB9KTtcclxuICAgICAgICAgICAgLy8gICAgIC8vICRzY29wZS5zeVN0dUZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyAgICAgLy8gJCgnLnp6YycpLmhpZGUoKTtcclxuICAgICAgICAgICAgLy8gICAgIC8vICQoJy56emMyJykuc2hvdygpO1xyXG4gICAgICAgICAgICAvLyAgIH1cclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyAkKCcua25vdycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gICAkKCcuenpjJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAvLyAgICQoJy56emMyJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAvLyAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjbG9zZUZsYWcnLCAnMScpO1xyXG4gICAgICAgICAgICAvLyAgIGxvY2F0aW9uLmhyZWYgPSAnIy9teUNKQXNzb2NpYXRlZFN0b3JlJztcclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgIC8vICQoJyNvbmxpbmUtY29udGVudDInKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vICAgJCgnLnp6YzInKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIC8vICAgdmFyIGEgPSAkKCcubXljai1sZWZ0LWJhcj51bD5saScpLmVxKDApO1xyXG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGEpXHJcbiAgICAgICAgICAgIC8vICAgdmFyIGxlZnQgPSBnZXRFbGVtZW50TGVmdChhWzBdKSArIDE7XHJcbiAgICAgICAgICAgIC8vICAgdmFyIHRvcCA9IGdldEVsZW1lbnRUb3AoYVswXSkgLSA0O1xyXG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGxlZnQsIHRvcCk7XHJcbiAgICAgICAgICAgIC8vICAgJCgnLm9ubGluZS13cmFwJykuY3NzKHtcclxuICAgICAgICAgICAgLy8gICAgIFwidG9wXCI6IHRvcCArICdweCcsXHJcbiAgICAgICAgICAgIC8vICAgICBcImxlZnRcIjogbGVmdCArICdweCdcclxuICAgICAgICAgICAgLy8gICB9KTtcclxuICAgICAgICAgICAgLy8gICAvLyQoJy5yZW9yZHN0dS1kbGlzdCcpLmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7XHJcbiAgICAgICAgICAgIC8vICAgJCgnLnp6YycpLnNob3coKTtcclxuXHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAvLyAkc2NvcGUuanVtcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZygnMTExMTExMTExMScpXHJcbiAgICAgICAgICAgIC8vICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Nsb3NlRmxhZycsICcnKTtcclxuICAgICAgICAgICAgLy8gICBsb2NhdGlvbi5ocmVmID0gJyMvZHJvcHNoaXBwaW5nLW9yZGVycyc7XHJcbiAgICAgICAgICAgIC8vIH07XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRFbGVtZW50TGVmdChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWN0dWFsTGVmdCA9IGVsZW1lbnQub2Zmc2V0TGVmdDtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3R1YWxMZWZ0ICs9IGN1cnJlbnQub2Zmc2V0TGVmdDtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5vZmZzZXRQYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdHVhbExlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRUb3AoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFjdHVhbFRvcCA9IGVsZW1lbnQub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoY3VycmVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbFRvcCArPSBjdXJyZW50Lm9mZnNldFRvcDtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5vZmZzZXRQYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdHVhbFRvcDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/nianmtYHnmoTor7fmsYJcclxuICAgICAgICAgICAgLy/pgInmi6nnianmtYHnmoTor7fmsYJcclxuICAgICAgICAgICAgdmFyIHVwU2hJZDsgLy/nqI7lj7fnmoRpZFxyXG4gICAgICAgICAgICB2YXIgdXBTaEluZGV4OyAvL+eojuWPt+eahGluZGV4XHJcbiAgICAgICAgICAgICQoJyN6LWRjbC1vcmQnKS5vbignY2hhbmdlJywgJy5kY2wtb3JkLXNlbHdsJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIC8v6I635Y+W6YCJ5oup5qGG5Lit55qE54mp5rWB5pa55byPXHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc1dsRnMgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cnlDb2RlID0gJCh0aGlzKS5wYXJlbnQoJy5kY2wtb3JkLXdsdGQnKS5zaWJsaW5ncygnLnNoaXBwaW5nLWluZm8nKS5maW5kKCcuaW1wLXByb2N1cy1jb3VudHJ5JykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRheGlkVGV4dCA9ICQodGhpcykucGFyZW50KCcuZGNsLW9yZC13bHRkJykuc2libGluZ3MoJy5zaGlwcGluZy1pbmZvJykuY2hpbGRyZW4oJy50YWl4ZC10ZXh0JykudGV4dCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgodGhpc1dsRnMgPT0gJ0NKUGFja2V0JyB8fCB0aGlzV2xGcyA9PSAnREhMJyB8fCB0aGlzV2xGcyA9PSAnZVBhY2tldCcpICYmIGNvdW50cnlDb2RlID09ICdCUicgJiYgIXRheGlkVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwU2hJZCA9ICQodGhpcykucGFyZW50KCkuc2libGluZ3MoJy5vcmQtY2FpJykuY2hpbGRyZW4oJy5vcmRlci1pZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB1cFNoSW5kZXggPSAkKCcjei1kY2wtb3JkIC5kY2wtb3JkLXNlbHdsJykuaW5kZXgodGhpcyk7Ly/orqLljZXkuIvmoIdcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cFNoSW5kZXgsICd1cFNoSW5kZXgnKVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50YXhpZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/lpoLmnpzmmK/liIfmjaLmiJDnmoTmmK9VU1BTKyDmlLnlj5jlj5HlvoDku5PlupNcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kLXRvZ2dsZS10cicpLmZpbmQoJy53aGVyZS1mcm9tJykpXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1dsRnMgPT0gJ1VTUFMrJykge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kLXRvZ2dsZS10cicpLmZpbmQoJy53aGVyZS1mcm9tJykudGV4dCgnVVNBJylcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmQtdG9nZ2xlLXRyJykuZmluZCgnLndoZXJlLWZyb20nKS50ZXh0KCdDaGluYScpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvcGVydHlUZXh0ID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmQtdG9nZ2xlLXRyJykuZmluZCgnLnByb3BlcnR5LXRleHQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9wZXJ0eVRleHQpXHJcblxyXG4gICAgICAgICAgICAgICAgLy/ojrflj5bpmpDol4/ln5/kuK3lj6/ku6Xlj5HnmoTnianmtYHmlbDmja5cclxuICAgICAgICAgICAgICAgIHZhciB3bGhpZGVkYXRhID0gJCh0aGlzKS5zaWJsaW5ncygnLmRjbG9yZC13bC1oaWRlJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgd2xoaWRlZGF0YSA9IEpTT04ucGFyc2Uod2xoaWRlZGF0YSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHdsaGlkZWRhdGEpXHJcbiAgICAgICAgICAgICAgICB2YXIgd2xzdHVQcmljZSA9IDA7IC8v5a2Y5YKo54mp5rWB6LS555SoXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdsaGlkZWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh3bGhpZGVkYXRhW2ldLmxvZ2lzdGljTmFtZSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2xoaWRlZGF0YVtpXS5sb2dpc3RpY05hbWUgPT0gdGhpc1dsRnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2xzdHVQcmljZSA9IHdsaGlkZWRhdGFbaV0ucHJpY2UgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnYm9yZGVyJywgJzFweCBzb2xpZCAjZWNlY2VjJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdib3JkZXInLCAnMXB4IHNvbGlkICNmODhmMjknKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh3bHN0dVByaWNlKVxyXG4gICAgICAgICAgICAgICAgLy/nu5npgq7otLnotYvlgLxcclxuICAgICAgICAgICAgICAgIC8vICQodGhpcykucGFyZW50KCcuZGNsLW9yZC13bHRkJykuc2libGluZ3MoJy5zaGlwLWNvc3QtdGQnKS5jaGlsZHJlbignLmxvZ2lzLWluZm8td2xwcmljZScpLmNoaWxkcmVuKCcud2wtbW9uZXktc3BhbicpLnRleHQod2xzdHVQcmljZSk7XHJcbiAgICAgICAgICAgICAgICAvL+e7memCrui0ueWKoOS4iuWNleS9jVxyXG4gICAgICAgICAgICAgICAgLy8gJCh0aGlzKS5wYXJlbnQoJy5kY2wtb3JkLXdsdGQnKS5zaWJsaW5ncygnLnNoaXAtY29zdC10ZCcpLmNoaWxkcmVuKCcubG9naXMtaW5mby13bHByaWNlJykuY2hpbGRyZW4oJy51bml0LXNwYW4nKS50ZXh0KCdVU0QnKVxyXG4gICAgICAgICAgICAgICAgLy/ojrflj5bpmpDol4/ln5/kuK3nmoTllYblk4HmgLvph5Hpop1cclxuICAgICAgICAgICAgICAgIHZhciBzcGFsbG1vbmV5ID0gJCh0aGlzKS5wYXJlbnQoJy5kY2wtb3JkLXdsdGQnKS5zaWJsaW5ncygnLnNoaXAtY29zdC10ZCcpLmNoaWxkcmVuKCcuZGNsb3JkLWFtb3VudCcpLnRleHQoKSAtIDA7XHJcbiAgICAgICAgICAgICAgICAvL+e7mSDorqLljZXmgLvph5Hpop3otYvlgLxcclxuICAgICAgICAgICAgICAgIHZhciBjakFtb3VudE1vbmV5ID0gKHdsc3R1UHJpY2UgKyBzcGFsbG1vbmV5KS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGFiYyA9ICRjakFtb3VudE1vbmV5LnRvRml4ZWQoMik7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmRjbC1vcmQtd2x0ZCcpLnNpYmxpbmdzKCcuei1jam9yZC13bScpLmNoaWxkcmVuKCcuY2otcHJpY2UtbnVtJykuY2hpbGRyZW4oJyNjai1hLW1vbmV5JykudGV4dChjakFtb3VudE1vbmV5ICsgJ1VTRCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLnpsRnVuKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzcGFsbG1vbmV5KVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2pBbW91bnRNb25leSlcclxuICAgICAgICAgICAgICAgIHZhciB3bERhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBvcmRJZCA9ICQodGhpcykucGFyZW50KCkuc2libGluZ3MoJy5vcmQtY2FpJykuY2hpbGRyZW4oJy5vcmRlci1pZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBub3dJbmRleCA9ICQodGhpcykuYXR0cignaW5kZXgnKSAqIDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9naXN0aWMgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cob3JkSWQgKyAnPT09JyArIGxvZ2lzdGljKTtcclxuICAgICAgICAgICAgICAgIHdsRGF0YS5vcmRlck51bSA9IG9yZElkO1xyXG4gICAgICAgICAgICAgICAgd2xEYXRhLmxvZ2lzaWMgPSBsb2dpc3RpYztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxvZ2lzdGljKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAobywgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvLm9yZGVyLklEID09IG9yZElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ub3JkZXIuTE9HSVNUSUNfTkFNRSA9IGxvZ2lzdGljO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvLm9yZGVyLlBPU1RBR0UgPSB3bHN0dVByaWNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG8ub3JkZXIuTE9HSVNUSUNJTkZPLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc1dsRnMgPT0gby5vcmRlci5MT0dJU1RJQ0lORk9bal0ubG9naXN0aWNOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuY2FzdCA9IG8ub3JkZXIuTE9HSVNUSUNJTkZPW2pdLmNhc3QgPT0gbnVsbCA/ICcwJyA6IG8ub3JkZXIuTE9HSVNUSUNJTkZPW2pdLmNhc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5yZW1hcmspXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucmVtYXJrTGlzdClcclxuICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W25vd0luZGV4XS5vcmRlci5QT1NUQUdFID0gd2xzdHVQcmljZTtcclxuICAgICAgICAgICAgICAgIC8vIOW9k+WJjemAieS4reeahOeJqea1gVxyXG4gICAgICAgICAgICAgICAgbGV0IFtjdXJyZW50V2xdID0gKCRzY29wZS5vcmRlcnNMaXN0W25vd0luZGV4XS5vcmRlci5MT0dJU1RJQ0lORk8pLmZpbHRlcih2ID0+IHYubG9naXN0aWNOYW1lID09PSB0aGlzV2xGcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3Rbbm93SW5kZXhdLm9yZGVyLmN1cnJlbnRXbF9wcmljZSA9IGN1cnJlbnRXbC5wcmljZVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3Rbbm93SW5kZXhdLm9yZGVyLmN1cnJlbnRXbF9wYWNrX3ByaWNlID0gY3VycmVudFdsLnBhY2tQcmljZSB8fCAwXHJcblxyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci91cE9yZGVyTG9naXNpY3MnLCBKU09OLnN0cmluZ2lmeSh3bERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9naXNSZW1hcmsoJHNjb3BlLmxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5yZW1hcmtMaXN0Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9naXN0aWMgPT0gJHNjb3BlLnJlbWFya0xpc3Rbal0ubmFtZWVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5yZW1hcmtMaXN0W2pdLnJlbWFyaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFtub3dJbmRleF0ub3JkZXIucmVtYXJrID0gJHNjb3BlLnJlbWFya0xpc3Rbal0ucmVtYXJrLnRvU3RyaW5nKCkucmVwbGFjZSgvPGJyPi9nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3Rbbm93SW5kZXhdLm9yZGVyLnJlbWFyayA9ICRzY29wZS5yZW1hcmtMaXN0W2pdLnJlbWFyaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb3BlcnR5VGV4dClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvcGVydHlUZXh0LmluZGV4T2YoXCJCQVRURVJZXCIpID49IDAgfHwgcHJvcGVydHlUZXh0LmluZGV4T2YoXCJFTEVDVFJPTklDXCIpID49IDAgfHwgcHJvcGVydHlUZXh0LmluZGV4T2YoXCJIQVZFX0NSRUFNXCIpID49IDAgfHwgcHJvcGVydHlUZXh0LmluZGV4T2YoXCJIQVZFX01BR05FVElTTVwiKSA+PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzV2xGcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNXbEZzID09ICdlUGFja2V0JyAmJiAocHJvcGVydHlUZXh0LmluZGV4T2YoXCJCQVRURVJZXCIpID49IDAgfHwgcHJvcGVydHlUZXh0LmluZGV4T2YoXCJFTEVDVFJPTklDXCIpID49IDAgfHwgcHJvcGVydHlUZXh0LmluZGV4T2YoXCJIQVZFX0NSRUFNXCIpID49IDAgfHwgcHJvcGVydHlUZXh0LmluZGV4T2YoXCJIQVZFX01BR05FVElTTVwiKSA+PSAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3Rbbm93SW5kZXhdLm9yZGVyLnJlbWFyayA9ICdXZSBoYXZlIHRvIHVzZSBhIHNwZWNpYWwgZVBhY2tldCBjaGFubmVsIHRvIHNoaXAgdGhpcyBvcmRlciBhcyBpdCBjb250YWlucyBzZW5zaXRpdmUgbWF0ZXJpYWwgbGlrZTogYmF0dGVyeSwgbGlxdWlkLCBjcmVhbSwgbWFnbmV0IGV0Yy4gVGhlIHNoaXBwaW5nIGNvc3Qgd2lsbCBiZSAxNSUgaGlnaGVyIHRoYW4gbm9ybWFsIGVQYWNrZXQuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdFtub3dJbmRleF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2xoaWRlZGF0YS5sZW5ndGg7IGkrKykgey8v5aaC5p6c5pyJ5YGP6L+c6LS555SoIOaPkOekuueahOS8mOWFiOe6p+acgOmrmFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdsaGlkZWRhdGFbaV0ubG9naXN0aWNOYW1lID09IHRoaXNXbEZzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdsaGlkZWRhdGFbaV1bJ3JlbW90ZUZlZSddID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFtub3dJbmRleF0ub3JkZXIucmVtYXJrID0gJ0FkZGl0aW9uYWwgQ2hhcmdlcyBmb3IgUmVtb3RlIEFkZHJlc3M6ICcgKyB3bGhpZGVkYXRhW2ldWydyZW1vdGVGZWUnXSArICdVU0QnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja0l0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmNoZWNrZFdsTmFtZSlcclxuICAgICAgICAgICAgICAgICRzY29wZS5jaGVja2RXbE5hbWUgPSBpdGVtLmxvZ2lzdGljTmFtZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jb25maXJtU2VsV2xGdW4oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5jb25maXJtU2VsV2xGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuY2hlY2tkV2xOYW1lKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLml0ZW1PcmRTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgIGxldCBjdXJPcmRPYmogPSAkc2NvcGUuaXRlbU9yZFNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1ck9yZFByb0FyciA9ICRzY29wZS5pdGVtUHJvZHVjdFNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY3VyT3JkUHJvQXJyLCAnY3VyT3JkUHJvQXJyJylcclxuICAgICAgICAgICAgICAgIC8v6I635Y+W6YCJ5oup5qGG5Lit55qE54mp5rWB5pa55byPXHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc1dsRnMgPSAkc2NvcGUuY2hlY2tkV2xOYW1lO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50cnlDb2RlID0gY3VyT3JkT2JqLkNPVU5UUllfQ09ERTtcclxuICAgICAgICAgICAgICAgIHZhciB0YXhpZFRleHQgPSBjdXJPcmRPYmoudGF4aWRFeHRlbmQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyT3JkSWQgPSBjdXJPcmRPYmouSUQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXNXbEZzID09ICdDSlBhY2tldCcgfHwgdGhpc1dsRnMgPT0gJ0RITCcgfHwgdGhpc1dsRnMgPT0gJ2VQYWNrZXQnKSAmJiBjb3VudHJ5Q29kZSA9PSAnQlInICYmICF0YXhpZFRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cFNoSWQgPSBjdXJPcmRJZDtcclxuICAgICAgICAgICAgICAgICAgICB1cFNoSW5kZXggPSAkc2NvcGUuY3VyT3JkSW5kZXg7Ly/orqLljZXkuIvmoIdcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cFNoSW5kZXgsICd1cFNoSW5kZXgnKVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50YXhpZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5VGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgY3VyT3JkUHJvQXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVRleHQgKz0gY3VyT3JkUHJvQXJyW2ldLlBST1BFUlRZXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIC8v6I635Y+W6ZqQ6JeP5Z+f5Lit5Y+v5Lul5Y+R55qE54mp5rWB5pWw5o2uXHJcbiAgICAgICAgICAgICAgICB2YXIgd2xoaWRlZGF0YSA9IGN1ck9yZE9iai5MT0dJU1RJQ0lORk87XHJcbiAgICAgICAgICAgICAgICB2YXIgd2xzdHVQcmljZSA9IDA7IC8v5a2Y5YKo54mp5rWB6LS555SoXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdsaGlkZWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2xoaWRlZGF0YVtpXS5sb2dpc3RpY05hbWUgPT0gdGhpc1dsRnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2xzdHVQcmljZSA9IHdsaGlkZWRhdGFbaV0ucHJpY2UgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjdXJPcmRPYmouUE9TVEFHRSA9IHdsc3R1UHJpY2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3BhbGxtb25leSA9IGN1ck9yZE9iai5PUkRFUl9BTU9VTlQgLSAwO1xyXG4gICAgICAgICAgICAgICAgLy/nu5kg6K6i5Y2V5oC76YeR6aKd6LWL5YC8XHJcbiAgICAgICAgICAgICAgICB2YXIgY2pBbW91bnRNb25leSA9ICh3bHN0dVByaWNlICsgc3BhbGxtb25leSkudG9GaXhlZCgyKTtcclxuICAgICAgICAgICAgICAgIHZhciB3bERhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciBvcmRJZCA9IGN1ck9yZE9iai5JRDtcclxuICAgICAgICAgICAgICAgIHZhciBub3dJbmRleCA9ICRzY29wZS5jdXJPcmRJbmRleDtcclxuICAgICAgICAgICAgICAgIHZhciBsb2dpc3RpYyA9IHRoaXNXbEZzO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3Rbbm93SW5kZXhdLm9yZGVyLlBPU1RBR0UgPSB3bHN0dVByaWNlO1xyXG4gICAgICAgICAgICAgICAgd2xEYXRhLm9yZGVyTnVtID0gb3JkSWQ7XHJcbiAgICAgICAgICAgICAgICB3bERhdGEubG9naXNpYyA9IGxvZ2lzdGljO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAobywgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvLm9yZGVyLklEID09IG9yZElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ub3JkZXIuTE9HSVNUSUNfTkFNRSA9IGxvZ2lzdGljO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvLm9yZGVyLlBPU1RBR0UgPSB3bHN0dVByaWNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG8ub3JkZXIuTE9HSVNUSUNJTkZPLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc1dsRnMgPT0gby5vcmRlci5MT0dJU1RJQ0lORk9bal0ubG9naXN0aWNOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuY2FzdCA9IG8ub3JkZXIuTE9HSVNUSUNJTkZPW2pdLmNhc3QgPT0gbnVsbCA/ICcwJyA6IG8ub3JkZXIuTE9HSVNUSUNJTkZPW2pdLmNhc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3Rbbm93SW5kZXhdLm9yZGVyLCAnJHNjb3BlLm9yZGVyc0xpc3Rbbm93SW5kZXhdLm9yZGVyJylcclxuICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLmRjbC1vcmQtc2Vsd2wnKS5lcSgkc2NvcGUuY3VyT3JkSW5kZXgpLnZhbCh0aGlzV2xGcylcclxuICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLnotY2pvcmQtd20nKS5lcSgkc2NvcGUuY3VyT3JkSW5kZXgpLmNoaWxkcmVuKCcuY2otcHJpY2UtbnVtJykuY2hpbGRyZW4oJyNjai1hLW1vbmV5JykudGV4dChjakFtb3VudE1vbmV5ICsgJ1VTRCcpO1xyXG4gICAgICAgICAgICAgICAgLy8g5b2T5YmN6YCJ5Lit55qE54mp5rWBXHJcbiAgICAgICAgICAgICAgICBsZXQgW2N1cnJlbnRXbF0gPSAoJHNjb3BlLm9yZGVyc0xpc3Rbbm93SW5kZXhdLm9yZGVyLkxPR0lTVElDSU5GTykuZmlsdGVyKHYgPT4gdi5sb2dpc3RpY05hbWUgPT09IHRoaXNXbEZzKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W25vd0luZGV4XS5vcmRlci5jdXJyZW50V2xfcHJpY2UgPSBjdXJyZW50V2wucHJpY2VcclxuICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W25vd0luZGV4XS5vcmRlci5jdXJyZW50V2xfcGFja19wcmljZSA9IGN1cnJlbnRXbC5wYWNrUHJpY2UgfHwgMFxyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci91cE9yZGVyTG9naXNpY3MnLCBKU09OLnN0cmluZ2lmeSh3bERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RXbEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5yZW1hcmtMaXN0Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9naXN0aWMgPT0gJHNjb3BlLnJlbWFya0xpc3Rbal0ubmFtZWVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5yZW1hcmtMaXN0W2pdLnJlbWFyaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFtub3dJbmRleF0ub3JkZXIucmVtYXJrID0gJHNjb3BlLnJlbWFya0xpc3Rbal0ucmVtYXJrLnRvU3RyaW5nKCkucmVwbGFjZSgvPGJyPi9nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3Rbbm93SW5kZXhdLm9yZGVyLnJlbWFyayA9ICRzY29wZS5yZW1hcmtMaXN0W2pdLnJlbWFyaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzV2xGcyA9PSAnZVBhY2tldCcgJiYgKHByb3BlcnR5VGV4dC5pbmRleE9mKFwiQkFUVEVSWVwiKSA+PSAwIHx8IHByb3BlcnR5VGV4dC5pbmRleE9mKFwiRUxFQ1RST05JQ1wiKSA+PSAwIHx8IHByb3BlcnR5VGV4dC5pbmRleE9mKFwiSEFWRV9DUkVBTVwiKSA+PSAwIHx8IHByb3BlcnR5VGV4dC5pbmRleE9mKFwiSEFWRV9NQUdORVRJU01cIikgPj0gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W25vd0luZGV4XS5vcmRlci5yZW1hcmsgPSAnV2UgaGF2ZSB0byB1c2UgYSBzcGVjaWFsIGVQYWNrZXQgY2hhbm5lbCB0byBzaGlwIHRoaXMgb3JkZXIgYXMgaXQgY29udGFpbnMgc2Vuc2l0aXZlIG1hdGVyaWFsIGxpa2U6IGJhdHRlcnksIGxpcXVpZCwgY3JlYW0sIG1hZ25ldCBldGMuIFRoZSBzaGlwcGluZyBjb3N0IHdpbGwgYmUgMTUlIGhpZ2hlciB0aGFuIG5vcm1hbCBlUGFja2V0Lic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3bGhpZGVkYXRhLmxlbmd0aDsgaSsrKSB7Ly/lpoLmnpzmnInlgY/ov5zotLnnlKgg5o+Q56S655qE5LyY5YWI57qn5pyA6auYXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2xoaWRlZGF0YVtpXS5sb2dpc3RpY05hbWUgPT0gdGhpc1dsRnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2xoaWRlZGF0YVtpXVsncmVtb3RlRmVlJ10gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W25vd0luZGV4XS5vcmRlci5yZW1hcmsgPSAnQWRkaXRpb25hbCBDaGFyZ2VzIGZvciBSZW1vdGUgQWRkcmVzczogJyArIHdsaGlkZWRhdGFbaV1bJ3JlbW90ZUZlZSddICsgJ1VTRCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v56Gu5a6a5aGr5YaZ56iO5Y+3XHJcbiAgICAgICAgICAgICRzY29wZS5zdXJlU2hGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cFNoSWQpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cFNoSW5kZXgpXHJcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS50YWl4ZVZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIGVudGVyIHRoZSB0YXggbnVtYmVyJylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICB2YXIgdXB0YXhpZCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdXB0YXhpZC5jam9yZGVyaWQgPSB1cFNoSWQ7XHJcbiAgICAgICAgICAgICAgICB1cHRheGlkLnRheGlkID0gJHNjb3BlLnRhaXhlVmFsO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodXB0YXhpZCkpXHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3VwZGF0ZVRheGlkJywgSlNPTi5zdHJpbmdpZnkodXB0YXhpZCksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGF4aWRGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnQWRkIFN1Y2Nlc3MnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFt1cFNoSW5kZXhdLm9yZGVyLnRheGlkRXh0ZW5kID0gJHNjb3BlLnRhaXhlVmFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGFpeGVWYWwgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0FkZCBGYWlsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLnVwU2hCdG5GdW4gPSBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS50YXhpZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdXBTaElkID0gaXRlbS5JRDtcclxuICAgICAgICAgICAgICAgIHVwU2hJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5vdmVyT3B0aW9uMSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVtYXJrID0gJyc7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYnVsa1dsTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChvLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0ub3JkZXIuTE9HSVNUSUNfTkFNRSA9PSBvLm5hbWVlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVtYXJrID0gby5yZW1hcms7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucmVtYXJrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pc3JlbWFyayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLm92ZXJPcHRpb24yID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uaXNyZW1hcmsgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+eVmeiogOWKn+iDvVxyXG4gICAgICAgICAgICAkc2NvcGUuZWRpdG5vdGVGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBjaGFuZ2Vub3RlaWQgPSAnJztcclxuICAgICAgICAgICAgdmFyICRub3RlT2JqID0ge307XHJcbiAgICAgICAgICAgIHZhciAkaGlkZW5vdGVPYmogPSB7fTtcclxuICAgICAgICAgICAgJHNjb3BlLmVkaXROb3RlID0gZnVuY3Rpb24gKGl0ZW0sICRldmVudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRub3RlRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2Vub3RlaWQgPSBpdGVtLklEO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRleHRzdHIgPSAnPHRleHRhcmVhIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJkY2wtbm90ZVwiPjwvdGV4dGFyZWE+J1xyXG4gICAgICAgICAgICAgICAgaWYgKChpdGVtLk5PVEVfQVRUUklCVVRFUyA9PSAnJyAmJiAkKCRldmVudC50YXJnZXQpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJyNkY2wtbm90ZScpLmxlbmd0aCA9PSAwKSB8fCAoaXRlbS5OT1RFX0FUVFJJQlVURVMgPT0gbnVsbCAmJiAkKCRldmVudC50YXJnZXQpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJyNkY2wtbm90ZScpLmxlbmd0aCA9PSAwKSkgeyAvLyYmJCgkZXZlbnQudGFyZ2V0KS5wYXJlbnQoKS5zaWJsaW5ncygnI2RjbC1ub3RlJyk9PXVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgICQoJGV2ZW50LnRhcmdldCkucGFyZW50KCkucGFyZW50KCkucHJlcGVuZCh0ZXh0c3RyKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgn5Yib5bu65LiA5Liq5paH5pys5qGGJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRoaWRlbm90ZU9iaiA9ICQoJGV2ZW50LnRhcmdldCkucGFyZW50KCkuc2libGluZ3MoJy5oaWRlLW5vdGUtcCcpOyAvL+iOt+WPlumakOiXj+Wfn+eahOeslOiusOWGheWuuVxyXG4gICAgICAgICAgICAgICAgJCgnLmVkaXRtZXNzLXRleHQnKS52YWwoJGhpZGVub3RlT2JqLnRleHQoKSk7IC8v57uZ55WZ6KiA5qGG6LWL5b2T5YmN5YC8XHJcbiAgICAgICAgICAgICAgICAkbm90ZU9iaiA9ICQoJGV2ZW50LnRhcmdldCkucGFyZW50KCkuc2libGluZ3MoJyNkY2wtbm90ZScpOyAvL+iOt+WPluW9k+WJjeeahOeVmeiogOahhlxyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v55WZ6KiA55qE5Y+W5raI5oyJ6ZKuXHJcbiAgICAgICAgICAgICRzY29wZS5jYW5jZWxtZXNzRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRub3RlRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJCgnLmVkaXRtZXNzLXRleHQnKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgJG5vdGVPYmouYXR0cignZGlzYWJsZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v56Gu5a6a55WZ6KiA5Yqf6IO9XHJcbiAgICAgICAgICAgICRzY29wZS5lbnRlcm1lc3NGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm90ZVRleHQgPSAkLnRyaW0oJCgnLmVkaXRtZXNzLXRleHQnKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAkaGlkZW5vdGVPYmoudGV4dChub3RlVGV4dCk7IC8v57uZ6ZqQ6JeP5Z+f6YeM56yU6K6w5YaF5a656LWL5YC8XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhub3RlVGV4dClcclxuICAgICAgICAgICAgICAgIHZhciBub3RlRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgbm90ZURhdGEub3JkZXJOdW0gPSBjaGFuZ2Vub3RlaWQ7XHJcbiAgICAgICAgICAgICAgICBub3RlRGF0YS5ub3RlID0gbm90ZVRleHQ7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhub3RlVGV4dClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vdGVEYXRhKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJG5vdGVPYmopXHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3VwT3JkZXJOb3RlJywgSlNPTi5zdHJpbmdpZnkobm90ZURhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0bm90ZUZsYWcgPSBmYWxzZTsgLy/lhbPpl63nlZnoqIDlvLnnqpdcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJG5vdGVPYmoucmVtb3ZlQXR0cignZGlzYWJsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgICRub3RlT2JqLnZhbChub3RlVGV4dCk7IC8v57uZ5L+u5pS555qE55WZ6KiA6LWL5YC8XHJcbiAgICAgICAgICAgICAgICAgICAgJG5vdGVPYmouYXR0cignZGlzYWJsZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5Zu95a625YiH5o2i77yM56iO5pS25pi+56S6XHJcbiAgICAgICAgICAgICRzY29wZS5zaG93VGF4aWQgPSBmYWxzZVxyXG4gICAgICAgICAgICAkc2NvcGUuY2l0eUNoYW5nZSA9IGZ1bmN0aW9uKGNpdHkpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZENvdW50cnlDb2RlID0gY2l0eS5zdWJzdHIoMCwyKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2lzdGljc1dheSgpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYWRkQ291bnRyeUNvZGUpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICRzY29wZS5jb3VudHJ5U2VsZWN0ID0gKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2cocmVzKVxyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAvL+aVsOe7hOWOu+mHjVxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1bmlxdWUoYXJyKXtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBuZXcgTWFwKClcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcnIuZmlsdGVyKChhKSA9PiAhcmVzdWx0LmhhcyhhKSAmJiByZXN1bHQuc2V0KGEsMSkpXHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/kv67mlLnlnLDlnYBcclxuICAgICAgICAgICAgJHNjb3BlLm1vZGVmeUFkZEZ1biA9IGZ1bmN0aW9uIChwcm8sIGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb3BlcnR5ID0gW10gLy/llYblk4HlsZ7mgKdcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0VHlwZXMgPSBbXSAvL+WVhuWTgeexu+Wei1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RPcmRTa3UgPSBbXSAvL+WVhuWTgXNrdVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RQcmljZSA9IFtdIC8v5ZWG5ZOB5Lu35qC8XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTW9kZWZ5RmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkSXRlbUlkID0gaXRlbS5JRDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRJdGVtSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzMSA9IGl0ZW0uU0hJUFBJTkdfQUREUkVTUzsgLy/lnLDlnYBcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzMiA9IGl0ZW0uc2hpcHBpbmdBZGRyZXNzMjtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRDaXR5ID0gaXRlbS5DSVRZOyAvL+WfjuW4glxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZFByb3ZpbmNlID0gaXRlbS5QUk9WSU5DRTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRaaXAgPSBpdGVtLlpJUDsgLy/pgq7nvJZcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRQaG9uZSA9IGl0ZW0uUEhPTkU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmFtZSA9IGl0ZW0uQ1VTVE9NRVJfTkFNRTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRUYXhpZCA9IGl0ZW0uZHV0eU5vLy/nqI7lj7dcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRMb2dpc2l0aWNOYW1lID0gaXRlbS5MT0dJU1RJQ19OQU1FOyAvL+mAieaLqeeahOWPkei0p+WcsOWdgFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZEFyZWFJZCA9IGl0ZW0uYXJlYUlkOyAvL+WPkei0p+WcsOWMuklkXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlSWQgPSBpdGVtLmFyZWFJZFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZExvZ2lzaXRpY2luZm8gPSBpdGVtLkxPR0lTVElDSU5GTzsgLy/lj5HotKfku5PliJfooahcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRPcmRlcldlaWdodCA9IGl0ZW0uT1JERVJXRUlHSFQ7IC8v5ZWG5ZOB5oC76YeN6YePXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkUXVhbnRpdHkgPSBpdGVtLk9SREVSX1FVQU5USVRZOyAvL+WVhuWTgeaAu+aVsOmHj1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZENvdW50cnlDb2RlID0gaXRlbS5DT1VOVFJZX0NPREU7IC8v55uu55qE5Zu95a62XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkU3RhcnRDb3VudHJ5ID0gaXRlbS5zdGFydENvdW50cnlDb2RlOyAvL+WPkei0p+WbveWutue8qeWGmVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZFZvbHVtZSA9IGl0ZW0udm9sdW1lOyAvL+WVhuWTgeS9k+enr1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1c3RvbWVySWQgPSBpdGVtLk1FUkNIQU5UTl9OVU1CRVI7IC8v5a6i5oi3aWRcclxuICAgICAgICAgICAgICAgICRzY29wZS5wYXJhbWV0ZXIgPVt7b3JkZXJJZDokc2NvcGUuYWRkSXRlbUlkLHRyYW5zZmVyQXJlYUlkOiRzY29wZS5hZGRBcmVhSWR9XSAvL+abtOaWsOWPkei0p+S7k+WIl+ihqFxyXG4gICAgICAgICAgICAgICAgJChcIiNpbml0X3NlbGVjdFwiKS52YWwoaXRlbS5hcmVhSWQpLnNlbGVjdDIoKVxyXG4gICAgICAgICAgICAgICAgJCgnI2luaXRfc2VsZWN0MycpLnNlbGVjdDIoKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5OYW1lID0gY291bnRyeUVuTmFtZShpdGVtLkNPVU5UUllfQ09ERSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRyeUVuTmFtZSA9IGVuTmFtZVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coICRzY29wZS5jb3VudHJ5RW5OYW1lIClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVuTmFtZSlcclxuICAgICAgICAgICAgICAgIGlmIChlbk5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bmVyeUluZm8gPSBpdGVtLkNPVU5UUllfQ09ERSArICcjJyArIGVuTmFtZTsgLy/lm73lrrZcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI2luaXRfc2VsZWN0MlwiKS52YWwoaXRlbS5DT1VOVFJZX0NPREUgKyAnIycgKyBlbk5hbWUpLnNlbGVjdDIoKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bmVyeUluZm8gPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5jb3VuZXJ5SW5mbylcclxuICAgICAgICAgICAgICAgIHByby5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9wZXJ0eS5wdXNoKGl0ZW0uUFJPUEVSVFkpIC8v5re75Yqg5ZWG5ZOB5bGe5oCnXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RUeXBlcy5wdXNoKGl0ZW0ucHJvZHVjdF90eXBlKSAvL+a3u+WKoOWVhuWTgeexu+Wei1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0T3JkU2t1LnB1c2goaXRlbS5TS1UpIC8v5re75Yqg5ZWG5ZOBc2t1XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RQcmljZS5wdXNoKGl0ZW0uUFJJQ0UpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb3BlcnR5ID0gJHNjb3BlLnByb3BlcnR5LmpvaW4oJywnKS5zcGxpdCgnLCcpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvcGVydHkgPSB1bmlxdWUoJHNjb3BlLnByb3BlcnR5KVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RQcmljZS5zb3J0KClcclxuICAgICAgICAgICAgICAgICRzY29wZS5tYXhQcmljZSA9ICRzY29wZS5wcm9kdWN0UHJpY2VbJHNjb3BlLnByb2R1Y3RQcmljZS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBob25lRXJyID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICRzY29wZS56aXBFcnIgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRheGlkRXJyID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICRzY29wZS5vcGluaW9uKCkudGhlbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tQaG9uZSA9IGZ1bmN0aW9uIChwaG9uZSkge1xyXG4gICAgICAgICAgICAgICAgcGhvbmUgPSBwaG9uZS5yZXBsYWNlKC9bXlxcZFxcK1xcLVxcKFxcKV0vZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkUGhvbmUgPSBwaG9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjb3VudHJ5RW5OYW1lKGNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvZGUpXHJcbiAgICAgICAgICAgICAgICBsZXQgbGVuID0gJHNjb3BlLmNvdW50cnlMaXN0Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxlbilcclxuICAgICAgICAgICAgICAgIGxldCBlbk5hbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAobGVuID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgPT0gJHNjb3BlLmNvdW50cnlMaXN0W2ldLklEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbk5hbWUgPSAkc2NvcGUuY291bnRyeUxpc3RbaV0uTkFNRV9FTjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuTmFtZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/mlLnlj5jlj5HotKfku5Ms6K+35rGC54mp5rWBXHJcbiAgICAgICAgICAgICRzY29wZS5jaGFuZ2VBcmVhID0gKGFyZWFJZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZExvZ2lzaXRpY05hbWUgPSAnJ1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhcmFtZXRlclswXS50cmFuc2ZlckFyZWFJZCA9IGFyZWFJZFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJlYUlkKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyZWFMaXN0LmZvckVhY2goaXRlbT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uYXJlYUlkID09PSArYXJlYUlkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbS5jb3VudHJ5Q29kZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZFN0YXJ0Q291bnRyeSA9IGl0ZW0uY291bnRyeUNvZGVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2lzdGljc1dheSgpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYWRkU3RhcnRDb3VudHJ5KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS53dWxpdUNvZGUgPSBbXTtcclxuICAgICAgICAgICAgLy/mlLnlj5jnianmtYHmlrnlvI9cclxuICAgICAgICAgICAgJHNjb3BlLmNoYW5nZUxvZ2lzaXRpYyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5hZGRMb2dpc2l0aWNpbmZvKXtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YUluZGV4ID0gJHNjb3BlLmFkZExvZ2lzaXRpY2luZm8uZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLm5hbWVFbiA9PT0gJHNjb3BlLmFkZExvZ2lzaXRpY05hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YUluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9ICRzY29wZS5hZGRMb2dpc2l0aWNpbmZvW2RhdGFJbmRleF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gb2JqLnJ1bGVUaXBzLmZpbmRJbmRleCgoaSkgPT4gaS5tc2dDb2RlLnNwbGl0KCcnKVswXSA9PT0gJzInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA+IC0xIHx8ICRzY29wZS5hZGRUYXhpZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1RheGlkID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS5hZGRUYXhpZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2UgZW50ZXIgdGhlIHRheCBJRC4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93VGF4aWQgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL+ivt+axgueJqea1geaOpeWPo++8jOiOt+WPlueJqea1geaWueW8j1xyXG4gICAgICAgICAgICAkc2NvcGUubG9naXN0aWNzV2F5ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbkxpc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjQXJlYUNvZGU6JHNjb3BlLmFkZFN0YXJ0Q291bnRyeSxcclxuICAgICAgICAgICAgICAgICAgICBkZXN0QXJlYUNvZGU6JHNjb3BlLmFkZENvdW50cnlDb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodDokc2NvcGUuYWRkT3JkZXJXZWlnaHQsIC8v5ZWG5ZOB6YeN6YePXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdFByb3A6JHNjb3BlLnByb3BlcnR5LCAvL+WVhuWTgeWxnuaAp1xyXG4gICAgICAgICAgICAgICAgICAgIHBob25lOiRzY29wZS5hZGRQaG9uZSxcclxuICAgICAgICAgICAgICAgICAgICB6aXA6JHNjb3BlLmFkZFppcCxcclxuICAgICAgICAgICAgICAgICAgICBkdXR5Tm86JHNjb3BlLmFkZFRheGlkLC8vZG8gaXRcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0VHlwZXM6JHNjb3BlLnByb2R1Y3RUeXBlcywgLy/llYblk4HnsbvlnotcclxuICAgICAgICAgICAgICAgICAgICBza3VMaXN0OiRzY29wZS5wcm9kdWN0T3JkU2t1LCAvL+WVhuWTgXNrdVxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDokc2NvcGUubWF4UHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdWlkOiRzY29wZS5hZGRJdGVtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdm9sdW1lOiRzY29wZS5hZGRWb2x1bWUsLy/llYblk4HkvZPnp69cclxuICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybXM6ICcnLC8v5bmz5Y+wXHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJDb2RlOiAkc2NvcGUuY3VzdG9tZXJJZCwgLy/lrqLmiLdpZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cob3B0aW9uTGlzdClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KG9wdGlvbkxpc3QpKVxyXG4gICAgICAgICAgICAgICAgaWYoISRzY29wZS5hZGRUYXhpZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dUYXhpZCA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZighJHNjb3BlLmFkZExvZ2lzaXRpY05hbWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93VGF4aWQgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCBhIHNoaXBwaW5nIG1ldGhvZC4nKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCk9PntcclxuICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignZnJlaWdodFNlcnZpY2UvY3VqaWFMb2dpc3RpY3NGcmVpZ2h0L2ZyZWlnaHQvb3B0aW9uL2xpc3QnLEpTT04uc3RyaW5naWZ5KG9wdGlvbkxpc3QpLGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJheUxvZ2lzdGljcyA9IHJlcy5kYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRMb2dpc2l0aWNpbmZvID0gJHNjb3BlLmFycmF5TG9naXN0aWNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5hZGRMb2dpc2l0aWNpbmZvKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhSW5kZXggPSAkc2NvcGUuYWRkTG9naXNpdGljaW5mby5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0ubmFtZUVuID09PSAkc2NvcGUuYWRkTG9naXNpdGljTmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGFJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9ICRzY29wZS5hZGRMb2dpc2l0aWNpbmZvW2RhdGFJbmRleF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBvYmoucnVsZVRpcHMuZmluZEluZGV4KChpKSA9PiBpLm1zZ0NvZGUuc3BsaXQoJycpWzBdID09PSAnMicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS5hZGRMb2dpc2l0aWNOYW1lKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID4gLTEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1RheGlkID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoJHNjb3BlLnNob3dUYXhpZCAmJiAhJHNjb3BlLmFkZFRheGlkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2UgZW50ZXIgdGhlIHRheCBJRC4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoJHNjb3BlLmFkZFRheGlkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dUYXhpZCA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1RheGlkID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/moKHpqozliKTmlq0g5qCh6aqM5Z+O5biC5Zyw5Z2A6YKu57yW562J5Y+R55Sf5Y+Y5YyW5LqG57uZ5Y+R6LSn5pa55byP6YeN5paw6LWL5YC8XHJcbiAgICAgICAgICAgICRzY29wZS5vcGluaW9uID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSAoKHJlc29sdmUscmVqZWN0KT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUuYWRkcmVzczEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBlbnRlciB0aGUgYWRkcmVzcy4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCEkc2NvcGUuYWRkQ2l0eSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIGVudGVyIHRoZSBjaXR5LicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoISRzY29wZS5hZGROYW1lKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2UgZW50ZXIgbmFtZS4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCEkc2NvcGUuY291bmVyeUluZm8pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBzZWxlY3QgYSBjb3VudHJ5LicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2dpc3RpY3NXYXkoKS50aGVuKChkYXRhKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zaG93VGF4aWQgJiYgISRzY29wZS5hZGRUYXhpZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIGVudGVyIHRoZSB0YXggSUQuJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL+WkseWOu+WFieagh+agoemqjFxyXG4gICAgICAgICAgICAkc2NvcGUubG9zdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbG9zdCcpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3BpbmlvbigpLnRoZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+ehruiupOe8lui+kVxyXG4gICAgICAgICAgICAkc2NvcGUuc3VyZU1vZGVGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYWRkSXRlbUluZGV4KVxyXG4gICAgICAgICAgICAgICAgdmFyIGFkZFVwZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgYWRkVXBkYXRhLmlkID0gJHNjb3BlLmFkZEl0ZW1JZDtcclxuICAgICAgICAgICAgICAgIGFkZFVwZGF0YS5zaGlwcGluZ19hZGRyZXNzID0gJHNjb3BlLmFkZHJlc3MxO1xyXG4gICAgICAgICAgICAgICAgYWRkVXBkYXRhLnNoaXBwaW5nX2FkZHJlc3MyID0gJHNjb3BlLmFkZHJlc3MyO1xyXG4gICAgICAgICAgICAgICAgYWRkVXBkYXRhLmNpdHkgPSAkc2NvcGUuYWRkQ2l0eTtcclxuICAgICAgICAgICAgICAgIGFkZFVwZGF0YS5wcm92aW5jZSA9ICRzY29wZS5hZGRQcm92aW5jZTtcclxuICAgICAgICAgICAgICAgIGFkZFVwZGF0YS56aXAgPSAkc2NvcGUuYWRkWmlwO1xyXG4gICAgICAgICAgICAgICAgYWRkVXBkYXRhLnBob25lID0gJHNjb3BlLmFkZFBob25lO1xyXG4gICAgICAgICAgICAgICAgYWRkVXBkYXRhLm5hbWUgPSAkc2NvcGUuYWRkTmFtZTtcclxuICAgICAgICAgICAgICAgIGFkZFVwZGF0YS50YXhpZCA9ICRzY29wZS5hZGRUYXhpZDtcclxuICAgICAgICAgICAgICAgIGFkZFVwZGF0YS5zdGFydENvdW50cnlDb2RlID0gJHNjb3BlLmFkZFN0YXJ0Q291bnRyeTsgLy/lj5HotKflm73lrrbnvKnlhplcclxuICAgICAgICAgICAgICAgIGFkZFVwZGF0YS5MT0dJU1RJQ19OQU1FID0gJHNjb3BlLmFkZExvZ2lzaXRpY05hbWU7IC8v5Y+R6LSn54mp5rWB5ZCN56ewXHJcbiAgICAgICAgICAgICAgICBhZGRVcGRhdGEuYXJlYUlkID0gJHNjb3BlLmFkZEFyZWFJZDsgLy/lj5HotKfljLrln59pZFxyXG4gICAgICAgICAgICAgICAgYWRkVXBkYXRhLmNvdW50cnkgPSAkc2NvcGUuY291bnRyeUVuTmFtZTsgLy/lm73lrrZcclxuICAgICAgICAgICAgICAgIGFkZFVwZGF0YS5jb3VudHJ5Q29kZSA9ICRzY29wZS5hZGRDb3VudHJ5Q29kZTsgLy/nm67nmoTlm73lrrbnvKnlhplcclxuICAgICAgICAgICAgICAgIGFkZFVwZGF0YS50eXBlID0gJzEnO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWRkVXBkYXRhKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoYWRkVXBkYXRhKSlcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY291bmVyeUluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRVcGRhdGEuY291bnRyeSA9ICRzY29wZS5jb3VuZXJ5SW5mby5zcGxpdCgnIycpWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFVwZGF0YS5jb3VudHJ5Q29kZSA9ICRzY29wZS5jb3VuZXJ5SW5mby5zcGxpdCgnIycpWzBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9waW5pb24oKS50aGVuKGRhdGE9PntcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEpeyAvL+mqjOivgeaIkOWKn+WQjuivt+axglNoaXBwaW5nIEZyb20g5ZKMIHVwZGF0ZeaOpeWPo1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnMScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdvcmRlci9vcmRlci9vcmRlclRyYW5zZmVyQXJlYScsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZmVyT3JkZXJEZXRhaWxQTVM6ICRzY29wZS5wYXJhbWV0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZURpc2NvdW50ZVRyYW5zZmVyOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY291bnRlVHJhbnNmZXJGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VidWxrV2FyZUZsYWcoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS56Y2hlY2tlZF9hbGwgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvdXBkYXRlRmlsZWQnLCBKU09OLnN0cmluZ2lmeShhZGRVcGRhdGEpLCBmdW5jdGlvbiAoe2RhdGF9KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEucnVsZU1zZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEubXNnQ29kZSA9PT0gJzUwNScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBob25lRXJyID0gZGF0YS5ydWxlTXNnLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZT09PSdwaG9uZScpIHx8IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuemlwRXJyID0gZGF0YS5ydWxlTXNnLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZT09PSd6aXAnKSB8fCBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRheGlkRXJyID0gZGF0YS5ydWxlTXNnLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZT09PSdkdXR5Tm8nKSB8fCBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZiAoZGF0YS5yZXN1bHQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTW9kZWZ5RmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdNb2RpZmllZCBTdWNjZXNzZnVsbHknKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QgPSBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrQWRkcmVzc0xpc3QgPSBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJlc2hMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnTW9kaWZ5IGZhaWxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v5bCB6KOF5pu05paw5YiX6KGoXHJcbiAgICAgICAgICAgIC8v5o+Q5Lqk6L+H56iL5Lit5pu05pawU2hvcHBpbmcgRnJvbVxyXG4gICAgICAgICAgICAkc2NvcGUudXBkYXRlU0YgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignb3JkZXIvb3JkZXIvb3JkZXJUcmFuc2ZlckFyZWEnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmZXJPcmRlckRldGFpbFBNUzogJHNjb3BlLnBhcmFtZXRlcixcclxuICAgICAgICAgICAgICAgICAgICByb3V0ZURpc2NvdW50ZVRyYW5zZmVyOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNjb3VudGVUcmFuc2ZlckZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlYnVsa1dhcmVGbGFnKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnpjaGVja2VkX2FsbCA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxheWVyLm1zZyhcIlN1Y2Nlc3NmdWxseSBjaGFuZ2VkIHNoaXBwaW5nIGFyZWHvvIFcIilcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coZGF0YS5kYXRhLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJzID0gbmV3IEJhc2U2NCgpO1xyXG4gICAgICAgICAgICB2YXIgY29kZUlubG9jYWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY29kZScpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb2RlSW5sb2NhbClcclxuICAgICAgICAgICAgdmFyIGJ0bldpZHRoID0gMDtcclxuICAgICAgICAgICAgdmFyIGJ0bkhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChjb2RlSW5sb2NhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBteURhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aXBIb3VyID0gbXlEYXRlLmdldEhvdXJzKCk7IC8v6I635Y+W5b2T5YmN5bCP5pe25pWwKDAtMjMpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpcE1pbnV0ZSA9IG15RGF0ZS5nZXRNaW51dGVzKCk7IC8v6I635Y+W5b2T5YmN5YiG6ZKf5pWwKDAtNTkpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpcFNlY29uZCA9IG15RGF0ZS5nZXRTZWNvbmRzKCk7IC8v6I635Y+W5b2T5YmN56eS5pWwKDAtNTkpXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RpcGhvdXInKS50ZXh0KHRpcEhvdXIgKyAnOicpXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RpcG1pbnV0ZScpLnRleHQodGlwTWludXRlICsgJzonKVxyXG4gICAgICAgICAgICAgICAgICAgICQoJyN0aXBzZWNvbmQnKS50ZXh0KHRpcFNlY29uZClcclxuICAgICAgICAgICAgICAgICAgICBjb2RlSW5sb2NhbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjb2RlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRpcHNPcmRTdGF0dWVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ29yZFRpcHMnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZUlubG9jYWwgPT0gJzIwMCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLnJlZnJlc2hCdG5GbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnJlZnJlc2gtYnRuJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhteURhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50aXBzT3JkU3RhdHVlcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdvcmRUaXBzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy50aXRPcmRUaXBzJykudGV4dCgkc2NvcGUudGlwc09yZFN0YXR1ZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMTAwMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+WIt+aWsOS7t+agvFxyXG4gICAgICAgICAgICAkc2NvcGUuZnJlc2hCdG5GdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdExpc3QyID0gW107XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoUHJpY2VCeVNLVSA9ICcnXHJcbiAgICAgICAgICAgICAgICBnZXRQcm9kdWN0TGlzdDIoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5mcmVzaFByaWNlRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkKCcjY2hlY2tBbGwyJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9wdWJsaWMtaW1nL2ljb254ei5wbmcnKS5yZW1vdmVDbGFzcygnY2hlY2tBbGwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuZnJlc2hQcmljZUZ1biA9IGZ1bmN0aW9uIChza3UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5mcmVzaFByaWNlRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZyZXNoRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZnJlc2hEYXRhLnNrdSA9IHNrdTtcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcmVmcmVzaE9yZGVyUHJpY2UnLCBKU09OLnN0cmluZ2lmeShmcmVzaERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnQ2hhbmdlIHN1Y2Nlc3MnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmVzaExpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0NoYW5nZSBmYWlsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5Yi35paw54mp5rWBXHJcbiAgICAgICAgICAgICRzY29wZS5mcmVzaGxvZ2lzdGljQnRuRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoV3VsaXVCeVNLVSA9ICcnXHJcbiAgICAgICAgICAgICAgICBnZXRQcm9kdWN0TGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZyZXNoTG9naXN0aWNzRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkKCcjY2hlY2tBbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvaWNvbnh6LnBuZycpLnJlbW92ZUNsYXNzKCdjaGVja0FsbCcpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkc2NvcGUucGFnZXNpemUyID0gJzUnO1xyXG4gICAgICAgICAgICAkc2NvcGUucGFnZXNpemUzID0gJzUnO1xyXG4gICAgICAgICAgICAkc2NvcGUucGFnZW51bTIgPSAnMSc7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdlbnVtMyA9ICcxJztcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zZWFyY2hXdWxpdSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wYWdlbnVtMiA9ICcxJztcclxuICAgICAgICAgICAgICAgIGdldFByb2R1Y3RMaXN0KClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuc2VhcmNoUHJpY2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnZW51bTMgPSAnMSc7XHJcbiAgICAgICAgICAgICAgICBnZXRQcm9kdWN0TGlzdDIoKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRQcm9kdWN0TGlzdDIoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VuZERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6ICRzY29wZS5wYWdlc2l6ZTMsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogJHNjb3BlLnBhZ2VudW0zLFxyXG4gICAgICAgICAgICAgICAgICAgIHNrdTogJHNjb3BlLnNlYXJjaFByaWNlQnlTS1UgPyAkc2NvcGUuc2VhcmNoUHJpY2VCeVNLVSA6ICcnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkc3AubG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9nZXRTa3VCeU1lcmNoYW50bicsIEpTT04uc3RyaW5naWZ5KHNlbmREYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gJ0NPREVfMjAwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHJlc3VsdCwgZnVuY3Rpb24gKGksIHYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBza3UgPSB2LnNrdTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBza3Uuc3BsaXQoJy0nKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuc2t1ID0gYXJyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RMaXN0MiA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsTnVtMyA9IGRhdGEuZGF0YS5jb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUZ1bjMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0ZhaWxlZCB0byBnZXQgbGlzdCBvZiBpdGVtcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRQcm9kdWN0TGlzdCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZW5kRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogJHNjb3BlLnBhZ2VzaXplMixcclxuICAgICAgICAgICAgICAgICAgICBwYWdlOiAkc2NvcGUucGFnZW51bTIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2t1OiAkc2NvcGUuc2VhcmNoV3VsaXVCeVNLVSA/ICRzY29wZS5zZWFyY2hXdWxpdUJ5U0tVIDogJydcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRzcC5sb2FkKCk7XHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL2dldFNrdUJ5TWVyY2hhbnRuJywgSlNPTi5zdHJpbmdpZnkoc2VuZERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAnQ09ERV8yMDAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2gocmVzdWx0LCBmdW5jdGlvbiAoaSwgdikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaSx2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNrdSA9IHYuc2t1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IHNrdS5zcGxpdCgnLScpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5za3UgPSBhcnI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdExpc3QgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbE51bTIgPSBkYXRhLmRhdGEuY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VGdW4yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdGYWlsZWQgdG8gZ2V0IGxpc3Qgb2YgaXRlbXMnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcGFnZUZ1bjIoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnMTExMTEnKTtcclxuICAgICAgICAgICAgICAgICQoXCIucGFnZWdyb3VwXCIpLmpxUGFnaW5hdG9yKHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50czogJHNjb3BlLnRvdGFsTnVtMiB8fCAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAkc2NvcGUucGFnZXNpemUyICogMSxcclxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlUGFnZXM6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6ICRzY29wZS5wYWdlbnVtMiAqIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQ2xhc3M6ICdjdXJyZW50JyxcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdDogJzxhIGNsYXNzPVwicHJldlwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmx0OyZsdDs8XFwvYT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXY6ICc8YSBjbGFzcz1cInByZXZcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPiZsdDs8XFwvYT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG5leHQ6ICc8YSBjbGFzcz1cIm5leHRcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPiZndDs8XFwvYT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3Q6ICc8YSBjbGFzcz1cIm5leHRcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPiZndDsmZ3Q7PFxcL2E+JyxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlOiAnPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj57e3BhZ2V9fTxcXC9hPicsXHJcbiAgICAgICAgICAgICAgICAgICAgb25QYWdlQ2hhbmdlOiBmdW5jdGlvbiAobiwgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnaW5pdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnZW51bTIgPSBuICsgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFByb2R1Y3RMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhZ2VGdW4zKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJzExMTExJyk7XHJcbiAgICAgICAgICAgICAgICAkKFwiLnBhZ2Vncm91cDJcIikuanFQYWdpbmF0b3Ioe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnRzOiAkc2NvcGUudG90YWxOdW0zIHx8IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6ICRzY29wZS5wYWdlc2l6ZTMgKiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVQYWdlczogNSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogJHNjb3BlLnBhZ2VudW0zICogMSxcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVDbGFzczogJ2N1cnJlbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0OiAnPGEgY2xhc3M9XCJwcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mbHQ7Jmx0OzxcXC9hPicsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldjogJzxhIGNsYXNzPVwicHJldlwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmx0OzxcXC9hPicsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dDogJzxhIGNsYXNzPVwibmV4dFwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmd0OzxcXC9hPicsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdDogJzxhIGNsYXNzPVwibmV4dFwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmd0OyZndDs8XFwvYT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6ICc8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPnt7cGFnZX19PFxcL2E+JyxcclxuICAgICAgICAgICAgICAgICAgICBvblBhZ2VDaGFuZ2U6IGZ1bmN0aW9uIChuLCB0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdpbml0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlbnVtMyA9IG4gKyAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UHJvZHVjdExpc3QyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v6Lez6aG1XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdlbnVtY2hhbmdlMyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0b3RhbFBhZ2UgPSBNYXRoLmNlaWwoKCRzY29wZS50b3RhbE51bTMgLSAwKSAvICgkc2NvcGUucGFnZXNpemUzIC0gMCkpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b3RhbFBhZ2UpXHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBhZ2VudW0zID4gdG90YWxQYWdlIHx8ICRzY29wZS5wYWdlbnVtMyA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBhZ2VudW0zIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnZW51bTMgPSAnMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGFnZSBkb2VzIG5vdCBleGlzdC4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBnZXRQcm9kdWN0TGlzdDIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+adoeaVsOaUueWPmFxyXG4gICAgICAgICAgICAkc2NvcGUucGFnZXNpemVjaGFuZ2UzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2VudW0zID0gXCIxXCI7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucGFnZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgZ2V0UHJvZHVjdExpc3QyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/ot7PpobVcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2VudW1jaGFuZ2UyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsUGFnZSA9IE1hdGguY2VpbCgoJHNjb3BlLnRvdGFsTnVtMiAtIDApIC8gKCRzY29wZS5wYWdlc2l6ZTIgLSAwKSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvdGFsUGFnZSlcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGFnZW51bTIgPiB0b3RhbFBhZ2UgfHwgJHNjb3BlLnBhZ2VudW0yIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGFnZW51bTIgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlbnVtMiA9ICcxJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYWdlIGRvZXMgbm90IGV4aXN0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGdldFByb2R1Y3RMaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/mnaHmlbDmlLnlj5hcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2VzaXplY2hhbmdlMiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wYWdlbnVtMiA9IFwiMVwiO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnBhZ2VzaXplKTtcclxuICAgICAgICAgICAgICAgIGdldFByb2R1Y3RMaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v5YWo6YCJXHJcbiAgICAgICAgICAgICQoJyNjaGVja0FsbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdjaGVja0FsbCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvaWNvbnh6LnBuZycpLnJlbW92ZUNsYXNzKCdjaGVja0FsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5mcmVzaC1ib2R5MScpLmZpbmQoJy5jaGVja0ltZycpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9pY29ueHoucG5nJykucmVtb3ZlQ2xhc3MoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvbXVsdGlwbGUxMS5wbmcnKS5hZGRDbGFzcygnY2hlY2tBbGwnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZnJlc2gtYm9keTEnKS5maW5kKCcuY2hlY2tJbWcnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvbXVsdGlwbGUxMS5wbmcnKS5hZGRDbGFzcygnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnI2NoZWNrQWxsMicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdjaGVja0FsbCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvaWNvbnh6LnBuZycpLnJlbW92ZUNsYXNzKCdjaGVja0FsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5mcmVzaC1ib2R5MicpLmZpbmQoJy5jaGVja0ltZycpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9pY29ueHoucG5nJykucmVtb3ZlQ2xhc3MoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvbXVsdGlwbGUxMS5wbmcnKS5hZGRDbGFzcygnY2hlY2tBbGwnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZnJlc2gtYm9keTInKS5maW5kKCcuY2hlY2tJbWcnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvbXVsdGlwbGUxMS5wbmcnKS5hZGRDbGFzcygnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnLmZyZXNoLWJvZHkxJykub24oJ2NsaWNrJywgJy5jaGVja0ltZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9pY29ueHoucG5nJykucmVtb3ZlQ2xhc3MoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvbXVsdGlwbGUxMS5wbmcnKS5hZGRDbGFzcygnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9ICQoJy5mcmVzaC1ib2R5MSAuY2hlY2tJbWcnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVuMiA9ICQoJy5mcmVzaC1ib2R5MSAuY2hlY2tJbWcuY2hlY2tlZCcpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmIChsZW4gPT0gbGVuMikge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNjaGVja0FsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9tdWx0aXBsZTExLnBuZycpLmFkZENsYXNzKCdjaGVja0FsbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjY2hlY2tBbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvaWNvbnh6LnBuZycpLnJlbW92ZUNsYXNzKCdjaGVja0FsbCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKCcuZnJlc2gtYm9keTInKS5vbignY2xpY2snLCAnLmNoZWNrSW1nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9wdWJsaWMtaW1nL2ljb254ei5wbmcnKS5yZW1vdmVDbGFzcygnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9tdWx0aXBsZTExLnBuZycpLmFkZENsYXNzKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gJCgnLmZyZXNoLWJvZHkyIC5jaGVja0ltZycpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHZhciBsZW4yID0gJCgnLmZyZXNoLWJvZHkyIC5jaGVja0ltZy5jaGVja2VkJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxlbiA9PSBsZW4yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2NoZWNrQWxsMicpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9tdWx0aXBsZTExLnBuZycpLmFkZENsYXNzKCdjaGVja0FsbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjY2hlY2tBbGwyJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9wdWJsaWMtaW1nL2ljb254ei5wbmcnKS5yZW1vdmVDbGFzcygnY2hlY2tBbGwnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJHNjb3BlLmZyZXNoTG9naXNGdW4gPSBmdW5jdGlvbiAoc2t1KSB7XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZnJlc2hMb2dpc3RpY3NGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnJlc2hEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICBmcmVzaERhdGEuc2t1ID0gc2t1O1xyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9yZWZyZXNoTG9naXN0aWNzUHJpY2UnLCBKU09OLnN0cmluZ2lmeShmcmVzaERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnQ2hhbmdlIHN1Y2Nlc3MnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmVzaExpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0NoYW5nZSBmYWlsZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBmcmVzaExpc3QoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VhcmNoaW5wVmFsID0gJC50cmltKCQoJy5vcmQtc2VhcmNoLWlucCcpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIHRqRnVuKG9yRGF0YSlcclxuICAgICAgICAgICAgICAgIG9yRGF0YS5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3JEYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkob3JEYXRhKSlcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcXVlcnlPcmRlcnMnLCBKU09OLnN0cmluZ2lmeShvckRhdGEpLCBkY2xzRnVuLCBkY2xlRnVuKVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0MSA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSAkc2NvcGUubGlzdC5vcmRlcnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSAkc2NvcGUubGlzdC5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRzdGF0dXNOdW0gPSAkc2NvcGUubGlzdC5hbGxPcmRlckNvdW50MjsgLy/lkITnp43nirbmgIHorqLljZXnmoTmlbDph49cclxuICAgICAgICAgICAgICAgICAgICBsb2dpc1JlbWFyaygkc2NvcGUubGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0RnVuKCk7IC8v5YiG6aG15Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtRnVuKCk7IC8v6LCD55So57uZ6K6i5Y2V6LWL5YC855qE5Ye95pWwXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsZUZ1bigpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQoJyN1cGRhdGEtYnRuLXdyYXAnKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy5vcmQtdXBkYXRhLWRpdicpLnNob3coKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCgnI3VwZGF0YS1idG4td3JhcCcpLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm9yZC11cGRhdGEtZGl2JykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkc2NvcGUucmVmZXJzaEZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zeVN0dUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICQoJy5yZW9yZHN0dS1kbGlzdCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzI3NXB4J1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zeVN0dSA9IDA7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVzT3JkU3R1ID0gMDtcclxuICAgICAgICAgICAgICAgICQoJyNkY2wtc2VsJykudmFsKCcxMDAnKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICBkc3AubG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JyksICQod2luZG93KS5oZWlnaHQoKSAtIDE3MSwgNDcsIDApO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdGpGdW4ob3JEYXRhKVxyXG4gICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkY2xzRnVuKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBKU09OLnBhcnNlKGxpc3QxKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9ICRzY29wZS5saXN0Lm9yZGVyc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSAkc2NvcGUubGlzdC5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3Jkc3RhdHVzTnVtID0gJHNjb3BlLmxpc3QuYWxsT3JkZXJDb3VudDI7IC8v5ZCE56eN54q25oCB6K6i5Y2V55qE5pWw6YePXHJcbiAgICAgICAgICAgICAgICAgICAgbG9naXNSZW1hcmsoJHNjb3BlLmxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgIG51bUZ1bigpOyAvL+iwg+eUqOe7meiuouWNlei1i+WAvOeahOWHveaVsFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL+iuvue9rum7mOiupOaXtumXtFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBHZXREYXRlU3RyKEFkZERheUNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgZGQuc2V0RGF0ZShkZC5nZXREYXRlKCkgKyBBZGREYXlDb3VudCk7IC8v6I635Y+WQWRkRGF5Q291bnTlpKnlkI7nmoTml6XmnJ9cclxuICAgICAgICAgICAgICAgIHZhciB5ID0gZGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgIHZhciBtID0gZGQuZ2V0TW9udGgoKSArIDE7IC8v6I635Y+W5b2T5YmN5pyI5Lu955qE5pel5pyfXHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGRkLmdldERhdGUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtIDwgMTApIHtcclxuICAgICAgICAgICAgICAgICAgICBtID0gJzAnICsgbVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGQgPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGQgPSAnMCcgKyBkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geSArIFwiLVwiICsgbSArIFwiLVwiICsgZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGFEYXRlID0gR2V0RGF0ZVN0cigtNDUpO1xyXG4gICAgICAgICAgICB2YXIgZW5EYXRlID0gR2V0RGF0ZVN0cigwKTtcclxuICAgICAgICAgICAgJChcIiNjai1zdGltZVwiKS52YWwoYURhdGUpOyAvL+WFs+mUruivreWPpVxyXG4gICAgICAgICAgICAvLyAkKFwiI2NqLWV0aW1lXCIpLnZhbCgnTm93Jyk7ICAgLy/lhbPplK7or63lj6VcclxuXHJcbiAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgb3JEYXRhLnVzZXJJZCA9IGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykpO1xyXG5cclxuICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSB7fTtcclxuICAgICAgICAgICAgb3JEYXRhLmRhdGEuc3RhdHVzID0gJzEnOyAvL+ivt+axgueahOiuouWNleeKtuaAgVxyXG4gICAgICAgICAgICBvckRhdGEuZGF0YS5jYW5oYW5kbGVyID0gJ3knO1xyXG4gICAgICAgICAgICBvckRhdGEuZGF0YS5wYWdlID0gMTsgLy/or7fmsYLnmoTnrKzlh6DpobUgICAxMCoxLTEww5LCs8OCw6tcclxuICAgICAgICAgICAgb3JEYXRhLmRhdGEubGltaXQgPSAxMDA7IC8v5q+P6aG16ZmQ5Yi255qE6K6i5Y2V5p2h5pWwXHJcbiAgICAgICAgICAgIC8v6I635Y+W5pe26Ze05Y+C5pWwXHJcbiAgICAgICAgICAgIHZhciB5U3RvcmVzVGltZSA9ICQoJyN5LW9yZC1zZGF0ZScpLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgeVN0b3JlZVRpbWUgPSAkKCcjeS1vcmQtZWRhdGUnKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIGNqc1RpbWUgPSAkKCcjY2otc3RpbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIGNqZVRpbWUgPSAkKCcjY2otZXRpbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgb3JEYXRhLmRhdGEuc3RvcmVPcmRlckRhdGVCZWdpbiA9IHlTdG9yZXNUaW1lOyAvL+W6l+mTuuW8gOWni+aXtumXtFxyXG4gICAgICAgICAgICBvckRhdGEuZGF0YS5zdG9yZU9yZGVyRGF0ZUVuZCA9IHlTdG9yZWVUaW1lOyAvL+W6l+mTuue7k+adn+aXtumXtFxyXG4gICAgICAgICAgICBvckRhdGEuZGF0YS5jak9yZGVyRGF0ZUJlZ2luID0gY2pzVGltZTsgLy9jauW8gOWni+aXtumXtFxyXG4gICAgICAgICAgICBvckRhdGEuZGF0YS5jak9yZGVyRGF0ZUVuZCA9IGNqZVRpbWU7IC8vY2rnu5PmnZ/ml7bpl7RcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5wYWdlTGltaXQgPSBvckRhdGEuZGF0YS5saW1pdDtcclxuICAgICAgICAgICAgJHNjb3BlLmNvdW50TnVtYmVyID0gJyc7IC8vw5LCu8K5wrLCtsOgw4nDmcOMw7XCtsKpwrXCpVxyXG4gICAgICAgICAgICAkc2NvcGUubGlzdCA9ICcnOyAvL8K2wqnCtcKlwrrDjcKyw7rDhsK3XHJcbiAgICAgICAgICAgICRzY29wZS5vcmRlckxpc3QgPSAnJzsgLy/CtsKpwrXCpcK1w4TDgcOQwrHDrcOKw73CvsOdXHJcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0TGlzdCA9ICcnOyAvL8Kyw7rDhsK3wrXDhMOBw5DCscOtw4rDvcK+w51cclxuICAgICAgICAgICAgJHNjb3BlLmZsYWcgPSBmYWxzZTsgLy/DhcOQwrbDj8OXwrTDjMKsXHJcbiAgICAgICAgICAgIC8v57uZ5b6F5o+Q5Lqk6K6i5Y2V6YeM55qE5LiL5ouJ5qGG6LWL5YC8XHJcbiAgICAgICAgICAgICQoJyNkY2wtc2VsJykudmFsKCcxMDAnKTtcclxuXHJcbiAgICAgICAgICAgICQoJy5kaXJlY3Qtb3JkZXJzLWN0cmx0YXR1cy1uYXYnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBiaWFubGlhbmd0aW1lKys7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgYSA9ICRzdGF0ZVBhcmFtcy5pZGxpc3Q7XHJcbiAgICAgICAgICAgIGlmIChhKSB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGEpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkTGlzdCA9IGJhc2U2NC5kZWNvZGUoYSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpZExpc3QpO1xyXG4gICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEub3JkZXJOdW1iZXIgPSBpZExpc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgICRzY29wZS5wY291bnROID0gMDsgLy/lrZjlgqjlvoXmj5DkuqTorqLljZXnmoTmgLvmnaHmlbAgcHJvY2VzcyByZXF1aXJlZFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShvckRhdGEpKVxyXG4gICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUubGlzdC5vcmRlckxpc3QpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvcHMgPSAkc2NvcGUubGlzdC5zaG9wczsgLy/lupfpk7rnmoTmlbDnu4RcclxuICAgICAgICAgICAgICAgIGRlbFNob3BGdW4oJHNjb3BlLnNob3BzKVxyXG4gICAgICAgICAgICAgICAgdmFyIGV4Y2VsU2hvcCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZXhjZWxTaG9wLmlkID0gJ2V4Y2VsJztcclxuICAgICAgICAgICAgICAgIGV4Y2VsU2hvcC5uYW1lID0gJ0V4Y2VsJztcclxuICAgICAgICAgICAgICAgIGV4Y2VsU2hvcC5yTkFNRSA9ICdFeGNlbCc7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvcHMucHVzaChleGNlbFNob3ApXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuc2hvcHMpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9ICRzY29wZS5saXN0Lm9yZGVyc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0Lm9yZGVyQXJlYSlcclxuICAgICAgICAgICAgICAgICRzY29wZS5wY291bnROID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7IC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUubGlzdC5hbGxPcmRlckNvdW50MilcclxuICAgICAgICAgICAgICAgICRzY29wZS5vcmRzdGF0dXNOdW0gPSAkc2NvcGUubGlzdC5hbGxPcmRlckNvdW50MjsgLy/lkITnp43nirbmgIHorqLljZXnmoTmlbDph49cclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGNvdW50TiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBkc3AucmVtb3ZlTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGROb3RTakZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsb2dpc1JlbWFyaygkc2NvcGUubGlzdCk7XHJcbiAgICAgICAgICAgICAgICBpbXBvcnRGdW4oKTsgLy/liIbpobXlh73mlbBcclxuICAgICAgICAgICAgICAgIG51bUZ1bigpOyAvL+iwg+eUqOe7meiuouWNlei1i+WAvOeahOWHveaVsFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkY2xlRnVuKCkge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/nu5norqLljZXnirbmgIHotYvlgLznmoTlh73mlbBcclxuICAgICAgICAgICAgZnVuY3Rpb24gbnVtRnVuKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmltcHByb2Nlc3NOdW0gPSAkc2NvcGUub3Jkc3RhdHVzTnVtLnlpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhcnROdW0gPSAkc2NvcGUub3Jkc3RhdHVzTnVtLmVyO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmluY29tcGxldGVOdW0gPSAkc2NvcGUub3Jkc3RhdHVzTnVtLnNhbjtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jYW5jZWxOdW0gPSAkc2NvcGUub3Jkc3RhdHVzTnVtLnNpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlZnVuZE51bSA9ICRzY29wZS5vcmRzdGF0dXNOdW0ud3U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWxsUHJvTnVtID0gJHNjb3BlLm9yZHN0YXR1c051bS5qaXU7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmltcHByb2Nlc3NOdW0gPT0gMCAmJiAkc2NvcGUuY2FydE51bSA9PSAwICYmICRzY29wZS5pbmNvbXBsZXRlTnVtID09IDAgJiYgJHNjb3BlLmNhbmNlbE51bSA9PSAwICYmICRzY29wZS5yZWZ1bmROdW0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhRm91bmQgPSB0cnVlOyAvL+makOiXj+ayoeacieaVsOaNrueahOWbvueJh1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pc29yZEZsYWcgPSB0cnVlOyAvL+aYvuekuuWFs+iBlOaQnOe0oueahOWGheWuuVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNvcmRGbGFnID0gZmFsc2U7IC8v6ZqQ6JeP5YWz6IGU5pCc57Si55qE5YaF5a65XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v57uZ54mp5rWB5Yqg5qCH6K6wIC0g54mp5rWB5aSH5rOo5L+h5oGv5YiG5byA5YaZIFsyMC0wMS0xOV1cclxuICAgICAgICAgICAgZnVuY3Rpb24gbG9naXNSZW1hcmsob3JkZXJEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignb3JkZXIvb3JkZXIvbG9naXN0aWNzUmVtYXJrTGlzdCcsIHt9LCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qge2RhdGF9ID0gcmVzIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1c0NvZGUgPT0gJzIwMCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9naXNSZW1hcmtIYW5kbGUoT2JqZWN0LmFzc2lnbihvcmRlckRhdGEsIHtyZW1hcms6IGRhdGEucmVzdWx0fSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrSGFuZGxlKE9iamVjdC5hc3NpZ24ob3JkZXJEYXRhLCB7cmVtYXJrOiBbXX0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9naXNSZW1hcmtIYW5kbGUoT2JqZWN0LmFzc2lnbihvcmRlckRhdGEsIHtyZW1hcms6IFtdfSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v57uZ54mp5rWB5Yqg5qCH6K6wXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvZ2lzUmVtYXJrSGFuZGxlKHJlcykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+iuouWNleS/oeaBryAtPicsIHJlcyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVtYXJrTGlzdCA9IHJlcy5yZW1hcms7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucmVtYXJrTGlzdClcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0TGVuZ3RoID0gJHNjb3BlLm9yZGVyc0xpc3QubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0TGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNfTkFNRSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5yZW1hcmtMaXN0Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNfTkFNRSA9PSAkc2NvcGUucmVtYXJrTGlzdFtqXS5uYW1lZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnJlbWFya0xpc3Rbal0ucmVtYXJrc3RyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLnJlbWFyayA9ICRzY29wZS5yZW1hcmtMaXN0W2pdLnJlbWFya3N0ci50b1N0cmluZygpLnJlcGxhY2UoLzxicj4vZywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLnJlbWFyayA9ICRzY29wZS5yZW1hcmtMaXN0W2pdLnJlbWFyaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCAkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ0lORk8ubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ19OQU1FID09ICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GT1trXS5sb2dpc3RpY05hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5jYXN0ID0gJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNJTkZPW2tdLmNhc3QgPT0gbnVsbCA/ICcwJyA6ICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GT1trXS5jYXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ0lORk8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBuTGVuID0gJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNJTkZPLmxlbmd0aDsgbiA8IG5MZW47IG4rKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ19OQU1FID09ICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GT1tuXS5sb2dpc3RpY05hbWUgJiYgJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNJTkZPW25dLnJlbW90ZUZlZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIucmVtYXJrID0gJ0FkZGl0aW9uYWwgQ2hhcmdlcyBmb3IgUmVtb3RlIEFkZHJlc3M6ICcgKyAkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ0lORk9bbl0ucmVtb3RlRmVlICsgJ1VTRCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lnLDlnYAx5YyF5ZCr5Zu65a6a5YC8IOmZkOWItuebuOW6lOeahOeJqea1gVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5TSElQUElOR19BRERSRVNTICYmICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLlNISVBQSU5HX0FERFJFU1MuaW5kZXhPZignUG8gQm94JykgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCA8ICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GTy5sZW5ndGg7IGwrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDX05BTUUgPT0gJ0NKIE5vcm1hbCBFeHByZXNzJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDX05BTUUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GT1tsXS5sb2dpc3RpY05hbWUgPT0gJ0NKIE5vcm1hbCBFeHByZXNzJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GTy5zcGxpY2UobCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lvqrnjq/mo4DmtYtlcGFja2V05bim55S155qE6K6i5Y2VXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDX05BTUUgPT0gJ2VQYWNrZXQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5wcm9kdWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuID0gJHNjb3BlLm9yZGVyc0xpc3RbaV0ucHJvZHVjdC5sZW5ndGg7IGogPCBsZW47IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5wcm9kdWN0W2pdLlBST1BFUlRZLmluZGV4T2YoXCJCQVRURVJZXCIpID49IDAgfHwgJHNjb3BlLm9yZGVyc0xpc3RbaV0ucHJvZHVjdFtqXS5QUk9QRVJUWS5pbmRleE9mKFwiRUxFQ1RST05JQ1wiKSA+PSAwIHx8ICRzY29wZS5vcmRlcnNMaXN0W2ldLnByb2R1Y3Rbal0uUFJPUEVSVFkuaW5kZXhPZihcIkhBVkVfQ1JFQU1cIikgPj0gMCB8fCAkc2NvcGUub3JkZXJzTGlzdFtpXS5wcm9kdWN0W2pdLlBST1BFUlRZLmluZGV4T2YoXCJIQVZFX01BR05FVElTTVwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLnJlbWFyayA9ICdXZSBoYXZlIHRvIHVzZSBhIHNwZWNpYWwgZVBhY2tldCBjaGFubmVsIHRvIHNoaXAgdGhpcyBvcmRlciBhcyBpdCBjb250YWlucyBzZW5zaXRpdmUgbWF0ZXJpYWwgbGlrZTogYmF0dGVyeSwgbGlxdWlkLCBjcmVhbSwgbWFnbmV0IGV0Yy4gVGhlIHNoaXBwaW5nIGNvc3Qgd2lsbCBiZSAxNSUgaGlnaGVyIHRoYW4gbm9ybWFsIGVQYWNrZXQuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mo4DmtYtza3VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc0xpc3RbaV0ucHJvZHVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMCwga2xlbiA9ICRzY29wZS5vcmRlcnNMaXN0W2ldLnByb2R1Y3QubGVuZ3RoOyBrIDwga2xlbjsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc0xpc3RbaV0ucHJvZHVjdFtrXS5TS1UuaW5kZXhPZignQ0pKSkpUSlQwMDk0NycpICE9IC0xIHx8ICRzY29wZS5vcmRlcnNMaXN0W2ldLnByb2R1Y3Rba10uU0tVLmluZGV4T2YoJ0NKSkpKVEpUMDA3MDAnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ19OQU1FID09ICdQb3N0TkwnIHx8ICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDX05BTUUgPT0gJ1MuRiBDaGluYSBEb21lc3RpYycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+m7mOiupOaYr3Bvc3RubCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GTyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ0lORk8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmnInlpIfpgInnianmtYEnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDAsIGxsZW4gPSAkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ0lORk8ubGVuZ3RoOyBsIDwgbGxlbjsgbCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GT1tsXS5sb2dpc3RpY05hbWUgPT0gJ1Bvc3ROTCcgfHwgJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNJTkZPW2xdLmxvZ2lzdGljTmFtZSA9PSAnUy5GIENoaW5hIERvbWVzdGljJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ19OQU1FID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ0luZm9BcnIgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nSW5mb0Fyci5wdXNoKCRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GT1tsXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNJTkZPID0gbG9nSW5mb0FycjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+Wkh+mAieaciXBzb3RubCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGwsbGxlbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobCA9PSBsbGVuIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ19OQU1FID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNJTkZPID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCflpIfpgInmsqHmnIlwc290bmwnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmsqHmnInlpIfpgInnianmtYEnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5wcm9kdWN0W2tdLlNLVS5pbmRleE9mKCdDSkpKSlRKVDAxNzc3JykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNfTkFNRSA9PSAnQ0ogbm9ybWFsIGV4cHJlc3MnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfpu5jorqTmmK9DSiBub3JtYWwgZXhwcmVzcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GTyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ0lORk8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSAwLCBtbGVuID0gJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNJTkZPLmxlbmd0aDsgbSA8IG1sZW47IG0rKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ0lORk9bbV0ubG9naXN0aWNOYW1lID09ICdDSiBub3JtYWwgZXhwcmVzcycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNfTkFNRSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2dJbmZvQXJyID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0luZm9BcnIucHVzaCgkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ0lORk9bbV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GTyA9IGxvZ0luZm9BcnI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCflpIfpgInmnIlDSiBub3JtYWwgZXhwcmVzcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+ayoeacieWkh+mAieeJqea1gScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS51c2VySWQgPT0gJzE4MGM2Zjk0MTBkZDQ0MTViNDVmYmE1YzI2OTViZWVlJyAmJiAkc2NvcGUub3JkZXJzTGlzdFtpXS5wcm9kdWN0W2tdLlNLVS5pbmRleE9mKCdDSkpaR0pZTDAwMDA5JykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNfTkFNRSA9PSAnRWxlY3RyaWMgUG9zdE5MJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn6buY6K6k5pivQ0ogbm9ybWFsIGV4cHJlc3MnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ0lORk8gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNJTkZPKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBtID0gMCwgbWxlbiA9ICRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GTy5sZW5ndGg7IG0gPCBtbGVuOyBtKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNJTkZPW21dLmxvZ2lzdGljTmFtZSA9PSAnRWxlY3RyaWMgUG9zdE5MJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5MT0dJU1RJQ19OQU1FID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ0luZm9BcnIgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nSW5mb0Fyci5wdXNoKCRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLkxPR0lTVElDSU5GT1ttXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuTE9HSVNUSUNJTkZPID0gbG9nSW5mb0FycjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+Wkh+mAieaciUNKIG5vcm1hbCBleHByZXNzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5rKh5pyJ5aSH6YCJ54mp5rWBJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v5pi+56S65aSn5Zu+XHJcbiAgICAgICAgICAgICQoJy5vcmRlcnMtdGFibGUnKS5vbignbW91c2VlbnRlcicsICcuc3Atc21hbGxpbWcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaGlkZS1iaWdpbWcnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICQoJy5vcmRlcnMtdGFibGUnKS5vbignbW91c2VlbnRlcicsICcuaGlkZS1iaWdpbWcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnNob3coKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCgnLm9yZGVycy10YWJsZScpLm9uKCdtb3VzZWxlYXZlJywgJy5zcC1zbWFsbGltZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5oaWRlLWJpZ2ltZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCgnLm9yZGVycy10YWJsZScpLm9uKCdtb3VzZWxlYXZlJywgJy5oaWRlLWJpZ2ltZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy/mibnph4/kv67mlLnnianmtYEg6I635Y+W5Zu95a625YiX6KGoXHJcbiAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvZ2V0T3JkZXJDb3VudHJ5JywgbnVsbCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY291bkxpc3QgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuY291bkxpc3QpXHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvL+iOt+WPlueJqea1geaWueW8j1xyXG4gICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL2VycGxvZ2lzdGljcy9nZXRMb2dpc3RpY1R5cGUnLCBudWxsLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICRzY29wZS5idWxrV2xMaXN0ID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmJ1bGtXbExpc3QpXHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkc2NvcGUuY291bmVyeUluZm8gPSAnJztcclxuICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9sb2dpc3RpYy9nZXRjb3VudHJ5JywgbnVsbCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50cnlPYmogPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb3VudHJ5TGlzdCA9IGNvdW50cnlPYmouY291bnRyeUxpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmNvdW50cnlMaXN0KVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5jb3VuZXJ5SW5mbylcclxuICAgICAgICAgICAgJHNjb3BlLmlzQ2hhbmdlRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUubm9sb2dpc3RDcyA9ICd5JzsgLy/mmK/lkKbml6DnianmtYEg5p+l6K+i5rKh5pyJ54mp5rWB55qE6K6i5Y2VXHJcbiAgICAgICAgICAgIC8v5qC55o2u5Zu95a625p+l6K+i6K6i5Y2VXHJcbiAgICAgICAgICAgICRzY29wZS5jb3VuQ2hhbmdlRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuY291bnRyeU5hbWUpXHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNvdW50cnlOYW1lKSB7IC8v6YCJ5Lit5Zu95a62XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzQ2hhbmdlRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwd2xEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgdGpGdW4odXB3bERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwd2xEYXRhLmRhdGEubG9naXN0aWNOYW1lID0gJHNjb3BlLm5vbG9naXN0Q3M7XHJcbiAgICAgICAgICAgICAgICAgICAgdXB3bERhdGEuZGF0YS5jb3VudHJ5ID0gJHNjb3BlLmNvdW50cnlOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwd2xEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeSh1cHdsRGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkodXB3bERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdDEgPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhsaXN0MSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBsaXN0MS5vcmRlcnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSBsaXN0MS5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnBjb3VudE4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGNvdW50TiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKGxpc3QxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0RnVuKCk7IC8v5YiG6aG15Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy/miYDmnInlm73lrrZcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNDaGFuZ2VGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwd2xEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgdGpGdW4odXB3bERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwd2xEYXRhLmRhdGEubG9naXN0aWNOYW1lID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdXB3bERhdGEuZGF0YS5jb3VudHJ5ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdXB3bERhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHVwd2xEYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcXVlcnlPcmRlcnMnLCBKU09OLnN0cmluZ2lmeSh1cHdsRGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0MSA9IEpTT04ucGFyc2UoZGF0YS5kYXRhLnJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxpc3QxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IGxpc3QxLm9yZGVyc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9IGxpc3QxLmNvdW50TnVtYmVyOyAvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AucmVtb3ZlTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RTakZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dpc1JlbWFyayhsaXN0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuaXNjaGVja0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAvL+aYr+WQpumAieS4rVxyXG4gICAgICAgICAgICAkc2NvcGUuaXNjaGVrRnVuID0gZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgICAgICAgICAkKGV2LnRhcmdldCkucHJvcCgnY2hlY2tlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNjaGVja0ZsYWcgPSAhJHNjb3BlLmlzY2hlY2tGbGFnO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmlzY2hlY2tGbGFnKVxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5pc2NoZWNrRmxhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pc2NoZWNrRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vbG9naXN0Q3MgPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvdW5DaGFuZ2VGdW4oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzY2hlY2tGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vbG9naXN0Q3MgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY291bkNoYW5nZUZ1bigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5L+u5pS554mp5rWBXHJcbiAgICAgICAgICAgICRzY29wZS5idWxrQ2hhbmdlV2xGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmxvZ2lzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWRzID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAuemNoZWNrYm94JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkcyArPSAkKHRoaXMpLnNpYmxpbmdzKCcuZGNsb3JkLXN5cy10aW1lJykudGV4dCgpICsgJywnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmxvZ2lzTmFtZSlcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4Z3dsRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIHhnd2xEYXRhLmxvZ2lzaWMgPSAkc2NvcGUubG9naXNOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHhnd2xEYXRhLm9yZGVyTnVtcyA9IGlkcztcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh4Z3dsRGF0YSkpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci91cE9yZGVyTG9naXNpY3MnLCBKU09OLnN0cmluZ2lmeSh4Z3dsRGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KDEyMylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2dpc05hbWUgPSAnJzsgLy/miornianmtYHorr7nva7kuLror7fpgInmi6lcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cHdsRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGpGdW4odXB3bERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXB3bERhdGEuZGF0YS5sb2dpc3RpY05hbWUgPSAkc2NvcGUubm9sb2dpc3RDcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwd2xEYXRhLmRhdGEuY291bnRyeSA9ICRzY29wZS5jb3VudHJ5TmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwd2xEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeSh1cHdsRGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcXVlcnlPcmRlcnMnLCBKU09OLnN0cmluZ2lmeSh1cHdsRGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdDEgPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxpc3QxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gbGlzdDEub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9IGxpc3QxLmNvdW50TnVtYmVyOyAvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGNvdW50TiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naXNSZW1hcmsobGlzdDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdNb2RpZnkgdGhlIGxvZ2lzdGljcyBmYWlsdXJlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v6auY57qn5pCc57Si55qE54mp5rWB5p+l6K+iXHJcbiAgICAgICAgICAgICRzY29wZS5nakNoYW5nZVdsRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmdqbG9naXNOYW1lKVxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5namxvZ2lzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ub2xvZ2lzdENzID0gJHNjb3BlLmdqbG9naXNOYW1lO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9sb2dpc3RDcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5namxvZ2lzTmFtZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICBkc3AubG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JyksICQod2luZG93KS5oZWlnaHQoKSAtIDE3MSwgNDcsIDApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVwd2xEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB0akZ1bih1cHdsRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB1cHdsRGF0YS5kYXRhLmxvZ2lzdGljTmFtZSA9ICRzY29wZS5ub2xvZ2lzdENzO1xyXG4gICAgICAgICAgICAgICAgdXB3bERhdGEuZGF0YS5jb3VudHJ5ID0gJHNjb3BlLmNvdW50cnlOYW1lO1xyXG4gICAgICAgICAgICAgICAgdXB3bERhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHVwd2xEYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codXB3bERhdGEpXHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkodXB3bERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gSlNPTi5wYXJzZShkYXRhLmRhdGEucmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhsaXN0MSlcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IGxpc3QxLm9yZGVyc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSBsaXN0MS5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucGNvdW50TilcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKGxpc3QxKTtcclxuICAgICAgICAgICAgICAgICAgICBpbXBvcnRGdW4oKTsgLy/liIbpobXlh73mlbBcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB0akZ1bih0amNzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2hvd0xpc3QgPSAkKCcjZGNsLXNlbCcpLnZhbCgpIC0gMDtcclxuICAgICAgICAgICAgICAgIHZhciB5U3RvcmVzVGltZSA9ICQoJyN5LW9yZC1zZGF0ZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHlTdG9yZWVUaW1lID0gJCgnI3ktb3JkLWVkYXRlJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2pzVGltZSA9ICQoJyNjai1zdGltZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNqZVRpbWUgPSAkKCcjY2otZXRpbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIHZhciB5U3RvcmVOYW1lID0gJC50cmltKCQoJyN5LXByby1uYW1lJykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNqU3RvcmVOYW1lID0gJC50cmltKCQoJyNjai1wcm8tbmFtZScpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHZhciBiZXJOYW1lID0gJC50cmltKCQoJy5idXllci1pbnAnKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VhcmNoaW5wVmFsID0gJCgnLm9yZC1zZWFyY2gtaW5wJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VhV2VpZ2h0ID0gJCgnLm9yZC1zZXdlaScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlYVNrdSA9ICQoJy5vcmQtc2Vza3UnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIHZhciBvcmRUeXBlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnLnR5cGUtc2VsJykudmFsKCkgPT0gJ0FsbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRUeXBlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoJy50eXBlLXNlbCcpLnZhbCgpID09ICdTaG9waWZ5IEltcG9ydGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZFR5cGUgPSAnMic7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoJy50eXBlLXNlbCcpLnZhbCgpID09ICdFeGNlbCBJbXBvcnRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRUeXBlID0gJzEnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRqY3MuZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdGpjcy5kYXRhLnN0YXR1cyA9ICcxJzsgLy/or7fmsYLnmoTorqLljZXnirbmgIFcclxuICAgICAgICAgICAgICAgIHRqY3MuZGF0YS5jYW5oYW5kbGVyID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgdGpjcy5kYXRhLnBhZ2UgPSAxOyAvL+ivt+axgueahOesrOWHoOmhtVxyXG4gICAgICAgICAgICAgICAgdGpjcy5kYXRhLmxpbWl0ID0gc2hvd0xpc3Q7IC8v5q+P6aG16ZmQ5Yi255qE6K6i5Y2V5p2h5pWwXHJcbiAgICAgICAgICAgICAgICB0amNzLmRhdGEub3JkZXJOdW1iZXIgPSBzZWFyY2hpbnBWYWw7XHJcbiAgICAgICAgICAgICAgICB0amNzLmRhdGEuc3RvcmVPcmRlckRhdGVCZWdpbiA9IHlTdG9yZXNUaW1lO1xyXG4gICAgICAgICAgICAgICAgdGpjcy5kYXRhLmNqT3JkZXJEYXRlQmVnaW4gPSBjanNUaW1lO1xyXG4gICAgICAgICAgICAgICAgdGpjcy5kYXRhLnN0b3JlT3JkZXJEYXRlRW5kID0geVN0b3JlZVRpbWU7XHJcbiAgICAgICAgICAgICAgICB0amNzLmRhdGEuY2pPcmRlckRhdGVFbmQgPSBjamVUaW1lO1xyXG4gICAgICAgICAgICAgICAgdGpjcy5kYXRhLnN0b3JlUHJvZHVjdE5hbWUgPSB5U3RvcmVOYW1lO1xyXG4gICAgICAgICAgICAgICAgdGpjcy5kYXRhLmNqUHJvZHVjdE5hbWUgPSBjalN0b3JlTmFtZTtcclxuICAgICAgICAgICAgICAgIHRqY3MuZGF0YS5idXllck5hbWUgPSBiZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgdGpjcy5kYXRhLm9yZGVyVHlwZSA9IG9yZFR5cGU7XHJcbiAgICAgICAgICAgICAgICB0amNzLmRhdGEud2VpZ2h0ID0gc2VhV2VpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGpjcy5kYXRhLnNrdSA9IHNlYVNrdTtcclxuICAgICAgICAgICAgICAgIHRqY3MuZGF0YS5zdG9yZU51bWJlciA9ICRzY29wZS5zdG9yZU5hbWU7XHJcbiAgICAgICAgICAgICAgICB0amNzLmRhdGEuY291bnRyeSA9ICRzY29wZS5jb3VudHJ5TmFtZTtcclxuICAgICAgICAgICAgICAgIHRqY3MuZGF0YS5sb2dpc3RpY05hbWUgPSAkc2NvcGUuZ2psb2dpc05hbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnVzZXJJZCA9PSAnNzM4Q0IyQkQtMEQ4Qy00NTg3LTk3NzktOENGQTlGNzg4MDQ3JyB8fCAkc2NvcGUudXNlcklkID09ICd7OERBMEVDM0UtRTRBNy00RDlCLTg4NzYtMkEwMjU1MTVFQkUwfScpIHtcclxuICAgICAgICAgICAgICAgICAgICB0amNzLmRhdGEuc3RvcmFnZSA9ICRzY29wZS5zdG9yYWdlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmZpbHRlcldlaWdodCA9IFwiXCJcclxuICAgICAgICAgICAgJHNjb3BlLmlzSnVzdE51bWJlciA9IGZ1bmN0aW9uKHZhbCl7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSBOdW1iZXIodmFsKVxyXG4gICAgICAgICAgICAgICAgaWYoaXNOYU4odmFsKjEpIHx8IHZhbCoxIDwwKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyV2VpZ2h0ID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHZhbD45OTk5KXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyV2VpZ2h0ID0gTnVtYmVyKGAke3ZhbH1gLnNsaWNlKDAsLTEpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHZhbC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSAmJiB2YWwudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0ubGVuZ3RoPjIpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJXZWlnaHQgPSBOdW1iZXIoTnVtYmVyKHZhbCkudG9GaXhlZCgzKS5zbGljZSgwLC0xKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQoJy5pbnAtbnVtLWdvMicpLmtleWRvd24oZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJWYWwgPSAkKCcuaW5wLW51bS1nbzInKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIGN1clZhbCA9IGN1clZhbC5yZXBsYWNlKC9bXlxcZF0vZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAkKCcuaW5wLW51bS1nbzInKS52YWwoY3VyVmFsKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKCcuaW5wLW51bS1nbzInKS5ibHVyKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyVmFsID0gJCgnLmlucC1udW0tZ28yJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICBjdXJWYWwgPSBjdXJWYWwucmVwbGFjZSgvW15cXGRdL2csIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmlucC1udW0tZ28yJykudmFsKGN1clZhbClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy/pvKDmoIfnp7vlhaXnp7vpmaQg5pi+56S65ZWG5ZOBXHJcbiAgICAgICAgICAgICQoJy5zaG93c3AtaW1nJykubW91c2VlbnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvdXAucG5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9wdWJsaWMtaW1nL3VwLWhvdmVyLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9kb3duLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9kb3duLWhvdmVyLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKCcuc2hvd3NwLWltZycpLm1vdXNlbGVhdmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9wdWJsaWMtaW1nL3VwLWhvdmVyLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy91cC5wbmcnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvZG93bi1ob3Zlci5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvZG93bi5wbmcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICQoJy5zaG93c3AtaW1nJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9wdWJsaWMtaW1nL3VwLWhvdmVyLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9kb3duLWhvdmVyLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5vcmRlcnMtdGFibGUgLmQtdG9nZ2xlLXRyJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5vcmRlcnMtdGFibGUgLm9yZGVyLWRldGFpbCcpLmFkZENsYXNzKCdvcmRlci1jbGljay1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvZG93bi1ob3Zlci5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvdXAtaG92ZXIucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLm9yZGVycy10YWJsZSAuZC10b2dnbGUtdHInKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLm9yZGVycy10YWJsZSAub3JkZXItZGV0YWlsJykucmVtb3ZlQ2xhc3MoJ29yZGVyLWNsaWNrLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvL+eCueWHu+S6i+S7tlxyXG4gICAgICAgICAgICAkKCcub3JkZXJzLXRhYmxlJykub24oJ2NsaWNrJywgJy5vcmRlci1kZXRhaWwnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50KVxyXG4gICAgICAgICAgICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5oYXNDbGFzcygnemNoZWNrYm94JykgfHwgJChldmVudC50YXJnZXQpLmhhc0NsYXNzKCdkY2wtb3JkLXNlbHdsJykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnb3JkZXItY2xpY2stYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLm5leHQoKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnb3JkZXItY2xpY2stYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdvcmRlci1jbGljay1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCgnLm9yZGVycy10YWJsZScpLm9uKCdjbGljaycsICcuZC10b2dnbGUtdHInLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wcmV2KCkuYWRkQ2xhc3MoJ29yZGVyLWNsaWNrLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyDorqLljZVcclxuICAgICAgICAgICAgJCgnLm9yZGVycy10YWJsZScpLm9uKCdtb3VzZWVudGVyJywgJy5vcmRlci1kZXRhaWw+dGQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnb3JkZXItdGltZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLm5leHQoKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcub3JkZXJzLXRhYmxlIC5vcmRlci1kZXRhaWwnKS5yZW1vdmVDbGFzcygnb3JkZXItZGV0YWlsLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnb3JkZXItZGV0YWlsLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKCcub3JkZXJzLXRhYmxlJykub24oJ21vdXNlbGVhdmUnLCAnLm9yZGVyLWRldGFpbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdvcmRlci1jbGljay1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5uZXh0KCkuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvL+WVhuWTgVxyXG4gICAgICAgICAgICAkKCcub3JkZXJzLXRhYmxlJykub24oJ21vdXNlZW50ZXInLCAnLmQtdG9nZ2xlLXRyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICQoJy5vcmRlcnMtdGFibGUnKS5vbignbW91c2VsZWF2ZScsICcuZC10b2dnbGUtdHInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5wcmV2KCkuaGFzQ2xhc3MoJ29yZGVyLWNsaWNrLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvL3RhYmxlXHJcbiAgICAgICAgICAgICQoJy5vcmRlcnMtdGFibGUnKS5tb3VzZWxlYXZlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy5vcmRlcnMtdGFibGUgLm9yZGVyLWRldGFpbCcpLnJlbW92ZUNsYXNzKCdvcmRlci1kZXRhaWwtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm5hdkxpc3QgPSBbXHJcbiAgICAgICAgICAgICAgICB7bmFtZTogJ1Byb2Nlc3MgUmVxdWlyZWQnLCBocmVmOiBcIiMvZGlyZWN0LW9yZGVyc1wiLCBzaG93OiB0cnVlfSxcclxuICAgICAgICAgICAgICAgIHtuYW1lOiAnQ2FydCcsIGhyZWY6IFwiIy9pbXAtY2FydFwifSxcclxuICAgICAgICAgICAgICAgIHtuYW1lOiAnSW5jb21wbGV0ZSBPcmRlcnMnLCBocmVmOiBcIiMvaW1wLWluY29tcFwifSxcclxuICAgICAgICAgICAgICAgIHtuYW1lOiAnQ2FuY2VsZWQnLCBocmVmOiBcIiMvaW1wLWNhbmNlbFwifSxcclxuICAgICAgICAgICAgICAgIHtuYW1lOiAnU2VhcmNoIEFsbCcsIGhyZWY6IFwiIy9zZWFyY2gtYWxsXCJ9LFxyXG4gICAgICAgICAgICAgICAge25hbWU6ICdTdG9yZSBPcmRlcnMnLCBocmVmOiBcIiMvQXV0aG9yaXplT3JkZXJcIn0sXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgJCgnLmRpcmVjdC1sZWZ0YmFyYScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy5kaXJlY3QtbGVmdGJhcmEnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICdsaW5lYXItZ3JhZGllbnQoMGRlZyxyZ2JhKDI1MywgMTYyLCA0NCwgMSkgMCUsIHJnYmEoMjQ3LCAxNDAsIDQxLCAxKSA3OCUsIHJnYmEoMjQxLCAxMTgsIDM3LCAxKSAxMDAlKScpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyDlt6bkvqfnmoTlr7zoiKrmt7vliqDmu5rliqjkuovku7ZcclxuICAgICAgICAgICAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA+PSA4MCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5sZWZ0LW5hdicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICc4MHB4J1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubGVmdC1saXN0JykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJzAnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8v57uZ6KKr5Yig6Zmk55qE6K6i5Y2V5re75Yqg5by55qGGXHJcbiAgICAgICAgICAgICRzY29wZS5zaG93ZGVsRnVuID0gZnVuY3Rpb24gKGV2LCBpbmRleCwgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uc2hvcE9yZGVyU3RhdHVzICYmIGl0ZW0uc2hvcE9yZGVyU3RhdHVzICE9ICdwcm9jZXNzaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5kY2wtb3JkLXRib2R5JykuZXEoaW5kZXgpLmZpbmQoJy5oYXNkZWwtY29uJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5oaWRlZGVsRnVuID0gZnVuY3Rpb24gKGV2LCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmRjbC1vcmQtdGJvZHknKS5lcShpbmRleCkuZmluZCgnLmhhc2RlbC1jb24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmRleClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLkhhc2RlbGV0ZVN1cmVGdW4gPSBmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pc2RlbGhhc0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmhhc0luZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaGFzSXRlbUlkID0gaXRlbS5JRDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuc3VyZWRIYXNGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNkZWxoYXNGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVsZXRlRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlRGF0YS5vcmRlck51bXMgPSAkc2NvcGUuaGFzSXRlbUlkO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlRGF0YS50eXBlID0gMjtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGRlbGV0ZURhdGEpKVxyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9kZWxldGVPcmRlcicsIEpTT04uc3RyaW5naWZ5KGRlbGV0ZURhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdC5zcGxpY2UoJHNjb3BlLmhhc0luZGV4LCAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0RlbGV0ZSBTdWNjZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0RlbGV0ZSBFcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/mgaLlpI3orqLljZVcclxuICAgICAgICAgICAgJHNjb3BlLmtlZXBPcmRGdW4gPSBmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pc2tlZXBoYXNGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5oYXNJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmhhc0l0ZW1JZCA9IGl0ZW0uSUQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLnN1cmVrZWVwSGFzRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlza2VlcGhhc0ZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBkZWxldGVEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICBkZWxldGVEYXRhLmlkID0gJHNjb3BlLmhhc0l0ZW1JZDtcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvY29udGludWVPcmRlcicsIEpTT04uc3RyaW5naWZ5KGRlbGV0ZURhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0WyRzY29wZS5oYXNJbmRleF0ub3JkZXIuc2hvcE9yZGVyU3RhdHVzID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnS2VlcCBTdWNjZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0tlZXAgRXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5oGi5aSN5omA5pyJ6K6i5Y2VXHJcbiAgICAgICAgICAgICRzY29wZS5rZWVwQWxsRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlza2VlcEFsbEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5zdXJla2VlcEFsbEZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pc2tlZXBBbGxGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL2NvbnRpbnVlT3JkZXJBbGwnLCB7fSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0tlZXAgU3VjY2VzcycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmVzaExpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnS2VlcCBFcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/liKDpmaTmiYDmnInorqLljZVcclxuICAgICAgICAgICAgJHNjb3BlLkhhc2RlbGV0ZWFsbEZ1biA9IGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbSlcclxuICAgICAgICAgICAgICAgICRzY29wZS5zaG9wU3R1VHlwZSA9IGl0ZW0uc2hvcE9yZGVyU3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzZGVsZXRlQWxsRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLnN1cmVkZWxldGVBbGxGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNkZWxldGVBbGxGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuc2hvcFN0dVR5cGUpXHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICB2YXIgZGVsZXRlQWxsID0ge307XHJcbiAgICAgICAgICAgICAgICBkZWxldGVBbGwudHlwZSA9ICRzY29wZS5zaG9wU3R1VHlwZTtcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvZGVsZXRlT3JkZXJBbGwnLCBKU09OLnN0cmluZ2lmeShkZWxldGVBbGwpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnRGVsZXRlIFN1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlc2hMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0RlbGV0ZSBFcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGhlQmluZ0lkcyA9ICcnO1xyXG4gICAgICAgICAgICAkc2NvcGUuaGVCaW5nT3JkRnVuID0gZnVuY3Rpb24gKCkgeyAvL+WQiOW5tuiuouWNlVxyXG4gICAgICAgICAgICAgICAgbGV0IGhiQWRkcmVzc0FyciA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbENvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIGhlQmluZ0lkcyA9ICcnXHJcbiAgICAgICAgICAgICAgICAkKFwiI3otZGNsLW9yZCAuemNoZWNrYm94XCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGJJdGVtT2JqID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhiSXRlbU9iai5TSElQUElOR19BRERSRVNTID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLnNoaXBwaW5nLWluZm8nKS5jaGlsZHJlbignLmFkcmVzczEnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhiSXRlbU9iai5zaGlwcGluZ0FkZHJlc3MyID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLnNoaXBwaW5nLWluZm8nKS5jaGlsZHJlbignLmFkcmVzczInKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhiSXRlbU9iai5DSVRZID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLnNoaXBwaW5nLWluZm8nKS5jaGlsZHJlbignLmJ1eWVyLWFkcmVzcycpLmNoaWxkcmVuKCcuaW1wLXByb2N1cy1jaXR5JykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYkl0ZW1PYmouUFJPVklOQ0UgPSAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcuc2hpcHBpbmctaW5mbycpLmNoaWxkcmVuKCcuYnV5ZXItYWRyZXNzJykuY2hpbGRyZW4oJy5pbXAtcHJvY3VzLXByb3ZpbmNlJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYkl0ZW1PYmouQ09VTlRSWV9DT0RFID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLnNoaXBwaW5nLWluZm8nKS5jaGlsZHJlbignLmJ1eWVyLWFkcmVzcycpLmNoaWxkcmVuKCcuaW1wLXByb2N1cy1jb3VudHJ5JykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYkl0ZW1PYmoub3JkSWQgPSAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcub3JkLWNhaScpLmNoaWxkcmVuKCcub3JkZXItaWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlQmluZ0lkcyArPSAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcub3JkLWNhaScpLmNoaWxkcmVuKCcub3JkZXItaWQnKS50ZXh0KCkgKyAnLCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhiSXRlbU9iai5jdXNOYW1lID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLnNoaXBwaW5nLWluZm8nKS5jaGlsZHJlbignLmJ1eWVyLW5hbWUnKS5jaGlsZHJlbignLmN1cy1uYW1lJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYkl0ZW1PYmoucGhvbmVOdW0gPSAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcuc2hpcHBpbmctaW5mbycpLmNoaWxkcmVuKCcucGhvbmUtbnVtJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYkl0ZW1PYmouemlwID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLnNoaXBwaW5nLWluZm8nKS5jaGlsZHJlbignLmJ1eWVyLWFkcmVzcycpLmNoaWxkcmVuKCcucG9zdC1jb2RlJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYkFkZHJlc3NBcnIucHVzaChoYkl0ZW1PYmopXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0U2VsSWRzQXJyID0gaGJBZGRyZXNzQXJyLm1hcChpdGVtID0+IGl0ZW0ub3JkSWQpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzcGxpdFNlbElkc0FycilcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KVxyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLm9yZGVyc0xpc3Quc29tZShpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgaWYoaXRlbS5vcmRlci5PUkRFUlNPVVJDRV9UWVBFID09PSAnNycgJiYgc3BsaXRTZWxJZHNBcnIuaW5jbHVkZXMoaXRlbS5vcmRlci5JRCkpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnMTIzMTIzJylcclxuICAgICAgICAgICAgICAgIC8vICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gfSlcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdC5zb21lKGl0ZW0gPT4gaXRlbS5vcmRlci5PUkRFUlNPVVJDRV9UWVBFID09PSAnNycgJiYgc3BsaXRTZWxJZHNBcnIuaW5jbHVkZXMoaXRlbS5vcmRlci5JRCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdPcmRlcnMgY2Fubm90IGJlIGNvbWJpbmVkLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGhiQWRkcmVzc0FycilcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNwbGl0U2VsSWRzKVxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbENvdW50ID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNJc0VxdWFsKGhiQWRkcmVzc0FycikpIHsgLy/lm73lrrYg6YKu57yWIOeUteivnSDlp5PlkI3mmK/lkKbnm7jlkIxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmhlQmluZ0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaGJBZHJMaXN0ID0gZGVsQWRkUmVwRnVuKGhiQWRkcmVzc0Fycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5oYkFkckxpc3RbMF1bJ2ZsYWcnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzT3JkSWQgPSAkc2NvcGUuaGJBZHJMaXN0WzBdLm9yZElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hlY2tlZExpc3QgPSBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3BsaXRTZWxJZHNBcnIuaW5jbHVkZXMoaXRlbS5vcmRlci5JRCkpIGNoZWNrZWRMaXN0ID0gWy4uLmNoZWNrZWRMaXN0LCBpdGVtLm9yZGVyXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WOu+mZpOayoeacieW6l+mTuueahOmAieS4remhuVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkTGlzdCA9IGNoZWNrZWRMaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0uU1RPUkVfTlVNQkVSKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGVja2VkTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5pcXVlQXJyID0gdW5pcXVlQXJyRm4oY2hlY2tlZExpc3QsICdTVE9SRV9OVU1CRVInKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWVyZ2VTaG9wTGlzdCA9IHVuaXF1ZUFyci5tYXAoaXRlbSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9wTmFtZTogaXRlbS5TVE9SRV9OQU1FLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9wSWQ6IGl0ZW0uU1RPUkVfTlVNQkVSIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdE1lcmdlU2hvcCA9ICRzY29wZS5tZXJnZVNob3BMaXN0Lmxlbmd0aCA9PT0gMSA/ICRzY29wZS5tZXJnZVNob3BMaXN0WzBdLnNob3BJZCA6ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RFcnJUZXh0ID0gJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJHNjb3BlLm1lcmdlU2hvcExpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBzZWxlY3QgYXQgbGVhc3Qgb25lIG9yZGVyJylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHVuaXF1ZUFyckZuKGFyciA9IFtdLCBmaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGpzb24gPSB7fVxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyci5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChqc29uW2l0ZW1bZmllbGRdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGpzb25baXRlbVtmaWVsZF1dID0gMVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gbWVzSXNFcXVhbChhcnIpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJC50cmltKGFyclswXS5DT1VOVFJZX0NPREUpLnRvVXBwZXJDYXNlKCkgIT0gJC50cmltKGFycltpXS5DT1VOVFJZX0NPREUpLnRvVXBwZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdDYW5ub3QgYmUgY29tYmluZWQgZHVlIHRvIGRpZmZlcmVudCBjb3VudHJ5Jywge3RpbWU6IDQwMDB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLnRyaW0oYXJyWzBdLmN1c05hbWUpLnRvVXBwZXJDYXNlKCkgIT0gJC50cmltKGFycltpXS5jdXNOYW1lKS50b1VwcGVyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnQ2Fubm90IGJlIGNvbWJpbmVkIGR1ZSB0byBkaWZmZXJlbnQgcmVjZWl2ZXIgbmFtZScsIHt0aW1lOiA0MDAwfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJC50cmltKGFyclswXS5waG9uZU51bSkgIT0gJC50cmltKGFycltpXS5waG9uZU51bSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdDYW5ub3QgYmUgY29tYmluZWQgZHVlIHRvIGRpZmZlcmVudCBwaG9uZSBudW1iZXJzJywge3RpbWU6IDQwMDB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLnRyaW0oYXJyWzBdLnppcCkudG9VcHBlckNhc2UoKSAhPSAkLnRyaW0oYXJyW2ldLnppcCkudG9VcHBlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0Nhbm5vdCBiZSBjb21iaW5lZCBkdWUgdG8gZGlmZmVyZW50IHBvc3RhbCBjb2RlcycsIHt0aW1lOiA0MDAwfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWxBZGRSZXBGdW4oYXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgbCA9IGFycmF5Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgbDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnJheVtpXS5DT1VOVFJZX0NPREUudG9VcHBlckNhc2UoKSA9PSBhcnJheVtqXS5DT1VOVFJZX0NPREUudG9VcHBlckNhc2UoKSAmJiBhcnJheVtpXS5DSVRZLnRvVXBwZXJDYXNlKCkgPT0gYXJyYXlbal0uQ0lUWS50b1VwcGVyQ2FzZSgpICYmIGFycmF5W2ldLlBST1ZJTkNFLnRvVXBwZXJDYXNlKCkgPT0gYXJyYXlbal0uUFJPVklOQ0UudG9VcHBlckNhc2UoKSAmJiBhcnJheVtpXS5TSElQUElOR19BRERSRVNTLnRvVXBwZXJDYXNlKCkgPT0gYXJyYXlbal0uU0hJUFBJTkdfQUREUkVTUy50b1VwcGVyQ2FzZSgpICYmIGFycmF5W2ldLnNoaXBwaW5nQWRkcmVzczIudG9VcHBlckNhc2UoKSA9PSBhcnJheVtqXS5zaGlwcGluZ0FkZHJlc3MyLnRvVXBwZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaChhcnJheVtpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLnN1cmVIYkZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5tZXJnZVNob3BMaXN0Lmxlbmd0aCAmJiAhJHNjb3BlLnNlbGVjdE1lcmdlU2hvcCkgcmV0dXJuICRzY29wZS5zZWxlY3RFcnJUZXh0ID0gJ1BsZWFzZSBzZWxlY3QgYSBzdG9yZS4nXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0RXJyVGV4dCA9ICcnXHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRzOiBoZUJpbmdJZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzc09yZGVySWQ6ICRzY29wZS5hZGRyZXNzT3JkSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRTaG9wSWQ6ICRzY29wZS5zZWxlY3RNZXJnZVNob3BcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdvcmRlci9vcmRlci9tZXJnZU9yZGVyJywgcGFyYW1zLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGJSZXNBcnIgPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzU3VjQ291bnQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzRXJyb3JDb3VudCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYlJlc0FyciAmJiBKU09OLnN0cmluZ2lmeShoYlJlc0FycikgIT0gJ1tdJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmhlQmluZ0ZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBoYlJlc0Fyci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYlJlc0FycltpXS5yZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzU3VjQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNFcnJvckNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGhiUmVzQXJyW2ldLm1lc3NhZ2VbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNTdWNDb3VudCA+IDAgJiYgcmVzRXJyb3JDb3VudCA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0NvbWJpbmUgc3VjY2VzcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzU3VjRnJlc2hGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzU3VjQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc1N1Y0ZyZXNoRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKGVycm9yTWVzc2FnZSwge3RpbWU6IDMwMDB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGhiUmVzQXJyWzBdLm1lc3NhZ2VbMF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZyhlcnJvck1lc3NhZ2UsIHt0aW1lOiAzMDAwfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnQ29tYmluZSBlcnJvcicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKGRhdGEuZGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGhiUmVjb3Zlck9yZFByb0NvdW50O1xyXG4gICAgICAgICAgICAkc2NvcGUuaGVCaW5nUmVjb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzZWxDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICBoZUJpbmdJZHMgPSAnJztcclxuICAgICAgICAgICAgICAgIGhiUmVjb3Zlck9yZFByb0NvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICQoXCIjei1kY2wtb3JkIC56Y2hlY2tib3hcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlQmluZ0lkcyArPSAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcub3JkLWNhaScpLmNoaWxkcmVuKCcub3JkZXItaWQnKS50ZXh0KCkgKyAnLCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhiUmVjb3Zlck9yZFByb0NvdW50ID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLnByby1jb3VudCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaGVCaW5nSWRzLnN1YnN0cmluZygwLCAyKSlcclxuICAgICAgICAgICAgICAgIGlmIChzZWxDb3VudCA9PSAxICYmIGhlQmluZ0lkcy5zdWJzdHJpbmcoMCwgMikgPT0gJ0hCJykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5oZUJpbmdSZWNvdmVyRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnWW91IGNhbiByZWNvdmVyIG9ubHkgb25lIGNvbWJpbmVkIG9yZGVyIHBlciBvcGVyYXRpb24uIFBsZWFzZSBzZWxlY3QgYSBjb21iaW5lZCBvcmRlci4nLCB7dGltZTogNDAwMH0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5zdXJlUmVjb3ZlckhiRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ29yZGVyL29yZGVyL3JlY292ZXJNZXJnZU9yZGVyJywge1xyXG4gICAgICAgICAgICAgICAgICAgICdpZHMnOiBoZUJpbmdJZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3F1YW50aXR5JzogaGJSZWNvdmVyT3JkUHJvQ291bnRcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5oZUJpbmdSZWNvdmVyRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ3JlY292ZXIgc3VjY2VzcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1N1Y0ZyZXNoRnVuKClcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdPcmRlcnMgYXJlIHBvc3NpYmx5IHVucXVhbGlmaWVkIGZvciByZWNvdmVyeS4nLCB7dGltZTogMzAwMH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLnJhZGlvQ2hlY2tGdW4gPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9ICRzY29wZS5oYkFkckxpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaGJBZHJMaXN0W2ldWydmbGFnJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGl0ZW1bJ2ZsYWcnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc09yZElkID0gaXRlbS5vcmRJZDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5oYkFkckxpc3QsICRzY29wZS5hZGRyZXNzT3JkSWQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/mi4bliIborqLljZVcclxuICAgICAgICAgICAgdmFyIHNwbGl0U2VsSWRzID0gJyc7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuc2VsQ291bnROdW0gPSAwO1xyXG4gICAgICAgICAgICAkc2NvcGUuZHVvUGluQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGFuUGluQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAkc2NvcGUuY2FpRmVuUHJvQXJyID0gW107IC8v5Y+v5Lul5ouG5YiG55qE5ZWG5ZOBXHJcbiAgICAgICAgICAgICRzY29wZS55aUNhaUZlbkFyciA9IFtdOyAvL+W3sue7j+aLhuWIhueahOWVhuWTgVxyXG4gICAgICAgICAgICAkc2NvcGUucHJvZHVjdFNwbGl0RnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvb2wgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxDb3VudE51bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZHVvUGluQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhblBpbkNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jYWlGZW5Qcm9BcnIgPSBbXTsgLy/lj6/ku6Xmi4bliIbnmoTllYblk4FcclxuICAgICAgICAgICAgICAgICRzY29wZS55aUNhaUZlbkFyciA9IFtdOyAvL+W3sue7j+aLhuWIhueahOWVhuWTgVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZFNwR3JvdXAgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtT3JkSWQsICRjdXJPYmosIGl0ZW1PcmRTcE51bSwgc3BJdGVtTnVtO1xyXG4gICAgICAgICAgICAgICAgJChcIiN6LWRjbC1vcmQgLnpjaGVja2JveFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbU9yZElkID0gJC50cmltKCQodGhpcykucGFyZW50KCkuc2libGluZ3MoJy5vcmQtY2FpJykuY2hpbGRyZW4oJy5vcmRlci1pZCcpLnRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxDb3VudE51bSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY3VyT2JqID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCcuZC10b2dnbGUtdGFiJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1PcmRTcE51bSA9ICQodGhpcykuc2libGluZ3MoJy5vcmQtc3AtbnVtJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbU9yZFNwTnVtID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmR1b1BpbkNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5aSa5ZOBJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSAkc2NvcGUub3JkZXJzTGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtT3JkSWQgPT0gJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuSUQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5vcmRlcnNMaXN0W2ldLm9yZGVyLk9SREVSU09VUkNFX1RZUEUgPT09ICc3Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdPcmRlcnMgY2Fubm90IGJlIHNwbGl0ZWQuJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBrTGVuID0gJHNjb3BlLm9yZGVyc0xpc3RbaV0ucHJvZHVjdC5sZW5ndGg7IGsgPCBrTGVuOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W2ldLnByb2R1Y3Rba11bJ09SREVSX05VTUJFUiddID0gJHNjb3BlLm9yZGVyc0xpc3RbaV0ub3JkZXIuT1JERVJfTlVNQkVSO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5vcmRlcnNMaXN0W2ldLnByb2R1Y3Rba10uUVVBTlRJVFkgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUub3JkZXJzTGlzdFtpXS5wcm9kdWN0W2tdLlFVQU5USVRZOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhaUZlblByb0FyciA9ICRzY29wZS5jYWlGZW5Qcm9BcnIuY29uY2F0KEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoJHNjb3BlLm9yZGVyc0xpc3RbaV0ucHJvZHVjdFtrXSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuY2FpRmVuUHJvQXJyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5oiR5pyJ5aSa5LiqJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jYWlGZW5Qcm9BcnIgPSAkc2NvcGUuY2FpRmVuUHJvQXJyLmNvbmNhdCgkc2NvcGUub3JkZXJzTGlzdFtpXS5wcm9kdWN0W2tdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5jYWlGZW5Qcm9BcnIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+aIkeacieS4gOS4qicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2FpRmVuUHJvQXJyID0gJHNjb3BlLmNhaUZlblByb0Fyci5maWx0ZXIobyA9PiBvLnByb2R1Y3RfdHlwZSAhPT0gJzMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmNhaUZlblByb0FycilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbU9yZFNwTnVtID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYW5QaW5Db3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WNleWTgScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5rKh5pyJ5ZWG5ZOBJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBzcGxpdFNlbElkc0FyciA9IHNwbGl0U2VsSWRzLnNwbGl0KCcsJykuZmlsdGVyKGkgPT4gaSlcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNwbGl0U2VsSWRzKVxyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLm9yZGVyc0xpc3Quc29tZShpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgaWYoaXRlbS5vcmRlci5PUkRFUlNPVVJDRV9UWVBFID09PSAnNycgJiYgc3BsaXRTZWxJZHNBcnIuaW5jbHVkZXMoaXRlbS5vcmRlci5JZCkpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnMTIzJylcclxuICAgICAgICAgICAgICAgIC8vIH19IClcclxuICAgICAgICAgICAgICAgIC8vIGlmKCRzY29wZS5vcmRlcnNMaXN0LnNvbWUoaXRlbSA9PiBpdGVtLm9yZGVyLk9SREVSU09VUkNFX1RZUEUgPT09ICc3JyAmJiBzcGxpdFNlbElkc0Fyci5pbmNsdWRlcyhpdGVtLm9yZGVyLklkKSkpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgbGF5ZXIubXNnKCdTdXBwbGllci1zaGlwcGVkIGdvb2RzIGNhbm5vdCBiZSBzcGxpdCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWJvb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNlbENvdW50TnVtID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmR1b1BpbkNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNwbGl0VGtGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnT25seSBvcmRlcnMgd2l0aCBtb3JlIHRoYW4gMSBwcm9kdWN0IGNhbiBiZSBzcGxpdC4nLCB7dGltZTogMzAwMH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBzZWxlY3Qgb3JkZXIocykgZmlyc3QhJylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjaGVja2VkQXJyID0gW107IC8v6YCJ5Lit55qE5ZWG5ZOBXHJcbiAgICAgICAgICAgICRzY29wZS5vcmRTcEdyb3VwID0gW107XHJcbiAgICAgICAgICAgIHZhciBncm91cE51bSA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS5zcGxpdEJ0bkZ1biA9IGZ1bmN0aW9uICgpIHsgLy/mmK/lkKblj6/ku6Xmi4bliIZcclxuICAgICAgICAgICAgICAgIGNoZWNrZWRBcnIgPSBbXVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9ICRzY29wZS5jYWlGZW5Qcm9BcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNhaUZlblByb0FycltpXS5jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkQXJyLnB1c2goJHNjb3BlLmNhaUZlblByb0FycltpXSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZEFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVwZWF0RnVuKGNoZWNrZWRBcnIpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5L2g6YCJ5Lit55qE5LiN5piv5ZCM5LiA5Liq6K6i5Y2V5LiL55qE5ZWG5ZOBJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGUgcHJvZHVjdHMgc2VsZWN0ZWQgYXJlIG5vdCBmcm9tIHRoZSBzYW1lIG9yZGVyLicpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/liKTmlq3mmK/lkKbpgInkuK3kuobmiYDmnInor6XorqLljZXkuIvnmoTllYblk4Eg5aaC5p6c6YCJ5Lit5omA5pyJ5LiN6IO95ouG5YiGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpblNwQ3VzT3JkSWQgPSBjaGVja2VkQXJyWzBdLk9SREVSX05VTUJFUjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhaUZlbkFyck5vdEZvdW5kRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaUxlbiA9ICRzY29wZS5jYWlGZW5Qcm9BcnIubGVuZ3RoOyBpIDwgaUxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNhaUZlblByb0FycltpXS5PUkRFUl9OVU1CRVIgPT0gaW5TcEN1c09yZElkICYmICEkc2NvcGUuY2FpRmVuUHJvQXJyW2ldLmNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNhaUZlbkZsYWcgPSB0cnVlOyAvL+aXoOmcgOaPkOekuiDnm7TmjqXnp7vliqjmi4bliIZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxpdENsaWNrRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gJHNjb3BlLmNhaUZlblByb0Fyci5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FpRmVuQXJyTm90Rm91bmRGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYWlGZW5BcnJOb3RGb3VuZEZsYWcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWlGZW5BcnJOb3RGb3VuZEZsYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUueWlDYWlGZW5BcnIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqTGVuID0gJHNjb3BlLnlpQ2FpRmVuQXJyLmxlbmd0aDsgaiA8IGpMZW47IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnlpQ2FpRmVuQXJyW2pdLk9SREVSX05VTUJFUiA9PSBpblNwQ3VzT3JkSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGl0Q2xpY2tGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaiA9PSAkc2NvcGUueWlDYWlGZW5BcnIubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdFYWNoIGdyb3VwIGNhbm5vdCBpbmNsdWRlIGFsbCBwcm9kdWN0cyBmcm9tIHRoZSBzYW1lIG9yZGVyLicsIHt0aW1lOiAzMDAwfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdFYWNoIGdyb3VwIGNhbm5vdCBpbmNsdWRlIGFsbCBwcm9kdWN0cyBmcm9tIHRoZSBzYW1lIG9yZGVyLicsIHt0aW1lOiAzMDAwfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+ivt+mAieaLqeWVhuWTgScpXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2Ugc2VsZWN0IHRoZSBwcm9kdWN0cy4nKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzcGxpdENsaWNrRnVuKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1JZEdvdXAgPSBbXTtcclxuICAgICAgICAgICAgICAgIGdyb3VwTnVtKys7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FpRmVuRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNwSWRzID0gJyc7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGVCaW5nQXJyID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaGVCaW5nV2VpZ2h0ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRBcnIgPSBbXTtcclxuICAgICAgICAgICAgICAgIGhlQmluZ0Fyci5wdXNoKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2hlY2tlZEFyclswXSkpKVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNoZWNrZWRBcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkQXJyW2ldWydncm91cE51bSddID0gZ3JvdXBOdW07XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEFycltpXS5jaGVjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNwSWRzICs9IGNoZWNrZWRBcnJbaV0uSUQgKyAnLCc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9ICRzY29wZS5jYWlGZW5Qcm9BcnIubGVuZ3RoIC0gMTsgayA+PSAwOyBrLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrZWRBcnJbaV0uSUQgPT0gJHNjb3BlLmNhaUZlblByb0FycltrXS5JRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVCaW5nV2VpZ2h0ICs9ICRzY29wZS5jYWlGZW5Qcm9BcnJba10uR1JBTVM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBcnIucHVzaChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KCRzY29wZS5jYWlGZW5Qcm9BcnJba10pKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jYWlGZW5Qcm9BcnIuc3BsaWNlKGssIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGhlQmluZ0FyclswXS53ZWlnaHQgPSBoZUJpbmdXZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBoZUJpbmdBcnJbMF1bJ3l1YW5TdSddID0gdGFyZ2V0QXJyO1xyXG4gICAgICAgICAgICAgICAgc3BJZHMgPSBzcElkcy5zdWJzdHJpbmcoMCwgc3BJZHMubGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAgICAgIHZhciBwcm9JZFN0ciA9IHByb0lkU3RyRnVuKHNwSWRzKVxyXG4gICAgICAgICAgICAgICAgaXRlbUlkR291cC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aWQ6IHByb0lkU3RyLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwTnVtOiBncm91cE51bVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICRzY29wZS55aUNhaUZlbkFyciA9ICRzY29wZS55aUNhaUZlbkFyci5jb25jYXQoaGVCaW5nQXJyKTtcclxuICAgICAgICAgICAgICAgIHZhciBvYmogPSB7fTtcclxuICAgICAgICAgICAgICAgIG9ialtjaGVja2VkQXJyWzBdLkNKT3JkZXJJZF0gPSBpdGVtSWRHb3VwO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5vcmRTcEdyb3VwLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMCwga0xlbiA9ICRzY29wZS5vcmRTcEdyb3VwLmxlbmd0aDsgayA8IGtMZW47IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZFNwR3JvdXBba11bY2hlY2tlZEFyclswXS5DSk9yZGVySWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkU3BHcm91cFtrXVtjaGVja2VkQXJyWzBdLkNKT3JkZXJJZF0ucHVzaChpdGVtSWRHb3VwWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PSBrTGVuIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZFNwR3JvdXAucHVzaChvYmopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRTcEdyb3VwLnB1c2gob2JqKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZFNwR3JvdXApXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5yZWNvdmVyRnVuID0gZnVuY3Rpb24gKHByb051bSwgc3BJZCwgb3JkSWQsIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pdGVtR3JvdXBOdW0gPSBwcm9OdW07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbVNwSWQgPSBzcElkO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZElkTnVtID0gb3JkSWQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudGFyZ2V0QXJyID0gaXRlbS55dWFuU3U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjb3ZlckZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5zdXJlSXNSZWNvdmVyRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZyA9ICRzY29wZS5vcmRTcEdyb3VwLmxlbmd0aCAtIDE7IGcgPj0gMDsgZy0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5vcmRTcEdyb3VwW2ddWyRzY29wZS5vcmRJZE51bV0gJiYgJHNjb3BlLm9yZFNwR3JvdXBbZ11bJHNjb3BlLm9yZElkTnVtXVswXS5ncm91cE51bSA9PSAkc2NvcGUuaXRlbUdyb3VwTnVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRTcEdyb3VwLnNwbGljZShnLCAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAkc2NvcGUueWlDYWlGZW5BcnIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnlpQ2FpRmVuQXJyW2ldICYmICRzY29wZS55aUNhaUZlbkFycltpXS5ncm91cE51bSA9PSAkc2NvcGUuaXRlbUdyb3VwTnVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqTGVuID0gJHNjb3BlLnlpQ2FpRmVuQXJyW2ldLnl1YW5TdS5sZW5ndGg7IGogPCBqTGVuOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jYWlGZW5Qcm9BcnIucHVzaChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KCRzY29wZS55aUNhaUZlbkFycltpXS55dWFuU3Vbal0pKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUueWlDYWlGZW5BcnIuc3BsaWNlKGksIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlY292ZXJGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlU3BsaXRUa0Z1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pc0Nsb3NlU3BsaXRGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuc3VyZUNsb3NlU3BsaXRUa0Z1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zcGxpdFRrRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzQ2xvc2VTcGxpdEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS55aUNhaUZlbkFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhaUZlblByb0FyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZFNwR3JvdXAgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuc3BsaXRDb21GdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvL+ehruWumuaLhuWIhlxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS55aUNhaUZlbkFyci5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2Ugc2VsZWN0IGF0IGxlYXN0IG9uZSBwcm9kdWN0LicpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29uZmlybUVuZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBpbml0Q2xpY2tGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnNwbGl0Q29uZmlybUVuZEZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfop6blj5Hlh6DmrKEnKVxyXG4gICAgICAgICAgICAgICAgaWYgKCFpbml0Q2xpY2tGbGFnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbml0Q2xpY2tGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY29uZmlybUVuZEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zcGxpdFRrRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgICAgICAgICAgdmFyIGNqT3JkSWQsIHNwSWQ7XHJcbiAgICAgICAgICAgICAgICB2YXIganNvbk9iaiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5jYWlGZW5Qcm9BcnIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSAkc2NvcGUuY2FpRmVuUHJvQXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNqT3JkSWQgPSAkc2NvcGUuY2FpRmVuUHJvQXJyW2ldLkNKT3JkZXJJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BJZCA9ICRzY29wZS5jYWlGZW5Qcm9BcnJbaV0uSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uT2JqW2NqT3JkSWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uT2JqW2NqT3JkSWRdICs9ICcsJyArIHNwSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uT2JqW2NqT3JkSWRdID0gc3BJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uT2JqKVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9JZFN0cjtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4ganNvbk9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9JZFN0ciA9IHByb0lkU3RyRnVuKGpzb25PYmpba2V5XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDAsIHhMZW4gPSAkc2NvcGUub3JkU3BHcm91cC5sZW5ndGg7IHggPCB4TGVuOyB4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkU3BHcm91cFt4XVtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZFNwR3JvdXBbeF1ba2V5XS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Byb2R1Y3RpZCc6IHByb0lkU3RyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0geExlbiAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2VpQ2FpQXJyID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZEl0ZW1PYmogPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlDYWlBcnIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwcm9kdWN0aWQnOiBwcm9JZFN0clxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkSXRlbU9ialtrZXldID0gd2VpQ2FpQXJyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRTcEdyb3VwLnB1c2gob3JkSXRlbU9iailcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkU3BHcm91cClcclxuICAgICAgICAgICAgICAgICRzY29wZS5jYWlGZW5Qcm9BcnIgPSBbXTsgLy/mi7zlrozlt6bovrnmuIXnqbog6Ziy5q2i5YaN5qyh5ou85o6lXHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignb3JkZXIvb3JkZXIvc3BsaXRPcmRlckJ5UHJvZHVjdCcsIEpTT04uc3RyaW5naWZ5KCRzY29wZS5vcmRTcEdyb3VwKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRDbGlja0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS55aUNhaUZlbkFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkU3BHcm91cCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BsaXRSZXNBcnIgPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzU3VjQ291bnQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzRXJyb3JDb3VudCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNwbGl0UmVzQXJyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXRSZXNBcnIgJiYgSlNPTi5zdHJpbmdpZnkoc3BsaXRSZXNBcnIpICE9ICdbXScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzcGxpdFJlc0Fyci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGxpdFJlc0FycltpXS5yZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzU3VjQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNFcnJvckNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IHNwbGl0UmVzQXJyW2ldLm1lc3NhZ2VbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1N1Y0NvdW50ID4gMCAmJiByZXNFcnJvckNvdW50IDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnc3BsaXQgc3VjY2VzcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzU3VjRnJlc2hGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzU3VjQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc1N1Y0ZyZXNoRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKGVycm9yTWVzc2FnZSwge3RpbWU6IDMwMDB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IHNwbGl0UmVzQXJyWzBdLm1lc3NhZ2VbMF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZyhlcnJvck1lc3NhZ2UsIHt0aW1lOiAzMDAwfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coYE9vcHMsIHNwbGl0IGZhaWxlZC4gc05vdGVzOiAxLiBUaGUgSXRlbSBRdWFudGl0eSBpcyBzdXBwb3NlZCB0byBiZSBncmVhdGVyIHRoYW4gMTsgMi4gVW5rbm93biByZWFzb25zLiBQbGVhc2UgdHJ5IGl0IGFnYWluYClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKGBPb3BzLCBzcGxpdCBmYWlsZWQuIHNOb3RlczogMS4gVGhlIEl0ZW0gUXVhbnRpdHkgaXMgc3VwcG9zZWQgdG8gYmUgZ3JlYXRlciB0aGFuIDE7IDIuIFVua25vd24gcmVhc29ucy4gUGxlYXNlIHRyeSBpdCBhZ2FpbmApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICBpbml0Q2xpY2tGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc1N1Y0ZyZXNoRnVuKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIHRqRnVuKG9yRGF0YSlcclxuICAgICAgICAgICAgICAgIG9yRGF0YS5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3JEYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9xdWVyeU9yZGVycycsIEpTT04uc3RyaW5naWZ5KG9yRGF0YSksIGRjbHNGdW4sIGRjbGVGdW4pXHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsc0Z1bihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0MSA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSAkc2NvcGUubGlzdC5vcmRlcnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wY291bnROID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7IC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucmVtb3ZlTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RTakZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3Jkc3RhdHVzTnVtID0gJHNjb3BlLmxpc3QuYWxsT3JkZXJDb3VudDI7IC8v5ZCE56eN54q25oCB6K6i5Y2V55qE5pWw6YePXHJcbiAgICAgICAgICAgICAgICAgICAgbG9naXNSZW1hcmsoJHNjb3BlLmxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgIG51bUZ1bigpOyAvL+iwg+eUqOe7meiuouWNlei1i+WAvOeahOWHveaVsFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBwcm9JZFN0ckZ1bihzcElkcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNzUHJvQXJyID0gc3BJZHMuc3BsaXQoJywnKVxyXG4gICAgICAgICAgICAgICAgdmFyIGNzSGFzaE9iaiA9IHt9XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgakxlbiA9IGNzUHJvQXJyLmxlbmd0aDsgaiA8IGpMZW47IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjc0hhc2hPYmpbY3NQcm9BcnJbal1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzSGFzaE9ialtjc1Byb0FycltqXV0gPSBjc0hhc2hPYmpbY3NQcm9BcnJbal1dIC0gMCArIDFcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc0hhc2hPYmpbY3NQcm9BcnJbal1dID0gMVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBwcm9JZFN0ciA9IEpTT04uc3RyaW5naWZ5KGNzSGFzaE9iaikucmVwbGFjZSgneycsICcnKS5yZXBsYWNlKCd9JywgJycpLnJlcGxhY2UoL1xcXCIvZywgJycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb0lkU3RyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBpc1JlcGVhdEZ1bihhcnIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvdXRDdXNJZDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRDdXNJZCA9IGFycltpXS5PUkRFUl9OVU1CRVI7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpMZW4gPSBhcnIubGVuZ3RoOyBqIDwgakxlbjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvdXRDdXNJZCAhPSBhcnJbal0uT1JERVJfTlVNQkVSKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vcmVjb3ZlclxyXG4gICAgICAgICAgICB2YXIgcmVjb3ZlcklkcztcclxuICAgICAgICAgICAgJHNjb3BlLnJlY292ZXJPcmRCdG4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZWNvdmVySWRzID0gJyc7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgJChcIiN6LWRjbC1vcmQgLnpjaGVja2JveFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3ZlcklkcyArPSAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcub3JkLWNhaScpLmNoaWxkcmVuKCcub3JkZXItaWQnKS50ZXh0KCkgKyAnLCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbENvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGlmIChzZWxDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNSZWNvdmVyRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCBvcmRlcihzKSBmaXJzdCEnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuc3VyZVJlY292ZXJGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBkc3AubG9hZCgpXHJcbiAgICAgICAgICAgICAgICB2YXIgdXBKc29uID0ge307XHJcbiAgICAgICAgICAgICAgICB1cEpzb24uaWRzID0gcmVjb3ZlcklkcztcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdvcmRlci9vcmRlci9yZWNvdmVyU3BsaXRPcmRlcicsIEpTT04uc3RyaW5naWZ5KHVwSnNvbiksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzUmVjb3ZlckZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygncmVjb3ZlciBzdWNjZXNzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yRGF0YS5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3JEYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9ICRzY29wZS5saXN0Lm9yZGVyc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wY291bnROID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7IC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZHN0YXR1c051bSA9ICRzY29wZS5saXN0LmFsbE9yZGVyQ291bnQyOyAvL+WQhOenjeeKtuaAgeiuouWNleeahOaVsOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naXNSZW1hcmsoJHNjb3BlLmxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0RnVuKCk7IC8v5YiG6aG15Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1GdW4oKTsgLy/osIPnlKjnu5norqLljZXotYvlgLznmoTlh73mlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsZUZ1bigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ09yZGVycyBhcmUgcG9zc2libHkgdW5xdWFsaWZpZWQgZm9yIHJlY292ZXJ5LicsIHt0aW1lOiAzMDAwfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZCgpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v6YeN6YeP5ouG5YiGXHJcbiAgICAgICAgICAgICRzY29wZS5pc1NwbGl0RnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbENvdW50TnVtID0gMDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kdW9QaW5Db3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGFuUGluQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhaUZlblByb0FyciA9IFtdOyAvL+WPr+S7peaLhuWIhueahOWVhuWTgVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnlpQ2FpRmVuQXJyID0gW107IC8v5bey57uP5ouG5YiG55qE5ZWG5ZOBXHJcbiAgICAgICAgICAgICAgICBzcGxpdFNlbElkcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1PcmRJZDtcclxuICAgICAgICAgICAgICAgIHZhciAkY3VyT2JqLCBpdGVtT3JkU3BOdW0sIHNwSXRlbU51bTtcclxuICAgICAgICAgICAgICAgICQoXCIjei1kY2wtb3JkIC56Y2hlY2tib3hcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1PcmRJZCA9ICQudHJpbSgkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcub3JkLWNhaScpLmNoaWxkcmVuKCcub3JkZXItaWQnKS50ZXh0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsQ291bnROdW0rKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGN1ck9iaiA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuZmluZCgnLmQtdG9nZ2xlLXRhYicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtT3JkU3BOdW0gPSAkKHRoaXMpLnNpYmxpbmdzKCcub3JkLXNwLW51bScpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1PcmRTcE51bSA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kdW9QaW5Db3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsaXRTZWxJZHMgKz0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLm9yZC1jYWknKS5jaGlsZHJlbignLm9yZGVyLWlkJykudGV4dCgpICsgJywnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtT3JkU3BOdW0gPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhblBpbkNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5rKh5pyJ5ZWG5ZOBJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcGxpdFNlbElkc0FyciA9IHNwbGl0U2VsSWRzLnNwbGl0KCcsJykuZmlsdGVyKGkgPT4gaSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNwbGl0U2VsSWRzQXJyKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc0xpc3Quc29tZShpdGVtID0+IGl0ZW0ub3JkZXIuT1JERVJTT1VSQ0VfVFlQRSA9PT0gJzcnICYmIHNwbGl0U2VsSWRzQXJyLmluY2x1ZGVzKGl0ZW0ub3JkZXIuSUQpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnT3JkZXJzIGNhbm5vdCBiZSBzcGxpdC4nKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc2VsQ291bnROdW0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kdW9QaW5Db3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNwbGl0RmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdPbmx5IG9yZGVycyB3aXRoIG1vcmUgdGhhbiAxIHByb2R1Y3QgY2FuIGJlIHNwbGl0LicsIHt0aW1lOiAzMDAwfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCBvcmRlcihzKSBmaXJzdCEnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5zcGxpdE9yZEZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLnNwbGl0V2VpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2UgZW50ZXIgd2VpZ2h0IScpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zcGxpdFdlaWdodCA+IDIwMDAgfHwgJHNjb3BlLnNwbGl0V2VpZ2h0IDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIGVudGVyIGEgY29ycmVjdCB3ZWlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3BsaXRGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3BsRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgc3BsRGF0YS5pZHMgPSBzcGxpdFNlbElkcztcclxuICAgICAgICAgICAgICAgIHNwbERhdGEud2VpZ2h0ID0gTWF0aC5mbG9vcigkc2NvcGUuc3BsaXRXZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ29yZGVyL29yZGVyL3NwbGl0T3JkZXJCeVdlaWdodCcsIEpTT04uc3RyaW5naWZ5KHNwbERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BsaXRSZXNBcnIgPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzU3VjQ291bnQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzRXJyb3JDb3VudCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNwbGl0UmVzQXJyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXRSZXNBcnIgJiYgSlNPTi5zdHJpbmdpZnkoc3BsaXRSZXNBcnIpICE9ICdbXScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzcGxpdFJlc0Fyci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGxpdFJlc0FycltpXS5yZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzU3VjQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNFcnJvckNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IHNwbGl0UmVzQXJyW2ldLm1lc3NhZ2VbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNTdWNDb3VudCA+IDAgJiYgcmVzRXJyb3JDb3VudCA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ3NwbGl0IHN1Y2Nlc3MnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc1N1Y0ZyZXNoRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1N1Y0NvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNTdWNGcmVzaEZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZyhlcnJvck1lc3NhZ2UsIHt0aW1lOiAzMDAwfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBzcGxpdFJlc0FyclswXS5tZXNzYWdlWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKGVycm9yTWVzc2FnZSwge3RpbWU6IDMwMDB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZyhgT29wcywgc3BsaXQgZmFpbGVkLlxyXG4gICAgICAgICAgICAgIE5vdGVzOiAxLiBUaGUgSXRlbSBRdWFudGl0eSBpcyBzdXBwb3NlZCB0byBiZSBncmVhdGVyIHRoYW4gMTsgMi4gVW5rbm93biByZWFzb25zLiBQbGVhc2UgdHJ5IGl0IGFnYWluYClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKGBPb3BzLCBzcGxpdCBmYWlsZWQuXHJcbiAgICAgICAgICAgIE5vdGVzOiAxLiBUaGUgSXRlbSBRdWFudGl0eSBpcyBzdXBwb3NlZCB0byBiZSBncmVhdGVyIHRoYW4gMTsgMi4gVW5rbm93biByZWFzb25zLiBQbGVhc2UgdHJ5IGl0IGFnYWluYClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUucHJvcGVyTWVzRnVuID0gZnVuY3Rpb24gKHBybywgc2t1KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm8pXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhza3UpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV3Q3VzRGVzaWduQXJyID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHBybykgPT09IFwiW29iamVjdCBBcnJheV1cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9wZXJNZXNUeXBlID0gJ2FycmF5VHlwZSdcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvcGVydGllc0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocHJvKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvcGVyTWVzVHlwZSA9ICdvYmplY3RUeXBlJ1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9wZXJ0aWVzRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByby50eXBlID09IDMgfHwgcHJvLnR5cGUgPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvLmN1c3RvbVBvZERlc2lnbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHByby5jdXN0b21Qb2REZXNpZ24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm8uY3VzdG9tUG9kRGVzaWduW2ldWydpbWcnXSA9IHByby5jdXN0b21Qb2REZXNpZ25baV0ubGlua3NbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ld0N1c0Rlc2lnbkFyci5wdXNoKHByby5jdXN0b21Qb2REZXNpZ25baV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvLmN1c3RvbURlc2lnbiB8fCBwcm8uY3VzdG9tZURlc2lnbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VzdG9tRGVzaWduID0gcHJvLmN1c3RvbURlc2lnbiB8fCBwcm8uY3VzdG9tZURlc2lnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBjdXN0b21EZXNpZ24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21EZXNpZ25baV1bJ2ltZyddID0gY3VzdG9tRGVzaWduW2ldLmxpbmtzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5uZXdDdXNEZXNpZ25BcnIucHVzaChjdXN0b21EZXNpZ25baV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm5ld0N1c0Rlc2lnbkFycilcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb3Blck1lc1R5cGUgPSAnb3RoZXJUeXBlJ1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnTm8gUE9EIGRldGFpbHMgYXZhaWxhYmxlIGF0IHByZXNlbnQuJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9wZXJ0aWVzTWVzID0gcHJvO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb3BlcnRpZXNNZXMuY3VzdG9tTWVzc2dhZSA9IHByby5jdXN0b21NZXNzZ2FlIHx8cHJvLmN1c3RvbU1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucHJvcGVydGllc01lcylcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLnR1Q2VuZ0Z1biA9IGZ1bmN0aW9uIChhcnIpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS50dUNlbmdBcnIgPSBhcnI7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudHVDZW5nRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNvcHlEZWxGdW4gPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAvL+WmguaenOi/memHjOaNouS4uiBpbnB1dCDliJnkuI3mlK/mjIHmjaLooYxcclxuICAgICAgICAgICAgICAgIHZhbCA9IEpTT04uc3RyaW5naWZ5KHZhbClcclxuICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcclxuICAgICAgICAgICAgICAgIHRlbXAudmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWwsIHRlbXAudmFsdWUpXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRlbXApO1xyXG4gICAgICAgICAgICAgICAgdGVtcC5zZWxlY3QoKTsgLy8g6YCJ5oup5a+56LGhXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZChcIkNvcHlcIik7IC8vIOaJp+ihjOa1j+iniOWZqOWkjeWItuWRveS7pFxyXG4gICAgICAgICAgICAgICAgdGVtcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdDb3BpZWQgU3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzT2JqQXJyKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZhbHVl5piv5pWw57uEJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZhbHVl5piv5a+56LGhJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2YWx1ZeS4jeaYr+aVsOe7hOS5n+S4jeaYr+WvueixoScpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5leHBvcnRPcmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kY29yZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmdvQWN0ZXhwb3J0T3JkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hlY2tJZHMgPSAnJztcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSAkc2NvcGUub3JkZXJzTGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUub3JkZXJzTGlzdFtpXS5jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0lkcyArPSAkc2NvcGUub3JkZXJzTGlzdFtpXS5vcmRlci5JRCArICcsJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICBvckRhdGEuZGF0YS5leHBvcnRPcmRlcklkcyA9IGNoZWNrSWRzO1xyXG4gICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9jbGllbnRfZXJwL2V4cG9ydE9yZGVycycsIEpTT04uc3RyaW5naWZ5KG9yRGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kY29yZEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRjb3JkQ2FsbGJhY2tGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4Y2VsSHJlZiA9IEpTT04ucGFyc2UoZGF0YS5kYXRhLnJlc3VsdCkuaHJlZjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ0V4cG9ydCBvcmRlciBlcnJvci4nKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5ialNrdUZ1biA9IGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgICAgICAgICAgJChldi50YXJnZXQpLmhpZGUoKTsgLy/mioroh6rlt7HpmpDol4/mjolcclxuICAgICAgICAgICAgICAgICQoZXYudGFyZ2V0KS5zaWJsaW5ncygnLmJqLXNwc2t1JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICQoZXYudGFyZ2V0KS5zaWJsaW5ncygnLmJqc2FtZS1idG4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmJqU2t1UXhGdW4gPSBmdW5jdGlvbiAoZXYsIHNrdSkge1xyXG4gICAgICAgICAgICAgICAgLy/pmpDol4/kv53lrZgg5Y+W5raI55qE5oyJ6ZKuXHJcbiAgICAgICAgICAgICAgICAkKGV2LnRhcmdldCkucGFyZW50KCkuZmluZCgnLmJqc2FtZS1idG4nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAvL+aYvuekuue8lui+keaMiemSrlxyXG4gICAgICAgICAgICAgICAgJChldi50YXJnZXQpLnNpYmxpbmdzKCcueGctc3Bza3VidG4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKGV2LnRhcmdldCkuc2libGluZ3MoJy5iai1zcHNrdScpLnZhbChza3UpXHJcbiAgICAgICAgICAgICAgICAvL+e7mei/meadoeWVhuWTgeiuvue9ruemgeatoui+k+WFpVxyXG4gICAgICAgICAgICAgICAgJChldi50YXJnZXQpLnNpYmxpbmdzKCcuYmotc3Bza3UnKS5hdHRyKCdkaXNhYmxlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVNLVUZhaWwoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNrdSA9IGl0ZW0uc2t1LnNwbGl0KCctJylbMF07XHJcbiAgICAgICAgICAgICAgICBsYXllci5jb25maXJtKCc8cCBzdHlsZT1cInBhZGRpbmc6MjBweCAwXCI+U0tVIG1vZGlmaWVkLiBQbGVhc2UgY29ubmVjdCB0aGUgdmFyaWFudCBmaXJzdC48L3A+Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZUJ0bjogMCxcclxuICAgICAgICAgICAgICAgICAgICBidG46IFsnQ29ubmVjdCcsICdDYW5jZWwnXSAvL+aMiemSrlxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2UoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBgIy9wcm9kdWN0cy1jb25uZWN0aW9uL3BlbmRpbmctY29ubmVjdGlvbi8vLyR7YmFzZTY0LmVuY29kZShza3UpfWA7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmJqU2t1U3VyZUZ1biA9IGZ1bmN0aW9uIChldiwgaXRlbSwgcGluZGV4LCBpbmRleCwgcEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBialNrdUlucFZhbCA9ICQudHJpbSgkKGV2LnRhcmdldCkuc2libGluZ3MoJy5iai1zcHNrdScpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIGlmIChialNrdUlucFZhbC5pbmNsdWRlcygnQlpTUCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdZb3UgY2Fubm90IG1vZGlmeSBpdCB0byBhIHBhY2thZ2luZyBwcm9kdWN0IFNLVS4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICB2YXIgdXBEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLklELFxyXG4gICAgICAgICAgICAgICAgICAgIHNrdTogYmpTa3VJbnBWYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgU1RPUkVfTkFNRTogcEl0ZW0uU1RPUkVfTkFNRSxcclxuICAgICAgICAgICAgICAgICAgICBpc0dyb3VwU2t1OiBpdGVtLmlzR3JvdXBQcm9kdWN0ID09IDEgPyAnMScgOiAnMCdcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL2NqVXBkYXRlU2t1JywgSlNPTi5zdHJpbmdpZnkodXBEYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmRhdGEuY29kZSYmZGF0YS5kYXRhLmNvZGUgIT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKGRhdGEuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnJlc3VsdCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnTW9kaWZpZWQgU3VjY2Vzc2Z1bGx5JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3RbcGluZGV4XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbcGluZGV4XS5wcm9kdWN0W2luZGV4XS5TS1UgPSBialNrdUlucFZhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbcGluZGV4XS5wcm9kdWN0W2luZGV4XS5QUklDRSA9IGRhdGEuZGF0YS5wcmljZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9uZU9yZENqQW1vdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbcGluZGV4XS5wcm9kdWN0LmZvckVhY2goKGl0ZW0sIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLlNLVS5pbmRleE9mKCdCWlNQJykgPT0gLTEpIG9uZU9yZENqQW1vdW50ICs9IGl0ZW0uUFJJQ0UgKiBpdGVtLlFVQU5USVRZO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFtwaW5kZXhdLm9yZGVyLk9SREVSX0FNT1VOVCA9IG9uZU9yZENqQW1vdW50LnRvRml4ZWQoMikgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+aYvuekuue8lui+keaMiemSrlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGV2LnRhcmdldCkuc2libGluZ3MoJy54Zy1zcHNrdWJ0bicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/pmpDol4/kv53lrZgg5Y+W5raI55qE5oyJ6ZKuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZXYudGFyZ2V0KS5wYXJlbnQoKS5maW5kKCcuYmpzYW1lLWJ0bicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/nu5nov5nmnaHllYblk4Horr7nva7npoHmraLovpPlhaVcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChldi50YXJnZXQpLnNpYmxpbmdzKCcuYmotc3Bza3UnKS5hdHRyKCdkaXNhYmxlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEudHlwZSA9PSAnaW1hZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdFtwaW5kZXhdLnByb2R1Y3RbaW5kZXhdLmltYWdlID0gZGF0YS5kYXRhLmltZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W3BpbmRleF0ucHJvZHVjdFtpbmRleF0uY2pJbWFnZSA9IGRhdGEuZGF0YS5pbWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtTW9kU2t1ID0gJHNjb3BlLm9yZGVyc0xpc3RbcGluZGV4XS5wcm9kdWN0W2luZGV4XS5TS1U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtU3BNb2RTa3UgPSBpdGVtTW9kU2t1LnNwbGl0KCctJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY29kZSA9PSAnNTAxJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZVNLVUZhaWwoe3NrdTogYmpTa3VJbnBWYWx9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVNwTW9kU2t1WzBdID09IGJqU2t1SW5wVmFsLnNwbGl0KCctJylbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnTW9kaWZ5IEZhaWxlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1NLVSBub3QgZm91bmQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIGRjbG9yZGVyc2lkID0gJyc7IC8v5b6F5aSE55CG6K6i5Y2V5q2j5bi46K6i5Y2V55qEaWRcclxuICAgICAgICAgICAgdmFyIHNwbGl0b3JkY3MgPSAnJzsgLy/lrZjlgqjmi4bliIblh7rmnaXnmoTlj4LmlbBcclxuICAgICAgICAgICAgdmFyIHNwbGl0Tm9ybWFsSWQgPSBcIlwiOyAvL+WtmOWCqOiiq+aLhuWIhuiuouWNleeahGlkXHJcbiAgICAgICAgICAgIHZhciBzcGxpdGNqaWQgPSAnJzsgLy/mi4bliIblh7rmnaXorqLljZXnmoTllYblk4FpZFxyXG4gICAgICAgICAgICB2YXIgc3BsaXRvd2xmcyA9ICcnOyAvL+aLhuWIhuiuouWNleeahOeJqea1geaWueW8j1xyXG4gICAgICAgICAgICB2YXIgZGNsb3Jkd2xzdHUgPSAnJzsgLy/orqLljZXnmoTnianmtYHmlrnlvI9cclxuICAgICAgICAgICAgdmFyIHJlbWFya0ZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIHJlbWFya0NvbiA9ICcnOyAvL+W+heWkhOeQhuiuouWNleiiq+aLhuWIhui/h+eahOiuouWNlVxyXG4gICAgICAgICAgICB2YXIgb3JkUmVtYXJrID0gJyc7IC8v5a2Y5YKo6KKr5ouG5YiG6K6i5Y2V55qE5bGe5oCnXHJcbiAgICAgICAgICAgIHZhciBkY2xTZWNOdW0gPSAwOyAvL+WtmOWCqOW+heWkhOeQhumAieS4reeahOiuouWNleaVsOmHj1xyXG4gICAgICAgICAgICAvL+e7meW+heWkhOeQhuiuouWNlea3u+WKoOmAieS4remdnumAieS4reeKtuaAgVxyXG5cclxuICAgICAgICAgICAgJCgnI3otZGNsLW9yZCcpLm9uKCdjbGljaycsICcuemNoZWNrYm94JywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KDEpXHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRjbFNlY051bSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZFJlbWFyayA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuYXR0cihcInJlbWFya1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXF1YWxOdW0gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmF0dHIoXCJlcXVhbFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXF1YWxOdW0gIT09IHVuZGVmaW5lZCkgeyAvL+iiq+aLhuWIhui/h1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjei1kY2wtb3JkIC5vcmRlci1kZXRhaWwnKS5lYWNoKGZ1bmN0aW9uICgpIHsgLy/lvqrnjq/miYDmnInnmoTorqLljZVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ2VxdWFsJykgPT0gZXF1YWxOdW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcub3JkZXItdGltZScpLmNoaWxkcmVuKCcuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRjbFNlY051bSA9PSAkKCcjei1kY2wtb3JkIC56Y2hlY2tib3gnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlcXVhbE51bTEgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmF0dHIoXCJlcXVhbFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXF1YWxOdW0xICE9PSB1bmRlZmluZWQpIHsgLy/ooqvmi4bliIbov4dcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAub3JkZXItZGV0YWlsJykuZWFjaChmdW5jdGlvbiAoKSB7IC8v5b6q546v5omA5pyJ55qE6K6i5Y2VXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdlcXVhbCcpID09IGVxdWFsTnVtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5vcmRlci10aW1lJykuY2hpbGRyZW4oJy56Y2hlY2tib3gnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkY2xTZWNOdW0tLTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGNsU2VjTnVtICE9ICQoJyN6LWRjbC1vcmQgLnpjaGVja2JveCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjei1kY2wtb3JkIC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy/nu5nlvoXlpITnkIborqLljZXmt7vliqDlhajpgInkuovku7ZcclxuICAgICAgICAgICAgJCgnI3otZGNsLW9yZCcpLm9uKCdjbGljaycsICcuemNoZWNrZWQtYWxsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpc3ROdW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLnpjaGVja2JveCcpLmVhY2goZnVuY3Rpb24gKCkgeyAvL+W+queOr+aJgOacieeahOiuouWNlVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcXVlc3Rpb25PcmRWYWwgPSAkKHRoaXMpLnNpYmxpbmdzKCcuaXNkZWwtaW5zdG9yZScpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocXVlc3Rpb25PcmRWYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcXVlc3Rpb25PcmRWYWwgfHwgcXVlc3Rpb25PcmRWYWwgPT0gJ3Byb2Nlc3NpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0TnVtKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGRjbFNlY051bSA9IGxpc3ROdW07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAuemNoZWNrYm94JykuZWFjaChmdW5jdGlvbiAoKSB7IC8v5b6q546v5omA5pyJ55qE6K6i5Y2VXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBxdWVzdGlvbk9yZFZhbCA9ICQodGhpcykuc2libGluZ3MoJy5pc2RlbC1pbnN0b3JlJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXF1ZXN0aW9uT3JkVmFsIHx8IHF1ZXN0aW9uT3JkVmFsID09ICdwcm9jZXNzaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBkY2xTZWNOdW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyDnlJ/miJDkuIDkuKrpmo/mnLrlh73mlbDnu5nmi4bliIbnmoTorqLljZXotYvlgLxcclxuICAgICAgICAgICAgJHNjb3BlLm51bUZ1bjEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ciArPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zTG9naXN0KGFycil7XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bihcImFwcC9vcmRlci91cGRhdGVPcmRlckxvZ2lzaWNzQmF0Y2hcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyTnVtczogYXJyLmpvaW4oJywnKSxcclxuICAgICAgICAgICAgICAgICAgICBsb2dpc2ljOiAnVVNQUysnXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VidWxrV2FyZUZsYWcoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuemNoZWNrZWRfYWxsID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlc2hMaXN0KCkgLy/liLfmlrDliJfooahcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiU3VjY2Vzc2Z1bGx5IGNoYW5nZWQgc2hpcHBpbmcgYXJlYe+8gVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZyhkYXRhLmRhdGEubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS51c1JlZnVzZSA9ICgpPT57XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNJbnZlbnRvcnlGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBkaXNjb3VudGVUcmFuc2ZlckZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNoZWNrU3RvY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuc3VyZUZyb21VUyA9ICgpPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFyciA9ICRzY29wZS51c0ludmVudG9yeUxpc3QubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdJdGVtID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcklkOiBpdGVtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlckFyZWFJZDogJzInLy/lkIzmhI/pu5jorqTovazliLDnvo7lm73ku5NcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0l0ZW07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgZGlzY291bnRlVHJhbnNmZXJGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS51c0ludmVudG9yeUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQXJlYUZ1bihhcnIpLnRoZW4oZGF0YT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc0xvZ2lzdCgkc2NvcGUudXNJbnZlbnRvcnlMaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrT3JkZXJEaXNjb3VudCgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhcnIgPSBbXTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0LmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChpdGVtLm9yZGVyLklEKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZHMgPSBhcnIuam9pbignLCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdvcmRlci9vcmRlci9jaGVja09yZGVyTG9naXN0aWNzRGlzY291bnQnLCB7aWRzfSwgZnVuY3Rpb24gKHtkYXRhfSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1c0NvZGUgPT0gJzIwMCcgJiYgcmVzdWx0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51c0ludmVudG9yeUZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzSW52ZW50b3J5TGlzdCA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrU3RvY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZENhcnRGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/miorlvoXlpITnkIborqLljZXmj5DkuqTliLDlvoXmj5DkuqTnmoTmjInpkq5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tTdG9jaygpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFyciA9IFtdXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmKGl0ZW0ub3JkZXIuYXJlYUlkICE9PSAnMScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goaXRlbS5vcmRlci5JRClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaWRzID0gYXJyLmpvaW4oXCIsXCIpXHJcbiAgICAgICAgICAgICAgICBpZiAoaWRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ29yZGVyL29yZGVyL2NoZWNrSW52ZW50b3J5Jywge2lkc30sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXNEYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzRGF0YS5zdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vSW52ZW50b3J5QXJyID0gcmVzRGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm5vSW52ZW50b3J5QXJyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm90aWZpID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm5vSW52ZW50b3J5QXJyLmxlbmd0aCA8PSA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNUZXh0ID0gJHNjb3BlLm5vSW52ZW50b3J5QXJyLmpvaW4oXCIsIFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNUZXh0ID0gJHNjb3BlLm5vSW52ZW50b3J5QXJyLnNsaWNlKDAsIDQpLmpvaW4oXCIsIFwiKSArIFwiLi4uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRDYXJ0RmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JTaG93RmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gSlNPTi5wYXJzZShkYXRhLmRhdGEucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2lzdGljc1JlYXNvbkxpc3QgPSB0ZW1wLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZE51bTogaXRlbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5kYXRhLm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkQ2FydEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIganNvbk9yZCA9IHt9OyAvL+WtmOWCqOaPkOS6pOiuouWNleWQjiDpnIDopoHlvoDlkI7lj7Dlj5HpgIHnmoTlj4LmlbBcclxuICAgICAgICAgICAganNvbk9yZC5kYXRhID0ge307XHJcbiAgICAgICAgICAgICRzY29wZS5ub0ludmVudG9yeUFyciA9IFtdO1xyXG4gICAgICAgICAgICAkc2NvcGUuYWRkVG9DYXJ0RnVuID0gYWRkVG9DYXJ0RnVuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFRvQ2FydEZ1bigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3ROdW0gPSAwOyAvL+WtmOWCqOiiq+mAieS4reeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgdmFyIGRobE5vUGhvbmVOdW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlbE9yZENvdW50ID0gMDsgLy/lpJrlsJHmnaHooqtzaG9waWZ55Yig6Zmk55qE6K6i5Y2VXHJcbiAgICAgICAgICAgICAgICB2YXIgJHRhcmdldERvbTsgLy/lvZPliY3orqLljZXooYxcclxuICAgICAgICAgICAgICAgIHZhciB0aGlzT3JkV2xmczsgLy/ojrflj5blsIbopoHmj5DkuqTnmoTnianmtYHmlrnlvI9cclxuICAgICAgICAgICAgICAgIHZhciB0aGlzT3JkUGhvbmVOdW07IC8v5b2T5YmN6KGM55qE5omL5py65Y+3XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0NpdHk7IC8v6I635Y+W6K6i5Y2V5Z+O5biC5Zyw5Z2AXHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc1Byb3ZpbmNlOyAvL+iOt+WPluiuouWNleecgeS7veWcsOWdgFxyXG4gICAgICAgICAgICAgICAgdmFyIHRoaXNDb3VudHJ5OyAvL+iOt+WPluiuouWNleWbveWutueugOeggVxyXG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrZWRUYXhpZFRleHQ7IC8v56iO5Y+3XHJcbiAgICAgICAgICAgICAgICB2YXIgY2l0eUVxdWFsUHJvdmluY2UgPSBmYWxzZTsgLy/lj5HlvoDnvo7lm73orqLljZXmmK/lkKbmnInln47luILot5/lm73lrrbnm7jlkIxcclxuICAgICAgICAgICAgICAgICRzY29wZS5ieGlzVGF4aWRGbGFnID0gMDtcclxuICAgICAgICAgICAgICAgIC8vIOmcgOimgemHiuaUvlxyXG4gICAgICAgICAgICAgICAgdmFyIGlkTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAvL3ZhciBrdWN1bklkcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAub3JkZXItZGV0YWlsJykuZWFjaChmdW5jdGlvbiAoKSB7IC8v54K55Ye75o+Q5Lqk55qE5pe25YCZ5Y675b6q546v5p+l5om+6YCJ5Lit55qE6K6i5Y2VXHJcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldERvbSA9ICQodGhpcykuY2hpbGRyZW4oJyNjai1vcmQtbnVtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc09yZFdsZnMgPSAkdGFyZ2V0RG9tLnNpYmxpbmdzKCcuZGNsLW9yZC13bHRkJykuY2hpbGRyZW4oJy5kY2wtb3JkLXNlbHdsJykudmFsKCk7Ly/ojrflj5bnianmtYHmlrnlvI9cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpc09yZFdsZnM6JywgdGhpc09yZFdsZnMpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc09yZFBob25lTnVtID0gJHRhcmdldERvbS5zaWJsaW5ncygnLnNoaXBwaW5nLWluZm8nKS5jaGlsZHJlbignLnBob25lLW51bScpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jaGlsZHJlbignLm9yZGVyLXRpbWUnKS5jaGlsZHJlbignLnpjaGVja2JveCcpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQ2l0eSA9ICQodGhpcykuY2hpbGRyZW4oJy5zaGlwcGluZy1pbmZvJykuZmluZCgnLmltcC1wcm9jdXMtY2l0eScpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1Byb3ZpbmNlID0gJCh0aGlzKS5jaGlsZHJlbignLnNoaXBwaW5nLWluZm8nKS5maW5kKCcuaW1wLXByb2N1cy1wcm92aW5jZScpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0NvdW50cnkgPSAkKHRoaXMpLmNoaWxkcmVuKCcuc2hpcHBpbmctaW5mbycpLmZpbmQoJy5pbXAtcHJvY3VzLWNvdW50cnknKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWRUYXhpZFRleHQgPSAkKHRoaXMpLmNoaWxkcmVuKCcuc2hpcHBpbmctaW5mbycpLmNoaWxkcmVuKCcudGFpeGQtdGV4dCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0NpdHkgPSB0aGlzQ2l0eS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzUHJvdmluY2UgPSB0aGlzUHJvdmluY2UudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNDb3VudHJ5ID09ICdVUycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0NpdHkgIT0gJ05FVyBZT1JLJyAmJiB0aGlzQ2l0eSAhPSAnTlknICYmIHRoaXNQcm92aW5jZSAhPSAnTkVXIFlPUksnICYmIHRoaXNQcm92aW5jZSAhPSAnTlknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNDaXR5ID09IHRoaXNQcm92aW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5RXF1YWxQcm92aW5jZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5piv57q957qmJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0NvdW50cnkgPT0gJ0JSJyAmJiAhY2hlY2tlZFRheGlkVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJ4aXNUYXhpZEZsYWcrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRhcmdldERvbS5jaGlsZHJlbignLmlzZGVsLWluc3RvcmUnKS50ZXh0KCkgJiYgJHRhcmdldERvbS5jaGlsZHJlbignLmlzZGVsLWluc3RvcmUnKS50ZXh0KCkgIT0gJ3Byb2Nlc3NpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxPcmRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0TnVtKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXNPcmRXbGZzLmluZGV4T2YoJ0RITCcpICE9IC0xIHx8IHRoaXNPcmRXbGZzID09IFwiQ2hpbmEgRU1TXCIgfHwgdGhpc09yZFdsZnMgPT0gXCJTLkYgQ2hpbmEgRG9tZXN0aWNcIiB8fCB0aGlzT3JkV2xmcyA9PSBcIllUTyBDaGluYSBEb21lc3RpY1wiIHx8IHRoaXNPcmRXbGZzID09IFwiU291dGggQWZyaWNhIFNwZWNpYWwgTGluZVwiIHx8IHRoaXNPcmRXbGZzID09IFwiQ0ogTm9ybWFsIEV4cHJlc3NcIikgJiYgIXRoaXNPcmRQaG9uZU51bSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfor6XooYzlv4XpobvopoHmnInmiYvmnLrlj7cnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pc0RobEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdE51bSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRobE5vUGhvbmVOdW0rKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0TnVtKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6ICQodGhpcykuYXR0cignZGF0YS1pZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRlcnNzXCI6ICQodGhpcykuYXR0cignZGF0YS1hZHJlc3MnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZExpc3QucHVzaChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWRzID0gJCh0aGlzKS5maW5kKCcuZGNsb3JkLXN5cy10aW1lJykuaHRtbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZHN0ciArPSBpZHMgKyAnLCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGlmIChjaXR5RXF1YWxQcm92aW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnQWRkcmVzcyBpbmNvcnJlY3QsIENpdHkgYW5kIFN0YXRlIHNob3VsZCBub3QgYmUgc2FtZSEnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYnhpc1RheGlkRmxhZyA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNCeEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3ROdW0gPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCBvcmRlcihzKSBmaXJzdCEnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5zaG9waWZ5UmVtb3ZlTnVtID0gZGVsT3JkQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubm9uZVBob25lTnVtID0gZGhsTm9QaG9uZU51bTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRDYXJ0T3JkTnVtID0gc2VsZWN0TnVtO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRobE5vUGhvbmVOdW0gPT0gc2VsZWN0TnVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gbGF5ZXIubXNnKFwiUGxlYXNlIGZpbGwgaW4gdGhlIHJlY2lwaWVudCdzIHBob25lIG51bWJlciBmb3IgdGhlIHNlbGVjdGVkIG9yZGVycy5cIiwge3RpbWU6IDQwMDB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLnN0eWxlKGluZGV4LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnNTAwcHgnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ub0ludmVudG9yeUFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrU3RvY2soKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrT3JkZXJEaXNjb3VudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9sb2FkaW5n5Yqg6L29XHJcbiAgICAgICAgICAgICAgICBsZXQgbG90dGllRG9tPW51bGw7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjZWF0ZUxvYWRpbmcoaWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLmRpc3BsYXk9J2ZsZXgnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFlbGVtZW50KSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIWxvdHRpZURvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb3R0aWVEb20gPSBsb3R0aWUubG9hZEFuaW1hdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGVsZW1lbnQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXI6ICdzdmcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogJy9lZ2cvaW1hZ2UvY2pfbG90dGllLmpzb24nIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVMb2FkaW5nKGlkKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50RWxlbWVudC5zdHlsZS5kaXNwbGF5PSdub25lJztcclxuICAgICAgICAgICAgICAgICAgICBsb3R0aWVEb20uZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/mj5DkuqToh7PotK3nianovaZcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdXJlQWRkQ2FydEZ1biA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjak9yZGVyTnVtYmVyID0gJHNjb3BlLmFkZHJlc3NPcmRlckxpc3Quam9pbignLCcpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVySWRMaXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NqT3JkZXJOdW1iZXInOiBjak9yZGVyTnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VhdGVMb2FkaW5nKCdhZGRjYXJkTG9hZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkQ2FydEZsYWcgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL2FkZHJlc3MvY2hlY2tBZGRyZXNzJywgSlNPTi5zdHJpbmdpZnkob3JkZXJJZExpc3QpLGZ1bmN0aW9uIChyZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTG9hZGluZygnYWRkY2FyZExvYWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5kYXRhLmxlbmd0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrQWRkcmVzc0xpc3QgPSByZXMuZGF0YS5kYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dEZ1biA9IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3QgPSBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaChpLm1zZ0VuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdCA9IGxpc3Quam9pbignLCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2hlY2tBZGRyZXNzTGlzdCAmJiAkc2NvcGUuY2hlY2tBZGRyZXNzTGlzdC5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja0FkZHJlc3MgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZENhcnRGbGFnID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcGluaW9uT3JkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2hlY2tBZGRyZXNzTGlzdCcsJHNjb3BlLmNoZWNrQWRkcmVzc0xpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYWRkcmVzc09yZGVyTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/lnLDlnYDkuI3lrozmlbTlvLnnqpdcclxuICAgICAgICAgICAgICAgICRzY29wZS5jaGVja0FkZHJlc3MgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlQ2hlY2tBZGRyZXNzMiA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tBZGRyZXNzID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tBZGRyZXNzTGlzdCA9IFtdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2xvc2VDaGVja0FkZHJlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QubGVuZ3RoICE9PSAkc2NvcGUuY2hlY2tBZGRyZXNzTGlzdC5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tBZGRyZXNzTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QuaW5jbHVkZXMoaXRlbS5vcmRlcklkKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QgPSAkc2NvcGUuYWRkcmVzc09yZGVyTGlzdC5maWx0ZXIoaSA9PiBpICE9PSBpdGVtLm9yZGVySWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5hZGRyZXNzT3JkZXJMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3Bpbmlvbk9yZGVyKClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrQWRkcmVzcyA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3Bpbmlvbk9yZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWEgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsRmxhZ0JvbCA9IGZhbHNlOyAvL+WIpOaWreaPkOS6pOeahOiuouWNleS4reacieayoeacieayoeacieeJqea1geaWueW8j+eahOiuouWNlVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkY2xvcmRlcnNpZCA9ICcnOyAvL+WGjeasoeeCueWHu+ehruWumuaPkOS6pOaMiemSruaXtiDmuIXnqbpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsZGNsd2wgPSAnJzsgLy/lho3mrKHngrnlh7vnoa7lrprmj5DkuqTmjInpkq7ml7Yg5riF56m654mp5rWB5pa55byPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGl0b3JkY3MgPSAnJzsgLy/lho3mrKHngrnlh7vnoa7lrprmj5DkuqTmjInpkq7ml7Yg5riF56m65a2Y5YKo5ouG5YiG5Ye65p2l55qE5Y+C5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0RobFBob25lTnVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYXZlVGF4ID0gZmFsc2U7IC8v5Yik5pat5o+Q5Lqk55qE6K6i5Y2V5Lit5pyJ5rKh5pyJ5Zyw5Yy65pivQlLnmoTvvIzkvYbmmK/msqHmnInnqI7lj7fnmoTorqLljZVcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiN6LWRjbC1vcmQgLnpjaGVja2JveFwiKS5lYWNoKGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxpdE5vcm1hbElkID0gJyc7IC8v5YaN5qyh54K55Ye756Gu5a6a5o+Q5Lqk5oyJ6ZKu5pe2IOa4heepuuiiq+aLhuWIhuiuouWNleeahGlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxpdG93bGZzID0gJyc7IC8v5YaN5qyh54K55Ye756Gu5a6a5o+Q5Lqk5oyJ6ZKu5pe2IOa4heepuueJqea1geaWueW8j1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsaXRjamlkID0gJyc7IC8v5YaN5qyh54K55Ye756Gu5a6a5o+Q5Lqk5oyJ6ZKu5pe2IOa4heepuuaLhuWIhuWHuuadpeiuouWNleeahOWVhuWTgWlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXJzaWQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtV2xOYW1lID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRjbC1vcmQtd2x0ZCcpLmNoaWxkcmVuKCcuZGNsLW9yZC1zZWx3bCcpLnZhbCgpOy8v6I635Y+W54mp5rWB5pa55byPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RobFBob25lTnVtID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLnNoaXBwaW5nLWluZm8nKS5jaGlsZHJlbignLnBob25lLW51bScpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXhOdW1iZXIgPSAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcuc2hpcHBpbmctaW5mbycpLmNoaWxkcmVuKCcudGFpeGQtdGV4dCcpLnRleHQoKTsgLy/nqI7lj7dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudHJ5Q29kZSA9ICQodGhpcykucGFyZW50KCkuc2libGluZ3MoJy5zaGlwcGluZy1pbmZvJykuZmluZCgnLmltcC1wcm9jdXMtY291bnRyeScpLnRleHQoKTsgLy/ln47luIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Yik5pat5Z+O5biC5piv5ZCm5pivQlIsIOW5tuS4lOeJqea1geaYr+WQpuS4ukNKUGFja2V05oiWREhM5oiWZVBhY2tldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcIkJSXCIgPT0gY291bnRyeUNvZGUgJiYgIXRheE51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hhdmVUYXggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVdsTmFtZSAmJiBpdGVtV2xOYW1lICE9ICdQbGVhc2Ugc2VsZWN0Jykgey8v5aaC5p6c5pyJ54mp5rWB5pa55byPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyc2lkID0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLm9yZC1jYWknKS5jaGlsZHJlbignLm9yZGVyLWlkJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvcmRlcnNpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QuaW5jbHVkZXMob3JkZXJzaWQpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6I635Y+W6K6i5Y2V55qE54mp5rWB5pa55byPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkY2xvcmR3bHN0dSA9ICQodGhpcykucGFyZW50KCkuc2libGluZ3MoJy5kY2wtb3JkLXdsdGQnKS5jaGlsZHJlbignLmRjbC1vcmQtc2Vsd2wnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6I635Y+W5ZWG5ZOB5piv5ZCm5Yy56YWNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRSZW1hcmsgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmF0dHIoXCJyZW1hcmtcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGl0ZW1XbE5hbWUuaW5kZXhPZignREhMJykgIT0gLTEgfHwgaXRlbVdsTmFtZSA9PSBcIkNoaW5hIEVNU1wiIHx8IGl0ZW1XbE5hbWUgPT0gXCJTLkYgQ2hpbmEgRG9tZXN0aWNcIiB8fCBpdGVtV2xOYW1lID09IFwiWVRPIENoaW5hIERvbWVzdGljXCIgfHwgaXRlbVdsTmFtZSA9PSBcIlNvdXRoIEFmcmljYSBTcGVjaWFsIExpbmVcIiB8fCBpdGVtV2xOYW1lID09IFwiQ0ogTm9ybWFsIEV4cHJlc3NcIikgJiYgIWlzRGhsUGhvbmVOdW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6K+l6KGM6K6i5Y2V57y65bCR5b+F6KaB55qE5omL5py65Y+35omL5py65Y+3JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzTm9JbnZlbnRvcnlJZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUubm9JbnZlbnRvcnlBcnIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gJHNjb3BlLm5vSW52ZW50b3J5QXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXJzaWQgPT0gJHNjb3BlLm5vSW52ZW50b3J5QXJyW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOb0ludmVudG9yeUlkRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTm9JbnZlbnRvcnlJZEZsYWcpIHsvL+S4jeaYr+e8uuWwkeW6k+WtmOeahOiuouWNlVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkY2xvcmRlcnNpZCArPSBvcmRlcnNpZCArIFwiI1wiICsgZGNsb3Jkd2xzdHUgKyAnLCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNIYXZlVGF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnVGhlIG9yZGVycyBjb250YWlucyBhbiBvcmRlciB3aXRoIGEgY2l0eSBvZiBCUiBidXQgbm8gQ1BGL0NOUEonKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+aMieiuouWNleeahOeKtuaAgeaPkOS6pFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uT3JkLmRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAganNvbk9yZC5kYXRhLm5vcm1hbCA9IGRjbG9yZGVyc2lkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uT3JkLmRhdGEuc3BsaXROb3JtYWwgPSBzcGxpdG9yZGNzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uT3JkLmRhdGEgPSBKU09OLnN0cmluZ2lmeShqc29uT3JkLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uT3JkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkY2xvcmRlcnNpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkY2xvcmRlcnNpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ05vIGF2YWlsYWJsZSBvcmRlcnMuIFBsZWFzZSBzZWxlY3Qgb3JkZXJzIHdpdGggc2hpcHBpbmcgbWV0aG9kcy4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9yZGVyTnVtYmVyID0gJHNjb3BlLm9yZGVyc0xpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9yZGVyTnVtYmVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFyciA9IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUuY2hlY2tBZGRyZXNzTGlzdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrQWRkcmVzc0xpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJOdW1iZXIuZm9yRWFjaChpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkub3JkZXIuSUQgPT09IGl0ZW0ub3JkZXJJZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZExpc3QgPSBpZExpc3QuZmlsdGVyKGkgPT4gaS5pZCAhPT0gaXRlbS5vcmRlci5PUkRFUl9OVU1CRVIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3JkZXJJbmZvXCI6IGlkTGlzdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9yZGVySWRcIjogaWRzdHJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZGF0YSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3JlcGVhdFZlcmlmaWNhdGlvbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRDYXJ0RmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuZmxhZyA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBkYXRhLmRhdGEuY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHN0ciA9IGRhdGEuZGF0YS5pZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXJsaXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsaXN0XCI6IGlkc3RyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhXCI6IGpzb25PcmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhck51bWJlciA9IGNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY2FyWlpDJykuc2hvdygpLmZpbmQoJy5jYXJOdW1iZXInKS5hdHRyKCdkYXRhLW51bWJlcicsIEpTT04uc3RyaW5naWZ5KGNhcmxpc3QpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYgKGRhdGEuZGF0YS5mbGFnID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhLmZsYWcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZENhcnQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gW107XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZENhcnQoKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGpzb25PcmQpXHJcbiAgICAgICAgICAgICAgICBkc3AubG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JyksICQod2luZG93KS5oZWlnaHQoKSAtIDE3MSwgNDcsIDApO1xyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9zdWJtaXRPcmRlcnMnLCBKU09OLnN0cmluZ2lmeShqc29uT3JkKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgnY2hlbmdnb25nJylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGpGdW4ob3JEYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvckRhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9yRGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkob3JEYXRhKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9xdWVyeU9yZGVycycsIEpTT04uc3RyaW5naWZ5KG9yRGF0YSksIGRjbHNGdW4sIGRjbGVGdW4pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkY2xzRnVuKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0MSA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9ICRzY29wZS5saXN0Lm9yZGVyc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wY291bnROID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7IC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRzdGF0dXNOdW0gPSAkc2NvcGUubGlzdC5hbGxPcmRlckNvdW50MjsgLy/lkITnp43nirbmgIHorqLljZXnmoTmlbDph49cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKCRzY29wZS5saXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtRnVuKCk7IC8v6LCD55So57uZ6K6i5Y2V6LWL5YC855qE5Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSA0MDYgfHwgZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gNTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDQwNikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKGRhdGEuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGpGdW4ob3JEYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvckRhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9yRGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9xdWVyeU9yZGVycycsIEpTT04uc3RyaW5naWZ5KG9yRGF0YSksIGRjbHNGdW4sIGRjbGVGdW4pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkY2xzRnVuKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0MSA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9ICRzY29wZS5saXN0Lm9yZGVyc0xpc3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSAkc2NvcGUubGlzdC5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGNvdW50TiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AucmVtb3ZlTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RTakZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZHN0YXR1c051bSA9ICRzY29wZS5saXN0LmFsbE9yZGVyQ291bnQyOyAvL+WQhOenjeeKtuaAgeiuouWNleeahOaVsOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naXNSZW1hcmsoJHNjb3BlLmxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0RnVuKCk7IC8v5YiG6aG15Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1GdW4oKTsgLy/osIPnlKjnu5norqLljZXotYvlgLznmoTlh73mlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsZUZ1bigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDUwMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZENhcnRSZXNvbkZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkQ2FydFJlc29uVGV4dCA9IGRhdGEuZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNTdWNGcmVzaEZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSA0MDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yU2hvd0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gSlNPTi5wYXJzZShkYXRhLmRhdGEucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9naXN0aWNzUmVhc29uTGlzdCA9IHRlbXAubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZE51bTogaXRlbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkYXRhLmRhdGEubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jYW5jZWxCeCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pc0J4RmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJ4aXNUYXhpZEZsYWcgPSAwXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jb25maXJtQnggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjei1kY2wtb3JkIC5vcmRlci1kZXRhaWwnKS5lYWNoKGZ1bmN0aW9uICgpIHsgLy/ngrnlh7vmj5DkuqTnmoTml7blgJnljrvlvqrnjq/mn6Xmib7pgInkuK3nmoTorqLljZVcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc09yZFdsZnM7IC8v6I635Y+W5bCG6KaB5o+Q5Lqk55qE54mp5rWB5pa55byPXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNDb3VudHJ5OyAvL+iOt+WPluiuouWNleWbveWutueugOeggVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGVja2VkVGF4aWRUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNoaWxkcmVuKCcub3JkZXItdGltZScpLmNoaWxkcmVuKCcuemNoZWNrYm94JykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNDb3VudHJ5ID0gJCh0aGlzKS5jaGlsZHJlbignLnNoaXBwaW5nLWluZm8nKS5maW5kKCcuaW1wLXByb2N1cy1jb3VudHJ5JykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzT3JkV2xmcyA9ICQodGhpcykuY2hpbGRyZW4oJyNjai1vcmQtbnVtJykuc2libGluZ3MoJy5kY2wtb3JkLXdsdGQnKS5jaGlsZHJlbignLmRjbC1vcmQtc2Vsd2wnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZFRheGlkVGV4dCA9ICQodGhpcykuY2hpbGRyZW4oJy5zaGlwcGluZy1pbmZvJykuY2hpbGRyZW4oJy50YWl4ZC10ZXh0JykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0NvdW50cnkgPT0gJ0JSJyAmJiAhY2hlY2tlZFRheGlkVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLm9yZGVyLXRpbWUnKS5jaGlsZHJlbignLnpjaGVja2JveCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBick9yZGVyID0gJCh0aGlzKS5jaGlsZHJlbignLm9yZGVyLXRpbWUnKVswXS5pbm5lclRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzT3JkZXJMaXN0ID0gJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gYnJPcmRlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYnhpc1RheGlkRmxhZyA9IDA7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNCeEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICQoJy5jYXJOdW1iZXInKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKCQodGhpcykuYXR0cignZGF0YS1udW1iZXInKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWRMaXN0ID0gZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaWRMaXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciBhID0gYmFzZTY0LmVuY29kZShpZExpc3QpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VGFiID0gd2luZG93Lm9wZW4oJ2Fib3V0OmJsYW5rJyk7XHJcbiAgICAgICAgICAgICAgICBuZXdUYWIubG9jYXRpb24uaHJlZiA9ICdteUNKLmh0bWwjL2RpcmVjdC1vcmRlcnMvJyArIGE7XHJcbiAgICAgICAgICAgICAgICAvLyQoJy5jYXJaWkMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKCcuY2FyV3JhcENvbmZpcm1CdG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc09yZGVyTGlzdCA9IFtdXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tBZGRyZXNzTGlzdCA9IFtdXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkQ2FydEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSgkKCcuY2FyTnVtYmVyJykuYXR0cignZGF0YS1udW1iZXInKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgdmFyIGpzb25PcmQgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdElkID0gZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGlzdElkKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdpZHMgPSBsaXN0SWQuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3U3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2gobmV3aWRzLCBmdW5jdGlvbiAoaSwgdikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RyICs9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0ciArPSAnLCcgKyB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNhdkRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJvcmRlcklkc1wiOiBuZXdTdHJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzYXZEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvc3VibWl0T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkoanNvbk9yZCksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoJ2NoZW5nZ29uZycpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhclpaQycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yRGF0YS5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3JEYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShvckRhdGEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBKU09OLnBhcnNlKGxpc3QxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSAkc2NvcGUubGlzdC5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGNvdW50TiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AucmVtb3ZlTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RTakZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZHN0YXR1c051bSA9ICRzY29wZS5saXN0LmFsbE9yZGVyQ291bnQyOyAvL+WQhOenjeeKtuaAgeiuouWNleeahOaVsOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9naXNSZW1hcmsoJHNjb3BlLmxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0RnVuKCk7IC8v5YiG6aG15Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1GdW4oKTsgLy/osIPnlKjnu5norqLljZXotYvlgLznmoTlh73mlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsZUZ1bigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDQwNiB8fCBkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSA1MDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gNDA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coZGF0YS5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gNTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNhclpaQycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yRGF0YS5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3JEYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShvckRhdGEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBKU09OLnBhcnNlKGxpc3QxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wY291bnROID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7IC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRzdGF0dXNOdW0gPSAkc2NvcGUubGlzdC5hbGxPcmRlckNvdW50MjsgLy/lkITnp43nirbmgIHorqLljZXnmoTmlbDph49cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKCRzY29wZS5saXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtRnVuKCk7IC8v6LCD55So57uZ6K6i5Y2V6LWL5YC855qE5Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSA1MDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jYXJaWkMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRDYXJ0UmVzb25GbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZENhcnRSZXNvblRleHQgPSBkYXRhLmRhdGEubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzU3VjRnJlc2hGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvclNob3dGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IEpTT04ucGFyc2UoZGF0YS5kYXRhLnJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2lzdGljc1JlYXNvbkxpc3QgPSB0ZW1wLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmROdW06IGl0ZW0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5kYXRhLm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvYWRkUmVwZWF0T3JkZXJJZCcsIEpTT04uc3RyaW5naWZ5KHNhdkRhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRzY29wZS5jbG9zZUNhcldyYXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZigkc2NvcGUuY2hlY2tBZGRyZXNzTGlzdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrQWRkcmVzc0xpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QucHVzaChpdGVtLm9yZGVySWQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5jaGVja0FkZHJlc3NMaXN0ID0gW11cclxuICAgICAgICAgICAgICAgICQoJy5jYXJaWkMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvL+e7mURITOi+k+WFpeaJi+acuuWPt1xyXG4gICAgICAgICAgICB2YXIgbGlzdEluZGV4OyAvL+esrOWHoOadoeiuouWNlVxyXG4gICAgICAgICAgICAkc2NvcGUuaW5wUGhvbmVGdW4gPSBmdW5jdGlvbiAoaW5kZXgsIGV2KSB7XHJcbiAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICQoZXYudGFyZ2V0KS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKGV2LnRhcmdldCkuc2libGluZ3MoJy5kaGxzYW1lY2xhc3MnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBsaXN0SW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuc3VyZVBob25lRnVuID0gZnVuY3Rpb24gKGluZGV4LCBldiwgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZJbnBWYWwgPSAnJztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2SW5wVmFsKVxyXG4gICAgICAgICAgICAgICAgZXZJbnBWYWwgPSAkLnRyaW0oJChldi50YXJnZXQpLnNpYmxpbmdzKCcuaW5wLXBob25lTnVtJykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGlzdEluZGV4KVxyXG4gICAgICAgICAgICAgICAgaWYgKGV2SW5wVmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci91cGRhdGVQaG9uZScsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiBldklucFZhbFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSBcIkNPREVfMjAwXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0W2xpc3RJbmRleF0ub3JkZXIuUEhPTkUgPSBldklucFZhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnQ2hhbmdlIHRoZSBwaG9uZSBudW1iZXIgdG8gZmFpbC4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICQoZXYudGFyZ2V0KS5zaWJsaW5ncygnI2xyUGhvbmVCdG4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChldi50YXJnZXQpLnBhcmVudCgpLmZpbmQoJy5kaGxzYW1lY2xhc3MnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIGVudGVyIHBob25lIG51bWJlcicpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLnF4UGhvbmVGdW4gPSBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgJChldi50YXJnZXQpLnNpYmxpbmdzKCcjbHJQaG9uZUJ0bicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoZXYudGFyZ2V0KS5wYXJlbnQoKS5maW5kKCcuZGhsc2FtZWNsYXNzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5om56YeP5Li65a6i5oi355qEZGhs6K6+572u5omL5py65Y+3XHJcbiAgICAgICAgICAgICRzY29wZS5vcGVuU2V0RGhsRnVuID0gZnVuY3Rpb24gKHdsTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRobE5vUGhvbmVGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5idWxrRWRpdFdsTmFtZSA9IHdsTmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuYnVsa1NldERobFBob25lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaGxQaG9uZU51bSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5kaGxQaG9uZU51bSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2UgZW50ZXIgcGhvbmUgbnVtYmVyJylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgdXBkaGxEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB1cGRobERhdGEucGhvbmUgPSAkc2NvcGUuZGhsUGhvbmVOdW07XHJcbiAgICAgICAgICAgICAgICB1cGRobERhdGEubG9naXN0aWNOYW1lID0gJHNjb3BlLmJ1bGtFZGl0V2xOYW1lO1xyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci91cERITFBob25lJywgSlNPTi5zdHJpbmdpZnkodXBkaGxEYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGhsTm9QaG9uZUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdTZXQgdXAgc3VjY2VzcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaGxQaG9uZU51bSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AubG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JyksICQod2luZG93KS5oZWlnaHQoKSAtIDE3MSwgNDcsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hvd0xpc3QgPSAkKCcjZGNsLXNlbCcpLnZhbCgpIC0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yRGF0YS5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3JEYXRhLmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcXVlcnlPcmRlcnMnLCBKU09OLnN0cmluZ2lmeShvckRhdGEpLCBkY2xzRnVuLCBkY2xlRnVuKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsc0Z1bihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29weUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0MSA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IEpTT04ucGFyc2UobGlzdDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSAkc2NvcGUubGlzdC5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxheWVyLm1zZygnUGxlYXNlIGNoZWNrIHRoZSBmYWlsZWQgb25lcyBvbiB0aGUgRHJhZnQuJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGNvdW50TiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AucmVtb3ZlTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RTakZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3Jkc3RhdHVzTnVtID0gJHNjb3BlLmxpc3QuYWxsT3JkZXJDb3VudDI7IC8v5ZCE56eN54q25oCB6K6i5Y2V55qE5pWw6YePXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dpc1JlbWFyaygkc2NvcGUubGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRGdW4oKTsgLy/liIbpobXlh73mlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bUZ1bigpOyAvL+iwg+eUqOe7meiuouWNlei1i+WAvOeahOWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkY2xlRnVuKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdTZXQgdXAgZmFpbGVkJylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5pc1Bob25lUmVnRnVuID0gZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgICAgICAgICAkKGV2LnRhcmdldCkudmFsKCQoZXYudGFyZ2V0KS52YWwoKS5yZXBsYWNlKC9bXlxcZFxcLVxcK1xcKClcXHNdL2csICcnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLmlucHV0LWRobHBob25lJykub24oJ2tleXVwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9bXlxcZFxcLVxcK1xcKClcXHNdL2csICcnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkc2NvcGUuaW1wb3J0TmV3RnVuID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuZGNsLXRjLXdyYXAnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/pgInmi6nkuIrkvKAg57KY6LS05by55qGG55qE5Y+W5raI5oyJ6ZKuXHJcbiAgICAgICAgICAgICQoJy5jYW4tZHR3LXRjJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmRjbC10Yy13cmFwJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gJCgnI3N2Yy14bCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy/ngrnlh7tjb3B55oyJ6ZKuIOaYvuekumNvcHnlvLnnqpdcclxuICAgICAgICAgICAgJCgnLmR0d3QtcicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy5jb3B5LXJvdy11bCBsaScpLnJlbW92ZSgpOyAvL+a4heepuuWkjeWItueymOi0tOmHjOmdouaJgOacieeahOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgJCgnLmRjbC10Yy13cmFwJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNvcHktd3JhcCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJy5jb3B5LXJvdy11bCcpLmVxKDEpLmF0dHIoJ2lzZmlyJywgJzEnKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8v57KY6LS055qE5Y+W5raI5oyJ6ZKuXHJcbiAgICAgICAgICAgICQoJyNjb3B5LWNhbmNlbC1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuY29weS13cmFwJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmNvcHktcm93LXVsIGxpJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWRkLXRleHQtYnRuJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9wdWJsaWMtaW1nL2FkZC5wbmcnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy/nspjotLTnmoTmlofmnKzmoYZcclxuICAgICAgICAgICAgJHNjb3BlLmlzYWRkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciAkY3VycmVudE9iaiA9IHt9O1xyXG4gICAgICAgICAgICAvL+WinuWKoOaWh+acrOeahOWbvueJh+aMiemSrlxyXG4gICAgICAgICAgICAkc2NvcGUuYWRkVGV4dENvbiA9IGZ1bmN0aW9uICgkZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBleGNlbFRpdCA9ICQoJGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuYy1oZWFkLXRpdCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KGV4Y2VsVGl0KTtcclxuICAgICAgICAgICAgICAgICQoJyNleGNlbC10aXQnKS50ZXh0KGV4Y2VsVGl0KVxyXG4gICAgICAgICAgICAgICAgJGN1cnJlbnRPYmogPSAkKCRldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgIGlmICgkY3VycmVudE9iai5hdHRyKCdpc2ZpcicpID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjYWRkLXRleHRhcmVhJykudmFsKCcnKTsgLy/muIXnqbrmlofmnKzmoYZcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXNhZGQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5hZGQtdGV4dC1idG4nKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvYWRkLnBuZycpXHJcbiAgICAgICAgICAgICAgICAgICAgJCgkZXZlbnQuY3VycmVudFRhcmdldCkuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9wdWJsaWMtaW1nL2FkZC1hY3RpdmUucG5nJylcclxuICAgICAgICAgICAgICAgICAgICAkY3VycmVudE9iaiA9ICQoJGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCRjdXJyZW50T2JqKVxyXG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50T2JqLmNoaWxkcmVuKCcuaGlkZS1hZGQtZGF0YScpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50T2JqLmNoaWxkcmVuKCcuY29weS1yb3ctbGknKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJCgnLmNvcHktcm93LXVsJykuZXEoMSkuY2hpbGRyZW4oJy5jb3B5LXJvdy1saScpLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2UgZW50ZXIgb3JkZXIgbnVtYmVyIGZpcnN0LicpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKCcuY29weS1yb3ctdWwnKS5lcSgxKS5jaGlsZHJlbignLmNvcHktcm93LWxpJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNhZGQtdGV4dGFyZWEnKS52YWwoJycpOyAvL+a4heepuuaWh+acrOahhlxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pc2FkZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFkZC10ZXh0LWJ0bicpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9hZGQucG5nJylcclxuICAgICAgICAgICAgICAgICAgICAkKCRldmVudC5jdXJyZW50VGFyZ2V0KS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvYWRkLWFjdGl2ZS5wbmcnKVxyXG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50T2JqID0gJCgkZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJGN1cnJlbnRPYmopXHJcbiAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnRPYmouY2hpbGRyZW4oJy5oaWRlLWFkZC1kYXRhJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnRPYmouY2hpbGRyZW4oJy5jb3B5LXJvdy1saScpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdmFyIHRleHRPYmogPSAkKCRldmVudC5jdXJyZW50VGFyZ2V0KS5cclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCQoJGV2ZW50LmN1cnJlbnRUYXJnZXQpLmluZGV4KCkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g5paH5pys5qGG55qE5Y+W5raI5oyJ6ZKuXHJcbiAgICAgICAgICAgICRzY29wZS5jbG9zZWFkZFRleHRDb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNhZGQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+aWh+acrOahhueahOehruWumuaMiemSrlxyXG4gICAgICAgICAgICB2YXIgYmlhb2ppID0gMDtcclxuICAgICAgICAgICAgJHNjb3BlLmVudGVyYWRkVGV4dENvbiA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmlzYWRkID0gZmFsc2U7IC8v5YWz6Zet5paH5pys5qGGXHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgnI2FkZC10ZXh0YXJlYScpLnZhbCgpID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHIgPSAkKCcjYWRkLXRleHRhcmVhJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgc3RyID0gJCgnI2FkZC10ZXh0YXJlYScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3RyKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0ci5pbmRleE9mKCdPcmRlck51bWJlcicpKVxyXG4gICAgICAgICAgICAgICAgdmFyIGhpZGVTdHIgPSAnPHAgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCIgY2xhc3M9XCJoaWRlLWFkZC1kYXRhXCI+JyArIHN0ciArICc8L3A+JyAvLyBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIlxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc3RyKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdHJBcnIgPSBzdHIuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0ckFyciAmJiBKU09OLnN0cmluZ2lmeShzdHJBcnIpICE9ICdbXScpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0ckFycltzdHJBcnIubGVuZ3RoIC0gMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyQXJyLnBvcCgpOyAvL+WOu+mZpOacgOWQjuS4gOS4quWFg+e0oFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBsaXN0RGF0YSA9ICcnOyAvL+WtmOWCqOeymOi0tOeahOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgdmFyIHNvcnROdW0gPSAnJzsgLy/lrZjlgqjorqLljZXnmoTluo/lj7dcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdHJBcnIpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdHJBcnIubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgaWYgKCRjdXJyZW50T2JqLmF0dHIoJ2lzZmlyJykgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJpYW9qaSA9IHN0ckFyci5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhiaWFvamkpXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJpYW9qaTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJGN1cnJlbnRPYmouYXR0cignaXNmaXInKSA9PSAxKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyQXJyW2ldID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaWFvamkgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjY3RjLXNvcnQgbGknKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnROdW0gKz0gJzxsaSBjbGFzcz1cImNvcHktcm93LWxpXCI+PHNwYW4+JyArIGluZGV4ICsgJzwvc3Bhbj48L2xpPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0RGF0YSArPSAnPGxpIGNsYXNzPVwiY29weS1yb3ctbGlcIj4nICsgc3RyQXJyW2ldICsgJzwvbGk+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJBcnJbaV0gPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpc3REYXRhICs9ICc8bGkgY2xhc3M9XCJjb3B5LXJvdy1saVwiPjwvbGk+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhICs9ICc8bGkgY2xhc3M9XCJjb3B5LXJvdy1saVwiPicgKyBzdHJBcnJbaV0gKyAnPC9saT4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzb3J0TnVtKVxyXG5cclxuICAgICAgICAgICAgICAgICQoJyNjdGMtc29ydCcpLmFwcGVuZChzb3J0TnVtKTtcclxuICAgICAgICAgICAgICAgICRjdXJyZW50T2JqLmFwcGVuZChoaWRlU3RyKTtcclxuICAgICAgICAgICAgICAgICRjdXJyZW50T2JqLmFwcGVuZChsaXN0RGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/mj5DkuqTnspjotLTnmoTlhoXlrrlcclxuICAgICAgICAgICAgJHNjb3BlLmNvcHlGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICQoJyNjb3B5LWNvbi1idG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmhpZGUtYWRkLWRhdGEnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkKCcuaGlkZS1hZGQtZGF0YScpLnRleHQoKSlcclxuICAgICAgICAgICAgICAgIHZhciAkZGF0YU9iaiA9ICQoJy5oaWRlLWFkZC1kYXRhJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkZGF0YU9iai5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgcXVlcnlEYXRhID0gJyc7Ly/lrZjlgqjmj5DkuqTnmoTmlbDmja5cclxuICAgICAgICAgICAgICAgIHZhciBzdHJMZW4gPSAxMztcclxuICAgICAgICAgICAgICAgIGlmICgkKCcjY3RjLXRheE51bWJlciAuaGlkZS1hZGQtZGF0YScpLnRleHQoKSA9PSBudWxsIHx8ICQoJyNjdGMtdGF4TnVtYmVyIC5oaWRlLWFkZC1kYXRhJykudGV4dCgpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/nqI7lj7flj6/ku6XkuLrnqbpcclxuICAgICAgICAgICAgICAgICAgICBzdHJMZW4gPSAxMjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkZGF0YU9iai5sZW5ndGggIT09IHN0ckxlbikgeyAvLyRkYXRhT2JqLmxlbmd0aCE9PTEyXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2UgZmlsbCB0aGUgZm9ybSBjb21wbGV0ZWx5LicpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgJHJvd09iaiA9ICQoJy5jb3B5LXJvdy11bCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCRyb3dPYmopXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbjEgPSAkZGF0YU9iai5lcSgwKS50ZXh0KCkuc3BsaXQoJ1xcbicpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAvLyDliKTmlq3miYDmnInnmoTmlbDnu4Tplb/luqbmmK/lkKbnm7jnrYlcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkZGF0YU9iai5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvL+WIpOaWreeymOi0tOeahOadoeaVsOaYr+WQpuebuOetiVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgJGRhdGFPYmoubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbjEgPT0gJGRhdGFPYmouZXEoaSkudGV4dCgpLnNwbGl0KCdcXG4nKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoJy5jb3B5LXJvdy11bCcpLmVxKGkpLmNzcygnYmFja2dyb3VuZCcsJ3BpbmsnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGUgbGluZXMgYXJlIG5vdCBlcXVhbCB0byBlYWNoIG90aGVyLicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXJ5RGF0YSA9IHt9OyAvL+WtmOWCqOaPkOS6pOeahOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmbGFnKSB7IC8vZmxhZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRkYXRhT2JqLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBxdWVyeURhdGEgKz0gJGRhdGFPYmouZXEoaSkudGV4dCgpKycjJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcXVlcnlEYXRhICs9ICdPcmRlciBOdW1iZXI6JyskZGF0YU9iai5lcShpKS50ZXh0KCkrJyMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURhdGEub3JkZXJOdW1iZXIgPSAkZGF0YU9iai5lcSgwKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlEYXRhLlNrdSA9ICRkYXRhT2JqLmVxKDEpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURhdGEuUXVhbnRpdHkgPSAkZGF0YU9iai5lcSgyKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlEYXRhLnByb2R1Y3RUaXRsZSA9ICRkYXRhT2JqLmVxKDMpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURhdGEuY3VzdG9tZXJOYW1lID0gJGRhdGFPYmouZXEoNCkudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RGF0YS5hZGRyZXNzMSA9ICRkYXRhT2JqLmVxKDUpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBxdWVyeURhdGEgKz0gJ09yZGVyIE51bWJlcjonKyRkYXRhT2JqLmVxKGkpLnRleHQoKSsnIyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RGF0YS5hZGRyZXNzMiA9ICRkYXRhT2JqLmVxKDYpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURhdGEuY2l0eSA9ICRkYXRhT2JqLmVxKDcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURhdGEucHJvdmluY2UgPSAkZGF0YU9iai5lcSg4KS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlEYXRhLnppcCA9ICRkYXRhT2JqLmVxKDkpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlEYXRhLmNvdW50cnkgPSAkZGF0YU9iai5lcSgxMCkudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBxdWVyeURhdGEgKz0gJ09yZGVyIE51bWJlcjonKyRkYXRhT2JqLmVxKGkpLnRleHQoKSsnIyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RGF0YS5waG9uZU51bWJlciA9ICRkYXRhT2JqLmVxKDExKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHF1ZXJ5RGF0YSArPSAnT3JkZXIgTnVtYmVyOicrJGRhdGFPYmouZXEoaSkudGV4dCgpKycjJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlEYXRhLnRheE51bWJlciA9ICRkYXRhT2JqLmVxKDEyKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHF1ZXJ5RGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocXVlcnlEYXRhKSlhcHAvb3JkZXIvYW5hbHlzaXNPcmRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bihcIm9yZGVyL29sZE9yZGVyL2FuYWx5c2lzT3JkZXJcIiwgSlNPTi5zdHJpbmdpZnkocXVlcnlEYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLmRhdGEucmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAnMzAwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coZGF0YS5kYXRhLm1lc3NhZ2UsIHt0aW1lOiAzMDAwfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09ICcyMDAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NPYmogPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN1Y2Nlc3NPYmopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoc3VjY2Vzc09iailcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzc09iai5yZXN1bHQgPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNvcHktd3JhcCcpLmhpZGUoKTsgLy/pmpDol4/nspjotLTmoYZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvcHlGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvcHlwcm90b3RhbE51bSA9IHN1Y2Nlc3NPYmoudG90YWxOdW1iZXIgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29weXN1Y2VOdW0gPSBzdWNjZXNzT2JqLnN1Y2Nlc3MgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29weWZhaWxOdW0gPSBzdWNjZXNzT2JqLm5vdGhpbmcgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29weXRvdGFsTnVtID0gJHNjb3BlLmNvcHlzdWNlTnVtICsgJHNjb3BlLmNvcHlmYWlsTnVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29weWNvbWJpbmVkTnVtID0gJHNjb3BlLmNvcHlwcm90b3RhbE51bSAtICRzY29wZS5jb3B5dG90YWxOdW07IC8v5pyJ5aSa5bCR6K6i5Y2V5ZCI5bm2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coc3VjY2Vzc09iai5tZXNzYWdlLCB7dGltZTogMzAwMH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkLXRleHQtYnRuJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9wdWJsaWMtaW1nL2FkZC5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8v57KY6LS06K6i5Y2V5oiQ5Yqf5aSx6LSl5by55qGG55qE56Gu5a6a5oyJ6ZKuXHJcbiAgICAgICAgICAgICRzY29wZS5jb3B5Q29uRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLmNvcHlGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNvcHlmYWlsTnVtID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY29weXN1Y2VOdW0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaG93TGlzdCA9ICQoJyNkY2wtc2VsJykudmFsKCkgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRqRnVuKG9yRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9xdWVyeU9yZGVycycsIEpTT04uc3RyaW5naWZ5KG9yRGF0YSksIGRjbHNGdW4sIGRjbGVGdW4pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkY2xzRnVuKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb3B5RmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSAkc2NvcGUubGlzdC5vcmRlcnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9ICRzY29wZS5saXN0LmNvdW50TnVtYmVyOyAvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGF5ZXIubXNnKCdQbGVhc2UgY2hlY2sgdGhlIGZhaWxlZCBvbmVzIG9uIHRoZSBEcmFmdC4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRzdGF0dXNOdW0gPSAkc2NvcGUubGlzdC5hbGxPcmRlckNvdW50MjsgLy/lkITnp43nirbmgIHorqLljZXnmoTmlbDph49cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKCRzY29wZS5saXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtRnVuKCk7IC8v6LCD55So57uZ6K6i5Y2V6LWL5YC855qE5Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5kcmFmdEZ1bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuREZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGF5ZXIubXNnKCdQbGVhc2UgY2hlY2sgdGhlIGZhaWxlZCBvbmVzIG9uIHRoZSBEcmFmdC4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29weUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLmRyYWZ0RnVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5ERnVuKClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb3B5RmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0YXRlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhjZWxDYW5GbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29weUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG93TGlzdCA9ICQoJyNkY2wtc2VsJykudmFsKCkgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsc0Z1bihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBKU09OLnBhcnNlKGxpc3QxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wY291bnROID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7IC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxheWVyLm1zZygnUGxlYXNlIGNoZWNrIHRoZSBmYWlsZWQgb25lcyBvbiB0aGUgRHJhZnQuJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZHN0YXR1c051bSA9ICRzY29wZS5saXN0LmFsbE9yZGVyQ291bnQyOyAvL+WQhOenjeeKtuaAgeiuouWNleeahOaVsOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dpc1JlbWFyaygkc2NvcGUubGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1GdW4oKTsgLy/osIPnlKjnu5norqLljZXotYvlgLznmoTlh73mlbBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/pvKDmoIfnp7vlhaXliIfmjaLlm77niYdcclxuICAgICAgICAgICAgJCgnLmR0d3QtbCcpLm1vdXNlZW50ZXIoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdpbWcnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvZXhjZWwtYWltZy5wbmcnKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnLmR0d3QtbCcpLm1vdXNlbGVhdmUoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdpbWcnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL3B1YmxpYy1pbWcvZXhjZWwtaW1nLnBuZycpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKCcuZHR3dC1yJykubW91c2VlbnRlcihmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJ2ltZycpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvcHVibGljLWltZy9jb3B5LWFpbWcucG5nJylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJy5kdHd0LXInKS5tb3VzZWxlYXZlKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignaW1nJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9wdWJsaWMtaW1nL2NvcHktaW1nLnBuZycpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyDlr7zlhaVleGNlbOiuouWNleaMiemSrlxyXG4gICAgICAgICAgICAkc2NvcGUudXBsb2FkRmxhZyA9IGZhbHNlOyAvL+S4iuS8oOaIkOWKn+eahOW8ueeql1xyXG4gICAgICAgICAgICAvL+WPlua2iOaMiemSrueahOaYvuekuumakOiXj1xyXG4gICAgICAgICAgICAkc2NvcGUuZXhjZWxDYW5GbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICQoJy5kdHd0LWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuZGNsLXRjLXdyYXAnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIub3Blbih7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMSxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnPGRpdiBjbGFzcz1cImV4Y2VsYWxlcnQtd3JhcFwiIHN0eWxlPVwid2lkdGg6NDkwcHhcIj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJleGNlbC1tdG9wXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZXhjZWwtbXRsXCI+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cImV4Y2VsLW10cDJcIj5FeGNlbCBPcmRlcnMgVGVtcGxhdGU6PC9wPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJleGNlbC1tdHAyXCI+RXhjZWwgT3JkZXJzIEZpbGU6PC9wPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZXhjZWwtbXRyXCI+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cImV4Y2VsLW1ibHBcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxhIGNsYXNzPVwiZXhjZWwtZG93bmxvYWRcIiBocmVmPVwiaHR0cHM6Ly9jYy13ZXN0LXVzYS5vc3MtdXMtd2VzdC0xLmFsaXl1bmNzLmNvbS8yMDUxLzE2MjkwMjQ0MjM4NTAueGxzeFwiICA+RG93bmxvYWQ8L2E+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L3A+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8Zm9ybSBpZD1cImV4Y2VsLXVwbG9hZFwiIGFjdGlvbj1cImh0dHA6Ly8xOTIuMTY4LjUuMTA0OjgwODYvZHNwX3NlcnZlci9vcmRlci9vbGRPcmRlci9hZGRPcmRlckJ5RXhjZWxcIiBtZXRob2Q9XCJwb3N0XCIgZW5jdHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwiZS11cGwtcFwiPjxhIGNsYXNzPVwidXBsb2FkLWJ0blwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIj5VcGxvYWQ8L2E+PGlucHV0IGlkPVwidXBsb2FkSW5wXCIgbmFtZT1cImZpbGVcIiBjbGFzcz1cImV4LXVwbG9hZC1pbnBcIiB0eXBlPVwiZmlsZVwiICAgLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwidGV4dC10aXRcIj48L3NwYW4+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L3A+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Zvcm0+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PidcclxuICAgICAgICAgICAgICAgICAgICAgICAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyxcclxuICAgICAgICAgICAgICAgICAgICBhcmVhOiBbJzU1NHB4JywgJzMwMHB4J10sXHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VCdG46IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hhZGVDbG9zZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJJbXBvcnQgRXhjZWwgT3JkZXJzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbjogXCJleGNlbC1sYXllclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0bjogWydDYW5jZWwnLCAnQ29uZmlybSddLFxyXG4gICAgICAgICAgICAgICAgICAgIHllczogZnVuY3Rpb24gKGluZGV4LCBsYXllcm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2UoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0bjI6IGZ1bmN0aW9uIChpbmRleCwgbGF5ZXJvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlKGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGUgPSAkKFwiI3VwbG9hZElucFwiKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZmlsZS5sYXN0SW5kZXhPZihcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy50ZXh0LXRpdCcpLnRleHQoZmlsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dCA9IGZpbGUuc3Vic3RyaW5nKGluZGV4ICsgMSwgZmlsZS5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ICE9IFwieGxzeFwiICYmIGV4dCAhPSBcInhsc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnRmlsZSBGb3JtYXQgRXJyb3I6IFlvdSBuZWVkIHRvIHVwbG9hZCBFWENFTCBmb3JtYXQgZmlsZSwgb3RoZXIgdHlwZSBmaWxlcyB3aWxsIG5vdCBiZSBhdmFpbGFibGUgdG8gc3lzdGVtLicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCQoXCIjZXhjZWwtdXBsb2FkXCIpWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXRmb3JtSWQgPSAkKFwiLmV4Y2VsLW10c1wiKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcInBsYXRmb3JtSWRcIiwgcGxhdGZvcm1JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGxhdGZvcm1JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC51cExvYWRJbWdQb3N0KCdvcmRlci9vbGRPcmRlci9hZGRPcmRlckJ5RXhjZWwnLCBmb3JtRGF0YSwgb3JzRnVuLCBkcmVGdW4pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvcnNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAnMzAwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEuZGF0YS5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5tZXNzYWdlID0gJ1VwbG9hZCBlcnJvcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKGRhdGEuZGF0YS5tZXNzYWdlLCB7dGltZTogMzAwMH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAnMjAwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9iailcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvYmoucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzT2JqID0gSlNPTi5wYXJzZShkYXRhLmRhdGEubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdWNjZXNzT2JqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KHN1Y2Nlc3NPYmopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3NPYmoucmVzdWx0ID09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGxvYWRGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb3RvdGFsTnVtID0gc3VjY2Vzc09iai50b3RhbE51bWJlciAtIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWNlTnVtID0gc3VjY2Vzc09iai5zdWNjZXNzIC0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZhaWxOdW0gPSBzdWNjZXNzT2JqLm5vdGhpbmcgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxOdW0gPSAkc2NvcGUuc3VjZU51bSArICRzY29wZS5mYWlsTnVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29tYmluZWROdW0gPSAkc2NvcGUucHJvdG90YWxOdW0gLSAkc2NvcGUudG90YWxOdW07IC8v5pyJ5aSa5bCR6K6i5Y2V5ZCI5bm2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCRzY29wZS5mYWlsTnVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmZhaWxOdW0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WPlua2iOaMiemSrueahOaYvuekuumakOiXj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4Y2VsQ2FuRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4Y2VsQ2FuRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgkc2NvcGUuZXhjZWxDYW5GbGFnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coc3VjY2Vzc09iai5tZXNzYWdlLCB7dGltZTogMzAwMH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRyZUZ1bigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiIGVyciBjZXNoaVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJChcIiNleGNlbC11cGxvYWRcIikub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZVRpdCA9ICQoXCIjdXBsb2FkSW5wXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy50ZXh0LXRpdCcpLnRleHQoZmlsZVRpdCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8v5LiK5LygZXhjZWzorqLljZXnmoTnoa7lrprmjInpkq5cclxuICAgICAgICAgICAgJHNjb3BlLmV4Y2VsQ29uRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5mYWlsTnVtID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGxvYWRGbGFnID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc3VjZU51bSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNob3dMaXN0ID0gJCgnI2RjbC1zZWwnKS52YWwoKSAtIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGpGdW4ob3JEYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvckRhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9yRGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShvckRhdGEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSAkc2NvcGUubGlzdC5vcmRlcnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9ICRzY29wZS5saXN0LmNvdW50TnVtYmVyOyAvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGF5ZXIubXNnKCdQbGVhc2UgY2hlY2sgdGhlIGZhaWxlZCBvbmVzIG9uIHRoZSBEcmFmdC4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRzdGF0dXNOdW0gPSAkc2NvcGUubGlzdC5hbGxPcmRlckNvdW50MjsgLy/lkITnp43nirbmgIHorqLljZXnmoTmlbDph49cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKCRzY29wZS5saXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtRnVuKCk7IC8v6LCD55So57uZ6K6i5Y2V6LWL5YC855qE5Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNPcGVuRHJhZnQnLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGF5ZXIubXNnKCdQbGVhc2UgY2hlY2sgdGhlIGZhaWxlZCBvbmVzIG9uIHRoZSBEcmFmdC4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNPcGVuRHJhZnQnLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5kcmFmdEZ1bigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzdGF0ZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4Y2VsQ2FuRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwbG9hZEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG93TGlzdCA9ICQoJyNkY2wtc2VsJykudmFsKCkgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsc0Z1bihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBKU09OLnBhcnNlKGxpc3QxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wY291bnROID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7IC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxheWVyLm1zZygnUGxlYXNlIGNoZWNrIHRoZSBmYWlsZWQgb25lcyBvbiB0aGUgRHJhZnQuJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZHN0YXR1c051bSA9ICRzY29wZS5saXN0LmFsbE9yZGVyQ291bnQyOyAvL+WQhOenjeeKtuaAgeiuouWNleeahOaVsOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dpc1JlbWFyaygkc2NvcGUubGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1GdW4oKTsgLy/osIPnlKjnu5norqLljZXotYvlgLznmoTlh73mlbBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuY2FuY2VsRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnVwbG9hZEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmFkZFRvQ2FuY2VsRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKTtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3ROdW0gPSAwOyAvL+WtmOWCqOiiq+mAieS4reeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAub3JkZXItZGV0YWlsJykuZWFjaChmdW5jdGlvbiAoKSB7IC8v54K55Ye75o+Q5Lqk55qE5pe25YCZ5Y675b6q546v5p+l5om+6YCJ5Lit55qE6K6i5Y2VXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuY2hpbGRyZW4oJy5vcmRlci10aW1lJykuY2hpbGRyZW4oJy56Y2hlY2tib3gnKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0TnVtKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoXCJyZW1hcmtcIikgIT09IHVuZGVmaW5lZCkgeyAvL+WmguaenOaYr+iiq+aLhuWIhueahOiuouWNlVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0TnVtLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdE51bSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2Ugc2VsZWN0IG9yZGVyKHMpIGZpcnN0IScpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGF5ZXIub3Blbih7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogXCI8cD5Zb3UgYXJlIGFkZGluZyBvcmRlcnMgdG8gQ2FuY2VsZWQuPC9wPjxwPk9yZGVyIFF1YW50aXR5OiAgPHNwYW4gaWQ9J2F3YS1kY2wtbnVtJz48L3NwYW4+PC9wPlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZWE6IFsnNDgwcHgnLCAnMjYwcHgnXSxcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZUJ0bjogMCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBzaGFkZUNsb3NlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIk9yZGVyIENhbmNlbGxhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraW46IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYnRuOiBbJ0NhbmNlbCcsICdDb25maXJtJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGxheWVybywgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChsYXllcm8pLmZpbmQoJyNhd2EtZGNsLW51bScpLmh0bWwoc2VsZWN0TnVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHllczogZnVuY3Rpb24gKGluZGV4LCBsYXllcm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2UoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0bjI6IGZ1bmN0aW9uIChpbmRleCwgbGF5ZXJvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOeCueWHu+aPkOS6pOaMiemSrumHjeaWsOWPkemAgeivt+axglxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9IDA7IC8v5a2Y5YKo5b6F5o+Q5Lqk6K6i5Y2V55qE5oC75p2h5pWwIHByb2Nlc3MgcmVxdWlyZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbmNlbERhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbmNlbElkID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBvcmRUeXBlT2JqID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjei1kY2wtb3JkIC56Y2hlY2tib3hcIikuZWFjaChmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsSWQgKz0gJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLm9yZC1jYWknKS5jaGlsZHJlbignLm9yZGVyLWlkJykudGV4dCgpICsgJywnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxEYXRhLm9yZGVyTnVtcyA9IGNhbmNlbElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxEYXRhLnR5cGUgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShjYW5jZWxEYXRhKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9kZWxldGVPcmRlcicsIEpTT04uc3RyaW5naWZ5KGNhbmNlbERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjei1kY2wtb3JkIC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkob3JEYXRhKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsc0Z1bihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBKU09OLnBhcnNlKGxpc3QxKTsgLy9qc29uw5fDlsK3w7vCtMKuw5fCqsK2w5TDj8OzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5saXN0LmNvdW50TnVtYmVyID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7Ly/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSAkc2NvcGUubGlzdC5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZHN0YXR1c051bSA9ICRzY29wZS5saXN0LmFsbE9yZGVyQ291bnQyOyAvL+WQhOenjeeKtuaAgeiuouWNleeahOaVsOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCh0eXBlb2YoJHNjb3BlLnBjb3VudE4pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dpc1JlbWFyaygkc2NvcGUubGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1GdW4oKTsgLy/osIPnlKjnu5norqLljZXotYvlgLznmoTlh73mlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCdkaW5nZG5hJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgndGlqaWFvc2hpYmFpJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgnY2FuY2VsICcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+mHjeaWsOaLieWPluiuouWNlVxyXG4gICAgICAgICAgICB2YXIgdGltZXIxOyAvL+WumuaXtuWZqFxyXG4gICAgICAgICAgICB2YXIgcHJvZ3Jlc3NMaW5lTnVtID0gMDtcclxuICAgICAgICAgICAgdmFyIHByb2dyZXNzTGluZU51bTIgPSAzMztcclxuICAgICAgICAgICAgdmFyIHByb2dyZXNzTGluZU51bTMgPSA2NjtcclxuICAgICAgICAgICAgdmFyIHByb2dyZXNzU3R1ID0gJzEnO1xyXG4gICAgICAgICAgICB2YXIgYmlhbmxpYW5ndGltZSA9IDE7XHJcblxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdGVzdEZ1bigpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKChuZXcgRGF0ZSgpLmdldFRpbWUoKS1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmlhbmxpYW5ndGltZScpKS8xMDAwPDUpXHJcbiAgICAgICAgICAgICAgICBpZiAoKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JpYW5saWFuZ3RpbWUnKSkgLyAxMDAwIDwgNSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXN0RnVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYW5saWFuZ3RpbWUnLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3F1ZXJ5RGF0YScpXHJcbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IGxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhsaW5rKVxyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9nZXRPcGVyYXRpb25PcmRlclN0YXR1cycsIHF1ZXJ5RGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTGluZU51bSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHJvZ3Jlc3NMaW5lTnVtXCIpIC0gMDtcclxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0xpbmVOdW0rKztcclxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc1N0dSA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwcm9ncmVzc1N0dSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICcxJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvZ3Jlc3NMaW5lTnVtXCIsIHByb2dyZXNzTGluZU51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NMaW5lTnVtID4gMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykuY3NzKCd3aWR0aCcsIDMzICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykudGV4dCgzMyArICclJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS5jc3MoJ3dpZHRoJywgcHJvZ3Jlc3NMaW5lTnVtICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykudGV4dChwcm9ncmVzc0xpbmVOdW0gKyAnJScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnMic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NMaW5lTnVtIDwgMzMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0xpbmVOdW0gPSAzMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvZ3Jlc3NMaW5lTnVtXCIsIHByb2dyZXNzTGluZU51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NMaW5lTnVtID4gNjYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykuY3NzKCd3aWR0aCcsIDY2ICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykudGV4dCg2NiArICclJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS5jc3MoJ3dpZHRoJywgcHJvZ3Jlc3NMaW5lTnVtICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykudGV4dChwcm9ncmVzc0xpbmVOdW0gKyAnJScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnMyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NMaW5lTnVtIDwgNjYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0xpbmVOdW0gPSA2NjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvZ3Jlc3NMaW5lTnVtXCIsIHByb2dyZXNzTGluZU51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NMaW5lTnVtID4gOTkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykuY3NzKCd3aWR0aCcsIDk5ICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykudGV4dCg5OSArICclJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnByb2dyZXNzLWJhcicpLmNzcygnd2lkdGgnLCBwcm9ncmVzc0xpbmVOdW0gKyAnJScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS50ZXh0KHByb2dyZXNzTGluZU51bSArICclJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICcwJzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXN1cGRhdGVGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXBkYXRlVGltZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ6aGl4aW5nMFwiKSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnemhpeGluZzAnLCBcIjBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvckRhdGEudXNlcklkID0gYnMuZGVjb2RlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvckRhdGEudXNlcklkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JEYXRhLnRva2VuID0gYnMuZGVjb2RlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRqRnVuKG9yRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yRGF0YS5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3JEYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkob3JEYXRhKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcXVlcnlPcmRlcnMnLCBKU09OLnN0cmluZ2lmeShvckRhdGEpLCBkY2xzRnVuLCBkY2xlRnVuKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsc0Z1bihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdDEgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IEpTT04ucGFyc2UobGlzdDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSAkc2NvcGUubGlzdC5vcmRlcnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5saXN0LmNvdW50TnVtYmVyID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7Ly/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wY291bnROID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7IC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZHN0YXR1c051bSA9ICRzY29wZS5saXN0LmFsbE9yZGVyQ291bnQyOyAvL+WQhOenjeeKtuaAgeiuouWNleeahOaVsOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQodHlwZW9mKCRzY29wZS5wY291bnROKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKCRzY29wZS5saXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtRnVuKCk7IC8v6LCD55So57uZ6K6i5Y2V6LWL5YC855qE5Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgnZGluZ2RuYScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc1N0dSAhPSBcIjBcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXN0RnVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VwZGF0ZVRpbWUnKSl7XHJcbiAgICAgICAgICAgIC8vIFx0JHNjb3BlLmlzdXBkYXRlRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIFx0dGVzdEZ1biAoKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAkc2NvcGUuY3hscW9yZEZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmKGNvZGVJbmxvY2FsICE9ICcyMDAnKXtcclxuICAgICAgICAgICAgICAgIC8vIFx0bGF5ZXIubXNnKFwiU3lzdGVtIGlzIHN5bmNpbmcgb3JkZXJzLCB5b3Ugd29uJ3QgYmUgYWJsZSB0byB1cGRhdGUgb3JkZXJzIHVudGlsIHN5bmMgZmluaXNoZWQuXCIpXHJcbiAgICAgICAgICAgICAgICAvLyBcdHJldHVybjtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0TnVtID0gMDsgLy/lrZjlgqjooqvpgInkuK3nmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLm9yZGVyLWRldGFpbCcpLmVhY2goZnVuY3Rpb24gKCkgeyAvL+eCueWHu+aPkOS6pOeahOaXtuWAmeWOu+W+queOr+afpeaJvumAieS4reeahOiuouWNlVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmNoaWxkcmVuKCcub3JkZXItdGltZScpLmNoaWxkcmVuKCcuemNoZWNrYm94JykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdE51bSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKFwicmVtYXJrXCIpICE9PSB1bmRlZmluZWQpIHsgLy/lpoLmnpzmmK/ooqvmi4bliIbnmoTorqLljZVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdE51bS0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3ROdW0gPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCBvcmRlcihzKSBmaXJzdCEnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxheWVyLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiPHA+QXJlIHlvdSBzdXJlIHRvIFVwZGF0ZSBPcmRlcnM/PC9wPjxwPkl0IHdpbGwgdGFrZSBhcm91bmQgZmV3IG1pdW50ZXMgdG8gbWFrZSB0aGlzIGhhcHBlbi48L3A+PHA+T3JkZXIgUXVhbnRpdHk6ICA8c3BhbiBpZD0nYXdhLWRjbC1udW0nPjwvc3Bhbj48L3A+XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYXJlYTogWyc0ODBweCcsICcyNjBweCddLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlQnRuOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNoYWRlQ2xvc2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVXBkYXRlIE9yZGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraW46IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYnRuOiBbJ0NhbmNlbCcsICdDb25maXJtJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGxheWVybywgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChsYXllcm8pLmZpbmQoJyNhd2EtZGNsLW51bScpLmh0bWwoc2VsZWN0TnVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHllczogZnVuY3Rpb24gKGluZGV4LCBsYXllcm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2UoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0bjI6IGZ1bmN0aW9uIChpbmRleCwgbGF5ZXJvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOeCueWHu+aPkOS6pOaMiemSrumHjeaWsOWPkemAgeivt+axglxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXVlcnlEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW5jZWxJZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3otZGNsLW9yZCAuemNoZWNrYm94XCIpLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxJZCArPSAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcub3JkLWNhaScpLmNoaWxkcmVuKCcub3JkZXItaWQnKS50ZXh0KCkgKyAnLCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURhdGEub3JkZXJOdW1zID0gY2FuY2VsSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RGF0YSA9IEpTT04uc3RyaW5naWZ5KHF1ZXJ5RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdxdWVyeURhdGEnLCBxdWVyeURhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvb3BlcmF0aW9uT3JkZXInLCBxdWVyeURhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPT0gXCIyMDBcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd6aGl4aW5nMCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2dyZXNzTGluZU51bScsIDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYW5saWFuZ3RpbWUnLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzdXBkYXRlRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdEZ1bjIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXBkYXRlVGltZScsIHVwZGF0ZVRpbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pc3VwZGF0ZUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coXCJTeXN0ZW0gaXMgc3luY2luZyBvcmRlcnMsIHlvdSB3b24ndCBiZSBhYmxlIHRvIHVwZGF0ZSBvcmRlcnMgdW50aWwgc3luYyBmaW5pc2hlZC5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdGVzdEZ1bjIoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JpYW5saWFuZ3RpbWUnKSkgLyAxMDAwIDwgNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuetieW+heaIkXNcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdEZ1bjIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmlhbmxpYW5ndGltZScsIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvZ2V0T3BlcmF0aW9uT3JkZXJTdGF0dXMnLCBxdWVyeURhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0xpbmVOdW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2dyZXNzTGluZU51bVwiKSAtIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NMaW5lTnVtKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NTdHUgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvZ3Jlc3NTdHUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnMSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2dyZXNzTGluZU51bVwiLCBwcm9ncmVzc0xpbmVOdW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzTGluZU51bSA+IDMyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnByb2dyZXNzLWJhcicpLmNzcygnd2lkdGgnLCAzMyArICclJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnByb2dyZXNzLWJhcicpLnRleHQoMzMgKyAnJScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS5jc3MoJ3dpZHRoJywgcHJvZ3Jlc3NMaW5lTnVtICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykudGV4dChwcm9ncmVzc0xpbmVOdW0gKyAnJScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnMic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NMaW5lTnVtIDwgMzMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0xpbmVOdW0gPSAzMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvZ3Jlc3NMaW5lTnVtXCIsIHByb2dyZXNzTGluZU51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3NMaW5lTnVtID4gNjYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykuY3NzKCd3aWR0aCcsIDY2ICsgJyUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykudGV4dCg2NiArICclJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnByb2dyZXNzLWJhcicpLmNzcygnd2lkdGgnLCBwcm9ncmVzc0xpbmVOdW0gKyAnJScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS50ZXh0KHByb2dyZXNzTGluZU51bSArICclJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICczJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0xpbmVOdW0gPCA2Nikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzTGluZU51bSA9IDY2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9ncmVzc0xpbmVOdW1cIiwgcHJvZ3Jlc3NMaW5lTnVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc0xpbmVOdW0gPiA5OSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS5jc3MoJ3dpZHRoJywgOTkgKyAnJScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5wcm9ncmVzcy1iYXInKS50ZXh0KDk5ICsgJyUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucHJvZ3Jlc3MtYmFyJykuY3NzKCd3aWR0aCcsIHByb2dyZXNzTGluZU51bSArICclJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnByb2dyZXNzLWJhcicpLnRleHQocHJvZ3Jlc3NMaW5lTnVtICsgJyUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJzAnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzdXBkYXRlRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1cGRhdGVUaW1lJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInpoaXhpbmcwXCIpID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd6aGl4aW5nMCcsIFwiMFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjei1kY2wtb3JkIC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JEYXRhLnVzZXJJZCA9IGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cob3JEYXRhLnVzZXJJZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yRGF0YS50b2tlbiA9IGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvckRhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9yRGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KG9yRGF0YSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDsgLy/Di8O5w5PDkMOKw73CvsOdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7IC8vanNvbsOXw5bCt8O7wrTCrsOXwqrCtsOUw4/Ds1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSAkc2NvcGUubGlzdC5vcmRlcnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5saXN0LmNvdW50TnVtYmVyID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7Ly/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wY291bnROID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7IC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZHN0YXR1c051bSA9ICRzY29wZS5saXN0LmFsbE9yZGVyQ291bnQyOyAvL+WQhOenjeeKtuaAgeiuouWNleeahOaVsOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQodHlwZW9mKCRzY29wZS5wY291bnROKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKCRzY29wZS5saXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtRnVuKCk7IC8v6LCD55So57uZ6K6i5Y2V6LWL5YC855qE5Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgnZGluZ2RuYScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzc1N0dSAhPSBcIjBcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0RnVuMigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAvL+WPlua2iOiuouWNleeahOW8ueahhlxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWxTaG9wRnVuKHNob3BBcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghc2hvcEFycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLyoq5bqX6ZO65YiX6KGo5ZCN5a2X5bGV56S65pS55oiQIOW6l+mTuuWQjSvlupfpk7rnsbvlnosr5Zu95a6244CB5aKe5Yqg5Zu95a625YWo5YaZ5Y+C5pWw44CB5aKe5Yqg5Zu95a6257yp5YaZ5Y+C5pWwIHN0YXJ0ICovXHJcbiAgICAgICAgICAgICAgICBzaG9wQXJyLmZvckVhY2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Zu95a6257yp5YaZ6L2s5o2i5YWo5YaZ44CCVGhlbWVJZOaYr3Nob3BlZeeahOWbveWutjtNYXJrZXRwbGFjZVVybOaYr2xhemFkYeeahOWbveWutlxyXG4gICAgICAgICAgICAgICAgICAgIGUuY291bnRyeWZ1bGxOYW1lID0gcmVwbGFjZUNvdW50cnkoZS50eXBlID09ICdzaG9wZWUnID8gZS5UaGVtZUlkIDogZS50eXBlID09ICdMYXphZGEnID8gZS5NYXJrZXRwbGFjZVVybCA6ICcnKS5mdWxsTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlupfpk7rlkI0r5bqX6ZO657G75Z6LK+WbveWutlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5yTkFNRSA9IGAke2UubmFtZX0gLSAke2UudHlwZS5yZXBsYWNlKGUudHlwZVswXSwgZS50eXBlWzBdLnRvVXBwZXJDYXNlKCkpfSAke2UuY291bnRyeWZ1bGxOYW1lID8gJy0nIDogJyd9ICR7ZS5jb3VudHJ5ZnVsbE5hbWV9YDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnJOQU1FID0gZS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyDlm73lrrbnvKnlhpljb2RlKOWkp+WGmSkt54mp5rWB5qih5Z2X5Lyg6YCS5Zu95a626ZyA6KaBXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ckxvZ2lzdGljQ291bnRyeSA9IChlLlRoZW1lSWQgfHwgZS5NYXJrZXRwbGFjZVVybCkgPyAoZS50eXBlID09ICdzaG9wZWUnID8gZS5UaGVtZUlkIDogZS50eXBlID09ICdMYXphZGEnID8gZS5NYXJrZXRwbGFjZVVybCA6ICcnKSA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJMb2dpc3RpY0NvdW50cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5sb2dpc3RpY3NDb3VudHJ5ID0gY3VyTG9naXN0aWNDb3VudHJ5LnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5sb2dpc3RpY3NDb3VudHJ5ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGUubG9naXN0aWNzQ291bnRyeSA9IChlLlRoZW1lSWQgfHwgZS5NYXJrZXRwbGFjZVVybCkgPyAoZS50eXBlID09ICdzaG9wZWUnID8gZS5UaGVtZUlkIDogZS50eXBlID09ICdMYXphZGEnID8gZS5NYXJrZXRwbGFjZVVybCA6ICcnKS50b1VwcGVyQ2FzZSgpIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6LSn5biB5Luj56CBXHJcbiAgICAgICAgICAgICAgICAgICAgZS5jdXJyZW5jeUNvZGUgPSByZXBsYWNlQ291bnRyeShlLnR5cGUgPT0gJ3Nob3BlZScgPyBlLlRoZW1lSWQgOiBlLnR5cGUgPT0gJ0xhemFkYScgPyBlLk1hcmtldHBsYWNlVXJsIDogJycpLmN1cnJlbmN5Q29kZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3BzID0gc2hvcEFycjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVwbGFjZUNvdW50cnkocGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZnVsbE5hbWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW5jeUNvZGUgPSAnJztcclxuICAgICAgICAgICAgICAgIGlmICgvc2cvaS50ZXN0KHBhcmFtcykpIHtcclxuICAgICAgICAgICAgICAgICAgICBmdWxsTmFtZSA9ICdTaW5nYXBvcmUnLCBjdXJyZW5jeUNvZGUgPSAnU0dEJ1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvbXkvaS50ZXN0KHBhcmFtcykpIHtcclxuICAgICAgICAgICAgICAgICAgICBmdWxsTmFtZSA9ICdNYWxheXNpYScsIGN1cnJlbmN5Q29kZSA9ICdNWVInXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9pZC9pLnRlc3QocGFyYW1zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxOYW1lID0gJ0luZG9uZXNpYScsIGN1cnJlbmN5Q29kZSA9ICdJRFInXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC90aC9pLnRlc3QocGFyYW1zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxOYW1lID0gJ1RoYWlsYW5kJywgY3VycmVuY3lDb2RlID0gJ1RIQidcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL3BoL2kudGVzdChwYXJhbXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnVsbE5hbWUgPSAnUGhpbGlwcGluZXMnLCBjdXJyZW5jeUNvZGUgPSAnUEhQJ1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvdm4vaS50ZXN0KHBhcmFtcykpIHtcclxuICAgICAgICAgICAgICAgICAgICBmdWxsTmFtZSA9ICdWaWV0bmFtJywgY3VycmVuY3lDb2RlID0gJ1ZORCdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB7ZnVsbE5hbWUsIGN1cnJlbmN5Q29kZX07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/liIbpobVcclxuICAgICAgICAgICAgZnVuY3Rpb24gaW1wb3J0RnVuKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKFwiLnBhZ2luYXRpb24tZGVtbzFcIikuanFQYWdpbmF0b3Ioe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnRzOiAkc2NvcGUucGNvdW50TiwgLy/orr7nva7liIbpobXnmoTmgLvmnaHnm67mlbBcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogJCgnI2RjbC1zZWwnKS52YWwoKSAtIDAsIC8v6K6+572u5q+P5LiA6aG155qE5p2h55uu5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVBhZ2VzOiA1LFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdDogJzxsaSBjbGFzcz1cImZpcnN0XCI+PGEgY2xhc3M9XCJwcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mbHQmbHQ7PFxcL2E+PFxcL2xpPicsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldjogJzxsaSBjbGFzcz1cInByZXZcIj48YSBjbGFzcz1cInByZXZcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPiZsdDs8XFwvYT48XFwvbGk+JyxcclxuICAgICAgICAgICAgICAgICAgICBuZXh0OiAnPGxpIGNsYXNzPVwibmV4dFwiPjxhIGNsYXNzPVwibmV4dFwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmd0OzxcXC9hPjxcXC9saT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3Q6ICc8bGkgY2xhc3M9XCJsYXN0XCI+PGEgY2xhc3M9XCJwcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mZ3QmZ3Q7PFxcL2E+PFxcL2xpPicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogJzxsaSBjbGFzcz1cInBhZ2VcIj48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPnt7cGFnZX19PFxcL2E+PFxcL2xpPicsXHJcbiAgICAgICAgICAgICAgICAgICAgb25QYWdlQ2hhbmdlOiBmdW5jdGlvbiAobiwgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0eXBlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnaW5pdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/orqnlvoXlpITnkIblhajpgInmjInpkq7nva7kuLrpnZ7pgInkuK3nirbmgIFcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNob3dMaXN0ID0gJCgnI2RjbC1zZWwnKS52YWwoKSAtIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5U3RvcmVzVGltZSA9ICQoJyN5LW9yZC1zZGF0ZScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeVN0b3JlZVRpbWUgPSAkKCcjeS1vcmQtZWRhdGUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNqc1RpbWUgPSAkKCcjY2otc3RpbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNqZVRpbWUgPSAkKCcjY2otZXRpbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHlTdG9yZU5hbWUgPSAkLnRyaW0oJCgnI3ktcHJvLW5hbWUnKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjalN0b3JlTmFtZSA9ICQudHJpbSgkKCcjY2otcHJvLW5hbWUnKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiZXJOYW1lID0gJC50cmltKCQoJy5idXllci1pbnAnKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2hpbnBWYWwgPSAkKCcub3JkLXNlYXJjaC1pbnAnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yZFR5cGUgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy50eXBlLXNlbCcpLnZhbCgpID09ICdBbGwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRUeXBlID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJCgnLnR5cGUtc2VsJykudmFsKCkgPT0gJ1Nob3BpZnkgSW1wb3J0ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRUeXBlID0gJzInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoJy50eXBlLXNlbCcpLnZhbCgpID09ICdFeGNlbCBJbXBvcnRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZFR5cGUgPSAnMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yRGF0YS5kYXRhLnBhZ2UgPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvckRhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9yRGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUubGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSAkc2NvcGUubGlzdC5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGNvdW50TiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AucmVtb3ZlTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RTakZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dpc1JlbWFyaygkc2NvcGUubGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v5YiG6aG16YCJ5oup5qGG55qE5p+l6K+i5LqL5Lu2XHJcbiAgICAgICAgICAgICQoJyNkY2wtc2VsJykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8v6K6p5b6F5aSE55CG5YWo6YCJ5oyJ6ZKu572u5Li66Z2e6YCJ5Lit54q25oCBXHJcbiAgICAgICAgICAgICAgICAkKCcjei1kY2wtb3JkIC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNob3dMaXN0ID0gJCh0aGlzKS52YWwoKSAtIDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJChcIi5wYWdpbmF0aW9uLWRlbW8xXCIpLmpxUGFnaW5hdG9yKHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50czogJHNjb3BlLnBjb3VudE4sIC8v6K6+572u5YiG6aG155qE5oC75p2h55uu5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6IHNob3dMaXN0LCAvL+iuvue9ruavj+S4gOmhteeahOadoeebruaVsFxyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVQYWdlczogNSwgLy/mmL7npLrlpJrlsJHpobVcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVDbGFzczogJ2FjdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3Q6ICc8bGkgY2xhc3M9XCJmaXJzdFwiPjxhIGNsYXNzPVwicHJldlwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmx0Jmx0OzxcXC9hPjxcXC9saT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXY6ICc8bGkgY2xhc3M9XCJwcmV2XCI+PGEgY2xhc3M9XCJwcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mbHQ7PFxcL2E+PFxcL2xpPicsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dDogJzxsaSBjbGFzcz1cIm5leHRcIj48YSBjbGFzcz1cIm5leHRcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPiZndDs8XFwvYT48XFwvbGk+JyxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0OiAnPGxpIGNsYXNzPVwibGFzdFwiPjxhIGNsYXNzPVwicHJldlwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmd0Jmd0OzxcXC9hPjxcXC9saT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6ICc8bGkgY2xhc3M9XCJwYWdlXCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj57e3BhZ2V9fTxcXC9hPjxcXC9saT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uUGFnZUNoYW5nZTogZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy50eXBlLXNlbCcpLnZhbCgpID09ICdBbGwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRUeXBlID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJCgnLnR5cGUtc2VsJykudmFsKCkgPT0gJ1Nob3BpZnkgSW1wb3J0ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRUeXBlID0gJzInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoJy50eXBlLXNlbCcpLnZhbCgpID09ICdFeGNlbCBJbXBvcnRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZFR5cGUgPSAnMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yRGF0YS5kYXRhLnBhZ2UgPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvckRhdGEuZGF0YS5saW1pdCA9IHNob3dMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvckRhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9yRGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvckRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkob3JEYXRhKSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcXVlcnlPcmRlcnMnLCBKU09OLnN0cmluZ2lmeShvckRhdGEpLCBkY2xzRnVuLCBkY2xlRnVuKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsc0Z1bihkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YS5yZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhsaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9ICRzY29wZS5saXN0Lm9yZGVyc0xpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9ICRzY29wZS5saXN0LmNvdW50TnVtYmVyOyAvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKCRzY29wZS5saXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsZUZ1bigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvL+aMieW6l+mTuuaQnOe0ouiuouWNlVxyXG4gICAgICAgICAgICAkc2NvcGUuc3RvcmVDaGFuZ2VGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuc3RvcmVOYW1lKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdGpGdW4ob3JEYXRhKVxyXG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuc3RvcmVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEuc3RvcmVOdW1iZXIgPSAnJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEuc3RvcmVOdW1iZXIgPSAkc2NvcGUuc3RvcmVOYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEuc3RvcmFnZSA9ICRzY29wZS5zdG9yYWdlO1xyXG4gICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9yRGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkob3JEYXRhKSlcclxuXHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+iuqeW+heWkhOeQhuWFqOmAieaMiemSrue9ruS4uumdnumAieS4reeKtuaAgVxyXG4gICAgICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhLnJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdDEgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IEpTT04ucGFyc2UobGlzdDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSAkc2NvcGUubGlzdC5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKCRzY29wZS5saXN0KTtcclxuICAgICAgICAgICAgICAgICAgICBpbXBvcnRGdW4oKTsgLy/liIbpobXlh73mlbBcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5oyJ5p2h5Lu25YiG6aG1IOS4i1xyXG4gICAgICAgICAgICAkKCcuaXAtanVtcC1idG4yJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdFZhbCA9IDE7IC8v5aSN6YCJ5qGG55qE5YC8XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RWYWwgPSAkKCcuaXAtc2VsZWN0LW51bTInKS52YWwoKSAtIDA7XHJcbiAgICAgICAgICAgICAgICAvLyBhbGVydChzZWxlY3RWYWwpO1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGlucFZhbCA9IDA7Ly/lrZjlgqjovpPlhaXmoYbnmoTlgLxcclxuICAgICAgICAgICAgICAgIHZhciBpbnBWYWwgPSAkKCcuaW5wLW51bS1nbzInKS52YWwoKSAtIDA7IC8v6L6T5YWl5qGGIOmcgOimgei3s+WIsOesrOWHoOmhtVxyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoaW5wVmFsKVxyXG4gICAgICAgICAgICAgICAgaWYgKGlucFZhbCA9PSAnJyB8fCBpbnBWYWwgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYWdlIGRvZXMgbm90IGV4aXN0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudE4gPSBNYXRoLmNlaWwoJHNjb3BlLnBjb3VudE4gLyBzZWxlY3RWYWwpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoY291bnROKVxyXG4gICAgICAgICAgICAgICAgaWYgKGlucFZhbCA+IGNvdW50Tikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIGlucHV0IG51bWJlciBsZXNzIHRoYW4gcGFnZSBhbW91bnQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/orqnlhajpgInmjInpkq7nva7kuLrpnZ7pgInkuK3nirbmgIFcclxuICAgICAgICAgICAgICAgICQoJy56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgJChcIi5wYWdpbmF0aW9uLWRlbW8xXCIpLmpxUGFnaW5hdG9yKHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50czogJHNjb3BlLnBjb3VudE4sIC8v6K6+572u5YiG6aG155qE5oC75p2h55uu5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6IHNlbGVjdFZhbCwgLy/orr7nva7mr4/kuIDpobXnmoTmnaHnm67mlbBcclxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlUGFnZXM6IDUsIC8v5pi+56S65aSa5bCR6aG1XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IGlucFZhbCxcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVDbGFzczogJ2FjdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3Q6ICc8bGkgY2xhc3M9XCJmaXJzdFwiPjxhIGNsYXNzPVwicHJldlwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmx0Jmx0OzxcXC9hPjxcXC9saT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXY6ICc8bGkgY2xhc3M9XCJwcmV2XCI+PGEgY2xhc3M9XCJwcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mbHQ7PFxcL2E+PFxcL2xpPicsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dDogJzxsaSBjbGFzcz1cIm5leHRcIj48YSBjbGFzcz1cIm5leHRcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPiZndDs8XFwvYT48XFwvbGk+JyxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0OiAnPGxpIGNsYXNzPVwibGFzdFwiPjxhIGNsYXNzPVwicHJldlwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmd0Jmd0OzxcXC9hPjxcXC9saT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6ICc8bGkgY2xhc3M9XCJwYWdlXCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj57e3BhZ2V9fTxcXC9hPjxcXC9saT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uUGFnZUNoYW5nZTogZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGpGdW4ob3JEYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvckRhdGEuZGF0YS5wYWdlID0gbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShvckRhdGEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0MSA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IEpTT04ucGFyc2UobGlzdDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSAkc2NvcGUubGlzdC5vcmRlcnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9ICRzY29wZS5saXN0LmNvdW50TnVtYmVyOyAvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKCRzY29wZS5saXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy/nlKjorqLljZXlj7fmkJzntKIgb3JkZXJOdW1iZXJcclxuICAgICAgICAgICAgJHNjb3BlLnNlYXJjaEtleWRvd24gPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRudW1TZWFyY2goKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUub3JkbnVtU2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QgPSBbXVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIHRqRnVuKG9yRGF0YSlcclxuICAgICAgICAgICAgICAgIG9yRGF0YS5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3JEYXRhLmRhdGEpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvckRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KG9yRGF0YSkpXHJcbiAgICAgICAgICAgICAgICAvLyBhbGVydChpbnBWYWwpXHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkY2xzRnVuKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+iuqeW+heWkhOeQhuWFqOmAieaMiemSrue9ruS4uumdnumAieS4reeKtuaAgVxyXG4gICAgICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhLnJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdDEgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IEpTT04ucGFyc2UobGlzdDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9ICRzY29wZS5saXN0LmNvdW50TnVtYmVyOyAvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGNvdW50TiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbG9naXNSZW1hcmsoJHNjb3BlLmxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS56Y2hlY2tlZF9hbGwgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBmdW5jdGlvbiBwc2Vsd2xGdW4oKSB7XHJcbiAgICAgICAgICAgIC8vICAgJCgnLmRjbC1vcmQgLm9yZGVyLWRldGFpbCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKCQodGhpcykuY2hpbGRyZW4oJy5kY2wtb3JkLXdsdGQnKS5jaGlsZHJlbignLmRjbC1vcmQtc2Vsd2wnKS52YWwoKSA9PSAnUGxlYXNlIHNlbGVjdCcpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgJCh0aGlzKS5jaGlsZHJlbignLmRjbC1vcmQtd2x0ZCcpLmNoaWxkcmVuKCcuZGNsLW9yZC1zZWx3bCcpLmNzcygnYm9yZGVyJywgJzFweCBzb2xpZCAjZjg4ZjI5Jyk7XHJcbiAgICAgICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcuZGNsLW9yZC13bHRkJykuY2hpbGRyZW4oJy5kY2wtb3JkLXNlbHdsJykuY3NzKCdib3JkZXInLCAnMXB4IHNvbGlkICNlY2VjZWMnKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gICB9KVxyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAvL+e7meW3puS+p+eahOWvvOiIqua3u+WKoOa7muWKqOS6i+S7tlxyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubGVmdC1uYXYnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAnODBweCdcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPj0gNTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmJhY2std3JhcCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICc4MHB4J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5iYWNrLXdyYXAnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAnMTMwcHgnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcubGVmdC1uYXYnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAnODBweCdcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8v6auY57qn5pCc57Si6YOo5YiG55qE5p+l6K+iXHJcbiAgICAgICAgICAgICQoJyN0ai1zZWFyY2gtYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdGpGdW4ob3JEYXRhKVxyXG4gICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9yRGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkob3JEYXRhKSlcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcXVlcnlPcmRlcnMnLCBKU09OLnN0cmluZ2lmeShvckRhdGEpLCBkY2xzRnVuLCBkY2xlRnVuKVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v6K6p5b6F5aSE55CG5YWo6YCJ5oyJ6ZKu572u5Li66Z2e6YCJ5Lit54q25oCBXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IEpTT04ucGFyc2UobGlzdDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wY291bnROID0gJHNjb3BlLmxpc3QuY291bnROdW1iZXI7IC8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoJHNjb3BlLnBjb3VudE4pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucmVtb3ZlTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RTakZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsb2dpc1JlbWFyaygkc2NvcGUubGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0RnVuKCk7IC8v5YiG6aG15Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnpjaGVja2VkX2FsbCA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvL+mrmOe6p+aQnOe0oumHjOmdoueahOaMieiuouWNleexu+Wei+aQnOe0olxyXG4gICAgICAgICAgICAkKCcudHlwZS1zZWwnKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdGpGdW4ob3JEYXRhKVxyXG4gICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9yRGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkob3JEYXRhKSlcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcXVlcnlPcmRlcnMnLCBKU09OLnN0cmluZ2lmeShvckRhdGEpLCBkY2xzRnVuLCBkY2xlRnVuKVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v6K6p5b6F5aSE55CG5YWo6YCJ5oyJ6ZKu572u5Li66Z2e6YCJ5Lit54q25oCBXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3otZGNsLW9yZCAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QxID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IEpTT04ucGFyc2UobGlzdDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9ICRzY29wZS5saXN0LmNvdW50TnVtYmVyOyAvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCRzY29wZS5wY291bnROKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGNvdW50TiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90U2pGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbG9naXNSZW1hcmsoJHNjb3BlLmxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbGVGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvL2Nq5ZWG5ZOB5ZCN5a2X6Lez6L2s5YiwY2ror6bmg4XpobVcclxuICAgICAgICAgICAgJHNjb3BlLmNqZGV0YWlsaHJlZiA9IGZ1bmN0aW9uIChvcmRpdGVtLCBzcGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZCA9IHNwaXRlbS5jalByb2R1Y3RJZDtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdwcm9kdWN0LWRldGFpbC5odG1sP2lkPScgKyBpZClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+WVhuWTgeWQjeWtl+i3s+i9rOWuouaIt+WQjuWPsFxyXG4gICAgICAgICAgICAkc2NvcGUuaHJlZkZ1biA9IGZ1bmN0aW9uIChvcmRpdGVtLCBzcGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9yZGl0ZW0uU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgICAgIHZhciBzdG9yZU5hbWUgPSBvcmRpdGVtLlNUT1JFX05BTUU7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzcGl0ZW0ucHJvZHVjdF9pZClcclxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0SWQgPSBzcGl0ZW0ucHJvZHVjdF9pZDtcclxuICAgICAgICAgICAgICAgIGlmIChzdG9yZU5hbWUgPT0gXCJFeGNlbCBJbXBvcnRlZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly8nICsgc3RvcmVOYW1lICsgJy5teXNob3BpZnkuY29tL2FkbWluL3Byb2R1Y3RzLycgKyBwcm9kdWN0SWQpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZE5vdFNqRnVuKCkge1xyXG4gICAgICAgICAgICAgICAgZHNwLmFkZE5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCwge3dpZHRoOiAnMTAwJSd9LHRydWUpXHJcbiAgICAgICAgICAgICAgICAkKCcuZGVhbC1vcmRlcnMnKS5jc3MoJ21pbi1oZWlnaHQnLCAkKCcuY2otbm9kYXRhLXBpYycpLmhlaWdodCgpICsgNTApXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vY2rlvIDlp4vml6XmnJ/mkJzntKJcclxuICAgICAgICAgICAgJChcIiNjai1zdGltZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2plbmR0aW1lID0gJChcIiNjai1zdGltZVwiKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kdGltZTIgPSAkKFwiI2NqLXN0aW1lXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmR0aW1lMiAhPSBjamVuZHRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAyMTAsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRqRnVuKG9yRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9xdWVyeU9yZGVycycsIEpTT04uc3RyaW5naWZ5KG9yRGF0YSksIGRjbHNGdW4sIGRjbGVGdW4pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkY2xzRnVuKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6K6p5b6F5aSE55CG5YWo6YCJ5oyJ6ZKu572u5Li66Z2e6YCJ5Lit54q25oCBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjei1kY2wtb3JkIC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhLnJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0MSA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdCA9IEpTT04ucGFyc2UobGlzdDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBjb3VudE4gPSAkc2NvcGUubGlzdC5jb3VudE51bWJlcjsgLy/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGNvdW50TiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AucmVtb3ZlTm9kYXRhUGljKCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RTakZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dpc1JlbWFyaygkc2NvcGUubGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRGdW4oKTsgLy/liIbpobXlh73mlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsZUZ1bigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAxMDApXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vY2rnu5PmnZ/ml6XmnJ/mkJzntKJcclxuICAgICAgICAgICAgJChcIiNjai1ldGltZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2plbmR0aW1lID0gJChcIiNjai1ldGltZVwiKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kdGltZTIgPSAkKFwiI2NqLWV0aW1lXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmR0aW1lMiAhPSBjamVuZHRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAyMTAsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGpGdW4ob3JEYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvckRhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9yRGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3F1ZXJ5T3JkZXJzJywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZGNsc0Z1biwgZGNsZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/orqnlvoXlpITnkIblhajpgInmjInpkq7nva7kuLrpnZ7pgInkuK3nirbmgIFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyN6LWRjbC1vcmQgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdDEgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBKU09OLnBhcnNlKGxpc3QxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5saXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSAkc2NvcGUubGlzdC5vcmRlcnNMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9ICRzY29wZS5saXN0LmNvdW50TnVtYmVyOyAvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wY291bnROID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2lzUmVtYXJrKCRzY29wZS5saXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydEZ1bigpOyAvL+WIhumhteWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkY2xlRnVuKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDEwMClcclxuICAgICAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2d4UGFnZVNpemUgPSAnNTAnO1xyXG4gICAgICAgICAgICAkc2NvcGUuY2d4UGFnZU51bSA9ICcxJztcclxuICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpc09wZW5EcmFmdCcpKSB7XHJcbiAgICAgICAgICAgICAgICBvcGVuREZ1bigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOiNieeov+eusSDlvLnmoYZcclxuICAgICAgICAgICAgJHNjb3BlLmVycm9yQXJyID0gW107XHJcbiAgICAgICAgICAgICRzY29wZS5vcGVuRHJhZnRGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNPcGVuRHJhZnQnLCAxKTtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5tZXNPcmRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS5kcmFmdEZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoJy5kcmFmdC13cmFwJykuY3NzKHtkaXNwbGF5OiAnYmxvY2snfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuZHJhZnQtd3JhcCB0YWJsZSB0aGVhZCB0ciB0aCBpbWcnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmRyYWZ0LXdyYXAgdGFibGUgdGJvZHkgdHIgdGQgaW1nJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL2dldEVycm9yQW5hbHlzaXNPcmRlcicsIEpTT04uc3RyaW5naWZ5KG9yRGF0YSksIGNvbiwgZXJyKVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbihyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXJyID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc09yZEluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5saXN0QXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2UgPSBKU09OLnBhcnNlKCRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUubGlzdEFycltpXS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2UubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNPcmRJbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RBcnJbaV0ubWVzc2FnZVtqXS5pbmRleCA9ICRzY29wZS5tZXNPcmRJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUubGlzdEFycik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5saXN0QXJyLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ub0RhdGFGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWZ0LXdyYXAgdGFibGUgdGJvZHkgdHIgdGQgaW5wdXQnKS5mb2N1cyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7YmFja2dyb3VuZENvbG9yOiAnI2NjYyd9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5kcmFmdC13cmFwIHRhYmxlIHRib2R5IHRyIHRkIGlucHV0JykuYmx1cihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7YmFja2dyb3VuZENvbG9yOiAnI2ZmZid9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnIocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9EYXRhRm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/nrZvpgIlcclxuICAgICAgICAgICAgJHNjb3BlLnNob3dTa3VGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2t1RmlsdGVyRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2ZMZW50aCA9ICRzY29wZS5saXN0QXJyLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5za3VMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNmTGVudGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLmxpc3RBcnJbaV0ubWVzc2FnZS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNrdUxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCAkc2NvcGUuc2t1TGlzdC5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUubGlzdEFycltpXS5tZXNzYWdlW2pdLnNrdSA9PSAkc2NvcGUuc2t1TGlzdFtrXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT0gJHNjb3BlLnNrdUxpc3QubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2t1TGlzdC5wdXNoKCRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2Vbal0uc2t1KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5za3VMaXN0LnB1c2goJHNjb3BlLmxpc3RBcnJbaV0ubWVzc2FnZVtqXS5za3UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlRlNrdUZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5za3VGaWx0ZXJGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/pgInkuK3lkI7nrZvpgIlcclxuICAgICAgICAgICAgJHNjb3BlLnN1cmVGaWxTa3VGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2t1RmlsdGVyRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNrdUFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNrdS1kaXYgLnpjaGVja2JveCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBza3VBcnIucHVzaCgkKHRoaXMpLnNpYmxpbmdzKCcuaXRlbS1za3UnKS50ZXh0KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhza3VBcnIpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUubGlzdEFycilcclxuICAgICAgICAgICAgICAgIHZhciBzZkxlbnRoID0gJHNjb3BlLmxpc3RBcnIubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlckxlbiA9IHNrdUFyci5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubWVzT3JkSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZkxlbnRoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdGU9W107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUubGlzdEFycltpXS5tZXNzYWdlLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZmlsdGVyTGVuOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUubGlzdEFycltpXS5tZXNzYWdlW2pdLnNrdSA9PSBza3VBcnJba10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdEFycltpXS5tZXNzYWdlW2pdLmlzU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNPcmRJbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2Vbal0uaW5kZXggPSAkc2NvcGUubWVzT3JkSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2Vbal0uaXNTaG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUubGlzdEFycilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcuc2t1LWRpdicpLm9uKCdjbGljaycsICcuemNoZWNrYm94JywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gb3BlbkRGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuZHJhZnQtd3JhcCcpLmNzcyh7ZGlzcGxheTogJ2Jsb2NrJ30pO1xyXG4gICAgICAgICAgICAgICAgJCgnLmRyYWZ0LXdyYXAgdGFibGUgdGhlYWQgdHIgdGggaW1nJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgICQoJy5kcmFmdC13cmFwIHRhYmxlIHRib2R5IHRyIHRkIGltZycpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNneERhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIGNneERhdGEucGFnZVNpemUgPSAkc2NvcGUuY2d4UGFnZVNpemU7XHJcbiAgICAgICAgICAgICAgICBjZ3hEYXRhLnBhZ2VOdW0gPSAkc2NvcGUuY2d4UGFnZU51bTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGNneERhdGEpKVxyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9nZXRFcnJvckFuYWx5c2lzT3JkZXInLCBKU09OLnN0cmluZ2lmeShjZ3hEYXRhKSwgY29uLCBlcnIpXHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY29uKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2d4VG90YWwgPSByZXMuZGF0YS5jb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuY2d4VG90YWwpXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXJyID0gcmVzLmRhdGEubGlzdDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2ZMZW50aCA9ICRzY29wZS5saXN0QXJyLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2t1TGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNPcmRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZkxlbnRoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RBcnJbaV0ubWVzc2FnZSA9ICRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2UucmVwbGFjZSgvW1xcclxcblxcdF0vZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2UgPSBKU09OLnBhcnNlKCRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2UubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2Vbal0uaXNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNrdUxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgJHNjb3BlLnNrdUxpc3QubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2Vbal0uc2t1ID09ICRzY29wZS5za3VMaXN0W2tdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PSAkc2NvcGUuc2t1TGlzdC5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2t1TGlzdC5wdXNoKCRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2Vbal0uc2t1KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2t1TGlzdC5wdXNoKCRzY29wZS5saXN0QXJyW2ldLm1lc3NhZ2Vbal0uc2t1KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc09yZEluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdEFycltpXS5tZXNzYWdlW2pdLmluZGV4ID0gJHNjb3BlLm1lc09yZEluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm1lc09yZEluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5saXN0QXJyKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5za3VMaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmxpc3RBcnIubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vRGF0YUZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2d4RnlGdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZnQtd3JhcCB0YWJsZSB0Ym9keSB0ciB0ZCBpbnB1dCcpLmZvY3VzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHtiYWNrZ3JvdW5kQ29sb3I6ICcjY2NjJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZnQtd3JhcCB0YWJsZSB0Ym9keSB0ciB0ZCBpbnB1dCcpLmJsdXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe2JhY2tncm91bmRDb2xvcjogJyNmZmYnfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycihyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ub0RhdGFGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2d4RnlGdW4oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNneFRvdGFsIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQoXCIuY2d4LXBhZy1kb21cIikuanFQYWdpbmF0b3Ioe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnRzOiAkc2NvcGUuY2d4VG90YWwgLSAwLCAvL+iuvue9ruWIhumhteeahOaAu+adoeebruaVsFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAkc2NvcGUuY2d4UGFnZVNpemUgLSAwLCAvL+iuvue9ruavj+S4gOmhteeahOadoeebruaVsFxyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVQYWdlczogNSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogJHNjb3BlLmNneFBhZ2VOdW0gLSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdDogJzxsaSBjbGFzcz1cImZpcnN0XCI+PGEgY2xhc3M9XCJwcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mbHQmbHQ7PFxcL2E+PFxcL2xpPicsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldjogJzxsaSBjbGFzcz1cInByZXZcIj48YSBjbGFzcz1cInByZXZcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPiZsdDs8XFwvYT48XFwvbGk+JyxcclxuICAgICAgICAgICAgICAgICAgICBuZXh0OiAnPGxpIGNsYXNzPVwibmV4dFwiPjxhIGNsYXNzPVwibmV4dFwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmd0OzxcXC9hPjxcXC9saT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3Q6ICc8bGkgY2xhc3M9XCJsYXN0XCI+PGEgY2xhc3M9XCJwcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mZ3QmZ3Q7PFxcL2E+PFxcL2xpPicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogJzxsaSBjbGFzcz1cInBhZ2VcIj48YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPnt7cGFnZX19PFxcL2E+PFxcL2xpPicsXHJcbiAgICAgICAgICAgICAgICAgICAgb25QYWdlQ2hhbmdlOiBmdW5jdGlvbiAobiwgdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0eXBlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnaW5pdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNneFBhZ2VOdW0gPSBuICsgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5ERnVuKClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNneENoYW5nZUZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jZ3hQYWdlTnVtID0gJzEnO1xyXG4gICAgICAgICAgICAgICAgb3BlbkRGdW4oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5jZ3hHb0Z1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYWdlQ291bnQgPSBNYXRoLmNlaWwoJHNjb3BlLmNneFRvdGFsIC8gJHNjb3BlLmNneFBhZ2VOdW0pXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlQ291bnQpXHJcbiAgICAgICAgICAgICAgICBpZiAocGFnZUNvdW50IDwgJHNjb3BlLmNneFBhZ2VOdW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBpbnB1dCBudW1iZXIgbGVzcyB0aGFuIHBhZ2UgYW1vdW50LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9wZW5ERnVuKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZHJhZnRTZWxlY3ROdW0gPSAwO1xyXG4gICAgICAgICAgICAvLyDpgInkuK3kuIDmnaFcclxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdEl0ZW1GdW4gPSBmdW5jdGlvbiAoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgkZXZlbnQudGFyZ2V0KS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCRldmVudC50YXJnZXQpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJhZnRTZWxlY3ROdW0rKztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZHJhZnRTZWxlY3ROdW0gPT0gJCgnLmRyYWZ0LWJveCAuc2VsZWN0QnRuIC54dWhhby1zdHknKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWZ0LWJveCAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKCRldmVudC50YXJnZXQpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJGV2ZW50LnRhcmdldCkuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICBkcmFmdFNlbGVjdE51bS0tO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkcmFmdFNlbGVjdE51bSAhPSAkKCcuZHJhZnQtYm94IC5zZWxlY3RCdG4gLnh1aGFvLXN0eScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZnQtYm94IC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRyYWZ0U2VsZWN0TnVtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g5YWo6YCJXHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RBbGxGdW4gPSBmdW5jdGlvbiAoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCgkZXZlbnQudGFyZ2V0KS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCRldmVudC50YXJnZXQpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJhZnRTZWxlY3ROdW0gPSAkKCcuZHJhZnQtYm94IC5zZWxlY3RCdG4gLnh1aGFvLXN0eScpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZnQtYm94IC5zZWxlY3RCdG4gLnh1aGFvLXN0eScpLmNoaWxkcmVuKCdpbWcnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCRldmVudC50YXJnZXQpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJhZnRTZWxlY3ROdW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5kcmFmdC1ib3ggLnNlbGVjdEJ0biAueHVoYW8tc3R5JykuY2hpbGRyZW4oJ2ltZycpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDYW5jZWwg5oyJ6ZKuXHJcbiAgICAgICAgICAgICRzY29wZS5kcmFmdENhbmNlbEZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpc09wZW5EcmFmdCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmRyYWZ0LXdyYXAnKS5jc3Moe2Rpc3BsYXk6ICdub25lJ30pO1xyXG4gICAgICAgICAgICAgICAgJCgnLmRyYWZ0LXdyYXAgdGFibGUgdGhlYWQgdHIgdGggaW1nJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICAgICQoJy5kcmFmdC13cmFwIHRhYmxlIHRib2R5IHRyIHRkIGltZycpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgICAgIHZhciBzaG93TGlzdCA9ICQoJyNkY2wtc2VsJykudmFsKCkgLSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdGpGdW4ob3JEYXRhKVxyXG4gICAgICAgICAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvcXVlcnlPcmRlcnMnLCBKU09OLnN0cmluZ2lmeShvckRhdGEpLCBkY2xzRnVuLCBkY2xlRnVuKVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRjbHNGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdDEgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0ID0gSlNPTi5wYXJzZShsaXN0MSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gJHNjb3BlLmxpc3Qub3JkZXJzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGNvdW50TiA9ICRzY29wZS5saXN0LmNvdW50TnVtYmVyOyAvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxheWVyLm1zZygnUGxlYXNlIGNoZWNrIHRoZSBmYWlsZWQgb25lcyBvbiB0aGUgRHJhZnQuJylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBjb3VudE4gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE5vdFNqRnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcmRzdGF0dXNOdW0gPSAkc2NvcGUubGlzdC5hbGxPcmRlckNvdW50MjsgLy/lkITnp43nirbmgIHorqLljZXnmoTmlbDph49cclxuICAgICAgICAgICAgICAgICAgICBsb2dpc1JlbWFyaygkc2NvcGUubGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0RnVuKCk7IC8v5YiG6aG15Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtRnVuKCk7IC8v6LCD55So57uZ6K6i5Y2V6LWL5YC855qE5Ye95pWwXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGNsZUZ1bigpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHN1Ym1pdCDmjInpkq5cclxuICAgICAgICAgICAgJHNjb3BlLnN1Ym1pdExpc3QgPSBbXTtcclxuICAgICAgICAgICAgJHNjb3BlLmRyYWZ0U3VibWl0RnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRyYWZ0U2VsZWN0TnVtID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJtaXREcmFmdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cklEID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyTWVzc2FnZSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgW1wib3JkZXJudW1iZXJcIiwgXCJza3VcIiwgXCJxdWFudGl0eVwiLCBcInByb2R1Y3R0aXRsZVwiLCBcImN1c3RvbWVybmFtZVwiLCBcImFkZHJlc3MxXCIsIFwiYWRkcmVzczJcIiwgXCJjaXR5XCIsIFwicHJvdmluY2VcIiwgXCJ6aXBcIiwgXCJjb3VudHJ5XCIsIFwic2hpcHBpbmdwaG9uZW51bWJlclwiLCBcInRheG51bWJlclwiLCBcInNoaXBzdGF0aW9uaWRcIiwgXCJsb2dpc3RpY3NUeXBlXCIsIFwiZGF0YXNvdXJjZVwiLCBcInNoaXBwaW5nTWV0aG9kSWRcIiwgXCJwcm9kdWN0SWRcIiwgXCJzYWxlc29yZGVycm93aWRcIiwgXCJ3YXJlaG91c2VcIiwgXCJwcmljZVwiLCBcImN1cnJlbmN5XCJdXHJcbiAgICAgICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuZHJhZnQtYm94IC56Y2hlY2tib3gnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LWlkJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmlkID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LWlkJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgT3JkZXJOdW1iZXIgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZi1vcmRlci1udW0nKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBTS1UgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZi1za3UnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBRdWFudGl0eSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmLXF1YW50aXR5JykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgUHJvZHVjdFRpdGxlID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWYtcHJvZHVjdC10aXRsZScpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEN1c3RvbWVyTmFtZSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmLWN1c3RvbWVyLW5hbWUnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQWRkcmVzczEgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZnQtYWRkcmVzczEnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRyZXNzMiA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmdC1hZGRyZXNzMicpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIENpdHkgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZnQtY2l0eScpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFByb3ZpbmNlID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LXByb3ZpbmNlJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgWklQID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LXppcCcpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIENvdW50cnkgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZnQtY291bnRyeScpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFNoaXBwUGhvbmVOdW0gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZnQtc2hvcC1waG9uZW51bScpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRheE51bWJlciA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmdC10YXgtbnVtYmVyJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRGVzY3JpYmUgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZnQtZGVzY3JpYmUnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBTaGlwc3RhdGlvbmlkID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LXNoaXBzdGF0aW9uaWQnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcmFmdExvZ2lzdGljID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LWxvZ2lzdGljdHlwZScpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFzb3VyY2UgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZGF0YXNvdXJjZS10ZCcpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoaXBwaW5nTWV0aG9kSWQgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuc2hpcHBpbmdNZXRob2RJZC10ZCcpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RJZCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5wcm9kdWN0aWQtdGQnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmljZSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5wcmljZS10ZCcpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbmN5ID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmN1cnJlbmN5LXRkJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2FsZXNvcmRlcnJvd2lkID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLnNlbGVzaWQtdGQnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3YXJlaG91c2UgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcud2FyZWhvdXNlLXRkJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhTaGlwc3RhdGlvbmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvZHVjdElkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyMW1lc3NhZ2UgPSBbT3JkZXJOdW1iZXIsIFNLVSwgUXVhbnRpdHksIFByb2R1Y3RUaXRsZSwgQ3VzdG9tZXJOYW1lLCBBZGRyZXNzMSwgQWRkcmVzczIsIENpdHksIFByb3ZpbmNlLCBaSVAsIENvdW50cnksIFNoaXBwUGhvbmVOdW0sIHRheE51bWJlciwgU2hpcHN0YXRpb25pZCwgZHJhZnRMb2dpc3RpYywgZGF0YXNvdXJjZSwgc2hpcHBpbmdNZXRob2RJZCwgcHJvZHVjdElkLCBzYWxlc29yZGVycm93aWQsIHdhcmVob3VzZSwgcHJpY2UsIGN1cnJlbmN5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRySUQucHVzaCh0cmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyTWVzc2FnZS5wdXNoKHRyMW1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0RHJhZnQuaWQgPSB0cklEO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0RHJhZnQubWVzc2FnZSA9IHRyTWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyMW1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRySUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3VibWl0RHJhZnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdWJtaXRUaXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kZWxldGVUaXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYnRuc1RpcCcpLmNzcyh7ZGlzcGxheTogJ2Jsb2NrJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS55ZXNGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCdzdWJtaXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmJ0bnNUaXAnKS5jc3Moe2Rpc3BsYXk6ICdub25lJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignb3JkZXIvb2xkT3JkZXIvcmVBbmFseXNpc09yZGVyJywgSlNPTi5zdHJpbmdpZnkoc3VibWl0RHJhZnQpLCBkcmFmdGNGdW4sIGRyYWZ0ZUZ1bilcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRyYWZ0Y0Z1bihyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdHIgPSBKU09OLnBhcnNlKHJlcy5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT0gJzIwMCcgJiYgcmVzdHIucmVzdWx0ID09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5ERnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuUHJvZHVjdE51bSA9IHJlc3RyLnRvdGFsTnVtYmVyIC0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuU3VjY2Vzc051bSA9IHJlc3RyLnN1Y2Nlc3MgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5GYWlsZWROdW0gPSByZXN0ci5ub3RoaW5nIC0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuVG90YWxOdW0gPSAkc2NvcGUuU3VjY2Vzc051bSArICRzY29wZS5GYWlsZWROdW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm9yZGVyc1RpcCcpLmNzcyh7ZGlzcGxheTogJ2Jsb2NrJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb25maXJtRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcub3JkZXJzVGlwJykuY3NzKHtkaXNwbGF5OiAnbm9uZSd9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSAhPSAnMjAwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZyhcIlN1Ym1pdCBGYWlsZWQhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRyYWZ0ZUZ1bihyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coXCJTdWJtaXQgZmFpbGVkIVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9GdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCdzdWJtaXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmJ0bnNUaXAnKS5jc3Moe2Rpc3BsYXk6ICdub25lJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCBvcmRlcnPvvIEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFNhdmUg5oyJ6ZKuXHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZHJhZnRTYXZlRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoZHJhZnRTZWxlY3ROdW0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkcmFmdFNlbGVjdE51bSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2F2ZURyYWZ0ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRySUQgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgVVVJRCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ck1lc3NhZ2VzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5kcmFmdC1ib3ggLnpjaGVja2JveCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cm1lc3NhZ2UgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmlkID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LWlkJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgT3JkZXJOdW1iZXIgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZi1vcmRlci1udW0nKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBTS1UgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZi1za3UnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBRdWFudGl0eSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmLXF1YW50aXR5JykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgUHJvZHVjdFRpdGxlID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWYtcHJvZHVjdC10aXRsZScpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEN1c3RvbWVyTmFtZSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmLWN1c3RvbWVyLW5hbWUnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1dWlkID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LXV1aWQnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRyZXNzMSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmdC1hZGRyZXNzMScpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZHJlc3MyID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LWFkZHJlc3MyJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQ2l0eSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmdC1jaXR5JykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgUHJvdmluY2UgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZnQtcHJvdmluY2UnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBaSVAgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZnQtemlwJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQ291bnRyeSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmdC1jb3VudHJ5JykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgU2hpcHBQaG9uZU51bSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmdC1zaG9wLXBob25lbnVtJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGF4TnVtYmVyID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LXRheC1udW1iZXInKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBEZXNjcmliZSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5kcmFmdC1kZXNjcmliZScpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFlZID0gJCh0aGlzKS5zaWJsaW5ncygnLnl5JykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEhIID0gJCh0aGlzKS5zaWJsaW5ncygnLmhoJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFNoaXBzdGF0aW9uaWQgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZnQtc2hpcHN0YXRpb25pZCcpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFzb3VyY2UgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZGF0YXNvdXJjZS10ZCcpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoaXBwaW5nTWV0aG9kSWQgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuc2hpcHBpbmdNZXRob2RJZC10ZCcpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RJZCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5wcm9kdWN0aWQtdGQnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmljZSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuc2libGluZ3MoJy5wcmljZS10ZCcpLmNoaWxkcmVuKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbmN5ID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmN1cnJlbmN5LXRkJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2FsZXNvcmRlcnJvd2lkID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLnNlbGVzaWQtdGQnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3YXJlaG91c2UgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcud2FyZWhvdXNlLXRkJykuY2hpbGRyZW4oJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhTaGlwc3RhdGlvbmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LXNoaXBzdGF0aW9uaWQnKS5jaGlsZHJlbignaW5wdXQnKSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cm1lc3NhZ2UuemlwID0gWklQO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLmVycm9yID0gRGVzY3JpYmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cm1lc3NhZ2UuY3VzdG9tZXJuYW1lID0gQ3VzdG9tZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLmFkZHJlc3MxID0gQWRkcmVzczE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cm1lc3NhZ2UuYWRkcmVzczIgPSBBZGRyZXNzMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRybWVzc2FnZS5jaXR5ID0gQ2l0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRybWVzc2FnZS5wcm92aW5jZSA9IFByb3ZpbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLnNoaXBwaW5ncGhvbmVudW1iZXIgPSBTaGlwcFBob25lTnVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLm9yZGVybnVtYmVyID0gT3JkZXJOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cm1lc3NhZ2UucHJvZHVjdHRpdGxlID0gUHJvZHVjdFRpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLnF1YW50aXR5ID0gUXVhbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cm1lc3NhZ2Uuc2t1ID0gU0tVO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLmNvdW50cnkgPSBDb3VudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLnl5aGggPSBZWTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRybWVzc2FnZS5oaCA9IEhIO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLnNoaXBzdGF0aW9uaWQgPSBTaGlwc3RhdGlvbmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLmRhdGFzb3VyY2UgPSBkYXRhc291cmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLnNoaXBwaW5nTWV0aG9kSWQgPSBzaGlwcGluZ01ldGhvZElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLnByb2R1Y3RJZCA9IHByb2R1Y3RJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRybWVzc2FnZS5wcmljZSA9IHByaWNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLmN1cnJlbmN5ID0gY3VycmVuY3k7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cm1lc3NhZ2Uuc2FsZXNvcmRlcnJvd2lkID0gc2FsZXNvcmRlcnJvd2lkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJtZXNzYWdlLndhcmVob3VzZSA9IHdhcmVob3VzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRybWVzc2FnZS50YXhudW1iZXIgPSB0YXhOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cm1lc3NhZ2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVVSUQucHVzaCh1dWlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRySUQucHVzaCh0cmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyTWVzc2FnZXMucHVzaCh0cm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZURyYWZ0LmlkID0gdHJJRDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVEcmFmdC51dWlkcyA9IFVVSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlRHJhZnQubWVzc2FnZXMgPSB0ck1lc3NhZ2VzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRySUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyTWVzc2FnZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNhdmVEcmFmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKTtcclxuICAgICAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL29yZGVyL3VwQW5hbHlzaXNPcmRlcicsIEpTT04uc3RyaW5naWZ5KHNhdmVEcmFmdCksIGRyYWZ0Y0Z1biwgZHJhZnRlRnVuKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkcmFmdGNGdW4ocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiU2F2ZSBzdWNjZXNzZnVsbHkhXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkcmFmdGVGdW4ocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBzZWxlY3Qgb3JkZXJz77yBJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEZWxldGUg5oyJ6ZKuXHJcbiAgICAgICAgICAgICRzY29wZS5kcmFmdERlbGV0ZUZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KGRyYWZ0U2VsZWN0TnVtKTtcclxuICAgICAgICAgICAgICAgIGlmIChkcmFmdFNlbGVjdE51bSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JJZHMgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHV1aWRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmRyYWZ0LWJveCAuemNoZWNrYm94JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyaWQgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnNpYmxpbmdzKCcuZHJhZnQtaWQnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1dWlkID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5zaWJsaW5ncygnLmRyYWZ0LXV1aWQnKS5jaGlsZHJlbignaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKHRyaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZHMucHVzaCh1dWlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICQodGhpcykucGFyZW50KCkucGFyZW50KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JJZHMuaWRzID0gaWRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9ySWRzLnV1aWRzID0gdXVpZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaWRzKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHV1aWRzKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9ySWRzKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VibWl0VGlwID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZVRpcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmJ0bnNUaXAnKS5jc3Moe2Rpc3BsYXk6ICdibG9jayd9KTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUueWVzRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgnZGVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5idG5zVGlwJykuY3NzKHtkaXNwbGF5OiAnbm9uZSd9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9kZWxldGVFcnJvckFuYWx5c2lzT3JkZXInLCBKU09OLnN0cmluZ2lmeShlcnJvcklkcyksIGRyYWZ0Y0Z1biwgZHJhZnRlRnVuKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZHJhZnRjRnVuKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZyhcIkRlbGV0ZSBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLmRyYWZ0RnVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuREZ1bigpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZHJhZnRlRnVuKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ub0Z1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoJ2RlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYnRuc1RpcCcpLmNzcyh7ZGlzcGxheTogJ25vbmUnfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2Ugc2VsZWN0IG9yZGVyc++8gScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAvL+ajgOafpeayoeacieaLieWPluWIsOiuouWNleeahOWOn+WboFxyXG4gICAgICAgICAgICAkc2NvcGUubm9PcmRSZXNvbkZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLnJlc1Jlc29uRmxhZyA9IGZhbHNlOyAvL+WxleekuuWQjuWPsOi/lOWbnueahOayoeacieiuouWNleWOn+WboOeahOW8ueahhlxyXG4gICAgICAgICAgICAkc2NvcGUuaXNTZWxUaW1lRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICRzY29wZS5ub09yZFJlc29uRnVuID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5ub09yZFJlc29uRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLm5vT3JkU3VyZUZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc2hvcE9yZE51bSA9PSAndW5kZWZpbmVkJyB8fCAkc2NvcGUuc2hvcE9yZE51bSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIGVudGVyIHRoZSBvcmRlciBudW1iZXIgaW4geW91ciBzaG9wLicpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RZbUJ0biA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKTtcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvb3JkZXIvY2hlY2tTeW5jT3JkZXInLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJPcmRlcklkOiAkc2NvcGUuc2hvcE9yZE51bVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ub09yZFJlc29uRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXNPcmROdW0gPSAkc2NvcGUuc2hvcE9yZE51bTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPT0gJzEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNob3BPcmROdW0uaW5kZXhPZignIycpID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9jaGVja1N5bmNPcmRlcicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJPcmRlcklkOiAnIycgKyBjdXNPcmROdW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc1Jlc29uRmxhZyA9IHRydWU7IC8v5omT5byA6K6i5Y2V5pyq5ouJ5Y+W55qE5Y6f5ZugXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5uby1vcmRyZXMtcmVzb24nKS50ZXh0KGRhdGEuZGF0YS5yZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ID09ICcxJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzU2VsVGltZUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuZGF0YSA9PSAnMScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VhTm93VGltZSA9IFwiU29ycnksIHdlIGhhcyBub3QgcHVsbGVkIHRoaXMgb3JkZXIgZnJvbSB5b3VyIHN0b3JlIHlldC5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VhTm93VGltZSA9IGRhdGEuZGF0YS5kYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzT3JkTnVtID0gY3VzT3JkTnVtLnJlcGxhY2UoJyMnLCAnJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjdXNPcmROdW0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9vcmRlci9jaGVja1N5bmNPcmRlcicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJPcmRlcklkOiBjdXNPcmROdW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc1Jlc29uRmxhZyA9IHRydWU7IC8v5omT5byA6K6i5Y2V5pyq5ouJ5Y+W55qE5Y6f5ZugXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5uby1vcmRyZXMtcmVzb24nKS50ZXh0KGRhdGEuZGF0YS5yZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ID09ICcxJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlzU2VsVGltZUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuZGF0YSA9PSAnMScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VhTm93VGltZSA9IFwiU29ycnksIHdlIGhhcyBub3QgcHVsbGVkIHRoaXMgb3JkZXIgZnJvbSB5b3VyIHN0b3JlIHlldC5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VhTm93VGltZSA9IGRhdGEuZGF0YS5kYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc1Jlc29uRmxhZyA9IHRydWU7IC8v5omT5byA6K6i5Y2V5pyq5ouJ5Y+W55qE5Y6f5ZugXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubm8tb3JkcmVzLXJlc29uJykudGV4dChkYXRhLmRhdGEucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQuaW5kZXhPZignSXQgbG9va3MgdGhhdCB5b3UgaGFkIG1vZGlmaWVkIHlvdXIgc3RvcmUgcHJvZHVjdHMgcmVjZW50bHknKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0WW1CdG4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1RoZSBxdWVyeSBmYWlscy4nKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RMaW5rRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oJyMvcHJvZHVjdHMtY29ubmVjdGlvbi9jb25uZWN0ZWQnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5ub09yZFF4RnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5vT3JkUmVzb25GbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlUmVzUmVhc29uRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlc1Jlc29uRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJCgnLm5vLW9yZHJlcy1yZXNvbicpLnRleHQoJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5p+l55yL6K6i5Y2V54q25oCB55qE5LiL5ouJ5qGGXHJcbiAgICAgICAgICAgICRzY29wZS5zeVN0dUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy/mm7TmlrDorqLljZVcclxuICAgICAgICAgICAgdmFyIGlzc3lGbGFnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzc3knKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpc3N5RmxhZylcclxuICAgICAgICAgICAgaWYgKGlzc3lGbGFnKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3lTdHVGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpc3N5JywgMSlcclxuICAgICAgICAgICAgICAgICRzY29wZS5zeVN0dSA9IDE7XHJcbiAgICAgICAgICAgICAgICAvLyBhcHAvb3JkZXJcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdvcmRlci9vbGRPcmRlci9nZXROZXdlc3RPcmRlcicsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3RhcnQnXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgIT0gJ2Vycm9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzT3JkU3R1ID0gZGF0YS5kYXRhLnJlc3VsdCAtIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5yZXNPcmRTdHUpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5yZXNPcmRTdHUgIT0gNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3R1VGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRPcmRTeUZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnNTY3JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucmVzT3JkU3R1ID09IDUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaXNzeScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN5U3R1ID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcucmVvcmRzdHUtZGxpc3QnKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMzYwcHgnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHN0dVRpbWVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdHVUaW1lcilcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3lTdHUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaXNzeScpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuY2hhbmdlc3lGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnN5U3R1RmxhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zeVN0dUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN5U3R1RmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLnN5U3R1ID0gMDtcclxuICAgICAgICAgICAgJHNjb3BlLnJlc09yZFN0dSA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS5zdGFydFN5RnVuID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpc3N5JywgMSlcclxuICAgICAgICAgICAgICAgICRzY29wZS5zeVN0dSA9IDE7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuaXNTZWxUaW1lRmxhZylcclxuICAgICAgICAgICAgICAgIHZhciBzeVVwZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgc3lVcGRhdGEudHlwZSA9ICdzdGFydCc7XHJcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5pc1NlbFRpbWVGbGFnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkKCcjc2Vhb3JkLXN0aW1lJykudmFsKCkgfHwgISQoJyNzZWFvcmQtZXRpbWUnKS52YWwoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBzZWxlY3QgdGltZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpc3N5JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzeVVwZGF0YS5zdGFydERhdGUgPSAkKCcjc2Vhb3JkLXN0aW1lJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3lVcGRhdGEuZW5kRGF0ZSA9ICQoJyNzZWFvcmQtZXRpbWUnKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdvcmRlci9vbGRPcmRlci9nZXROZXdlc3RPcmRlcicsIEpTT04uc3RyaW5naWZ5KHN5VXBkYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ID09ICdlcnJvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRpbWVJc05WYWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIGVudGVyIHRoZSB0aW1lIGFzIHJlcXVpcmVkJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS50aW1lSXNOVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc09yZFN0dSA9IGRhdGEuZGF0YS5yZXN1bHQgLSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3lTdHVGbGFnID0gdHJ1ZTsgLy/mmL7npLrorqLljZXnirbmgIHnmoTpnaLmnb9cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzUmVzb25GbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnJlc09yZFN0dSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnJlc09yZFN0dSAhPSA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHVUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldE9yZFN5RnVuKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc1NjcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5yZXNPcmRTdHUgPT0gNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpc3N5JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3lTdHUgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5yZW9yZHN0dS1kbGlzdCcpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICczNjBweCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc3R1VGltZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0dVRpbWVyKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zeVN0dSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpc3N5JylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRPcmRTeUZ1bigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzeVVwZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgc3lVcGRhdGEudHlwZSA9ICdjb250aW51ZSc7XHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignb3JkZXIvb2xkT3JkZXIvZ2V0TmV3ZXN0T3JkZXInLCBKU09OLnN0cmluZ2lmeShzeVVwZGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgIT0gJ2Vycm9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzT3JkU3R1ID0gZGF0YS5kYXRhLnJlc3VsdCAtIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/nsr7noa7mjInml7bpl7Tmn6Xmib7orqLljZVcclxuICAgICAgICAgICAgJHNjb3BlLmRldGFpbFNlYU9yZEZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJyNzZWFvcmQtc3RpbWUnKS52YWwoKSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJyNzZWFvcmQtZXRpbWUnKS52YWwoKSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJyNzZWFvcmQtc3RpbWUnKS52YWwoKS5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkKCcjc2Vhb3JkLWV0aW1lJykudmFsKCkubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coISQoJyNzZWFvcmQtZXRpbWUnKS52YWwoKSlcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdGFydFN5RnVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v5omL5Yqo5Yib5bu65Luj5Y+R5Y2VXHJcbiAgICAgICAgICAgICRzY29wZS5zZWFyY2hGb3IgPSBcInNrdVwiXHJcbiAgICAgICAgICAgICRzY29wZS5hZGRQcm9MaXN0ID0gW11cclxuICAgICAgICAgICAgJHNjb3BlLmFkZE5hbWVMaXN0ID0gW11cclxuICAgICAgICAgICAgJHNjb3BlLnNlYXJjaEZvck5hbWUgPSBmYWxzZVxyXG4gICAgICAgICAgICAkc2NvcGUuY2pkZmRJbmZvRmxhZyA9IGZhbHNlXHJcbiAgICAgICAgICAgICRzY29wZS5jamRmZFJlc3VsdCA9IGZhbHNlXHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gMFxyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxDb3VudCA9IDBcclxuICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3MgPSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZTogXCJcIixcclxuICAgICAgICAgICAgICAgIGxvZ2lzdGljczogW10sXHJcbiAgICAgICAgICAgICAgICBzaGlwQ29zdDogMCxcclxuICAgICAgICAgICAgICAgIHRyYW5zZmVyQXJlYUlkOiBcIlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmZvcm1WZXJpZnkgPSB7XHJcbiAgICAgICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHByb3ZpbmNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2l0eTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGN1c3RvbWVyTmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHBob25lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgemlwOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbG9naXN0aWNzVHlwZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9yZGVyTnVtYmVyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJBcmVhSWQ6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUpXHJcbiAgICAgICAgICAgICRzY29wZS5hZGRQcm9kdWN0TGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBrZXkgPSAkc2NvcGUuc2VhcmNoRm9yXHJcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5zZWFyY2hXb3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiUGxlYXNlIGVudGVyIGtleXdvcmRzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNlYXJjaEZvciA9PSBcInNrdVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdvcmRlci9tYW51YWxBZGRDam9yZGVyQ29udHJvbGxlci9nZXRQcm9kdWN0U2t1Jywge1trZXldOiAkc2NvcGUuc2VhcmNoV29yZH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7U0tVLCB2YXJpYW50c30gPSBkYXRhLmRhdGEucmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVjcyA9IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50cy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNzLnB1c2goaXRlbS5WQVJJQU5US0VZKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5yZXN1bHQuc3BlY3MgPSBzcGVjc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLnJlc3VsdC5pdGVtQ291bnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9zZWxsUHJpY2UgPSBkYXRhLmRhdGEucmVzdWx0Lm5vd1ByaWNlID8gZGF0YS5kYXRhLnJlc3VsdC5ub3dQcmljZSA6IGRhdGEuZGF0YS5yZXN1bHQuU0VMTFBSSUNFO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLnJlc3VsdC5zdWJzID0gcGFyc2VGbG9hdChvc2VsbFByaWNlICogZGF0YS5kYXRhLnJlc3VsdC5pdGVtQ291bnQpLnRvRml4ZWQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNBZGQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZFByb0xpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5TS1UgPT0gU0tVKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uaXRlbUNvdW50ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcHJpY2UgPSBpdGVtLm5vd1ByaWNlID8gaXRlbS5ub3dQcmljZSA6IGl0ZW0uU0VMTFBSSUNFO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnN1YnMgPSBwYXJzZUZsb2F0KG9wcmljZSAqIGl0ZW0uaXRlbUNvdW50KS50b0ZpeGVkKDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWRkID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWRkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZFByb0xpc3QucHVzaChkYXRhLmRhdGEucmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tQcmljZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coXCJUaGUgU0tVIGRvZXMgbm90IGV4aXN0LCBwbGVhc2UgZW50ZXIgYSBuZXcgb25lLlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaFdvcmQgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hGb3JOYW1lTGlzdCgxLCAnNScpXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzZWFyY2hGb3JOYW1lTGlzdChwYWdlTnVtLCBwYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFsbFByb2R1Y3RGbGFnID0gZmFsc2UgLy/pu5jorqTlhajpgIlcclxuICAgICAgICAgICAgICAgIGxldCBrZXkgPSAkc2NvcGUuc2VhcmNoRm9yXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUxpc3RQYWdlU2l6ZSA9IHBhZ2VTaXplXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUxpc3RQYWdlTnVtID0gcGFnZU51bVxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ29yZGVyL21hbnVhbEFkZENqb3JkZXJDb250cm9sbGVyL2dldFByb2R1Y3RzTmFtZScsIHtcclxuICAgICAgICAgICAgICAgICAgICBba2V5XTogJHNjb3BlLnNlYXJjaFdvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZU51bSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGRhdGEuZGF0YS5yZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5hbWVMaXN0UGFnZUNvdW50ID0gcmVzLmNvdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdwYWdlLWRhdGEnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlTnVtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxOdW06IE1hdGguY2VpbChyZXMuY291bnQgLyAkc2NvcGUubmFtZUxpc3RQYWdlU2l6ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50czogcmVzLmNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlc2l6ZUxpc3Q6IFsnNScsICcxMCcsICcyMCcsICczMCddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyciA9IHJlcy5saXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hGb3JOYW1lID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uaXRlbUNvdW50ID0gMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zdWJzID0gcGFyc2VGbG9hdChpdGVtLlNFTExQUklDRSAqIDEpLnRvRml4ZWQoMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWNzID0gW11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udmFyaWFudHMuZm9yRWFjaChpdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY3MucHVzaChpdC5WQVJJQU5US0VZKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc3BlY3MgPSBzcGVjc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pdGVtLlZBUklBTlRLRVkgPSBpdGVtLkFTVkFSSUFOVEtFWVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmFtZUxpc3QgPSBhcnJcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coXCJTb3JyeSwgdGhlIGRhdGEgaXMgbm90IGZvdW5kLlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoV29yZCA9IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLiRvbigncGFnZWRhdGEtZmEnLCBmdW5jdGlvbiAoZCwgZGF0YSkgey8v5YiG6aG15YiH5o2i5pWw5o2u55uR5ZCsXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgY29uc3Qge3BhZ2VOdW0sIHBhZ2VTaXplfSA9IGRhdGFcclxuICAgICAgICAgICAgICAgIGxldCBpc1RpcCA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmFtZUxpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5jaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1RpcCA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgaWYgKGlzVGlwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiUGxlYXNlIGFkZCB0aGUgc2VsZWN0ZWQgcHJvZHVjdHMgdG8gdGhlIG9yZGVyIGxpc3QuXCIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZWFyY2hGb3JOYW1lTGlzdChwYWdlTnVtLCBwYWdlU2l6ZSlcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrUHJpY2UoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IDBcclxuICAgICAgICAgICAgICAgICRzY29wZS50b3RhbENvdW50ID0gMFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZFByb0xpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSArPSBOdW1iZXIoaXRlbS5zdWJzKVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbENvdW50ICs9IE51bWJlcihpdGVtLml0ZW1Db3VudClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jaGFuZ2VTcGVjID0gZnVuY3Rpb24gKGtleSwgaWR4KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhrZXkpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpZHgpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYWRkUHJvTGlzdClcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRQcm9MaXN0W2lkeF0udmFyaWFudHMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5WQVJJQU5US0VZID09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3N1YiA9IGl0ZW0ubm93UHJpY2UgPyBpdGVtLm5vd1ByaWNlIDogaXRlbS5TRUxMUFJJQ0U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRQcm9MaXN0W2lkeF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJRDogaXRlbS5JRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIElNRzogaXRlbS5JTUcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOQU1FRU46IGl0ZW0uTkFNRUVOLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUElEOiBpdGVtLlBJRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNFTExQUklDRTogaXRlbS5TRUxMUFJJQ0UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dQcmljZTogaXRlbS5ub3dQcmljZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNLVTogaXRlbS5TS1UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtQ291bnQ6ICRzY29wZS5hZGRQcm9MaXN0W2lkeF0uaXRlbUNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVkFSSUFOVEtFWToga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY3M6ICRzY29wZS5hZGRQcm9MaXN0W2lkeF0uc3BlY3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50czogJHNjb3BlLmFkZFByb0xpc3RbaWR4XS52YXJpYW50cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnM6IHBhcnNlRmxvYXQob3N1YiAqICRzY29wZS5hZGRQcm9MaXN0W2lkeF0uaXRlbUNvdW50KS50b0ZpeGVkKDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZFByb0xpc3QgPSB1bmlxKCRzY29wZS5hZGRQcm9MaXN0LCBcIlNLVVwiKVxyXG4gICAgICAgICAgICAgICAgY2hlY2tQcmljZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmRlbGVQcm9MaXN0ID0gZnVuY3Rpb24gKHBybykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZFByb0xpc3QuZm9yRWFjaCgoaXRlbSwgaWR4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uU0tVID09IHByby5TS1UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZFByb0xpc3Quc3BsaWNlKGlkeCwgMSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgY2hlY2tQcmljZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlQWRkUHJvID0gY2xvc2VBbGxDcmVhdGVPcmRlclxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2xvc2VBbGxDcmVhdGVPcmRlcigpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hGb3IgPSBcInNrdVwiXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoV29yZCA9IFwiXCJcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRQcm9MaXN0ID0gW11cclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hGb3JOYW1lID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICRzY29wZS5jcmVhdEFkZFByb2R1Y3RGbGFnID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gMFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsQ291bnQgPSAwXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5taW51c09uZSA9IGZ1bmN0aW9uIChjb3VudCwgaWR4KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT0gMSkgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkUHJvTGlzdFtpZHhdLml0ZW1Db3VudCAtPSAxXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7aXRlbUNvdW50LCBTRUxMUFJJQ0UsIG5vd1ByaWNlfSA9ICRzY29wZS5hZGRQcm9MaXN0W2lkeF07XHJcbiAgICAgICAgICAgICAgICBsZXQgb3ByaWNlID0gbm93UHJpY2UgPyBub3dQcmljZSA6IFNFTExQUklDRTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRQcm9MaXN0W2lkeF0uc3VicyA9IHBhcnNlRmxvYXQob3ByaWNlICogaXRlbUNvdW50KS50b0ZpeGVkKDIpXHJcbiAgICAgICAgICAgICAgICBjaGVja1ByaWNlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUucGx1c09uZSA9IGZ1bmN0aW9uIChjb3VudCwgaWR4KSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkUHJvTGlzdFtpZHhdLml0ZW1Db3VudCArPSAxXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7aXRlbUNvdW50LCBTRUxMUFJJQ0UsIG5vd1ByaWNlfSA9ICRzY29wZS5hZGRQcm9MaXN0W2lkeF07XHJcbiAgICAgICAgICAgICAgICBsZXQgb3ByaWNlID0gbm93UHJpY2UgPyBub3dQcmljZSA6IFNFTExQUklDRTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRQcm9MaXN0W2lkeF0uc3VicyA9IHBhcnNlRmxvYXQob3ByaWNlICogaXRlbUNvdW50KS50b0ZpeGVkKDIpXHJcbiAgICAgICAgICAgICAgICBjaGVja1ByaWNlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuY2hhbmdlQ291bnQgPSBmdW5jdGlvbiAoY291bnQsIGlkeCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY291bnQpXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVnID0gL15bMS05XVxcZCooXFwuXFxkKyk/JC9pXHJcbiAgICAgICAgICAgICAgICBpZiAocmVnLnRlc3QoY291bnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZFByb0xpc3RbaWR4XS5pdGVtQ291bnQgPSBwYXJzZUludChjb3VudCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRQcm9MaXN0W2lkeF0uaXRlbUNvdW50ID0gMVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3Qge2l0ZW1Db3VudCwgU0VMTFBSSUNFLCBub3dQcmljZX0gPSAkc2NvcGUuYWRkUHJvTGlzdFtpZHhdO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wcmljZSA9IG5vd1ByaWNlID8gbm93UHJpY2UgOiBTRUxMUFJJQ0U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkUHJvTGlzdFtpZHhdLnN1YnMgPSBwYXJzZUZsb2F0KG9wcmljZSAqIGl0ZW1Db3VudCkudG9GaXhlZCgyKTtcclxuICAgICAgICAgICAgICAgIGNoZWNrUHJpY2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdW5pcShhcnJheSwgZ1dvcmQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IFtdXHJcbiAgICAgICAgICAgICAgICBhcnJheS5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLm1hcCgoaXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bZ1dvcmRdID09PSBpdFtnV29yZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0Lml0ZW1Db3VudCArPSBpdGVtLml0ZW1Db3VudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXQuc3VicyA9IHBhcnNlRmxvYXQoaXQuU0VMTFBSSUNFICogaXQuaXRlbUNvdW50KS50b0ZpeGVkKDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0QWxsUHJvID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hbGxQcm9kdWN0RmxhZyA9IGUudGFyZ2V0LmNoZWNrZWRcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYWxsUHJvZHVjdEZsYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmFtZUxpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGVjayA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmFtZUxpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGVjayA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuaXRlbVNsZWxldFBybyA9IGZ1bmN0aW9uIChlLCBwcm8pIHtcclxuICAgICAgICAgICAgICAgIHByby5jaGVjayA9IGUudGFyZ2V0LmNoZWNrZWRcclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5hbWVMaXN0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0rK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAobnVtID09ICRzY29wZS5hZGROYW1lTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsbFByb2R1Y3RGbGFnID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coOTkpXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsbFByb2R1Y3RGbGFnID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuYWRkTmFtZVNlYXJjaExpc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcnIgPSBbXVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmFkZE5hbWVMaXN0KVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5hbWVMaXN0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2hlY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9ialN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqMiA9IEpTT04ucGFyc2Uob2JqU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2gob2JqMilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGVjayA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZyhcIlBsZWFzZSBzZWxlY3QgcHJvZHVjdHMuXCIpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNBZGQgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRQcm9MaXN0LmZvckVhY2goaXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0LlNLVSA9PSBpdGVtLlNLVSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0Lml0ZW1Db3VudCArPSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXQuc3VicyA9IHBhcnNlRmxvYXQoaXQuU0VMTFBSSUNFICogaXQuaXRlbUNvdW50KS50b0ZpeGVkKDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBZGQgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBZGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRQcm9MaXN0LnB1c2goaXRlbSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsbFByb2R1Y3RGbGFnID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coXCJBZGRlZCBzdWNjZXNzZnVsbHnvvIFcIilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNoZWNrUHJpY2UoKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VOYW1lU2VhcmNoID0gY2xvc2VOYW1lU2VhcmNoXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjbG9zZU5hbWVTZWFyY2goKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoRm9yTmFtZSA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWxsUHJvZHVjdEZsYWcgPSBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tvdXRPcmRlckxpc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFkZFByb0xpc3QubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coXCJQbGVhc2UgYWRkIHRoZSBwcm9kdWN0IGluZm9ybWF0aW9uLlwiKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2pkZmRJbmZvRmxhZyA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdE9yUGFja2FnZSA9IG51bGxcclxuICAgICAgICAgICAgICAgICAgICBnZXRTaGlwRnJvbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0U2hpcGluZ01ldGhvZCgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNoaXBGcm9tKCkge1xyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oXCJ3YXJlaG91c2VCdWlsZFdlYi9tYW5hZ2VtZW50L2dldEFyZWFJbmZvQnlJZFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZU51bTogMSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogMTBcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlcylcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7Y29kZSwgZGF0YX0gPSByZXMuZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUud2FyZWhvdXNlTGlzdCA9IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0U2hpcGluZ01ldGhvZCA9IGdldFNoaXBpbmdNZXRob2RcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNoaXBpbmdNZXRob2QoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0ID0gW11cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5hZGRyZXNzKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZFByb0xpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNrdTogaXRlbS5TS1UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBpdGVtLml0ZW1Db3VudFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsaXN0LnB1c2gobGkpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oXCJvcmRlci9tYW51YWxBZGRDam9yZGVyQ29udHJvbGxlci9pbnNlcnRPcmRlclwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeUNvZGU6ICRzY29wZS5hZGRyZXNzLmNvdW50cnlDb2RlIHx8IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRMb2dpc3RpY3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudHNMaXN0OiBsaXN0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1lcmNoYW50bk51bWJlcjogJHNjb3BlLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICB6aXA6ICRzY29wZS5hZGRyZXNzLnppcCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlckFyZWFJZDogJHNjb3BlLmFkZHJlc3MudHJhbnNmZXJBcmVhSWQgfHwgXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLmFkZHJlc3MucGhvbmUgfHwgXCJcIlxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7c3RhdHVzQ29kZSwgcmVzdWx0fSA9IGRhdGEuZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzcy5sb2dpc3RpY3MgPSByZXN1bHQubG9naXN0aWNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzLmxvZ2lzdGljc1R5cGUgPSByZXN1bHQubG9naXN0aWNzWzBdID8gcmVzdWx0LmxvZ2lzdGljc1swXS5sb2dpc3RpY05hbWUgOiBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzLnNoaXBDb3N0ID0gcmVzdWx0LmxvZ2lzdGljc1swXSA/IHJlc3VsdC5sb2dpc3RpY3NbMF0ucHJpY2UgOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWNrUHJpY2UgPSByZXN1bHQubG9naXN0aWNzWzBdID8gcmVzdWx0LmxvZ2lzdGljc1swXS5wYWNrUHJpY2UgOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0T3JQYWNrYWdlID0gJHNjb3BlLnByb2R1Y3RPclBhY2thZ2UgPyAkc2NvcGUucHJvZHVjdE9yUGFja2FnZSA6IHJlc3VsdC5wcm9kdWN0TGlzdCB8fCBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja1RvdGFsQW1vdW50KClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2hhbmdlU2hpcE1ldGhvZCA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzcy5sb2dpc3RpY3MuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5sb2dpc3RpY05hbWUgPT0gbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzcy5sb2dpc3RpY3NUeXBlID0gaXRlbS5sb2dpc3RpY05hbWUgfHwgXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzcy5zaGlwQ29zdCA9IGl0ZW0ucHJpY2UgfHwgMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFja1ByaWNlID0gaXRlbS5wYWNrUHJpY2UgfHwgMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja1RvdGFsQW1vdW50KClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1RvdGFsQW1vdW50KCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hZGRyZXNzLnNoaXBDb3N0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsQW1vdW50ID0gcGFyc2VGbG9hdCgkc2NvcGUuYWRkcmVzcy5zaGlwQ29zdCArICRzY29wZS50b3RhbFByaWNlKS50b0ZpeGVkKDIpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b3RhbEFtb3VudCA9ICRzY29wZS50b3RhbFByaWNlXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tvdXRQaG9uZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYWRkcmVzcy5waG9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBob25lID0gJHNjb3BlLmFkZHJlc3MucGhvbmUucmVwbGFjZSgvW15cXGRcXCtcXC1cXChcXCldL2csIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzLnBob25lID0gcGhvbmVcclxuICAgICAgICAgICAgICAgICAgICBnZXRTaGlwaW5nTWV0aG9kKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VDamRmZEluZm9GbGFnID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNqZGZkSW5mb0ZsYWcgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3MgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeUNvZGU6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9naXN0aWNzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzaGlwQ29zdDogMCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlckFyZWFJZDogXCJcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZvcm1WZXJpZnkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpbmNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNpdHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJOYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHppcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBsb2dpc3RpY3NUeXBlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyTnVtYmVyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZmVyQXJlYUlkOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlQ2pkZmRSZXN1bHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2pkZmRSZXN1bHQgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgZnJlc2hMaXN0KCkgLy/liLfmlrDliJfooahcclxuICAgICAgICAgICAgICAgIGNsb3NlQWxsQ3JlYXRlT3JkZXIoKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3MgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeUNvZGU6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9naXN0aWNzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzaGlwQ29zdDogMCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlckFyZWFJZDogXCJcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5jcmVhdGVPcmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxldCB2ZXJpZnlSZXN1bHQgPSAkc2NvcGUuZm9ybVZlcmlmeUZ1bigpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInZlcmlmeVJlc3VsdFwiLHZlcmlmeVJlc3VsdClcclxuICAgICAgICAgICAgICAgIGlmICghdmVyaWZ5UmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiUGxlYXNlIGNvbXBsZXRlIHRoZSBhZGRyZXNzIGluZm9ybWF0aW9uLlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5hZGRyZXNzKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFyaWFudHNMaXN0ID0gW11cclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRQcm9MaXN0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLklELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBza3U6IGl0ZW0uU0tVLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogaXRlbS5pdGVtQ291bnRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudHNMaXN0LnB1c2gobGkpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLiRzY29wZS5hZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50TG9naXN0aWNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50c0xpc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVyY2hhbnRuTnVtYmVyOiAkc2NvcGUudXNlcklkLFxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhcmFtcylcclxuICAgICAgICAgICAgICAgIGxheWVyLmxvYWQoMilcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKFwib3JkZXIvbWFudWFsQWRkQ2pvcmRlckNvbnRyb2xsZXIvaW5zZXJ0T3JkZXJcIiwgcGFyYW1zLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2pkZmRJbmZvRmxhZyA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jcmVhdEFkZFByb2R1Y3RGbGFnID0gZmFsc2UgLy/lhbPpl63liY3pnaIy5Liq5by556qXXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jamRmZFJlc3VsdCA9IHRydWUgLy/miZPlvIDnu5PmnpzlvLnnqpdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDooajljZXpqozor4FcclxuICAgICAgICAgICAgJHNjb3BlLmZvcm1WZXJpZnlGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmVyaWZ5VmFsdWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluICRzY29wZS5mb3JtVmVyaWZ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5mb3JtVmVyaWZ5W2tleV0gPSAkc2NvcGUuYWRkcmVzc1trZXldID09PSBudWxsIHx8ICRzY29wZS5hZGRyZXNzW2tleV0gPT09IHVuZGVmaW5lZCB8fCAkc2NvcGUuYWRkcmVzc1trZXldID09PSAnJyA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZm9ybVZlcmlmeVtrZXldID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGtleSwnLScsJHNjb3BlLmZvcm1WZXJpZnlba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5mb3JtVmVyaWZ5W2tleV0gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeVZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB2ZXJpZnlWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/mibnph4/mm7TmjaLlj5HotKflnLDljLpcclxuICAgICAgICAgICAgJHNjb3BlLmJ1bGtXYXJlRmxhZyA9IGZhbHNlXHJcbiAgICAgICAgICAgICRzY29wZS5ub3RpZmkgPSBmYWxzZVxyXG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tfQWxsID0gZmFsc2VcclxuICAgICAgICAgICAgJHNjb3BlLnpjaGVja2VkX2FsbCA9IGZhbHNlXHJcbiAgICAgICAgICAgICRzY29wZS4kd2F0Y2goJ29yZGVyc0xpc3QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc0xpc3QgJiYgJHNjb3BlLm9yZGVyc0xpc3QubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuemNoZWNrZWRfYWxsID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJHNjb3BlLmJ1bGtXYXJlTGlzdCA9IFtdXHJcbiAgICAgICAgICAgIGRzcC5wb3N0RnVuKFwid2FyZWhvdXNlQnVpbGRXZWIvbWFuYWdlbWVudC9nZXRDb3VudHJ5QnlBcmVhSWRcIiwge30sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5jb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcmVhTGlzdCA9IGRhdGEuZGF0YS5kYXRhXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYXJlYUxpc3QpXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLmFyZWFMaXN0LmZvckVhY2goaXQgPT57XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coaXQuYXJlYUVuKVxyXG4gICAgICAgICAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICRzY29wZS5ibHVrQ2hhbmdlV2FyZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1bGtXYXJlTGlzdCA9IFtdXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXRlbS5vcmRlci5hcmVhSWQgPSBpdGVtLm9yZGVyLmFyZWFJZCB8fCBcIjFcIiAvL+m7mOiupDHkuLrkuK3lm71cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVsa1dhcmVMaXN0LnB1c2goaXRlbSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYnVsa1dhcmVMaXN0KVxyXG4gICAgICAgICAgICAgICAgaWYgKGJ1bGtXYXJlTGlzdC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm1zZyhcIlBsZWFzZSBzZWxlY3Qgb3JkZXIocykgZmlyc3RcIilcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJ1bGtXYXJlRmxhZyA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYnVsa1dhcmVMaXN0ID0gYnVsa1dhcmVMaXN0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QgPSBbXVxyXG4gICAgICAgICAgICAkc2NvcGUuZmluZE9yZGVyTGlzdCA9IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzT3JkZXJMaXN0LmluZGV4T2YodmFsdWUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNrT25lT3JkZXIgPSBmdW5jdGlvbiAobGlzdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnpjaGVja2VkX2FsbClcclxuICAgICAgICAgICAgICAgIGlmIChsaXN0LmNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5jaGVjayA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QgPSAkc2NvcGUuYWRkcmVzc09yZGVyTGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSBsaXN0Lm9yZGVyLklEKVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS56Y2hlY2tlZF9hbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5jaGVjayA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc09yZGVyTGlzdC5wdXNoKGxpc3Qub3JkZXIuSUQpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG51bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QuZm9yRWFjaChlbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLmNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0rKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudW0gPT0gJHNjb3BlLm9yZGVyc0xpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG51bSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnpjaGVja2VkX2FsbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxpc3QpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYWRkcmVzc09yZGVyTGlzdClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNrQWxsT3JkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuemNoZWNrZWRfYWxsID0gISRzY29wZS56Y2hlY2tlZF9hbGxcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS56Y2hlY2tlZF9hbGwpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuemNoZWNrZWRfYWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2sgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5hZGRyZXNzT3JkZXJMaXN0LmluZGV4T2YoaXRlbS5vcmRlci5JRCkgPj0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc09yZGVyTGlzdC5zcGxpY2UoJHNjb3BlLmZpbmRPcmRlckxpc3QoaXRlbS5vcmRlci5JRCksMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc09yZGVyTGlzdC5wdXNoKGl0ZW0ub3JkZXIuSUQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5hZGRyZXNzT3JkZXJMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2sgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRkcmVzc09yZGVyTGlzdC5zcGxpY2UoJHNjb3BlLmZpbmRPcmRlckxpc3QoaXRlbS5vcmRlci5JRCksMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmFkZHJlc3NPcmRlckxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOWFqOmAiVxyXG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tBbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNoZWNrX0FsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5idWxrV2FyZUxpc3QuZm9yRWFjaChlbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuY2hlY2tpbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5idWxrV2FyZUxpc3QuZm9yRWFjaChlbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuY2hlY2tpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyDljZXpgIlcclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNrT25lID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pXHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5jaGVja2luKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG51bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJ1bGtXYXJlTGlzdC5mb3JFYWNoKGVsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGUuY2hlY2tpbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobnVtID09ICRzY29wZS5idWxrV2FyZUxpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja19BbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrX0FsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS5jbG9zZWJ1bGtXYXJlRmxhZyA9IGNsb3NlYnVsa1dhcmVGbGFnXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjbG9zZWJ1bGtXYXJlRmxhZygpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5idWxrV2FyZUZsYWcgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrX0FsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJ1bGtXYXJlTGlzdCA9IFtdXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubm90aWZpID0gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmJ1bGtDaGFuZ2VBcmVhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlTGlzdCA9IFtdXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYnVsa1dhcmVMaXN0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2hlY2tpbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VMaXN0LnB1c2goaXRlbSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmJ1bGtXYXJlTGlzdClcclxuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VMaXN0Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiUGxlYXNlIHNlbGVjdCBvcmRlcihzKSB5b3UgbmVlZCB0byBjaGFuZ2VcIilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc2hpcEZyb20gJiYgJHNjb3BlLnNoaXBUbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUxpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0ub3JkZXIuYXJlYUlkID09ICRzY29wZS5zaGlwRnJvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5vcmRlci5hcmVhSWQgPSAkc2NvcGUuc2hpcFRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coXCJQbGVhc2Ugc2VsZWN0IHRoZSBhcmVhIHlvdSB3YW50IHRvIGNoYW5nZVwiKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIOaJuemHj+i9rOS7k+ivt+axgiAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2ZlckFyZWFGdW4oYXJyKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oXCJvcmRlci9vcmRlci9vcmRlclRyYW5zZmVyQXJlYVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZmVyT3JkZXJEZXRhaWxQTVM6IGFycixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVEaXNjb3VudGVUcmFuc2ZlcjogZGlzY291bnRlVHJhbnNmZXJGbGFnXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zQXJlYShhcnIpIHsvL+aJuemHj+i9rOS7k+WKn+iDvVxyXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJBcmVhRnVuKGFycikudGhlbigoZGF0YSk9PntcclxuICAgICAgICAgICAgICAgICAgICBkaXNjb3VudGVUcmFuc2ZlckZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VidWxrV2FyZUZsYWcoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuemNoZWNrZWRfYWxsID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlc2hMaXN0KCkgLy/liLfmlrDliJfooahcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiU3VjY2Vzc2Z1bGx5IGNoYW5nZWQgc2hpcHBpbmcgYXJlYe+8gVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coZGF0YS5kYXRhLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8qIGxheWVyLmxvYWQoMilcclxuICAgICAgICAgICAgICAgIGRzcC5wb3N0RnVuKFwib3JkZXIvb3JkZXIvb3JkZXJUcmFuc2ZlckFyZWFcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZmVyT3JkZXJEZXRhaWxQTVM6IGFycixcclxuICAgICAgICAgICAgICAgICAgICByb3V0ZURpc2NvdW50ZVRyYW5zZmVyOiBkaXNjb3VudGVUcmFuc2ZlckZsYWdcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzY291bnRlVHJhbnNmZXJGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZWJ1bGtXYXJlRmxhZygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS56Y2hlY2tlZF9hbGwgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmVzaExpc3QoKSAvL+WIt+aWsOWIl+ihqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5tc2coXCJTdWNjZXNzZnVsbHkgY2hhbmdlZCBzaGlwcGluZyBhcmVh77yBXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKGRhdGEuZGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pICovXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jaGFuZ2VXYXJlQ29uZmlybSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGRyZXNzT3JkZXJMaXN0ID0gW11cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFyciA9IFtdXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYnVsa1dhcmVMaXN0KVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJ1bGtXYXJlTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcklkOiBpdGVtLm9yZGVyLklELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlckFyZWFJZDogaXRlbS5vcmRlci5hcmVhSWRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2gobGkpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNBcmVhKGFycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyQnVsaygpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jaGVja19BbGwgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNoaXBGcm9tID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNoaXBUbyA9IFwiXCJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm1vZGlmeUFyZWFzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5vdGlmaSA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0ID0gW11cclxuICAgICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vSW52ZW50b3J5QXJyLmZvckVhY2goaXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5vcmRlci5JRCA9PSBpdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5wdXNoKGl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICRzY29wZS5idWxrV2FyZUZsYWcgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYnVsa1dhcmVMaXN0ID0gbGlzdFxyXG4gICAgICAgICAgICAgICAgY2xlYXJCdWxrKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuY2hhbmdlT25lQXJlYSA9IGZ1bmN0aW9uIChvcmRlcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFyciA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXIuSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmZXJBcmVhSWQ6IG9yZGVyLmFyZWFJZFxyXG4gICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgICAgIHRyYW5zQXJlYShhcnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBhcHA7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBWUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBNUVBO0FBNkVBO0FBQUE7QUE3RUE7QUFBQTtBQUNBO0FBOEVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekRBO0FBMERBO0FBQUE7QUExREE7QUFBQTtBQUNBO0FBMERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQWZBO0FBZ0JBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBakJBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFqQkE7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQTVCQTtBQThCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTRCQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBN0JBO0FBK0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBNkJBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBakNBO0FBbUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQS9CQTtBQWlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBOEJBO0FBQUE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQXJDQTtBQXVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBK0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFqQ0E7QUFtQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXRDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUE3Q0E7QUErQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUEvQkE7QUFpQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZ0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQW5DQTtBQXFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQXRHQTtBQXlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFXQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUEvQkE7QUFpQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQWxDQTtBQW9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE2QkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFqQ0E7QUFtQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQXZGQTtBQXlGQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJCQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUEvQ0E7QUFpREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5RkE7QUFDQTtBQStGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwQkE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQTlDQTtBQWdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNGQTtBQUNBO0FBNEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuS0E7QUFxS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5FQTtBQXFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExREE7QUE4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMUNBO0FBNENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFoQ0E7QUFrQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQThCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQTlCQTtBQWdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBNkJBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFyQkE7QUF1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFpRkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQXRGQTtBQXdGQTtBQUNBO0FBQ0E7QUFDQTtBQTFGQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBWUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQVlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../src/pages/mycj/imported-orders/import-process-required.js\n");

/***/ })

}]);