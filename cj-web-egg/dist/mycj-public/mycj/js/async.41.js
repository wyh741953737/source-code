(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[41],{

/***/ "../src/pages/mycj/inventory/package-inventory.js":
/*!********************************************************!*\
  !*** ../src/pages/mycj/inventory/package-inventory.js ***!
  \********************************************************/
/*! exports provided: packageInventoryFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"packageInventoryFactory\", function() { return packageInventoryFactory; });\nfunction packageInventoryFactory(angular) {\n  var app = angular.module('package-inventory.module', []);\n  app.controller('package-inventory.ctrl', ['$scope', '$rootScope', '$stateParams', 'dsp', '$state', function ($scope, $rootScope, $stateParams, dsp, $state) {\n    dsp.setRightMinHeight(); //数据声明\n\n    $scope.pageNum = '1';\n    $scope.pageSize = '10';\n    $scope.totalNum = null;\n    $scope.inputStr = '';\n    $scope.dataList = [];\n    $scope.chartDialog = false;\n    $scope.packVid = $stateParams.packVid || '';\n    $scope.associationType = $stateParams.type || '';\n    $scope.isHideZero = false;\n    console.log('associationType===>', $scope.associationType);\n    console.log('packVid===>', $scope.packVid); //搜索\n\n    $scope.searchPro = function () {\n      $scope.packVid = '';\n      $scope.associationType = '';\n      $scope.pageNum = '1';\n      getData();\n    };\n\n    $scope.enterSearch = function (event) {\n      if (event.keyCode == 13) {\n        $scope.searchPro();\n      }\n    };\n\n    $rootScope.$on('cj/PackProduct/getPackInventory', function (_, bool) {\n      return $scope.loading = bool;\n    }); //获取数据\n\n    function getData() {\n      var parms = {\n        type: $scope.associationType,\n        packVid: $scope.packVid,\n        pageNum: $scope.pageNum,\n        pageSize: $scope.pageSize,\n        sku: $scope.inputStr\n      };\n      $scope.dataList = [];\n      dsp.postFun('cj/PackProduct/getPackInventory', parms, function (res) {\n        if (res.data.statusCode === '200') {\n          $scope.dataList = res.data.result.list;\n          $scope.totalNum = res.data.result.count;\n          $scope.totalPrice = res.data.result.totalPrice;\n          $scope.retrievalNum = res.data.result.retrievalNum;\n          console.log($scope.dataList);\n          $scope.totalCounts = Math.ceil($scope.totalNum / $scope.pageSize);\n          $scope.$broadcast('page-data', {\n            pageNum: $scope.pageNum,\n            totalNum: $scope.totalCounts,\n            totalCounts: $scope.totalNum,\n            pageSize: $scope.pageSize\n          });\n        }\n      }, function (err) {\n        console.log(err);\n      });\n    }\n\n    getData();\n    $scope.$on('pagedata-fa', function (d, data) {\n      console.log(data);\n      $scope.pageNum = data.pageNum;\n      $scope.pageSize = data.pageSize;\n      getData();\n    }); //长宽高\n\n    $scope.size = function (item, name) {\n      var arr = item.STANDARD.split(',');\n      var num = null;\n      arr.forEach(function (o, i) {\n        if (o.indexOf(name) !== -1) {\n          num = o.substr(o.indexOf('=') + 1, o.length);\n        }\n      });\n      return num;\n    }; //openEchart\n\n\n    $scope.openEchart = function (item) {\n      $scope.stockout = item.Stockout;\n      $scope.chartDialog = true;\n      $scope.echartDataX = ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7', 'Day 8', 'Day 9', 'Day 10'];\n      $scope.echartDataY = [];\n\n      for (var idx in item.dateList) {\n        $scope.echartDataY.push(item.dateList[idx]);\n      } //Echart图表\n\n\n      var option = {\n        title: {\n          text: 'Last 10-day consumption'\n        },\n        color: ['#FDA84C'],\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n\n          }\n        },\n        grid: {\n          top: '20%',\n          left: '3%',\n          right: '1%',\n          bottom: '3%',\n          containLabel: true\n        },\n        xAxis: [{\n          type: 'category',\n          data: $scope.echartDataX,\n          axisTick: {\n            alignWithLabel: true\n          },\n          name: '',\n          axisLabel: {\n            interval: 0,\n            formatter: function formatter(value) {\n              var ret = \"\"; //拼接加\\n返回的类目项\n\n              var maxLength = 18; //每项显示文字个数\n\n              var valLength = value.length; //X轴类目项的文字个数\n\n              var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数\n\n              if (rowN > 1) //如果类目项的文字大于3,\n                {\n                  for (var i = 0; i < rowN; i++) {\n                    var temp = \"\"; //每次截取的字符串\n\n                    var start = i * maxLength; //开始截取的位置\n\n                    var end = start + maxLength; //结束截取的位置\n                    //这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧\n\n                    temp = value.substring(start, end) + \"\\n\";\n                    ret += temp; //凭借最终的字符串\n                  }\n\n                  return ret;\n                } else {\n                return value;\n              }\n            }\n          }\n        }],\n        yAxis: [{\n          type: 'value',\n          name: 'Quantity / Piece'\n        }],\n        series: [{\n          name: 'Quantity',\n          type: 'bar',\n          barWidth: '30px',\n          itemStyle: {\n            normal: {\n              label: {\n                show: true,\n                position: 'top',\n                textStyle: {\n                  color: 'black'\n                }\n              }\n            }\n          },\n          data: $scope.echartDataY\n        }]\n      };\n\n      if (typeof echarts === 'undefined') {\n        window.addEventListener('load-script', function (ev) {\n          if (ev.detail.name === 'echarts.common.min.js') {\n            echarts.init(document.getElementById('main')).setOption(option);\n          }\n        });\n      } else {\n        setTimeout(function () {\n          echarts.init(document.getElementById('main')).setOption(option);\n        }, 40);\n      }\n    }; //购买\n    //打开弹窗\n\n\n    var mincount;\n\n    $scope.goBuy = function (item) {\n      if (item.SALESTATUS == '5') {\n        layer.msg('This products had been sold out!');\n        return;\n      }\n\n      $scope.additem = null;\n      $scope.addDialog = true;\n      $scope.currentGoodsId = item.pid;\n      layer.load(2);\n      dsp.postFun('cj/locProduct/huoQuShangPinXiangQing', JSON.stringify({\n        id: item.pid,\n        token: ''\n      }), function (data) {\n        // console.log(data);\n        layer.closeAll('loading');\n        if (data.data.statusCode != 200) return;\n        $scope.additem = data.data.result; // 标示是否有阶梯价格 1 有区间价格 ；不是 1 则没有区间价格\n\n        $scope.discountStatusFlag = $scope.additem.discountStatus;\n\n        if ($scope.discountStatusFlag === 1) {\n          // 如果是有阶梯价格的，请求阶梯价格\n          getPackProductDiscountPriceAll(item.pid);\n        }\n\n        $scope.stanProducts = $scope.additem.stanProducts;\n        $scope.varientArr = [];\n        $scope.varientKeys = [];\n        $scope.itemcount = $scope.additem.setNum || 1;\n        mincount = $scope.additem.setNum || 1;\n\n        if ($scope.additem.VARIANTKEYEN != '') {\n          $scope.varientKeys = $scope.additem.VARIANTKEYEN.split('-');\n\n          for (var i = 0; i < $scope.varientKeys.length; i++) {\n            $scope.varientArr.push({\n              name: $scope.varientKeys[i],\n              key: []\n            });\n          }\n\n          for (var i = 0; i < $scope.stanProducts.length; i++) {\n            if ($scope.stanProducts[i].VARIANTKEY != null) {\n              var curVarientVal = $scope.stanProducts[i].VARIANTKEY.split('-');\n\n              for (var j = 0; j < curVarientVal.length; j++) {\n                $scope.varientArr[j].key.push(curVarientVal[j]);\n              }\n            }\n          }\n\n          for (var i = 0; i < $scope.varientArr.length; i++) {\n            $scope.varientArr[i].key = dsp.uniqueArray($scope.varientArr[i].key);\n            $scope.varientArr[i].val = $scope.varientArr[i].key[0];\n          }\n        } else {\n          $scope.varientArr = [];\n        }\n\n        if ($scope.varientArr.length == 1 && $scope.varientArr[0].key.length == 0) {\n          $scope.varientArr = [];\n        }\n\n        console.log($scope.varientArr);\n        $scope.varientKeysInner = [];\n\n        for (var i = 0; i < $scope.stanProducts.length; i++) {\n          $scope.varientKeysInner.push($scope.stanProducts[i].VARIANTKEY);\n\n          if ($scope.stanProducts[i].sellDiscount != null && $scope.stanProducts[i].sellDiscount < 100) {\n            $scope.stanProducts[i].SELLPRICEDIS = ($scope.stanProducts[i].SELLPRICE * $scope.stanProducts[i].sellDiscount / 100).toFixed(2);\n          } else {\n            $scope.stanProducts[i].SELLPRICEDIS = $scope.stanProducts[i].SELLPRICE;\n          }\n        }\n\n        console.log($scope.varientKeysInner);\n        getTheVitem();\n      }, function (data) {\n        layer.closeAll('loading');\n      });\n    };\n    /**\r\n     * 获取包装商品阶梯价格\r\n     */\n\n\n    function getPackProductDiscountPriceAll(id) {\n      var params = {\n        id: id,\n        num: 1\n      };\n      dsp.postFun('erp/PackProduct/getPackProductDiscountPriceAll', params, function (res) {\n        if (res.data.statusCode === '200') {\n          $scope.discountPriceAll = res.data.result;\n        }\n      }, function (e) {\n        return e;\n      });\n    }\n\n    $scope.chanVariant = function (val, index) {\n      console.log(val);\n      var filterKeysOne = [];\n\n      for (var i = 0; i < $scope.varientKeysInner.length; i++) {\n        var curVarKey = $scope.varientKeysInner[i].split('-');\n\n        if (curVarKey[index] == val) {\n          filterKeysOne.push(curVarKey);\n        }\n      }\n\n      for (var i = 0; i < $scope.varientArr.length; i++) {\n        if (i == index) continue;\n        var canbeTwo = [];\n\n        for (var j = 0; j < filterKeysOne.length; j++) {\n          canbeTwo.push(filterKeysOne[j][i]);\n        }\n\n        var OtherSel1 = $scope.varientArr[i].val;\n        var isInTwo = $.inArray(OtherSel1, canbeTwo);\n\n        if (isInTwo == -1) {\n          $scope.varientArr[i].val = canbeTwo[0];\n        }\n\n        var filterKeysTwo = [];\n        var curValTwo = $scope.varientArr[i].val;\n\n        for (var k = 0; k < filterKeysOne.length; k++) {\n          if (filterKeysOne[k][i] == curValTwo) {\n            filterKeysTwo.push(filterKeysOne[k]);\n          }\n        }\n\n        filterKeysOne = filterKeysTwo;\n      }\n\n      getTheVitem();\n    };\n\n    function getTheVitem() {\n      if ($scope.varientArr.length == 0) {\n        $scope.variantItem = $scope.stanProducts[0];\n      } else {\n        var curVarKeyArr = [];\n\n        for (var i = 0; i < $scope.varientArr.length; i++) {\n          curVarKeyArr.push($scope.varientArr[i].val);\n        }\n\n        $scope.curVarientKey = curVarKeyArr.join('-');\n        var curVarientIndex = dsp.findIndexByKey($scope.stanProducts, 'VARIANTKEY', $scope.curVarientKey);\n        $scope.variantItem = $scope.stanProducts[curVarientIndex];\n      }\n\n      $scope.additem = $scope.variantItem;\n      calcUnitPrice();\n    } //添加到购物车\n\n\n    $scope.addbuy = function ($event) {\n      console.log($scope.variantItem);\n      console.log($scope.additem);\n      var proData = [{\n        BIGIMG: $scope.additem.IMG,\n        ID: $scope.variantItem.ID,\n        NAMEEN: $scope.additem.NAMEEN,\n        SELLPRICE: $scope.variantItem.SELLPRICE,\n        SKU: $scope.variantItem.SKU,\n        //checked: true,\n        itemcount: $scope.itemcount,\n        discountPrice: $scope.currentVarientUnitPrice.toFixed(2)\n      }];\n      localStorage.setItem('packageData', JSON.stringify(proData)); //location.href = '#/myCJ-purchase/' + '//package'\n\n      $state.go('mycj-purchase', {\n        orderType: 'package'\n      });\n    }; //关闭弹窗\n\n\n    $scope.close = function () {\n      $scope.addDialog = false;\n    }; //加减\n\n\n    $scope.plusOne = function () {\n      $scope.itemcount = $scope.itemcount * 1 + 1 + '';\n      calcUnitPrice();\n    };\n\n    $scope.minusOne = function (val) {\n      console.log(mincount);\n      if (val <= mincount) return;\n      $scope.itemcount = $scope.itemcount * 1 - 1 + '';\n      calcUnitPrice();\n    };\n\n    $scope.checkIsNum = function (val) {\n      if (isNaN(val * 1) || val * 1 < 1) {\n        $scope.itemcount = '1';\n      }\n\n      calcUnitPrice();\n    };\n\n    $scope.blurQuantity = function () {\n      if ($scope.itemcount - mincount < 0) {\n        $scope.itemcount = mincount;\n        calcUnitPrice();\n      }\n    }; // 计算单价\n\n\n    function calcUnitPrice() {\n      // 如果有阶梯价格，则计算阶梯价格,\n      if ($scope.discountStatusFlag === 1) {\n        var params = {\n          id: $scope.currentGoodsId,\n          // 商品 id\n          variantId: $scope.variantItem.ID,\n          // 变体 id\n          num: $scope.itemcount // 选择数量\n\n        };\n        dsp.postFun('erp/PackProduct/getVariantDiscountPrice', params, function (res) {\n          if (res.data.statusCode === '200') {\n            $scope.currentVarientUnitPrice = Number(res.data.result.unitPrice);\n            $scope.totalPrice = res.data.result.price;\n          }\n        }, function (e) {\n          return e;\n        });\n      } else {\n        // 否则还是用变体单价\n        $scope.currentVarientUnitPrice = Number($scope.variantItem.SELLPRICE);\n        $scope.totalPrice = $scope.currentVarientUnitPrice * $scope.itemcount;\n      }\n    }\n\n    $scope.meaterial = function (val) {\n      var tag = null;\n      var arr = [{\n        name: 'Plastic bags',\n        prop: 'PLASTIC_BAG'\n      }, {\n        name: 'Cartons',\n        prop: 'PAPER_BOX'\n      }, {\n        name: 'Plastic box',\n        prop: 'PLASTIC_BOX'\n      }, {\n        name: 'Cloth bags',\n        prop: 'FARBIC_BAG'\n      }, {\n        name: 'Paper bags',\n        prop: 'PAPER_BAG'\n      }, {\n        name: 'Tags',\n        prop: 'HANG_TAG'\n      }];\n      arr.forEach(function (o, i) {\n        if (o.prop.includes(val)) tag = o.name;\n      });\n      return tag;\n    }; //隐藏0库存商品\n\n\n    $scope.hideZeroProduct = function () {\n      $scope.isHideZero = !$scope.isHideZero;\n      var isHide = $scope.isHideZero ? '1' : '0';\n      dsp.postFun(\"app/customerConfig/saveConfigByType\", {\n        configValue: isHide,\n        configType: 'isHideZeroPackInventory'\n      }, function (data) {\n        if (data.status === 200) {\n          getData();\n        }\n      });\n    }; //获取上次用户是否隐藏记录\n\n\n    function getUserStockConfig() {\n      dsp.postFun(\"app/customerConfig/getConfigByType\", {\n        configType: 'isHideZeroPackInventory'\n      }, function (data) {\n        if (data.status == 200) {\n          $scope.isHideZero = data.data.result === \"1\" ? true : false;\n        }\n      });\n    }\n\n    getUserStockConfig();\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovaW52ZW50b3J5L3BhY2thZ2UtaW52ZW50b3J5LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3NyYy9wYWdlcy9teWNqL2ludmVudG9yeS9wYWNrYWdlLWludmVudG9yeS5qcz9mYWE4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwYWNrYWdlSW52ZW50b3J5RmFjdG9yeShhbmd1bGFyKSB7XHJcbiAgY29uc3QgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3BhY2thZ2UtaW52ZW50b3J5Lm1vZHVsZScsIFtdKTtcclxuXHJcbiAgYXBwLmNvbnRyb2xsZXIoJ3BhY2thZ2UtaW52ZW50b3J5LmN0cmwnLCBbJyRzY29wZScsICckcm9vdFNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdkc3AnLCAnJHN0YXRlJyxcclxuICAgIGZ1bmN0aW9uICgkc2NvcGUsICRyb290U2NvcGUsICRzdGF0ZVBhcmFtcywgZHNwLCAkc3RhdGUpIHtcclxuICAgICAgZHNwLnNldFJpZ2h0TWluSGVpZ2h0KCk7XHJcbiAgICAgIC8v5pWw5o2u5aOw5piOXHJcbiAgICAgICRzY29wZS5wYWdlTnVtID0gJzEnO1xyXG4gICAgICAkc2NvcGUucGFnZVNpemUgPSAnMTAnO1xyXG4gICAgICAkc2NvcGUudG90YWxOdW0gPSBudWxsO1xyXG4gICAgICAkc2NvcGUuaW5wdXRTdHIgPSAnJztcclxuICAgICAgJHNjb3BlLmRhdGFMaXN0ID0gW107XHJcbiAgICAgICRzY29wZS5jaGFydERpYWxvZyA9IGZhbHNlO1xyXG4gICAgICAkc2NvcGUucGFja1ZpZCA9ICRzdGF0ZVBhcmFtcy5wYWNrVmlkIHx8ICcnO1xyXG4gICAgICAkc2NvcGUuYXNzb2NpYXRpb25UeXBlID0gJHN0YXRlUGFyYW1zLnR5cGUgfHwgJyc7XHJcbiAgICAgICRzY29wZS5pc0hpZGVaZXJvID0gZmFsc2VcclxuICAgICAgY29uc29sZS5sb2coJ2Fzc29jaWF0aW9uVHlwZT09PT4nLCAkc2NvcGUuYXNzb2NpYXRpb25UeXBlKVxyXG4gICAgICBjb25zb2xlLmxvZygncGFja1ZpZD09PT4nLCAkc2NvcGUucGFja1ZpZClcclxuICAgICAgLy/mkJzntKJcclxuICAgICAgJHNjb3BlLnNlYXJjaFBybyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUucGFja1ZpZCA9ICcnO1xyXG4gICAgICAgICRzY29wZS5hc3NvY2lhdGlvblR5cGUgPSAnJztcclxuICAgICAgICAkc2NvcGUucGFnZU51bSA9ICcxJztcclxuICAgICAgICBnZXREYXRhKCk7XHJcbiAgICAgIH07XHJcbiAgICAgICRzY29wZS5lbnRlclNlYXJjaCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAkc2NvcGUuc2VhcmNoUHJvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgJHJvb3RTY29wZS4kb24oJ2NqL1BhY2tQcm9kdWN0L2dldFBhY2tJbnZlbnRvcnknLCAoXywgYm9vbCkgPT4gJHNjb3BlLmxvYWRpbmcgPSBib29sKTtcclxuXHJcbiAgICAgIC8v6I635Y+W5pWw5o2uXHJcbiAgICAgIGZ1bmN0aW9uIGdldERhdGEoKSB7XHJcbiAgICAgICAgdmFyIHBhcm1zID0ge1xyXG4gICAgICAgICAgdHlwZTogJHNjb3BlLmFzc29jaWF0aW9uVHlwZSxcclxuICAgICAgICAgIHBhY2tWaWQ6ICRzY29wZS5wYWNrVmlkLFxyXG4gICAgICAgICAgcGFnZU51bTogJHNjb3BlLnBhZ2VOdW0sXHJcbiAgICAgICAgICBwYWdlU2l6ZTogJHNjb3BlLnBhZ2VTaXplLFxyXG4gICAgICAgICAgc2t1OiAkc2NvcGUuaW5wdXRTdHJcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5kYXRhTGlzdCA9IFtdO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9QYWNrUHJvZHVjdC9nZXRQYWNrSW52ZW50b3J5JywgcGFybXMsIChyZXMpID0+IHtcclxuICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAnMjAwJykge1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0YUxpc3QgPSByZXMuZGF0YS5yZXN1bHQubGlzdDtcclxuICAgICAgICAgICAgJHNjb3BlLnRvdGFsTnVtID0gcmVzLmRhdGEucmVzdWx0LmNvdW50O1xyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IHJlcy5kYXRhLnJlc3VsdC50b3RhbFByaWNlO1xyXG4gICAgICAgICAgICAkc2NvcGUucmV0cmlldmFsTnVtID0gcmVzLmRhdGEucmVzdWx0LnJldHJpZXZhbE51bTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmRhdGFMaXN0KVxyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxDb3VudHMgPSBNYXRoLmNlaWwoJHNjb3BlLnRvdGFsTnVtIC8gJHNjb3BlLnBhZ2VTaXplKTtcclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3BhZ2UtZGF0YScsIHtcclxuICAgICAgICAgICAgICBwYWdlTnVtOiAkc2NvcGUucGFnZU51bSxcclxuICAgICAgICAgICAgICB0b3RhbE51bTogJHNjb3BlLnRvdGFsQ291bnRzLFxyXG4gICAgICAgICAgICAgIHRvdGFsQ291bnRzOiAkc2NvcGUudG90YWxOdW0sXHJcbiAgICAgICAgICAgICAgcGFnZVNpemU6ICRzY29wZS5wYWdlU2l6ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICBnZXREYXRhKCk7XHJcbiAgXHJcbiAgICAgICRzY29wZS4kb24oJ3BhZ2VkYXRhLWZhJywgZnVuY3Rpb24gKGQsIGRhdGEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICRzY29wZS5wYWdlTnVtID0gZGF0YS5wYWdlTnVtO1xyXG4gICAgICAgICRzY29wZS5wYWdlU2l6ZSA9IGRhdGEucGFnZVNpemU7XHJcbiAgICAgICAgZ2V0RGF0YSgpO1xyXG4gICAgICB9KTtcclxuICBcclxuICBcclxuICAgICAgLy/plb/lrr3pq5hcclxuICAgICAgJHNjb3BlLnNpemUgPSBmdW5jdGlvbiAoaXRlbSwgbmFtZSkge1xyXG4gICAgICAgIGxldCBhcnIgPSBpdGVtLlNUQU5EQVJELnNwbGl0KCcsJyk7XHJcbiAgICAgICAgbGV0IG51bSA9IG51bGw7XHJcbiAgICAgICAgYXJyLmZvckVhY2goKG8sIGkpID0+IHtcclxuICAgICAgICAgIGlmIChvLmluZGV4T2YobmFtZSkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIG51bSA9IG8uc3Vic3RyKG8uaW5kZXhPZignPScpICsgMSwgby5sZW5ndGgpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG51bTtcclxuICAgICAgfTtcclxuICAgICAgLy9vcGVuRWNoYXJ0XHJcbiAgICAgICRzY29wZS5vcGVuRWNoYXJ0ID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAkc2NvcGUuc3RvY2tvdXQgPSBpdGVtLlN0b2Nrb3V0O1xyXG4gICAgICAgICRzY29wZS5jaGFydERpYWxvZyA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLmVjaGFydERhdGFYID0gWydEYXkgMScsICdEYXkgMicsICdEYXkgMycsICdEYXkgNCcsICdEYXkgNScsICdEYXkgNicsICdEYXkgNycsICdEYXkgOCcsICdEYXkgOScsICdEYXkgMTAnLF07XHJcbiAgICAgICAgJHNjb3BlLmVjaGFydERhdGFZID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaWR4IGluIGl0ZW0uZGF0ZUxpc3QpIHtcclxuICAgICAgICAgICRzY29wZS5lY2hhcnREYXRhWS5wdXNoKGl0ZW0uZGF0ZUxpc3RbaWR4XSlcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9FY2hhcnTlm77ooahcclxuICAgICAgICB2YXIgb3B0aW9uID0ge1xyXG4gICAgICAgICAgdGl0bGU6IHtcclxuICAgICAgICAgICAgdGV4dDogJ0xhc3QgMTAtZGF5IGNvbnN1bXB0aW9uJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNvbG9yOiBbJyNGREE4NEMnXSxcclxuICAgICAgICAgIHRvb2x0aXA6IHtcclxuICAgICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnLFxyXG4gICAgICAgICAgICBheGlzUG9pbnRlcjogeyAgICAgICAgICAgIC8vIOWdkOagh+i9tOaMh+ekuuWZqO+8jOWdkOagh+i9tOinpuWPkeacieaViFxyXG4gICAgICAgICAgICAgIHR5cGU6ICdzaGFkb3cnICAgICAgICAvLyDpu5jorqTkuLrnm7Tnur/vvIzlj6/pgInkuLrvvJonbGluZScgfCAnc2hhZG93J1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZ3JpZDoge1xyXG4gICAgICAgICAgICB0b3A6ICcyMCUnLFxyXG4gICAgICAgICAgICBsZWZ0OiAnMyUnLFxyXG4gICAgICAgICAgICByaWdodDogJzElJyxcclxuICAgICAgICAgICAgYm90dG9tOiAnMyUnLFxyXG4gICAgICAgICAgICBjb250YWluTGFiZWw6IHRydWVcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB4QXhpczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JyxcclxuICAgICAgICAgICAgICBkYXRhOiAkc2NvcGUuZWNoYXJ0RGF0YVgsXHJcbiAgICAgICAgICAgICAgYXhpc1RpY2s6IHtcclxuICAgICAgICAgICAgICAgIGFsaWduV2l0aExhYmVsOiB0cnVlXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgICBheGlzTGFiZWw6IHtcclxuICAgICAgICAgICAgICAgIGludGVydmFsOiAwLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IFwiXCI7Ly/mi7zmjqXliqBcXG7ov5Tlm57nmoTnsbvnm67poblcclxuICAgICAgICAgICAgICAgICAgdmFyIG1heExlbmd0aCA9IDE4Oy8v5q+P6aG55pi+56S65paH5a2X5Liq5pWwXHJcbiAgICAgICAgICAgICAgICAgIHZhciB2YWxMZW5ndGggPSB2YWx1ZS5sZW5ndGg7Ly9Y6L2057G755uu6aG555qE5paH5a2X5Liq5pWwXHJcbiAgICAgICAgICAgICAgICAgIHZhciByb3dOID0gTWF0aC5jZWlsKHZhbExlbmd0aCAvIG1heExlbmd0aCk7IC8v57G755uu6aG56ZyA6KaB5o2i6KGM55qE6KGM5pWwXHJcbiAgICAgICAgICAgICAgICAgIGlmIChyb3dOID4gMSkvL+WmguaenOexu+ebrumhueeahOaWh+Wtl+Wkp+S6jjMsXHJcbiAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvd047IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBcIlwiOy8v5q+P5qyh5oiq5Y+W55qE5a2X56ym5LiyXHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBpICogbWF4TGVuZ3RoOy8v5byA5aeL5oiq5Y+W55qE5L2N572uXHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gc3RhcnQgKyBtYXhMZW5ndGg7Ly/nu5PmnZ/miKrlj5bnmoTkvY3nva5cclxuICAgICAgICAgICAgICAgICAgICAgIC8v6L+Z6YeM5Lmf5Y+v5Lul5Yqg5LiA5Liq5piv5ZCm5piv5pyA5ZCO5LiA6KGM55qE5Yik5pat77yM5L2G5piv5LiN5Yqg5Lmf5rKh5pyJ5b2x5ZON77yM6YKj5bCx5LiN5Yqg5ZCnXHJcbiAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gdmFsdWUuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpICsgXCJcXG5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldCArPSB0ZW1wOyAvL+WHreWAn+acgOe7iOeahOWtl+espuS4slxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIHlBeGlzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0eXBlOiAndmFsdWUnLFxyXG4gICAgICAgICAgICAgIG5hbWU6ICdRdWFudGl0eSAvIFBpZWNlJyxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIHNlcmllczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgbmFtZTogJ1F1YW50aXR5JyxcclxuICAgICAgICAgICAgICB0eXBlOiAnYmFyJyxcclxuICAgICAgICAgICAgICBiYXJXaWR0aDogJzMwcHgnLFxyXG4gICAgICAgICAgICAgIGl0ZW1TdHlsZToge1xyXG4gICAgICAgICAgICAgICAgbm9ybWFsOiB7XHJcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsYWNrJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgZGF0YTogJHNjb3BlLmVjaGFydERhdGFZXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0eXBlb2YgZWNoYXJ0cyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkLXNjcmlwdCcsIGV2ID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2LmRldGFpbC5uYW1lID09PSAnZWNoYXJ0cy5jb21tb24ubWluLmpzJykge1xyXG4gICAgICAgICAgICAgIGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpKS5zZXRPcHRpb24ob3B0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKSkuc2V0T3B0aW9uKG9wdGlvbik7XHJcbiAgICAgICAgICB9LCA0MCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8v6LSt5LmwXHJcbiAgICAgIC8v5omT5byA5by556qXXHJcbiAgICAgIGxldCBtaW5jb3VudDtcclxuICAgICAgJHNjb3BlLmdvQnV5ID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbS5TQUxFU1RBVFVTID09ICc1Jykge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdUaGlzIHByb2R1Y3RzIGhhZCBiZWVuIHNvbGQgb3V0IScpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLmFkZGl0ZW0gPSBudWxsO1xyXG4gICAgICAgICRzY29wZS5hZGREaWFsb2cgPSB0cnVlO1xyXG4gICAgICAgICRzY29wZS5jdXJyZW50R29vZHNJZCA9IGl0ZW0ucGlkO1xyXG4gICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL2xvY1Byb2R1Y3QvaHVvUXVTaGFuZ1BpblhpYW5nUWluZycsIEpTT04uc3RyaW5naWZ5KHsgaWQ6IGl0ZW0ucGlkLCB0b2tlbjogJycgfSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgIT0gMjAwKSByZXR1cm47XHJcbiAgICAgICAgICAkc2NvcGUuYWRkaXRlbSA9IGRhdGEuZGF0YS5yZXN1bHQ7XHJcblxyXG4gICAgICAgICAgIC8vIOagh+ekuuaYr+WQpuaciemYtuair+S7t+agvCAxIOacieWMuumXtOS7t+agvCDvvJvkuI3mmK8gMSDliJnmsqHmnInljLrpl7Tku7fmoLxcclxuICAgICAgICAgICAkc2NvcGUuZGlzY291bnRTdGF0dXNGbGFnID0gJHNjb3BlLmFkZGl0ZW0uZGlzY291bnRTdGF0dXNcclxuXHJcblxyXG4gICAgICAgICAgIGlmKCRzY29wZS5kaXNjb3VudFN0YXR1c0ZsYWcgPT09IDEpe1xyXG4gICAgICAgICAgICAgLy8g5aaC5p6c5piv5pyJ6Zi25qKv5Lu35qC855qE77yM6K+35rGC6Zi25qKv5Lu35qC8XHJcbiAgICAgICAgICAgICBnZXRQYWNrUHJvZHVjdERpc2NvdW50UHJpY2VBbGwoaXRlbS5waWQpXHJcbiAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICRzY29wZS5zdGFuUHJvZHVjdHMgPSAkc2NvcGUuYWRkaXRlbS5zdGFuUHJvZHVjdHM7XHJcbiAgICAgICAgICAkc2NvcGUudmFyaWVudEFyciA9IFtdO1xyXG4gICAgICAgICAgJHNjb3BlLnZhcmllbnRLZXlzID0gW107XHJcbiAgICAgICAgICAkc2NvcGUuaXRlbWNvdW50ID0gJHNjb3BlLmFkZGl0ZW0uc2V0TnVtIHx8IDE7XHJcbiAgICAgICAgICBtaW5jb3VudCA9ICRzY29wZS5hZGRpdGVtLnNldE51bSB8fCAxO1xyXG4gICAgICAgICAgaWYgKCRzY29wZS5hZGRpdGVtLlZBUklBTlRLRVlFTiAhPSAnJykge1xyXG4gICAgICAgICAgICAkc2NvcGUudmFyaWVudEtleXMgPSAkc2NvcGUuYWRkaXRlbS5WQVJJQU5US0VZRU4uc3BsaXQoJy0nKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUudmFyaWVudEtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAkc2NvcGUudmFyaWVudEFyci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICRzY29wZS52YXJpZW50S2V5c1tpXSxcclxuICAgICAgICAgICAgICAgIGtleTogW11cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5zdGFuUHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICBpZiAoJHNjb3BlLnN0YW5Qcm9kdWN0c1tpXS5WQVJJQU5US0VZICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJWYXJpZW50VmFsID0gJHNjb3BlLnN0YW5Qcm9kdWN0c1tpXS5WQVJJQU5US0VZLnNwbGl0KCctJyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGN1clZhcmllbnRWYWwubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLnZhcmllbnRBcnJbal0ua2V5LnB1c2goY3VyVmFyaWVudFZhbFtqXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnZhcmllbnRBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAkc2NvcGUudmFyaWVudEFycltpXS5rZXkgPSBkc3AudW5pcXVlQXJyYXkoJHNjb3BlLnZhcmllbnRBcnJbaV0ua2V5KTtcclxuICAgICAgICAgICAgICAkc2NvcGUudmFyaWVudEFycltpXS52YWwgPSAkc2NvcGUudmFyaWVudEFycltpXS5rZXlbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRzY29wZS52YXJpZW50QXJyID0gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLnZhcmllbnRBcnIubGVuZ3RoID09IDEgJiYgJHNjb3BlLnZhcmllbnRBcnJbMF0ua2V5Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICRzY29wZS52YXJpZW50QXJyID0gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudmFyaWVudEFycik7XHJcbiAgICAgICAgICAkc2NvcGUudmFyaWVudEtleXNJbm5lciA9IFtdO1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc3RhblByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICRzY29wZS52YXJpZW50S2V5c0lubmVyLnB1c2goJHNjb3BlLnN0YW5Qcm9kdWN0c1tpXS5WQVJJQU5US0VZKTtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zdGFuUHJvZHVjdHNbaV0uc2VsbERpc2NvdW50ICE9IG51bGwgJiYgJHNjb3BlLnN0YW5Qcm9kdWN0c1tpXS5zZWxsRGlzY291bnQgPCAxMDApIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuc3RhblByb2R1Y3RzW2ldLlNFTExQUklDRURJUyA9ICgkc2NvcGUuc3RhblByb2R1Y3RzW2ldLlNFTExQUklDRSAqICRzY29wZS5zdGFuUHJvZHVjdHNbaV0uc2VsbERpc2NvdW50IC8gMTAwKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICRzY29wZS5zdGFuUHJvZHVjdHNbaV0uU0VMTFBSSUNFRElTID0gJHNjb3BlLnN0YW5Qcm9kdWN0c1tpXS5TRUxMUFJJQ0U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS52YXJpZW50S2V5c0lubmVyKTtcclxuICAgICAgICAgIGdldFRoZVZpdGVtKCk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiDojrflj5bljIXoo4XllYblk4HpmLbmoq/ku7fmoLxcclxuICAgICAgICovXHJcbiAgICAgIGZ1bmN0aW9uIGdldFBhY2tQcm9kdWN0RGlzY291bnRQcmljZUFsbChpZCkge1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIG51bToxXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdlcnAvUGFja1Byb2R1Y3QvZ2V0UGFja1Byb2R1Y3REaXNjb3VudFByaWNlQWxsJywgcGFyYW1zLChyZXMpID0+IHtcclxuICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAnMjAwJykge1xyXG4gICAgICAgICAgICAkc2NvcGUuZGlzY291bnRQcmljZUFsbCA9IHJlcy5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LGU9PmUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuY2hhblZhcmlhbnQgPSBmdW5jdGlvbiAodmFsLCBpbmRleCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHZhbClcclxuICAgICAgICB2YXIgZmlsdGVyS2V5c09uZSA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnZhcmllbnRLZXlzSW5uZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHZhciBjdXJWYXJLZXkgPSAkc2NvcGUudmFyaWVudEtleXNJbm5lcltpXS5zcGxpdCgnLScpO1xyXG4gICAgICAgICAgaWYgKGN1clZhcktleVtpbmRleF0gPT0gdmFsKSB7XHJcbiAgICAgICAgICAgIGZpbHRlcktleXNPbmUucHVzaChjdXJWYXJLZXkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS52YXJpZW50QXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoaSA9PSBpbmRleCkgY29udGludWU7XHJcbiAgICAgICAgICB2YXIgY2FuYmVUd28gPSBbXTtcclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZmlsdGVyS2V5c09uZS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBjYW5iZVR3by5wdXNoKGZpbHRlcktleXNPbmVbal1baV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIE90aGVyU2VsMSA9ICRzY29wZS52YXJpZW50QXJyW2ldLnZhbDtcclxuICAgICAgICAgIHZhciBpc0luVHdvID0gJC5pbkFycmF5KE90aGVyU2VsMSwgY2FuYmVUd28pO1xyXG4gICAgICAgICAgaWYgKGlzSW5Ud28gPT0gLTEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnZhcmllbnRBcnJbaV0udmFsID0gY2FuYmVUd29bMF07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgZmlsdGVyS2V5c1R3byA9IFtdO1xyXG4gICAgICAgICAgdmFyIGN1clZhbFR3byA9ICRzY29wZS52YXJpZW50QXJyW2ldLnZhbDtcclxuICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZmlsdGVyS2V5c09uZS5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyS2V5c09uZVtrXVtpXSA9PSBjdXJWYWxUd28pIHtcclxuICAgICAgICAgICAgICBmaWx0ZXJLZXlzVHdvLnB1c2goZmlsdGVyS2V5c09uZVtrXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZpbHRlcktleXNPbmUgPSBmaWx0ZXJLZXlzVHdvO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnZXRUaGVWaXRlbSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBnZXRUaGVWaXRlbSgpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnZhcmllbnRBcnIubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICRzY29wZS52YXJpYW50SXRlbSA9ICRzY29wZS5zdGFuUHJvZHVjdHNbMF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhciBjdXJWYXJLZXlBcnIgPSBbXTtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnZhcmllbnRBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY3VyVmFyS2V5QXJyLnB1c2goJHNjb3BlLnZhcmllbnRBcnJbaV0udmFsKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICRzY29wZS5jdXJWYXJpZW50S2V5ID0gY3VyVmFyS2V5QXJyLmpvaW4oJy0nKTtcclxuICAgICAgICAgIHZhciBjdXJWYXJpZW50SW5kZXggPSBkc3AuZmluZEluZGV4QnlLZXkoJHNjb3BlLnN0YW5Qcm9kdWN0cywgJ1ZBUklBTlRLRVknLCAkc2NvcGUuY3VyVmFyaWVudEtleSk7XHJcbiAgICAgICAgICAkc2NvcGUudmFyaWFudEl0ZW0gPSAkc2NvcGUuc3RhblByb2R1Y3RzW2N1clZhcmllbnRJbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5hZGRpdGVtID0gJHNjb3BlLnZhcmlhbnRJdGVtO1xyXG4gICAgICAgIGNhbGNVbml0UHJpY2UoKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+a3u+WKoOWIsOi0reeJqei9plxyXG4gICAgICAkc2NvcGUuYWRkYnV5ID0gZnVuY3Rpb24gKCRldmVudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS52YXJpYW50SXRlbSlcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYWRkaXRlbSlcclxuICAgICAgICB2YXIgcHJvRGF0YSA9IFt7XHJcbiAgICAgICAgICBCSUdJTUc6ICRzY29wZS5hZGRpdGVtLklNRyxcclxuICAgICAgICAgIElEOiAkc2NvcGUudmFyaWFudEl0ZW0uSUQsXHJcbiAgICAgICAgICBOQU1FRU46ICRzY29wZS5hZGRpdGVtLk5BTUVFTixcclxuICAgICAgICAgIFNFTExQUklDRTogJHNjb3BlLnZhcmlhbnRJdGVtLlNFTExQUklDRSxcclxuICAgICAgICAgIFNLVTogJHNjb3BlLnZhcmlhbnRJdGVtLlNLVSxcclxuICAgICAgICAgIC8vY2hlY2tlZDogdHJ1ZSxcclxuICAgICAgICAgIGl0ZW1jb3VudDogJHNjb3BlLml0ZW1jb3VudCxcclxuICAgICAgICAgIGRpc2NvdW50UHJpY2U6KCRzY29wZS5jdXJyZW50VmFyaWVudFVuaXRQcmljZSkudG9GaXhlZCgyKVxyXG4gICAgICAgIH1dXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhY2thZ2VEYXRhJywgSlNPTi5zdHJpbmdpZnkocHJvRGF0YSkpO1xyXG4gICAgICAgIC8vbG9jYXRpb24uaHJlZiA9ICcjL215Q0otcHVyY2hhc2UvJyArICcvL3BhY2thZ2UnXHJcbiAgICAgICAgJHN0YXRlLmdvKCdteWNqLXB1cmNoYXNlJywgeyBvcmRlclR5cGU6ICdwYWNrYWdlJyB9KTtcclxuICAgICAgfVxyXG4gICAgICAvL+WFs+mXreW8ueeql1xyXG4gICAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLmFkZERpYWxvZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIC8v5Yqg5YePXHJcbiAgICAgICRzY29wZS5wbHVzT25lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5pdGVtY291bnQgPSAkc2NvcGUuaXRlbWNvdW50ICogMSArIDEgKyAnJztcclxuICAgICAgICBjYWxjVW5pdFByaWNlKClcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUubWludXNPbmUgPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cobWluY291bnQpO1xyXG4gICAgICAgIGlmICh2YWwgPD0gbWluY291bnQpIHJldHVybjtcclxuICAgICAgICAkc2NvcGUuaXRlbWNvdW50ID0gJHNjb3BlLml0ZW1jb3VudCAqIDEgLSAxICsgJyc7XHJcbiAgICAgICAgY2FsY1VuaXRQcmljZSgpXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmNoZWNrSXNOdW0gPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgaWYgKGlzTmFOKHZhbCAqIDEpIHx8IHZhbCAqIDEgPCAxKSB7XHJcbiAgICAgICAgICAkc2NvcGUuaXRlbWNvdW50ID0gJzEnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhbGNVbml0UHJpY2UoKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuYmx1clF1YW50aXR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkc2NvcGUuaXRlbWNvdW50IC0gbWluY291bnQgPCAwICkge1xyXG4gICAgICAgICAgJHNjb3BlLml0ZW1jb3VudCA9IG1pbmNvdW50O1xyXG4gICAgICAgICAgY2FsY1VuaXRQcmljZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAgLy8g6K6h566X5Y2V5Lu3XHJcbiAgICAgIGZ1bmN0aW9uIGNhbGNVbml0UHJpY2UoKXtcclxuXHJcbiAgICAgICAgLy8g5aaC5p6c5pyJ6Zi25qKv5Lu35qC877yM5YiZ6K6h566X6Zi25qKv5Lu35qC8LFxyXG4gICAgICAgIGlmKCRzY29wZS5kaXNjb3VudFN0YXR1c0ZsYWcgPT09IDEpe1xyXG4gICAgICAgICAgbGV0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgaWQ6JHNjb3BlLmN1cnJlbnRHb29kc0lkLCAvLyDllYblk4EgaWRcclxuICAgICAgICAgICAgdmFyaWFudElkOiRzY29wZS52YXJpYW50SXRlbS5JRCwgLy8g5Y+Y5L2TIGlkXHJcbiAgICAgICAgICAgIG51bTokc2NvcGUuaXRlbWNvdW50IC8vIOmAieaLqeaVsOmHj1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZHNwLnBvc3RGdW4oJ2VycC9QYWNrUHJvZHVjdC9nZXRWYXJpYW50RGlzY291bnRQcmljZScsIHBhcmFtcywocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAnMjAwJykge1xyXG4gICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VmFyaWVudFVuaXRQcmljZSA9IE51bWJlcihyZXMuZGF0YS5yZXN1bHQudW5pdFByaWNlKVxyXG4gICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gcmVzLmRhdGEucmVzdWx0LnByaWNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sZT0+ZSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgLy8g5ZCm5YiZ6L+Y5piv55So5Y+Y5L2T5Y2V5Lu3XHJcbiAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRWYXJpZW50VW5pdFByaWNlID0gTnVtYmVyKCRzY29wZS52YXJpYW50SXRlbS5TRUxMUFJJQ0UpXHJcbiAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAkc2NvcGUuY3VycmVudFZhcmllbnRVbml0UHJpY2UgKiAkc2NvcGUuaXRlbWNvdW50XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLm1lYXRlcmlhbCA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICB2YXIgdGFnID0gbnVsbDtcclxuICAgICAgICB2YXIgYXJyID0gW1xyXG4gICAgICAgICAgeyBuYW1lOiAnUGxhc3RpYyBiYWdzJywgcHJvcDogJ1BMQVNUSUNfQkFHJyB9LFxyXG4gICAgICAgICAgeyBuYW1lOiAnQ2FydG9ucycsIHByb3A6ICdQQVBFUl9CT1gnIH0sXHJcbiAgICAgICAgICB7IG5hbWU6ICdQbGFzdGljIGJveCcsIHByb3A6ICdQTEFTVElDX0JPWCcgfSxcclxuICAgICAgICAgIHsgbmFtZTogJ0Nsb3RoIGJhZ3MnLCBwcm9wOiAnRkFSQklDX0JBRycgfSxcclxuICAgICAgICAgIHsgbmFtZTogJ1BhcGVyIGJhZ3MnLCBwcm9wOiAnUEFQRVJfQkFHJyB9LFxyXG4gICAgICAgICAgeyBuYW1lOiAnVGFncycsIHByb3A6ICdIQU5HX1RBRycgfVxyXG4gICAgICAgIF1cclxuICAgICAgICBhcnIuZm9yRWFjaCgobywgaSkgPT4ge1xyXG4gICAgICAgICAgaWYgKG8ucHJvcC5pbmNsdWRlcyh2YWwpKSB0YWcgPSBvLm5hbWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXR1cm4gdGFnO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy/pmpDol48w5bqT5a2Y5ZWG5ZOBXHJcbiAgICAgICRzY29wZS5oaWRlWmVyb1Byb2R1Y3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUuaXNIaWRlWmVybyA9ICEkc2NvcGUuaXNIaWRlWmVybztcclxuICAgICAgICBjb25zdCBpc0hpZGUgPSAkc2NvcGUuaXNIaWRlWmVybyA/ICcxJyA6ICcwJztcclxuXHJcbiAgICAgICAgZHNwLnBvc3RGdW4oXCJhcHAvY3VzdG9tZXJDb25maWcvc2F2ZUNvbmZpZ0J5VHlwZVwiLCB7IGNvbmZpZ1ZhbHVlOiBpc0hpZGUsIGNvbmZpZ1R5cGU6ICdpc0hpZGVaZXJvUGFja0ludmVudG9yeScgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgIGdldERhdGEoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIC8v6I635Y+W5LiK5qyh55So5oi35piv5ZCm6ZqQ6JeP6K6w5b2VXHJcbiAgICAgIGZ1bmN0aW9uIGdldFVzZXJTdG9ja0NvbmZpZyAoKSB7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oXCJhcHAvY3VzdG9tZXJDb25maWcvZ2V0Q29uZmlnQnlUeXBlXCIsIHtcclxuICAgICAgICAgIGNvbmZpZ1R5cGU6ICdpc0hpZGVaZXJvUGFja0ludmVudG9yeSdcclxuICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaXNIaWRlWmVybyA9IGRhdGEuZGF0YS5yZXN1bHQgPT09IFwiMVwiID8gdHJ1ZSA6ZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICBnZXRVc2VyU3RvY2tDb25maWcoKTtcclxuICAgICAgXHJcbiAgICB9XSk7XHJcblxyXG4gIHJldHVybiBhcHA7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUF0QkE7QUFQQTtBQWlDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBREE7QUFEQTtBQVdBO0FBZkE7QUEzREE7QUFDQTtBQTZFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../src/pages/mycj/inventory/package-inventory.js\n");

/***/ })

}]);