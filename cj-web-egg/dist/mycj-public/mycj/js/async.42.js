(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[42],{

/***/ "../src/pages/mycj/listed/listed.js":
/*!******************************************!*\
  !*** ../src/pages/mycj/listed/listed.js ***!
  \******************************************/
/*! exports provided: listedFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"listedFactory\", function() { return listedFactory; });\nfunction listedFactory(angular) {\n  var app = angular.module('mycj-listed.module', []);\n  var winHeight = $(window).height() * 1;\n  var skuPicHeight = winHeight - 339;\n  var liststatus = '';\n  app.controller('mycj-listed.ctrl', ['$scope', '$rootScope', '$stateParams', 'dsp', '$timeout', '$location', function ($scope, $rootScope, $stateParams, dsp, $timeout, $location) {\n    dsp.domainData().then(function (res) {\n      $scope.iscj = res.iscj;\n\n      if ($scope.iscj == '1') {\n        //cj\n        $scope.websiteName = 'CJ';\n      } else {\n        //客户\n        $scope.websiteName = res.websiteName || 'CJ';\n      }\n    });\n    var base64 = new Base64();\n    var userId = base64.decode(localStorage.getItem('userId') == undefined ? \"\" : localStorage.getItem('userId'));\n    dsp.setRightMinHeight();\n    $scope.listedList = [];\n    $scope.listedsearch = '';\n    $scope.listedpagesize = '10';\n    $scope.listedpagenum = '1';\n    $scope.listedTotalNum = '';\n    $scope.listedTotalPage = '';\n    $scope.listedsearch = '';\n    $scope.shopId = '';\n    $scope.listCheckLen = 0;\n    $scope.getListedUrl = 'app/rebate/getAssignAndVisibility';\n    $scope.authorizationExpired = false;\n\n    if (localStorage.getItem('vip') == 1) {\n      $scope.isVip = true;\n    } else {\n      $scope.isVip = false;\n    } // 刊登列表状态\n\n\n    $scope.status = $stateParams.status ? $stateParams.status : '-1';\n    console.log($scope.status); //-1--刊登成功,0--待刊登，1--刊登中，2--刊登失败\n\n    var listDataObj = {\n      \"-1\": \"pojo/product/getListedCj\",\n      \"0\": \"cj/listedproduct/list\",\n      \"1\": \"cj/listedproduct/list\",\n      \"2\": \"cj/listedproduct/list\"\n    }; // 编辑刊登\n\n    $scope.editList = function (item, index) {\n      editIndex = index;\n      $scope.$broadcast('showeditframe', {\n        from: '2',\n        pid: item.ID\n      });\n    };\n\n    $scope.$on('editListSuccess', function (d, data) {\n      $scope.getListedPost();\n    }); // 选择某一个\n\n    $scope.checkOne = function (item, index) {\n      item.check = !item.check;\n      $scope.checkAllList = false;\n      $scope.banListItems = $scope.listedList.filter(function (e) {\n        return e.check;\n      });\n      $scope.listCheckLen = $scope.banListItems.length;\n\n      if ($scope.banListItems.length == $scope.listedList.length) {\n        $scope.check_All = true;\n      } else {\n        $scope.check_All = false;\n      }\n    }; //全选当前页\n\n\n    $scope.checkAll = function (val) {\n      if (val == 'all') {\n        $scope.checkAllList = !$scope.checkAllList;\n        $scope.listCheckLen = $scope.checkAllList ? $scope.listedTotalNum : 0;\n        $scope.check_All = $scope.checkAllList ? true : false;\n      } else {\n        $scope.check_All = !$scope.check_All;\n        $scope.checkAllList = false;\n        $scope.banListItems = $scope.check_All ? $scope.listedList : [];\n        $scope.listCheckLen = $scope.banListItems.length;\n      }\n\n      $scope.listedList.forEach(function (e) {\n        e.check = $scope.check_All;\n      });\n    };\n\n    $scope.banListItems = []; //\n\n    $scope.banchList = function () {\n      if (!$scope.checkAllList) {\n        getSelectFun();\n      }\n\n      $scope.confirmDelLayer = true;\n    };\n\n    $scope.goActBanList = function () {\n      for (var i = 0; i < $scope.banListItems.length; i++) {\n        if (!$scope.banListItems[i].SHOPNAME || $scope.banListItems[i].ACCPRICE == '0.0') {\n          layer.msg('Products information short, please optimize products detail and try again.');\n          return;\n        }\n      }\n\n      var banchListIds = [];\n      $scope.listedList.forEach(function (e) {\n        e.check ? banchListIds.push(e.ID) : '';\n      });\n      console.log(banchListIds);\n      dsp.postFun('cj/listedproduct/submit', banchListIds, function (data) {\n        if (data.data.statusCode == 200) {\n          layer.msg('Submit Successfully');\n          $scope.confirmBanListFlag = 0;\n          $scope.getListedPost();\n        } else {\n          layer.msg('Submit Failed');\n        }\n      });\n    };\n\n    function settleData(result) {\n      var list = result.products;\n      var remarkArr = result.remark || [];\n      console.log(list);\n\n      for (var i = 0; i < list.length; i++) {\n        if (list[i].BIGIMG) {\n          list[i].BIGIMG = list[i].BIGIMG.replace('https://', '').replace('http://', '');\n          list[i].BIGIMG = 'https://' + list[i].BIGIMG;\n        }\n\n        list[i].INVENTORCOUNTRY = list[i].INVENTORCOUNTRY ? JSON.parse(list[i].INVENTORCOUNTRY) : {\n          China: 0,\n          US: 0\n        };\n        list[i].decountry = null;\n        list[i].deltPrice = 0;\n\n        if (list[i].ACCPRICE) {\n          list[i].ACCPRICE = \"\".concat(list[i].ACCPRICE);\n        }\n\n        if (list[i].deltPrice) {\n          list[i].AMOUNTPRICE = dsp.cacuAmount(list[i].SELLPRICE, list[i].deltPrice);\n        } else {\n          list[i].AMOUNTPRICE = list[i].SELLPRICE;\n        }\n\n        for (var j = 0; j < remarkArr.length; j++) {\n          if (list[i].LOGISTICS && list[i].LOGISTICS == remarkArr[j].nameen) {\n            list[i].wuliuRemark = remarkArr[j].remark;\n            break;\n          }\n        } // 物流试算组件用\n\n\n        list[i].shipinfo = {\n          weight: list[i].PACKWEIGHT,\n          enName: list[i].LOGISTICS,\n          shopType: list[i].SHOPTYPE,\n          pid: list[i].PID,\n          // shipDiscount: list[i].discountShopRate,\n          areaCountryCode: list[i].areaCountryCode,\n          index1: i\n        };\n      }\n\n      $scope.listedList = list;\n      console.log($scope.listedList);\n    } // 物流试算组件返回值接收\n\n\n    $scope.$on('saveShipPrice', function (d, data) {\n      if (data.shipDiscountPrice) {\n        $scope.listedList[data.index1].isProAmountTip = false;\n      }\n\n      $scope.listedList[data.index1].AMOUNTPRICE = dsp.cacuAmount($scope.listedList[data.index1].SELLPRICE, data.shipDiscountPrice || 0);\n      setTimeout(function () {\n        $scope.$apply();\n      });\n    }); //开启刊登任务之后轮询执行每一条刊登,status为1时\n\n    $scope.listIndex = 0;\n    $scope.progressLength = 0;\n    $scope.checkAllList = false; //是否全部选择\n\n    $scope.listCountdownObj = {\n      isShow: false,\n      time: 30\n    };\n    var timer = null;\n\n    function startListFun() {\n      dsp.postFun('listed_products/listedLocproduct/do', {\n        id: $scope.listedList[$scope.listIndex].ID\n      }, function (data) {\n        layer.closeAll('loading');\n        var ocode = data.data.statusCode;\n\n        if (ocode == 801 || ocode == 804) {\n          $scope.listedList[$scope.listIndex].status = 2;\n        } else {\n          $scope.listedList[$scope.listIndex].status = 3;\n        }\n\n        $scope.progressLength = (Number($scope.listIndex - 0 + 1) / Number($scope.listedList.length) * 100).toFixed(0);\n\n        if ($scope.listIndex == $scope.listedList.length - 1 && $scope.listedList.length == 100) {\n          var countDownFun = function countDownFun() {\n            if ($scope.listCountdownObj.time > 0) {\n              $scope.listCountdownObj.time -= 1;\n              timer = setTimeout(countDownFun, 1000);\n\n              if ($scope.listCountdownObj.time < 29) {\n                $scope.$apply();\n              }\n            } else {\n              clearTimeout(timer);\n              $scope.getListedPost();\n            }\n          };\n\n          //\n          $scope.listCountdownObj.isShow = true;\n          countDownFun();\n        }\n\n        if ($scope.listIndex < $scope.listedList.length - 1 && liststatus == 1) {\n          $scope.listIndex += 1;\n          startListFun();\n        }\n      });\n    }\n\n    function getShopList() {\n      //        const msgLoading = cjMessage.loading({ isFixed: true });\n      //获取店铺列表\n      dsp.postFun('app/shop/getshop', {\n        data: JSON.stringify({\n          userId: userId\n        })\n      }, function (res) {\n        // msgLoading.hide();\n        var obj = JSON.parse(res.data.result);\n        $scope.shopList = obj.shoplist;\n      }, function () {// msgLoading.hide();\n      });\n    }\n\n    function resetListing() {\n      //重置listing数据\n      clearTimeout(timer);\n      $scope.listIndex = 0;\n      $scope.listCountdownObj = {\n        isShow: false,\n        time: 30\n      };\n      $scope.progressLength = 0; //百分比进度条重置为0\n\n      $scope.check_All = false;\n      $scope.listCheckLen = 0;\n      $scope.checkAllList = false;\n    }\n\n    $scope.getListedPost = function () {\n      resetListing();\n      var getListedList = {\n        pageNum: $scope.listedpagenum + '',\n        pageSize: ($scope.status == 1 ? 100 : $scope.listedpagesize) + '',\n        shopId: $scope.shopId,\n        inputStr: $scope.listedsearch,\n        status: $scope.status\n      };\n      $scope.listedList = [];\n      dsp.loadPercent($('.cj-load-wrap'), skuPicHeight);\n      dsp.postFun(listDataObj[$scope.status], JSON.stringify(getListedList), function (data) {\n        dsp.closeLoadPercent($('.cj-load-wrap'));\n        var data = data.data;\n\n        if (data.statusCode != 200 || data.result == '') {\n          $scope.listedList = [];\n          $scope.listedTotalNum = 0;\n          $scope.listedTotalPage = 0;\n          $scope.hasListedData = false;\n          $scope.noListedData = true;\n          return false;\n        }\n\n        var result = JSON.parse(data.result);\n\n        if (result.totle == 0) {\n          $scope.listedList = [];\n          $scope.listedTotalNum = 0;\n          $scope.listedTotalPage = 0;\n          $scope.hasListedData = false;\n          $scope.noListedData = true;\n          console.log(data);\n          return false;\n        }\n\n        $scope.listedTotalNum = result.totle;\n        $scope.listedTotalPage = Math.ceil($scope.listedTotalNum * 1 / ($scope.listedpagesize * 1));\n        $scope.hasListedData = true;\n        $scope.noListedData = false;\n        settleData(result);\n\n        if ($scope.status == '1' && $scope.listedList.length > 0) {\n          liststatus = 1; //当前在轮询刊登列表\n\n          $scope.listedList = $scope.listedList.map(function (item) {\n            item.status = 1;\n            return item;\n          });\n          startListFun();\n        } else {\n          liststatus = 2; //当前不在轮询刊登列表\n        }\n\n        if ($scope.status == '-1' || $scope.status == '2') {\n          //在listed与list Fail列表时请求店铺接口\n          getShopList();\n        }\n\n        $scope.$broadcast('page-data', {\n          pageNum: $scope.listedpagenum * 1,\n          totalNum: $scope.listedTotalPage,\n          totalCounts: $scope.listedTotalNum * 1,\n          pageSize: $scope.listedpagesize,\n          pagesizeList: ['10', '20', '50']\n        });\n      });\n    };\n\n    $scope.getListedPost();\n    $scope.$on('pagedata-fa', function (d, data) {\n      //分页切换数据监听\n      $scope.listedpagenum = data.pageNum;\n      $scope.listedpagesize = data.pageSize;\n      $scope.getListedPost();\n    });\n\n    $scope.enterSearch = function (event) {\n      if (event.keyCode == 13) {\n        $scope.getListedPost();\n      }\n    };\n\n    var deleteItem = {};\n    $scope.content = 'Are you sure to delete it?'; // $scope.title = 'Prompt';\n\n    $scope.title = '';\n\n    $scope.listeddelet = function (item, index) {\n      deleteItem = item;\n      deleteItem.index = index;\n      $scope.confirmDelLayer = true;\n      $scope.banListItems.push(item);\n      $scope.queueParams.ids = [item.ID];\n    }; // 获取弹窗组件关闭按钮\n\n\n    $scope.$on('closePopUps', function (e, data) {\n      $scope.confirmDelLayer = data.showPopUps;\n    }); // 获取弹窗组件确定按钮\n\n    $scope.$on('confirmPopUps', function (e, data) {\n      if ($scope.status == '-1') {\n        $scope.doDelete();\n      } else if ($scope.status == 0 || $scope.status == 2) {\n        $scope.doDelete2();\n      }\n    });\n\n    $scope.handleCancelAuthorization = function () {\n      $scope.authorizationExpired = false;\n    };\n\n    $scope.handleConfirmAuthorization = function () {\n      var shopType = replaceStr(deleteItem.SHOPTYPE);\n\n      function replaceStr(str) {\n        // 正则使首字母大写\n        str = str.toLowerCase();\n        var reg = /\\b(\\w)|\\s(\\w)/g; //  \\b判断边界\\s判断空格\n\n        return str.replace(reg, function (m) {\n          return m.toUpperCase();\n        });\n      }\n\n      if (shopType) {\n        $location.path(\"/authorize/\".concat(shopType)).search({\n          track: '',\n          storeName: \"\".concat(deleteItem.SHOPNAME)\n        });\n      }\n\n      $scope.handleCancelAuthorization();\n    };\n\n    $scope.isRutter = function (type) {\n      return /(etsy|wix)/i.test(type);\n    };\n\n    $scope.doDelete = function () {\n      //在listed的tab使用\n      if (deleteItem.SHOPTYPE == \"Woocommerce\") {\n        var msgLoading = cjMessage.loading({\n          isFixed: true\n        });\n        dsp.getFun('woo/wooDeleteProduct?id=' + deleteItem.ID, function (data) {\n          msgLoading.hide();\n\n          if (data.data.code == 200) {\n            $scope.listedList.splice(deleteItem.index, 1);\n            $scope.confirmDelLayer = 0;\n          } else if (data.data.code == 209) {\n            // 店铺处于授权失效状态\n            $scope.confirmDelLayer = false;\n            $scope.authorizationExpired = true;\n            return false;\n          } else {\n            layer.msg('The product cannot be deleted because the store is deactivated.');\n          }\n        }, function () {\n          msgLoading.hide();\n        });\n      } else if (deleteItem.SHOPTYPE == \"Lazada\") {\n        var _msgLoading = cjMessage.loading({\n          isFixed: true\n        });\n\n        dsp.postFun('lazada/product/deleteProductById', {\n          'shopId': deleteItem.SHOPID,\n          'accPid': deleteItem.ACCPID\n        }, function (data) {\n          _msgLoading.hide();\n\n          var data = data.data;\n\n          if (data.statusCode == 209) {\n            // 店铺处于授权失效状态\n            $scope.confirmDelLayer = false;\n            $scope.authorizationExpired = true;\n            return false;\n          }\n\n          if (data.statusCode != 200) {\n            layer.msg('The product cannot be deleted because the store is deactivated.');\n            return false;\n          }\n\n          layer.msg('Delete successfully', {\n            time: 1000\n          });\n          $scope.getListedPost(); // 刷新列表\n\n          $scope.confirmDelLayer = 0;\n        }, function () {\n          _msgLoading.hide();\n        });\n      } else if (deleteItem.SHOPTYPE == \"shopee\") {\n        var _msgLoading2 = cjMessage.loading({\n          isFixed: true\n        });\n\n        dsp.postFun('shopee/product/deleteProductById', {\n          'shopId': deleteItem.SHOPID,\n          'accPid': deleteItem.ACCPID\n        }, function (data) {\n          _msgLoading2.hide();\n\n          var data = data.data;\n\n          if (data.statusCode == 209) {\n            // 店铺处于授权失效状态\n            $scope.confirmDelLayer = false;\n            $scope.authorizationExpired = true;\n            return false;\n          }\n\n          if (data.statusCode != 200) {\n            layer.msg('The product cannot be deleted because the store is deactivated.');\n            return false;\n          }\n\n          layer.msg('Delete successfully', {\n            time: 1000\n          });\n          $scope.getListedPost(); // 刷新列表\n\n          $scope.confirmDelLayer = 0;\n        }, function () {\n          _msgLoading2.hide();\n        }, function () {\n          _msgLoading2.hide();\n        });\n      } else if (deleteItem.SHOPTYPE == \"ebay\") {\n        var _msgLoading3 = cjMessage.loading({\n          isFixed: true\n        });\n\n        var reqData = {\n          pid: deleteItem.ACCPID,\n          shopId: deleteItem.SHOPID\n        };\n        dsp.postFun('ebay/endProduct', reqData, function (data) {\n          _msgLoading3.hide();\n\n          if (data.data.statusCode == 200) {\n            $scope.listedList.splice(deleteItem.index, 1);\n            $scope.confirmDelLayer = 0;\n            layer.msg('Delete successfully', {\n              time: 1000\n            });\n          } else if (data.data.statusCode == 209) {\n            // 店铺处于授权失效状态\n            $scope.confirmDelLayer = false;\n            $scope.authorizationExpired = true;\n            return false;\n          } else {\n            layer.msg('The product cannot be deleted because the store is deactivated.');\n          }\n        }, function () {\n          _msgLoading3.hide();\n        }, function () {\n          _msgLoading3.hide();\n        });\n      } else if ($scope.isRutter(deleteItem.SHOPTYPE)) {\n        var _reqData = {\n          listId: deleteItem.ID,\n          shopId: deleteItem.SHOPID\n        };\n        debugger;\n\n        var _msgLoading4 = cjMessage.loading({\n          isFixed: true\n        });\n\n        dsp.postFun('platform-product/publish/deletePublishRecord', _reqData, function (res) {\n          _msgLoading4.hide();\n\n          if (res.data.code == 200) {\n            $scope.listedList.splice(deleteItem.index, 1);\n            $scope.confirmDelLayer = 0;\n            layer.msg('Delete successfully', {\n              time: 1000\n            });\n          }\n        }, function () {\n          _msgLoading4.hide();\n        });\n      } else {\n        var _msgLoading5 = cjMessage.loading({\n          isFixed: true\n        });\n\n        dsp.getFun('pojo/product/cancelListed?id=' + deleteItem.ID, function (data) {\n          _msgLoading5.hide();\n\n          var data = data.data;\n\n          if (data.statusCode == 209) {\n            // 店铺处于授权失效状态\n            $scope.confirmDelLayer = false;\n            $scope.authorizationExpired = true;\n            return false;\n          }\n\n          if (data.statusCode != 200) {\n            // layer.msg('Delete failed');\n            layer.msg('The product cannot be deleted because the store is deactivated.');\n            return false;\n          }\n\n          layer.msg('Deleted Successfully', {\n            time: 1000\n          });\n          $scope.getListedPost(); // 刷新列表\n\n          $scope.confirmDelLayer = false;\n        }, function () {\n          _msgLoading5.hide();\n        });\n        return false;\n      }\n    }; //全部删除\n\n\n    function deleteAllFun() {\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      dsp.postFun('cj/listedproduct/deleteAll', {}, function (data) {\n        msgLoading.hide();\n\n        if (data.data.statusCode == 200) {\n          //循环删除item\n          $scope.getListedPost();\n          $scope.confirmDelLayer = false;\n        } else if (data.data.statusCode == 209) {\n          // 店铺处于授权失效状态\n          $scope.confirmDelLayer = false;\n          $scope.authorizationExpired = true;\n          return false;\n        } else {\n          layer.msg('The product cannot be deleted because the store is deactivated');\n        }\n      }, function () {\n        msgLoading.hide();\n      });\n    } //全部删除\n\n\n    function deleteAllFailFun() {\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      dsp.postFun('cj/listedproduct/deleteAllFail', {}, function (data) {\n        msgLoading.hide();\n\n        if (data.data.statusCode == 200) {\n          //循环删除item\n          $scope.getListedPost();\n          $scope.confirmDelLayer = false;\n        } else if (data.data.statusCode == 209) {\n          // 店铺处于授权失效状态\n          $scope.confirmDelLayer = false;\n          $scope.authorizationExpired = true;\n          return false;\n        } else {\n          layer.msg('The product cannot be deleted because the store is deactivated');\n        }\n      }, function () {\n        msgLoading.hide();\n      });\n    } //刪除列表\n\n\n    $scope.doDelete2 = function () {\n      if ($scope.checkAllList) {\n        if ($scope.status == '0') {\n          deleteAllFun();\n        } else {\n          deleteAllFailFun();\n        }\n      } else {\n        var msgLoading = cjMessage.loading({\n          isFixed: true\n        });\n        dsp.postFun('cj/listedproduct/delete', $scope.queueParams.ids, function (data) {\n          msgLoading.hide();\n\n          if (data.data.statusCode == 200) {\n            //循环删除item\n            $scope.getListedPost();\n            $scope.confirmDelLayer = false;\n          } else if (data.data.statusCode == 209) {\n            // 店铺处于授权失效状态\n            $scope.confirmDelLayer = false;\n            $scope.authorizationExpired = true;\n            return false;\n          } else {\n            layer.msg('The product cannot be deleted because the store is deactivated');\n          }\n        }, function () {\n          msgLoading.hide();\n        });\n      }\n    };\n\n    $scope.categoryType = 'select' || false; //获取选择的id数组\n\n    function getSelectFun() {\n      $scope.banListItems = $scope.listedList.filter(function (e) {\n        return e.check;\n      });\n\n      if ($scope.banListItems.length == 0) {\n        throw layer.msg('Please select at least one product!');\n      }\n\n      var oarr = $scope.banListItems.map(function (item) {\n        return item.ID;\n      });\n      $scope.queueParams.ids = oarr;\n    }\n\n    $scope.startList = function (val) {\n      //开始提交刊登\n      if ($scope.listedList.length == 0) return false;\n\n      if ($scope.checkAllList) {\n        $scope.check_All = false;\n        $scope.listCheckLen = 0;\n        $scope.listedList.forEach(function (item) {\n          item.check = false;\n        });\n      } else {\n        getSelectFun();\n      }\n\n      var dom = document.getElementById('router-outlet-wrap');\n      var msgLoading = cjMessage.loading({\n        popupContainerDom: dom\n      }); //获取店铺列表\n\n      dsp.postFun('app/shop/getshop', {\n        data: JSON.stringify({\n          userId: userId\n        })\n      }, function (res) {\n        msgLoading.hide();\n        var obj = JSON.parse(res.data.result);\n\n        if (obj.shoplist) {\n          //目前只支持shopify的店铺\n          $scope.shopList = obj.shoplist.filter(function (item) {\n            if (item.TYPE == 'shopify') return item;\n          });\n\n          if ($scope.shopList.length > 0) {\n            $scope.showStartListDialog = true;\n          } else {\n            layer.open({\n              area: ['480px', '200px'],\n              title: '',\n              closeBtn: 0,\n              btn: ['Confirm'],\n              shadeClose: true,\n              skin: '',\n              content: '<p style=\"margin-top:45px\">The listing feature is only available to Shopify stores now.</p>',\n              yes: function yes(index, layero) {\n                layer.close(index);\n              }\n            });\n          }\n        } else {\n          layer.msg('Failed to get your stores');\n        }\n      }, function () {\n        msgLoading.hide();\n      });\n    }; //提交刊登请求数据\n\n\n    $scope.queueParams = {\n      logistics: '',\n      taxable: '0',\n      tax: false\n    }; //全部提交到刊登队列\n\n    $scope.submitAllFun = function () {\n      dsp.postFun('cj/listedproduct/submitAll', $scope.queueParams, function (res) {\n        $scope.msgLoading && $scope.msgLoading.hide();\n        location.href = 'myCJ.html#/products-connection/history/1';\n      });\n    }; //提交到刊登队列\n\n\n    $scope.listConfirmFun = function () {\n      if (!$scope.shopItem) return layer.msg('Please select a store first.');\n      if (!$scope.categoryItem) return layer.msg('Please select the category.');\n      if (!$scope.shippingItem) return layer.msg('Please select the logistics.');\n\n      if ($scope.categoryType == 'select') {\n        $scope.queueParams.productType = $scope.categoryItem.name;\n      }\n\n      $scope.queueParams.shopId = $scope.shopItem.ID;\n      $scope.queueParams.shopName = $scope.shopItem.NAME;\n      $scope.queueParams.logistics = $scope.shippingItem.nameEn;\n      $scope.queueParams.taxable = $scope.queueParams.tax ? '1' : '0';\n      $scope.queueParams.collectionId = $scope.collectionId ? $scope.collectionId : '';\n      console.log($scope.queueParams);\n\n      if (!$scope.queueParams.shopId) {\n        return layer.msg('Please select Store');\n      } else if (!$scope.queueParams.productType) {\n        return layer.msg('Please select Category');\n      } else if (!$scope.queueParams.logistics) {\n        return layer.msg('Please select Shipping');\n      }\n\n      $scope.msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n\n      if ($scope.checkAllList) {\n        //全部选择\n        $scope.submitAllFun();\n      } else {\n        dsp.postFun('cj/listedproduct/submit', $scope.queueParams, function (res) {\n          $scope.msgLoading && $scope.msgLoading.hide();\n          location.href = 'myCJ.html#/products-connection/history/1';\n        });\n      }\n    };\n\n    function getShippingFun() {\n      //获取物流列表\n      // dsp.postFun2('getNewModeByShopType.json',{shopeType:$scope.shopItem.TYPE}, function (data) {\n      //   $scope.shippingList = data.data;\n      //   console.log(data)\n      // })\n      dsp.getShipListNew({\n        platForms: [$scope.shopItem.TYPE]\n      }, function (data) {\n        $scope.shippingList = data;\n      });\n    } //修改店铺获取相应的标题和物流\n\n\n    $scope.changeListFun = function () {\n      console.log($scope.shopItem); //获取商品\n\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      dsp.getFun(\"pojo/product/ShopifyProductType?shopId=\".concat($scope.shopItem.ID), function (data) {\n        msgLoading.hide();\n        $scope.categoryList = JSON.parse(data.data.result) || [];\n        $scope.categoryList = $scope.categoryList.map(function (item) {\n          item.name = item.product_type; // 统一店铺名称 name 字段，方便模版取值\n\n          return item;\n        });\n      }, function () {\n        msgLoading.hide();\n      });\n      getShippingFun(); // 告诉shopify collections组件切换店铺了\n\n      $scope.$broadcast('quick-list', {\n        flag: 'chan-store',\n        store: $scope.shopItem\n      });\n    }; // 接收shopify collections组件传过来的collectionId\n\n\n    $scope.$on('shopify-collections', function (ev, data) {\n      if (data.flag == 'fresh-collection-id') {\n        $scope.collectionId = data.collectionId;\n      }\n    });\n    $scope.listPriceObj = {\n      //编辑金额参数\n      flag: '2',\n      //0:固定价格；1:+；2：*\n      price: '',\n      lastPrice: '',\n      fixedPrice: ''\n    };\n\n    $scope.confirmPriceFun = function () {\n      $scope.check_All = false;\n      $scope.listCheckLen = 0;\n      var param = {};\n\n      if ($scope.priceCheck) {\n        param.flag = '0';\n        param.price = $scope.listPriceObj.fixedPrice;\n      } else {\n        param.flag = $scope.listPriceObj.flag;\n        param.price = $scope.listPriceObj.price;\n      }\n\n      if ($scope.checkAllList) {\n        dsp.postFun('cj/listedproduct/updatePriceAll', param, function (res) {\n          $scope.getListedPost();\n          $scope.showEditPriceDialog = false;\n        });\n      } else {\n        param.ids = $scope.queueParams.ids;\n        console.log(param);\n        dsp.postFun('cj/listedproduct/updatePrice', param, function (res) {\n          $scope.getListedPost();\n          $scope.showEditPriceDialog = false;\n        });\n      }\n    };\n\n    function onlyprice() {\n      $scope.listPriceObj.price = $scope.listPriceObj.price.replace(/[^\\d.]/g, \"\"); //必须保证第一个为数字而不是.\n\n      $scope.listPriceObj.price = $scope.listPriceObj.price.replace(/^\\./g, \"\"); //保证只有出现一个.而没有多个.\n\n      $scope.listPriceObj.price = $scope.listPriceObj.price.replace(/\\.{2,}/g, \".\"); //保证.只出现一次，而不能出现两次以上\n\n      $scope.listPriceObj.price = $scope.listPriceObj.price.replace(\".\", \"$#$\").replace(/\\./g, \"\").replace(\"$#$\", \".\");\n      $scope.listPriceObj.price = $scope.listPriceObj.price.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3');\n    }\n\n    $scope.changeFiexdPriceFun = function () {\n      $scope.listPriceObj.fixedPrice = $scope.listPriceObj.fixedPrice.replace(/[^\\d.]/g, \"\"); //必须保证第一个为数字而不是.\n\n      $scope.listPriceObj.fixedPrice = $scope.listPriceObj.fixedPrice.replace(/^\\./g, \"\"); //保证只有出现一个.而没有多个.\n\n      $scope.listPriceObj.fixedPrice = $scope.listPriceObj.fixedPrice.replace(/\\.{2,}/g, \".\"); //保证.只出现一次，而不能出现两次以上\n\n      $scope.listPriceObj.fixedPrice = $scope.listPriceObj.fixedPrice.replace(\".\", \"$#$\").replace(/\\./g, \"\").replace(\"$#$\", \".\");\n      $scope.listPriceObj.fixedPrice = $scope.listPriceObj.fixedPrice.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3');\n    };\n\n    $scope.changePriceFun = function () {\n      onlyprice($scope.listPriceObj.price);\n\n      if ($scope.listPriceObj.flag == '1') {\n        $scope.listPriceObj.lastPrice = $scope.listPriceObj.price - 0 + 10;\n      } else {\n        $scope.listPriceObj.lastPrice = ($scope.listPriceObj.price - 0) * 10;\n      }\n    };\n\n    $scope.listNowFun = function (item) {\n      window.open(\"product-detail.html?id=\".concat(item.PID, \"&from=all&fromType=all&list=1\"));\n    };\n\n    $scope.editPriceFun = function () {\n      if (!$scope.checkAllList) {\n        //当前不是全选时判断\n        getSelectFun();\n      }\n\n      $scope.showEditPriceDialog = true;\n    };\n\n    $scope.closeCountdownFun = function () {\n      clearTimeout(timer);\n      $scope.listCountdownObj.isShow = false;\n    };\n\n    $scope.newCategory = function () {\n      if (!$scope.shopItem) return layer.msg('Please select a store first.');\n      if (!$scope.queueParams.productType) return layer.msg(\"Please input the new category.\");\n\n      if ($scope.queueParams.productType) {\n        $scope.categoryList.push({\n          name: $scope.queueParams.productType\n        });\n        $scope.categoryType = 'select';\n      }\n    };\n    /* 头部菜单进入埋点 */\n\n\n    function trackFun() {\n      dsp.postFun('pojo/home/addStatisByType', {\n        entryPage: +dsp.getQueryString('track')\n      }, function (res) {\n        console.log(res.data);\n      });\n    }\n\n    if (+dsp.getQueryString('track') == 10) {\n      trackFun();\n    }\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovbGlzdGVkL2xpc3RlZC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9zcmMvcGFnZXMvbXljai9saXN0ZWQvbGlzdGVkLmpzPzczYTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGxpc3RlZEZhY3RvcnkoYW5ndWxhcikge1xyXG4gIGNvbnN0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteWNqLWxpc3RlZC5tb2R1bGUnLCBbXSk7XHJcbiAgY29uc3Qgd2luSGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpICogMTtcclxuICBjb25zdCBza3VQaWNIZWlnaHQgPSB3aW5IZWlnaHQgLSAzMzk7XHJcblxyXG4gIGxldCBsaXN0c3RhdHVzID0gJyc7XHJcbiAgYXBwLmNvbnRyb2xsZXIoJ215Y2otbGlzdGVkLmN0cmwnLCBbJyRzY29wZScsICckcm9vdFNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdkc3AnLCckdGltZW91dCcsICckbG9jYXRpb24nLFxyXG4gICAgZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgJHN0YXRlUGFyYW1zLCBkc3AsJHRpbWVvdXQsICRsb2NhdGlvbikge1xyXG4gICAgICBkc3AuZG9tYWluRGF0YSgpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICRzY29wZS5pc2NqID0gcmVzLmlzY2o7XHJcbiAgICAgICAgaWYgKCRzY29wZS5pc2NqID09ICcxJykge1xyXG4gICAgICAgICAgLy9jalxyXG4gICAgICAgICAgJHNjb3BlLndlYnNpdGVOYW1lID0gJ0NKJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy/lrqLmiLdcclxuICAgICAgICAgICRzY29wZS53ZWJzaXRlTmFtZSA9IHJlcy53ZWJzaXRlTmFtZSB8fCAnQ0onO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgdmFyIGJhc2U2NCA9IG5ldyBCYXNlNjQoKTtcclxuICAgICAgdmFyIHVzZXJJZCA9IGJhc2U2NC5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpID09IHVuZGVmaW5lZCA/IFwiXCIgOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykpO1xyXG4gICAgICBkc3Auc2V0UmlnaHRNaW5IZWlnaHQoKTtcclxuICAgICAgJHNjb3BlLmxpc3RlZExpc3QgPSBbXTtcclxuICAgICAgJHNjb3BlLmxpc3RlZHNlYXJjaCA9ICcnO1xyXG4gICAgICAkc2NvcGUubGlzdGVkcGFnZXNpemUgPSAnMTAnO1xyXG4gICAgICAkc2NvcGUubGlzdGVkcGFnZW51bSA9ICcxJztcclxuICAgICAgJHNjb3BlLmxpc3RlZFRvdGFsTnVtID0gJyc7XHJcbiAgICAgICRzY29wZS5saXN0ZWRUb3RhbFBhZ2UgPSAnJztcclxuICAgICAgJHNjb3BlLmxpc3RlZHNlYXJjaCA9ICcnO1xyXG4gICAgICAkc2NvcGUuc2hvcElkID0gJyc7XHJcbiAgICAgICRzY29wZS5saXN0Q2hlY2tMZW4gPSAwO1xyXG4gICAgICAkc2NvcGUuZ2V0TGlzdGVkVXJsID0gJ2FwcC9yZWJhdGUvZ2V0QXNzaWduQW5kVmlzaWJpbGl0eSc7XHJcbiAgICAgICRzY29wZS5hdXRob3JpemF0aW9uRXhwaXJlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd2aXAnKSA9PSAxKSB7XHJcbiAgICAgICAgJHNjb3BlLmlzVmlwID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkc2NvcGUuaXNWaXAgPSBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5YiK55m75YiX6KGo54q25oCBXHJcbiAgICAgICRzY29wZS5zdGF0dXMgPSAkc3RhdGVQYXJhbXMuc3RhdHVzID8gJHN0YXRlUGFyYW1zLnN0YXR1cyA6ICctMSc7XHJcbiAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5zdGF0dXMpIFxyXG5cclxuICAgICAgLy8tMS0t5YiK55m75oiQ5YqfLDAtLeW+heWIiueZu++8jDEtLeWIiueZu+S4re+8jDItLeWIiueZu+Wksei0pVxyXG4gICAgICBsZXQgbGlzdERhdGFPYmogPSB7XHJcbiAgICAgICAgXCItMVwiOiAgXCJwb2pvL3Byb2R1Y3QvZ2V0TGlzdGVkQ2pcIixcclxuICAgICAgICBcIjBcIjogXCJjai9saXN0ZWRwcm9kdWN0L2xpc3RcIixcclxuICAgICAgICBcIjFcIjogXCJjai9saXN0ZWRwcm9kdWN0L2xpc3RcIixcclxuICAgICAgICBcIjJcIjogXCJjai9saXN0ZWRwcm9kdWN0L2xpc3RcIlxyXG4gICAgICB9XHJcbiAgICAvLyDnvJbovpHliIrnmbtcclxuICAgICRzY29wZS5lZGl0TGlzdCA9IGZ1bmN0aW9uIChpdGVtLGluZGV4KSB7XHJcbiAgICAgIGVkaXRJbmRleCA9IGluZGV4O1xyXG4gICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2hvd2VkaXRmcmFtZScsIHtcclxuICAgICAgICBmcm9tOiAnMicsXHJcbiAgICAgICAgcGlkOiBpdGVtLklEXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgJHNjb3BlLiRvbignZWRpdExpc3RTdWNjZXNzJywgZnVuY3Rpb24gKGQsIGRhdGEpIHtcclxuICAgICAgJHNjb3BlLmdldExpc3RlZFBvc3QoKTtcclxuICAgIH0pO1xyXG4gICAgLy8g6YCJ5oup5p+Q5LiA5LiqXHJcbiAgICAkc2NvcGUuY2hlY2tPbmUgPSBmdW5jdGlvbiAoaXRlbSxpbmRleCkge1xyXG4gICAgICBpdGVtLmNoZWNrID0gIWl0ZW0uY2hlY2s7XHJcbiAgICAgICRzY29wZS5jaGVja0FsbExpc3Q9ZmFsc2U7XHJcbiAgICAgICRzY29wZS5iYW5MaXN0SXRlbXMgPSAkc2NvcGUubGlzdGVkTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICByZXR1cm4gZS5jaGVjaztcclxuICAgICAgfSlcclxuICAgICAgJHNjb3BlLmxpc3RDaGVja0xlbiA9ICRzY29wZS5iYW5MaXN0SXRlbXMubGVuZ3RoO1xyXG4gICAgICBpZiAoJHNjb3BlLmJhbkxpc3RJdGVtcy5sZW5ndGggPT0gJHNjb3BlLmxpc3RlZExpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgJHNjb3BlLmNoZWNrX0FsbCA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJHNjb3BlLmNoZWNrX0FsbCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL+WFqOmAieW9k+WJjemhtVxyXG4gICAgJHNjb3BlLmNoZWNrQWxsID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICBpZih2YWw9PSdhbGwnKXtcclxuICAgICAgICAkc2NvcGUuY2hlY2tBbGxMaXN0PSEkc2NvcGUuY2hlY2tBbGxMaXN0O1xyXG4gICAgICAgICRzY29wZS5saXN0Q2hlY2tMZW4gPSAkc2NvcGUuY2hlY2tBbGxMaXN0ID8gJHNjb3BlLmxpc3RlZFRvdGFsTnVtOjA7XHJcbiAgICAgICAgJHNjb3BlLmNoZWNrX0FsbD0kc2NvcGUuY2hlY2tBbGxMaXN0ID8gdHJ1ZTpmYWxzZTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgJHNjb3BlLmNoZWNrX0FsbCA9ICEkc2NvcGUuY2hlY2tfQWxsO1xyXG4gICAgICAgICRzY29wZS5jaGVja0FsbExpc3Q9ZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLmJhbkxpc3RJdGVtcyA9ICRzY29wZS5jaGVja19BbGw/JHNjb3BlLmxpc3RlZExpc3Q6W107XHJcbiAgICAgICAgJHNjb3BlLmxpc3RDaGVja0xlbiA9ICRzY29wZS5iYW5MaXN0SXRlbXMubGVuZ3RoO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5saXN0ZWRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLmNoZWNrID0gJHNjb3BlLmNoZWNrX0FsbDtcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgICRzY29wZS5iYW5MaXN0SXRlbXMgPSBbXTtcclxuICAgIC8vXHJcbiAgICAkc2NvcGUuYmFuY2hMaXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZighJHNjb3BlLmNoZWNrQWxsTGlzdCl7XHJcbiAgICAgICAgZ2V0U2VsZWN0RnVuKCk7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmNvbmZpcm1EZWxMYXllciA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAkc2NvcGUuZ29BY3RCYW5MaXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5iYW5MaXN0SXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoISRzY29wZS5iYW5MaXN0SXRlbXNbaV0uU0hPUE5BTUUgfHwgJHNjb3BlLmJhbkxpc3RJdGVtc1tpXS5BQ0NQUklDRSA9PSAnMC4wJykge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdQcm9kdWN0cyBpbmZvcm1hdGlvbiBzaG9ydCwgcGxlYXNlIG9wdGltaXplIHByb2R1Y3RzIGRldGFpbCBhbmQgdHJ5IGFnYWluLicpXHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHZhciBiYW5jaExpc3RJZHMgPSBbXTtcclxuICAgICAgJHNjb3BlLmxpc3RlZExpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUuY2hlY2sgPyBiYW5jaExpc3RJZHMucHVzaChlLklEKSA6ICcnO1xyXG4gICAgICB9KVxyXG4gICAgICBjb25zb2xlLmxvZyhiYW5jaExpc3RJZHMpXHJcbiAgICAgIGRzcC5wb3N0RnVuKCdjai9saXN0ZWRwcm9kdWN0L3N1Ym1pdCcsIGJhbmNoTGlzdElkcywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1N1Ym1pdCBTdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgICRzY29wZS5jb25maXJtQmFuTGlzdEZsYWcgPSAwO1xyXG4gICAgICAgICAgJHNjb3BlLmdldExpc3RlZFBvc3QoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdTdWJtaXQgRmFpbGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzZXR0bGVEYXRhKHJlc3VsdCkge1xyXG4gICAgICB2YXIgbGlzdCA9IHJlc3VsdC5wcm9kdWN0cztcclxuICAgICAgdmFyIHJlbWFya0FyciA9IHJlc3VsdC5yZW1hcmsgfHwgW107XHJcbiAgICAgIGNvbnNvbGUubG9nKGxpc3QpXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChsaXN0W2ldLkJJR0lNRykge1xyXG4gICAgICAgICAgbGlzdFtpXS5CSUdJTUcgPSBsaXN0W2ldLkJJR0lNRy5yZXBsYWNlKCdodHRwczovLycsICcnKS5yZXBsYWNlKCdodHRwOi8vJywgJycpO1xyXG4gICAgICAgICAgbGlzdFtpXS5CSUdJTUcgPSAnaHR0cHM6Ly8nICsgbGlzdFtpXS5CSUdJTUc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3RbaV0uSU5WRU5UT1JDT1VOVFJZID0gbGlzdFtpXS5JTlZFTlRPUkNPVU5UUllcclxuICAgICAgICAgID8gSlNPTi5wYXJzZShsaXN0W2ldLklOVkVOVE9SQ09VTlRSWSlcclxuICAgICAgICAgIDoge0NoaW5hOiAwLCBVUzogMH07XHJcbiAgICAgICAgbGlzdFtpXS5kZWNvdW50cnkgPSBudWxsO1xyXG4gICAgICAgIGxpc3RbaV0uZGVsdFByaWNlID0gMDtcclxuICAgICAgICBcclxuICAgICAgICBpZihsaXN0W2ldLkFDQ1BSSUNFKXtcclxuICAgICAgICAgIGxpc3RbaV0uQUNDUFJJQ0UgPSBgJHtsaXN0W2ldLkFDQ1BSSUNFfWBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChsaXN0W2ldLmRlbHRQcmljZSkge1xyXG4gICAgICAgICAgbGlzdFtpXS5BTU9VTlRQUklDRSA9IGRzcC5jYWN1QW1vdW50KGxpc3RbaV0uU0VMTFBSSUNFLCBsaXN0W2ldLmRlbHRQcmljZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxpc3RbaV0uQU1PVU5UUFJJQ0UgPSBsaXN0W2ldLlNFTExQUklDRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByZW1hcmtBcnIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgIGlmIChsaXN0W2ldLkxPR0lTVElDUyAmJiBsaXN0W2ldLkxPR0lTVElDUyA9PSByZW1hcmtBcnJbal0ubmFtZWVuKSB7XHJcbiAgICAgICAgICAgIGxpc3RbaV0ud3VsaXVSZW1hcmsgPSByZW1hcmtBcnJbal0ucmVtYXJrO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g54mp5rWB6K+V566X57uE5Lu255SoXHJcbiAgICAgICAgbGlzdFtpXS5zaGlwaW5mbyA9IHtcclxuICAgICAgICAgIHdlaWdodDogbGlzdFtpXS5QQUNLV0VJR0hULFxyXG4gICAgICAgICAgZW5OYW1lOiBsaXN0W2ldLkxPR0lTVElDUyxcclxuICAgICAgICAgIHNob3BUeXBlOmxpc3RbaV0uU0hPUFRZUEUsXHJcbiAgICAgICAgICBwaWQ6IGxpc3RbaV0uUElELFxyXG4gICAgICAgICAgLy8gc2hpcERpc2NvdW50OiBsaXN0W2ldLmRpc2NvdW50U2hvcFJhdGUsXHJcbiAgICAgICAgICBhcmVhQ291bnRyeUNvZGU6IGxpc3RbaV0uYXJlYUNvdW50cnlDb2RlLFxyXG4gICAgICAgICAgaW5kZXgxOiBpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5saXN0ZWRMaXN0ID0gbGlzdDtcclxuICAgICAgY29uc29sZS5sb2coJHNjb3BlLmxpc3RlZExpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOeJqea1geivleeul+e7hOS7tui/lOWbnuWAvOaOpeaUtlxyXG4gICAgJHNjb3BlLiRvbignc2F2ZVNoaXBQcmljZScsIGZ1bmN0aW9uIChkLCBkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLnNoaXBEaXNjb3VudFByaWNlKSB7XHJcbiAgICAgICAgJHNjb3BlLmxpc3RlZExpc3RbZGF0YS5pbmRleDFdLmlzUHJvQW1vdW50VGlwID0gZmFsc2VcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUubGlzdGVkTGlzdFtkYXRhLmluZGV4MV0uQU1PVU5UUFJJQ0UgPSBkc3AuY2FjdUFtb3VudCgkc2NvcGUubGlzdGVkTGlzdFtkYXRhLmluZGV4MV0uU0VMTFBSSUNFLCBkYXRhLnNoaXBEaXNjb3VudFByaWNlIHx8IDApO1xyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUuJGFwcGx5KClcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBcclxuICAgIC8v5byA5ZCv5YiK55m75Lu75Yqh5LmL5ZCO6L2u6K+i5omn6KGM5q+P5LiA5p2h5YiK55m7LHN0YXR1c+S4ujHml7ZcclxuICAgICRzY29wZS5saXN0SW5kZXggPSAwO1xyXG4gICAgJHNjb3BlLnByb2dyZXNzTGVuZ3RoPTA7XHJcbiAgICAkc2NvcGUuY2hlY2tBbGxMaXN0ID0gZmFsc2U7Ly/mmK/lkKblhajpg6jpgInmi6lcclxuICAgICRzY29wZS5saXN0Q291bnRkb3duT2JqID0ge1xyXG4gICAgICBpc1Nob3c6ZmFsc2UsXHJcbiAgICAgIHRpbWU6MzBcclxuICAgIH1cclxuICAgIGxldCB0aW1lciA9bnVsbDtcclxuICAgIGZ1bmN0aW9uIHN0YXJ0TGlzdEZ1bigpe1xyXG4gICAgICBkc3AucG9zdEZ1bignbGlzdGVkX3Byb2R1Y3RzL2xpc3RlZExvY3Byb2R1Y3QvZG8nLHtcclxuICAgICAgICBpZDokc2NvcGUubGlzdGVkTGlzdFskc2NvcGUubGlzdEluZGV4XS5JRFxyXG4gICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgbGV0IG9jb2RlID0gZGF0YS5kYXRhLnN0YXR1c0NvZGU7XHJcbiAgICAgICAgaWYgKG9jb2RlID09IDgwMXx8b2NvZGUgPT0gODA0KSB7XHJcbiAgICAgICAgICAkc2NvcGUubGlzdGVkTGlzdFskc2NvcGUubGlzdEluZGV4XS5zdGF0dXM9MjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICRzY29wZS5saXN0ZWRMaXN0WyRzY29wZS5saXN0SW5kZXhdLnN0YXR1cz0zO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkc2NvcGUucHJvZ3Jlc3NMZW5ndGg9KE51bWJlcigkc2NvcGUubGlzdEluZGV4LTArMSkvTnVtYmVyKCRzY29wZS5saXN0ZWRMaXN0Lmxlbmd0aCkqMTAwKS50b0ZpeGVkKDApO1xyXG4gICAgICAgIGlmKCRzY29wZS5saXN0SW5kZXg9PSRzY29wZS5saXN0ZWRMaXN0Lmxlbmd0aC0xJiYkc2NvcGUubGlzdGVkTGlzdC5sZW5ndGg9PTEwMCl7Ly9cclxuICAgICAgICAgICRzY29wZS5saXN0Q291bnRkb3duT2JqLmlzU2hvdyA9IHRydWU7XHJcbiAgICAgICAgICBmdW5jdGlvbiBjb3VudERvd25GdW4oKXtcclxuICAgICAgICAgICAgaWYoJHNjb3BlLmxpc3RDb3VudGRvd25PYmoudGltZT4wKXtcclxuICAgICAgICAgICAgICAkc2NvcGUubGlzdENvdW50ZG93bk9iai50aW1lLT0xO1xyXG4gICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChjb3VudERvd25GdW4sMTAwMCk7XHJcbiAgICAgICAgICAgICAgaWYoJHNjb3BlLmxpc3RDb3VudGRvd25PYmoudGltZTwyOSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5nZXRMaXN0ZWRQb3N0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvdW50RG93bkZ1bigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZigoJHNjb3BlLmxpc3RJbmRleDwkc2NvcGUubGlzdGVkTGlzdC5sZW5ndGgtMSkgJiYgbGlzdHN0YXR1cz09MSl7XHJcbiAgICAgICAgICAkc2NvcGUubGlzdEluZGV4ICs9IDE7XHJcbiAgICAgICAgICBzdGFydExpc3RGdW4oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXRTaG9wTGlzdCgpe1xyXG4vLyDCoMKgwqDCoMKgwqDCoGNvbnN0wqBtc2dMb2FkaW5nwqA9wqBjak1lc3NhZ2UubG9hZGluZyh7wqBpc0ZpeGVkOiB0cnVlwqB9KTtcclxuICAgICAgLy/ojrflj5blupfpk7rliJfooahcclxuICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9zaG9wL2dldHNob3AnLHtcclxuICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHt1c2VySWQ6dXNlcklkfSlcclxuICAgICAgfSwgKHJlcyk9PntcclxuICAgICAgICAvLyBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICB2YXIgb2JqID0gSlNPTi5wYXJzZShyZXMuZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgICRzY29wZS5zaG9wTGlzdCA9IG9iai5zaG9wbGlzdDtcclxuICAgICAgfSwgKCkgPT4ge1xyXG4gICAgICAgIC8vIG1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVzZXRMaXN0aW5nKCl7Ly/ph43nva5saXN0aW5n5pWw5o2uXHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgICAgICRzY29wZS5saXN0SW5kZXg9MDtcclxuICAgICAgJHNjb3BlLmxpc3RDb3VudGRvd25PYmogPSB7XHJcbiAgICAgICAgaXNTaG93OmZhbHNlLFxyXG4gICAgICAgIHRpbWU6MzBcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUucHJvZ3Jlc3NMZW5ndGg9MDsvL+eZvuWIhuavlOi/m+W6puadoemHjee9ruS4ujBcclxuICAgICAgJHNjb3BlLmNoZWNrX0FsbD1mYWxzZTtcclxuICAgICAgJHNjb3BlLmxpc3RDaGVja0xlbiA9IDBcclxuICAgICAgJHNjb3BlLmNoZWNrQWxsTGlzdCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgJHNjb3BlLmdldExpc3RlZFBvc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJlc2V0TGlzdGluZygpO1xyXG4gICAgICBsZXQgZ2V0TGlzdGVkTGlzdCA9IHtcclxuICAgICAgICBwYWdlTnVtOiAkc2NvcGUubGlzdGVkcGFnZW51bSArICcnLFxyXG4gICAgICAgIHBhZ2VTaXplOiAoJHNjb3BlLnN0YXR1cz09MT8xMDA6JHNjb3BlLmxpc3RlZHBhZ2VzaXplKSArICcnLFxyXG4gICAgICAgIHNob3BJZDogJHNjb3BlLnNob3BJZCxcclxuICAgICAgICBpbnB1dFN0cjogJHNjb3BlLmxpc3RlZHNlYXJjaCxcclxuICAgICAgICBzdGF0dXM6ICRzY29wZS5zdGF0dXNcclxuICAgICAgfTtcclxuICAgICAgJHNjb3BlLmxpc3RlZExpc3QgPSBbXTtcclxuICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5jai1sb2FkLXdyYXAnKSwgc2t1UGljSGVpZ2h0KTtcclxuICAgICAgZHNwLnBvc3RGdW4obGlzdERhdGFPYmpbJHNjb3BlLnN0YXR1c10sIEpTT04uc3RyaW5naWZ5KGdldExpc3RlZExpc3QpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5jai1sb2FkLXdyYXAnKSk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgaWYgKGRhdGEuc3RhdHVzQ29kZSAhPSAyMDAgfHwgZGF0YS5yZXN1bHQgPT0gJycpIHtcclxuICAgICAgICAgICRzY29wZS5saXN0ZWRMaXN0ID0gW107XHJcbiAgICAgICAgICAkc2NvcGUubGlzdGVkVG90YWxOdW0gPSAwO1xyXG4gICAgICAgICAgJHNjb3BlLmxpc3RlZFRvdGFsUGFnZSA9IDA7XHJcbiAgICAgICAgICAkc2NvcGUuaGFzTGlzdGVkRGF0YSA9IGZhbHNlO1xyXG4gICAgICAgICAgJHNjb3BlLm5vTGlzdGVkRGF0YSA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZXN1bHQgPSBKU09OLnBhcnNlKGRhdGEucmVzdWx0KTtcclxuICAgICAgICBpZiAocmVzdWx0LnRvdGxlID09IDApIHtcclxuICAgICAgICAgICRzY29wZS5saXN0ZWRMaXN0ID0gW107XHJcbiAgICAgICAgICAkc2NvcGUubGlzdGVkVG90YWxOdW0gPSAwO1xyXG4gICAgICAgICAgJHNjb3BlLmxpc3RlZFRvdGFsUGFnZSA9IDA7XHJcbiAgICAgICAgICAkc2NvcGUuaGFzTGlzdGVkRGF0YSA9IGZhbHNlO1xyXG4gICAgICAgICAgJHNjb3BlLm5vTGlzdGVkRGF0YSA9IHRydWU7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLmxpc3RlZFRvdGFsTnVtID0gcmVzdWx0LnRvdGxlO1xyXG4gICAgICAgICRzY29wZS5saXN0ZWRUb3RhbFBhZ2UgPSBNYXRoLmNlaWwoKCRzY29wZS5saXN0ZWRUb3RhbE51bSAqIDEpIC8gKCRzY29wZS5saXN0ZWRwYWdlc2l6ZSAqIDEpKTtcclxuICAgICAgICAkc2NvcGUuaGFzTGlzdGVkRGF0YSA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLm5vTGlzdGVkRGF0YSA9IGZhbHNlO1xyXG4gICAgICAgIHNldHRsZURhdGEocmVzdWx0KTtcclxuICAgICAgICBpZigkc2NvcGUuc3RhdHVzPT0nMScmJiRzY29wZS5saXN0ZWRMaXN0Lmxlbmd0aD4wKXtcclxuICAgICAgICAgIGxpc3RzdGF0dXMgPSAxOy8v5b2T5YmN5Zyo6L2u6K+i5YiK55m75YiX6KGoXHJcbiAgICAgICAgICAkc2NvcGUubGlzdGVkTGlzdCA9ICRzY29wZS5saXN0ZWRMaXN0Lm1hcChpdGVtPT57XHJcbiAgICAgICAgICAgIGl0ZW0uc3RhdHVzPTE7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIHN0YXJ0TGlzdEZ1bigpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgbGlzdHN0YXR1cz0yOy8v5b2T5YmN5LiN5Zyo6L2u6K+i5YiK55m75YiX6KGoXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCRzY29wZS5zdGF0dXM9PSctMSd8fCRzY29wZS5zdGF0dXM9PScyJyl7Ly/lnKhsaXN0ZWTkuI5saXN0IEZhaWzliJfooajml7bor7fmsYLlupfpk7rmjqXlj6NcclxuICAgICAgICAgIGdldFNob3BMaXN0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdwYWdlLWRhdGEnLCB7XHJcbiAgICAgICAgICBwYWdlTnVtOiRzY29wZS5saXN0ZWRwYWdlbnVtICogMSxcclxuICAgICAgICAgIHRvdGFsTnVtOiRzY29wZS5saXN0ZWRUb3RhbFBhZ2UsXHJcbiAgICAgICAgICB0b3RhbENvdW50czokc2NvcGUubGlzdGVkVG90YWxOdW0gKiAxLFxyXG4gICAgICAgICAgcGFnZVNpemU6JHNjb3BlLmxpc3RlZHBhZ2VzaXplLFxyXG4gICAgICAgICAgcGFnZXNpemVMaXN0OlsnMTAnLCcyMCcsJzUwJ11cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAkc2NvcGUuZ2V0TGlzdGVkUG9zdCgpO1xyXG4gICAgJHNjb3BlLiRvbigncGFnZWRhdGEtZmEnLGZ1bmN0aW9uKGQsZGF0YSl7Ly/liIbpobXliIfmjaLmlbDmja7nm5HlkKxcclxuICAgICAgJHNjb3BlLmxpc3RlZHBhZ2VudW0gPSBkYXRhLnBhZ2VOdW07XHJcbiAgICAgICRzY29wZS5saXN0ZWRwYWdlc2l6ZSA9IGRhdGEucGFnZVNpemU7XHJcbiAgICAgICRzY29wZS5nZXRMaXN0ZWRQb3N0KCk7XHJcbiAgICB9KVxyXG4gICAgJHNjb3BlLmVudGVyU2VhcmNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgJHNjb3BlLmdldExpc3RlZFBvc3QoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBkZWxldGVJdGVtID0ge307XHJcbiAgICAkc2NvcGUuY29udGVudCA9ICdBcmUgeW91IHN1cmUgdG8gZGVsZXRlIGl0Pyc7XHJcbiAgICAvLyAkc2NvcGUudGl0bGUgPSAnUHJvbXB0JztcclxuICAgICRzY29wZS50aXRsZSA9ICcnO1xyXG4gICAgJHNjb3BlLmxpc3RlZGRlbGV0ID0gZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgIGRlbGV0ZUl0ZW0gPSBpdGVtO1xyXG4gICAgICBkZWxldGVJdGVtLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgICRzY29wZS5jb25maXJtRGVsTGF5ZXIgPSB0cnVlO1xyXG4gICAgICAkc2NvcGUuYmFuTGlzdEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICRzY29wZS5xdWV1ZVBhcmFtcy5pZHMgPSBbaXRlbS5JRF07XHJcbiAgICB9XHJcbiAgICAvLyDojrflj5blvLnnqpfnu4Tku7blhbPpl63mjInpkq5cclxuICAgICRzY29wZS4kb24oJ2Nsb3NlUG9wVXBzJywgKGUsIGRhdGEpID0+IHtcclxuICAgICAgJHNjb3BlLmNvbmZpcm1EZWxMYXllciA9IGRhdGEuc2hvd1BvcFVwcztcclxuICAgIH0pXHJcbiAgICAvLyDojrflj5blvLnnqpfnu4Tku7bnoa7lrprmjInpkq5cclxuICAgICRzY29wZS4kb24oJ2NvbmZpcm1Qb3BVcHMnLCAoZSwgZGF0YSkgPT4ge1xyXG4gICAgICBpZigkc2NvcGUuc3RhdHVzID09ICctMScpIHtcclxuICAgICAgICAkc2NvcGUuZG9EZWxldGUoKTtcclxuICAgICAgfSBlbHNlIGlmKCRzY29wZS5zdGF0dXMgPT0gMCB8fCAkc2NvcGUuc3RhdHVzID09IDIpIHtcclxuICAgICAgICAkc2NvcGUuZG9EZWxldGUyKCk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgJHNjb3BlLmhhbmRsZUNhbmNlbEF1dGhvcml6YXRpb24gPSAoKSA9PiB7XHJcbiAgICAgICRzY29wZS5hdXRob3JpemF0aW9uRXhwaXJlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5oYW5kbGVDb25maXJtQXV0aG9yaXphdGlvbiA9ICgpID0+IHtcclxuICAgICAgY29uc3Qgc2hvcFR5cGUgPSByZXBsYWNlU3RyKGRlbGV0ZUl0ZW0uU0hPUFRZUEUpXHJcbiAgICAgIGZ1bmN0aW9uIHJlcGxhY2VTdHIoc3RyKXsgLy8g5q2j5YiZ5L2/6aaW5a2X5q+N5aSn5YaZXHJcbiAgICAgICAgc3RyID0gc3RyLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgdmFyIHJlZyA9IC9cXGIoXFx3KXxcXHMoXFx3KS9nOyAvLyAgXFxi5Yik5pat6L6555WMXFxz5Yik5pat56m65qC8XHJcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZyxmdW5jdGlvbihtKXsgXHJcbiAgICAgICAgIHJldHVybiBtLnRvVXBwZXJDYXNlKClcclxuICAgICAgICB9KTtcclxuICAgICAgIH1cclxuICAgICAgaWYoc2hvcFR5cGUpIHtcclxuICAgICAgICAkbG9jYXRpb24ucGF0aChgL2F1dGhvcml6ZS8ke3Nob3BUeXBlfWApLnNlYXJjaCh7dHJhY2s6ICcnLCBzdG9yZU5hbWU6IGAke2RlbGV0ZUl0ZW0uU0hPUE5BTUV9YH0pXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmhhbmRsZUNhbmNlbEF1dGhvcml6YXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUuaXNSdXR0ZXIgPSBmdW5jdGlvbih0eXBlKXtcclxuICAgICAgcmV0dXJuIC8oZXRzeXx3aXgpL2kudGVzdCh0eXBlKVxyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5kb0RlbGV0ZSA9IGZ1bmN0aW9uICgpIHsvL+WcqGxpc3RlZOeahHRhYuS9v+eUqFxyXG4gICAgICBpZiAoZGVsZXRlSXRlbS5TSE9QVFlQRSA9PSBcIldvb2NvbW1lcmNlXCIpIHtcclxuwqDCoMKgwqDCoMKgwqDCoGNvbnN0wqBtc2dMb2FkaW5nwqA9wqBjak1lc3NhZ2UubG9hZGluZyh7wqBpc0ZpeGVkOiB0cnVlwqB9KTtcclxuICAgICAgICBkc3AuZ2V0RnVuKCd3b28vd29vRGVsZXRlUHJvZHVjdD9pZD0nICsgZGVsZXRlSXRlbS5JRCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5jb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubGlzdGVkTGlzdC5zcGxpY2UoZGVsZXRlSXRlbS5pbmRleCwgMSk7XHJcbiAgICAgICAgICAgICRzY29wZS5jb25maXJtRGVsTGF5ZXIgPSAwO1xyXG4gICAgICAgICAgfSBcclxuICAgICAgICAgIGVsc2UgaWYoZGF0YS5kYXRhLmNvZGUgPT0gMjA5KSB7XHJcbiAgICAgICAgICAgIC8vIOW6l+mTuuWkhOS6juaOiOadg+WkseaViOeKtuaAgVxyXG4gICAgICAgICAgICAkc2NvcGUuY29uZmlybURlbExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5hdXRob3JpemF0aW9uRXhwaXJlZCA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGUgcHJvZHVjdCBjYW5ub3QgYmUgZGVsZXRlZCBiZWNhdXNlIHRoZSBzdG9yZSBpcyBkZWFjdGl2YXRlZC4nKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSBpZiAoZGVsZXRlSXRlbS5TSE9QVFlQRSA9PSBcIkxhemFkYVwiKSB7XHJcbiAgICAgICAgY29uc3TCoG1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoGlzRml4ZWQ6IHRydWXCoH0pO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdsYXphZGEvcHJvZHVjdC9kZWxldGVQcm9kdWN0QnlJZCcsIHtcclxuICAgICAgICAgICdzaG9wSWQnOiBkZWxldGVJdGVtLlNIT1BJRCwgJ2FjY1BpZCc6IGRlbGV0ZUl0ZW0uQUNDUElEXHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICBpZihkYXRhLnN0YXR1c0NvZGUgPT0gMjA5KSB7XHJcbiAgICAgICAgICAgIC8vIOW6l+mTuuWkhOS6juaOiOadg+WkseaViOeKtuaAgVxyXG4gICAgICAgICAgICAkc2NvcGUuY29uZmlybURlbExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5hdXRob3JpemF0aW9uRXhwaXJlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChkYXRhLnN0YXR1c0NvZGUgIT0gMjAwKSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnVGhlIHByb2R1Y3QgY2Fubm90IGJlIGRlbGV0ZWQgYmVjYXVzZSB0aGUgc3RvcmUgaXMgZGVhY3RpdmF0ZWQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxheWVyLm1zZygnRGVsZXRlIHN1Y2Nlc3NmdWxseScsIHtcclxuICAgICAgICAgICAgdGltZTogMTAwMFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRzY29wZS5nZXRMaXN0ZWRQb3N0KCk7IC8vIOWIt+aWsOWIl+ihqFxyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpcm1EZWxMYXllciA9IDA7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIGlmIChkZWxldGVJdGVtLlNIT1BUWVBFID09IFwic2hvcGVlXCIpIHtcclxuICAgICAgICBjb25zdMKgbXNnTG9hZGluZ8KgPcKgY2pNZXNzYWdlLmxvYWRpbmcoe8KgaXNGaXhlZDogdHJ1ZcKgfSk7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ3Nob3BlZS9wcm9kdWN0L2RlbGV0ZVByb2R1Y3RCeUlkJywge1xyXG4gICAgICAgICAgJ3Nob3BJZCc6IGRlbGV0ZUl0ZW0uU0hPUElELFxyXG4gICAgICAgICAgJ2FjY1BpZCc6IGRlbGV0ZUl0ZW0uQUNDUElEXHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICBpZihkYXRhLnN0YXR1c0NvZGUgPT0gMjA5KSB7XHJcbiAgICAgICAgICAgIC8vIOW6l+mTuuWkhOS6juaOiOadg+WkseaViOeKtuaAgVxyXG4gICAgICAgICAgICAkc2NvcGUuY29uZmlybURlbExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5hdXRob3JpemF0aW9uRXhwaXJlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChkYXRhLnN0YXR1c0NvZGUgIT0gMjAwKSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnVGhlIHByb2R1Y3QgY2Fubm90IGJlIGRlbGV0ZWQgYmVjYXVzZSB0aGUgc3RvcmUgaXMgZGVhY3RpdmF0ZWQuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxheWVyLm1zZygnRGVsZXRlIHN1Y2Nlc3NmdWxseScsIHtcclxuICAgICAgICAgICAgdGltZTogMTAwMFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICAkc2NvcGUuZ2V0TGlzdGVkUG9zdCgpOyAvLyDliLfmlrDliJfooahcclxuICAgICAgICAgICRzY29wZS5jb25maXJtRGVsTGF5ZXIgPSAwO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbXNnTG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIGlmIChkZWxldGVJdGVtLlNIT1BUWVBFID09IFwiZWJheVwiKSB7XHJcbiAgICAgICAgY29uc3TCoG1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoGlzRml4ZWQ6IHRydWXCoH0pO1xyXG4gICAgICAgIHZhciByZXFEYXRhID0ge1xyXG4gICAgICAgICAgcGlkOiBkZWxldGVJdGVtLkFDQ1BJRCxcclxuICAgICAgICAgIHNob3BJZDogZGVsZXRlSXRlbS5TSE9QSURcclxuICAgICAgICB9XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2ViYXkvZW5kUHJvZHVjdCcsIHJlcURhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgJHNjb3BlLmxpc3RlZExpc3Quc3BsaWNlKGRlbGV0ZUl0ZW0uaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAkc2NvcGUuY29uZmlybURlbExheWVyID0gMDtcclxuXHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnRGVsZXRlIHN1Y2Nlc3NmdWxseScsIHtcclxuICAgICAgICAgICAgICB0aW1lOiAxMDAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBcclxuICAgICAgICAgIGVsc2UgaWYoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjA5KSB7XHJcbiAgICAgICAgICAgIC8vIOW6l+mTuuWkhOS6juaOiOadg+WkseaViOeKtuaAgVxyXG4gICAgICAgICAgICAkc2NvcGUuY29uZmlybURlbExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5hdXRob3JpemF0aW9uRXhwaXJlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ1RoZSBwcm9kdWN0IGNhbm5vdCBiZSBkZWxldGVkIGJlY2F1c2UgdGhlIHN0b3JlIGlzIGRlYWN0aXZhdGVkLicpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbXNnTG9hZGluZy5oaWRlKClcclxuICAgICAgICB9LGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbXNnTG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIGlmKCRzY29wZS5pc1J1dHRlcihkZWxldGVJdGVtLlNIT1BUWVBFKSkge1xyXG4gICAgICAgIGNvbnN0IHJlcURhdGEgPSB7XHJcbiAgICAgICAgICBsaXN0SWQ6IGRlbGV0ZUl0ZW0uSUQsXHJcbiAgICAgICAgICBzaG9wSWQ6IGRlbGV0ZUl0ZW0uU0hPUElEXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlYnVnZ2VyXHJcbiAgICAgICAgY29uc3TCoG1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoGlzRml4ZWQ6IHRydWXCoH0pO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdwbGF0Zm9ybS1wcm9kdWN0L3B1Ymxpc2gvZGVsZXRlUHVibGlzaFJlY29yZCcsIHJlcURhdGEsIGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgICAgbXNnTG9hZGluZy5oaWRlKClcclxuICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubGlzdGVkTGlzdC5zcGxpY2UoZGVsZXRlSXRlbS5pbmRleCwgMSk7XHJcbiAgICAgICAgICAgICRzY29wZS5jb25maXJtRGVsTGF5ZXIgPSAwO1xyXG5cclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdEZWxldGUgc3VjY2Vzc2Z1bGx5Jywge1xyXG4gICAgICAgICAgICAgIHRpbWU6IDEwMDBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IFxyXG4gICAgICAgIH0sIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3TCoG1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoGlzRml4ZWQ6IHRydWXCoH0pO1xyXG4gICAgICAgIGRzcC5nZXRGdW4oJ3Bvam8vcHJvZHVjdC9jYW5jZWxMaXN0ZWQ/aWQ9JyArIGRlbGV0ZUl0ZW0uSUQsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgIHZhciBkYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgaWYoZGF0YS5zdGF0dXNDb2RlID09IDIwOSkge1xyXG4gICAgICAgICAgICAvLyDlupfpk7rlpITkuo7mjojmnYPlpLHmlYjnirbmgIFcclxuICAgICAgICAgICAgJHNjb3BlLmNvbmZpcm1EZWxMYXllciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuYXV0aG9yaXphdGlvbkV4cGlyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXNDb2RlICE9IDIwMCkge1xyXG4gICAgICAgICAgICAvLyBsYXllci5tc2coJ0RlbGV0ZSBmYWlsZWQnKTtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGUgcHJvZHVjdCBjYW5ub3QgYmUgZGVsZXRlZCBiZWNhdXNlIHRoZSBzdG9yZSBpcyBkZWFjdGl2YXRlZC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGF5ZXIubXNnKCdEZWxldGVkIFN1Y2Nlc3NmdWxseScsIHsgdGltZTogMTAwMCB9KTtcclxuICAgICAgICAgICRzY29wZS5nZXRMaXN0ZWRQb3N0KCk7IC8vIOWIt+aWsOWIl+ihqFxyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpcm1EZWxMYXllciA9IGZhbHNlO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbXNnTG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8v5YWo6YOo5Yig6ZmkXHJcbiAgICBmdW5jdGlvbiBkZWxldGVBbGxGdW4oKXtcclxuICAgICAgY29uc3TCoG1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoGlzRml4ZWQ6IHRydWXCoH0pO1xyXG4gICAgICBkc3AucG9zdEZ1bignY2ovbGlzdGVkcHJvZHVjdC9kZWxldGVBbGwnLHt9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuICAgICAgICAgIC8v5b6q546v5Yig6ZmkaXRlbVxyXG4gICAgICAgICAgJHNjb3BlLmdldExpc3RlZFBvc3QoKTtcclxuICAgICAgICAgICRzY29wZS5jb25maXJtRGVsTGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjA5KSB7XHJcbiAgICAgICAgICAvLyDlupfpk7rlpITkuo7mjojmnYPlpLHmlYjnirbmgIFcclxuICAgICAgICAgICRzY29wZS5jb25maXJtRGVsTGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICRzY29wZS5hdXRob3JpemF0aW9uRXhwaXJlZCA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnVGhlIHByb2R1Y3QgY2Fubm90IGJlIGRlbGV0ZWQgYmVjYXVzZSB0aGUgc3RvcmUgaXMgZGVhY3RpdmF0ZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgLy/lhajpg6jliKDpmaRcclxuICAgIGZ1bmN0aW9uIGRlbGV0ZUFsbEZhaWxGdW4oKXtcclxuICAgICAgY29uc3TCoG1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoGlzRml4ZWQ6IHRydWXCoH0pO1xyXG4gICAgICBkc3AucG9zdEZ1bignY2ovbGlzdGVkcHJvZHVjdC9kZWxldGVBbGxGYWlsJyx7fSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAvL+W+queOr+WIoOmZpGl0ZW1cclxuICAgICAgICAgICRzY29wZS5nZXRMaXN0ZWRQb3N0KCk7XHJcbiAgICAgICAgICAkc2NvcGUuY29uZmlybURlbExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDIwOSkge1xyXG4gICAgICAgICAgLy8g5bqX6ZO65aSE5LqO5o6I5p2D5aSx5pWI54q25oCBXHJcbiAgICAgICAgICAkc2NvcGUuY29uZmlybURlbExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgICAkc2NvcGUuYXV0aG9yaXphdGlvbkV4cGlyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1RoZSBwcm9kdWN0IGNhbm5vdCBiZSBkZWxldGVkIGJlY2F1c2UgdGhlIHN0b3JlIGlzIGRlYWN0aXZhdGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBmdW5jdGlvbigpIHtcclxuICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIC8v5Yiq6Zmk5YiX6KGoXHJcbiAgICAkc2NvcGUuZG9EZWxldGUyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZigkc2NvcGUuY2hlY2tBbGxMaXN0KXtcclxuICAgICAgICBpZigkc2NvcGUuc3RhdHVzPT0nMCcpe1xyXG4gICAgICAgICAgZGVsZXRlQWxsRnVuKCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICBkZWxldGVBbGxGYWlsRnVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9ZWxzZXtcclxuwqDCoMKgwqDCoMKgwqDCoGNvbnN0wqBtc2dMb2FkaW5nwqA9wqBjak1lc3NhZ2UubG9hZGluZyh7wqBpc0ZpeGVkOiB0cnVlwqB9KTtcclxuICAgICAgICBkc3AucG9zdEZ1bignY2ovbGlzdGVkcHJvZHVjdC9kZWxldGUnLCRzY29wZS5xdWV1ZVBhcmFtcy5pZHMsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgLy/lvqrnjq/liKDpmaRpdGVtXHJcbiAgICAgICAgICAgICRzY29wZS5nZXRMaXN0ZWRQb3N0KCk7XHJcbiAgICAgICAgICAgICRzY29wZS5jb25maXJtRGVsTGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICAgIH0gZWxzZSBpZihkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAyMDkpIHtcclxuICAgICAgICAgICAgLy8g5bqX6ZO65aSE5LqO5o6I5p2D5aSx5pWI54q25oCBXHJcbiAgICAgICAgICAgICRzY29wZS5jb25maXJtRGVsTGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLmF1dGhvcml6YXRpb25FeHBpcmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGUgcHJvZHVjdCBjYW5ub3QgYmUgZGVsZXRlZCBiZWNhdXNlIHRoZSBzdG9yZSBpcyBkZWFjdGl2YXRlZCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbXNnTG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5jYXRlZ29yeVR5cGUgPSAnc2VsZWN0JyB8fCAnaW5wdXQnO1xyXG5cclxuICAgIC8v6I635Y+W6YCJ5oup55qEaWTmlbDnu4RcclxuICAgIGZ1bmN0aW9uIGdldFNlbGVjdEZ1bigpe1xyXG4gICAgICAkc2NvcGUuYmFuTGlzdEl0ZW1zID0gJHNjb3BlLmxpc3RlZExpc3QuZmlsdGVyKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gZS5jaGVjaztcclxuICAgICAgfSlcclxuICAgICAgaWYgKCRzY29wZS5iYW5MaXN0SXRlbXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICB0aHJvdyBsYXllci5tc2coJ1BsZWFzZSBzZWxlY3QgYXQgbGVhc3Qgb25lIHByb2R1Y3QhJyk7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IG9hcnIgPSAkc2NvcGUuYmFuTGlzdEl0ZW1zLm1hcChpdGVtPT57XHJcbiAgICAgICAgcmV0dXJuIGl0ZW0uSURcclxuICAgICAgfSk7XHJcbiAgICAgICRzY29wZS5xdWV1ZVBhcmFtcy5pZHM9b2FycjtcclxuICAgIH1cclxuICAgICRzY29wZS5zdGFydExpc3QgPSAodmFsKSA9PiB7Ly/lvIDlp4vmj5DkuqTliIrnmbtcclxuICAgICAgaWYoJHNjb3BlLmxpc3RlZExpc3QubGVuZ3RoPT0wKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmKCRzY29wZS5jaGVja0FsbExpc3Qpe1xyXG4gICAgICAgICRzY29wZS5jaGVja19BbGw9ZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLmxpc3RDaGVja0xlbiA9IDBcclxuICAgICAgICAkc2NvcGUubGlzdGVkTGlzdC5mb3JFYWNoKGl0ZW09PiB7XHJcbiAgICAgICAgICBpdGVtLmNoZWNrPWZhbHNlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIGdldFNlbGVjdEZ1bigpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0wqBkb23CoD3CoGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb3V0ZXItb3V0bGV0LXdyYXAnKVxyXG7CoMKgwqDCoMKgwqDCoMKgY29uc3TCoG1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoHBvcHVwQ29udGFpbmVyRG9tOsKgZG9twqB9KTtcclxuICAgICAgLy/ojrflj5blupfpk7rliJfooahcclxuICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9zaG9wL2dldHNob3AnLHtcclxuICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHt1c2VySWQ6dXNlcklkfSlcclxuICAgICAgfSwgKHJlcyk9PntcclxuICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICB2YXIgb2JqID0gSlNPTi5wYXJzZShyZXMuZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgIGlmKG9iai5zaG9wbGlzdCl7XHJcbiAgICAgICAgICAvL+ebruWJjeWPquaUr+aMgXNob3BpZnnnmoTlupfpk7pcclxuICAgICAgICAgICRzY29wZS5zaG9wTGlzdCA9IChvYmouc2hvcGxpc3QpLmZpbHRlcihpdGVtPT57XHJcbiAgICAgICAgICAgIGlmKGl0ZW0uVFlQRT09J3Nob3BpZnknKSByZXR1cm4gaXRlbTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaWYoJHNjb3BlLnNob3BMaXN0Lmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgJHNjb3BlLnNob3dTdGFydExpc3REaWFsb2cgPSB0cnVlO1xyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGxheWVyLm9wZW4oe1xyXG4gICAgICAgICAgICAgIGFyZWE6IFsnNDgwcHgnLCAnMjAwcHgnXSxcclxuICAgICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgICAgY2xvc2VCdG46IDAsXHJcbiAgICAgICAgICAgICAgYnRuOiBbJ0NvbmZpcm0nXSxcclxuICAgICAgICAgICAgICBzaGFkZUNsb3NlOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHNraW46ICcnLFxyXG4gICAgICAgICAgICAgIGNvbnRlbnQ6ICc8cCBzdHlsZT1cIm1hcmdpbi10b3A6NDVweFwiPlRoZSBsaXN0aW5nIGZlYXR1cmUgaXMgb25seSBhdmFpbGFibGUgdG8gU2hvcGlmeSBzdG9yZXMgbm93LjwvcD4nLFxyXG4gICAgICAgICAgICAgIHllczogZnVuY3Rpb24gKGluZGV4LCBsYXllcm8pIHtcclxuICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2UoaW5kZXgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICBsYXllci5tc2coJ0ZhaWxlZCB0byBnZXQgeW91ciBzdG9yZXMnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sICgpID0+IHtcclxuICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIC8v5o+Q5Lqk5YiK55m76K+35rGC5pWw5o2uXHJcbiAgICAkc2NvcGUucXVldWVQYXJhbXMgPSB7XHJcbiAgICAgIGxvZ2lzdGljczonJyxcclxuICAgICAgdGF4YWJsZTonMCcsXHJcbiAgICAgIHRheDpmYWxzZVxyXG4gICAgfTtcclxuICAgIC8v5YWo6YOo5o+Q5Lqk5Yiw5YiK55m76Zif5YiXXHJcbiAgICAkc2NvcGUuc3VibWl0QWxsRnVuID0oKT0+e1xyXG4gICAgICBkc3AucG9zdEZ1bignY2ovbGlzdGVkcHJvZHVjdC9zdWJtaXRBbGwnLCAkc2NvcGUucXVldWVQYXJhbXMsIChyZXMpPT57XHJcbiAgICAgICAgJHNjb3BlLm1zZ0xvYWRpbmcgJiYgJHNjb3BlLm1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgIGxvY2F0aW9uLmhyZWY9J215Q0ouaHRtbCMvcHJvZHVjdHMtY29ubmVjdGlvbi9oaXN0b3J5LzEnO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL+aPkOS6pOWIsOWIiueZu+mYn+WIl1xyXG4gICAgJHNjb3BlLmxpc3RDb25maXJtRnVuID0gKCk9PntcclxuICAgICAgaWYgKCEkc2NvcGUuc2hvcEl0ZW0pIHJldHVybiBsYXllci5tc2coJ1BsZWFzZSBzZWxlY3QgYSBzdG9yZSBmaXJzdC4nKTtcclxuICAgICAgaWYgKCEkc2NvcGUuY2F0ZWdvcnlJdGVtKSByZXR1cm4gbGF5ZXIubXNnKCdQbGVhc2Ugc2VsZWN0IHRoZSBjYXRlZ29yeS4nKTtcclxuICAgICAgaWYgKCEkc2NvcGUuc2hpcHBpbmdJdGVtKSByZXR1cm4gbGF5ZXIubXNnKCdQbGVhc2Ugc2VsZWN0IHRoZSBsb2dpc3RpY3MuJyk7XHJcbiAgICAgIGlmKCRzY29wZS5jYXRlZ29yeVR5cGU9PSdzZWxlY3QnKXtcclxuICAgICAgICAkc2NvcGUucXVldWVQYXJhbXMucHJvZHVjdFR5cGUgPSAkc2NvcGUuY2F0ZWdvcnlJdGVtLm5hbWU7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnF1ZXVlUGFyYW1zLnNob3BJZCA9ICRzY29wZS5zaG9wSXRlbS5JRDtcclxuICAgICAgJHNjb3BlLnF1ZXVlUGFyYW1zLnNob3BOYW1lID0gJHNjb3BlLnNob3BJdGVtLk5BTUU7XHJcbiAgICAgICRzY29wZS5xdWV1ZVBhcmFtcy5sb2dpc3RpY3MgPSAkc2NvcGUuc2hpcHBpbmdJdGVtLm5hbWVFbjtcclxuICAgICAgJHNjb3BlLnF1ZXVlUGFyYW1zLnRheGFibGU9JHNjb3BlLnF1ZXVlUGFyYW1zLnRheD8nMSc6JzAnO1xyXG4gICAgICAkc2NvcGUucXVldWVQYXJhbXMuY29sbGVjdGlvbklkID0gJHNjb3BlLmNvbGxlY3Rpb25JZCA/ICRzY29wZS5jb2xsZWN0aW9uSWQgOiAnJztcclxuICAgICAgY29uc29sZS5sb2coJHNjb3BlLnF1ZXVlUGFyYW1zKVxyXG4gICAgICBpZighJHNjb3BlLnF1ZXVlUGFyYW1zLnNob3BJZCl7XHJcbiAgICAgICAgcmV0dXJuIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCBTdG9yZScpO1xyXG4gICAgICB9ZWxzZSBpZighJHNjb3BlLnF1ZXVlUGFyYW1zLnByb2R1Y3RUeXBlKXtcclxuICAgICAgICByZXR1cm4gbGF5ZXIubXNnKCdQbGVhc2Ugc2VsZWN0IENhdGVnb3J5JylcclxuICAgICAgfWVsc2UgaWYoISRzY29wZS5xdWV1ZVBhcmFtcy5sb2dpc3RpY3Mpe1xyXG4gICAgICAgIHJldHVybiBsYXllci5tc2coJ1BsZWFzZSBzZWxlY3QgU2hpcHBpbmcnKVxyXG4gICAgICB9XHJcbiAgICAgIMKgJHNjb3BlLm1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoGlzRml4ZWQ6IHRydWXCoH0pO1xyXG4gICAgICBpZigkc2NvcGUuY2hlY2tBbGxMaXN0KXsvL+WFqOmDqOmAieaLqVxyXG4gICAgICAgICRzY29wZS5zdWJtaXRBbGxGdW4oKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL2xpc3RlZHByb2R1Y3Qvc3VibWl0JywgJHNjb3BlLnF1ZXVlUGFyYW1zLCAocmVzKT0+e1xyXG4gICAgICAgICAgJHNjb3BlLm1zZ0xvYWRpbmcgJiYgJHNjb3BlLm1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgICAgbG9jYXRpb24uaHJlZj0nbXlDSi5odG1sIy9wcm9kdWN0cy1jb25uZWN0aW9uL2hpc3RvcnkvMSc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdldFNoaXBwaW5nRnVuKCl7Ly/ojrflj5bnianmtYHliJfooahcclxuICAgICAgLy8gZHNwLnBvc3RGdW4yKCdnZXROZXdNb2RlQnlTaG9wVHlwZS5qc29uJyx7c2hvcGVUeXBlOiRzY29wZS5zaG9wSXRlbS5UWVBFfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgLy8gICAkc2NvcGUuc2hpcHBpbmdMaXN0ID0gZGF0YS5kYXRhO1xyXG4gICAgICAvLyAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgIC8vIH0pXHJcbiAgICAgIGRzcC5nZXRTaGlwTGlzdE5ldyh7XHJcbiAgICAgICAgcGxhdEZvcm1zOiBbJHNjb3BlLnNob3BJdGVtLlRZUEVdXHJcbiAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgJHNjb3BlLnNoaXBwaW5nTGlzdCA9IGRhdGE7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5L+u5pS55bqX6ZO66I635Y+W55u45bqU55qE5qCH6aKY5ZKM54mp5rWBXHJcbiAgICAkc2NvcGUuY2hhbmdlTGlzdEZ1biA9ICgpPT57XHJcbiAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5zaG9wSXRlbSlcclxuICAgICAgLy/ojrflj5bllYblk4FcclxuwqDCoMKgwqDCoMKgwqDCoGNvbnN0wqBtc2dMb2FkaW5nwqA9wqBjak1lc3NhZ2UubG9hZGluZyh7wqBpc0ZpeGVkOiB0cnVlwqB9KTtcclxuICAgICAgZHNwLmdldEZ1bihgcG9qby9wcm9kdWN0L1Nob3BpZnlQcm9kdWN0VHlwZT9zaG9wSWQ9JHskc2NvcGUuc2hvcEl0ZW0uSUR9YCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAkc2NvcGUuY2F0ZWdvcnlMaXN0ID0gSlNPTi5wYXJzZShkYXRhLmRhdGEucmVzdWx0KSB8fCBbXTtcclxuICAgICAgICAkc2NvcGUuY2F0ZWdvcnlMaXN0ID0gJHNjb3BlLmNhdGVnb3J5TGlzdC5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICBpdGVtLm5hbWUgPSBpdGVtLnByb2R1Y3RfdHlwZTsgLy8g57uf5LiA5bqX6ZO65ZCN56ewIG5hbWUg5a2X5q6177yM5pa55L6/5qih54mI5Y+W5YC8XHJcbiAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbXNnTG9hZGluZy5oaWRlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIGdldFNoaXBwaW5nRnVuKCk7XHJcbiAgICAgIC8vIOWRiuiviXNob3BpZnkgY29sbGVjdGlvbnPnu4Tku7bliIfmjaLlupfpk7rkuoZcclxuICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3F1aWNrLWxpc3QnLCB7XHJcbiAgICAgICAgZmxhZzogJ2NoYW4tc3RvcmUnLFxyXG4gICAgICAgIHN0b3JlOiAkc2NvcGUuc2hvcEl0ZW1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyDmjqXmlLZzaG9waWZ5IGNvbGxlY3Rpb25z57uE5Lu25Lyg6L+H5p2l55qEY29sbGVjdGlvbklkXHJcbiAgICAkc2NvcGUuJG9uKCdzaG9waWZ5LWNvbGxlY3Rpb25zJywgZnVuY3Rpb24gKGV2LCBkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmZsYWcgPT0gJ2ZyZXNoLWNvbGxlY3Rpb24taWQnKSB7XHJcbiAgICAgICAgJHNjb3BlLmNvbGxlY3Rpb25JZCA9IGRhdGEuY29sbGVjdGlvbklkO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgJHNjb3BlLmxpc3RQcmljZU9iaiA9IHsvL+e8lui+kemHkemineWPguaVsFxyXG4gICAgICBmbGFnOicyJywvLzA65Zu65a6a5Lu35qC877ybMTor77ybMu+8mipcclxuICAgICAgcHJpY2U6JycsXHJcbiAgICAgIGxhc3RQcmljZTonJyxcclxuICAgICAgZml4ZWRQcmljZTonJ1xyXG4gICAgfVxyXG4gICAgJHNjb3BlLmNvbmZpcm1QcmljZUZ1bj0oKT0+e1xyXG4gICAgICAkc2NvcGUuY2hlY2tfQWxsPWZhbHNlO1xyXG4gICAgICAkc2NvcGUubGlzdENoZWNrTGVuID0gMFxyXG4gICAgICBsZXQgcGFyYW0gPSB7fTtcclxuICAgICAgaWYoJHNjb3BlLnByaWNlQ2hlY2spe1xyXG4gICAgICAgIHBhcmFtLmZsYWcgPSAnMCc7XHJcbiAgICAgICAgcGFyYW0ucHJpY2UgPSAkc2NvcGUubGlzdFByaWNlT2JqLmZpeGVkUHJpY2U7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHBhcmFtLmZsYWcgPSAkc2NvcGUubGlzdFByaWNlT2JqLmZsYWc7XHJcbiAgICAgICAgcGFyYW0ucHJpY2UgPSAkc2NvcGUubGlzdFByaWNlT2JqLnByaWNlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKCRzY29wZS5jaGVja0FsbExpc3Qpe1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9saXN0ZWRwcm9kdWN0L3VwZGF0ZVByaWNlQWxsJywgcGFyYW0sIChyZXMpPT57XHJcbiAgICAgICAgICAkc2NvcGUuZ2V0TGlzdGVkUG9zdCgpO1xyXG4gICAgICAgICAgJHNjb3BlLnNob3dFZGl0UHJpY2VEaWFsb2c9ZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHBhcmFtLmlkcz0gJHNjb3BlLnF1ZXVlUGFyYW1zLmlkc1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBhcmFtKVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9saXN0ZWRwcm9kdWN0L3VwZGF0ZVByaWNlJywgcGFyYW0sIChyZXMpPT57XHJcbiAgICAgICAgICAkc2NvcGUuZ2V0TGlzdGVkUG9zdCgpO1xyXG4gICAgICAgICAgJHNjb3BlLnNob3dFZGl0UHJpY2VEaWFsb2c9ZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvbmx5cHJpY2UoKXtcclxuXHQgICAgJHNjb3BlLmxpc3RQcmljZU9iai5wcmljZSA9ICRzY29wZS5saXN0UHJpY2VPYmoucHJpY2UucmVwbGFjZSgvW15cXGQuXS9nLCBcIlwiKTtcclxuXHQgICAgLy/lv4Xpobvkv53or4HnrKzkuIDkuKrkuLrmlbDlrZfogIzkuI3mmK8uXHJcblx0ICAgICRzY29wZS5saXN0UHJpY2VPYmoucHJpY2UgPSAkc2NvcGUubGlzdFByaWNlT2JqLnByaWNlLnJlcGxhY2UoL15cXC4vZywgXCJcIik7XHJcblx0ICAgIC8v5L+d6K+B5Y+q5pyJ5Ye6546w5LiA5LiqLuiAjOayoeacieWkmuS4qi5cclxuXHQgICAgJHNjb3BlLmxpc3RQcmljZU9iai5wcmljZSA9ICRzY29wZS5saXN0UHJpY2VPYmoucHJpY2UucmVwbGFjZSgvXFwuezIsfS9nLCBcIi5cIik7XHJcblx0ICAgIC8v5L+d6K+BLuWPquWHuueOsOS4gOasoe+8jOiAjOS4jeiDveWHuueOsOS4pOasoeS7peS4ilxyXG4gICAgICAkc2NvcGUubGlzdFByaWNlT2JqLnByaWNlID0gJHNjb3BlLmxpc3RQcmljZU9iai5wcmljZS5yZXBsYWNlKFwiLlwiLFwiJCMkXCIpLnJlcGxhY2UoL1xcLi9nLFwiXCIpLnJlcGxhY2UoXCIkIyRcIixcIi5cIik7XHJcbiAgICAgICRzY29wZS5saXN0UHJpY2VPYmoucHJpY2UgPSAkc2NvcGUubGlzdFByaWNlT2JqLnByaWNlLnJlcGxhY2UoL14oXFwtKSooXFxkKylcXC4oXFxkXFxkKS4qJC8sJyQxJDIuJDMnKTtcclxuICAgIH1cclxuICAgICRzY29wZS5jaGFuZ2VGaWV4ZFByaWNlRnVuPSgpPT57XHJcblx0ICAgICRzY29wZS5saXN0UHJpY2VPYmouZml4ZWRQcmljZSA9ICRzY29wZS5saXN0UHJpY2VPYmouZml4ZWRQcmljZS5yZXBsYWNlKC9bXlxcZC5dL2csIFwiXCIpO1xyXG5cdCAgICAvL+W/hemhu+S/neivgeesrOS4gOS4quS4uuaVsOWtl+iAjOS4jeaYry5cclxuXHQgICAgJHNjb3BlLmxpc3RQcmljZU9iai5maXhlZFByaWNlID0gJHNjb3BlLmxpc3RQcmljZU9iai5maXhlZFByaWNlLnJlcGxhY2UoL15cXC4vZywgXCJcIik7XHJcblx0ICAgIC8v5L+d6K+B5Y+q5pyJ5Ye6546w5LiA5LiqLuiAjOayoeacieWkmuS4qi5cclxuXHQgICAgJHNjb3BlLmxpc3RQcmljZU9iai5maXhlZFByaWNlID0gJHNjb3BlLmxpc3RQcmljZU9iai5maXhlZFByaWNlLnJlcGxhY2UoL1xcLnsyLH0vZywgXCIuXCIpO1xyXG5cdCAgICAvL+S/neivgS7lj6rlh7rnjrDkuIDmrKHvvIzogIzkuI3og73lh7rnjrDkuKTmrKHku6XkuIpcclxuICAgICAgJHNjb3BlLmxpc3RQcmljZU9iai5maXhlZFByaWNlID0gJHNjb3BlLmxpc3RQcmljZU9iai5maXhlZFByaWNlLnJlcGxhY2UoXCIuXCIsXCIkIyRcIikucmVwbGFjZSgvXFwuL2csXCJcIikucmVwbGFjZShcIiQjJFwiLFwiLlwiKTtcclxuICAgICAgJHNjb3BlLmxpc3RQcmljZU9iai5maXhlZFByaWNlID0gJHNjb3BlLmxpc3RQcmljZU9iai5maXhlZFByaWNlLnJlcGxhY2UoL14oXFwtKSooXFxkKylcXC4oXFxkXFxkKS4qJC8sJyQxJDIuJDMnKTtcclxuICAgIH1cclxuICAgICRzY29wZS5jaGFuZ2VQcmljZUZ1biA9ICgpPT57XHJcbiAgICAgIG9ubHlwcmljZSgkc2NvcGUubGlzdFByaWNlT2JqLnByaWNlKTtcclxuICAgICAgaWYoJHNjb3BlLmxpc3RQcmljZU9iai5mbGFnPT0nMScpe1xyXG4gICAgICAgICRzY29wZS5saXN0UHJpY2VPYmoubGFzdFByaWNlPSgkc2NvcGUubGlzdFByaWNlT2JqLnByaWNlLTApKzEwXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgICRzY29wZS5saXN0UHJpY2VPYmoubGFzdFByaWNlPSgkc2NvcGUubGlzdFByaWNlT2JqLnByaWNlLTApKjEwXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgICRzY29wZS5saXN0Tm93RnVuID0gKGl0ZW0pPT57XHJcbiAgICAgIHdpbmRvdy5vcGVuKGBwcm9kdWN0LWRldGFpbC5odG1sP2lkPSR7aXRlbS5QSUR9JmZyb209YWxsJmZyb21UeXBlPWFsbCZsaXN0PTFgKTtcclxuICAgIH1cclxuICAgICRzY29wZS5lZGl0UHJpY2VGdW49KCk9PntcclxuICAgICAgaWYoISRzY29wZS5jaGVja0FsbExpc3Qpey8v5b2T5YmN5LiN5piv5YWo6YCJ5pe25Yik5patXHJcbiAgICAgICAgZ2V0U2VsZWN0RnVuKCk7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnNob3dFZGl0UHJpY2VEaWFsb2c9dHJ1ZTtcclxuICAgIH1cclxuICAgICRzY29wZS5jbG9zZUNvdW50ZG93bkZ1biA9ICgpPT57XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgICAgICRzY29wZS5saXN0Q291bnRkb3duT2JqLmlzU2hvdz1mYWxzZTtcclxuICAgIH1cclxuICAgICRzY29wZS5uZXdDYXRlZ29yeSA9ICgpID0+IHtcclxuICAgICAgaWYgKCEkc2NvcGUuc2hvcEl0ZW0pIHJldHVybiBsYXllci5tc2coJ1BsZWFzZSBzZWxlY3QgYSBzdG9yZSBmaXJzdC4nKTtcclxuICAgICAgaWYgKCEkc2NvcGUucXVldWVQYXJhbXMucHJvZHVjdFR5cGUpIHJldHVybiBsYXllci5tc2coXCJQbGVhc2UgaW5wdXQgdGhlIG5ldyBjYXRlZ29yeS5cIik7XHJcbiAgICAgIGlmICgkc2NvcGUucXVldWVQYXJhbXMucHJvZHVjdFR5cGUpIHtcclxuICAgICAgICAkc2NvcGUuY2F0ZWdvcnlMaXN0LnB1c2goe1xyXG4gICAgICAgICAgbmFtZTogJHNjb3BlLnF1ZXVlUGFyYW1zLnByb2R1Y3RUeXBlXHJcbiAgICAgICAgfSlcclxuICAgICAgICAkc2NvcGUuY2F0ZWdvcnlUeXBlID0gJ3NlbGVjdCc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyog5aS06YOo6I+c5Y2V6L+b5YWl5Z+L54K5ICovXHJcbiAgICBmdW5jdGlvbiB0cmFja0Z1bigpe1xyXG4gICAgICBkc3AucG9zdEZ1bigncG9qby9ob21lL2FkZFN0YXRpc0J5VHlwZScse1xyXG4gICAgICAgICAgZW50cnlQYWdlOitkc3AuZ2V0UXVlcnlTdHJpbmcoJ3RyYWNrJylcclxuICAgICAgfSxyZXM9PiB7Y29uc29sZS5sb2cocmVzLmRhdGEpfSlcclxuICAgIH1cclxuICAgIGlmKCtkc3AuZ2V0UXVlcnlTdHJpbmcoJ3RyYWNrJyk9PTEwKXtcclxuICAgICAgICB0cmFja0Z1bigpO1xyXG4gICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICByZXR1cm4gYXBwO1xyXG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBREE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../src/pages/mycj/listed/listed.js\n");

/***/ })

}]);