(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[43],{

/***/ "../src/pages/mycj/packaging/regular-package.js":
/*!******************************************************!*\
  !*** ../src/pages/mycj/packaging/regular-package.js ***!
  \******************************************************/
/*! exports provided: regularPackageFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"regularPackageFactory\", function() { return regularPackageFactory; });\nfunction regularPackageFactory(angular) {\n  var app = angular.module('regular-package.module', ['home-service']);\n  app.controller('regular-package.ctrl', ['$scope', '$rootScope', '$stateParams', 'dsp', 'cjhome', '$state', function ($scope, $rootScope, $stateParams, dsp, cjhome, $state) {\n    /* 默认配置 */\n    $scope.vip = $rootScope.userInfo.vip;\n    $scope.totalNum = 1;\n    dsp.setRightMinHeight();\n    var base64 = new Base64();\n    $scope.type = $stateParams.type ? $stateParams.type : 'ALL'; //数据声明\n\n    $scope.pageNum = '1';\n    $scope.pageSize = '60';\n    $scope.totalNum = null;\n    $scope.inputStr = '';\n    $scope.dataList = null;\n    $scope.hasLogin = dsp.isInLoginState();\n    $scope.$on('to-parent', function (d, data) {\n      console.log('购物车数据', data);\n      $scope.buylist = data;\n    }); //搜索\n\n    $scope.searchPro = function () {\n      $scope.pageNum = '1';\n      getData();\n    };\n\n    $scope.enterSearch = function (event) {\n      if (event.keyCode == 13) {\n        $scope.searchPro();\n      }\n    };\n\n    $scope.chanPageType = function (type) {\n      $scope.type = type;\n      $scope.pageNum = '1';\n      getData();\n    };\n\n    $rootScope.$on('cj/PackProduct/queryCjPackProductInfo', function (_, bool) {\n      return $scope.loading = bool;\n    }); // 获取数据\n\n    function getData() {\n      var selectPackKey = $scope.materialArr && $scope.materialArr.filter(function (item) {\n        return item.isSelect === true;\n      });\n      var parms = {\n        name: $scope.inputStr,\n        pageNum: $scope.pageNum,\n        pageSize: $scope.pageSize,\n        type: $scope.type,\n        packingKey: $scope.materialArr && _.map(selectPackKey, 'code').join(',')\n      };\n      if ($scope.pageNum == 0) return;\n      $scope.dataList = null;\n      dsp.postFun('cj/PackProduct/queryCjPackProductInfo', parms, function (res) {\n        if (res.data.statusCode === '200') {\n          $scope.dataList = res.data.result.list;\n          $scope.totalNum = res.data.result.count;\n          $scope.totalCounts = Math.ceil($scope.totalNum / ($scope.pageSize - 0));\n          $scope.$broadcast('page-data', {\n            pageNum: $scope.pageNum,\n            totalNum: $scope.totalCounts,\n            totalCounts: $scope.totalNum,\n            pageSize: $scope.pageSize,\n            pagesizeList: []\n          });\n        }\n      });\n    } // 获取材质数据\n\n\n    function getPackKeyList() {\n      dsp.getFun('cj/SystemConfig/getPackKeyList', function (res) {\n        if (res.data.statusCode === '200') {\n          $scope.materialArr = res.data.result;\n        }\n      }, function (e) {\n        return e;\n      });\n    }\n\n    getData();\n    getPackKeyList();\n    /**\r\n     * 获取包装商品阶梯价格\r\n     */\n\n    function getPackProductDiscountPriceAll(id) {\n      var params = {\n        id: id,\n        num: 1\n      };\n      dsp.postFun('erp/PackProduct/getPackProductDiscountPriceAll', params, function (res) {\n        if (res.data.statusCode === '200') {\n          $scope.discountPriceAll = res.data.result;\n        }\n      }, function (e) {\n        return e;\n      });\n    }\n    /* 选择材质事件 */\n\n\n    $scope.selectMaterial = function (item) {\n      // 如果已经选择的超过 3 个，且这个 item 不是里面的值，则提示不超过 3 个\n      var selectedArr = $scope.materialArr.filter(function (item) {\n        return item.isSelect === true;\n      });\n\n      if (selectedArr.length == 3 && !selectedArr.some(function (select) {\n        return select.code === item.code;\n      })) {\n        layer.msg('You can select 3 packages at most once.');\n        return;\n      } // 已经选择的材质\n\n\n      item.isSelect = item.isSelect ? false : true; // 获取数据\n\n      getData();\n    };\n    /*收藏*/\n\n\n    $scope.collectMerch = function (flag, id, $event) {\n      $event.stopPropagation();\n\n      if ($scope.hasLogin) {\n        cjhome.Collection(flag, id, $event, $('#wishlist-box'));\n      } else {\n        layer.msg('Please login first!');\n      }\n    };\n    /*收藏hover*/\n\n\n    $scope.MerchEnter = function (ev) {\n      if ($(ev.currentTarget).attr('src') == 'static/image/CJ-home/icon_love@2x.png') {\n        $(ev.currentTarget).attr('src', 'static/image/CJ-home/love_hover@2x.png');\n      }\n    };\n\n    $scope.MerchLeave = function (ev) {\n      if ($(ev.currentTarget).attr('src') != 'static/image/CJ-home/icon_wishlist_click@2x.png') {\n        $(ev.currentTarget).attr('src', 'static/image/CJ-home/icon_love@2x.png');\n      }\n    };\n    /*商品点击去详情*/\n\n\n    $scope.goTodetail = function (item) {\n      window.open('product-detail.html?id=' + item.id + '&productType=3&type=2');\n    }; //打开添加购物车弹窗\n\n\n    var mincount;\n\n    $scope.addDia = function (id, $event) {\n      $event.stopPropagation();\n      $scope.currentGoodsId = id;\n      $scope.additem = null;\n      $scope.addDialog = true;\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      dsp.postFun('cj/locProduct/huoQuShangPinXiangQing', JSON.stringify({\n        id: id,\n        token: ''\n      }), function (data) {\n        msgLoading.hide();\n        if (data.data.statusCode != 200) return;\n        $scope.additem = data.data.result; // 标示是否有阶梯价格 1 有区间价格 ；不是 1 则没有区间价格\n\n        $scope.discountStatusFlag = $scope.additem.discountStatus;\n\n        if ($scope.discountStatusFlag === 1) {\n          // 如果是有阶梯价格的，请求阶梯价格\n          getPackProductDiscountPriceAll(id);\n        }\n\n        $scope.stanProducts = $scope.additem.stanProducts;\n        $scope.varientArr = [];\n        $scope.varientKeys = [];\n        var supplierLink = JSON.parse($scope.additem.SUPPLIERLINK || null);\n        $scope.itemcount = $scope.additem.setNum ? Number($scope.additem.setNum) : 1;\n        mincount = $scope.itemcount;\n\n        if ($scope.additem.VARIANTKEYEN != '') {\n          $scope.varientKeys = $scope.additem.VARIANTKEYEN.split('-');\n\n          for (var i = 0; i < $scope.varientKeys.length; i++) {\n            $scope.varientArr.push({\n              name: $scope.varientKeys[i],\n              key: []\n            });\n          }\n\n          for (var i = 0; i < $scope.stanProducts.length; i++) {\n            if ($scope.stanProducts[i].VARIANTKEY != null) {\n              var curVarientVal = $scope.stanProducts[i].VARIANTKEY.split('-');\n\n              for (var j = 0; j < curVarientVal.length; j++) {\n                $scope.varientArr[j].key.push(curVarientVal[j]);\n              }\n            }\n          }\n\n          for (var i = 0; i < $scope.varientArr.length; i++) {\n            $scope.varientArr[i].key = dsp.uniqueArray($scope.varientArr[i].key);\n            $scope.varientArr[i].val = $scope.varientArr[i].key[0];\n          }\n        } else {\n          $scope.varientArr = [];\n        }\n\n        if ($scope.varientArr.length == 1 && $scope.varientArr[0].key.length == 0) {\n          $scope.varientArr = [];\n        }\n\n        console.log($scope.varientArr);\n        $scope.varientKeysInner = [];\n\n        for (var i = 0; i < $scope.stanProducts.length; i++) {\n          $scope.varientKeysInner.push($scope.stanProducts[i].VARIANTKEY);\n\n          if ($scope.stanProducts[i].sellDiscount != null && $scope.stanProducts[i].sellDiscount < 100) {\n            $scope.stanProducts[i].SELLPRICEDIS = ($scope.stanProducts[i].SELLPRICE * $scope.stanProducts[i].sellDiscount / 100).toFixed(2);\n          } else {\n            $scope.stanProducts[i].SELLPRICEDIS = $scope.stanProducts[i].SELLPRICE;\n          }\n        }\n\n        console.log($scope.varientKeysInner);\n        getTheVitem();\n      }, function (data) {\n        msgLoading.hide();\n      });\n    };\n\n    $scope.chanVariant = function (val, index) {\n      console.log(val);\n      var filterKeysOne = [];\n\n      for (var i = 0; i < $scope.varientKeysInner.length; i++) {\n        var curVarKey = $scope.varientKeysInner[i].split('-');\n\n        if (curVarKey[index] == val) {\n          filterKeysOne.push(curVarKey);\n        }\n      }\n\n      for (var i = 0; i < $scope.varientArr.length; i++) {\n        if (i == index) continue;\n        var canbeTwo = [];\n\n        for (var j = 0; j < filterKeysOne.length; j++) {\n          canbeTwo.push(filterKeysOne[j][i]);\n        }\n\n        var OtherSel1 = $scope.varientArr[i].val;\n        var isInTwo = $.inArray(OtherSel1, canbeTwo);\n\n        if (isInTwo == -1) {\n          $scope.varientArr[i].val = canbeTwo[0];\n        }\n\n        var filterKeysTwo = [];\n        var curValTwo = $scope.varientArr[i].val;\n\n        for (var k = 0; k < filterKeysOne.length; k++) {\n          if (filterKeysOne[k][i] == curValTwo) {\n            filterKeysTwo.push(filterKeysOne[k]);\n          }\n        }\n\n        filterKeysOne = filterKeysTwo;\n      }\n\n      getTheVitem();\n    }; // 切换规格\n\n\n    function getTheVitem() {\n      if ($scope.varientArr.length == 0) {\n        $scope.variantItem = $scope.stanProducts[0];\n      } else {\n        var curVarKeyArr = [];\n\n        for (var i = 0; i < $scope.varientArr.length; i++) {\n          curVarKeyArr.push($scope.varientArr[i].val);\n        }\n\n        $scope.curVarientKey = curVarKeyArr.join('-');\n        var curVarientIndex = dsp.findIndexByKey($scope.stanProducts, 'VARIANTKEY', $scope.curVarientKey);\n        $scope.variantItem = $scope.stanProducts[curVarientIndex];\n      }\n\n      $scope.additem = $scope.variantItem;\n      calcUnitPrice();\n    } // 计算单价\n\n\n    function calcUnitPrice() {\n      // 如果有阶梯价格，则计算阶梯价格,\n      if ($scope.discountStatusFlag === 1) {\n        var params = {\n          id: $scope.currentGoodsId,\n          // 商品 id\n          variantId: $scope.variantItem.ID,\n          // 变体 id\n          num: $scope.itemcount // 选择数量\n\n        };\n        dsp.postFun('erp/PackProduct/getVariantDiscountPrice', params, function (res) {\n          if (res.data.statusCode === '200') {\n            $scope.currentVarientUnitPrice = Number(res.data.result.unitPrice);\n            $scope.totalPrice = res.data.result.price;\n          }\n        }, function (e) {\n          return e;\n        });\n      } else {\n        // 否则还是用变体单价\n        $scope.currentVarientUnitPrice = Number($scope.variantItem.SELLPRICE);\n        $scope.totalPrice = $scope.currentVarientUnitPrice * $scope.itemcount;\n      }\n    } //添加到购物车\n\n\n    $scope.addbuy = function ($event) {\n      console.log($scope.variantItem);\n      console.log($scope.additem);\n      if (!$scope.itemcount) return layer.msg('Please enter the quantity.');\n      var proData = [{\n        BIGIMG: $scope.additem.IMG,\n        ID: $scope.variantItem.ID,\n        NAMEEN: $scope.additem.NAMEEN,\n        SELLPRICE: $scope.variantItem.SELLPRICE,\n        SKU: $scope.variantItem.SKU,\n        itemcount: $scope.itemcount,\n        discountPrice: $scope.currentVarientUnitPrice.toFixed(2)\n      }];\n      localStorage.setItem('packageData', JSON.stringify(proData)); //location.href = '#/myCJ-purchase///package'\n\n      $state.go('mycj-purchase', {\n        orderType: 'package'\n      });\n    }; //关闭弹窗\n\n\n    $scope.close = function () {\n      $scope.addDialog = false;\n    }; //加减\n\n\n    $scope.plusOne = function () {\n      if ($scope.itemcount >= 100000) {\n        $scope.itemcount = \"100000\";\n        return;\n      } else {\n        $scope.itemcount = $scope.itemcount * 1 + 1 + '';\n      }\n\n      calcUnitPrice();\n    };\n\n    $scope.minusOne = function (val) {\n      if (val == mincount) return;\n      $scope.itemcount = $scope.itemcount * 1 - 1 + '';\n      calcUnitPrice();\n    };\n\n    $scope.blurQuantity = function () {\n      if (!$scope.itemcount) {\n        $scope.itemcount = '1';\n        calcUnitPrice();\n      } else if ($scope.itemcount && $scope.itemcount - mincount < 0) {\n        $scope.itemcount = mincount;\n        calcUnitPrice();\n      }\n    };\n\n    $scope.checkIsNum = function (val) {\n      // if (isNaN(val * 1) || val * 1 < 1) {\n      //   $scope.itemcount = '1'\n      // }\n      if ($scope.itemcount > 100000) {\n        $scope.itemcount = \"100000\";\n      }\n\n      $scope.itemcount = $scope.itemcount.replace(/[^0-9]/ig, '');\n\n      if ($scope.itemcount) {\n        calcUnitPrice();\n      }\n    }; // 发现 itemcountBlur 暂时没用 2020-05-09\n\n\n    $scope.itemcountBlur = function () {\n      if ($scope.itemcount < mincount) {\n        $scope.itemcount = mincount;\n      }\n    };\n\n    $scope.chanPageSize = function () {\n      $scope.pageNum = '1';\n      getData();\n    };\n\n    $scope.chanPageNum = function () {\n      if (!isNaN($scope.pageNum * 1) && $scope.pageNum * 1 > 0 && $scope.pageNum * 1 <= $scope.totalNum) {\n        getData();\n      } else {\n        $scope.pageNum = '1';\n      }\n    };\n\n    $scope.deleteFun = function (item, oindex, $event) {\n      $event.stopPropagation();\n      layer.open({\n        title: null,\n        type: 1,\n        area: ['480px', '240px'],\n        skin: '',\n        closeBtn: 0,\n        content: 'Are you sure to delete it?',\n        btn: ['Cancel', 'Confirm'],\n        yes: function yes(index, layero) {\n          //按钮【按钮一】的回调\n          layer.close(index);\n        },\n        btn2: function btn2(index, layero) {\n          //按钮【按钮二】的回调\n          dsp.postFun('erp/PackProduct/delPackProduct', {\n            \"pid\": \"'\" + item.id + \"'\",\n            \"type\": 4\n          }, function (data) {\n            if (data.data.statusCode == 200) {\n              $scope.dataList.splice(oindex, 1);\n            } else {\n              layer.msg(data.data.message);\n            }\n          });\n          layer.close(index);\n          return false; //开启该代码可禁止点击该按钮关闭\n        },\n        cancel: function cancel() {\n          layer.close(index); //右上角关闭回调\n          //return false 开启该代码可禁止点击该按钮关闭\n        }\n      });\n    };\n\n    $scope.$on('pagedata-fa', function (d, data) {\n      console.log(data);\n      $scope.pageNum = data.pageNum;\n      $scope.pageSize = data.pageSize;\n      getData();\n    });\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovcGFja2FnaW5nL3JlZ3VsYXItcGFja2FnZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9zcmMvcGFnZXMvbXljai9wYWNrYWdpbmcvcmVndWxhci1wYWNrYWdlLmpzP2ViOGYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHJlZ3VsYXJQYWNrYWdlRmFjdG9yeShhbmd1bGFyKSB7XHJcbiAgY29uc3QgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3JlZ3VsYXItcGFja2FnZS5tb2R1bGUnLCBbJ2hvbWUtc2VydmljZSddKTtcclxuXHJcbiAgYXBwLmNvbnRyb2xsZXIoJ3JlZ3VsYXItcGFja2FnZS5jdHJsJywgWyckc2NvcGUnLCAnJHJvb3RTY29wZScsICckc3RhdGVQYXJhbXMnLCAnZHNwJywgJ2NqaG9tZScsICckc3RhdGUnLFxyXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkc3RhdGVQYXJhbXMsIGRzcCwgY2pob21lLCAkc3RhdGUpIHtcclxuICAgICAgLyog6buY6K6k6YWN572uICovXHJcbiAgICAgICRzY29wZS52aXAgPSAkcm9vdFNjb3BlLnVzZXJJbmZvLnZpcDtcclxuICAgICAgJHNjb3BlLnRvdGFsTnVtID0gMTtcclxuICAgICAgZHNwLnNldFJpZ2h0TWluSGVpZ2h0KCk7XHJcbiAgICAgIHZhciBiYXNlNjQgPSBuZXcgQmFzZTY0KCk7XHJcbiAgICAgICRzY29wZS50eXBlID0gJHN0YXRlUGFyYW1zLnR5cGUgPyAkc3RhdGVQYXJhbXMudHlwZSA6ICdBTEwnO1xyXG4gICAgICAvL+aVsOaNruWjsOaYjlxyXG4gICAgICAkc2NvcGUucGFnZU51bSA9ICcxJztcclxuICAgICAgJHNjb3BlLnBhZ2VTaXplID0gJzYwJztcclxuICAgICAgJHNjb3BlLnRvdGFsTnVtID0gbnVsbDtcclxuICAgICAgJHNjb3BlLmlucHV0U3RyID0gJyc7XHJcbiAgICAgICRzY29wZS5kYXRhTGlzdCA9IG51bGw7XHJcbiAgICAgICRzY29wZS5oYXNMb2dpbiA9IGRzcC5pc0luTG9naW5TdGF0ZSgpO1xyXG4gICAgICAkc2NvcGUuJG9uKCd0by1wYXJlbnQnLCBmdW5jdGlvbiAoZCwgZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfotK3nianovabmlbDmja4nLCBkYXRhKTtcclxuICAgICAgICAkc2NvcGUuYnV5bGlzdCA9IGRhdGE7XHJcbiAgICAgIH0pO1xyXG4gICAgICAvL+aQnOe0olxyXG4gICAgICAkc2NvcGUuc2VhcmNoUHJvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5wYWdlTnVtID0gJzEnO1xyXG4gICAgICAgIGdldERhdGEoKTtcclxuICAgICAgfTtcclxuICAgICAgJHNjb3BlLmVudGVyU2VhcmNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICRzY29wZS5zZWFyY2hQcm8oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmNoYW5QYWdlVHlwZSA9IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgJHNjb3BlLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICRzY29wZS5wYWdlTnVtID0gJzEnO1xyXG4gICAgICAgIGdldERhdGEoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJHJvb3RTY29wZS4kb24oJ2NqL1BhY2tQcm9kdWN0L3F1ZXJ5Q2pQYWNrUHJvZHVjdEluZm8nLCAoXywgYm9vbCkgPT4gJHNjb3BlLmxvYWRpbmcgPSBib29sKTtcclxuXHJcbiAgICAgIC8vIOiOt+WPluaVsOaNrlxyXG4gICAgICBmdW5jdGlvbiBnZXREYXRhKCkge1xyXG5cclxuICAgICAgICBsZXQgc2VsZWN0UGFja0tleSA9ICRzY29wZS5tYXRlcmlhbEFyciAmJiAkc2NvcGUubWF0ZXJpYWxBcnIuZmlsdGVyKGl0ZW09Pml0ZW0uaXNTZWxlY3QgPT09IHRydWUpXHJcblxyXG4gICAgICAgIHZhciBwYXJtcyA9IHtcclxuICAgICAgICAgIG5hbWU6ICRzY29wZS5pbnB1dFN0cixcclxuICAgICAgICAgIHBhZ2VOdW06ICRzY29wZS5wYWdlTnVtLFxyXG4gICAgICAgICAgcGFnZVNpemU6ICRzY29wZS5wYWdlU2l6ZSxcclxuICAgICAgICAgIHR5cGU6ICRzY29wZS50eXBlLFxyXG4gICAgICAgICAgcGFja2luZ0tleTokc2NvcGUubWF0ZXJpYWxBcnIgJiYgXy5tYXAoc2VsZWN0UGFja0tleSwnY29kZScpLmpvaW4oJywnKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCRzY29wZS5wYWdlTnVtID09IDApIHJldHVybjtcclxuICAgICAgICAkc2NvcGUuZGF0YUxpc3QgPSBudWxsO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9QYWNrUHJvZHVjdC9xdWVyeUNqUGFja1Byb2R1Y3RJbmZvJywgcGFybXMsIChyZXMpID0+IHtcclxuICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAnMjAwJykge1xyXG4gICAgICAgICAgICAkc2NvcGUuZGF0YUxpc3QgPSByZXMuZGF0YS5yZXN1bHQubGlzdDtcclxuICAgICAgICAgICAgJHNjb3BlLnRvdGFsTnVtID0gcmVzLmRhdGEucmVzdWx0LmNvdW50O1xyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxDb3VudHMgPSBNYXRoLmNlaWwoKCRzY29wZS50b3RhbE51bSAvICgkc2NvcGUucGFnZVNpemUgLSAwKSkpO1xyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgncGFnZS1kYXRhJywge1xyXG4gICAgICAgICAgICAgIHBhZ2VOdW06ICRzY29wZS5wYWdlTnVtLFxyXG4gICAgICAgICAgICAgIHRvdGFsTnVtOiAkc2NvcGUudG90YWxDb3VudHMsXHJcbiAgICAgICAgICAgICAgdG90YWxDb3VudHM6ICRzY29wZS50b3RhbE51bSxcclxuICAgICAgICAgICAgICBwYWdlU2l6ZTogJHNjb3BlLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICAgIHBhZ2VzaXplTGlzdDpbXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIC8vIOiOt+WPluadkOi0qOaVsOaNrlxyXG4gICAgICBmdW5jdGlvbiBnZXRQYWNrS2V5TGlzdCgpIHtcclxuXHJcbiAgICAgICAgZHNwLmdldEZ1bignY2ovU3lzdGVtQ29uZmlnL2dldFBhY2tLZXlMaXN0JywgKHJlcykgPT4ge1xyXG5cclxuICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAnMjAwJykge1xyXG4gICAgICAgICAgICAkc2NvcGUubWF0ZXJpYWxBcnIgPSByZXMuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxlPT5lKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZ2V0RGF0YSgpO1xyXG4gICAgICBnZXRQYWNrS2V5TGlzdCgpXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICog6I635Y+W5YyF6KOF5ZWG5ZOB6Zi25qKv5Lu35qC8XHJcbiAgICAgICAqL1xyXG4gICAgICBmdW5jdGlvbiBnZXRQYWNrUHJvZHVjdERpc2NvdW50UHJpY2VBbGwoaWQpIHtcclxuICAgICAgICBsZXQgcGFyYW1zID0ge1xyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICBudW06MVxyXG4gICAgICAgIH1cclxuICAgICAgICBkc3AucG9zdEZ1bignZXJwL1BhY2tQcm9kdWN0L2dldFBhY2tQcm9kdWN0RGlzY291bnRQcmljZUFsbCcsIHBhcmFtcywocmVzKSA9PiB7XHJcbiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gJzIwMCcpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50UHJpY2VBbGwgPSByZXMuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxlPT5lKTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIC8qIOmAieaLqeadkOi0qOS6i+S7tiAqL1xyXG4gICAgICAkc2NvcGUuc2VsZWN0TWF0ZXJpYWwgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG5cclxuICAgICAgICAvLyDlpoLmnpzlt7Lnu4/pgInmi6nnmoTotoXov4cgMyDkuKrvvIzkuJTov5nkuKogaXRlbSDkuI3mmK/ph4zpnaLnmoTlgLzvvIzliJnmj5DnpLrkuI3otoXov4cgMyDkuKpcclxuICAgICAgICBsZXQgc2VsZWN0ZWRBcnIgPSAkc2NvcGUubWF0ZXJpYWxBcnIuZmlsdGVyKGl0ZW09Pml0ZW0uaXNTZWxlY3QgPT09IHRydWUpXHJcbiAgICAgICAgaWYoIHNlbGVjdGVkQXJyLmxlbmd0aCA9PSAzICYmICFzZWxlY3RlZEFyci5zb21lKHNlbGVjdCA9PnNlbGVjdC5jb2RlID09PSBpdGVtLmNvZGUpKXtcclxuICAgICAgICAgIGxheWVyLm1zZygnWW91IGNhbiBzZWxlY3QgMyBwYWNrYWdlcyBhdCBtb3N0IG9uY2UuJylcclxuICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlt7Lnu4/pgInmi6nnmoTmnZDotKhcclxuXHJcbiAgICAgICAgaXRlbS5pc1NlbGVjdCA9IGl0ZW0uaXNTZWxlY3Q/IGZhbHNlOnRydWVcclxuICAgICAgICAvLyDojrflj5bmlbDmja5cclxuICAgICAgICBnZXREYXRhKClcclxuICAgICAgfVxyXG4gICAgICAvKuaUtuiXjyovXHJcbiAgICAgICRzY29wZS5jb2xsZWN0TWVyY2ggPSBmdW5jdGlvbiAoZmxhZywgaWQsICRldmVudCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAoJHNjb3BlLmhhc0xvZ2luKSB7XHJcbiAgICAgICAgICBjamhvbWUuQ29sbGVjdGlvbihmbGFnLCBpZCwgJGV2ZW50LCAkKCcjd2lzaGxpc3QtYm94JykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBsb2dpbiBmaXJzdCEnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLyrmlLbol49ob3ZlciovXHJcbiAgICAgICRzY29wZS5NZXJjaEVudGVyID0gZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgaWYgKCQoZXYuY3VycmVudFRhcmdldCkuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9DSi1ob21lL2ljb25fbG92ZUAyeC5wbmcnKSB7XHJcbiAgICAgICAgICAkKGV2LmN1cnJlbnRUYXJnZXQpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvQ0otaG9tZS9sb3ZlX2hvdmVyQDJ4LnBuZycpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5NZXJjaExlYXZlID0gZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgaWYgKCQoZXYuY3VycmVudFRhcmdldCkuYXR0cignc3JjJykgIT0gJ3N0YXRpYy9pbWFnZS9DSi1ob21lL2ljb25fd2lzaGxpc3RfY2xpY2tAMngucG5nJykge1xyXG4gICAgICAgICAgJChldi5jdXJyZW50VGFyZ2V0KS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL0NKLWhvbWUvaWNvbl9sb3ZlQDJ4LnBuZycpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8q5ZWG5ZOB54K55Ye75Y676K+m5oOFKi9cclxuICAgICAgJHNjb3BlLmdvVG9kZXRhaWwgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHdpbmRvdy5vcGVuKCdwcm9kdWN0LWRldGFpbC5odG1sP2lkPScgKyBpdGVtLmlkICsgJyZwcm9kdWN0VHlwZT0zJnR5cGU9MicpO1xyXG4gICAgICB9O1xyXG4gICAgICAvL+aJk+W8gOa3u+WKoOi0reeJqei9puW8ueeql1xyXG4gICAgICBsZXQgbWluY291bnQ7XHJcbiAgICAgICRzY29wZS5hZGREaWEgPSBmdW5jdGlvbiAoaWQsICRldmVudCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAkc2NvcGUuY3VycmVudEdvb2RzSWQgPSBpZDtcclxuICAgICAgICAkc2NvcGUuYWRkaXRlbSA9IG51bGw7XHJcbiAgICAgICAgJHNjb3BlLmFkZERpYWxvZyA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgbXNnTG9hZGluZyA9IGNqTWVzc2FnZS5sb2FkaW5nKHsgaXNGaXhlZDogdHJ1ZSB9KVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9sb2NQcm9kdWN0L2h1b1F1U2hhbmdQaW5YaWFuZ1FpbmcnLCBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICB0b2tlbjogJydcclxuICAgICAgICB9KSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlICE9IDIwMCkgcmV0dXJuO1xyXG4gICAgICAgICAgJHNjb3BlLmFkZGl0ZW0gPSBkYXRhLmRhdGEucmVzdWx0O1xyXG5cclxuICAgICAgICAgIC8vIOagh+ekuuaYr+WQpuaciemYtuair+S7t+agvCAxIOacieWMuumXtOS7t+agvCDvvJvkuI3mmK8gMSDliJnmsqHmnInljLrpl7Tku7fmoLxcclxuICAgICAgICAgICRzY29wZS5kaXNjb3VudFN0YXR1c0ZsYWcgPSAkc2NvcGUuYWRkaXRlbS5kaXNjb3VudFN0YXR1c1xyXG5cclxuICAgICAgICAgIGlmKCRzY29wZS5kaXNjb3VudFN0YXR1c0ZsYWcgPT09IDEpe1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzmmK/mnInpmLbmoq/ku7fmoLznmoTvvIzor7fmsYLpmLbmoq/ku7fmoLxcclxuICAgICAgICAgICAgZ2V0UGFja1Byb2R1Y3REaXNjb3VudFByaWNlQWxsKGlkKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJHNjb3BlLnN0YW5Qcm9kdWN0cyA9ICRzY29wZS5hZGRpdGVtLnN0YW5Qcm9kdWN0cztcclxuICAgICAgICAgICRzY29wZS52YXJpZW50QXJyID0gW107XHJcbiAgICAgICAgICAkc2NvcGUudmFyaWVudEtleXMgPSBbXTtcclxuICAgICAgICAgIGNvbnN0IHN1cHBsaWVyTGluayA9IEpTT04ucGFyc2UoJHNjb3BlLmFkZGl0ZW0uU1VQUExJRVJMSU5LIHx8IG51bGwpO1xyXG4gICAgICAgICAgJHNjb3BlLml0ZW1jb3VudCA9ICRzY29wZS5hZGRpdGVtLnNldE51bSA/IE51bWJlcigkc2NvcGUuYWRkaXRlbS5zZXROdW0pIDogMTtcclxuICAgICAgICAgIG1pbmNvdW50ID0gJHNjb3BlLml0ZW1jb3VudDtcclxuICAgICAgICAgIGlmICgkc2NvcGUuYWRkaXRlbS5WQVJJQU5US0VZRU4gIT0gJycpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnZhcmllbnRLZXlzID0gJHNjb3BlLmFkZGl0ZW0uVkFSSUFOVEtFWUVOLnNwbGl0KCctJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnZhcmllbnRLZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnZhcmllbnRBcnIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAkc2NvcGUudmFyaWVudEtleXNbaV0sXHJcbiAgICAgICAgICAgICAgICBrZXk6IFtdXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc3RhblByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCRzY29wZS5zdGFuUHJvZHVjdHNbaV0uVkFSSUFOVEtFWSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VyVmFyaWVudFZhbCA9ICRzY29wZS5zdGFuUHJvZHVjdHNbaV0uVkFSSUFOVEtFWS5zcGxpdCgnLScpO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjdXJWYXJpZW50VmFsLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS52YXJpZW50QXJyW2pdLmtleS5wdXNoKGN1clZhcmllbnRWYWxbal0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS52YXJpZW50QXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnZhcmllbnRBcnJbaV0ua2V5ID0gZHNwLnVuaXF1ZUFycmF5KCRzY29wZS52YXJpZW50QXJyW2ldLmtleSk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnZhcmllbnRBcnJbaV0udmFsID0gJHNjb3BlLnZhcmllbnRBcnJbaV0ua2V5WzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkc2NvcGUudmFyaWVudEFyciA9IFtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCRzY29wZS52YXJpZW50QXJyLmxlbmd0aCA9PSAxICYmICRzY29wZS52YXJpZW50QXJyWzBdLmtleS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAkc2NvcGUudmFyaWVudEFyciA9IFtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnZhcmllbnRBcnIpO1xyXG4gICAgICAgICAgJHNjb3BlLnZhcmllbnRLZXlzSW5uZXIgPSBbXTtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnN0YW5Qcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAkc2NvcGUudmFyaWVudEtleXNJbm5lci5wdXNoKCRzY29wZS5zdGFuUHJvZHVjdHNbaV0uVkFSSUFOVEtFWSk7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3RhblByb2R1Y3RzW2ldLnNlbGxEaXNjb3VudCAhPSBudWxsICYmICRzY29wZS5zdGFuUHJvZHVjdHNbaV0uc2VsbERpc2NvdW50IDwgMTAwKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnN0YW5Qcm9kdWN0c1tpXS5TRUxMUFJJQ0VESVMgPSAoJHNjb3BlLnN0YW5Qcm9kdWN0c1tpXS5TRUxMUFJJQ0UgKiAkc2NvcGUuc3RhblByb2R1Y3RzW2ldLnNlbGxEaXNjb3VudCAvIDEwMCkudG9GaXhlZCgyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuc3RhblByb2R1Y3RzW2ldLlNFTExQUklDRURJUyA9ICRzY29wZS5zdGFuUHJvZHVjdHNbaV0uU0VMTFBSSUNFO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudmFyaWVudEtleXNJbm5lcik7XHJcbiAgICAgICAgICBnZXRUaGVWaXRlbSgpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuY2hhblZhcmlhbnQgPSBmdW5jdGlvbiAodmFsLCBpbmRleCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHZhbClcclxuICAgICAgICB2YXIgZmlsdGVyS2V5c09uZSA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnZhcmllbnRLZXlzSW5uZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHZhciBjdXJWYXJLZXkgPSAkc2NvcGUudmFyaWVudEtleXNJbm5lcltpXS5zcGxpdCgnLScpO1xyXG4gICAgICAgICAgaWYgKGN1clZhcktleVtpbmRleF0gPT0gdmFsKSB7XHJcbiAgICAgICAgICAgIGZpbHRlcktleXNPbmUucHVzaChjdXJWYXJLZXkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS52YXJpZW50QXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoaSA9PSBpbmRleCkgY29udGludWU7XHJcbiAgICAgICAgICB2YXIgY2FuYmVUd28gPSBbXTtcclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZmlsdGVyS2V5c09uZS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBjYW5iZVR3by5wdXNoKGZpbHRlcktleXNPbmVbal1baV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIE90aGVyU2VsMSA9ICRzY29wZS52YXJpZW50QXJyW2ldLnZhbDtcclxuICAgICAgICAgIHZhciBpc0luVHdvID0gJC5pbkFycmF5KE90aGVyU2VsMSwgY2FuYmVUd28pO1xyXG4gICAgICAgICAgaWYgKGlzSW5Ud28gPT0gLTEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnZhcmllbnRBcnJbaV0udmFsID0gY2FuYmVUd29bMF07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YXIgZmlsdGVyS2V5c1R3byA9IFtdO1xyXG4gICAgICAgICAgdmFyIGN1clZhbFR3byA9ICRzY29wZS52YXJpZW50QXJyW2ldLnZhbDtcclxuICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZmlsdGVyS2V5c09uZS5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyS2V5c09uZVtrXVtpXSA9PSBjdXJWYWxUd28pIHtcclxuICAgICAgICAgICAgICBmaWx0ZXJLZXlzVHdvLnB1c2goZmlsdGVyS2V5c09uZVtrXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZpbHRlcktleXNPbmUgPSBmaWx0ZXJLZXlzVHdvO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnZXRUaGVWaXRlbSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDliIfmjaLop4TmoLxcclxuICAgICAgZnVuY3Rpb24gZ2V0VGhlVml0ZW0oKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS52YXJpZW50QXJyLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAkc2NvcGUudmFyaWFudEl0ZW0gPSAkc2NvcGUuc3RhblByb2R1Y3RzWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YXIgY3VyVmFyS2V5QXJyID0gW107XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS52YXJpZW50QXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGN1clZhcktleUFyci5wdXNoKCRzY29wZS52YXJpZW50QXJyW2ldLnZhbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2NvcGUuY3VyVmFyaWVudEtleSA9IGN1clZhcktleUFyci5qb2luKCctJyk7XHJcbiAgICAgICAgICB2YXIgY3VyVmFyaWVudEluZGV4ID0gZHNwLmZpbmRJbmRleEJ5S2V5KCRzY29wZS5zdGFuUHJvZHVjdHMsICdWQVJJQU5US0VZJywgJHNjb3BlLmN1clZhcmllbnRLZXkpO1xyXG4gICAgICAgICAgJHNjb3BlLnZhcmlhbnRJdGVtID0gJHNjb3BlLnN0YW5Qcm9kdWN0c1tjdXJWYXJpZW50SW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkc2NvcGUuYWRkaXRlbSA9ICRzY29wZS52YXJpYW50SXRlbTtcclxuICAgICAgICBjYWxjVW5pdFByaWNlKClcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6K6h566X5Y2V5Lu3XHJcbiAgICAgIGZ1bmN0aW9uIGNhbGNVbml0UHJpY2UoKXtcclxuXHJcbiAgICAgICAgLy8g5aaC5p6c5pyJ6Zi25qKv5Lu35qC877yM5YiZ6K6h566X6Zi25qKv5Lu35qC8LFxyXG4gICAgICAgIGlmKCRzY29wZS5kaXNjb3VudFN0YXR1c0ZsYWcgPT09IDEpe1xyXG4gICAgICAgICAgbGV0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgaWQ6JHNjb3BlLmN1cnJlbnRHb29kc0lkLCAvLyDllYblk4EgaWRcclxuICAgICAgICAgICAgdmFyaWFudElkOiRzY29wZS52YXJpYW50SXRlbS5JRCwgLy8g5Y+Y5L2TIGlkXHJcbiAgICAgICAgICAgIG51bTokc2NvcGUuaXRlbWNvdW50IC8vIOmAieaLqeaVsOmHj1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZHNwLnBvc3RGdW4oJ2VycC9QYWNrUHJvZHVjdC9nZXRWYXJpYW50RGlzY291bnRQcmljZScsIHBhcmFtcywocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09PSAnMjAwJykge1xyXG4gICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VmFyaWVudFVuaXRQcmljZSA9IE51bWJlcihyZXMuZGF0YS5yZXN1bHQudW5pdFByaWNlKVxyXG4gICAgICAgICAgICAgICRzY29wZS50b3RhbFByaWNlID0gcmVzLmRhdGEucmVzdWx0LnByaWNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sZT0+ZSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgLy8g5ZCm5YiZ6L+Y5piv55So5Y+Y5L2T5Y2V5Lu3XHJcbiAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRWYXJpZW50VW5pdFByaWNlID0gTnVtYmVyKCRzY29wZS52YXJpYW50SXRlbS5TRUxMUFJJQ0UpXHJcbiAgICAgICAgICAgJHNjb3BlLnRvdGFsUHJpY2UgPSAkc2NvcGUuY3VycmVudFZhcmllbnRVbml0UHJpY2UgKiAkc2NvcGUuaXRlbWNvdW50XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgLy/mt7vliqDliLDotK3nianovaZcclxuICAgICAgJHNjb3BlLmFkZGJ1eSA9IGZ1bmN0aW9uICgkZXZlbnQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudmFyaWFudEl0ZW0pXHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmFkZGl0ZW0pO1xyXG4gICAgICAgIGlmKCEkc2NvcGUuaXRlbWNvdW50KSByZXR1cm4gbGF5ZXIubXNnKCdQbGVhc2UgZW50ZXIgdGhlIHF1YW50aXR5LicpXHJcbiAgICAgICAgdmFyIHByb0RhdGEgPSBbe1xyXG4gICAgICAgICAgQklHSU1HOiAkc2NvcGUuYWRkaXRlbS5JTUcsXHJcbiAgICAgICAgICBJRDogJHNjb3BlLnZhcmlhbnRJdGVtLklELFxyXG4gICAgICAgICAgTkFNRUVOOiAkc2NvcGUuYWRkaXRlbS5OQU1FRU4sXHJcbiAgICAgICAgICBTRUxMUFJJQ0U6ICRzY29wZS52YXJpYW50SXRlbS5TRUxMUFJJQ0UsXHJcbiAgICAgICAgICBTS1U6ICRzY29wZS52YXJpYW50SXRlbS5TS1UsXHJcbiAgICAgICAgICBpdGVtY291bnQ6ICRzY29wZS5pdGVtY291bnQsXHJcbiAgICAgICAgICBkaXNjb3VudFByaWNlOigkc2NvcGUuY3VycmVudFZhcmllbnRVbml0UHJpY2UpLnRvRml4ZWQoMilcclxuICAgICAgICB9XTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGFja2FnZURhdGEnLCBKU09OLnN0cmluZ2lmeShwcm9EYXRhKSk7XHJcbiAgICAgICAgLy9sb2NhdGlvbi5ocmVmID0gJyMvbXlDSi1wdXJjaGFzZS8vL3BhY2thZ2UnXHJcbiAgICAgICAgJHN0YXRlLmdvKCdteWNqLXB1cmNoYXNlJywgeyBvcmRlclR5cGU6ICdwYWNrYWdlJyB9KTtcclxuICAgICAgfVxyXG4gICAgICAvL+WFs+mXreW8ueeql1xyXG4gICAgICAkc2NvcGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLmFkZERpYWxvZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIC8v5Yqg5YePXHJcbiAgICAgICRzY29wZS5wbHVzT25lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkc2NvcGUuaXRlbWNvdW50ID49IDEwMDAwMCkge1xyXG4gICAgICAgICAgJHNjb3BlLml0ZW1jb3VudCA9IFwiMTAwMDAwXCJcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLml0ZW1jb3VudCA9ICRzY29wZS5pdGVtY291bnQgKiAxICsgMSArICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYWxjVW5pdFByaWNlKClcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUubWludXNPbmUgPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgaWYgKHZhbCA9PSBtaW5jb3VudCkgcmV0dXJuO1xyXG4gICAgICAgICRzY29wZS5pdGVtY291bnQgPSAkc2NvcGUuaXRlbWNvdW50ICogMSAtIDEgKyAnJztcclxuICAgICAgICBjYWxjVW5pdFByaWNlKClcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuYmx1clF1YW50aXR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCEkc2NvcGUuaXRlbWNvdW50KXtcclxuICAgICAgICAgICRzY29wZS5pdGVtY291bnQgPSAnMSc7XHJcbiAgICAgICAgICBjYWxjVW5pdFByaWNlKClcclxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5pdGVtY291bnQgJiYgJHNjb3BlLml0ZW1jb3VudCAtIG1pbmNvdW50IDwgMCkge1xyXG4gICAgICAgICAgJHNjb3BlLml0ZW1jb3VudCA9IG1pbmNvdW50O1xyXG4gICAgICAgICAgY2FsY1VuaXRQcmljZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5jaGVja0lzTnVtID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIC8vIGlmIChpc05hTih2YWwgKiAxKSB8fCB2YWwgKiAxIDwgMSkge1xyXG4gICAgICAgIC8vICAgJHNjb3BlLml0ZW1jb3VudCA9ICcxJ1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZiAoJHNjb3BlLml0ZW1jb3VudCA+IDEwMDAwMCkge1xyXG4gICAgICAgICAgJHNjb3BlLml0ZW1jb3VudCA9IFwiMTAwMDAwXCJcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLml0ZW1jb3VudCA9ICRzY29wZS5pdGVtY291bnQucmVwbGFjZSgvW14wLTldL2lnLCAnJylcclxuICAgICAgICBpZigkc2NvcGUuaXRlbWNvdW50KSB7XHJcbiAgICAgICAgICBjYWxjVW5pdFByaWNlKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8g5Y+R546wIGl0ZW1jb3VudEJsdXIg5pqC5pe25rKh55SoIDIwMjAtMDUtMDlcclxuICAgICAgJHNjb3BlLml0ZW1jb3VudEJsdXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5pdGVtY291bnQgPCBtaW5jb3VudCkge1xyXG4gICAgICAgICAgJHNjb3BlLml0ZW1jb3VudCA9IG1pbmNvdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLmNoYW5QYWdlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUucGFnZU51bSA9ICcxJztcclxuICAgICAgICBnZXREYXRhKCk7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmNoYW5QYWdlTnVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghaXNOYU4oJHNjb3BlLnBhZ2VOdW0gKiAxKSAmJiAkc2NvcGUucGFnZU51bSAqIDEgPiAwICYmICRzY29wZS5wYWdlTnVtICogMSA8PSAkc2NvcGUudG90YWxOdW0pIHtcclxuICAgICAgICAgIGdldERhdGEoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSAnMSc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5kZWxldGVGdW4gPSBmdW5jdGlvbiAoaXRlbSwgb2luZGV4LCAkZXZlbnQpIHtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgbGF5ZXIub3Blbih7XHJcbiAgICAgICAgICB0aXRsZTogbnVsbCxcclxuICAgICAgICAgIHR5cGU6IDEsXHJcbiAgICAgICAgICBhcmVhOiBbJzQ4MHB4JywgJzI0MHB4J10sXHJcbiAgICAgICAgICBza2luOiAnJyxcclxuICAgICAgICAgIGNsb3NlQnRuOiAwLFxyXG4gICAgICAgICAgY29udGVudDogJ0FyZSB5b3Ugc3VyZSB0byBkZWxldGUgaXQ/JyxcclxuICAgICAgICAgIGJ0bjogWydDYW5jZWwnLCAnQ29uZmlybSddLFxyXG4gICAgICAgICAgeWVzOiBmdW5jdGlvbiAoaW5kZXgsIGxheWVybykge1xyXG4gICAgICAgICAgICAvL+aMiemSruOAkOaMiemSruS4gOOAkeeahOWbnuiwg1xyXG4gICAgICAgICAgICBsYXllci5jbG9zZShpbmRleCk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgYnRuMjogZnVuY3Rpb24gKGluZGV4LCBsYXllcm8pIHtcclxuICAgICAgICAgICAgLy/mjInpkq7jgJDmjInpkq7kuozjgJHnmoTlm57osINcclxuICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2VycC9QYWNrUHJvZHVjdC9kZWxQYWNrUHJvZHVjdCcsIHtcclxuICAgICAgICAgICAgICBcInBpZFwiOiBcIidcIiArIGl0ZW0uaWQgKyBcIidcIixcclxuICAgICAgICAgICAgICBcInR5cGVcIjogNFxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhTGlzdC5zcGxpY2Uob2luZGV4LCAxKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKGRhdGEuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBsYXllci5jbG9zZShpbmRleCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZSAvL+W8gOWQr+ivpeS7o+eggeWPr+emgeatoueCueWHu+ivpeaMiemSruWFs+mXrVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgbGF5ZXIuY2xvc2UoaW5kZXgpO1xyXG4gICAgICAgICAgICAvL+WPs+S4iuinkuWFs+mXreWbnuiwg1xyXG4gICAgICAgICAgICAvL3JldHVybiBmYWxzZSDlvIDlkK/or6Xku6PnoIHlj6/npoHmraLngrnlh7vor6XmjInpkq7lhbPpl61cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLiRvbigncGFnZWRhdGEtZmEnLCBmdW5jdGlvbiAoZCwgZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSBkYXRhLnBhZ2VOdW07XHJcbiAgICAgICAgJHNjb3BlLnBhZ2VTaXplID0gZGF0YS5wYWdlU2l6ZTtcclxuICAgICAgICBnZXREYXRhKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfV0pO1xyXG5cclxuICByZXR1cm4gYXBwO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBakNBO0FBb0NBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../src/pages/mycj/packaging/regular-package.js\n");

/***/ })

}]);