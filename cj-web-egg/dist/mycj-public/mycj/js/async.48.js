(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[48],{

/***/ "../src/pages/mycj/service-center/service-await-response.js":
/*!******************************************************************!*\
  !*** ../src/pages/mycj/service-center/service-await-response.js ***!
  \******************************************************************/
/*! exports provided: serviceAwaitResponseFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"serviceAwaitResponseFactory\", function() { return serviceAwaitResponseFactory; });\n/* harmony import */ var _root_egg_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @root_egg/env */ \"../../env.js\");\n/* harmony import */ var _root_egg_env__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_root_egg_env__WEBPACK_IMPORTED_MODULE_0__);\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\nvar awinTesMode = ['testnew', 'development', 'test'].includes(_root_egg_env__WEBPACK_IMPORTED_MODULE_0__[\"NODE_ENV\"]) ? 1 : 0;\nfunction serviceAwaitResponseFactory(angular) {\n  var app = angular.module('service-await-response.module', []);\n  app.controller('service-await-response.ctrl', ['$scope', 'dsp', '$location', '$stateParams', '$timeout', 'utils', function ($scope, dsp, $location, $stateParams, $timeout, utils) {\n    dsp.domainData().then(function (res) {\n      // 请求成功的结果\n      console.log(res);\n      $scope.iscj = res.iscj;\n\n      if ($scope.iscj == '1') {\n        //cj\n        $scope.websiteName = 'CJ';\n      } else {\n        //客户\n        $scope.websiteName = res.websiteName || 'CJ';\n      }\n    });\n    console.log('售后');\n    var pageH = $(window).height() - 171;\n    var docH = $(document).height();\n    var bs = new Base64();\n    var userId = bs.decode(localStorage.getItem('userId') ? localStorage.getItem('userId') : '');\n    console.log(userId);\n    var jfId = $stateParams.jfId;\n    console.log(jfId);\n    $('.aftersale-right').css({\n      'min-height': $(window).height() * 1 + 'px'\n    }); //设置默认时间\n\n    function GetDateStr(AddDayCount) {\n      var dd = new Date();\n      dd.setDate(dd.getDate() + AddDayCount); //获取AddDayCount天后的日期\n\n      var y = dd.getFullYear();\n      var m = dd.getMonth() + 1; //获取当前月份的日期\n\n      var d = dd.getDate();\n\n      if (m < 10) {\n        m = '0' + m;\n      }\n\n      if (d < 10) {\n        d = '0' + d;\n      }\n\n      return y + \"-\" + m + \"-\" + d;\n    }\n\n    var aDate = GetDateStr(-45);\n    var enDate = GetDateStr(0); // $(\"#y-ord-sdate\").val(aDate );   //关键语句\n    // $(\"#y-ord-edate\").val(enDate );   //关键语句\n\n    var _$location$search = $location.search(),\n        filter = _$location$search.filter;\n\n    filter || $(\"#cj-stime\").val(aDate); //关键语句\n    //$(\"#cj-etime\").val(enDate );   //关键语句\n    // $scope.dataFound = false;\n\n    console.log($('.deal-orders').width(), $('.orders-list').width(), $('.orders-table').width()); //给左侧的导航添加滚动事件\n\n    $(document).scroll(function () {\n      if ($(document).scrollTop() >= 0) {\n        $('.left-nav').css({\n          position: 'fixed',\n          top: '80px'\n        });\n      } else {\n        $('.left-nav').css({\n          position: 'relative',\n          top: '80px'\n        });\n      }\n    }); //纠纷类型\n\n    $scope.jiufen = ['All', 'No Tracking Information Found', 'Tracking Information Frozen', 'Tracking Information Error', 'Order Returned', 'Products Short', 'Defective Products', 'Received Incorrect Products', 'Order Not Received']; //订单状态\n\n    $scope.state = ['Closed', 'Completed', 'Awaiting CJ Response', 'Awaiting Your Response']; //弹窗\n\n    $scope.window = false;\n    $scope.upload = false; //请求参数 disputeType\n\n    $scope.leixing = 1;\n    $scope.ordstatus = $stateParams.afterStu || 1;\n    dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n    $scope.pageSize = '20';\n    $scope.pageNum = '1';\n    $scope.totalNum = 0;\n    $scope.totalPageNum = 0;\n    $scope.searchval = jfId;\n    console.log($scope.searchval);\n    $scope.waitingResBtn = filter ? true : false;\n\n    $scope.filterBtnHandle = function () {\n      // console.log('filterBtnHandle', !$scope.waitingResBtn)\n      $scope.waitingResBtn = !$scope.waitingResBtn;\n      $('#cj-response-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n      getList(dsp, $scope);\n    };\n\n    var timeTrans = function timeTrans(timestamp) {\n      var times = timestamp / 1000;\n      var nowTime = Math.round(new Date() / 1000);\n\n      if (nowTime - times > 15 * 24 * 60 * 60) {\n        return true;\n      }\n\n      return false;\n    };\n\n    $scope.isShowResolution = function (rStatus, supplierId, status, createDate) {\n      if (!rStatus && supplierId) {\n        if (status === '8' || timeTrans(createDate)) {\n          if (status === '11') {\n            return false;\n          }\n\n          return true;\n        } else {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }; //获取url中的参数方法\n\n\n    function getUrlParamByKey(href, key) {\n      if (!href) return '';\n      var vars = href.split(\"&\");\n\n      for (var i = 0; i < vars.length; i++) {\n        var pair = vars[i].split(\"=\");\n\n        if (pair[0] == key) {\n          return pair[1];\n        }\n      }\n    }\n\n    function initIsCheckout() {\n      // 判断当前是否存在ckosessionid\n      $scope.ckoSessionId = bs.decode(localStorage.getItem('ckoSessionId') || '') && JSON.parse(bs.decode(localStorage.getItem('ckoSessionId') || ''));\n\n      if ($scope.ckoSessionId) {\n        getList(dsp, $scope);\n        getCheckoutTrade();\n        return;\n      }\n\n      var href = window.location.href;\n\n      if (href.indexOf('?') >= 0 && !filter) {\n        //2019-8-12 需要query传参 此处排除新增的这个条件\n        var regexp = /\\?[\\w\\W]*\\#/;\n        $scope.sessionId = getUrlParamByKey(href.match(regexp) && href.match(regexp)[0].slice(1, -1), 'cko-payment-id') || getUrlParamByKey(href.match(regexp) && href.match(regexp)[0].slice(1, -1), 'cko-session-id');\n\n        if ($scope.sessionId) {\n          localStorage.setItem('ckoSessionId', bs.encode(JSON.stringify($scope.sessionId))); // 后端接口返回状态较慢，延迟一秒再刷新当前页面\n\n          var timer = setTimeout(function () {\n            clearTimeout(timer);\n            window.location.href = window.location.origin + '/myCJ.html#/after-sale//';\n          }, 200);\n          getList(dsp, $scope);\n          return;\n        }\n\n        var hrefArr = href.split('?');\n        console.log(hrefArr);\n        var paydataArr = hrefArr[1].split('&');\n        var lengthPay = paydataArr.length;\n        console.log(paydataArr);\n        console.log(lengthPay);\n\n        if (lengthPay == 3) {\n          var paymentArr = paydataArr[0].split('=');\n          var tokenArr = paydataArr[1].split('=');\n          var payidArr = paydataArr[2].split('=');\n          var payCS = {};\n          payCS.paymentId = paymentArr[1];\n          payCS.token = tokenArr[1];\n          payCS.payerID = payidArr[1];\n          payCS.code = 16;\n          payCS.awc = dsp.getCookie(\"awc\") || '';\n          console.log(payCS);\n          console.log(JSON.stringify(payCS));\n          var isToken = localStorage.getItem('payToken');\n          console.log(isToken);\n\n          if (isToken == tokenArr[1]) {\n            getList(dsp, $scope);\n            return;\n          } else {\n            dsp.postFun('app/pay/pay', JSON.stringify(payCS), function (data) {\n              console.log(data);\n\n              if (data.data.result !== true) {\n                layer.msg('Payment Failed');\n                getList(dsp, $scope);\n              } else {\n                layer.msg('Payment Succeed');\n                localStorage.setItem('payToken', tokenArr[1]);\n                getList(dsp, $scope); //awin 发送支付成功fall-back\n\n                var awinLocalParams = null;\n\n                try {\n                  awinLocalParams = JSON.parse(localStorage.getItem(\"_paypal_\".concat(payCS.token)));\n                  console.log(awinLocalParams);\n                } catch (err) {\n                  console.log('解析错误');\n                }\n\n                if (awinLocalParams) {\n                  var awinJS = function awinJS() {\n                    var content = '<script >' + ' var AWIN = {};' + '  AWIN.Tracking = {};' + ' AWIN.Tracking.Sale = {};' + ' AWIN.Tracking.Sale.amount =' + awinLocalParams.awinAmount + ';' + ' AWIN.Tracking.Sale.orderRef =\"' + awinLocalParams.awinRef + '\";' + ' AWIN.Tracking.Sale.parts  =\"' + \"DEFAULT:\" + awinLocalParams.awinAmount + '\";' + 'AWIN.Tracking.Sale.currency = \"USD\";' + ' AWIN.Tracking.Sale.test = \"' + awinTesMode + '\";' + 'AWIN.Tracking.Sale.channel = \"aw\";' + +'<\\/script>';\n                    $('body').append(content);\n                    var osrc = 'https://www.dwin1.com/21578.js';\n                    var script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.src = osrc;\n                    document.getElementsByTagName('body')[0].appendChild(script);\n                  };\n\n                  var imgHttpFun = function imgHttpFun() {\n                    var orderCountMoney = awinLocalParams.awinAmount.toFixed(2);\n                    var BasketImage = new Image(1, 1);\n                    BasketImage.src = \"https://www.awin1.com/sread.img?tt=ns&tv=2&merchant=21578&amount=\".concat(orderCountMoney, \"&ch=aw&parts=DEFAULT:\").concat(orderCountMoney, \"&cr=USD&ref=\").concat(awinLocalParams.awinRef, \"&tesmode=\").concat(awinTesMode);\n                    localStorage.removeItem(\"_paypal_\".concat(payCS.token));\n                  };\n\n                  var awcText = dsp.getCookie('awc');\n                  var utmSource = localStorage.getItem('utmSource');\n\n                  if (awcText && utmSource == 'awin') {\n                    //有awin的awc值 并且登录平台来源是awin\n                    awinJS();\n                    imgHttpFun();\n                  }\n                }\n              }\n            }, function (data) {\n              console.log(data);\n            });\n          }\n        }\n\n        if (lengthPay < 3) {\n          layer.msg('Payment Failed');\n          getList(dsp, $scope);\n        }\n      } else {\n        getList(dsp, $scope);\n      }\n    }\n\n    initIsCheckout();\n\n    function getList(dsp, $scope) {\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      $scope.ordersList = [];\n      $scope.totalNum = 0;\n      var getListData = {};\n      getListData.page = $scope.pageNum - 0;\n      getListData.limit = $scope.pageSize - 0;\n      getListData.code = 'cj';\n      getstatus(getListData);\n      getListData.type = $('.selJfLx').val();\n      getListData.orderNumber = $scope.searchval;\n      console.log($scope.ordstatus);\n      getListData.beginDate = $(\"#cj-stime\").val();\n      getListData.endDate = $(\"#cj-etime\").val();\n      dsp.postFun('app/dispute/getDispute', JSON.stringify(getListData), con, errFun);\n\n      function con(data) {\n        console.log(data);\n        $scope.ordstatusNum = data.data;\n        $scope.ordersList = data.data.list;\n        $scope.totalNum = data.data.count; //获取总订单的条数\n\n        console.log($scope.totalNum);\n\n        if ($scope.totalNum > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n          $scope.countPage = Math.ceil($scope.totalNum / ($scope.pageSize - 0));\n        } else {\n          dsp.addNodataPic($('.orders-list'), $(window).height() - 171, 47, 0, {\n            width: '100%'\n          });\n          dsp.closeLoadPercent($('.orders-list'));\n          $scope.countPage = 0;\n        } // pageFun(dsp, $scope);\n\n\n        numFun();\n        $scope.totalCounts = Math.ceil($scope.totalNum / $scope.pageSize);\n        $scope.$broadcast('page-data', {\n          pageNum: $scope.pageNum,\n          totalNum: $scope.totalCounts,\n          totalCounts: $scope.totalNum,\n          pageSize: $scope.pageSize,\n          pagesizeList: ['20', '50', '100']\n        });\n      }\n\n      function errFun(data) {\n        console.log(data);\n        layer.closeAll('loading');\n        dsp.closeLoadPercent($('.orders-list'));\n      }\n    }\n\n    $scope.$on('pagedata-fa', function (d, data) {\n      console.log(data);\n      $('#cj-response-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n      $scope.pageNum = data.pageNum;\n      $scope.pageSize = data.pageSize;\n      getList(dsp, $scope);\n    }); //获取状态\n\n    function getstatus(getstu) {\n      if ($scope.ordstatus == 1) {\n        getstu.status = $scope.waitingResBtn ? '1,2,4,7' : '1,2,4,6,7,60,61'; //此处新增条件筛选\n\n        getstu.responseType = $scope.waitingResBtn ? 'CJ' : ''; //此处新增条件筛选\n      } else if ($scope.ordstatus == 2) {\n        getstu.status = '3,8,11';\n      } else {\n        getstu.status = '5';\n      }\n    } //分页\n\n\n    function pageFun(dsp, $scope) {\n      console.log($scope.totalNum);\n\n      if ($scope.totalNum < 1) {\n        return;\n      }\n\n      $(\".pagination-demo1\").jqPaginator({\n        totalCounts: $scope.totalNum,\n        pageSize: $scope.pageSize * 1,\n        visiblePages: 5,\n        currentPage: $scope.pageNum * 1,\n        activeClass: 'active',\n        first: '<li class=\"first\"><a class=\"prev\" href=\"javascript:void(0);\">&lt&lt;<\\/a><\\/li>',\n        prev: '<li class=\"prev\"><a class=\"prev\" href=\"javascript:void(0);\">&lt;<\\/a><\\/li>',\n        next: '<li class=\"next\"><a class=\"next\" href=\"javascript:void(0);\">&gt;<\\/a><\\/li>',\n        last: '<li class=\"last\"><a class=\"prev\" href=\"javascript:void(0);\">&gt&gt;<\\/a><\\/li>',\n        page: '<li class=\"page\"><a href=\"javascript:void(0);\">{{page}}<\\/a><\\/li>',\n        onPageChange: function onPageChange(n, type) {\n          if (type == 'init') {\n            return;\n          }\n\n          ;\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          $scope.ordersList = [];\n          $scope.totalNum = 0;\n          $scope.pageNum = n;\n          var getListData = {};\n          getListData.page = $scope.pageNum - 0;\n          getListData.limit = $scope.pageSize - 0;\n          getListData.code = 'cj';\n          getstatus(getListData);\n          console.log($scope.ordstatus);\n          getListData.beginDate = $(\"#cj-stime\").val();\n          getListData.endDate = $(\"#cj-etime\").val();\n          dsp.postFun('app/dispute/getDispute', JSON.stringify(getListData), con, errFun);\n\n          function con(data) {\n            console.log(data);\n            $scope.ordersList = data.data.list;\n            console.log($scope.ordersList);\n            $scope.totalNum = data.data.count; //获取总订单的条数\n\n            if ($scope.totalNum > 0) {\n              dsp.removeNodataPic($('.orders-list'));\n              dsp.closeLoadPercent($('.orders-list'));\n              $scope.countPage = Math.ceil($scope.totalNum / ($scope.pageSize - 0));\n            } else {\n              dsp.addNodataPic($('.orders-list'), $(window).height() - 171, 47, 0, {\n                width: '100%'\n              });\n              dsp.closeLoadPercent($('.orders-list'));\n              $scope.countPage = 0;\n            } // pageFun();\n\n          }\n\n          function errFun(data) {\n            console.log(data);\n          }\n        }\n      });\n    } // getList(dsp,$scope);\n\n\n    $scope.changePageSize = function () {\n      console.log($scope.ordstatus);\n      $scope.pageNum = '1';\n      getList(dsp, $scope);\n    };\n\n    $scope.toSpecifiedPage = function () {\n      console.log($scope.ordstatus);\n      var pagenum = Number($scope.pageNum);\n      var totalpage = Math.ceil($scope.totalNum / $scope.pageSize);\n\n      if (pagenum > totalpage || !pagenum || pagenum < 1) {\n        $scope.pagenum = 1;\n        layer.msg('Page does not exist.');\n      } else {\n        getList(dsp, $scope);\n      }\n    }; //搜索\n\n\n    $scope.enterSearch = function (e) {\n      if (e.keyCode == 13) {\n        $scope.search();\n      }\n    };\n\n    $scope.search = function () {\n      console.log($scope.searchval);\n\n      if ($scope.searchval) {\n        $scope.pageNum = 1;\n        getList(dsp, $scope);\n      }\n    };\n\n    $('.selJfLx').change(function () {\n      $scope.pageNum = 1;\n      getList(dsp, $scope);\n    }); //给订单状态赋值的函数\n\n    function numFun() {\n      $scope.afterNum1 = $scope.ordstatusNum.yi;\n      $scope.afterNum2 = $scope.ordstatusNum.er;\n      $scope.afterNum3 = $scope.ordstatusNum.san;\n      $scope.afterNum4 = $scope.ordstatusNum.si;\n    } //cj开始日期搜索\n\n\n    $(\"#cj-stime\").click(function () {\n      var cjendtime = $(\"#cj-stime\").val();\n      var interval = setInterval(function () {\n        var endtime2 = $(\"#cj-stime\").val();\n\n        if (endtime2 != cjendtime) {\n          // alert(endtime2+'!='+cjendtime)\n          $scope.ordersList = [];\n          $scope.totalNum = 0;\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          clearInterval(interval);\n          $scope.pageNum = 1;\n          getList(dsp, $scope);\n        }\n      }, 100);\n    }); //cj结束日期搜索\n\n    $(\"#cj-etime\").click(function () {\n      var cjendtime = $(\"#cj-etime\").val();\n      var interval = setInterval(function () {\n        var endtime2 = $(\"#cj-etime\").val();\n\n        if (endtime2 != cjendtime) {\n          // alert(endtime2+'!='+cjendtime)\n          $scope.ordersList = [];\n          $scope.totalNum = 0;\n          dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n          clearInterval(interval);\n          $scope.pageNum = 1;\n          getList(dsp, $scope);\n        }\n      }, 100);\n    });\n    $scope.navList = [{\n      name: 'Awaiting Response',\n      href: '#/after-sale//'\n    }, {\n      name: 'Completed',\n      href: '#/after-sale/2/'\n    }, {\n      name: 'Closed',\n      href: '#/after-sale/3/'\n    }];\n    $scope.navList[$scope.ordstatus - 1].show = true;\n    $('.header-nav li').eq(1).addClass('active');\n    $('.left-nav li').eq(2).addClass('active'); //$('.aftersale-leftbara').eq(2).css('background-image','linear-gradient(0deg,rgba(253, 162, 44, 1) 0%, rgba(247, 140, 41, 1) 78%, rgba(241, 118, 37, 1) 100%)');\n\n    $('.aftersale-leftbara').click(function () {\n      $('.aftersale-leftbara').css('background-image', '');\n      $(this).css('background-image', 'linear-gradient(0deg,rgba(253, 162, 44, 1) 0%, rgba(247, 140, 41, 1) 78%, rgba(241, 118, 37, 1) 100%)');\n    }); // 给侧边栏添加滚动事件\n\n    $(document).scroll(function () {\n      if ($(document).scrollTop() >= 80) {\n        $('.left-nav').css({\n          position: 'fixed',\n          top: '80px'\n        });\n      } else {\n        $('.left-list').css({\n          position: 'relative',\n          top: '0'\n        });\n      }\n    }); //awaiting cj response添加选中非选中\n\n    var cjresIndex = 0;\n    $('#cj-response-table').on('click', '.zcheckbox', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        cjresIndex++;\n\n        if (cjresIndex == $('#cj-response-table .zcheckbox').length) {\n          // alert('quanbuxuanzhogn')\n          $('#cj-response-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        cjresIndex--;\n\n        if (cjresIndex != $('#cj-response-table .zcheckbox').length) {\n          $('#cj-response-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //全选\n\n    $('#cj-response-table').on('click', '.zchecked-all', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        cjresIndex = $('#cj-response-table .zcheckbox').length;\n        $('#cj-response-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        cjresIndex = 0;\n        $('#cj-response-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    }); //显示大图\n\n    $('.scollBox').on('mouseenter', '.sp-smallimg', function () {\n      $(this).siblings('.hide-bigimg').show();\n    });\n    $('.scollBox').on('mouseenter', '.hide-bigimg', function () {\n      $(this).show();\n    });\n    $('.scollBox').on('mouseleave', '.sp-smallimg', function () {\n      $(this).siblings('.hide-bigimg').hide();\n    });\n    $('.scollBox').on('mouseleave', '.hide-bigimg', function () {\n      $(this).hide();\n    }); //awaiting your response添加选中非选中\n\n    var youresIndex = 0;\n    $('#await-your-table').on('click', '.zcheckbox', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        youresIndex++;\n\n        if (youresIndex == $('#await-your-table .zcheckbox').length) {\n          // alert('quanbuxuanzhogn')\n          $('#await-your-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        youresIndex--;\n\n        if (youresIndex != $('#await-your-table .zcheckbox').length) {\n          $('#await-your-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //全选\n\n    $('#await-your-table').on('click', '.zchecked-all', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        youresIndex = $('#await-your-table .zcheckbox').length;\n        $('#await-your-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        youresIndex = 0;\n        $('#await-your-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    }); //closed添加选中非选中\n\n    var afcloseIndex = 0;\n    $('#after-closed-table').on('click', '.zcheckbox', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        afcloseIndex++;\n\n        if (afcloseIndex == $('#after-closed-table .zcheckbox').length) {\n          // alert('quanbuxuanzhogn')\n          $('#after-closed-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        afcloseIndex--;\n\n        if (afcloseIndex != $('#after-closed-table .zcheckbox').length) {\n          $('#after-closed-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //全选\n\n    $('#after-closed-table').on('click', '.zchecked-all', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        afcloseIndex = $('#after-closed-table .zcheckbox').length;\n        $('#after-closed-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        afcloseIndex = 0;\n        $('#after-closed-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    }); //completed添加选中非选中\n\n    var afcompletIndex = 0;\n    $('#after-copleted-table').on('click', '.zcheckbox', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        afcompletIndex++;\n\n        if (afcompletIndex == $('#after-copleted-table .zcheckbox').length) {\n          // alert('quanbuxuanzhogn')\n          $('#after-copleted-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        afcompletIndex--;\n\n        if (afcompletIndex != $('#after-copleted-table .zcheckbox').length) {\n          $('#after-copleted-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //全选\n\n    $('#after-copleted-table').on('click', '.zchecked-all', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        afcompletIndex = $('#after-copleted-table .zcheckbox').length;\n        $('#after-copleted-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        afcompletIndex = 0;\n        $('#after-copleted-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    });\n    $scope.refundTypeList = {\n      \"1\": 'Back in balance',\n      \"2\": 'Return to the original way'\n    }; //滑出回复\n\n    $scope.ticket = function (item, index) {\n      console.log('item', item);\n      $scope.jfStatus = item.status; //订单的纠纷状态\n\n      $scope.replacementFreight = '';\n      console.log($scope.jfStatus);\n      $scope.tkMoney = item.money;\n      $scope.disputeOrder = item.disputeOrder;\n      $scope.itemId = item.ID;\n      $scope.itemIndex = index;\n      $scope.messageListArr = item.message;\n      $scope.supplierId = item.supplierId;\n      $scope.addressInformation = item.address_information;\n      $scope.trackingNumber = item.tracking_number;\n      $scope.status = item.status;\n      var marginL = -$('.disputecenter-wrap').width() / 2;\n      $('.disputecenter-wrap').stop().animate({\n        left: '50%',\n        marginLeft: marginL\n      }, 500);\n      $scope.nowType = item.type;\n      $scope.tdetailDate = utils.parseTime(new Date(item.createDate.time), 'yyyy-MM-dd hh:mm:ss');\n      $scope.detailData = item.message; //纠纷对话列表\n\n      $scope.refundType = item.refund_type; // 退款途径\n\n      $scope.userName = item.userName;\n      $scope.serverName = item.salesmanName;\n      console.log($scope.nowType, $scope.tdetailDate, $scope.detailData); //获取客户业务员名字的第一个字母\n\n      $scope.cusNameFir = $scope.userName.slice(0, 1).toUpperCase();\n      $scope.salseNameFir = $scope.serverName.slice(0, 1).toUpperCase(); // 创建视频\n\n      videoList(dsp, item);\n      console.log($scope.salseNameFir, $scope.cusNameFir); //是否是补发的\n\n      $scope.disputeStatus = -1;\n\n      if (item.disputeOrder) {\n        layer.load(2);\n        var bfData = {};\n        bfData.id = item.ID;\n        bfData.type = 'cj';\n        dsp.postFun('app/dispute/getOrderAddress', JSON.stringify(bfData), function (data) {\n          layer.closeAll('loading');\n\n          if (data.data.address.id) {\n            $scope.hasCreat = true; //补发是否创建成功\n\n            var resObj = data.data.address;\n            $scope.productList = data.data.products;\n            $scope.recoCity = resObj.city;\n            $scope.recoProvin = resObj.province;\n            $scope.recoCountrycode = resObj.countryCode;\n            $scope.recoCustomerName = resObj.customerName;\n            $scope.recoShippingAddress = resObj.shippingAddress;\n            $scope.recoShippingAddress2 = resObj.shippingaddress2;\n            $scope.recoZip = resObj.zip;\n            $scope.logisticName = resObj.logisticName;\n            $scope.replacementFreight = resObj.replacementFreight;\n          } else {\n            $scope.hasCreat = false; //补发是否创建成功\n\n            layer.msg('Something wrong with the resend orders, please contact your agent.', {\n              time: 3000\n            });\n          }\n        }, function (data) {\n          layer.closeAll('loading');\n        });\n        var paramsStatus = {\n          orderNumber: item.ID\n        };\n        console.log(item); // 以后更换列表接口\n\n        $scope.disputeStatus = item.paymentStatus || -1;\n        dsp.postFun('app/pay/getPayStatus', JSON.stringify(paramsStatus), function (data) {\n          $scope.disputeStatus = data.data.data.status;\n          $scope.disputeStatusName = data.data.data.paymentType;\n        }, function (data) {\n          $scope.disputeStatus = -1;\n        });\n      }\n    }; // 退款至什么平台\n\n\n    $scope.refundPlatformName = function (name) {\n      var result = {\n        'PayPal': 'PayPal account',\n        'stripeCharges': 'bank account of payment'\n      }[name];\n      if (!result) result = 'wallet';\n      return result;\n    }; //是否同意补发\n\n\n    $scope.bfAgreeFun = function () {\n      if ($scope.replacementFreight && $scope.replacementFreight > 0) {\n        var itemId = bs.encode($scope.itemId);\n        var yunFeiNum = bs.encode($scope.replacementFreight);\n        location.href = 'myCJ.html?route=payment#/payment/' + itemId + '/' + yunFeiNum + '/' + bs.encode('1') + '/dispute';\n      } else {\n        var bfData = {};\n        bfData.id = $scope.itemId;\n        layer.load(2);\n        dsp.postFun('app/dispute/agreeReissueOrder', bfData, function (data) {\n          console.log(data);\n\n          if (data.data.result) {\n            layer.closeAll('loading');\n            layer.msg('Thanks, This dispute completed.');\n            getList(dsp, $scope);\n            $scope.closeTicket();\n          } else {\n            layer.closeAll('loading');\n            layer.msg('This operation is not supported. Please contact your agent for help.');\n          }\n        }, function (data) {\n          layer.closeAll('loading');\n          console.log(data);\n        });\n      }\n    };\n\n    $scope.confirmReceipt = function () {\n      var params = {\n        id: $scope.itemId\n      };\n      dsp.postFun('cjSupplier/supplierDisputeInfo/confirmReceipt ', params, function (data) {\n        if (data.data.code === 200) {\n          layer.msg('Thanks, This dispute completed.');\n          getList(dsp, $scope);\n          $scope.closeTicket();\n        } else {\n          layer.msg('Agree Failed');\n        }\n      }, function (data) {\n        console.log(data);\n      });\n    }; // $scope.bfDisAgreeFun = function () {\n    //     layer.msg('未开发,怎么做')\n    // }\n    // 关闭ticket\n\n\n    $scope.closeTicket = function () {\n      $('.disputecenter-wrap').stop().animate({\n        left: '110%',\n        marginLeft: 0\n      }, 100);\n    }; // 请求视频地址\n\n\n    function videoList(dsp, item) {\n      if (!item.message) return true;\n\n      var _iterator = _createForOfIteratorHelper(item.message.entries()),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              i = _step$value[0],\n              list = _step$value[1];\n\n          if (list.videoUrl && list.videoUrl.length > 0) {\n            var _iterator2 = _createForOfIteratorHelper(list.videoUrl.entries()),\n                _step2;\n\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var _step2$value = _slicedToArray(_step2.value, 2),\n                    j = _step2$value[0],\n                    _videoList = _step2$value[1];\n\n                var id = 'J_prismPlayer' + (i + 1) + '_' + (j + 1);\n                var vid = _videoList.vid; // videoPath(dsp, {id, vid});\n\n                videoPlay({\n                  id: id,\n                  vid: vid\n                });\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    } // 请求视频地址\n    // function videoPath (dsp, {id, vid}) {\n    //   dsp.getFun('tool/downLoad/getVideoPlayAuth?videoId='+vid ,function(data){\n    //     videoPlay({id, vid, playAuth: data.data.playAuth});\n    //   },function () {})\n    // }\n\n\n    function videoPlay(_ref) {\n      var id = _ref.id,\n          vid = _ref.vid;\n      //创建纠纷时上传的视频\n      cjUtils.getVideoInfo({\n        eleId: id,\n        videoId: vid,\n        configuration: {\n          width: '300px',\n          //视频宽度\n          height: '160px' //视频高度\n\n        },\n        hasWater: false,\n        callback: function callback(player) {\n          player.on('ready', function () {\n            layer.closeAll('loading');\n          });\n        }\n      });\n    } //上传图片\n\n\n    $scope.imgArr = [];\n    var loadList = {\n      img: ['png', 'jpg', 'jpeg', 'gif', \"PNG\", \"JPG\", \"JPEG\", \"GIF\"],\n      video: ['mp4', 'avi', 'wmv', 'mpg', 'mov', 'flv', \"MP4\", \"AVI\", \"WMV\", \"MPG\", \"MOV\", \"FLV\"]\n    };\n\n    $scope.upLoadImg4 = function (files) {\n      console.log(files);\n      var validFileArr = [];\n\n      if (files) {\n        var fileType, fileName;\n\n        for (var i = 0, len = files.length; i < len; i++) {\n          fileName = files[i].name;\n          fileType = fileName.substring(fileName.lastIndexOf('.') + 1, fileName.length).toLowerCase();\n          console.log(fileName, fileType);\n\n          if (loadList.img.indexOf(fileType) != -1) {\n            validFileArr.push(files[i]);\n          }\n        }\n\n        console.log(validFileArr);\n      }\n\n      if (validFileArr.length < 1 && files.length > 0) {\n        layer.msg('Images format error');\n        return;\n      }\n\n      dsp.ossUploadFile(validFileArr, function (data) {\n        console.log(data);\n\n        if (data.code == 0) {\n          layer.msg('Images Upload Failed');\n          return;\n        }\n\n        if (data.code == 2) {\n          layer.msg('Images Upload Incomplete');\n        }\n\n        var result = data.succssLinks;\n        console.log(result);\n        var filArr = [];\n\n        for (var j = 0; j < result.length; j++) {\n          var srcList = result[j].split('.');\n          var fileName = srcList[srcList.length - 1].toLowerCase();\n          console.log(fileName);\n\n          if (fileName == 'png' || fileName == 'jpg' || fileName == 'jpeg' || fileName == 'gif') {\n            $scope.imgArr.push(result[j]);\n          }\n        }\n\n        if ($scope.imgArr && $scope.imgArr.length >= 8) {\n          $scope.hideUpImgFlag = true;\n        }\n\n        $('.upload-imgsinp').val(''); // $scope.imgArr = filArr;\n\n        console.log($scope.imgArr);\n        $scope.$apply();\n      });\n    }; // 删除上传的图片\n\n\n    $scope.delImg = function (index, event) {\n      event.stopPropagation();\n      $scope.imgArr.splice(index, 1); //   $scope.imgOssArr.splice(index, 1);\n\n      if ($scope.imgArr.length < 8) {\n        $scope.hideUpImgFlag = false;\n      }\n    }; // 上传视频\n\n\n    $scope.UploadVideoList = [];\n    $scope.videoId = [];\n    $scope.videoArr = [];\n\n    $scope.upLoadImg5 = function (files) {\n      var file = files[0];\n      var fileName = file.name.substring(file.name.lastIndexOf('.') + 1).toLowerCase();\n\n      if (loadList.video.indexOf(fileName) == -1) {\n        layer.msg('Video format error');\n        return;\n      }\n\n      if ($scope.videoArr.length == 4) {\n        layer.msg('Upload four video at most');\n        return;\n      }\n\n      if (file.size / 1024 / 1024 > 20) {\n        layer.msg('Video file size limited to 20M');\n        return;\n      }\n\n      dsp.load(2);\n      var uploader = cjUtils.createUploader({\n        url: 'https://tools.cjdropshipping.com/tool/downLoad/token',\n        type: 1,\n        addFileSuccessFn: function addFileSuccessFn(_ref2) {\n          var uploadInfo = _ref2.uploadInfo;\n          console.log('视频添加成功 =>', uploadInfo);\n        },\n        onUploadProgress: function onUploadProgress(_ref3) {\n          var uploadInfo = _ref3.uploadInfo,\n              totalSize = _ref3.totalSize,\n              progress = _ref3.progress;\n          console.log('上传进度 uploadInfo =>', uploadInfo, 'toalSize =>', totalSize, 'progress =>', progress);\n          var progressPercent = Math.ceil(progress * 100);\n          console.log('进度 =>', progressPercent);\n        },\n        success: function success(_ref4) {\n          var uploadInfo = _ref4.uploadInfo;\n          console.log('上传成功 =>', uploadInfo);\n          $scope.videoArr.push({\n            vid: uploadInfo.videoId\n          });\n          console.log($scope.videoArr);\n          videoUploadPlay({\n            vid: uploadInfo.videoId\n          });\n\n          if ($scope.videoArr && $scope.videoArr.length >= 4) {\n            $scope.hideUpVideoFlag = true;\n          }\n\n          $('.upload-file').val('');\n        },\n        error: function error(_ref5) {\n          var uploadInfo = _ref5.uploadInfo,\n              code = _ref5.code,\n              message = _ref5.message;\n          layer.closeAll(\"loading\");\n          console.log(\"上传失败\" + uploadInfo.file.name + \",code:\" + code + \", message:\" + message);\n        },\n        onUploadEnd: function onUploadEnd(_ref6) {\n          var uploadInfo = _ref6.uploadInfo;\n          console.log(\"全部上传结束 =>\", uploadInfo);\n        }\n      });\n      /** 添加视频 **/\n\n      uploader.addFile(file, null, null, null, '{\"Vod\":{}}'); //file就是视频文件\n\n      /** 开始上传 **/\n\n      uploader.startUpload();\n    }; // 删除上传的视频\n\n\n    $scope.delVideo = function (index) {\n      $scope.videoArr.splice(index, 1);\n      $scope.videoOssArr.splice(index, 1);\n\n      if ($scope.videoArr.length < 4) {\n        $scope.hideUpVideoFlag = false;\n      }\n    }; // 视频创建播放\n\n\n    function videoUploadPlay() {\n      var len = $scope.videoArr.length;\n      var id = 'J_prismPlayer' + len;\n      var vid = $scope.videoArr[len - 1].vid;\n      $timeout(function () {\n        cjUtils.getVideoInfo({\n          eleId: id,\n          videoId: vid,\n          configuration: {\n            width: '300px',\n            //视频宽度\n            height: '160px' //视频高度\n\n          },\n          hasWater: false,\n          callback: function callback(player) {\n            player.on('ready', function () {\n              layer.closeAll('loading');\n            });\n          }\n        });\n      }, 10000);\n    } //回复纠纷的按钮\n\n\n    $scope.replyFun = function () {\n      if ($scope.replyText) {\n        layer.load(2); // var listArr = [];\n\n        var listObj = {}; //存储一条消息内容\n\n        listObj.userName = '0'; //客户\n\n        listObj.image = $scope.imgArr;\n        listObj.remark = $scope.replyText;\n        listObj.videoUrl = $scope.videoArr;\n        listObj.date = timestampToTime(new Date()); // listArr.push(listObj);\n\n        console.log(listObj);\n        console.log(listArr); // 冗错\n\n        if (!$scope.messageListArr) {\n          $scope.messageListArr = [];\n        }\n\n        $scope.messageListArr.push(listObj);\n        var listArr = JSON.stringify($scope.messageListArr);\n        var upData = {};\n        upData.id = $scope.itemId;\n\n        if ($scope.supplierId) {\n          upData.responseType = \"supplier\";\n        } else {\n          upData.responseType = 'ERP';\n        }\n\n        upData.message = listArr;\n        dsp.postFun('app/dispute/replyDispute', JSON.stringify(upData), function (data) {\n          console.log(data);\n          layer.closeAll('loading');\n\n          if (data.data.result == true || data.data.result == 200) {\n            $scope.closeTicket(); //关闭纠纷单\n\n            layer.msg('Replied Successfully');\n            $scope.ordersList[$scope.itemIndex].message = $scope.messageListArr;\n            $scope.replyText = '';\n            $scope.imgArr = [];\n            $scope.videoArr = [];\n            getList(dsp, $scope);\n          } else {\n            // $scope.messageListArr.pop()\n            layer.msg('Reply Failed');\n          }\n        }, errFun);\n      } else {\n        layer.msg('Please input some information.');\n        return;\n      }\n    }; //客户关闭纠纷\n\n\n    $scope.closeJfFun = function () {\n      $scope.closeJfFlag = true;\n    };\n\n    $scope.qxCloseFun = function () {\n      $scope.closeJfFlag = false;\n    };\n\n    $scope.sureCloseFun = function () {\n      $scope.closeJfFlag = false;\n      layer.load(2);\n      var upId = {};\n      upId.id = $scope.itemId;\n\n      if ($scope.supplierId) {\n        upId.supplierId = $scope.supplierId;\n      }\n\n      dsp.postFun('app/dispute/cancelDispute', JSON.stringify(upId), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n\n        if (data.data.result == true) {\n          layer.msg('Closed Sucess');\n          getList(dsp, $scope);\n          $scope.closeTicket();\n          var idsArr = [$scope.itemId];\n          dsp.postFun('orderUsa/disputeOrder/updateOrderDispute', {\n            ids: idsArr\n          }, function (data) {}, errFun);\n        } else {\n          layer.msg('This operation is not supported. Please contact your agent for help.');\n        }\n      }, errFun);\n    }; //客户拒绝退款 重发\n\n\n    $scope.cusDisAgreeFun = function () {\n      $scope.disAgreeFlag = true;\n    }; //取消拒绝\n\n\n    $scope.qxjjFun = function () {\n      $scope.disAgreeFlag = false;\n    }; //确定拒绝\n\n\n    $scope.sureDisAgreeFun = function () {\n      if (!$scope.refuseCause) {\n        layer.msg('Please fill in refuse reason');\n        return;\n      }\n\n      layer.load(2);\n      var listObj = {}; //存储一条消息内容\n\n      listObj.userName = '0'; //客户\n      // listObj.image = $scope.imgArr;\n\n      listObj.remark = $scope.refuseCause;\n      listObj.date = timestampToTime(new Date());\n      listObj.refuseCause = $scope.refuseCause;\n      listObj.refuseMoney = $scope.tkMoney; // 冗错\n\n      if (!$scope.messageListArr) {\n        $scope.messageListArr = [];\n      }\n\n      $scope.messageListArr.push(listObj);\n      var listArr = JSON.stringify($scope.messageListArr);\n      var upId = {};\n      upId.id = $scope.itemId;\n\n      if ($scope.supplierId) {\n        upId.supplierId = $scope.supplierId;\n      } // upId.refuseCause = $scope.refuseCause;\n\n\n      upId.message = listArr;\n      dsp.postFun('app/dispute/refuseProposal', JSON.stringify(upId), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n\n        if (data.data.result == true) {\n          layer.msg('Refuse Success');\n          $scope.ordersList[$scope.itemIndex].message = $scope.messageListArr;\n          $scope.disAgreeFlag = false; //关闭客户不同意退款弹框\n\n          $scope.closeTicket(); //关闭纠纷弹框\n\n          getList(dsp, $scope);\n        } else {\n          layer.msg('This operation is not supported. Please contact your agent for help.');\n        }\n      }, errFun);\n    }; //客户同意退款\n\n\n    $scope.cusAgreeFun = function () {\n      layer.load(2);\n      var upId = {};\n      upId.id = $scope.itemId;\n\n      if ($scope.supplierId) {\n        dsp.postFun('cjSupplier/supplierDisputeInfo/confirmReceipt', upId, function (data) {\n          console.log(data);\n          layer.closeAll('loading');\n\n          if (data.data.result == true) {\n            layer.msg('Thanks, This dispute completed.');\n            getList(dsp, $scope);\n            $scope.closeTicket();\n          }\n        }, errFun);\n      } else {\n        dsp.postFun('app/dispute/orderRefund', JSON.stringify(upId), function (data) {\n          console.log(data);\n          layer.closeAll('loading');\n\n          if (data.data.result == true) {\n            layer.msg('Thanks, This dispute completed.');\n            getList(dsp, $scope);\n            $scope.closeTicket();\n          } else {\n            layer.msg('This operation is not supported. Please contact your agent for help.');\n          }\n        }, errFun);\n      }\n    }; //点击上传的图片显示大图\n\n\n    $scope.viewBigImg = function (item) {\n      $scope.viewImgFlag = true;\n      $scope.bigImgSrc = item;\n      console.log(item);\n    };\n\n    $scope.closePreImg = function () {\n      $scope.viewImgFlag = false;\n    };\n\n    $scope.disputeResolution = function (item, index) {\n      layer.confirm('Confirm to open dispute mediation. ', {\n        title: false,\n        closeBtn: 0,\n        btn: ['Confirm', 'Cancel'] //按钮\n\n      }, function (index) {\n        console.log(item, '哔啵哔啵');\n        layer.close(index);\n        var params = {};\n        params.id = item.ID;\n        params.supplierId = item.supplierId;\n        params.type = item.type;\n        params.expectResult = item.expectResult;\n        params.orderMoney = item.orderMoney;\n        params.orderNumber = item.ID;\n        dsp.postFun('app/cjSupplierDispute/opencjSupplierDisputeMediate', params, function (data) {\n          console.log(data);\n          layer.closeAll('loading');\n\n          if (data.data.code == 200) {\n            layer.msg('Submitted successfully, we will contact you within 3 jobs');\n            getList(dsp, $scope);\n          } else {\n            layer.msg('Agree Failed');\n          }\n        }, errFun);\n      });\n    };\n\n    $scope.showMediationDetail = function (item, index) {\n      var params = {};\n      params.orderId = item.ID;\n      dsp.postFun('erp/CjSupplierErpDisputes/selectDisputesLog', params, function (res) {\n        if (res.data.code === 200) {\n          $scope.mediateList = res.data.result;\n          $scope.mediateControl = true;\n        }\n\n        layer.closeAll('loading');\n      }, errFun);\n    };\n\n    $scope.closeMediate = function () {\n      $scope.mediateControl = false;\n    }; //子订单的详情\n    // $('.orders-list').on('click','.zi-order-num',function () {\n    //  location.href=\"#/order-detail\";\n    // })\n\n\n    $scope.hrefLinkFun = function (item) {\n      var id = item.ID;\n      var istrackFlag;\n\n      if (item.TRACKINGNUMBER) {\n        istrackFlag = 2;\n      } else {\n        istrackFlag = 1;\n      }\n\n      var isafter = 3;\n      console.log(isafter); // location.href=\"#/order-detail/\"+id+'/'+istrackFlag;\n\n      window.open(\"#/order-detail/\" + id + '/' + istrackFlag + '/' + isafter);\n    };\n\n    function errFun(data) {\n      console.log(data);\n      layer.closeAll('loading');\n    } //格式化时间\n\n\n    function timestampToTime(date) {\n      var Y, M, D, h, m, s;\n      Y = date.getFullYear() + '-';\n      M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n      D = date.getDate() + ' ';\n      h = date.getHours() + ':';\n      m = date.getMinutes() + ':';\n      s = date.getSeconds();\n      return Y + M + D + h + m + s;\n    } // stripe和checkuot交易状态查询\n\n\n    function stripeTradeQuery(parmas) {\n      layer.load(2);\n      dsp.postFun('app/pay/stripeTradeQuery', parmas, function (_ref7) {\n        var data = _ref7.data;\n        layer.closeAll('loading');\n\n        if (data.code == 200) {\n          $scope.stripeStatus = +data.data;\n\n          if (parmas && parmas.paymentType === 'Stripe') {\n            /** 1待支付 2支付中 3支付成功 4支付失败 5支付异常 6支付取消 */\n            switch (+data.data) {\n              case 1:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 2:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 3:\n                layer.msg('Payment Successful.');\n                break;\n\n              case 4:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              case 5:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              case 6:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              default:\n                '';\n            }\n          }\n\n          if (parmas && parmas.paymentType === 'Checkout') {\n            /** 1待支付 2支付中 3支付成功 4支付失败 5支付异常 6支付取消 */\n            switch (+data.data) {\n              case 1:\n                layer.msg('Awaiting Payment.');\n                break;\n\n              case 2:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 3:\n                layer.msg('Payment Successful.');\n                break;\n\n              case 4:\n                layer.msg('Payment via CheckOut failed. Please try again.');\n                break;\n\n              case 5:\n                layer.msg('Payment via CheckOut failed. Please try again.');\n                break;\n\n              case 6:\n                layer.msg('Payment Cancelled.');\n                break;\n\n              default:\n                break;\n            } // window.location.href = window.location.origin + '/myCJ.html#/after-sale//'\n\n\n            getList(dsp, $scope);\n          }\n        } else {\n          return layer.msg(data.msg);\n        }\n      }, function (err) {\n        console.log(err);\n      });\n    } // stripe交易状态查询\n\n\n    function getStripeTrade() {\n      var stripeObj = bs.decode(localStorage.getItem('stripeObj') || '') && JSON.parse(bs.decode(localStorage.getItem('stripeObj') || ''));\n      localStorage.removeItem('stripeObj');\n\n      if (!(stripeObj && stripeObj.orderId)) {\n        return;\n      }\n\n      var ordid = $stateParams.ordid;\n\n      if (ordid !== stripeObj.showOrdId) {\n        return;\n      }\n\n      var parmas = {\n        'orderId': stripeObj && stripeObj.orderId,\n        'code': stripeObj && stripeObj.stripeCode,\n        'payId': stripeObj && stripeObj.payId,\n        'paymentType': stripeObj && stripeObj.paymentType\n      };\n      stripeTradeQuery(parmas);\n    }\n\n    getStripeTrade(); // checkout交易状态查询\n\n    function getCheckoutTrade() {\n      var checkoutObj = bs.decode(localStorage.getItem('checkoutObj') || '') && JSON.parse(bs.decode(localStorage.getItem('checkoutObj') || ''));\n      localStorage.removeItem('checkoutObj');\n      localStorage.removeItem('ckoSessionId');\n\n      if (!(checkoutObj && checkoutObj.paymentType === 'Checkout')) {\n        return;\n      }\n\n      var parmas = {\n        'orderId': checkoutObj && checkoutObj.orderId,\n        'code': checkoutObj && checkoutObj.stripeCode,\n        'paymentType': checkoutObj && checkoutObj.paymentType,\n        'payId': checkoutObj && checkoutObj.payId,\n        'sessionId': $scope.ckoSessionId\n      };\n      stripeTradeQuery(parmas);\n    }\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovc2VydmljZS1jZW50ZXIvc2VydmljZS1hd2FpdC1yZXNwb25zZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9zcmMvcGFnZXMvbXljai9zZXJ2aWNlLWNlbnRlci9zZXJ2aWNlLWF3YWl0LXJlc3BvbnNlLmpzPzk4ZTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTk9ERV9FTlYgfSBmcm9tICdAcm9vdF9lZ2cvZW52JztcclxuY29uc3QgYXdpblRlc01vZGUgPSBbJ3Rlc3RuZXcnLCAnZGV2ZWxvcG1lbnQnLCAndGVzdCddLmluY2x1ZGVzKE5PREVfRU5WKSA/IDEgOiAwO1xyXG5leHBvcnQgZnVuY3Rpb24gc2VydmljZUF3YWl0UmVzcG9uc2VGYWN0b3J5KGFuZ3VsYXIpIHtcclxuICBjb25zdCBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnc2VydmljZS1hd2FpdC1yZXNwb25zZS5tb2R1bGUnLCBbXSk7XHJcblxyXG4gIGFwcC5jb250cm9sbGVyKCdzZXJ2aWNlLWF3YWl0LXJlc3BvbnNlLmN0cmwnLCBbJyRzY29wZScsICdkc3AnLCAnJGxvY2F0aW9uJywgJyRzdGF0ZVBhcmFtcycsICckdGltZW91dCcsICd1dGlscycsXHJcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCBkc3AsICRsb2NhdGlvbiwgJHN0YXRlUGFyYW1zLCAkdGltZW91dCwgdXRpbHMpIHtcclxuICAgICAgZHNwLmRvbWFpbkRhdGEoKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAvLyDor7fmsYLmiJDlip/nmoTnu5PmnpxcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXHJcbiAgICAgICAgJHNjb3BlLmlzY2ogPSByZXMuaXNjajtcclxuICAgICAgICBpZiAoJHNjb3BlLmlzY2ogPT0gJzEnKSB7XHJcbiAgICAgICAgICAvL2NqXHJcbiAgICAgICAgICAkc2NvcGUud2Vic2l0ZU5hbWUgPSAnQ0onO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvL+WuouaIt1xyXG4gICAgICAgICAgJHNjb3BlLndlYnNpdGVOYW1lID0gcmVzLndlYnNpdGVOYW1lIHx8ICdDSic7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICBjb25zb2xlLmxvZygn5ZSu5ZCOJylcclxuICAgICAgdmFyIHBhZ2VIID0gJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxO1xyXG4gICAgICB2YXIgZG9jSCA9ICQoZG9jdW1lbnQpLmhlaWdodCgpO1xyXG4gICAgICB2YXIgYnMgPSBuZXcgQmFzZTY0KCk7XHJcbiAgICAgIHZhciB1c2VySWQgPSBicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpID8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpIDogJycpXHJcbiAgICAgIGNvbnNvbGUubG9nKHVzZXJJZClcclxuICAgICAgdmFyIGpmSWQgPSAkc3RhdGVQYXJhbXMuamZJZDtcclxuICAgICAgY29uc29sZS5sb2coamZJZClcclxuICAgICAgJCgnLmFmdGVyc2FsZS1yaWdodCcpLmNzcyh7XHJcbiAgICAgICAgJ21pbi1oZWlnaHQnOiAkKHdpbmRvdykuaGVpZ2h0KCkgKiAxICsgJ3B4J1xyXG4gICAgICB9KTtcclxuICAgICAgLy/orr7nva7pu5jorqTml7bpl7RcclxuICAgICAgZnVuY3Rpb24gR2V0RGF0ZVN0cihBZGREYXlDb3VudCkge1xyXG4gICAgICAgIHZhciBkZCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZGQuc2V0RGF0ZShkZC5nZXREYXRlKCkgKyBBZGREYXlDb3VudCk7Ly/ojrflj5ZBZGREYXlDb3VudOWkqeWQjueahOaXpeacn1xyXG4gICAgICAgIHZhciB5ID0gZGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB2YXIgbSA9IGRkLmdldE1vbnRoKCkgKyAxOy8v6I635Y+W5b2T5YmN5pyI5Lu955qE5pel5pyfXHJcbiAgICAgICAgdmFyIGQgPSBkZC5nZXREYXRlKCk7XHJcbiAgICAgICAgaWYgKG0gPCAxMCkge1xyXG4gICAgICAgICAgbSA9ICcwJyArIG07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkIDwgMTApIHtcclxuICAgICAgICAgIGQgPSAnMCcgKyBkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geSArIFwiLVwiICsgbSArIFwiLVwiICsgZDtcclxuICAgICAgfVxyXG4gICAgICB2YXIgYURhdGUgPSBHZXREYXRlU3RyKC00NSk7XHJcbiAgICAgIHZhciBlbkRhdGUgPSBHZXREYXRlU3RyKDApO1xyXG4gICAgICAvLyAkKFwiI3ktb3JkLXNkYXRlXCIpLnZhbChhRGF0ZSApOyAgIC8v5YWz6ZSu6K+t5Y+lXHJcbiAgICAgIC8vICQoXCIjeS1vcmQtZWRhdGVcIikudmFsKGVuRGF0ZSApOyAgIC8v5YWz6ZSu6K+t5Y+lXHJcbiAgICAgIGNvbnN0IHsgZmlsdGVyIH0gPSAkbG9jYXRpb24uc2VhcmNoKCk7XHJcbiAgICAgIGZpbHRlciB8fCAkKFwiI2NqLXN0aW1lXCIpLnZhbChhRGF0ZSk7ICAgLy/lhbPplK7or63lj6VcclxuICAgICAgLy8kKFwiI2NqLWV0aW1lXCIpLnZhbChlbkRhdGUgKTsgICAvL+WFs+mUruivreWPpVxyXG4gICAgICAvLyAkc2NvcGUuZGF0YUZvdW5kID0gZmFsc2U7XHJcbiAgICAgIGNvbnNvbGUubG9nKCQoJy5kZWFsLW9yZGVycycpLndpZHRoKCksICQoJy5vcmRlcnMtbGlzdCcpLndpZHRoKCksICQoJy5vcmRlcnMtdGFibGUnKS53aWR0aCgpKVxyXG4gICAgICAvL+e7meW3puS+p+eahOWvvOiIqua3u+WKoOa7muWKqOS6i+S7tlxyXG4gICAgICAkKGRvY3VtZW50KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA+PSAwKSB7XHJcbiAgICAgICAgICAkKCcubGVmdC1uYXYnKS5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgdG9wOiAnODBweCdcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICQoJy5sZWZ0LW5hdicpLmNzcyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxyXG4gICAgICAgICAgICB0b3A6ICc4MHB4J1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAvL+e6oOe6t+exu+Wei1xyXG4gICAgICAkc2NvcGUuaml1ZmVuID0gWydBbGwnLCAnTm8gVHJhY2tpbmcgSW5mb3JtYXRpb24gRm91bmQnLCAnVHJhY2tpbmcgSW5mb3JtYXRpb24gRnJvemVuJywgJ1RyYWNraW5nIEluZm9ybWF0aW9uIEVycm9yJywgJ09yZGVyIFJldHVybmVkJywgJ1Byb2R1Y3RzIFNob3J0JywgJ0RlZmVjdGl2ZSBQcm9kdWN0cycsICdSZWNlaXZlZCBJbmNvcnJlY3QgUHJvZHVjdHMnLCAnT3JkZXIgTm90IFJlY2VpdmVkJ107XHJcbiAgICAgIC8v6K6i5Y2V54q25oCBXHJcbiAgICAgICRzY29wZS5zdGF0ZSA9IFsnQ2xvc2VkJywgJ0NvbXBsZXRlZCcsICdBd2FpdGluZyBDSiBSZXNwb25zZScsICdBd2FpdGluZyBZb3VyIFJlc3BvbnNlJ107XHJcbiAgICAgIC8v5by556qXXHJcbiAgICAgICRzY29wZS53aW5kb3cgPSBmYWxzZTtcclxuICAgICAgJHNjb3BlLnVwbG9hZCA9IGZhbHNlO1xyXG4gICAgICAvL+ivt+axguWPguaVsCBkaXNwdXRlVHlwZVxyXG4gICAgICAkc2NvcGUubGVpeGluZyA9IDE7XHJcblxyXG4gICAgICAkc2NvcGUub3Jkc3RhdHVzID0gJHN0YXRlUGFyYW1zLmFmdGVyU3R1IHx8IDE7XHJcblxyXG4gICAgICBkc3AubG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JyksICQod2luZG93KS5oZWlnaHQoKSAtIDE3MSwgNDcsIDApO1xyXG4gICAgICAkc2NvcGUucGFnZVNpemUgPSAnMjAnO1xyXG4gICAgICAkc2NvcGUucGFnZU51bSA9ICcxJztcclxuICAgICAgJHNjb3BlLnRvdGFsTnVtID0gMDtcclxuICAgICAgJHNjb3BlLnRvdGFsUGFnZU51bSA9IDA7XHJcbiAgICAgICRzY29wZS5zZWFyY2h2YWwgPSBqZklkO1xyXG4gICAgICBjb25zb2xlLmxvZygkc2NvcGUuc2VhcmNodmFsKVxyXG4gICAgICAkc2NvcGUud2FpdGluZ1Jlc0J0biA9IGZpbHRlciA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgJHNjb3BlLmZpbHRlckJ0bkhhbmRsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZmlsdGVyQnRuSGFuZGxlJywgISRzY29wZS53YWl0aW5nUmVzQnRuKVxyXG4gICAgICAgICRzY29wZS53YWl0aW5nUmVzQnRuID0gISRzY29wZS53YWl0aW5nUmVzQnRuO1xyXG4gICAgICAgICQoJyNjai1yZXNwb25zZS10YWJsZSAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKVxyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgdGltZVRyYW5zID0gZnVuY3Rpb24odGltZXN0YW1wKXtcclxuICAgICAgICBjb25zdCB0aW1lcyA9IHRpbWVzdGFtcCAvIDEwMDA7XHJcbiAgICAgICAgY29uc3Qgbm93VGltZSA9ICBNYXRoLnJvdW5kKG5ldyBEYXRlKCkgLyAxMDAwKTtcclxuICAgICAgICBpZigobm93VGltZSAtIHRpbWVzKSA+IDE1KjI0KjYwKjYwKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuaXNTaG93UmVzb2x1dGlvbiA9IGZ1bmN0aW9uKHJTdGF0dXMsIHN1cHBsaWVySWQsIHN0YXR1cywgY3JlYXRlRGF0ZSkge1xyXG4gICAgICAgIGlmKCFyU3RhdHVzICYmIHN1cHBsaWVySWQpIHtcclxuICAgICAgICAgIGlmKHN0YXR1cyA9PT0gJzgnIHx8IHRpbWVUcmFucyhjcmVhdGVEYXRlKSkge1xyXG4gICAgICAgICAgICBpZihzdGF0dXMgPT09ICcxMScpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8v6I635Y+WdXJs5Lit55qE5Y+C5pWw5pa55rOVXHJcbiAgICAgIGZ1bmN0aW9uIGdldFVybFBhcmFtQnlLZXkgKGhyZWYsIGtleSkge1xyXG4gICAgICAgIGlmKCFocmVmKSByZXR1cm4gJydcclxuICAgICAgICB2YXIgdmFycyA9IGhyZWYuc3BsaXQoXCImXCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwO2kgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgcGFpciA9IHZhcnNbaV0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgICAgaWYocGFpclswXSA9PSBrZXkpIHsgcmV0dXJuIHBhaXJbMV07IH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGluaXRJc0NoZWNrb3V0KCkge1xyXG4gICAgICAgIC8vIOWIpOaWreW9k+WJjeaYr+WQpuWtmOWcqGNrb3Nlc3Npb25pZFxyXG4gICAgICAgICRzY29wZS5ja29TZXNzaW9uSWQgPSBicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Nrb1Nlc3Npb25JZCcpIHx8ICcnKSAmJiBKU09OLnBhcnNlKGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2tvU2Vzc2lvbklkJykgfHwgJycpKVxyXG4gICAgICAgIGlmKCRzY29wZS5ja29TZXNzaW9uSWQpIHtcclxuICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpXHJcbiAgICAgICAgICBnZXRDaGVja291dFRyYWRlKClcclxuICAgICAgICAgIHJldHVybiBcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICBpZiAoaHJlZi5pbmRleE9mKCc/JykgPj0gMCAmJiAhZmlsdGVyKSB7IC8vMjAxOS04LTEyIOmcgOimgXF1ZXJ55Lyg5Y+CIOatpOWkhOaOkumZpOaWsOWinueahOi/meS4quadoeS7tlxyXG4gICAgICAgICAgY29uc3QgcmVnZXhwID0gL1xcP1tcXHdcXFddKlxcIy9cclxuICAgICAgICAgICRzY29wZS5zZXNzaW9uSWQgPSBnZXRVcmxQYXJhbUJ5S2V5KGhyZWYubWF0Y2gocmVnZXhwKSAmJiBocmVmLm1hdGNoKHJlZ2V4cClbMF0uc2xpY2UoMSwtMSksJ2Nrby1wYXltZW50LWlkJykgfHwgZ2V0VXJsUGFyYW1CeUtleShocmVmLm1hdGNoKHJlZ2V4cCkgJiYgaHJlZi5tYXRjaChyZWdleHApWzBdLnNsaWNlKDEsLTEpLCdja28tc2Vzc2lvbi1pZCcpXHJcbiAgICAgICAgICBpZigkc2NvcGUuc2Vzc2lvbklkKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdja29TZXNzaW9uSWQnLCBicy5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoJHNjb3BlLnNlc3Npb25JZCkpKTtcclxuICAgICAgICAgICAgLy8g5ZCO56uv5o6l5Y+j6L+U5Zue54q25oCB6L6D5oWi77yM5bu26L+f5LiA56eS5YaN5Yi35paw5b2T5YmN6aG16Z2iXHJcbiAgICAgICAgICAgIGxldCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcclxuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL215Q0ouaHRtbCMvYWZ0ZXItc2FsZS8vJ1xyXG4gICAgICAgICAgICB9LCAyMDApXHJcbiAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIGhyZWZBcnIgPSBocmVmLnNwbGl0KCc/Jyk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhocmVmQXJyKVxyXG4gICAgICAgICAgdmFyIHBheWRhdGFBcnIgPSBocmVmQXJyWzFdLnNwbGl0KCcmJylcclxuICAgICAgICAgIHZhciBsZW5ndGhQYXkgPSBwYXlkYXRhQXJyLmxlbmd0aDtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHBheWRhdGFBcnIpXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhsZW5ndGhQYXkpXHJcbiAgICAgICAgICBpZiAobGVuZ3RoUGF5ID09IDMpIHtcclxuICAgICAgICAgICAgdmFyIHBheW1lbnRBcnIgPSBwYXlkYXRhQXJyWzBdLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIHZhciB0b2tlbkFyciA9IHBheWRhdGFBcnJbMV0uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgdmFyIHBheWlkQXJyID0gcGF5ZGF0YUFyclsyXS5zcGxpdCgnPScpO1xyXG4gIFxyXG4gICAgICAgICAgICB2YXIgcGF5Q1MgPSB7fTtcclxuICAgICAgICAgICAgcGF5Q1MucGF5bWVudElkID0gcGF5bWVudEFyclsxXTtcclxuICAgICAgICAgICAgcGF5Q1MudG9rZW4gPSB0b2tlbkFyclsxXTtcclxuICAgICAgICAgICAgcGF5Q1MucGF5ZXJJRCA9IHBheWlkQXJyWzFdO1xyXG4gICAgICAgICAgICBwYXlDUy5jb2RlID0gMTY7XHJcbiAgICAgICAgICAgIHBheUNTLmF3YyA9IGRzcC5nZXRDb29raWUoXCJhd2NcIikgfHwgJyc7XHJcbiAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBheUNTKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShwYXlDUykpXHJcbiAgICAgICAgICAgIHZhciBpc1Rva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BheVRva2VuJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlzVG9rZW4pXHJcbiAgICAgICAgICAgIGlmIChpc1Rva2VuID09IHRva2VuQXJyWzFdKSB7XHJcbiAgICAgICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvcGF5L3BheScsIEpTT04uc3RyaW5naWZ5KHBheUNTKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnJlc3VsdCAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgRmFpbGVkJylcclxuICAgICAgICAgICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgU3VjY2VlZCcpXHJcbiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYXlUb2tlbicsIHRva2VuQXJyWzFdKVxyXG4gICAgICAgICAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICBcclxuICAgICAgICAgICAgICAgICAgLy9hd2luIOWPkemAgeaUr+S7mOaIkOWKn2ZhbGwtYmFja1xyXG4gICAgICAgICAgICAgICAgICBsZXQgYXdpbkxvY2FsUGFyYW1zID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2luTG9jYWxQYXJhbXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBfcGF5cGFsXyR7cGF5Q1MudG9rZW59YCkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXdpbkxvY2FsUGFyYW1zKVxyXG4gICAgICAgICAgICAgICAgICB9IGNhdGNoKGVycikgeyBjb25zb2xlLmxvZygn6Kej5p6Q6ZSZ6K+vJyk7IH1cclxuICAgICAgICAgICAgICAgICAgaWYoYXdpbkxvY2FsUGFyYW1zKXtcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBhd2luSlMgKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSAnPHNjcmlwdCA+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnIHZhciBBV0lOID0ge307JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcgIEFXSU4uVHJhY2tpbmcgPSB7fTsnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnIEFXSU4uVHJhY2tpbmcuU2FsZSA9IHt9OycgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcgQVdJTi5UcmFja2luZy5TYWxlLmFtb3VudCA9JyArIGF3aW5Mb2NhbFBhcmFtcy5hd2luQW1vdW50ICsgJzsnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnIEFXSU4uVHJhY2tpbmcuU2FsZS5vcmRlclJlZiA9XCInICsgYXdpbkxvY2FsUGFyYW1zLmF3aW5SZWYrICdcIjsnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnIEFXSU4uVHJhY2tpbmcuU2FsZS5wYXJ0cyAgPVwiJyArIFwiREVGQVVMVDpcIiArIGF3aW5Mb2NhbFBhcmFtcy5hd2luQW1vdW50KyAnXCI7JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FXSU4uVHJhY2tpbmcuU2FsZS5jdXJyZW5jeSA9IFwiVVNEXCI7JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnIEFXSU4uVHJhY2tpbmcuU2FsZS50ZXN0ID0gXCInICsgYXdpblRlc01vZGUgKyAnXCI7JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnQVdJTi5UcmFja2luZy5TYWxlLmNoYW5uZWwgPSBcImF3XCI7JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICArJzxcXC9zY3JpcHQ+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3NyYyA9ICdodHRwczovL3d3dy5kd2luMS5jb20vMjE1NzguanMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdC5zcmMgPSBvc3JjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGltZ0h0dHBGdW4oKXtcclxuICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmRlckNvdW50TW9uZXkgPSBhd2luTG9jYWxQYXJhbXMuYXdpbkFtb3VudC50b0ZpeGVkKDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgQmFza2V0SW1hZ2UgPSBuZXcgSW1hZ2UoMSwxKTtcclxuICAgICAgICAgICAgICAgICAgICAgIEJhc2tldEltYWdlLnNyYyA9IGBodHRwczovL3d3dy5hd2luMS5jb20vc3JlYWQuaW1nP3R0PW5zJnR2PTImbWVyY2hhbnQ9MjE1NzgmYW1vdW50PSR7b3JkZXJDb3VudE1vbmV5fSZjaD1hdyZwYXJ0cz1ERUZBVUxUOiR7b3JkZXJDb3VudE1vbmV5fSZjcj1VU0QmcmVmPSR7YXdpbkxvY2FsUGFyYW1zLmF3aW5SZWZ9JnRlc21vZGU9JHthd2luVGVzTW9kZX1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYF9wYXlwYWxfJHtwYXlDUy50b2tlbn1gKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXdjVGV4dCA9IGRzcC5nZXRDb29raWUoJ2F3YycpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHV0bVNvdXJjZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1dG1Tb3VyY2UnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihhd2NUZXh0ICYmIHV0bVNvdXJjZSA9PSAnYXdpbicpey8v5pyJYXdpbueahGF3Y+WAvCDlubbkuJTnmbvlvZXlubPlj7DmnaXmupDmmK9hd2luXHJcbiAgICAgICAgICAgICAgICAgICAgICBhd2luSlMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgaW1nSHR0cEZ1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGxlbmd0aFBheSA8IDMpIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IEZhaWxlZCcpXHJcbiAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaW5pdElzQ2hlY2tvdXQoKVxyXG4gICAgICBcclxuICAgICAgZnVuY3Rpb24gZ2V0TGlzdChkc3AsICRzY29wZSkge1xyXG4gICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAkc2NvcGUudG90YWxOdW0gPSAwO1xyXG4gICAgICAgIHZhciBnZXRMaXN0RGF0YSA9IHt9O1xyXG4gICAgICAgIGdldExpc3REYXRhLnBhZ2UgPSAkc2NvcGUucGFnZU51bSAtIDA7XHJcbiAgICAgICAgZ2V0TGlzdERhdGEubGltaXQgPSAkc2NvcGUucGFnZVNpemUgLSAwO1xyXG4gICAgICAgIGdldExpc3REYXRhLmNvZGUgPSAnY2onO1xyXG4gICAgICAgIGdldHN0YXR1cyhnZXRMaXN0RGF0YSk7XHJcbiAgICAgICAgZ2V0TGlzdERhdGEudHlwZSA9ICQoJy5zZWxKZkx4JykudmFsKCk7XHJcbiAgICAgICAgZ2V0TGlzdERhdGEub3JkZXJOdW1iZXIgPSAkc2NvcGUuc2VhcmNodmFsO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRzdGF0dXMpXHJcbiAgICAgICAgZ2V0TGlzdERhdGEuYmVnaW5EYXRlID0gJChcIiNjai1zdGltZVwiKS52YWwoKTtcclxuICAgICAgICBnZXRMaXN0RGF0YS5lbmREYXRlID0gJChcIiNjai1ldGltZVwiKS52YWwoKTtcclxuXHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9kaXNwdXRlL2dldERpc3B1dGUnLCBKU09OLnN0cmluZ2lmeShnZXRMaXN0RGF0YSksIGNvbiwgZXJyRnVuKVxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbihkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgJHNjb3BlLm9yZHN0YXR1c051bSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0ID0gZGF0YS5kYXRhLmxpc3Q7XHJcbiAgICAgICAgICAkc2NvcGUudG90YWxOdW0gPSBkYXRhLmRhdGEuY291bnQ7Ly/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS50b3RhbE51bSlcclxuICAgICAgICAgIGlmICgkc2NvcGUudG90YWxOdW0gPiAwKSB7XHJcbiAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAkc2NvcGUuY291bnRQYWdlID0gTWF0aC5jZWlsKCRzY29wZS50b3RhbE51bSAvICgkc2NvcGUucGFnZVNpemUgLSAwKSlcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRzcC5hZGROb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JyksJCh3aW5kb3cpLmhlaWdodCgpLTE3MSw0NywwLHt3aWR0aDonMTAwJSd9KVxyXG4gICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgJHNjb3BlLmNvdW50UGFnZSA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBwYWdlRnVuKGRzcCwgJHNjb3BlKTtcclxuICAgICAgICAgIG51bUZ1bigpXHJcbiAgICAgICAgICAkc2NvcGUudG90YWxDb3VudHMgPSBNYXRoLmNlaWwoJHNjb3BlLnRvdGFsTnVtIC8gJHNjb3BlLnBhZ2VTaXplKTtcclxuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdwYWdlLWRhdGEnLCB7XHJcbiAgICAgICAgICAgIHBhZ2VOdW06ICRzY29wZS5wYWdlTnVtLFxyXG4gICAgICAgICAgICB0b3RhbE51bTogJHNjb3BlLnRvdGFsQ291bnRzLFxyXG4gICAgICAgICAgICB0b3RhbENvdW50czogJHNjb3BlLnRvdGFsTnVtLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogJHNjb3BlLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICBwYWdlc2l6ZUxpc3Q6IFsnMjAnLCc1MCcsJzEwMCddXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gZXJyRnVuKGRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLiRvbigncGFnZWRhdGEtZmEnLCBmdW5jdGlvbiAoZCwgZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgJCgnI2NqLXJlc3BvbnNlLXRhYmxlIC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICRzY29wZS5wYWdlTnVtID0gZGF0YS5wYWdlTnVtO1xyXG4gICAgICAgICRzY29wZS5wYWdlU2l6ZSA9IGRhdGEucGFnZVNpemU7XHJcbiAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICAvL+iOt+WPlueKtuaAgVxyXG4gICAgICBmdW5jdGlvbiBnZXRzdGF0dXMoZ2V0c3R1KSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5vcmRzdGF0dXMgPT0gMSkge1xyXG4gICAgICAgICAgZ2V0c3R1LnN0YXR1cyA9ICRzY29wZS53YWl0aW5nUmVzQnRuID8gJzEsMiw0LDcnIDogJzEsMiw0LDYsNyw2MCw2MSc7Ly/mraTlpITmlrDlop7mnaHku7bnrZvpgIlcclxuICAgICAgICAgIGdldHN0dS5yZXNwb25zZVR5cGUgPSAkc2NvcGUud2FpdGluZ1Jlc0J0biA/ICdDSicgOiAnJzsvL+atpOWkhOaWsOWinuadoeS7tuetm+mAiVxyXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLm9yZHN0YXR1cyA9PSAyKSB7XHJcbiAgICAgICAgICBnZXRzdHUuc3RhdHVzID0gJzMsOCwxMSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGdldHN0dS5zdGF0dXMgPSAnNSc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8v5YiG6aG1XHJcbiAgICAgIGZ1bmN0aW9uIHBhZ2VGdW4oZHNwLCAkc2NvcGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudG90YWxOdW0pXHJcbiAgICAgICAgaWYgKCRzY29wZS50b3RhbE51bSA8IDEpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJChcIi5wYWdpbmF0aW9uLWRlbW8xXCIpLmpxUGFnaW5hdG9yKHtcclxuICAgICAgICAgIHRvdGFsQ291bnRzOiAkc2NvcGUudG90YWxOdW0sXHJcbiAgICAgICAgICBwYWdlU2l6ZTogJHNjb3BlLnBhZ2VTaXplICogMSxcclxuICAgICAgICAgIHZpc2libGVQYWdlczogNSxcclxuICAgICAgICAgIGN1cnJlbnRQYWdlOiAkc2NvcGUucGFnZU51bSAqIDEsXHJcbiAgICAgICAgICBhY3RpdmVDbGFzczogJ2FjdGl2ZScsXHJcbiAgICAgICAgICBmaXJzdDogJzxsaSBjbGFzcz1cImZpcnN0XCI+PGEgY2xhc3M9XCJwcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mbHQmbHQ7PFxcL2E+PFxcL2xpPicsXHJcbiAgICAgICAgICBwcmV2OiAnPGxpIGNsYXNzPVwicHJldlwiPjxhIGNsYXNzPVwicHJldlwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+Jmx0OzxcXC9hPjxcXC9saT4nLFxyXG4gICAgICAgICAgbmV4dDogJzxsaSBjbGFzcz1cIm5leHRcIj48YSBjbGFzcz1cIm5leHRcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPiZndDs8XFwvYT48XFwvbGk+JyxcclxuICAgICAgICAgIGxhc3Q6ICc8bGkgY2xhc3M9XCJsYXN0XCI+PGEgY2xhc3M9XCJwcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIj4mZ3QmZ3Q7PFxcL2E+PFxcL2xpPicsXHJcbiAgICAgICAgICBwYWdlOiAnPGxpIGNsYXNzPVwicGFnZVwiPjxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCI+e3twYWdlfX08XFwvYT48XFwvbGk+JyxcclxuICAgICAgICAgIG9uUGFnZUNoYW5nZTogZnVuY3Rpb24gKG4sIHR5cGUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ2luaXQnKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkc3AubG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JyksICQod2luZG93KS5oZWlnaHQoKSAtIDE3MSwgNDcsIDApO1xyXG4gICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAkc2NvcGUudG90YWxOdW0gPSAwO1xyXG4gICAgICAgICAgICAkc2NvcGUucGFnZU51bSA9IG47XHJcbiAgICAgICAgICAgIHZhciBnZXRMaXN0RGF0YSA9IHt9O1xyXG4gICAgICAgICAgICBnZXRMaXN0RGF0YS5wYWdlID0gJHNjb3BlLnBhZ2VOdW0gLSAwO1xyXG4gICAgICAgICAgICBnZXRMaXN0RGF0YS5saW1pdCA9ICRzY29wZS5wYWdlU2l6ZSAtIDA7XHJcbiAgICAgICAgICAgIGdldExpc3REYXRhLmNvZGUgPSAnY2onO1xyXG4gICAgICAgICAgICBnZXRzdGF0dXMoZ2V0TGlzdERhdGEpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3Jkc3RhdHVzKVxyXG4gICAgICAgICAgICBnZXRMaXN0RGF0YS5iZWdpbkRhdGUgPSAkKFwiI2NqLXN0aW1lXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICBnZXRMaXN0RGF0YS5lbmREYXRlID0gJChcIiNjai1ldGltZVwiKS52YWwoKTtcclxuICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9kaXNwdXRlL2dldERpc3B1dGUnLCBKU09OLnN0cmluZ2lmeShnZXRMaXN0RGF0YSksIGNvbiwgZXJyRnVuKVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBkYXRhLmRhdGEubGlzdDtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICAgICAkc2NvcGUudG90YWxOdW0gPSBkYXRhLmRhdGEuY291bnQ7Ly/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgICBpZiAoJHNjb3BlLnRvdGFsTnVtID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNvdW50UGFnZSA9IE1hdGguY2VpbCgkc2NvcGUudG90YWxOdW0gLyAoJHNjb3BlLnBhZ2VTaXplIC0gMCkpXHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRzcC5hZGROb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JyksJCh3aW5kb3cpLmhlaWdodCgpLTE3MSw0NywwLHt3aWR0aDonMTAwJSd9KVxyXG4gICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY291bnRQYWdlID0gMDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gcGFnZUZ1bigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGVyckZ1bihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGdldExpc3QoZHNwLCRzY29wZSk7XHJcbiAgICAgICRzY29wZS5jaGFuZ2VQYWdlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3Jkc3RhdHVzKVxyXG4gICAgICAgICRzY29wZS5wYWdlTnVtID0gJzEnO1xyXG4gICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS50b1NwZWNpZmllZFBhZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZHN0YXR1cylcclxuICAgICAgICB2YXIgcGFnZW51bSA9IE51bWJlcigkc2NvcGUucGFnZU51bSlcclxuICAgICAgICB2YXIgdG90YWxwYWdlID0gTWF0aC5jZWlsKCRzY29wZS50b3RhbE51bSAvICRzY29wZS5wYWdlU2l6ZSk7XHJcbiAgICAgICAgaWYgKHBhZ2VudW0gPiB0b3RhbHBhZ2UgfHwgIXBhZ2VudW0gfHwgcGFnZW51bSA8IDEpIHtcclxuICAgICAgICAgICRzY29wZS5wYWdlbnVtID0gMTtcclxuICAgICAgICAgIGxheWVyLm1zZygnUGFnZSBkb2VzIG5vdCBleGlzdC4nKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy/mkJzntKJcclxuICAgICAgJHNjb3BlLmVudGVyU2VhcmNoID0gZSA9PntcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAkc2NvcGUuc2VhcmNoKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuc2VhcmNodmFsKTtcclxuICAgICAgICBpZiAoJHNjb3BlLnNlYXJjaHZhbCkge1xyXG4gICAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSAxO1xyXG4gICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICQoJy5zZWxKZkx4JykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUucGFnZU51bSA9IDE7XHJcbiAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8v57uZ6K6i5Y2V54q25oCB6LWL5YC855qE5Ye95pWwXHJcbiAgICAgIGZ1bmN0aW9uIG51bUZ1bigpIHtcclxuICAgICAgICAkc2NvcGUuYWZ0ZXJOdW0xID0gJHNjb3BlLm9yZHN0YXR1c051bS55aTtcclxuICAgICAgICAkc2NvcGUuYWZ0ZXJOdW0yID0gJHNjb3BlLm9yZHN0YXR1c051bS5lcjtcclxuICAgICAgICAkc2NvcGUuYWZ0ZXJOdW0zID0gJHNjb3BlLm9yZHN0YXR1c051bS5zYW47XHJcbiAgICAgICAgJHNjb3BlLmFmdGVyTnVtNCA9ICRzY29wZS5vcmRzdGF0dXNOdW0uc2k7XHJcbiAgICAgIH1cclxuICAgICAgLy9jauW8gOWni+aXpeacn+aQnOe0olxyXG4gICAgICAkKFwiI2NqLXN0aW1lXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2plbmR0aW1lID0gJChcIiNjai1zdGltZVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgZW5kdGltZTIgPSAkKFwiI2NqLXN0aW1lXCIpLnZhbCgpO1xyXG4gICAgICAgICAgaWYgKGVuZHRpbWUyICE9IGNqZW5kdGltZSkge1xyXG4gICAgICAgICAgICAvLyBhbGVydChlbmR0aW1lMisnIT0nK2NqZW5kdGltZSlcclxuICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgJHNjb3BlLnRvdGFsTnVtID0gMDtcclxuICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUucGFnZU51bSA9IDE7XHJcbiAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMClcclxuICAgICAgfSlcclxuICAgICAgLy9jaue7k+adn+aXpeacn+aQnOe0olxyXG4gICAgICAkKFwiI2NqLWV0aW1lXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2plbmR0aW1lID0gJChcIiNjai1ldGltZVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgZW5kdGltZTIgPSAkKFwiI2NqLWV0aW1lXCIpLnZhbCgpO1xyXG4gICAgICAgICAgaWYgKGVuZHRpbWUyICE9IGNqZW5kdGltZSkge1xyXG4gICAgICAgICAgICAvLyBhbGVydChlbmR0aW1lMisnIT0nK2NqZW5kdGltZSlcclxuICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgJHNjb3BlLnRvdGFsTnVtID0gMDtcclxuICAgICAgICAgICAgZHNwLmxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpLCAkKHdpbmRvdykuaGVpZ2h0KCkgLSAxNzEsIDQ3LCAwKTtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUucGFnZU51bSA9IDE7XHJcbiAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMClcclxuICAgICAgfSlcclxuICAgICAgJHNjb3BlLm5hdkxpc3QgPSBbXHJcbiAgICAgICAge25hbWU6J0F3YWl0aW5nIFJlc3BvbnNlJyxocmVmOicjL2FmdGVyLXNhbGUvLyd9LFxyXG4gICAgICAgIHtuYW1lOidDb21wbGV0ZWQnLGhyZWY6JyMvYWZ0ZXItc2FsZS8yLyd9LFxyXG4gICAgICAgIHtuYW1lOidDbG9zZWQnLGhyZWY6JyMvYWZ0ZXItc2FsZS8zLyd9XHJcbiAgICAgIF1cclxuICAgICAgJHNjb3BlLm5hdkxpc3RbJHNjb3BlLm9yZHN0YXR1cyAtIDFdLnNob3c9dHJ1ZTtcclxuICAgICBcclxuICAgICAgJCgnLmhlYWRlci1uYXYgbGknKS5lcSgxKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICQoJy5sZWZ0LW5hdiBsaScpLmVxKDIpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgLy8kKCcuYWZ0ZXJzYWxlLWxlZnRiYXJhJykuZXEoMikuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywnbGluZWFyLWdyYWRpZW50KDBkZWcscmdiYSgyNTMsIDE2MiwgNDQsIDEpIDAlLCByZ2JhKDI0NywgMTQwLCA0MSwgMSkgNzglLCByZ2JhKDI0MSwgMTE4LCAzNywgMSkgMTAwJSknKTtcclxuICAgICAgJCgnLmFmdGVyc2FsZS1sZWZ0YmFyYScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuYWZ0ZXJzYWxlLWxlZnRiYXJhJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJycpO1xyXG4gICAgICAgICQodGhpcykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ2xpbmVhci1ncmFkaWVudCgwZGVnLHJnYmEoMjUzLCAxNjIsIDQ0LCAxKSAwJSwgcmdiYSgyNDcsIDE0MCwgNDEsIDEpIDc4JSwgcmdiYSgyNDEsIDExOCwgMzcsIDEpIDEwMCUpJyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vIOe7meS+p+i+ueagj+a3u+WKoOa7muWKqOS6i+S7tlxyXG4gICAgICAkKGRvY3VtZW50KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA+PSA4MCkge1xyXG4gICAgICAgICAgJCgnLmxlZnQtbmF2JykuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXHJcbiAgICAgICAgICAgIHRvcDogJzgwcHgnXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAkKCcubGVmdC1saXN0JykuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAgIHRvcDogJzAnXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vYXdhaXRpbmcgY2ogcmVzcG9uc2Xmt7vliqDpgInkuK3pnZ7pgInkuK1cclxuICAgICAgdmFyIGNqcmVzSW5kZXggPSAwO1xyXG4gICAgICAkKCcjY2otcmVzcG9uc2UtdGFibGUnKS5vbignY2xpY2snLCAnLnpjaGVja2JveCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICAgIGNqcmVzSW5kZXgrKztcclxuICAgICAgICAgIGlmIChjanJlc0luZGV4ID09ICQoJyNjai1yZXNwb25zZS10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KCdxdWFuYnV4dWFuemhvZ24nKVxyXG4gICAgICAgICAgICAkKCcjY2otcmVzcG9uc2UtdGFibGUgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIGNqcmVzSW5kZXgtLTtcclxuICAgICAgICAgIGlmIChjanJlc0luZGV4ICE9ICQoJyNjai1yZXNwb25zZS10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICQoJyNjai1yZXNwb25zZS10YWJsZSAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC8v5YWo6YCJXHJcbiAgICAgICQoJyNjai1yZXNwb25zZS10YWJsZScpLm9uKCdjbGljaycsICcuemNoZWNrZWQtYWxsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJykge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgY2pyZXNJbmRleCA9ICQoJyNjai1yZXNwb25zZS10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoO1xyXG4gICAgICAgICAgJCgnI2NqLXJlc3BvbnNlLXRhYmxlIC56Y2hlY2tib3gnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICBjanJlc0luZGV4ID0gMDtcclxuICAgICAgICAgICQoJyNjai1yZXNwb25zZS10YWJsZSAuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC8v5pi+56S65aSn5Zu+XHJcbiAgICAgICQoJy5zY29sbEJveCcpLm9uKCdtb3VzZWVudGVyJywgJy5zcC1zbWFsbGltZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaGlkZS1iaWdpbWcnKS5zaG93KCk7XHJcbiAgICAgIH0pXHJcbiAgICAgICQoJy5zY29sbEJveCcpLm9uKCdtb3VzZWVudGVyJywgJy5oaWRlLWJpZ2ltZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnNob3coKTtcclxuICAgICAgfSlcclxuICAgICAgJCgnLnNjb2xsQm94Jykub24oJ21vdXNlbGVhdmUnLCAnLnNwLXNtYWxsaW1nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5oaWRlLWJpZ2ltZycpLmhpZGUoKTtcclxuICAgICAgfSlcclxuICAgICAgJCgnLnNjb2xsQm94Jykub24oJ21vdXNlbGVhdmUnLCAnLmhpZGUtYmlnaW1nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuaGlkZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAvL2F3YWl0aW5nIHlvdXIgcmVzcG9uc2Xmt7vliqDpgInkuK3pnZ7pgInkuK1cclxuICAgICAgdmFyIHlvdXJlc0luZGV4ID0gMDtcclxuICAgICAgJCgnI2F3YWl0LXlvdXItdGFibGUnKS5vbignY2xpY2snLCAnLnpjaGVja2JveCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICAgIHlvdXJlc0luZGV4Kys7XHJcbiAgICAgICAgICBpZiAoeW91cmVzSW5kZXggPT0gJCgnI2F3YWl0LXlvdXItdGFibGUgLnpjaGVja2JveCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBhbGVydCgncXVhbmJ1eHVhbnpob2duJylcclxuICAgICAgICAgICAgJCgnI2F3YWl0LXlvdXItdGFibGUgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIHlvdXJlc0luZGV4LS07XHJcbiAgICAgICAgICBpZiAoeW91cmVzSW5kZXggIT0gJCgnI2F3YWl0LXlvdXItdGFibGUgLnpjaGVja2JveCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAkKCcjYXdhaXQteW91ci10YWJsZSAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAvL+WFqOmAiVxyXG4gICAgICAkKCcjYXdhaXQteW91ci10YWJsZScpLm9uKCdjbGljaycsICcuemNoZWNrZWQtYWxsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJykge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgeW91cmVzSW5kZXggPSAkKCcjYXdhaXQteW91ci10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoO1xyXG4gICAgICAgICAgJCgnI2F3YWl0LXlvdXItdGFibGUgLnpjaGVja2JveCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIHlvdXJlc0luZGV4ID0gMDtcclxuICAgICAgICAgICQoJyNhd2FpdC15b3VyLXRhYmxlIC56Y2hlY2tib3gnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLy9jbG9zZWTmt7vliqDpgInkuK3pnZ7pgInkuK1cclxuICAgICAgdmFyIGFmY2xvc2VJbmRleCA9IDA7XHJcbiAgICAgICQoJyNhZnRlci1jbG9zZWQtdGFibGUnKS5vbignY2xpY2snLCAnLnpjaGVja2JveCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICAgIGFmY2xvc2VJbmRleCsrO1xyXG4gICAgICAgICAgaWYgKGFmY2xvc2VJbmRleCA9PSAkKCcjYWZ0ZXItY2xvc2VkLXRhYmxlIC56Y2hlY2tib3gnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gYWxlcnQoJ3F1YW5idXh1YW56aG9nbicpXHJcbiAgICAgICAgICAgICQoJyNhZnRlci1jbG9zZWQtdGFibGUgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIGFmY2xvc2VJbmRleC0tO1xyXG4gICAgICAgICAgaWYgKGFmY2xvc2VJbmRleCAhPSAkKCcjYWZ0ZXItY2xvc2VkLXRhYmxlIC56Y2hlY2tib3gnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJCgnI2FmdGVyLWNsb3NlZC10YWJsZSAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAvL+WFqOmAiVxyXG4gICAgICAkKCcjYWZ0ZXItY2xvc2VkLXRhYmxlJykub24oJ2NsaWNrJywgJy56Y2hlY2tlZC1hbGwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICBhZmNsb3NlSW5kZXggPSAkKCcjYWZ0ZXItY2xvc2VkLXRhYmxlIC56Y2hlY2tib3gnKS5sZW5ndGg7XHJcbiAgICAgICAgICAkKCcjYWZ0ZXItY2xvc2VkLXRhYmxlIC56Y2hlY2tib3gnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICBhZmNsb3NlSW5kZXggPSAwO1xyXG4gICAgICAgICAgJCgnI2FmdGVyLWNsb3NlZC10YWJsZSAuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vY29tcGxldGVk5re75Yqg6YCJ5Lit6Z2e6YCJ5LitXHJcbiAgICAgIHZhciBhZmNvbXBsZXRJbmRleCA9IDA7XHJcbiAgICAgICQoJyNhZnRlci1jb3BsZXRlZC10YWJsZScpLm9uKCdjbGljaycsICcuemNoZWNrYm94JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJykge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgYWZjb21wbGV0SW5kZXgrKztcclxuICAgICAgICAgIGlmIChhZmNvbXBsZXRJbmRleCA9PSAkKCcjYWZ0ZXItY29wbGV0ZWQtdGFibGUgLnpjaGVja2JveCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBhbGVydCgncXVhbmJ1eHVhbnpob2duJylcclxuICAgICAgICAgICAgJCgnI2FmdGVyLWNvcGxldGVkLXRhYmxlIC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICBhZmNvbXBsZXRJbmRleC0tO1xyXG4gICAgICAgICAgaWYgKGFmY29tcGxldEluZGV4ICE9ICQoJyNhZnRlci1jb3BsZXRlZC10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICQoJyNhZnRlci1jb3BsZXRlZC10YWJsZSAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICBcclxuICAgICAgLy/lhajpgIlcclxuICAgICAgJCgnI2FmdGVyLWNvcGxldGVkLXRhYmxlJykub24oJ2NsaWNrJywgJy56Y2hlY2tlZC1hbGwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICBhZmNvbXBsZXRJbmRleCA9ICQoJyNhZnRlci1jb3BsZXRlZC10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoO1xyXG4gICAgICAgICAgJCgnI2FmdGVyLWNvcGxldGVkLXRhYmxlIC56Y2hlY2tib3gnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICBhZmNvbXBsZXRJbmRleCA9IDA7XHJcbiAgICAgICAgICAkKCcjYWZ0ZXItY29wbGV0ZWQtdGFibGUgLnpjaGVja2JveCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgJHNjb3BlLnJlZnVuZFR5cGVMaXN0ID0ge1xyXG4gICAgICAgIFwiMVwiOidCYWNrIGluIGJhbGFuY2UnLFxyXG4gICAgICAgIFwiMlwiOidSZXR1cm4gdG8gdGhlIG9yaWdpbmFsIHdheSdcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy/mu5Hlh7rlm57lpI1cclxuICAgICAgJHNjb3BlLnRpY2tldCA9IGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdpdGVtJywgaXRlbSk7XHJcblxyXG4gICAgICAgICRzY29wZS5qZlN0YXR1cyA9IGl0ZW0uc3RhdHVzOy8v6K6i5Y2V55qE57qg57q354q25oCBXHJcbiAgICAgICAgJHNjb3BlLnJlcGxhY2VtZW50RnJlaWdodCA9ICcnO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5qZlN0YXR1cylcclxuICAgICAgICAkc2NvcGUudGtNb25leSA9IGl0ZW0ubW9uZXk7XHJcbiAgICAgICAgJHNjb3BlLmRpc3B1dGVPcmRlciA9IGl0ZW0uZGlzcHV0ZU9yZGVyO1xyXG4gICAgICAgICRzY29wZS5pdGVtSWQgPSBpdGVtLklEO1xyXG4gICAgICAgICRzY29wZS5pdGVtSW5kZXggPSBpbmRleDtcclxuICAgICAgICAkc2NvcGUubWVzc2FnZUxpc3RBcnIgPSBpdGVtLm1lc3NhZ2U7XHJcbiAgICAgICAgJHNjb3BlLnN1cHBsaWVySWQgPSBpdGVtLnN1cHBsaWVySWQ7XHJcbiAgICAgICAgJHNjb3BlLmFkZHJlc3NJbmZvcm1hdGlvbiA9IGl0ZW0uYWRkcmVzc19pbmZvcm1hdGlvbjtcclxuICAgICAgICAkc2NvcGUudHJhY2tpbmdOdW1iZXIgPSBpdGVtLnRyYWNraW5nX251bWJlclxyXG4gICAgICAgICRzY29wZS5zdGF0dXMgPSBpdGVtLnN0YXR1cztcclxuICAgICAgICB2YXIgbWFyZ2luTCA9IC0kKCcuZGlzcHV0ZWNlbnRlci13cmFwJykud2lkdGgoKSAvIDI7XHJcbiAgICAgICAgJCgnLmRpc3B1dGVjZW50ZXItd3JhcCcpLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgIGxlZnQ6ICc1MCUnLFxyXG4gICAgICAgICAgbWFyZ2luTGVmdDogbWFyZ2luTFxyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgJHNjb3BlLm5vd1R5cGUgPSBpdGVtLnR5cGU7XHJcbiAgICAgICAgJHNjb3BlLnRkZXRhaWxEYXRlID0gdXRpbHMucGFyc2VUaW1lKG5ldyBEYXRlKGl0ZW0uY3JlYXRlRGF0ZS50aW1lKSwgJ3l5eXktTU0tZGQgaGg6bW06c3MnKTtcclxuICAgICAgICAkc2NvcGUuZGV0YWlsRGF0YSA9IGl0ZW0ubWVzc2FnZTsvL+e6oOe6t+WvueivneWIl+ihqFxyXG4gICAgICAgICRzY29wZS5yZWZ1bmRUeXBlID0gaXRlbS5yZWZ1bmRfdHlwZSAvLyDpgIDmrL7pgJTlvoRcclxuICAgICAgICAkc2NvcGUudXNlck5hbWUgPSBpdGVtLnVzZXJOYW1lO1xyXG4gICAgICAgICRzY29wZS5zZXJ2ZXJOYW1lID0gaXRlbS5zYWxlc21hbk5hbWU7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm5vd1R5cGUsICRzY29wZS50ZGV0YWlsRGF0ZSwgJHNjb3BlLmRldGFpbERhdGEpXHJcbiAgICAgICAgLy/ojrflj5blrqLmiLfkuJrliqHlkZjlkI3lrZfnmoTnrKzkuIDkuKrlrZfmr41cclxuICAgICAgICAkc2NvcGUuY3VzTmFtZUZpciA9ICRzY29wZS51c2VyTmFtZS5zbGljZSgwLCAxKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICRzY29wZS5zYWxzZU5hbWVGaXIgPSAkc2NvcGUuc2VydmVyTmFtZS5zbGljZSgwLCAxKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIC8vIOWIm+W7uuinhumikVxyXG4gICAgICAgIHZpZGVvTGlzdChkc3AsIGl0ZW0pXHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnNhbHNlTmFtZUZpciwgJHNjb3BlLmN1c05hbWVGaXIpXHJcbiAgICAgICAgLy/mmK/lkKbmmK/ooaXlj5HnmoRcclxuICAgICAgICAkc2NvcGUuZGlzcHV0ZVN0YXR1cyA9IC0xXHJcbiAgICAgICAgaWYgKGl0ZW0uZGlzcHV0ZU9yZGVyKSB7XHJcbiAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICB2YXIgYmZEYXRhID0ge307XHJcbiAgICAgICAgICBiZkRhdGEuaWQgPSBpdGVtLklEO1xyXG4gICAgICAgICAgYmZEYXRhLnR5cGUgPSAnY2onO1xyXG4gICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9kaXNwdXRlL2dldE9yZGVyQWRkcmVzcycsIEpTT04uc3RyaW5naWZ5KGJmRGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJylcclxuICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5hZGRyZXNzLmlkKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmhhc0NyZWF0ID0gdHJ1ZTsvL+ihpeWPkeaYr+WQpuWIm+W7uuaIkOWKn1xyXG4gICAgICAgICAgICAgIHZhciByZXNPYmogPSBkYXRhLmRhdGEuYWRkcmVzcztcclxuICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdExpc3QgPSBkYXRhLmRhdGEucHJvZHVjdHM7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnJlY29DaXR5ID0gcmVzT2JqLmNpdHk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnJlY29Qcm92aW4gPSByZXNPYmoucHJvdmluY2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnJlY29Db3VudHJ5Y29kZSA9IHJlc09iai5jb3VudHJ5Q29kZTtcclxuICAgICAgICAgICAgICAkc2NvcGUucmVjb0N1c3RvbWVyTmFtZSA9IHJlc09iai5jdXN0b21lck5hbWU7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnJlY29TaGlwcGluZ0FkZHJlc3MgPSByZXNPYmouc2hpcHBpbmdBZGRyZXNzO1xyXG4gICAgICAgICAgICAgICRzY29wZS5yZWNvU2hpcHBpbmdBZGRyZXNzMiA9IHJlc09iai5zaGlwcGluZ2FkZHJlc3MyO1xyXG4gICAgICAgICAgICAgICRzY29wZS5yZWNvWmlwID0gcmVzT2JqLnppcDtcclxuICAgICAgICAgICAgICAkc2NvcGUubG9naXN0aWNOYW1lID0gcmVzT2JqLmxvZ2lzdGljTmFtZTtcclxuICAgICAgICAgICAgICAkc2NvcGUucmVwbGFjZW1lbnRGcmVpZ2h0ID0gcmVzT2JqLnJlcGxhY2VtZW50RnJlaWdodDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuaGFzQ3JlYXQgPSBmYWxzZTsvL+ihpeWPkeaYr+WQpuWIm+W7uuaIkOWKn1xyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnU29tZXRoaW5nIHdyb25nIHdpdGggdGhlIHJlc2VuZCBvcmRlcnMsIHBsZWFzZSBjb250YWN0IHlvdXIgYWdlbnQuJywgeyB0aW1lOiAzMDAwIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJylcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBsZXQgcGFyYW1zU3RhdHVzID0ge1xyXG4gICAgICAgICAgICBvcmRlck51bWJlcjogaXRlbS5JRFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc29sZS5sb2coaXRlbSlcclxuICAgICAgICAgIC8vIOS7peWQjuabtOaNouWIl+ihqOaOpeWPo1xyXG4gICAgICAgICAgJHNjb3BlLmRpc3B1dGVTdGF0dXMgPSBpdGVtLnBheW1lbnRTdGF0dXMgfHwgLTFcclxuICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9wYXkvZ2V0UGF5U3RhdHVzJywgSlNPTi5zdHJpbmdpZnkocGFyYW1zU3RhdHVzKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZGlzcHV0ZVN0YXR1cyA9IGRhdGEuZGF0YS5kYXRhLnN0YXR1c1xyXG4gICAgICAgICAgICAgICRzY29wZS5kaXNwdXRlU3RhdHVzTmFtZSA9IGRhdGEuZGF0YS5kYXRhLnBheW1lbnRUeXBlXHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmRpc3B1dGVTdGF0dXMgPSAtMVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g6YCA5qy+6Iez5LuA5LmI5bmz5Y+wXHJcbiAgICAgICRzY29wZS5yZWZ1bmRQbGF0Zm9ybU5hbWUgPSBmdW5jdGlvbihuYW1lKXtcclxuICAgICAgICBsZXQgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgJ1BheVBhbCc6J1BheVBhbCBhY2NvdW50JyxcclxuICAgICAgICAgICdzdHJpcGVDaGFyZ2VzJzonYmFuayBhY2NvdW50IG9mIHBheW1lbnQnXHJcbiAgICAgICAgfVtuYW1lXVxyXG4gICAgICAgIGlmKCFyZXN1bHQpIHJlc3VsdCA9ICd3YWxsZXQnXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+aYr+WQpuWQjOaEj+ihpeWPkVxyXG4gICAgICAkc2NvcGUuYmZBZ3JlZUZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnJlcGxhY2VtZW50RnJlaWdodCAmJiAkc2NvcGUucmVwbGFjZW1lbnRGcmVpZ2h0ID4gMCkge1xyXG4gICAgICAgICAgdmFyIGl0ZW1JZCA9IGJzLmVuY29kZSgkc2NvcGUuaXRlbUlkKTtcclxuICAgICAgICAgIHZhciB5dW5GZWlOdW0gPSBicy5lbmNvZGUoJHNjb3BlLnJlcGxhY2VtZW50RnJlaWdodClcclxuICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAnbXlDSi5odG1sP3JvdXRlPXBheW1lbnQjL3BheW1lbnQvJyArIGl0ZW1JZCArICcvJyArIHl1bkZlaU51bSArICcvJyArIGJzLmVuY29kZSgnMScpICsgJy9kaXNwdXRlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFyIGJmRGF0YSA9IHt9O1xyXG4gICAgICAgICAgYmZEYXRhLmlkID0gJHNjb3BlLml0ZW1JZDtcclxuICAgICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL2Rpc3B1dGUvYWdyZWVSZWlzc3VlT3JkZXInLCBiZkRhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKTtcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1RoYW5rcywgVGhpcyBkaXNwdXRlIGNvbXBsZXRlZC4nKVxyXG4gICAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5jbG9zZVRpY2tldCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGlzIG9wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgY29udGFjdCB5b3VyIGFnZW50IGZvciBoZWxwLicpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmNvbmZpcm1SZWNlaXB0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHBhcmFtcyA9IHtcclxuICAgICAgICAgIGlkOiAkc2NvcGUuaXRlbUlkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjalN1cHBsaWVyL3N1cHBsaWVyRGlzcHV0ZUluZm8vY29uZmlybVJlY2VpcHQgJywgcGFyYW1zLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnVGhhbmtzLCBUaGlzIGRpc3B1dGUgY29tcGxldGVkLicpXHJcbiAgICAgICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlVGlja2V0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdBZ3JlZSBGYWlsZWQnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgLy8gJHNjb3BlLmJmRGlzQWdyZWVGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIC8vICAgICBsYXllci5tc2coJ+acquW8gOWPkSzmgI7kuYjlgZonKVxyXG4gICAgICAvLyB9XHJcbiAgICAgIC8vIOWFs+mXrXRpY2tldFxyXG4gICAgICAkc2NvcGUuY2xvc2VUaWNrZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmRpc3B1dGVjZW50ZXItd3JhcCcpLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgIGxlZnQ6ICcxMTAlJyxcclxuICAgICAgICAgIG1hcmdpbkxlZnQ6IDBcclxuICAgICAgICB9LCAxMDApXHJcbiAgICAgIH1cclxuICAgICAgLy8g6K+35rGC6KeG6aKR5Zyw5Z2AXHJcbiAgICAgIGZ1bmN0aW9uIHZpZGVvTGlzdChkc3AsIGl0ZW0pIHtcclxuICAgICAgICBpZighaXRlbS5tZXNzYWdlKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBmb3IgKGxldCBbaSwgbGlzdF0gb2YgaXRlbS5tZXNzYWdlLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgaWYgKGxpc3QudmlkZW9VcmwgJiYgbGlzdC52aWRlb1VybC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IFtqLCB2aWRlb0xpc3RdIG9mIGxpc3QudmlkZW9VcmwuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgICAgbGV0IGlkID0gJ0pfcHJpc21QbGF5ZXInICsgKGkgKyAxKSArICdfJyArIChqICsgMSk7XHJcbiAgICAgICAgICAgICAgbGV0IHZpZCA9IHZpZGVvTGlzdC52aWQ7XHJcbiAgICAgICAgICAgICAgLy8gdmlkZW9QYXRoKGRzcCwge2lkLCB2aWR9KTtcclxuICAgICAgICAgICAgICB2aWRlb1BsYXkoeyBpZCwgdmlkIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8g6K+35rGC6KeG6aKR5Zyw5Z2AXHJcbiAgICAgIC8vIGZ1bmN0aW9uIHZpZGVvUGF0aCAoZHNwLCB7aWQsIHZpZH0pIHtcclxuICAgICAgLy8gICBkc3AuZ2V0RnVuKCd0b29sL2Rvd25Mb2FkL2dldFZpZGVvUGxheUF1dGg/dmlkZW9JZD0nK3ZpZCAsZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgIC8vICAgICB2aWRlb1BsYXkoe2lkLCB2aWQsIHBsYXlBdXRoOiBkYXRhLmRhdGEucGxheUF1dGh9KTtcclxuICAgICAgLy8gICB9LGZ1bmN0aW9uICgpIHt9KVxyXG4gICAgICAvLyB9XHJcbiAgICAgIGZ1bmN0aW9uIHZpZGVvUGxheSh7IGlkLCB2aWQgfSkgey8v5Yib5bu657qg57q35pe25LiK5Lyg55qE6KeG6aKRXHJcbiAgICAgICAgY2pVdGlscy5nZXRWaWRlb0luZm8oe1xyXG4gICAgICAgICAgZWxlSWQ6IGlkLFxyXG4gICAgICAgICAgdmlkZW9JZDogdmlkLFxyXG4gICAgICAgICAgY29uZmlndXJhdGlvbjoge1xyXG4gICAgICAgICAgICB3aWR0aDogJzMwMHB4JywgICAgIC8v6KeG6aKR5a695bqmXHJcbiAgICAgICAgICAgIGhlaWdodDogJzE2MHB4JywgICAgIC8v6KeG6aKR6auY5bqmXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgaGFzV2F0ZXI6IGZhbHNlLFxyXG4gICAgICAgICAgY2FsbGJhY2s6IHBsYXllciA9PiB7XHJcbiAgICAgICAgICAgIHBsYXllci5vbigncmVhZHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8v5LiK5Lyg5Zu+54mHXHJcbiAgICAgICRzY29wZS5pbWdBcnIgPSBbXTtcclxuICAgICAgbGV0IGxvYWRMaXN0ID0ge1xyXG4gICAgICAgIGltZzogWydwbmcnLCAnanBnJywgJ2pwZWcnLCAnZ2lmJywgXCJQTkdcIiwgXCJKUEdcIiwgXCJKUEVHXCIsIFwiR0lGXCJdLFxyXG4gICAgICAgIHZpZGVvOiBbJ21wNCcsICdhdmknLCAnd212JywgJ21wZycsICdtb3YnLCAnZmx2JywgXCJNUDRcIiwgXCJBVklcIiwgXCJXTVZcIiwgXCJNUEdcIiwgXCJNT1ZcIiwgXCJGTFZcIl1cclxuICAgICAgfTtcclxuICAgICAgJHNjb3BlLnVwTG9hZEltZzQgPSBmdW5jdGlvbiAoZmlsZXMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhmaWxlcylcclxuICAgICAgICBsZXQgdmFsaWRGaWxlQXJyID0gW107XHJcbiAgICAgICAgaWYgKGZpbGVzKSB7XHJcbiAgICAgICAgICBsZXQgZmlsZVR5cGUsIGZpbGVOYW1lO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGZpbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZpbGVOYW1lID0gZmlsZXNbaV0ubmFtZTtcclxuICAgICAgICAgICAgZmlsZVR5cGUgPSBmaWxlTmFtZS5zdWJzdHJpbmcoZmlsZU5hbWUubGFzdEluZGV4T2YoJy4nKSArIDEsIGZpbGVOYW1lLmxlbmd0aCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZU5hbWUsIGZpbGVUeXBlKVxyXG4gICAgICAgICAgICBpZiAobG9hZExpc3QuaW1nLmluZGV4T2YoZmlsZVR5cGUpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgdmFsaWRGaWxlQXJyLnB1c2goZmlsZXNbaV0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnNvbGUubG9nKHZhbGlkRmlsZUFycilcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbGlkRmlsZUFyci5sZW5ndGggPCAxICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnSW1hZ2VzIGZvcm1hdCBlcnJvcicpXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgZHNwLm9zc1VwbG9hZEZpbGUodmFsaWRGaWxlQXJyLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0ltYWdlcyBVcGxvYWQgRmFpbGVkJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMikge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0ltYWdlcyBVcGxvYWQgSW5jb21wbGV0ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIHJlc3VsdCA9IGRhdGEuc3VjY3NzTGlua3M7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXHJcbiAgICAgICAgICB2YXIgZmlsQXJyID0gW107XHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlc3VsdC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICB2YXIgc3JjTGlzdCA9IHJlc3VsdFtqXS5zcGxpdCgnLicpO1xyXG4gICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBzcmNMaXN0W3NyY0xpc3QubGVuZ3RoIC0gMV0udG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZU5hbWUpXHJcbiAgICAgICAgICAgIGlmIChmaWxlTmFtZSA9PSAncG5nJyB8fCBmaWxlTmFtZSA9PSAnanBnJyB8fCBmaWxlTmFtZSA9PSAnanBlZycgfHwgZmlsZU5hbWUgPT0gJ2dpZicpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuaW1nQXJyLnB1c2gocmVzdWx0W2pdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCRzY29wZS5pbWdBcnIgJiYgJHNjb3BlLmltZ0Fyci5sZW5ndGggPj0gOCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaGlkZVVwSW1nRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkKCcudXBsb2FkLWltZ3NpbnAnKS52YWwoJycpXHJcbiAgICAgICAgICAvLyAkc2NvcGUuaW1nQXJyID0gZmlsQXJyO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmltZ0FycilcclxuICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIC8vIOWIoOmZpOS4iuS8oOeahOWbvueJh1xyXG4gICAgICAkc2NvcGUuZGVsSW1nID0gKGluZGV4LCBldmVudCkgPT4ge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICRzY29wZS5pbWdBcnIuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAvLyAgICRzY29wZS5pbWdPc3NBcnIuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBpZiAoJHNjb3BlLmltZ0Fyci5sZW5ndGggPCA4KSB7XHJcbiAgICAgICAgICAkc2NvcGUuaGlkZVVwSW1nRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgLy8g5LiK5Lyg6KeG6aKRXHJcbiAgICAgICRzY29wZS5VcGxvYWRWaWRlb0xpc3QgPSBbXTtcclxuICAgICAgJHNjb3BlLnZpZGVvSWQgPSBbXTtcclxuICAgICAgJHNjb3BlLnZpZGVvQXJyID0gW107XHJcbiAgICAgICRzY29wZS51cExvYWRJbWc1ID0gZnVuY3Rpb24gKGZpbGVzKSB7XHJcbiAgICAgICAgbGV0IGZpbGUgPSBmaWxlc1swXTtcclxuICAgICAgICBsZXQgZmlsZU5hbWUgPSBmaWxlLm5hbWUuc3Vic3RyaW5nKGZpbGUubmFtZS5sYXN0SW5kZXhPZignLicpICsgMSkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBpZiAobG9hZExpc3QudmlkZW8uaW5kZXhPZihmaWxlTmFtZSkgPT0gLTEpIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnVmlkZW8gZm9ybWF0IGVycm9yJyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkc2NvcGUudmlkZW9BcnIubGVuZ3RoID09IDQpIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnVXBsb2FkIGZvdXIgdmlkZW8gYXQgbW9zdCcpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPiAyMCkge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdWaWRlbyBmaWxlIHNpemUgbGltaXRlZCB0byAyME0nKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZHNwLmxvYWQoMik7XHJcbiAgICAgICAgbGV0IHVwbG9hZGVyID0gY2pVdGlscy5jcmVhdGVVcGxvYWRlcih7XHJcbiAgICAgICAgICB1cmw6ICdodHRwczovL3Rvb2xzLmNqZHJvcHNoaXBwaW5nLmNvbS90b29sL2Rvd25Mb2FkL3Rva2VuJyxcclxuICAgICAgICAgIHR5cGU6IDEsXHJcbiAgICAgICAgICBhZGRGaWxlU3VjY2Vzc0ZuOiAoeyB1cGxvYWRJbmZvIH0pID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+inhumikea3u+WKoOaIkOWKnyA9PicsIHVwbG9hZEluZm8pXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgb25VcGxvYWRQcm9ncmVzczogKHsgdXBsb2FkSW5mbywgdG90YWxTaXplLCBwcm9ncmVzcyB9KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkuIrkvKDov5vluqYgdXBsb2FkSW5mbyA9PicsIHVwbG9hZEluZm8sICd0b2FsU2l6ZSA9PicsIHRvdGFsU2l6ZSwgJ3Byb2dyZXNzID0+JywgcHJvZ3Jlc3MpXHJcbiAgICAgICAgICAgIGxldCBwcm9ncmVzc1BlcmNlbnQgPSBNYXRoLmNlaWwocHJvZ3Jlc3MgKiAxMDApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn6L+b5bqmID0+JywgcHJvZ3Jlc3NQZXJjZW50KVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHN1Y2Nlc3M6ICh7IHVwbG9hZEluZm8gfSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5LiK5Lyg5oiQ5YqfID0+JywgdXBsb2FkSW5mbyk7XHJcbiAgICAgICAgICAgICRzY29wZS52aWRlb0Fyci5wdXNoKHsgdmlkOiB1cGxvYWRJbmZvLnZpZGVvSWQgfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS52aWRlb0FycilcclxuICAgICAgICAgICAgdmlkZW9VcGxvYWRQbGF5KHsgdmlkOiB1cGxvYWRJbmZvLnZpZGVvSWQgfSk7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUudmlkZW9BcnIgJiYgJHNjb3BlLnZpZGVvQXJyLmxlbmd0aCA+PSA0KSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmhpZGVVcFZpZGVvRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLnVwbG9hZC1maWxlJykudmFsKCcnKVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGVycm9yOiAoeyB1cGxvYWRJbmZvLCBjb2RlLCBtZXNzYWdlIH0pID0+IHtcclxuICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuS4iuS8oOWksei0pVwiICsgdXBsb2FkSW5mby5maWxlLm5hbWUgKyBcIixjb2RlOlwiICsgY29kZSArIFwiLCBtZXNzYWdlOlwiICsgbWVzc2FnZSlcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBvblVwbG9hZEVuZDogKHsgdXBsb2FkSW5mbyB9KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5YWo6YOo5LiK5Lyg57uT5p2fID0+XCIsIHVwbG9hZEluZm8pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qKiDmt7vliqDop4bpopEgKiovXHJcbiAgICAgICAgdXBsb2FkZXIuYWRkRmlsZShmaWxlLCBudWxsLCBudWxsLCBudWxsLCAne1wiVm9kXCI6e319Jyk7ICAvL2ZpbGXlsLHmmK/op4bpopHmlofku7ZcclxuICAgICAgICAvKiog5byA5aeL5LiK5LygICoqL1xyXG4gICAgICAgIHVwbG9hZGVyLnN0YXJ0VXBsb2FkKCk7XHJcbiAgICAgIH07XHJcbiAgICAgIC8vIOWIoOmZpOS4iuS8oOeahOinhumikVxyXG4gICAgICAkc2NvcGUuZGVsVmlkZW8gPSAoaW5kZXgpID0+IHtcclxuICAgICAgICAkc2NvcGUudmlkZW9BcnIuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAkc2NvcGUudmlkZW9Pc3NBcnIuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBpZiAoJHNjb3BlLnZpZGVvQXJyLmxlbmd0aCA8IDQpIHtcclxuICAgICAgICAgICRzY29wZS5oaWRlVXBWaWRlb0ZsYWcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyDop4bpopHliJvlu7rmkq3mlL5cclxuICAgICAgZnVuY3Rpb24gdmlkZW9VcGxvYWRQbGF5KCkge1xyXG4gICAgICAgIGxldCBsZW4gPSAkc2NvcGUudmlkZW9BcnIubGVuZ3RoO1xyXG4gICAgICAgIGxldCBpZCA9ICdKX3ByaXNtUGxheWVyJyArIGxlbjtcclxuICAgICAgICBsZXQgdmlkID0gJHNjb3BlLnZpZGVvQXJyW2xlbiAtIDFdLnZpZDtcclxuICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBjalV0aWxzLmdldFZpZGVvSW5mbyh7XHJcbiAgICAgICAgICAgIGVsZUlkOiBpZCxcclxuICAgICAgICAgICAgdmlkZW9JZDogdmlkLFxyXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgd2lkdGg6ICczMDBweCcsICAgICAvL+inhumikeWuveW6plxyXG4gICAgICAgICAgICAgIGhlaWdodDogJzE2MHB4JywgICAgIC8v6KeG6aKR6auY5bqmXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGhhc1dhdGVyOiBmYWxzZSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IHBsYXllciA9PiB7XHJcbiAgICAgICAgICAgICAgcGxheWVyLm9uKCdyZWFkeScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJylcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9LCAxMDAwMClcclxuICAgICAgfVxyXG5cclxuICAgICAgLy/lm57lpI3nuqDnurfnmoTmjInpkq5cclxuICAgICAgJHNjb3BlLnJlcGx5RnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkc2NvcGUucmVwbHlUZXh0KSB7XHJcbiAgICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgICAvLyB2YXIgbGlzdEFyciA9IFtdO1xyXG4gICAgICAgICAgdmFyIGxpc3RPYmogPSB7fTsvL+WtmOWCqOS4gOadoea2iOaBr+WGheWuuVxyXG4gICAgICAgICAgbGlzdE9iai51c2VyTmFtZSA9ICcwJzsvL+WuouaIt1xyXG4gICAgICAgICAgbGlzdE9iai5pbWFnZSA9ICRzY29wZS5pbWdBcnI7XHJcbiAgICAgICAgICBsaXN0T2JqLnJlbWFyayA9ICRzY29wZS5yZXBseVRleHQ7XHJcbiAgICAgICAgICBsaXN0T2JqLnZpZGVvVXJsID0gJHNjb3BlLnZpZGVvQXJyO1xyXG4gICAgICAgICAgbGlzdE9iai5kYXRlID0gdGltZXN0YW1wVG9UaW1lKG5ldyBEYXRlKCkpXHJcbiAgICAgICAgICAvLyBsaXN0QXJyLnB1c2gobGlzdE9iaik7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhsaXN0T2JqKVxyXG4gICAgICAgICAgY29uc29sZS5sb2cobGlzdEFycilcclxuICAgICAgICAgIC8vIOWGl+mUmVxyXG4gICAgICAgICAgaWYgKCEkc2NvcGUubWVzc2FnZUxpc3RBcnIpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VMaXN0QXJyID0gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2NvcGUubWVzc2FnZUxpc3RBcnIucHVzaChsaXN0T2JqKVxyXG4gICAgICAgICAgdmFyIGxpc3RBcnIgPSBKU09OLnN0cmluZ2lmeSgkc2NvcGUubWVzc2FnZUxpc3RBcnIpXHJcbiAgICAgICAgICB2YXIgdXBEYXRhID0ge307XHJcbiAgICAgICAgICB1cERhdGEuaWQgPSAkc2NvcGUuaXRlbUlkO1xyXG4gICAgICAgICAgaWYoJHNjb3BlLnN1cHBsaWVySWQpIHtcclxuICAgICAgICAgICAgdXBEYXRhLnJlc3BvbnNlVHlwZSA9IFwic3VwcGxpZXJcIlxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXBEYXRhLnJlc3BvbnNlVHlwZSA9ICdFUlAnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdXBEYXRhLm1lc3NhZ2UgPSBsaXN0QXJyO1xyXG4gICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9kaXNwdXRlL3JlcGx5RGlzcHV0ZScsIEpTT04uc3RyaW5naWZ5KHVwRGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ID09IHRydWUgfHwgZGF0YS5kYXRhLnJlc3VsdCA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuY2xvc2VUaWNrZXQoKTsvL+WFs+mXree6oOe6t+WNlVxyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnUmVwbGllZCBTdWNjZXNzZnVsbHknKVxyXG4gICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0WyRzY29wZS5pdGVtSW5kZXhdLm1lc3NhZ2UgPSAkc2NvcGUubWVzc2FnZUxpc3RBcnI7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnJlcGx5VGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICRzY29wZS5pbWdBcnIgPSBbXTtcclxuICAgICAgICAgICAgICAkc2NvcGUudmlkZW9BcnIgPSBbXTtcclxuICAgICAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyAkc2NvcGUubWVzc2FnZUxpc3RBcnIucG9wKClcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1JlcGx5IEZhaWxlZCcpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIGVyckZ1bilcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2UgaW5wdXQgc29tZSBpbmZvcm1hdGlvbi4nKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvL+WuouaIt+WFs+mXree6oOe6t1xyXG4gICAgICAkc2NvcGUuY2xvc2VKZkZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUuY2xvc2VKZkZsYWcgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5xeENsb3NlRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5jbG9zZUpmRmxhZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5zdXJlQ2xvc2VGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLmNsb3NlSmZGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgIHZhciB1cElkID0ge307XHJcbiAgICAgICAgdXBJZC5pZCA9ICRzY29wZS5pdGVtSWQ7XHJcbiAgICAgICAgaWYoJHNjb3BlLnN1cHBsaWVySWQpIHtcclxuICAgICAgICAgIHVwSWQuc3VwcGxpZXJJZCA9ICRzY29wZS5zdXBwbGllcklkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvZGlzcHV0ZS9jYW5jZWxEaXNwdXRlJywgSlNPTi5zdHJpbmdpZnkodXBJZCksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0Nsb3NlZCBTdWNlc3MnKVxyXG4gICAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlVGlja2V0KCk7XHJcbiAgICAgICAgICAgIGxldCBpZHNBcnIgPSBbJHNjb3BlLml0ZW1JZF1cclxuICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ29yZGVyVXNhL2Rpc3B1dGVPcmRlci91cGRhdGVPcmRlckRpc3B1dGUnLHtcclxuICAgICAgICAgICAgICBpZHM6aWRzQXJyXHJcbiAgICAgICAgICAgIH0sZnVuY3Rpb24oZGF0YSl7XHJcblxyXG4gICAgICAgICAgICB9LGVyckZ1bilcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZC4gUGxlYXNlIGNvbnRhY3QgeW91ciBhZ2VudCBmb3IgaGVscC4nKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGVyckZ1bilcclxuICAgICAgfVxyXG4gICAgICAvL+WuouaIt+aLkue7nemAgOasviDph43lj5FcclxuICAgICAgJHNjb3BlLmN1c0Rpc0FncmVlRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5kaXNBZ3JlZUZsYWcgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIC8v5Y+W5raI5ouS57udXHJcbiAgICAgICRzY29wZS5xeGpqRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5kaXNBZ3JlZUZsYWcgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICAvL+ehruWumuaLkue7nVxyXG4gICAgICAkc2NvcGUuc3VyZURpc0FncmVlRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghJHNjb3BlLnJlZnVzZUNhdXNlKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBmaWxsIGluIHJlZnVzZSByZWFzb24nKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgdmFyIGxpc3RPYmogPSB7fTsvL+WtmOWCqOS4gOadoea2iOaBr+WGheWuuVxyXG4gICAgICAgIGxpc3RPYmoudXNlck5hbWUgPSAnMCc7Ly/lrqLmiLdcclxuICAgICAgICAvLyBsaXN0T2JqLmltYWdlID0gJHNjb3BlLmltZ0FycjtcclxuICAgICAgICBsaXN0T2JqLnJlbWFyayA9ICRzY29wZS5yZWZ1c2VDYXVzZTtcclxuICAgICAgICBsaXN0T2JqLmRhdGUgPSB0aW1lc3RhbXBUb1RpbWUobmV3IERhdGUoKSlcclxuICAgICAgICBsaXN0T2JqLnJlZnVzZUNhdXNlID0gJHNjb3BlLnJlZnVzZUNhdXNlO1xyXG4gICAgICAgIGxpc3RPYmoucmVmdXNlTW9uZXkgPSAkc2NvcGUudGtNb25leTtcclxuICAgICAgICAvLyDlhpfplJlcclxuICAgICAgICBpZiAoISRzY29wZS5tZXNzYWdlTGlzdEFycikge1xyXG4gICAgICAgICAgJHNjb3BlLm1lc3NhZ2VMaXN0QXJyID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5tZXNzYWdlTGlzdEFyci5wdXNoKGxpc3RPYmopXHJcbiAgICAgICAgdmFyIGxpc3RBcnIgPSBKU09OLnN0cmluZ2lmeSgkc2NvcGUubWVzc2FnZUxpc3RBcnIpXHJcbiAgICAgICAgdmFyIHVwSWQgPSB7fTtcclxuICAgICAgICB1cElkLmlkID0gJHNjb3BlLml0ZW1JZDtcclxuICAgICAgICBpZigkc2NvcGUuc3VwcGxpZXJJZCkge1xyXG4gICAgICAgICAgdXBJZC5zdXBwbGllcklkID0gJHNjb3BlLnN1cHBsaWVySWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHVwSWQucmVmdXNlQ2F1c2UgPSAkc2NvcGUucmVmdXNlQ2F1c2U7XHJcbiAgICAgICAgdXBJZC5tZXNzYWdlID0gbGlzdEFycjtcclxuICAgICAgICBkc3AucG9zdEZ1bignYXBwL2Rpc3B1dGUvcmVmdXNlUHJvcG9zYWwnLCBKU09OLnN0cmluZ2lmeSh1cElkKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpO1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ1JlZnVzZSBTdWNjZXNzJylcclxuICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbJHNjb3BlLml0ZW1JbmRleF0ubWVzc2FnZSA9ICRzY29wZS5tZXNzYWdlTGlzdEFycjtcclxuICAgICAgICAgICAgJHNjb3BlLmRpc0FncmVlRmxhZyA9IGZhbHNlOy8v5YWz6Zet5a6i5oi35LiN5ZCM5oSP6YCA5qy+5by55qGGXHJcbiAgICAgICAgICAgICRzY29wZS5jbG9zZVRpY2tldCgpOy8v5YWz6Zet57qg57q35by55qGGXHJcbiAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGlzIG9wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgY29udGFjdCB5b3VyIGFnZW50IGZvciBoZWxwLicpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZXJyRnVuKVxyXG4gICAgICB9XHJcbiAgICAgIC8v5a6i5oi35ZCM5oSP6YCA5qy+XHJcbiAgICAgICRzY29wZS5jdXNBZ3JlZUZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgdmFyIHVwSWQgPSB7fTtcclxuICAgICAgICB1cElkLmlkID0gJHNjb3BlLml0ZW1JZDtcclxuICAgICAgICBpZigkc2NvcGUuc3VwcGxpZXJJZCkge1xyXG4gICAgICAgICAgZHNwLnBvc3RGdW4oJ2NqU3VwcGxpZXIvc3VwcGxpZXJEaXNwdXRlSW5mby9jb25maXJtUmVjZWlwdCcsIHVwSWQsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ1RoYW5rcywgVGhpcyBkaXNwdXRlIGNvbXBsZXRlZC4nKVxyXG4gICAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlVGlja2V0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZXJyRnVuKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL2Rpc3B1dGUvb3JkZXJSZWZ1bmQnLCBKU09OLnN0cmluZ2lmeSh1cElkKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnJlc3VsdCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGFua3MsIFRoaXMgZGlzcHV0ZSBjb21wbGV0ZWQuJylcclxuICAgICAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICAgICAgICAkc2NvcGUuY2xvc2VUaWNrZXQoKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGlzIG9wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgY29udGFjdCB5b3VyIGFnZW50IGZvciBoZWxwLicpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIGVyckZ1bilcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcbiAgICAgIC8v54K55Ye75LiK5Lyg55qE5Zu+54mH5pi+56S65aSn5Zu+XHJcbiAgICAgICRzY29wZS52aWV3QmlnSW1nID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAkc2NvcGUudmlld0ltZ0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICRzY29wZS5iaWdJbWdTcmMgPSBpdGVtO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmNsb3NlUHJlSW1nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS52aWV3SW1nRmxhZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgJHNjb3BlLmRpc3B1dGVSZXNvbHV0aW9uID0gKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgbGF5ZXIuY29uZmlybSgnQ29uZmlybSB0byBvcGVuIGRpc3B1dGUgbWVkaWF0aW9uLiAnLCB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBmYWxzZSxcclxuICAgICAgICAgICAgY2xvc2VCdG46IDAsXHJcbiAgICAgICAgICAgIGJ0bjogWydDb25maXJtJywgJ0NhbmNlbCddIC8v5oyJ6ZKuXHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtLCAn5ZOU5ZW15ZOU5ZW1JylcclxuICAgICAgICAgICAgbGF5ZXIuY2xvc2UoaW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge307XHJcbiAgICAgICAgICAgIHBhcmFtcy5pZCA9IGl0ZW0uSUQ7XHJcbiAgICAgICAgICAgIHBhcmFtcy5zdXBwbGllcklkID0gaXRlbS5zdXBwbGllcklkO1xyXG4gICAgICAgICAgICBwYXJhbXMudHlwZSA9IGl0ZW0udHlwZTtcclxuICAgICAgICAgICAgcGFyYW1zLmV4cGVjdFJlc3VsdCA9IGl0ZW0uZXhwZWN0UmVzdWx0O1xyXG4gICAgICAgICAgICBwYXJhbXMub3JkZXJNb25leSA9IGl0ZW0ub3JkZXJNb25leTtcclxuICAgICAgICAgICAgcGFyYW1zLm9yZGVyTnVtYmVyID0gaXRlbS5JRDtcclxuICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9jalN1cHBsaWVyRGlzcHV0ZS9vcGVuY2pTdXBwbGllckRpc3B1dGVNZWRpYXRlJywgcGFyYW1zLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1N1Ym1pdHRlZCBzdWNjZXNzZnVsbHksIHdlIHdpbGwgY29udGFjdCB5b3Ugd2l0aGluIDMgam9icycpXHJcbiAgICAgICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnQWdyZWUgRmFpbGVkJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgZXJyRnVuKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuc2hvd01lZGlhdGlvbkRldGFpbCA9IChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSB7fTtcclxuICAgICAgICBwYXJhbXMub3JkZXJJZCA9IGl0ZW0uSUQ7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2VycC9DalN1cHBsaWVyRXJwRGlzcHV0ZXMvc2VsZWN0RGlzcHV0ZXNMb2cnLCBwYXJhbXMsIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICBpZihyZXMuZGF0YS5jb2RlID09PSAyMDApIHtcclxuICAgICAgICAgICRzY29wZS5tZWRpYXRlTGlzdCA9IHJlcy5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICRzY29wZS5tZWRpYXRlQ29udHJvbCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJylcclxuICAgICAgfSwgZXJyRnVuKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuY2xvc2VNZWRpYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICRzY29wZS5tZWRpYXRlQ29udHJvbCA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgIC8v5a2Q6K6i5Y2V55qE6K+m5oOFXHJcbiAgICAgIC8vICQoJy5vcmRlcnMtbGlzdCcpLm9uKCdjbGljaycsJy56aS1vcmRlci1udW0nLGZ1bmN0aW9uICgpIHtcclxuICAgICAgLy8gIGxvY2F0aW9uLmhyZWY9XCIjL29yZGVyLWRldGFpbFwiO1xyXG4gICAgICAvLyB9KVxyXG4gICAgICAkc2NvcGUuaHJlZkxpbmtGdW4gPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHZhciBpZCA9IGl0ZW0uSUQ7XHJcbiAgICAgICAgdmFyIGlzdHJhY2tGbGFnO1xyXG4gICAgICAgIGlmIChpdGVtLlRSQUNLSU5HTlVNQkVSKSB7XHJcbiAgICAgICAgICBpc3RyYWNrRmxhZyA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlzdHJhY2tGbGFnID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlzYWZ0ZXIgPSAzO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGlzYWZ0ZXIpXHJcbiAgICAgICAgLy8gbG9jYXRpb24uaHJlZj1cIiMvb3JkZXItZGV0YWlsL1wiK2lkKycvJytpc3RyYWNrRmxhZztcclxuICAgICAgICB3aW5kb3cub3BlbihcIiMvb3JkZXItZGV0YWlsL1wiICsgaWQgKyAnLycgKyBpc3RyYWNrRmxhZyArICcvJyArIGlzYWZ0ZXIpXHJcbiAgICAgIH1cclxuICAgICAgZnVuY3Rpb24gZXJyRnVuKGRhdGEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgIH1cclxuICAgICAgLy/moLzlvI/ljJbml7bpl7RcclxuICAgICAgZnVuY3Rpb24gdGltZXN0YW1wVG9UaW1lKGRhdGUpIHtcclxuICAgICAgICB2YXIgWSwgTSwgRCwgaCwgbSwgc1xyXG4gICAgICAgIFkgPSBkYXRlLmdldEZ1bGxZZWFyKCkgKyAnLSc7XHJcbiAgICAgICAgTSA9IChkYXRlLmdldE1vbnRoKCkgKyAxIDwgMTAgPyAnMCcgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkgOiBkYXRlLmdldE1vbnRoKCkgKyAxKSArICctJztcclxuICAgICAgICBEID0gZGF0ZS5nZXREYXRlKCkgKyAnICc7XHJcbiAgICAgICAgaCA9IGRhdGUuZ2V0SG91cnMoKSArICc6JztcclxuICAgICAgICBtID0gZGF0ZS5nZXRNaW51dGVzKCkgKyAnOic7XHJcbiAgICAgICAgcyA9IGRhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgIHJldHVybiBZICsgTSArIEQgKyBoICsgbSArIHM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAvLyBzdHJpcGXlkoxjaGVja3VvdOS6pOaYk+eKtuaAgeafpeivolxyXG4gICAgZnVuY3Rpb24gc3RyaXBlVHJhZGVRdWVyeShwYXJtYXMpIHtcclxuICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICBkc3AucG9zdEZ1bignYXBwL3BheS9zdHJpcGVUcmFkZVF1ZXJ5JywgcGFybWFzLCAoe2RhdGF9KSA9PiB7XHJcbiAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgIGlmKGRhdGEuY29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICRzY29wZS5zdHJpcGVTdGF0dXMgPSArZGF0YS5kYXRhXHJcbiAgICAgICAgICBpZihwYXJtYXMgJiYgcGFybWFzLnBheW1lbnRUeXBlID09PSAnU3RyaXBlJykge1xyXG4gICAgICAgICAgICAvKiogMeW+heaUr+S7mCAy5pSv5LuY5LitIDPmlK/ku5jmiJDlip8gNOaUr+S7mOWksei0pSA15pSv5LuY5byC5bi4IDbmlK/ku5jlj5bmtoggKi9cclxuICAgICAgICAgICAgc3dpdGNoKCtkYXRhLmRhdGEpIHtcclxuICAgICAgICAgICAgICBjYXNlIDE6ICBcclxuICAgICAgICAgICAgICAgIGxheWVyLm1zZygnQXdhaXRpbmcgcGF5bWVudCBjb25maXJtYXRpb24uIFBsZWFzZSByZWZyZXNoIGFuZCBjaGVjayBpdCBsYXRlci4nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgMjogXHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ0F3YWl0aW5nIHBheW1lbnQgY29uZmlybWF0aW9uLiBQbGVhc2UgcmVmcmVzaCBhbmQgY2hlY2sgaXQgbGF0ZXIuJyk7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgIGNhc2UgMzogXHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgU3VjY2Vzc2Z1bC4nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgNDogXHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgdmlhIFN0cmlwZSBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBjYXNlIDU6IFxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IHZpYSBTdHJpcGUgZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgY2FzZSA2OiBcclxuICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGF5bWVudCB2aWEgU3RyaXBlIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6ICAnJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihwYXJtYXMgJiYgcGFybWFzLnBheW1lbnRUeXBlID09PSAnQ2hlY2tvdXQnKSB7XHJcbiAgICAgICAgICAgIC8qKiAx5b6F5pSv5LuYIDLmlK/ku5jkuK0gM+aUr+S7mOaIkOWKnyA05pSv5LuY5aSx6LSlIDXmlK/ku5jlvILluLggNuaUr+S7mOWPlua2iCAqL1xyXG4gICAgICAgICAgICBzd2l0Y2goK2RhdGEuZGF0YSkge1xyXG4gICAgICAgICAgICAgIGNhc2UgMTogIFxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdBd2FpdGluZyBQYXltZW50LicpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgY2FzZSAyOiBcclxuICAgICAgICAgICAgICAgIGxheWVyLm1zZygnQXdhaXRpbmcgcGF5bWVudCBjb25maXJtYXRpb24uIFBsZWFzZSByZWZyZXNoIGFuZCBjaGVjayBpdCBsYXRlci4nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgMzogXHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgU3VjY2Vzc2Z1bC4nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgNDogXHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgdmlhIENoZWNrT3V0IGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgNTogXHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgdmlhIENoZWNrT3V0IGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgNjogXHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgQ2FuY2VsbGVkLicpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgZGVmYXVsdDogYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9teUNKLmh0bWwjL2FmdGVyLXNhbGUvLydcclxuICAgICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBsYXllci5tc2coZGF0YS5tc2cpXHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gIC8vIHN0cmlwZeS6pOaYk+eKtuaAgeafpeivolxyXG4gIGZ1bmN0aW9uIGdldFN0cmlwZVRyYWRlKCkge1xyXG4gICAgY29uc3Qgc3RyaXBlT2JqID0gYnMuZGVjb2RlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdHJpcGVPYmonKSB8fCAnJykgJiYgSlNPTi5wYXJzZShicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0cmlwZU9iaicpIHx8ICcnKSk7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnc3RyaXBlT2JqJylcclxuICAgIGlmKCEoc3RyaXBlT2JqICYmIHN0cmlwZU9iai5vcmRlcklkKSkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IG9yZGlkID0gJHN0YXRlUGFyYW1zLm9yZGlkO1xyXG4gICAgaWYob3JkaWQgIT09IHN0cmlwZU9iai5zaG93T3JkSWQpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXJtYXMgPSB7XHJcbiAgICAgICdvcmRlcklkJzogc3RyaXBlT2JqICYmIHN0cmlwZU9iai5vcmRlcklkLFxyXG4gICAgICAnY29kZSc6IHN0cmlwZU9iaiAmJiBzdHJpcGVPYmouc3RyaXBlQ29kZSxcclxuICAgICAgJ3BheUlkJzogc3RyaXBlT2JqICYmIHN0cmlwZU9iai5wYXlJZCxcclxuICAgICAgJ3BheW1lbnRUeXBlJzogc3RyaXBlT2JqICYmIHN0cmlwZU9iai5wYXltZW50VHlwZSxcclxuICAgIH1cclxuICAgIHN0cmlwZVRyYWRlUXVlcnkocGFybWFzKVxyXG4gICAgfVxyXG4gICAgZ2V0U3RyaXBlVHJhZGUoKVxyXG5cclxuICAgIC8vIGNoZWNrb3V05Lqk5piT54q25oCB5p+l6K+iXHJcbiAgICBmdW5jdGlvbiBnZXRDaGVja291dFRyYWRlKCkge1xyXG4gICAgICBjb25zdCBjaGVja291dE9iaiA9IGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2hlY2tvdXRPYmonKSB8fCAnJykgJiYgSlNPTi5wYXJzZShicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NoZWNrb3V0T2JqJykgfHwgJycpKTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NoZWNrb3V0T2JqJylcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2Nrb1Nlc3Npb25JZCcpXHJcbiAgICAgIGlmKCEoY2hlY2tvdXRPYmogJiYgY2hlY2tvdXRPYmoucGF5bWVudFR5cGUgPT09ICdDaGVja291dCcpKSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcGFybWFzID0ge1xyXG4gICAgICAgICdvcmRlcklkJzogY2hlY2tvdXRPYmogJiYgY2hlY2tvdXRPYmoub3JkZXJJZCxcclxuICAgICAgICAnY29kZSc6IGNoZWNrb3V0T2JqICYmIGNoZWNrb3V0T2JqLnN0cmlwZUNvZGUsXHJcbiAgICAgICAgJ3BheW1lbnRUeXBlJzogY2hlY2tvdXRPYmogJiYgY2hlY2tvdXRPYmoucGF5bWVudFR5cGUsXHJcbiAgICAgICAgJ3BheUlkJzogY2hlY2tvdXRPYmogJiYgY2hlY2tvdXRPYmoucGF5SWQsXHJcbiAgICAgICAgJ3Nlc3Npb25JZCc6ICRzY29wZS5ja29TZXNzaW9uSWRcclxuICAgICAgfVxyXG4gICAgICBzdHJpcGVUcmFkZVF1ZXJ5KHBhcm1hcylcclxuICAgIH1cclxuXHJcbiAgICB9XSk7XHJcblxyXG4gIHJldHVybiBhcHA7XHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQTNDQTtBQUFBO0FBQ0E7QUEyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQS9DQTtBQWlEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBWEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFIQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQTNCQTtBQTZCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFIQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFuQkE7QUFxQkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFuQkE7QUFDQTtBQUNBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUVBO0FBRUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../src/pages/mycj/service-center/service-await-response.js\n");

/***/ })

}]);