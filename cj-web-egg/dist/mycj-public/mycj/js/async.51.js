(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[51],{

/***/ "../src/pages/mycj/service-product/products.js":
/*!*****************************************************!*\
  !*** ../src/pages/mycj/service-product/products.js ***!
  \*****************************************************/
/*! exports provided: serviceProductProductsFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"serviceProductProductsFactory\", function() { return serviceProductProductsFactory; });\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction serviceProductProductsFactory(angular) {\n  var app = angular.module('service-product-products.module', []);\n  app.controller('service-product-products.ctrl', ['$scope', '$rootScope', 'dsp', '$timeout', '$q', function ($scope, $rootScope, dsp, $timeout, $q) {\n    function mypost(url, params) {\n      //2019-7-4封装post方法\n      return $q(function (resolve, reject) {\n        dsp.postFun(url, JSON.stringify(params), function (_ref) {\n          var data = _ref.data;\n          layer.closeAll('loading');\n          var result = data.result,\n              statusCode = data.statusCode,\n              message = data.message;\n\n          if (statusCode != 200) {\n            reject(data);\n            return myMsg(message);\n          }\n\n          resolve(result);\n        }, function (err) {\n          console.log('errHandle  --->  ', err);\n          reject(err);\n          layer.closeAll('loading'); // layer.msg('服务器错误')\n        });\n      });\n    }\n\n    $scope.status = '2'; // 0 提交审核 1 审核中  2  审核通过\n\n    $scope.goodsShow = false; // 申请服务商品\n\n    $scope.trackingShow = false; // 添加/修改运单\n\n    $scope.shippingFeeShow = false; // 费用详情\n\n    $scope.shippingFeeHintShow = false; // 费用详情温馨提示\n\n    $scope.goodsList = [];\n    $scope.productList = [];\n    $scope.serveMoneyList = [];\n    $scope.productMoneyList = [];\n    $scope.shippingFeeHintMoneyList = {};\n    $scope.storagedoId = \"\";\n    $scope.storeId = 2;\n    $scope.pageNum = '1';\n    $scope.pageSize = '10';\n    $scope.goodsName = '';\n    $scope.serveGoodsName = '';\n    $scope.trackingName = ''; // 运单名称\n\n    $scope.trackingNumber = ''; // 运单号\n\n    $scope.num = ''; // 数量\n\n    $scope.quantityObj = {}; // 批次号数据\n\n    $scope.downloadFlag = false; // 下载状态\n\n    $scope.downloadColor = false; // 下载颜色\n\n    $scope.selClass = false;\n    $scope.warehouse = [];\n    var bs = new Base64();\n    $scope.loginName = bs.decode(dsp.getCookie('loginName'));\n    console.log($scope.loginName, \"loginName=========\");\n    var serviceItem = {}; // 费用集合\n\n    var vip = $rootScope.userInfo.vip;\n    $scope.vipStuFlag = vip; //根据国家code 判断storeId\n\n    var countryCodeModal = {\n      CN: {\n        nameEn: 'cn',\n        name: 'China warehouse',\n        key: 1\n      },\n      US: {\n        nameEn: 'us',\n        name: 'US warehouse',\n        key: 2\n      },\n      TH: {\n        nameEn: 'th',\n        name: 'Thailand warehouse',\n        key: 3\n      },\n      DE: {\n        nameEn: 'de',\n        name: 'Germany warehouse',\n        key: 4\n      },\n      ID: {\n        nameEn: 'id',\n        name: 'Indonesia warehouse',\n        key: 5\n      }\n    };\n    /** 暂时隐藏深圳仓，德国仓\"，\"印尼仓\",“泰国仓 */\n\n    var hidewarehouseArr = ['08898c4735bf43068d5d677c1d217ab0', 'e18668c0-0b6b-4d07-837e-fe2150d9d9c9', 'f87a1c014e6c4bebbe13359467886e99'];\n\n    if (vip == '1') {\n      //vipFlag\n      $('.mycj-right-wrap').css('background', '#F0EDE7').addClass('vip');\n      $('.spzd-wrap').addClass('vip');\n      $('.shipping-wrap').addClass('vip');\n    } else {\n      $('.mycj-right-wrap').css('background', '#f2f3f5').removeClass('vip');\n      $('.spzd-wrap').removeClass('vip');\n      $('.shipping-wrap').removeClass('vip');\n    }\n\n    dsp.setRightMinHeight(); // 服务商品数据\n\n    function getGoods() {\n      $scope.goodsList = [];\n      var data = {\n        dbProductName: $scope.goodsName,\n        pageNo: $scope.pageNum,\n        pageSize: $scope.pageSize,\n        statuses: $scope.status\n      };\n      $rootScope.$on('cj/server/getServeProductList', function (_, bool) {\n        $scope.loading = bool;\n        if (bool) $scope.notDataFound = false;\n      });\n      dsp.postFun('cj/server/getServeProductList', data, function (res) {\n        $('.cj-load-wrap').css('min-height', '75vh');\n        console.log(res);\n\n        if (res.data.statusCode == 200) {\n          var result = res.data.result;\n\n          if (result.dPPointList.length > 0) {\n            $scope.goodsList = result.dPPointList;\n            $scope.totalNum = result.total; // if ($scope.totalPageNum > 0 && $scope.status != '2') {\n            //   for (let i = 0, len = $scope.goodsList.length; i < len; i++) {\n            //     try {\n            //       $scope.goodsList[i].customerImage = JSON.parse($scope.goodsList[i].customerImage);\n            //     } catch (error) {\n            //       console.log(error)\n            //     }\n            //   }\n            //   console.log($scope.goodsList)\n            // }\n\n            $scope.totalCounts = Math.ceil($scope.totalNum / $scope.pageSize);\n            $scope.$broadcast('page-data', {\n              pageNum: $scope.pageNum,\n              totalNum: $scope.totalCounts,\n              totalCounts: $scope.totalNum,\n              pageSize: $scope.pageSize\n            });\n          } else {\n            $scope.notDataFound = true;\n            $('.cj-load-wrap').css('min-height', $('.cj-nodata-pic').height() + 110);\n          }\n        }\n      });\n    }\n\n    ;\n    getGoods(); // 导航切换\n\n    $scope.navShow = function (status) {\n      $scope.pageNum = '1';\n      $scope.pageSize = '10';\n      $scope.status = status;\n      console.log($scope.status);\n      getGoods();\n    }; // 搜索服务商品列表\n\n\n    $scope.searchGoodsList = function () {\n      getGoods();\n    }; //查看图片\n\n\n    $scope.showImgsFun = function (imgs) {\n      $scope.itemImgsArr = imgs;\n      $scope.imgsFlag = true;\n    }; // 查看费用详情\n\n\n    $scope.lookFeeDeteils = function (item) {\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      mypost('cj/server/getDbServeProductMoney', {\n        dbProductId: item.dbProductId\n      }).then(function (res) {\n        msgLoading.hide();\n        $scope.shippingFeeShow = true;\n        console.log('查看费用详情', res);\n        $scope.productMoneyList = res; // console.log($scope.productMoneyList)\n        // for (let i = 0, len = res.retMoney.length; i < len; i++) {\n        //   if (res.retMoney[i].store_id == 3) {\n        //     $scope.isHavTaiGuoFlag = true;\n        //     break\n        //   } else {\n        //     $scope.isHavTaiGuoFlag = false;\n        //   }\n        // }\n      }).finally(function () {\n        msgLoading.hide();\n      });\n    }; // 关闭费用详情\n\n\n    $scope.cancelFeeDeteils = function () {\n      $scope.shippingFeeShow = false;\n    }; // 申请服务商品\n\n\n    $scope.productShow = function () {\n      $scope.goodsShow = true;\n    }; // 关闭服务商品\n\n\n    $scope.closeGoods = function () {\n      $scope.goodsShow = false;\n      $scope.serveGoodsName = '';\n      $scope.productList = [];\n    }; // 搜索申请服务商品\n\n\n    $scope.searchGoods = function () {\n      if (!$scope.serveGoodsName) {\n        layer.msg('Product Title is required');\n        return;\n      }\n\n      dsp.load();\n      mypost('cj/server/getDbProductList', {\n        name: $scope.serveGoodsName\n      }).then(function (res) {\n        console.log('searchGoods', res);\n        $scope.productList = res.filter(function (_ref2) {\n          var NAMEEN = _ref2.NAMEEN;\n          return NAMEEN.split(' ').every(function (str) {\n            return str.length < 30;\n          });\n        }); //过滤英文名 单词字符数 大于30的 记录 修复页面显示不正常\n      });\n    };\n\n    $scope.wareData = [];\n    $scope.currWare;\n    $scope.wareObj = {\n      isLoad: true\n    };\n\n    function getStore() {\n      dsp.postFun('storehouse/WarehousInfo/cjGetStorehouse', {\n        useStorageType: '1'\n      }, function (_ref3) {\n        var data = _ref3.data;\n\n        if (data.code == '200') {\n          $scope.wareObj.isLoad = false;\n          var list = data.data || [];\n          console.log('----------');\n          console.log(list);\n          /** 暂时隐藏深圳仓，德国仓\"，\"印尼仓\",“泰国仓” --start */\n\n          $scope.wareData = list.filter(function (item) {\n            return !item.storageNo2Name.includes('Zhi Fa') && hidewarehouseArr.indexOf(item.id) === -1;\n          });\n          /** 暂时隐藏深圳仓，德国仓\"，\"印尼仓\",“泰国仓” --end */\n          // $scope.wareData = list.filter(item=>{\n          //   if(!item.storageNo2Name.includes('Zhi Fa') && item.id !== \"08898c4735bf43068d5d677c1d217ab0\")\n          //   return item;\n          // });\n\n          $scope.currWare = $scope.wareData[0];\n        }\n      });\n    }\n\n    $scope.chanWare = function (item) {\n      $scope.currWare = item;\n    };\n\n    $scope.myMouseenter = function () {\n      $scope.isAddress = true;\n      if ($scope.wareData.length == 0) getStore();\n    };\n\n    $scope.myMouseleave = function () {\n      $scope.isAddress = false;\n    }; // 添加服务商品\n\n\n    $scope.addGoods = function (item) {\n      var data = {\n        dbProductId: item.id,\n        dbProductName: item.name,\n        dbProductNameen: item.NAMEEN,\n        dbImage: item.bigimg,\n        dbSku: item.sku\n      };\n      dsp.postFun('cj/server/addServeProduct', data, function (res) {\n        if (res.data.statusCode == '200') {\n          $scope.goodsShow = false;\n          $scope.serveGoodsName = '';\n          layer.msg('Added Successfully');\n          getGoods();\n        }\n      });\n    }; // 取消服务\n\n\n    $scope.cancelGoods = function (item) {\n      layer.confirm('Confirm to cancel?', {\n        title: false,\n        closeBtn: 0,\n        btnAlign: 'c',\n        skin: 'goods-class',\n        btn: ['Confirm', 'Cancel'] //按钮\n\n      }, function (index) {\n        layer.close(index);\n        dsp.postFun('cj/server/cancelServeProduct', {\n          id: item.id\n        }, function (res) {\n          if (res.data.statusCode == '200') {\n            layer.msg('Cancelled successfully');\n            getGoods();\n          }\n        });\n      }, function (index) {\n        layer.close(index);\n      });\n    };\n\n    function getWarehouseData() {\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      dsp.getWareList({\n        productType: 1,\n        successCallback: function successCallback(data) {\n          msgLoading.hide();\n          /* 暂时隐藏深圳仓，德国仓\"，\"印尼仓\",“泰国仓” --start */\n\n          $scope.warehouse = data.filter(function (item) {\n            return hidewarehouseArr.indexOf(item.id) === -1;\n          });\n          /* 暂时隐藏深圳仓，德国仓\"，\"印尼仓\",“泰国仓” --end */\n          // $scope.warehouse = data;\n\n          $timeout(function () {\n            $scope.storagedoId = \"\";\n            $scope.storeId = \"\";\n          }, 300);\n        }\n      });\n    }\n\n    $scope.addFwspWFun = function () {\n      fixed2Fun();\n    };\n\n    $scope.addFwspMFun = function () {// $scope.addFwspMoney = $scope.addFwspMoney.replace(/[^\\d]/g,'');\n    };\n\n    function fixed2Fun() {\n      $scope.addFwspWeight = $scope.addFwspWeight.replace(/[^\\d]/g, ''); // $scope.addFwspWeight = $scope.addFwspWeight.replace(/\\.{2,}/g,\".\"); //只保留第一个. 清除多余的\n      // $scope.addFwspWeight = $scope.addFwspWeight.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3');//只能输入两个小数\n    } // 添加订单和费用\n\n\n    $scope.addTracking = function (item) {\n      serviceItem = item;\n      $scope.trackingShow = true;\n      resetTracking(); //cost(item.dbProductId);\n\n      if ($scope.warehouse.length == 0) getWarehouseData();\n    };\n\n    $scope.addTrackingLink = function (item) {\n      console.log(item);\n      var outJson = {\n        dbProductNameen: item.dbProductNameen\n      };\n      dsp.load();\n      console.log($scope.storeId);\n      console.log($scope.storagedoId);\n      dsp.postFun('pojo/procurement/getServeProCodeImg', outJson, function (res) {\n        console.log(res);\n\n        if (res.status == '200' && res.data.batchUrl) {\n          var upJson = {\n            dbProductId: item.dbProductId,\n            dbProductName: item.dbProductName,\n            dbProductNameen: item.dbProductNameen,\n            dbServeProductId: item.id,\n            dbSku: item.dbSku,\n            dbImages: item.dbImage,\n            batchUrl: res.data.batchUrl,\n            batchNumber: res.data.batchNumber,\n            status: 1,\n            orderName: $scope.trackingName,\n            storeId: $scope.storeId,\n            storagedoId: $scope.storagedoId,\n            trackingNumber: $scope.trackingNumber,\n            num: $scope.num,\n            deliveryTime: $(\"#cj-stime\").val(),\n            isDownload: 1,\n            moneylist: []\n          };\n\n          var _iterator = _createForOfIteratorHelper(new Map($scope.serveMoneyList.map(function (item, i) {\n            return [i, item];\n          }))),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var _step$value = _slicedToArray(_step.value, 2),\n                  i = _step$value[0],\n                  _item = _step$value[1];\n\n              upJson.moneylist[i] = {\n                serverMoneyId: _item.serverMoneyId,\n                status: _item.status\n              };\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n\n          dsp.postFun('cj/server/insertServeOrder', upJson, function (data) {\n            console.log(data);\n\n            if (data.data.statusCode == 200) {\n              localStorage.setItem('fwStu', 'downBatch');\n              location.href = 'myCJ.html#/products-connection/waybill';\n            } else {\n              layer.msg(data.message);\n            }\n\n            dsp.closeLoad();\n          }, function (data) {\n            console.log(data);\n            dsp.closeLoad();\n            layer.msg('Unexpect Error.');\n          });\n        } else {\n          layer.msg('Batch Number Generate Failed');\n          dsp.closeLoad();\n        }\n      }, function (data) {\n        console.log(data);\n        dsp.closeLoad();\n      });\n      confirmTrackingflag = true;\n    }; // 国家筛选\n\n\n    $scope.stateChange = function () {\n      console.log($scope.storagedoId); //筛选的仓库id\n\n      console.log($scope.warehouse);\n\n      if (!$scope.storagedoId) {\n        $scope.storeId = \"\";\n        $scope.serveMoneyList = [];\n        return;\n      }\n\n      var countryCode = \"\";\n      $scope.warehouse.forEach(function (item) {\n        if (item.id === $scope.storagedoId) {\n          countryCode = item.countryCode;\n        }\n      });\n      $scope.storeId = countryCodeModal[countryCode] ? countryCodeModal[countryCode].key : 1;\n      cost(serviceItem.dbProductId, $scope.storeId);\n    }; // 批次号\n\n\n    $scope.quantityBlur = function () {\n      if ($scope.trackingNumber && $scope.num) {\n        var data = {\n          trackingNumber: $scope.trackingNumber,\n          num: $scope.num\n        };\n        $scope.quantityObj = {};\n        $scope.downloadColor = false;\n        $scope.downloadFlag = false;\n        dsp.postFun('pojo/procurement/getServeProCodeImg', data, function (res) {\n          if (res.status == '200') {\n            $scope.quantityObj = res.data;\n          }\n        });\n      }\n    }; // 单选框选中\n\n\n    $scope.radioClick = function (item, state) {\n      if (item.serverMoneyTypeId == 3 || item.serverMoneyTypeId == 2) {\n        item.status = state;\n      }\n    }; // 服务商品批次号下载\n\n\n    $scope.batchDownload = function () {\n      $scope.downloadFlag = true;\n      $scope.downloadColor = false;\n      if (!$scope.quantityObj.batchUrl) return;\n      download('https://' + $scope.quantityObj.batchUrl);\n    }; // 关闭订单\n\n\n    $scope.content = 'Confirm to cancel?';\n    $scope.showPopUps = false;\n\n    $scope.cancelTracking = function () {\n      $scope.showPopUps = true;\n    }; // 获取弹窗组件关闭按钮\n\n\n    $scope.$on('closePopUps', function (e, data) {\n      layer.close(2);\n      $scope.downloadFlag = false;\n      $scope.downloadColor = false;\n      $scope.showPopUps = data.showPopUps;\n    }); // 获取弹窗组件确定按钮\n\n    $scope.$on('confirmPopUps', function (e, data) {\n      layer.close(2);\n      $scope.trackingShow = false;\n      $scope.showPopUps = data.showPopUps;\n    }); // 服务商品确定新增订单\n\n    var confirmTrackingflag = true;\n\n    $scope.confirmTracking = function () {\n      if (!$scope.trackingName) {\n        layer.msg('Shipping Label Name is required');\n        return;\n      }\n\n      if (!$scope.storagedoId) {\n        layer.msg('Warehouse is required');\n        return;\n      }\n\n      if (!$scope.trackingNumber) {\n        layer.msg('Tracking number is required');\n        return;\n      }\n\n      if (!$scope.num) {\n        layer.msg('Quantity is required');\n        return;\n      }\n\n      if (!$(\"#cj-stime\").val()) {\n        layer.msg('Date is required');\n        return;\n      } // 必须先下载批次号\n      // if (!$scope.downloadFlag) {\n      //   $scope.downloadColor = true;\n      //   layer.msg('Please download the batch number first and then you can submit and move on to the next step', {\n      //     area: '450px',\n      //     time: 5000\n      //   });\n      //   return;\n      // }\n      // 防重\n\n\n      if (!confirmTrackingflag) return;\n      confirmTrackingflag = false;\n      $scope.addTrackingLink(serviceItem); // let data = {\n      //   orderName: $scope.trackingName,\n      //   dbServeProductId: serviceItem.id,\n      //   dbProductId: serviceItem.dbProductId,\n      //   dbProductName: serviceItem.dbProductName,\n      //   dbProductNameen: serviceItem.dbProductNameen,\n      //   dbImages: serviceItem.dbImage,\n      //   dbSku: serviceItem.dbSku,\n      //   status: 1,\n      //   storeId: $scope.storeId,\n      //   storagedoId: $scope.storagedoId.id,\n      //   trackingNumber: $scope.trackingNumber,\n      //   num: $scope.num,\n      //   deliveryTime: $(\"#cj-stime\").val(),\n      //   isDownload: 1,\n      //   batchUrl: $scope.quantityObj.batchUrl,\n      //   batchNumber: $scope.quantityObj.batchNumber,\n      //   moneylist: []\n      // }\n      // for (let [i, item] of new Map($scope.serveMoneyList.map((item, i) => [i, item]))) {\n      //   data.moneylist[i] = {\n      //     serverMoneyId: item.serverMoneyId,\n      //     status: item.status\n      //   }\n      // }\n      // dsp.postFun('cj/server/insertServeOrder', data, (res) => {\n      //   if (res.data.statusCode == '200') {\n      //     $scope.trackingShow = false;\n      //     confirmTrackingflag = true;\n      //     $scope.shippingFeeHintShow = true;\n      //     getShippingFeeHint(serviceItem.dbProductId, res.data.result);\n      //   }\n      // });\n    }; // 温馨提示费用\n\n\n    function getShippingFeeHint(dbProductId, resultId) {\n      $scope.shippingFeeHintMoneyList = {};\n      var data = {\n        dbProductId: dbProductId,\n        storeId: $scope.storeId,\n        dbServeOrderId: resultId\n      };\n      dsp.postFun('cj/server/getDbServeOrderMoney', data, function (res) {\n        if (res.data.statusCode == '200') {\n          $scope.shippingFeeHintMoneyList = res.data.result;\n\n          var _iterator2 = _createForOfIteratorHelper($scope.shippingFeeHintMoneyList.moneyList),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var item = _step2.value;\n\n              if (item.id == 7) {\n                $scope.shippingFeeHintMoneyList.moneys = item.moneys;\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n\n        console.log($scope.shippingFeeHintMoneyList);\n      });\n    }\n\n    ; // 运单费用温馨提示\n\n    $scope.cancelShippingFeeHint = function () {\n      $scope.shippingFeeHintShow = false;\n      layer.msg('Added successfully');\n      getGoods();\n    }; // 费用数据\n\n\n    function cost(dbProductId) {\n      var storeType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n      var data = {\n        dbProductId: dbProductId,\n        storeType: parseInt(storeType)\n      };\n      $scope.serveMoneyList = [];\n      dsp.postFun('cj/server/getDbServeMoneyList', data, function (res) {\n        if (res.data.statusCode == '200') {\n          var _res$data$result = res.data.result,\n              moneyList = _res$data$result.moneyList,\n              retentionList = _res$data$result.retentionList;\n          $scope.serveMoneyList = moneyList;\n          $scope.overtimeDays = retentionList[0].days;\n\n          var _iterator3 = _createForOfIteratorHelper($scope.serveMoneyList),\n              _step3;\n\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var item = _step3.value;\n              item.status = '1';\n              item.flag = false;\n\n              if (item.serverMoneyTypeId == 3 || item.serverMoneyTypeId == 2) {\n                item.flag = true;\n              }\n\n              if (item.itemNameen == \"Overtime Fee\") {\n                $scope.overtimeFee = item.moneys;\n              }\n            }\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n        }\n      });\n    }\n\n    ; // 重置\n\n    function resetTracking() {\n      $scope.storagedoId = \"\";\n      $scope.storeId = \"\";\n      $scope.trackingName = ''; // 运单名称\n\n      $scope.trackingNumber = ''; // 运单号\n\n      $scope.num = ''; // 数量\n\n      $scope.quantityObj = {}; // 批次号数据\n\n      $scope.downloadFlag = false; // 下载状态\n\n      $scope.downloadColor = false; // 下载颜色\n\n      $scope.serveMoneyList = []; // 单选项\n\n      $(\"#cj-stime\").val(''); // 时间\n    }\n\n    ; //分页\n\n    $scope.$on('pagedata-fa', function (d, data) {\n      console.log(data);\n      $scope.pageNum = data.pageNum;\n      $scope.pageSize = data.pageSize;\n      getGoods();\n    });\n    var addOneFlag = true;\n\n    $scope.cancelApplyFun = function () {\n      $scope.goodsShow = false;\n      addOneFlag = true;\n    };\n\n    $scope.confirmApplyFun = function () {\n      console.log($scope.applyNoteMes);\n      var data = {\n        customerMessage: $scope.applyNoteMes,\n        customerImage: $scope.imgOssArr,\n        weight: $scope.addFwspWeight,\n        referencePrice: $scope.addFwspMoney\n      };\n      data.customerImage = JSON.stringify(data.customerImage);\n      console.log(data);\n\n      if (!$scope.applyNoteMes) {\n        layer.msg('Please leave messages to CJ.');\n        return;\n      }\n\n      if (!addOneFlag) return;\n      addOneFlag = false;\n      dsp.postFun('cj/server/addServeProduct', data, function (data) {\n        addOneFlag = true;\n\n        if (data.data.statusCode == '200') {\n          $scope.goodsShow = false;\n          $scope.imgArr = [];\n          $scope.imgOssArr = [];\n          $scope.applyNoteMes = '';\n          layer.msg('Added Successfully');\n          getGoods();\n        }\n      }, function (data) {\n        console.log(data);\n        addOneFlag = true;\n      }, {\n        layer: true\n      });\n    }; // 上传图片\n    //点击上传的图片显示大图\n\n\n    $scope.viewBigImg = function (item) {\n      $scope.viewImgFlag = true;\n      $scope.bigImgSrc = item;\n      console.log(item);\n    };\n\n    $scope.closePreImg = function () {\n      $scope.viewImgFlag = false;\n    };\n\n    $scope.imgArr = []; // 读取本地地址----速度快\n\n    $scope.imgOssArr = []; // 需要传给后台的线上地址\n\n    var loadList = {\n      img: ['png', 'jpg', 'jpeg', 'gif', \"PNG\", \"JPG\", \"JPEG\", \"GIF\"]\n    };\n\n    $scope.upLoadImg4 = function (files) {\n      var file = files[0];\n      var fileName = file.name.substring(file.name.lastIndexOf('.') + 1);\n\n      if (loadList.img.indexOf(fileName) == -1) {\n        layer.msg('Images format error');\n        return;\n      }\n\n      if ($scope.imgArr.length >= 8) {\n        layer.msg('Upload eight images at most');\n        return;\n      }\n\n      dsp.ossUploadFile(files, function (data) {\n        console.log(data);\n\n        if (data.code == 0) {\n          layer.msg('Images Upload Failed');\n          return;\n        }\n\n        var result = data.succssLinks;\n\n        for (var j = 0; j < result.length; j++) {\n          var srcList = result[j].split('.');\n\n          var _fileName = srcList[srcList.length - 1].toLowerCase();\n\n          if (_fileName == 'png' || _fileName == 'jpg' || _fileName == 'jpeg' || _fileName == 'gif') {\n            $scope.imgArr.push(URL.createObjectURL(files[j]));\n            $scope.imgOssArr.push(data.succssLinks[j]);\n          }\n        }\n\n        if ($scope.imgArr && $scope.imgArr.length >= 8) {\n          $scope.hideUpImgFlag = true;\n        }\n\n        $('.upload_file').val('');\n        $scope.$apply();\n      });\n    }; // 删除上传的图片\n\n\n    $scope.delImg = function (index, event) {\n      event.stopPropagation();\n      $scope.imgArr.splice(index, 1);\n      $scope.imgOssArr.splice(index, 1);\n\n      if ($scope.imgArr.length < 8) {\n        $scope.hideUpImgFlag = false;\n      }\n    };\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovc2VydmljZS1wcm9kdWN0L3Byb2R1Y3RzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3NyYy9wYWdlcy9teWNqL3NlcnZpY2UtcHJvZHVjdC9wcm9kdWN0cy5qcz9kZjQxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBzZXJ2aWNlUHJvZHVjdFByb2R1Y3RzRmFjdG9yeShhbmd1bGFyKSB7XHJcbiAgY29uc3QgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3NlcnZpY2UtcHJvZHVjdC1wcm9kdWN0cy5tb2R1bGUnLCBbXSk7XHJcblxyXG4gIGFwcC5jb250cm9sbGVyKCdzZXJ2aWNlLXByb2R1Y3QtcHJvZHVjdHMuY3RybCcsIFsnJHNjb3BlJywgJyRyb290U2NvcGUnLCAnZHNwJywgJyR0aW1lb3V0JywgJyRxJyxcclxuICAgIGZ1bmN0aW9uICgkc2NvcGUsICRyb290U2NvcGUsIGRzcCwgJHRpbWVvdXQsICRxKSB7XHJcbiAgICAgIGZ1bmN0aW9uIG15cG9zdCh1cmwsIHBhcmFtcykgey8vMjAxOS03LTTlsIHoo4Vwb3N05pa55rOVXHJcbiAgICAgICAgcmV0dXJuICRxKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgIGRzcC5wb3N0RnVuKHVybCwgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSwgZnVuY3Rpb24gKHsgZGF0YSB9KSB7XHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcmVzdWx0LCBzdGF0dXNDb2RlLCBtZXNzYWdlIH0gPSBkYXRhO1xyXG4gICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSAhPSAyMDApIHtcclxuICAgICAgICAgICAgICByZWplY3QoZGF0YSlcclxuICAgICAgICAgICAgICByZXR1cm4gbXlNc2cobWVzc2FnZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdClcclxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2VyckhhbmRsZSAgLS0tPiAgJywgZXJyKVxyXG4gICAgICAgICAgICByZWplY3QoZXJyKVxyXG4gICAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpO1xyXG4gICAgICAgICAgICAvLyBsYXllci5tc2coJ+acjeWKoeWZqOmUmeivrycpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnN0YXR1cyA9ICcyJzsgICAgICAgICAgICAgIC8vIDAg5o+Q5Lqk5a6h5qC4IDEg5a6h5qC45LitICAyICDlrqHmoLjpgJrov4dcclxuICAgICAgJHNjb3BlLmdvb2RzU2hvdyA9IGZhbHNlOyAgICAgICAgIC8vIOeUs+ivt+acjeWKoeWVhuWTgVxyXG4gICAgICAkc2NvcGUudHJhY2tpbmdTaG93ID0gZmFsc2U7ICAgICAgLy8g5re75YqgL+S/ruaUuei/kOWNlVxyXG4gICAgICAkc2NvcGUuc2hpcHBpbmdGZWVTaG93ID0gZmFsc2U7ICAgLy8g6LS555So6K+m5oOFXHJcbiAgICAgICRzY29wZS5zaGlwcGluZ0ZlZUhpbnRTaG93ID0gZmFsc2U7IC8vIOi0ueeUqOivpuaDhea4qemmqOaPkOekulxyXG4gICAgICAkc2NvcGUuZ29vZHNMaXN0ID0gW107XHJcbiAgICAgICRzY29wZS5wcm9kdWN0TGlzdCA9IFtdO1xyXG4gICAgICAkc2NvcGUuc2VydmVNb25leUxpc3QgPSBbXTtcclxuICAgICAgJHNjb3BlLnByb2R1Y3RNb25leUxpc3QgPSBbXTtcclxuICAgICAgJHNjb3BlLnNoaXBwaW5nRmVlSGludE1vbmV5TGlzdCA9IHt9O1xyXG4gICAgICAkc2NvcGUuc3RvcmFnZWRvSWQgPVwiXCI7XHJcbiAgICAgICRzY29wZS5zdG9yZUlkID0gMjtcclxuICAgICAgJHNjb3BlLnBhZ2VOdW0gPSAnMSc7XHJcbiAgICAgICRzY29wZS5wYWdlU2l6ZSA9ICcxMCc7XHJcbiAgICAgICRzY29wZS5nb29kc05hbWUgPSAnJztcclxuICAgICAgJHNjb3BlLnNlcnZlR29vZHNOYW1lID0gJyc7XHJcbiAgICAgICRzY29wZS50cmFja2luZ05hbWUgPSAnJzsgICAgICAgIC8vIOi/kOWNleWQjeensFxyXG4gICAgICAkc2NvcGUudHJhY2tpbmdOdW1iZXIgPSAnJzsgICAgICAvLyDov5DljZXlj7dcclxuICAgICAgJHNjb3BlLm51bSA9ICcnOyAgICAgICAgICAgICAgICAgLy8g5pWw6YePXHJcbiAgICAgICRzY29wZS5xdWFudGl0eU9iaiA9IHt9OyAgICAgICAgIC8vIOaJueasoeWPt+aVsOaNrlxyXG4gICAgICAkc2NvcGUuZG93bmxvYWRGbGFnID0gZmFsc2U7ICAgICAvLyDkuIvovb3nirbmgIFcclxuICAgICAgJHNjb3BlLmRvd25sb2FkQ29sb3IgPSBmYWxzZTsgICAgLy8g5LiL6L296aKc6ImyXHJcbiAgICAgICRzY29wZS5zZWxDbGFzcyA9IGZhbHNlO1xyXG4gICAgICAkc2NvcGUud2FyZWhvdXNlID0gW107XHJcbiAgICAgIGxldCBicyA9IG5ldyBCYXNlNjQoKTtcclxuICAgICAgJHNjb3BlLmxvZ2luTmFtZSA9IGJzLmRlY29kZShkc3AuZ2V0Q29va2llKCdsb2dpbk5hbWUnKSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5sb2dpbk5hbWUsXCJsb2dpbk5hbWU9PT09PT09PT1cIilcclxuXHJcbiAgICAgIHZhciBzZXJ2aWNlSXRlbSA9IHt9OyAgICAgICAgICAgIC8vIOi0ueeUqOmbhuWQiFxyXG4gICAgICBsZXQgdmlwID0gJHJvb3RTY29wZS51c2VySW5mby52aXA7XHJcbiAgICAgICRzY29wZS52aXBTdHVGbGFnID0gdmlwO1xyXG4gICAgICAvL+agueaNruWbveWutmNvZGUg5Yik5patc3RvcmVJZFxyXG4gICAgICBjb25zdCBjb3VudHJ5Q29kZU1vZGFsID0ge1xyXG4gICAgICAgIENOOiB7IG5hbWVFbjogJ2NuJywgbmFtZTogJ0NoaW5hIHdhcmVob3VzZScsIGtleTogMSB9LFxyXG4gICAgICAgIFVTOiB7bmFtZUVuOiAndXMnLCBuYW1lOiAnVVMgd2FyZWhvdXNlJywga2V5OiAyIH0sXHJcbiAgICAgICAgVEg6IHtuYW1lRW46ICd0aCcsIG5hbWU6ICdUaGFpbGFuZCB3YXJlaG91c2UnLCBrZXk6IDMgfSxcclxuICAgICAgICBERToge25hbWVFbjogJ2RlJywgbmFtZTogJ0dlcm1hbnkgd2FyZWhvdXNlJywga2V5OiA0IH0sXHJcbiAgICAgICAgSUQ6IHtuYW1lRW46ICdpZCcsIG5hbWU6ICdJbmRvbmVzaWEgd2FyZWhvdXNlJywga2V5OiA1IH0sXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qKiDmmoLml7bpmpDol4/mt7HlnLPku5PvvIzlvrflm73ku5NcIu+8jFwi5Y2w5bC85LuTXCIs4oCc5rOw5Zu95LuTICovXHJcbiAgICAgIGNvbnN0IGhpZGV3YXJlaG91c2VBcnIgPSBbJzA4ODk4YzQ3MzViZjQzMDY4ZDVkNjc3YzFkMjE3YWIwJywnZTE4NjY4YzAtMGI2Yi00ZDA3LTgzN2UtZmUyMTUwZDlkOWM5JywnZjg3YTFjMDE0ZTZjNGJlYmJlMTMzNTk0Njc4ODZlOTknXTtcclxuXHJcbiAgICAgIGlmICh2aXAgPT0gJzEnKSB7Ly92aXBGbGFnXHJcbiAgICAgICAgJCgnLm15Y2otcmlnaHQtd3JhcCcpLmNzcygnYmFja2dyb3VuZCcsICcjRjBFREU3JykuYWRkQ2xhc3MoJ3ZpcCcpO1xyXG4gICAgICAgICQoJy5zcHpkLXdyYXAnKS5hZGRDbGFzcygndmlwJyk7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nLXdyYXAnKS5hZGRDbGFzcygndmlwJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnLm15Y2otcmlnaHQtd3JhcCcpLmNzcygnYmFja2dyb3VuZCcsICcjZjJmM2Y1JykucmVtb3ZlQ2xhc3MoJ3ZpcCcpO1xyXG4gICAgICAgICQoJy5zcHpkLXdyYXAnKS5yZW1vdmVDbGFzcygndmlwJyk7XHJcbiAgICAgICAgJCgnLnNoaXBwaW5nLXdyYXAnKS5yZW1vdmVDbGFzcygndmlwJyk7XHJcbiAgICAgIH1cclxuICAgICAgZHNwLnNldFJpZ2h0TWluSGVpZ2h0KCk7XHJcbiAgICAgIC8vIOacjeWKoeWVhuWTgeaVsOaNrlxyXG4gICAgICBmdW5jdGlvbiBnZXRHb29kcygpIHtcclxuICAgICAgICAkc2NvcGUuZ29vZHNMaXN0ID0gW107XHJcbiAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICBkYlByb2R1Y3ROYW1lOiAkc2NvcGUuZ29vZHNOYW1lLFxyXG4gICAgICAgICAgcGFnZU5vOiAkc2NvcGUucGFnZU51bSxcclxuICAgICAgICAgIHBhZ2VTaXplOiAkc2NvcGUucGFnZVNpemUsXHJcbiAgICAgICAgICBzdGF0dXNlczogJHNjb3BlLnN0YXR1c1xyXG4gICAgICAgIH1cclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignY2ovc2VydmVyL2dldFNlcnZlUHJvZHVjdExpc3QnLCAoXywgYm9vbCkgPT4ge1xyXG4gICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBib29sO1xyXG4gICAgICAgICAgaWYgKGJvb2wpICRzY29wZS5ub3REYXRhRm91bmQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkc3AucG9zdEZ1bignY2ovc2VydmVyL2dldFNlcnZlUHJvZHVjdExpc3QnLCBkYXRhLCAocmVzKSA9PiB7XHJcbiAgICAgICAgICAkKCcuY2otbG9hZC13cmFwJykuY3NzKCdtaW4taGVpZ2h0JywgJzc1dmgnKVxyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKVxyXG4gICAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzQ29kZSA9PTIwMCl7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlcy5kYXRhLnJlc3VsdFxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LmRQUG9pbnRMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZ29vZHNMaXN0ID0gcmVzdWx0LmRQUG9pbnRMaXN0O1xyXG4gICAgICAgICAgICAgICRzY29wZS50b3RhbE51bSA9IHJlc3VsdC50b3RhbDtcclxuICAgICAgICAgICAgICAvLyBpZiAoJHNjb3BlLnRvdGFsUGFnZU51bSA+IDAgJiYgJHNjb3BlLnN0YXR1cyAhPSAnMicpIHtcclxuICAgICAgICAgICAgICAvLyAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSAkc2NvcGUuZ29vZHNMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgLy8gICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgLy8gICAgICAgJHNjb3BlLmdvb2RzTGlzdFtpXS5jdXN0b21lckltYWdlID0gSlNPTi5wYXJzZSgkc2NvcGUuZ29vZHNMaXN0W2ldLmN1c3RvbWVySW1hZ2UpO1xyXG4gICAgICAgICAgICAgIC8vICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gICB9XHJcbiAgICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZygkc2NvcGUuZ29vZHNMaXN0KVxyXG4gICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAkc2NvcGUudG90YWxDb3VudHMgPSBNYXRoLmNlaWwoJHNjb3BlLnRvdGFsTnVtIC8gJHNjb3BlLnBhZ2VTaXplKTtcclxuICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgncGFnZS1kYXRhJywge1xyXG4gICAgICAgICAgICAgICAgcGFnZU51bTogJHNjb3BlLnBhZ2VOdW0sXHJcbiAgICAgICAgICAgICAgICB0b3RhbE51bTogJHNjb3BlLnRvdGFsQ291bnRzLFxyXG4gICAgICAgICAgICAgICAgdG90YWxDb3VudHM6ICRzY29wZS50b3RhbE51bSxcclxuICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAkc2NvcGUucGFnZVNpemUsXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm5vdERhdGFGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgJCgnLmNqLWxvYWQtd3JhcCcpLmNzcygnbWluLWhlaWdodCcsICQoJy5jai1ub2RhdGEtcGljJykuaGVpZ2h0KCkgKyAxMTApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH07XHJcbiAgICAgIGdldEdvb2RzKCk7XHJcbiAgICAgIC8vIOWvvOiIquWIh+aNolxyXG4gICAgICAkc2NvcGUubmF2U2hvdyA9IChzdGF0dXMpID0+IHtcclxuICAgICAgICAkc2NvcGUucGFnZU51bSA9ICcxJztcclxuICAgICAgICAkc2NvcGUucGFnZVNpemUgPSAnMTAnO1xyXG4gICAgICAgICRzY29wZS5zdGF0dXMgPSBzdGF0dXM7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnN0YXR1cylcclxuICAgICAgICBnZXRHb29kcygpO1xyXG4gICAgICB9O1xyXG4gICAgICAvLyDmkJzntKLmnI3liqHllYblk4HliJfooahcclxuICAgICAgJHNjb3BlLnNlYXJjaEdvb2RzTGlzdCA9ICgpID0+IHtcclxuICAgICAgICBnZXRHb29kcygpO1xyXG4gICAgICB9O1xyXG4gICAgICAvL+afpeeci+WbvueJh1xyXG4gICAgICAkc2NvcGUuc2hvd0ltZ3NGdW4gPSBmdW5jdGlvbiAoaW1ncykge1xyXG4gICAgICAgICRzY29wZS5pdGVtSW1nc0FyciA9IGltZ3M7XHJcbiAgICAgICAgJHNjb3BlLmltZ3NGbGFnID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICAvLyDmn6XnnIvotLnnlKjor6bmg4VcclxuICAgICAgJHNjb3BlLmxvb2tGZWVEZXRlaWxzID0gKGl0ZW0pID0+IHtcclxuXHJcbsKgwqDCoMKgwqDCoMKgwqBjb25zdMKgbXNnTG9hZGluZ8KgPcKgY2pNZXNzYWdlLmxvYWRpbmcoe8KgaXNGaXhlZDogdHJ1ZcKgfSlcclxuICAgICAgICBteXBvc3QoJ2NqL3NlcnZlci9nZXREYlNlcnZlUHJvZHVjdE1vbmV5JywgeyBkYlByb2R1Y3RJZDogaXRlbS5kYlByb2R1Y3RJZCB9KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgICRzY29wZS5zaGlwcGluZ0ZlZVNob3cgPSB0cnVlO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ+afpeeci+i0ueeUqOivpuaDhScsIHJlcylcclxuICAgICAgICAgICRzY29wZS5wcm9kdWN0TW9uZXlMaXN0ID0gcmVzO1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJHNjb3BlLnByb2R1Y3RNb25leUxpc3QpXHJcbiAgICAgICAgICAvLyBmb3IgKGxldCBpID0gMCwgbGVuID0gcmVzLnJldE1vbmV5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAvLyAgIGlmIChyZXMucmV0TW9uZXlbaV0uc3RvcmVfaWQgPT0gMykge1xyXG4gICAgICAgICAgLy8gICAgICRzY29wZS5pc0hhdlRhaUd1b0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgLy8gICAgIGJyZWFrXHJcbiAgICAgICAgICAvLyAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyAgICAgJHNjb3BlLmlzSGF2VGFpR3VvRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgLy8gICB9XHJcbiAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9O1xyXG4gICAgICAvLyDlhbPpl63otLnnlKjor6bmg4VcclxuICAgICAgJHNjb3BlLmNhbmNlbEZlZURldGVpbHMgPSAoKSA9PiB7XHJcbiAgICAgICAgJHNjb3BlLnNoaXBwaW5nRmVlU2hvdyA9IGZhbHNlO1xyXG4gICAgICB9O1xyXG4gICAgICAvLyDnlLPor7fmnI3liqHllYblk4FcclxuICAgICAgJHNjb3BlLnByb2R1Y3RTaG93ID0gKCkgPT4ge1xyXG4gICAgICAgICRzY29wZS5nb29kc1Nob3cgPSB0cnVlO1xyXG4gICAgICB9O1xyXG4gICAgICAvLyDlhbPpl63mnI3liqHllYblk4FcclxuICAgICAgJHNjb3BlLmNsb3NlR29vZHMgPSAoKSA9PiB7XHJcbiAgICAgICAgJHNjb3BlLmdvb2RzU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5zZXJ2ZUdvb2RzTmFtZSA9ICcnO1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0TGlzdCA9IFtdO1xyXG4gICAgICB9O1xyXG4gICAgICAvLyDmkJzntKLnlLPor7fmnI3liqHllYblk4FcclxuICAgICAgJHNjb3BlLnNlYXJjaEdvb2RzID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghJHNjb3BlLnNlcnZlR29vZHNOYW1lKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1Byb2R1Y3QgVGl0bGUgaXMgcmVxdWlyZWQnKVxyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRzcC5sb2FkKClcclxuICAgICAgICBteXBvc3QoJ2NqL3NlcnZlci9nZXREYlByb2R1Y3RMaXN0JywgeyBuYW1lOiAkc2NvcGUuc2VydmVHb29kc05hbWUgfSkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ3NlYXJjaEdvb2RzJywgcmVzKVxyXG4gICAgICAgICAgJHNjb3BlLnByb2R1Y3RMaXN0ID0gcmVzLmZpbHRlcigoeyBOQU1FRU4gfSkgPT4gTkFNRUVOLnNwbGl0KCcgJykuZXZlcnkoc3RyID0+IHN0ci5sZW5ndGggPCAzMCkpOy8v6L+H5ruk6Iux5paH5ZCNIOWNleivjeWtl+espuaVsCDlpKfkuo4zMOeahCDorrDlvZUg5L+u5aSN6aG16Z2i5pi+56S65LiN5q2j5bi4XHJcbiAgICAgICAgfSlcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgICRzY29wZS53YXJlRGF0YSA9IFtdXHJcbiAgICAgICRzY29wZS5jdXJyV2FyZTtcclxuICAgICAgJHNjb3BlLndhcmVPYmogPXtcclxuICAgICAgICBpc0xvYWQ6IHRydWVcclxuICAgICAgfVxyXG4gICAgICBmdW5jdGlvbiBnZXRTdG9yZSgpe1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdzdG9yZWhvdXNlL1dhcmVob3VzSW5mby9jakdldFN0b3JlaG91c2UnLCB7dXNlU3RvcmFnZVR5cGU6JzEnfSwgKHtkYXRhfSkgPT4ge1xyXG4gICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAnMjAwJykge1xyXG4gICAgICAgICAgICAkc2NvcGUud2FyZU9iai5pc0xvYWQ9ZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBsaXN0ID0gZGF0YS5kYXRhfHxbXTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0nKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhsaXN0KVxyXG4gICAgICAgICAgICAvKiog5pqC5pe26ZqQ6JeP5rex5Zyz5LuT77yM5b635Zu95LuTXCLvvIxcIuWNsOWwvOS7k1wiLOKAnOazsOWbveS7k+KAnSAtLXN0YXJ0ICovXHJcblxyXG4gICAgICAgICAgICAkc2NvcGUud2FyZURhdGEgPSBsaXN0LmZpbHRlcihpdGVtPT57XHJcbiAgICAgICAgICAgICAgcmV0dXJuICFpdGVtLnN0b3JhZ2VObzJOYW1lLmluY2x1ZGVzKCdaaGkgRmEnKSAmJiBoaWRld2FyZWhvdXNlQXJyLmluZGV4T2YoaXRlbS5pZCkgPT09IC0xXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgLyoqIOaaguaXtumakOiXj+a3seWcs+S7k++8jOW+t+WbveS7k1wi77yMXCLljbDlsLzku5NcIizigJzms7Dlm73ku5PigJ0gLS1lbmQgKi9cclxuXHJcbiAgICAgICAgICAgIC8vICRzY29wZS53YXJlRGF0YSA9IGxpc3QuZmlsdGVyKGl0ZW09PntcclxuICAgICAgICAgICAgLy8gICBpZighaXRlbS5zdG9yYWdlTm8yTmFtZS5pbmNsdWRlcygnWmhpIEZhJykgJiYgaXRlbS5pZCAhPT0gXCIwODg5OGM0NzM1YmY0MzA2OGQ1ZDY3N2MxZDIxN2FiMFwiKVxyXG4gICAgICAgICAgICAvLyAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgJHNjb3BlLmN1cnJXYXJlID0gJHNjb3BlLndhcmVEYXRhWzBdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmNoYW5XYXJlID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAkc2NvcGUuY3VycldhcmUgPSBpdGVtO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5teU1vdXNlZW50ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLmlzQWRkcmVzcyA9IHRydWU7XHJcbiAgICAgICAgaWYoJHNjb3BlLndhcmVEYXRhLmxlbmd0aD09MCkgZ2V0U3RvcmUoKTtcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUubXlNb3VzZWxlYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5pc0FkZHJlc3MgPSBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIC8vIOa3u+WKoOacjeWKoeWVhuWTgVxyXG4gICAgICAkc2NvcGUuYWRkR29vZHMgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgZGJQcm9kdWN0SWQ6IGl0ZW0uaWQsXHJcbiAgICAgICAgICBkYlByb2R1Y3ROYW1lOiBpdGVtLm5hbWUsXHJcbiAgICAgICAgICBkYlByb2R1Y3ROYW1lZW46IGl0ZW0uTkFNRUVOLFxyXG4gICAgICAgICAgZGJJbWFnZTogaXRlbS5iaWdpbWcsXHJcbiAgICAgICAgICBkYlNrdTogaXRlbS5za3VcclxuICAgICAgICB9XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL3NlcnZlci9hZGRTZXJ2ZVByb2R1Y3QnLCBkYXRhLCAocmVzKSA9PiB7XHJcbiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PSAnMjAwJykge1xyXG4gICAgICAgICAgICAkc2NvcGUuZ29vZHNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5zZXJ2ZUdvb2RzTmFtZSA9ICcnO1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0FkZGVkIFN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgICBnZXRHb29kcygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH07XHJcbiAgICAgIC8vIOWPlua2iOacjeWKoVxyXG4gICAgICAkc2NvcGUuY2FuY2VsR29vZHMgPSAoaXRlbSkgPT4ge1xyXG4gICAgICAgIGxheWVyLmNvbmZpcm0oJ0NvbmZpcm0gdG8gY2FuY2VsPycsIHtcclxuICAgICAgICAgIHRpdGxlOiBmYWxzZSxcclxuICAgICAgICAgIGNsb3NlQnRuOiAwLFxyXG4gICAgICAgICAgYnRuQWxpZ246ICdjJyxcclxuICAgICAgICAgIHNraW46ICdnb29kcy1jbGFzcycsXHJcbiAgICAgICAgICBidG46IFsnQ29uZmlybScsICdDYW5jZWwnXSAvL+aMiemSrlxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgbGF5ZXIuY2xvc2UoaW5kZXgpO1xyXG4gICAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL3NlcnZlci9jYW5jZWxTZXJ2ZVByb2R1Y3QnLCB7IGlkOiBpdGVtLmlkIH0sIChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT0gJzIwMCcpIHtcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ0NhbmNlbGxlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgICAgICBnZXRHb29kcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LCBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgIGxheWVyLmNsb3NlKGluZGV4KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgZnVuY3Rpb24gZ2V0V2FyZWhvdXNlRGF0YSgpIHtcclxuwqDCoMKgwqDCoMKgwqDCoGNvbnN0wqBtc2dMb2FkaW5nwqA9wqBjak1lc3NhZ2UubG9hZGluZyh7wqBpc0ZpeGVkOiB0cnVlwqB9KVxyXG4gICAgICAgIGRzcC5nZXRXYXJlTGlzdCh7XHJcbiAgICAgICAgICBwcm9kdWN0VHlwZToxLFxyXG4gICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrOmZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgIC8qIOaaguaXtumakOiXj+a3seWcs+S7k++8jOW+t+WbveS7k1wi77yMXCLljbDlsLzku5NcIizigJzms7Dlm73ku5PigJ0gLS1zdGFydCAqL1xyXG4gICAgICAgICAgICAkc2NvcGUud2FyZWhvdXNlID0gZGF0YS5maWx0ZXIoKGl0ZW0pPT4ge1xyXG4gICAgICAgICAgICAgcmV0dXJuICBoaWRld2FyZWhvdXNlQXJyLmluZGV4T2YoaXRlbS5pZCkgPT09IC0xXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgLyog5pqC5pe26ZqQ6JeP5rex5Zyz5LuT77yM5b635Zu95LuTXCLvvIxcIuWNsOWwvOS7k1wiLOKAnOazsOWbveS7k+KAnSAtLWVuZCAqL1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vICRzY29wZS53YXJlaG91c2UgPSBkYXRhO1xyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICRzY29wZS5zdG9yYWdlZG9JZCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnN0b3JlSWQgPSBcIlwiXHJcbiAgICAgICAgICAgIH0sMzAwKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5hZGRGd3NwV0Z1biA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgZml4ZWQyRnVuKClcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuYWRkRndzcE1GdW4gPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vICRzY29wZS5hZGRGd3NwTW9uZXkgPSAkc2NvcGUuYWRkRndzcE1vbmV5LnJlcGxhY2UoL1teXFxkXS9nLCcnKTtcclxuICAgICAgfVxyXG4gICAgICBmdW5jdGlvbiBmaXhlZDJGdW4oKXtcclxuICAgICAgICAkc2NvcGUuYWRkRndzcFdlaWdodCA9ICRzY29wZS5hZGRGd3NwV2VpZ2h0LnJlcGxhY2UoL1teXFxkXS9nLCcnKTtcclxuICAgICAgICAvLyAkc2NvcGUuYWRkRndzcFdlaWdodCA9ICRzY29wZS5hZGRGd3NwV2VpZ2h0LnJlcGxhY2UoL1xcLnsyLH0vZyxcIi5cIik7IC8v5Y+q5L+d55WZ56ys5LiA5LiqLiDmuIXpmaTlpJrkvZnnmoRcclxuICAgICAgICAvLyAkc2NvcGUuYWRkRndzcFdlaWdodCA9ICRzY29wZS5hZGRGd3NwV2VpZ2h0LnJlcGxhY2UoL14oXFwtKSooXFxkKylcXC4oXFxkXFxkKS4qJC8sJyQxJDIuJDMnKTsvL+WPquiDvei+k+WFpeS4pOS4quWwj+aVsFxyXG4gICAgICB9XHJcbiAgICAgIC8vIOa3u+WKoOiuouWNleWSjOi0ueeUqFxyXG4gICAgICAkc2NvcGUuYWRkVHJhY2tpbmcgPSAoaXRlbSkgPT4ge1xyXG4gICAgICAgIHNlcnZpY2VJdGVtID0gaXRlbTtcclxuICAgICAgICAkc2NvcGUudHJhY2tpbmdTaG93ID0gdHJ1ZTtcclxuICAgICAgICByZXNldFRyYWNraW5nKCk7XHJcbiAgICAgICAgLy9jb3N0KGl0ZW0uZGJQcm9kdWN0SWQpO1xyXG4gICAgICAgIGlmKCRzY29wZS53YXJlaG91c2UubGVuZ3RoPT0wKSBnZXRXYXJlaG91c2VEYXRhKCk7XHJcbiAgICAgIH07XHJcbiAgICAgICRzY29wZS5hZGRUcmFja2luZ0xpbmsgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pXHJcbiAgICAgICAgbGV0IG91dEpzb24gPSB7XHJcbiAgICAgICAgICBkYlByb2R1Y3ROYW1lZW46IGl0ZW0uZGJQcm9kdWN0TmFtZWVuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRzcC5sb2FkKClcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuc3RvcmVJZClcclxuICAgICAgICBjb25zb2xlLmxvZyggJHNjb3BlLnN0b3JhZ2Vkb0lkKVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdwb2pvL3Byb2N1cmVtZW50L2dldFNlcnZlUHJvQ29kZUltZycsIG91dEpzb24sIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcclxuICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09ICcyMDAnICYmIHJlcy5kYXRhLmJhdGNoVXJsKSB7XHJcbiAgICAgICAgICAgIGxldCB1cEpzb24gPSB7XHJcbiAgICAgICAgICAgICAgZGJQcm9kdWN0SWQ6IGl0ZW0uZGJQcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgZGJQcm9kdWN0TmFtZTogaXRlbS5kYlByb2R1Y3ROYW1lLFxyXG4gICAgICAgICAgICAgIGRiUHJvZHVjdE5hbWVlbjogaXRlbS5kYlByb2R1Y3ROYW1lZW4sXHJcbiAgICAgICAgICAgICAgZGJTZXJ2ZVByb2R1Y3RJZDogaXRlbS5pZCxcclxuICAgICAgICAgICAgICBkYlNrdTogaXRlbS5kYlNrdSxcclxuICAgICAgICAgICAgICBkYkltYWdlczogaXRlbS5kYkltYWdlLFxyXG4gICAgICAgICAgICAgIGJhdGNoVXJsOiByZXMuZGF0YS5iYXRjaFVybCxcclxuICAgICAgICAgICAgICBiYXRjaE51bWJlcjogcmVzLmRhdGEuYmF0Y2hOdW1iZXIsXHJcbiAgICAgICAgICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIG9yZGVyTmFtZTogJHNjb3BlLnRyYWNraW5nTmFtZSxcclxuICAgICAgICAgICAgICBzdG9yZUlkOiAkc2NvcGUuc3RvcmVJZCxcclxuICAgICAgICAgICAgICBzdG9yYWdlZG9JZDogJHNjb3BlLnN0b3JhZ2Vkb0lkLFxyXG4gICAgICAgICAgICAgIHRyYWNraW5nTnVtYmVyOiAkc2NvcGUudHJhY2tpbmdOdW1iZXIsXHJcbiAgICAgICAgICAgICAgbnVtOiAkc2NvcGUubnVtLFxyXG4gICAgICAgICAgICAgIGRlbGl2ZXJ5VGltZTogJChcIiNjai1zdGltZVwiKS52YWwoKSxcclxuICAgICAgICAgICAgICBpc0Rvd25sb2FkOiAxLFxyXG4gICAgICAgICAgICAgIG1vbmV5bGlzdDogW11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBbaSwgaXRlbV0gb2YgbmV3IE1hcCgkc2NvcGUuc2VydmVNb25leUxpc3QubWFwKChpdGVtLCBpKSA9PiBbaSwgaXRlbV0pKSkge1xyXG4gICAgICAgICAgICAgIHVwSnNvbi5tb25leWxpc3RbaV0gPSB7XHJcbiAgICAgICAgICAgICAgICBzZXJ2ZXJNb25leUlkOiBpdGVtLnNlcnZlck1vbmV5SWQsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGl0ZW0uc3RhdHVzXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdjai9zZXJ2ZXIvaW5zZXJ0U2VydmVPcmRlcicsIHVwSnNvbiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmd1N0dScsICdkb3duQmF0Y2gnKVxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9ICdteUNKLmh0bWwjL3Byb2R1Y3RzLWNvbm5lY3Rpb24vd2F5YmlsbCc7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxheWVyLm1zZyhkYXRhLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWQoKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWQoKTtcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1VuZXhwZWN0IEVycm9yLicpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdCYXRjaCBOdW1iZXIgR2VuZXJhdGUgRmFpbGVkJylcclxuICAgICAgICAgICAgZHNwLmNsb3NlTG9hZCgpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICBkc3AuY2xvc2VMb2FkKClcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbmZpcm1UcmFja2luZ2ZsYWcgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIOWbveWutuetm+mAiVxyXG4gICAgICAkc2NvcGUuc3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnN0b3JhZ2Vkb0lkKS8v562b6YCJ55qE5LuT5bqTaWRcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUud2FyZWhvdXNlKVxyXG4gICAgICAgIGlmKCEkc2NvcGUuc3RvcmFnZWRvSWQpe1xyXG4gICAgICAgICAgJHNjb3BlLnN0b3JlSWQgPSBcIlwiO1xyXG4gICAgICAgICAgJHNjb3BlLnNlcnZlTW9uZXlMaXN0ID0gW11cclxuICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgY291bnRyeUNvZGUgPSBcIlwiXHJcbiAgICAgICAgJHNjb3BlLndhcmVob3VzZS5mb3JFYWNoKGl0ZW09PntcclxuICAgICAgICAgIGlmKGl0ZW0uaWQ9PT0kc2NvcGUuc3RvcmFnZWRvSWQpe1xyXG4gICAgICAgICAgICBjb3VudHJ5Q29kZSA9IGl0ZW0uY291bnRyeUNvZGVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICRzY29wZS5zdG9yZUlkID0gY291bnRyeUNvZGVNb2RhbFtjb3VudHJ5Q29kZV1cclxuICAgICAgICA/IGNvdW50cnlDb2RlTW9kYWxbY291bnRyeUNvZGVdLmtleSA6IDFcclxuICAgICAgICBjb3N0KHNlcnZpY2VJdGVtLmRiUHJvZHVjdElkLCRzY29wZS5zdG9yZUlkKVxyXG4gICAgICB9O1xyXG4gICAgICAvLyDmibnmrKHlj7dcclxuICAgICAgJHNjb3BlLnF1YW50aXR5Qmx1ciA9ICgpID0+IHtcclxuICAgICAgICBpZiAoJHNjb3BlLnRyYWNraW5nTnVtYmVyICYmICRzY29wZS5udW0pIHtcclxuICAgICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgICB0cmFja2luZ051bWJlcjogJHNjb3BlLnRyYWNraW5nTnVtYmVyLFxyXG4gICAgICAgICAgICBudW06ICRzY29wZS5udW1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgICRzY29wZS5xdWFudGl0eU9iaiA9IHt9O1xyXG4gICAgICAgICAgJHNjb3BlLmRvd25sb2FkQ29sb3IgPSBmYWxzZTtcclxuICAgICAgICAgICRzY29wZS5kb3dubG9hZEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgIGRzcC5wb3N0RnVuKCdwb2pvL3Byb2N1cmVtZW50L2dldFNlcnZlUHJvQ29kZUltZycsIGRhdGEsIChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gJzIwMCcpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUucXVhbnRpdHlPYmogPSByZXMuZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIC8vIOWNlemAieahhumAieS4rVxyXG4gICAgICAkc2NvcGUucmFkaW9DbGljayA9IChpdGVtLCBzdGF0ZSkgPT4ge1xyXG4gICAgICAgIGlmIChpdGVtLnNlcnZlck1vbmV5VHlwZUlkID09IDMgfHwgaXRlbS5zZXJ2ZXJNb25leVR5cGVJZCA9PSAyKSB7XHJcbiAgICAgICAgICBpdGVtLnN0YXR1cyA9IHN0YXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgLy8g5pyN5Yqh5ZWG5ZOB5om55qyh5Y+35LiL6L29XHJcbiAgICAgICRzY29wZS5iYXRjaERvd25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICRzY29wZS5kb3dubG9hZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICRzY29wZS5kb3dubG9hZENvbG9yID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUucXVhbnRpdHlPYmouYmF0Y2hVcmwpIHJldHVybjtcclxuICAgICAgICBkb3dubG9hZCgnaHR0cHM6Ly8nICsgJHNjb3BlLnF1YW50aXR5T2JqLmJhdGNoVXJsKTtcclxuICAgICAgfTtcclxuICAgICAgLy8g5YWz6Zet6K6i5Y2VXHJcbiAgICAgICRzY29wZS5jb250ZW50ID0gJ0NvbmZpcm0gdG8gY2FuY2VsPyc7XHJcbiAgICAgICRzY29wZS5zaG93UG9wVXBzID0gZmFsc2U7XHJcbiAgICAgICRzY29wZS5jYW5jZWxUcmFja2luZyA9ICgpID0+IHtcclxuICAgICAgICAkc2NvcGUuc2hvd1BvcFVwcyA9IHRydWU7XHJcbiAgICAgIH07XHJcbiAgICAgIC8vIOiOt+WPluW8ueeql+e7hOS7tuWFs+mXreaMiemSrlxyXG4gICAgICAkc2NvcGUuJG9uKCdjbG9zZVBvcFVwcycsIChlLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgbGF5ZXIuY2xvc2UoMik7XHJcbiAgICAgICAgJHNjb3BlLmRvd25sb2FkRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5kb3dubG9hZENvbG9yID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLnNob3dQb3BVcHMgPSBkYXRhLnNob3dQb3BVcHM7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vIOiOt+WPluW8ueeql+e7hOS7tuehruWumuaMiemSrlxyXG4gICAgICAkc2NvcGUuJG9uKCdjb25maXJtUG9wVXBzJywgKGUsIGRhdGEpID0+IHtcclxuICAgICAgICBsYXllci5jbG9zZSgyKTtcclxuICAgICAgICAkc2NvcGUudHJhY2tpbmdTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLnNob3dQb3BVcHMgPSBkYXRhLnNob3dQb3BVcHM7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyDmnI3liqHllYblk4Hnoa7lrprmlrDlop7orqLljZVcclxuICAgICAgbGV0IGNvbmZpcm1UcmFja2luZ2ZsYWcgPSB0cnVlO1xyXG4gICAgICAkc2NvcGUuY29uZmlybVRyYWNraW5nID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghJHNjb3BlLnRyYWNraW5nTmFtZSkge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdTaGlwcGluZyBMYWJlbCBOYW1lIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghJHNjb3BlLnN0b3JhZ2Vkb0lkKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1dhcmVob3VzZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISRzY29wZS50cmFja2luZ051bWJlcikge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdUcmFja2luZyBudW1iZXIgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEkc2NvcGUubnVtKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1F1YW50aXR5IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghJChcIiNjai1zdGltZVwiKS52YWwoKSkge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdEYXRlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOW/hemhu+WFiOS4i+i9veaJueasoeWPt1xyXG4gICAgICAgIC8vIGlmICghJHNjb3BlLmRvd25sb2FkRmxhZykge1xyXG4gICAgICAgIC8vICAgJHNjb3BlLmRvd25sb2FkQ29sb3IgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgbGF5ZXIubXNnKCdQbGVhc2UgZG93bmxvYWQgdGhlIGJhdGNoIG51bWJlciBmaXJzdCBhbmQgdGhlbiB5b3UgY2FuIHN1Ym1pdCBhbmQgbW92ZSBvbiB0byB0aGUgbmV4dCBzdGVwJywge1xyXG4gICAgICAgIC8vICAgICBhcmVhOiAnNDUwcHgnLFxyXG4gICAgICAgIC8vICAgICB0aW1lOiA1MDAwXHJcbiAgICAgICAgLy8gICB9KTtcclxuICAgICAgICAvLyAgIHJldHVybjtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8g6Ziy6YeNXHJcbiAgICAgICAgaWYgKCFjb25maXJtVHJhY2tpbmdmbGFnKSByZXR1cm47XHJcbiAgICAgICAgY29uZmlybVRyYWNraW5nZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5hZGRUcmFja2luZ0xpbmsoc2VydmljZUl0ZW0pXHJcbiAgICAgICAgLy8gbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgLy8gICBvcmRlck5hbWU6ICRzY29wZS50cmFja2luZ05hbWUsXHJcbiAgICAgICAgLy8gICBkYlNlcnZlUHJvZHVjdElkOiBzZXJ2aWNlSXRlbS5pZCxcclxuICAgICAgICAvLyAgIGRiUHJvZHVjdElkOiBzZXJ2aWNlSXRlbS5kYlByb2R1Y3RJZCxcclxuICAgICAgICAvLyAgIGRiUHJvZHVjdE5hbWU6IHNlcnZpY2VJdGVtLmRiUHJvZHVjdE5hbWUsXHJcbiAgICAgICAgLy8gICBkYlByb2R1Y3ROYW1lZW46IHNlcnZpY2VJdGVtLmRiUHJvZHVjdE5hbWVlbixcclxuICAgICAgICAvLyAgIGRiSW1hZ2VzOiBzZXJ2aWNlSXRlbS5kYkltYWdlLFxyXG4gICAgICAgIC8vICAgZGJTa3U6IHNlcnZpY2VJdGVtLmRiU2t1LFxyXG4gICAgICAgIC8vICAgc3RhdHVzOiAxLFxyXG4gICAgICAgIC8vICAgc3RvcmVJZDogJHNjb3BlLnN0b3JlSWQsXHJcbiAgICAgICAgLy8gICBzdG9yYWdlZG9JZDogJHNjb3BlLnN0b3JhZ2Vkb0lkLmlkLFxyXG4gICAgICAgIC8vICAgdHJhY2tpbmdOdW1iZXI6ICRzY29wZS50cmFja2luZ051bWJlcixcclxuICAgICAgICAvLyAgIG51bTogJHNjb3BlLm51bSxcclxuICAgICAgICAvLyAgIGRlbGl2ZXJ5VGltZTogJChcIiNjai1zdGltZVwiKS52YWwoKSxcclxuICAgICAgICAvLyAgIGlzRG93bmxvYWQ6IDEsXHJcbiAgICAgICAgLy8gICBiYXRjaFVybDogJHNjb3BlLnF1YW50aXR5T2JqLmJhdGNoVXJsLFxyXG4gICAgICAgIC8vICAgYmF0Y2hOdW1iZXI6ICRzY29wZS5xdWFudGl0eU9iai5iYXRjaE51bWJlcixcclxuICAgICAgICAvLyAgIG1vbmV5bGlzdDogW11cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZm9yIChsZXQgW2ksIGl0ZW1dIG9mIG5ldyBNYXAoJHNjb3BlLnNlcnZlTW9uZXlMaXN0Lm1hcCgoaXRlbSwgaSkgPT4gW2ksIGl0ZW1dKSkpIHtcclxuICAgICAgICAvLyAgIGRhdGEubW9uZXlsaXN0W2ldID0ge1xyXG4gICAgICAgIC8vICAgICBzZXJ2ZXJNb25leUlkOiBpdGVtLnNlcnZlck1vbmV5SWQsXHJcbiAgICAgICAgLy8gICAgIHN0YXR1czogaXRlbS5zdGF0dXNcclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZHNwLnBvc3RGdW4oJ2NqL3NlcnZlci9pbnNlcnRTZXJ2ZU9yZGVyJywgZGF0YSwgKHJlcykgPT4ge1xyXG4gICAgICAgIC8vICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT0gJzIwMCcpIHtcclxuICAgICAgICAvLyAgICAgJHNjb3BlLnRyYWNraW5nU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgIC8vICAgICBjb25maXJtVHJhY2tpbmdmbGFnID0gdHJ1ZTtcclxuICAgICAgICAvLyAgICAgJHNjb3BlLnNoaXBwaW5nRmVlSGludFNob3cgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgICBnZXRTaGlwcGluZ0ZlZUhpbnQoc2VydmljZUl0ZW0uZGJQcm9kdWN0SWQsIHJlcy5kYXRhLnJlc3VsdCk7XHJcbiAgICAgICAgLy8gICB9XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICAgIH07XHJcbiAgICAgIC8vIOa4qemmqOaPkOekuui0ueeUqFxyXG4gICAgICBmdW5jdGlvbiBnZXRTaGlwcGluZ0ZlZUhpbnQoZGJQcm9kdWN0SWQsIHJlc3VsdElkKSB7XHJcbiAgICAgICAgJHNjb3BlLnNoaXBwaW5nRmVlSGludE1vbmV5TGlzdCA9IHt9O1xyXG4gICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgZGJQcm9kdWN0SWQ6IGRiUHJvZHVjdElkLFxyXG4gICAgICAgICAgc3RvcmVJZDogJHNjb3BlLnN0b3JlSWQsXHJcbiAgICAgICAgICBkYlNlcnZlT3JkZXJJZDogcmVzdWx0SWRcclxuICAgICAgICB9XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL3NlcnZlci9nZXREYlNlcnZlT3JkZXJNb25leScsIGRhdGEsIChyZXMpID0+IHtcclxuICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXNDb2RlID09ICcyMDAnKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zaGlwcGluZ0ZlZUhpbnRNb25leUxpc3QgPSByZXMuZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgJHNjb3BlLnNoaXBwaW5nRmVlSGludE1vbmV5TGlzdC5tb25leUxpc3QpIHtcclxuICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA9PSA3KSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hpcHBpbmdGZWVIaW50TW9uZXlMaXN0Lm1vbmV5cyA9IGl0ZW0ubW9uZXlzO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnNoaXBwaW5nRmVlSGludE1vbmV5TGlzdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICAgIC8vIOi/kOWNlei0ueeUqOa4qemmqOaPkOekulxyXG4gICAgICAkc2NvcGUuY2FuY2VsU2hpcHBpbmdGZWVIaW50ID0gKCkgPT4ge1xyXG4gICAgICAgICRzY29wZS5zaGlwcGluZ0ZlZUhpbnRTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgbGF5ZXIubXNnKCdBZGRlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICBnZXRHb29kcygpO1xyXG4gICAgICB9O1xyXG4gICAgICAvLyDotLnnlKjmlbDmja5cclxuICAgICAgZnVuY3Rpb24gY29zdChkYlByb2R1Y3RJZCwgc3RvcmVUeXBlID0gMikge1xyXG4gICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgZGJQcm9kdWN0SWQsXHJcbiAgICAgICAgICBzdG9yZVR5cGU6IHBhcnNlSW50KHN0b3JlVHlwZSlcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLnNlcnZlTW9uZXlMaXN0ID0gW107XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL3NlcnZlci9nZXREYlNlcnZlTW9uZXlMaXN0JywgZGF0YSwgKHJlcykgPT4ge1xyXG4gICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT0gJzIwMCcpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBtb25leUxpc3QscmV0ZW50aW9uTGlzdCB9ICA9IHJlcy5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgJHNjb3BlLnNlcnZlTW9uZXlMaXN0ID0gbW9uZXlMaXN0XHJcbiAgICAgICAgICAgICRzY29wZS5vdmVydGltZURheXMgPSByZXRlbnRpb25MaXN0WzBdLmRheXNcclxuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiAkc2NvcGUuc2VydmVNb25leUxpc3QpIHtcclxuICAgICAgICAgICAgICBpdGVtLnN0YXR1cyA9ICcxJztcclxuICAgICAgICAgICAgICBpdGVtLmZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBpZiAoaXRlbS5zZXJ2ZXJNb25leVR5cGVJZCA9PSAzIHx8IGl0ZW0uc2VydmVyTW9uZXlUeXBlSWQgPT0gMikge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5mbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYoaXRlbS5pdGVtTmFtZWVuID09XCJPdmVydGltZSBGZWVcIil7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3ZlcnRpbWVGZWUgPSBpdGVtLm1vbmV5c1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICAvLyDph43nva5cclxuICAgICAgZnVuY3Rpb24gcmVzZXRUcmFja2luZygpIHtcclxuICAgICAgICAkc2NvcGUuc3RvcmFnZWRvSWQgPSBcIlwiO1xyXG4gICAgICAgICRzY29wZS5zdG9yZUlkID0gXCJcIjtcclxuICAgICAgICAkc2NvcGUudHJhY2tpbmdOYW1lID0gJyc7ICAgICAgICAvLyDov5DljZXlkI3np7BcclxuICAgICAgICAkc2NvcGUudHJhY2tpbmdOdW1iZXIgPSAnJzsgICAgICAvLyDov5DljZXlj7dcclxuICAgICAgICAkc2NvcGUubnVtID0gJyc7ICAgICAgICAgICAgICAgICAvLyDmlbDph49cclxuICAgICAgICAkc2NvcGUucXVhbnRpdHlPYmogPSB7fTsgICAgICAgICAvLyDmibnmrKHlj7fmlbDmja5cclxuICAgICAgICAkc2NvcGUuZG93bmxvYWRGbGFnID0gZmFsc2U7ICAgICAvLyDkuIvovb3nirbmgIFcclxuICAgICAgICAkc2NvcGUuZG93bmxvYWRDb2xvciA9IGZhbHNlOyAgICAvLyDkuIvovb3popzoibJcclxuICAgICAgICAkc2NvcGUuc2VydmVNb25leUxpc3QgPSBbXTsgICAgICAvLyDljZXpgInpoblcclxuICAgICAgICAkKFwiI2NqLXN0aW1lXCIpLnZhbCgnJyk7ICAgICAgICAgIC8vIOaXtumXtFxyXG4gICAgICB9O1xyXG4gICAgICAvL+WIhumhtVxyXG4gICAgICAkc2NvcGUuJG9uKCdwYWdlZGF0YS1mYScsIGZ1bmN0aW9uIChkLCBkYXRhKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAkc2NvcGUucGFnZU51bSA9IGRhdGEucGFnZU51bTtcclxuICAgICAgICAkc2NvcGUucGFnZVNpemUgPSBkYXRhLnBhZ2VTaXplO1xyXG4gICAgICAgIGdldEdvb2RzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgdmFyIGFkZE9uZUZsYWcgPSB0cnVlO1xyXG4gICAgICAkc2NvcGUuY2FuY2VsQXBwbHlGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLmdvb2RzU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgIGFkZE9uZUZsYWcgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5jb25maXJtQXBwbHlGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmFwcGx5Tm90ZU1lcylcclxuICAgICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAgIGN1c3RvbWVyTWVzc2FnZTogJHNjb3BlLmFwcGx5Tm90ZU1lcyxcclxuICAgICAgICAgIGN1c3RvbWVySW1hZ2U6ICRzY29wZS5pbWdPc3NBcnIsXHJcbiAgICAgICAgICB3ZWlnaHQ6ICRzY29wZS5hZGRGd3NwV2VpZ2h0LFxyXG4gICAgICAgICAgcmVmZXJlbmNlUHJpY2U6ICRzY29wZS5hZGRGd3NwTW9uZXlcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0YS5jdXN0b21lckltYWdlID0gSlNPTi5zdHJpbmdpZnkoZGF0YS5jdXN0b21lckltYWdlKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgaWYgKCEkc2NvcGUuYXBwbHlOb3RlTWVzKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBsZWF2ZSBtZXNzYWdlcyB0byBDSi4nKVxyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghYWRkT25lRmxhZykgcmV0dXJuXHJcbiAgICAgICAgYWRkT25lRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9zZXJ2ZXIvYWRkU2VydmVQcm9kdWN0JywgZGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGFkZE9uZUZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09ICcyMDAnKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5nb29kc1Nob3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLmltZ0FyciA9IFtdO1xyXG4gICAgICAgICAgICAkc2NvcGUuaW1nT3NzQXJyID0gW107XHJcbiAgICAgICAgICAgICRzY29wZS5hcHBseU5vdGVNZXMgPSAnJztcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdBZGRlZCBTdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgICAgZ2V0R29vZHMoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgIGFkZE9uZUZsYWcgPSB0cnVlO1xyXG4gICAgICAgIH0sIHsgbGF5ZXI6IHRydWUgfSlcclxuICAgICAgfVxyXG4gICAgICAvLyDkuIrkvKDlm77niYdcclxuICAgICAgLy/ngrnlh7vkuIrkvKDnmoTlm77niYfmmL7npLrlpKflm75cclxuICAgICAgJHNjb3BlLnZpZXdCaWdJbWcgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICRzY29wZS52aWV3SW1nRmxhZyA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLmJpZ0ltZ1NyYyA9IGl0ZW07XHJcbiAgICAgICAgY29uc29sZS5sb2coaXRlbSlcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuY2xvc2VQcmVJbWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLnZpZXdJbWdGbGFnID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmltZ0FyciA9IFtdOyAgICAgICAvLyDor7vlj5bmnKzlnLDlnLDlnYAtLS0t6YCf5bqm5b+rXHJcbiAgICAgICRzY29wZS5pbWdPc3NBcnIgPSBbXTsgIC8vIOmcgOimgeS8oOe7meWQjuWPsOeahOe6v+S4iuWcsOWdgFxyXG4gICAgICBsZXQgbG9hZExpc3QgPSB7XHJcbiAgICAgICAgaW1nOiBbJ3BuZycsICdqcGcnLCAnanBlZycsICdnaWYnLCBcIlBOR1wiLCBcIkpQR1wiLCBcIkpQRUdcIiwgXCJHSUZcIl1cclxuICAgICAgfTtcclxuICAgICAgJHNjb3BlLnVwTG9hZEltZzQgPSBmdW5jdGlvbiAoZmlsZXMpIHtcclxuICAgICAgICBsZXQgZmlsZSA9IGZpbGVzWzBdO1xyXG4gICAgICAgIGxldCBmaWxlTmFtZSA9IGZpbGUubmFtZS5zdWJzdHJpbmcoZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcuJykgKyAxKTtcclxuICAgICAgICBpZiAobG9hZExpc3QuaW1nLmluZGV4T2YoZmlsZU5hbWUpID09IC0xKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ0ltYWdlcyBmb3JtYXQgZXJyb3InKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCRzY29wZS5pbWdBcnIubGVuZ3RoID49IDgpIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnVXBsb2FkIGVpZ2h0IGltYWdlcyBhdCBtb3N0Jyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRzcC5vc3NVcGxvYWRGaWxlKGZpbGVzLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0ltYWdlcyBVcGxvYWQgRmFpbGVkJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxldCByZXN1bHQgPSBkYXRhLnN1Y2Nzc0xpbmtzO1xyXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByZXN1bHQubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgbGV0IHNyY0xpc3QgPSByZXN1bHRbal0uc3BsaXQoJy4nKTtcclxuICAgICAgICAgICAgbGV0IGZpbGVOYW1lID0gc3JjTGlzdFtzcmNMaXN0Lmxlbmd0aCAtIDFdLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGlmIChmaWxlTmFtZSA9PSAncG5nJyB8fCBmaWxlTmFtZSA9PSAnanBnJyB8fCBmaWxlTmFtZSA9PSAnanBlZycgfHwgZmlsZU5hbWUgPT0gJ2dpZicpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuaW1nQXJyLnB1c2goVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlc1tqXSkpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5pbWdPc3NBcnIucHVzaChkYXRhLnN1Y2Nzc0xpbmtzW2pdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCRzY29wZS5pbWdBcnIgJiYgJHNjb3BlLmltZ0Fyci5sZW5ndGggPj0gOCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaGlkZVVwSW1nRmxhZyA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkKCcudXBsb2FkX2ZpbGUnKS52YWwoJycpXHJcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfTtcclxuICAgICAgLy8g5Yig6Zmk5LiK5Lyg55qE5Zu+54mHXHJcbiAgICAgICRzY29wZS5kZWxJbWcgPSAoaW5kZXgsIGV2ZW50KSA9PiB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgJHNjb3BlLmltZ0Fyci5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICRzY29wZS5pbWdPc3NBcnIuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBpZiAoJHNjb3BlLmltZ0Fyci5sZW5ndGggPCA4KSB7XHJcbiAgICAgICAgICAkc2NvcGUuaGlkZVVwSW1nRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1dKTtcclxuXHJcbiAgcmV0dXJuIGFwcDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFMQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFPQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakJBO0FBbUJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQkE7QUFDQTtBQUZBO0FBcUJBO0FBQUE7QUFyQkE7QUFDQTtBQURBO0FBcUJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBMUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQTBCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../src/pages/mycj/service-product/products.js\n");

/***/ })

}]);