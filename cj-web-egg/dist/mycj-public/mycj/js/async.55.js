(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[55],{

/***/ "../src/pages/mycj/sku-list/sku-list.js":
/*!**********************************************!*\
  !*** ../src/pages/mycj/sku-list/sku-list.js ***!
  \**********************************************/
/*! exports provided: skuListFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"skuListFactory\", function() { return skuListFactory; });\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction skuListFactory(angular) {\n  var app = angular.module('mycj-sku-list.module', []);\n  var skuPicHeight = 520;\n  app.controller('mycj-sku-list.ctrl', ['$scope', '$rootScope', 'dsp', function ($scope, $rootScope, dsp) {\n    $scope.getListUrl = 'app/rebate/getAssignAndVisibility';\n    var vip = localStorage.getItem('vip') == undefined ? \"\" : localStorage.getItem('vip');\n\n    if (vip == '1') {\n      //vipFlag\n      $('.header-nav').addClass('vipFlag');\n      $('.mycj-right-wrap').css('background', '#F0EDE7').addClass('vip');\n    } else {\n      $('.header-nav').removeClass('vipFlag');\n      $('.mycj-right-wrap').css('background', '#f2f3f5').removeClass('vip');\n    }\n\n    $('.header-nav li').eq(2).addClass('active');\n\n    $scope.afterGetLeftNav = function () {\n      if (vip == '1') {\n        $('.mycj-left-bar').addClass('vipFlag');\n      } else {\n        $('.mycj-left-bar').removeClass('vipFlag');\n      }\n\n      $('.mycj-left-bar li').eq(1).addClass('active');\n    };\n\n    dsp.setRightMinHeight();\n    console.log('mycj-sku-list.ctrl');\n    var base64 = new Base64();\n    var userId = base64.decode(localStorage.getItem('userId') == undefined ? \"\" : localStorage.getItem('userId')); // layer.load(2,{shade: [0.3, '#393D49']});\n\n    console.log(userId);\n    $scope.skusearch = '';\n    $scope.pageSize = '10';\n    $scope.pageNum = '1';\n    $scope.skuTotalPage = '';\n    $scope.skusearch = '';\n    $scope.listType = '1';\n    $scope.content = 'Are you sure to delete it?'; // $scope.getListUrl = 'app/rebate/getAssignAndVisibility';\n\n    $scope.$on('ship-setting', function (ev, data) {\n      if (data.flag == 'submit-ship-success') {\n        $scope.skulist[data.ship.proindex].shopMethod = data.ship.shipMethod;\n        $scope.skulist[data.ship.proindex].defaultArea = data.ship.defaultArea;\n      }\n    }); //获取批量删除权限\n\n    function getBatchPermisstion() {\n      var userId = $rootScope.base64.decode(localStorage.getItem('userId'));\n      console.log(userId);\n      dsp.postFun('cj/PackConnection/getDelPackPermissions', {\n        userId: userId\n      }, function (res) {\n        if (res.data.statusCode == 200) {\n          $scope.packStatus = res.data.result.packStatus; //0-无 1-有\n        } else {\n          $scope.packStatus = 0;\n        }\n      });\n    }\n\n    getBatchPermisstion();\n\n    function getListData(pageNum, pageSize) {\n      var sendData;\n      sendData = {\n        pageNum: pageNum,\n        pageSize: pageSize,\n        type: $scope.listType,\n        search: $scope.skusearch.replace(/'/g, \"''\"),\n        isWarning: $scope.isWarning\n      };\n      return JSON.stringify(sendData);\n    }\n\n    function settleData(obj) {\n      var productList = obj.list || [];\n      var remarkArr = obj.remark || [];\n\n      for (var i = 0; i < productList.length; i++) {\n        productList[i].down = false;\n        productList[i].BIGIMG = productList[i].BIGIMG.replace('https://', '').replace('http://', '');\n        productList[i].discountPrice = dsp.cacuDiscount(productList[i].SELLPRICE, productList[i].discountPriceRate);\n        productList[i].decountry = null;\n        productList[i].deltPrice = 0;\n        productList[i].discountPriceShip = 0;\n\n        if (productList[i].deltPrice) {\n          productList[i].discountPriceShip = dsp.cacuDiscount(productList[i].deltPrice, productList[i].discountShopRate);\n          productList[i].AMOUNTPRICE = dsp.cacuAmount(productList[i].discountPrice, productList[i].discountPriceShip);\n        } else {\n          productList[i].discountPriceShip = '';\n          productList[i].AMOUNTPRICE = productList[i].discountPrice;\n        }\n\n        for (var j = 0; j < remarkArr.length; j++) {\n          if (productList[i].shopMethod && productList[i].shopMethod == remarkArr[j].nameen) {\n            productList[i].wuliuRemark = remarkArr[j].remark;\n            break;\n          }\n        } // 物流试算组件用\n\n\n        productList[i].shipinfo = {\n          weight: productList[i].packweight,\n          enName: productList[i].shopMethod,\n          pid: productList[i].PID,\n          shipDiscount: productList[i].discountShopRate,\n          areaCountryCode: productList[i].areaCountryCode,\n          index1: i\n        };\n      }\n\n      $scope.skulist = productList;\n    } // 物流试算组件返回值接收\n\n\n    $scope.$on('saveShipPrice', function (d, data) {\n      if (data.index2 >= 0 && data.index1 >= 0) {\n        if (data.shipDiscountPrice) {\n          $scope.skulist[data.index1].vList[data.index2].isProAmountTip = false;\n        }\n\n        $scope.skulist[data.index1].vList[data.index2].AMOUNTPRICE = dsp.cacuAmount($scope.skulist[data.index1].vList[data.index2].discountPrice, data.shipDiscountPrice || 0);\n      } else {\n        if (data.shipDiscountPrice) {\n          $scope.skulist[data.index1].isProAmountTip = false;\n        }\n\n        $scope.skulist[data.index1].AMOUNTPRICE = dsp.cacuAmount($scope.skulist[data.index1].discountPrice, data.shipDiscountPrice || 0);\n      }\n\n      setTimeout(function () {\n        $scope.$apply();\n      });\n    });\n\n    function getSkuList() {\n      $scope.skulist = [];\n      $scope.isCheckAll = false;\n      $rootScope.$on($scope.getListUrl, function (_, bool) {\n        $scope.loading = bool;\n        if (bool) $scope.notDataFound = false;\n      });\n      dsp.postFun($scope.getListUrl, getListData($scope.pageNum, $scope.pageSize), function SKUget(data) {\n        console.log(data);\n        var obj = data.data;\n        console.log(\"SKU\", obj);\n        $scope.skuall = obj;\n\n        if (obj.count == 0) {\n          $scope.skuTotalPage = 0;\n          $scope.skulist = [];\n          $scope.notDataFound = true;\n          return;\n        }\n\n        $scope.totalNum = obj.count;\n        settleData(obj);\n        $scope.totalCounts = Math.ceil($scope.totalNum / $scope.pageSize);\n        $scope.$broadcast('page-data', {\n          pageNum: $scope.pageNum,\n          totalNum: $scope.totalCounts,\n          totalCounts: $scope.totalNum,\n          pageSize: $scope.pageSize\n        });\n      });\n    }\n\n    getSkuList(); // 获取变体列表\n\n    $scope.showVList = function (item, index1) {\n      // dsp.load();\n      var isWarning = item.isWarning == '1' ? '1' : '';\n      layer.load(2);\n      dsp.postFun('app/rebate/getAssignAndVisibilitydetaill', JSON.stringify({\n        productId: item.productId,\n        isWarning: isWarning\n      }), function (data) {\n        layer.closeAll(\"loading\");\n        console.log(data.data.list);\n        item.down = true;\n        var vList = data.data.list;\n\n        for (var i = 0; i < vList.length; i++) {\n          vList[i].discountPrice = dsp.cacuDiscount(vList[i].SELLPRICE, vList[i].discountPriceRate);\n          vList[i].decountry = null;\n          vList[i].deltPrice = 0;\n          vList[i].discountPriceShip = 0;\n\n          if (vList[i].deltPrice) {\n            vList[i].discountPriceShip = dsp.cacuDiscount(vList[i].deltPrice, vList[i].discountShopRate);\n            vList[i].AMOUNTPRICE = dsp.cacuAmount(vList[i].discountPrice, vList[i].discountPriceShip);\n          } else {\n            vList[i].discountPriceShip = '';\n            vList[i].AMOUNTPRICE = vList[i].discountPrice;\n          } // 展示变体属性\n\n\n          if (vList[i].variantkey) {\n            var curVarientVal = Array.isArray(vList[i].variantkey) ? vList[i].variantkey : vList[i].variantkey.split('-');\n            vList[i].varientStr = curVarientVal.join('; ');\n          } // 物流试算组件用\n\n\n          vList[i].shipinfo = {\n            weight: vList[i].PACKWEIGHT,\n            enName: vList[i].shopMethod,\n            pid: vList[i].PID,\n            shipDiscount: vList[i].discountShopRate,\n            areaCountryCode: $scope.skulist[index1].areaCountryCode,\n            index1: index1,\n            index2: i\n          };\n        }\n\n        $scope.skulist[index1].vList = vList;\n      });\n    };\n\n    $scope.hideVList = function (item, index1) {\n      item.down = false;\n      $scope.skulist[index1].vList = [];\n    }; //skudelet\n\n\n    $scope.skudelet = function (item, index1, index2) {\n      $scope.content = 'Are you sure to delete it?';\n      $scope.popType = 1;\n      $scope.deletePopup = true;\n      $scope.item = item;\n      $scope.index1 = index1;\n      $scope.index2 = index2;\n    }; // 获取弹窗组件关闭按钮\n\n\n    $scope.$on('closePopUps', function (e, data) {\n      $scope.deletePopup = data.showPopUps;\n      $scope.showPopUps = false;\n    }); // 获取弹窗组件确定按钮\n\n    $scope.$on('confirmPopUps', function (e, d) {\n      if ($scope.popType == 1) {\n        $scope.deleteConfirmFun();\n      } else if ($scope.popType == 3) {\n        $scope.batchRemove();\n      }\n    });\n    $scope.text = 'Note: The CJ inventory of this product is less than the average daily sales volume of the past 7 days.';\n\n    $scope.getTest = function (item) {\n      if (!item) return;\n\n      if (item.warningValue === item.actualValue) {\n        $scope.text = 'Note: The CJ inventory of this product is the same as the average daily sales volume of the past 7 days.';\n      }\n\n      return $scope.text;\n    };\n\n    $scope.batchRemove = function () {\n      console.log(1);\n      layer.load(2);\n      dsp.postFun('cj/PackProduct/delCorrelation', $scope.removeParams, function (res) {\n        layer.closeAll('loading');\n\n        if (res.data.statusCode == '200') {\n          $scope.showPopUps = false;\n          layer.msg('Binding removed');\n          getSkuList();\n        } else {\n          $scope.showPopUps = false;\n          layer.msg('Binding removal failed');\n        }\n      }, function (err) {\n        $scope.showPopUps = false;\n        console.log(err);\n      });\n      return false;\n    };\n\n    $scope.deleteCancelFun = function () {\n      $scope.deletePopup = false;\n      $scope.item = null;\n      $scope.index1 = null;\n      $scope.index2 = null;\n    };\n\n    $scope.deleteConfirmFun = function () {\n      var item = $scope.item,\n          index1 = $scope.index1,\n          index2 = $scope.index2;\n      var opeList;\n      var deleteUrl;\n\n      if (index2 >= 0) {\n        deleteUrl = 'app/connection/deleteCondetaill';\n        opeList = JSON.parse(JSON.stringify($scope.skulist[index1].vList));\n      } else {\n        deleteUrl = 'app/connection/deleteCon';\n        opeList = JSON.parse(JSON.stringify($scope.skulist));\n      } // dsp.load();\n\n\n      layer.load(2);\n      dsp.postFun(deleteUrl, {\n        \"data\": \"{'id':'\" + (item.productId || item.ID) + \"'}\"\n      }, function (data) {\n        layer.closeAll(\"loading\");\n        var data = data.data;\n        console.log(data);\n\n        if (data.statusCode != 200) {\n          layer.msg('Delete failed');\n          return false;\n        }\n\n        layer.msg('Deleted Successfully', {\n          time: 1000\n        });\n\n        if (index2 >= 0) {\n          opeList.splice(index2, 1);\n          $scope.skulist[index1].vList = JSON.parse(JSON.stringify(opeList));\n        } else {\n          getSkuList(); // 刷新数据\n          // $scope.skulist = JSON.parse(JSON.stringify(opeList));\n        }\n\n        layer.close();\n        $scope.deletePopup = false;\n      });\n    }; // 打开预警弹框\n\n\n    $scope.dropDown = function (item, fileds) {\n      $scope.skulist = $scope.skulist.map(function (o) {\n        if (o.vList) {\n          o.vList = o.vList.map(function (i) {\n            return _objectSpread(_objectSpread({}, i), {}, _defineProperty({}, fileds, i[fileds] ? false : i.vid === item.vid));\n          });\n        }\n\n        return o;\n      });\n    }; // 关闭预警弹框\n\n\n    $scope.closeInventoryModal = function (fileds) {\n      $scope.skulist = $scope.skulist.map(function (o) {\n        if (o.vList) {\n          o.vList = o.vList.map(function (i) {\n            return _objectSpread(_objectSpread({}, i), {}, _defineProperty({}, fileds, false));\n          });\n        }\n\n        return o;\n      });\n    }; // 不再提醒\n\n\n    $scope.warnNoLonger = function (vid) {\n      layer.load(2);\n      dsp.postFun('early-warning-web/earlyWarning/neverPromptAgain', {\n        entityId: vid\n      }, function (_ref) {\n        var data = _ref.data;\n        layer.closeAll('loading');\n\n        if (data.success) {\n          getSkuList();\n          layer.close(2);\n        } else {\n          layer.msg('Never Prompt Again failed');\n        }\n      }, function (err) {\n        layer.close(2);\n      });\n    };\n\n    $scope.buylist = []; // 点击购买私有库存，将商品加入购物车后跳转\n\n    $scope.addPrivateToCar = function (vitem) {\n      dsp.postFun('app/buyOrder/getShoppingCart', {}, function (data) {\n        if (data.data.code == 200) {\n          if (data.data.shoppingCart) {\n            $scope.buylist = data.data.shoppingCart.productList || [];\n            var findIdx = dsp.findIndexByKey($scope.buylist, 'SKU', vitem.SKU);\n            dsp.postFun('app/buyOrder/gouWuCheMaiDian', {\n              productId: vitem.ID\n            }, function (data) {});\n            var token = $rootScope.userInfo.token;\n            var params = {\n              id: vitem.PID,\n              token: token\n            };\n            dsp.postFun('cj/locProduct/huoQuShangPinXiangQing', _objectSpread({}, params), function (_ref2) {\n              var data = _ref2.data;\n\n              if (data.statusCode == 200 && data.result) {\n                var dataList = {\n                  NAMEEN: vitem.NAMEEN,\n                  BIGIMG: vitem.IMG,\n                  isCollect: data.result.isCollect,\n                  discountPrice: vitem.discountPrice,\n                  itemcount: 1,\n                  SELLPRICE: vitem.SELLPRICE,\n                  CollectID: vitem.PID,\n                  checked: false,\n                  ID: vitem.vid,\n                  SKU: vitem.SKU\n                };\n\n                if (findIdx === -1) {\n                  $scope.buylist.unshift(dataList);\n                } else {\n                  $scope.buylist[findIdx].itemcount = $scope.buylist[findIdx].itemcount * 1 + 1;\n                  $scope.buylist[findIdx].checked = true;\n                }\n\n                dsp.postFun('app/buyOrder/editShoppingCart', {\n                  productList: $scope.buylist\n                }, function (res) {\n                  if (res.status == 200) {\n                    window.location.href = window.origin + '/myCJ.html#/cart/sku';\n                  }\n                });\n              }\n            });\n          }\n        }\n      }, function (data) {});\n    }; // 打开Skualias弹窗\n\n\n    $scope.skualiasList = {};\n\n    $scope.addSkuList = function (item, index2, index1) {\n      $scope.skuName = '';\n      $scope.skuItemFlag = false;\n      $scope.skualias = true;\n      $scope.skuItemHint = true;\n      $scope.skualiasList.stanId = item.stanId;\n      $scope.skualiasList.index2 = index2;\n      $scope.skualiasList.index1 = index1;\n      $scope.skuliasIndex = [index1, index2];\n\n      if (!item.skuAlisa) {\n        $scope.skualiasList.skuAlisa = [];\n      } else {\n        $scope.skualiasList.skuAlisa = JSON.parse(JSON.stringify(item.skuAlisa.split(',')));\n      }\n    }; // 关闭Skualias弹窗\n\n\n    $scope.closeSkualias = function () {\n      $scope.skualias = false;\n    }; // 添加SkuName\n\n\n    $scope.addSplit = function () {\n      if ($scope.skualiasList.skuAlisa && $scope.skualiasList.skuAlisa.length === 3) {\n        layer.msg('The quantity that can be added is limited to 3.');\n        return;\n      }\n\n      $scope.skuItemFlag = true;\n      $scope.skuItemHint = false;\n    }; // 删除Skualias\n\n\n    $scope.delSkualias = function (item) {\n      layer.open({\n        type: 1,\n        content: ' <p>Are you sure to delete it?</p>',\n        area: ['480px', '200px'],\n        closeBtn: 0,\n        shadeClose: true,\n        title: null,\n        skin: \"\",\n        btn: ['No', 'Yes'],\n        success: function success(layero, index) {},\n        yes: function yes(index, layero) {\n          layer.close(index);\n        },\n        btn2: function btn2(index, layero) {\n          layer.close(index);\n          var data = {\n            vid: $scope.skualiasList.stanId,\n            bieMing: item\n          };\n          dsp.postFun('pojo/product/shanChuBieMing', data, function (res) {\n            if (res.data.statusCode === '200') {\n              $scope.skualiasList.skuAlisa.splice($scope.skualiasList.skuAlisa.indexOf(item), 1);\n              $scope.skulist[$scope.skualiasList.index1].vList[$scope.skualiasList.index2].skuAlisa = $scope.skualiasList.skuAlisa.join(',');\n            } else {\n              layer.msg('Deletion failed');\n            }\n          }); // return false;\n        }\n      });\n    }; // 取消添加Skualias\n\n\n    $scope.cancelSku = function () {\n      $scope.skuItemFlag = false;\n      $scope.skuItemHint = true;\n      $scope.skuName = '';\n    }; // 确定添加Skualias\n\n\n    $scope.confirmSku = function () {\n      if (!$scope.skuName) {\n        layer.msg('Your SKU is required');\n        return;\n      }\n\n      if (strLength($scope.skuName) > 60) {\n        layer.msg('The characters of your SKU is limited to 60 letters.');\n        return;\n      }\n\n      var data = {\n        vid: $scope.skualiasList.stanId,\n        bieMing: [$scope.skuName]\n      };\n      dsp.postFun('pojo/product/cjKeHuZengJiaBieMingBianTi', data, function (res) {\n        if (res.data.statusCode === '200') {\n          $scope.skualiasList.skuAlisa.push($scope.skuName);\n          $scope.skulist[$scope.skuliasIndex[0]].vList[$scope.skuliasIndex[1]].skuAlisa = $scope.skualiasList.skuAlisa.join(',');\n        } else {\n          layer.msg('Addition failed');\n        }\n\n        $scope.cancelSku();\n      });\n    };\n\n    function strLength(str) {\n      return str.replace(/[\\u0391-\\uFFE5]/g, \"aa\").length;\n    }\n\n    ; // 只展示私有商品\n\n    $scope.showPrivatePro = function (flag) {\n      if (flag) {\n        $scope.listType = '0';\n      } else {\n        $scope.listType = '1';\n      }\n\n      getSkuList();\n    }; // 查询预警数据 是为true,否为''\n\n\n    $scope.showIsWarning = function (flag) {\n      if (flag) {\n        $scope.isWarning = true;\n      } else {\n        $scope.isWarning = '';\n      }\n\n      getSkuList();\n    }; //搜索查询\n\n\n    $scope.searchsku = function () {\n      $scope.pageNum = '1';\n      getSkuList();\n    };\n\n    $scope.enterSearch = function (event) {\n      if (event.keyCode == 13) {\n        $scope.searchsku();\n      }\n    }; //分页\n\n\n    $scope.$on('pagedata-fa', function (d, data) {\n      console.log(data);\n      $scope.pageNum = data.pageNum;\n      $scope.pageSize = data.pageSize;\n      getSkuList();\n    });\n\n    $scope.openSkuFun = function () {\n      $scope.addskuFlag = true;\n    };\n\n    $('.sea-inp').keypress(function (ev) {\n      if (ev.keyCode == '13') {\n        $scope.seaSpFun();\n      }\n    });\n\n    $scope.seaSpFun = function () {\n      if (!$scope.seaSpInpVal) {\n        layer.msg('Please enter a sku');\n        return;\n      }\n\n      layer.load(2);\n      var filterObj = {};\n      filterObj.filter = {};\n      filterObj.filter.inputStr = $scope.seaSpInpVal;\n      dsp.postFun('pojo/product/getProductByAccount', JSON.stringify(filterObj), function (data) {\n        console.log(data);\n        layer.closeAll(\"loading\");\n\n        if (data.data.statusCode == 200) {\n          $scope.pList = JSON.parse(data.data.result);\n          console.log($scope.pList);\n\n          if ($scope.pList.length) {\n            dsp.getAreaByPid($scope.pList[0].id, function (data) {\n              $scope.wareList = data;\n              $scope.seleWare = data[0];\n              $scope.chanSeleWare();\n            });\n          } else {\n            // 没查到结果\n            layer.msg('Oops, invalid SKU. Please check it carefully.');\n          }\n        } else {\n          layer.msg('Search error');\n        }\n      }, function (data) {\n        console.log(data);\n        layer.closeAll(\"loading\");\n      });\n    };\n\n    $scope.chanSeleWare = function () {\n      if ($scope.pList[0].PRODUCTTYPE == \"5\") {\n        var item = $scope.pList[0];\n        dsp.getShipListSupplier({\n          sku: item.sku,\n          countryCode: $scope.seleWare.countryCode\n        }, function (data) {\n          $scope.logSet = data;\n        });\n      } else {\n        dsp.getShipListNew({\n          startCountryCode: $scope.seleWare.countryCode,\n          propertys: $scope.pList[0].propertyKey.split(',')\n        }, function (data) {\n          $scope.logSet = data;\n        });\n      }\n    };\n\n    $scope.closeBzFun = function () {\n      $scope.addskuFlag = false;\n    };\n\n    $scope.sureAddFun = function () {\n      if (!$scope.pList) {\n        layer.msg('Please search sku first');\n        return;\n      }\n\n      if (!$scope.addWlVal) {\n        layer.msg('Please select shipping method.');\n        return;\n      }\n\n      layer.load(2);\n      var addData = {};\n      addData.data = {};\n      addData.data.productId = $scope.pList[0].id;\n      addData.data.shopMethod = $scope.addWlVal.nameEn;\n      addData.data.defaultArea = $scope.seleWare ? $scope.seleWare.areaId : '';\n      addData.data = JSON.stringify(addData.data);\n      dsp.postFun('app/locProduct/assign', addData, function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n\n        if (data.data.statusCode == '200') {\n          var parms = {\n            type: '0',\n            pid: $scope.pList[0].id,\n            userid: userId\n          };\n          dsp.postFun('erp/publish/Calculation', parms, function () {});\n          $scope.addskuFlag = false;\n          $scope.logSet = [];\n          $scope.pList = [];\n        } else {\n          layer.msg('Add failed');\n        }\n      }, function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n      });\n    };\n    /*包装相关操作*/\n    //批量关联\n\n\n    $scope.batchAssociation = function (item) {\n      if (item.productType === '5') {\n        layer.msg('Packages are not available to the product. ');\n        return;\n      }\n\n      var itemData = {\n        type: \"0\",\n        pid: item.productId,\n        shopId: item.shopId,\n        NAMEEN: item.NAMEEN,\n        //商品名称\n        SKU: item.SKU,\n        // sku\n        prices: item.SELLPRICE,\n        //价格\n        packweight: item.WEIGHT,\n        //重量\n        connectType: 2 // 关联包装类型 2 是指派包装\n\n      };\n      location.href = '#/relevant-packaging/' + base64.encode(JSON.stringify(itemData)) + '/1';\n    }; //关联包装\n\n\n    $scope.associatedPackaging = function (item) {\n      if (item.productType === '5') {\n        layer.msg('Packages are not available to the product. ');\n        return;\n      }\n\n      console.log(item);\n      var arr = item.STANDARD ? item.STANDARD.split(',') : [],\n          long = null,\n          width = null,\n          height = null;\n      arr.forEach(function (o, i) {\n        if (o.indexOf('long') !== -1) {\n          long = o.substr(o.indexOf('=') + 1, o.length);\n        } else if (o.indexOf('width') !== -1) {\n          width = o.substr(o.indexOf('=') + 1, o.length);\n        } else if (o.indexOf('height') !== -1) {\n          height = o.substr(o.indexOf('=') + 1, o.length);\n        }\n      });\n      var itemData = {\n        type: \"1\",\n        vid: item.stanId,\n        shopId: item.shopId,\n        NAMEEN: item.NAMEEN,\n        //商品名称\n        SKU: item.SKU,\n        // sku\n        prices: item.SELLPRICE,\n        //价格\n        packweight: item.PACKWEIGHT,\n        //重量\n        long: long,\n        //长\n        width: width,\n        //宽\n        height: height //高\n\n      };\n      location.href = '#/relevant-packaging/' + base64.encode(JSON.stringify(itemData)) + '/1';\n    }; //查看包装\n\n\n    $scope.viewPackaging = function (item) {\n      console.log(item);\n      dsp.getFun('cj/PackProduct/getProductStandList?pid=' + item.PID + '&type=2', function (res) {\n        layer.closeAll('loading');\n\n        if (res.data.statusCode === '200') {\n          $scope.viewPackagingModal = true;\n          $scope.proStandList = res.data.result;\n          $('.singleSelect').select2();\n        }\n      }, function (err) {\n        $scope.proStandList = [];\n        layer.closeAll('loading');\n        console.log(err);\n      });\n\n      if (item.vid) {\n        // 如果点击的是变体,直接查询该变体\n        $scope.selectedVid = item.vid;\n        $scope.viewPackagingModal = true;\n        $scope.onSelectPackaging();\n      }\n    };\n\n    $scope.formateSize = function (size) {\n      var newSize = String(size);\n      newSize = newSize.replace(/Long/, 'Length');\n      return newSize;\n    }; //选择某个包装变体，查询详情\n\n\n    $scope.onSelectPackaging = function () {\n      if ($scope.selectedVid) {\n        // 选择了变体，显示变体下关联的包装商品\n        dsp.postFun('cj/PackProduct/getCheckedList', {\n          vid: $scope.selectedVid\n        }, function (res) {\n          layer.closeAll('loading');\n\n          if (res.data.statusCode == '200') {\n            $scope.vidCheckedList = res.data.result.checkedList;\n          } else {\n            $scope.vidCheckedList = [];\n          }\n        }, function (err) {\n          layer.closeAll('loading');\n          console.log(err);\n        });\n      } else {\n        // 没有选择，则不要\n        $scope.vidCheckedList = [];\n      }\n    }; // 关闭 view 弹框\n\n\n    $scope.closeViewPackagingModal = function () {\n      $scope.viewPackagingModal = false;\n      $scope.vidCheckedList = [];\n      $scope.selectedVid = '';\n      $('.singleSelect').select2('destroy');\n    }; //解除绑定\n\n\n    $scope.content2 = 'Are you sure to remove the binding?';\n    $scope.showPopUps = false;\n\n    $scope.unBind = function (item, isVarient) {\n      $scope.showPopUps = true;\n      $scope.popType = 3;\n      $scope.removeParams = {\n        type: '1',\n        pid: item.PID || ''\n      };\n\n      if (isVarient) {\n        // 如果展开变体，则传入变体id\n        $scope.removeParams.vid = item.stanId || '';\n      }\n    }; // 全选所有商品\n\n\n    $scope.chechedAll = function () {\n      $scope.isCheckAll = !$scope.isCheckAll;\n      console.log($scope.skulist);\n      $scope.skulist.forEach(function (o) {\n        o.ischeck = $scope.isCheckAll;\n      });\n      $scope.packNames = $scope.skulist.filter(function (o) {\n        return o.ischeck;\n      }).map(function (o) {\n        return {\n          NAMEEN: o.NAMEEN,\n          SKU: o.SKU,\n          prices: o.SELLPRICE,\n          packweight: o.WEIGHT,\n          pid: o.ID,\n          shopId: o.shopId\n        };\n      });\n      console.log($scope.packNames);\n      $scope.isConnection = $scope.skulist.filter(function (o) {\n        return o.ischeck;\n      }).length > 0;\n    }; // 单选商品\n\n\n    $scope.checkPro = function (item, idx) {\n      console.log(item);\n      item.ischeck = !item.ischeck;\n      var checkLen = $scope.skulist.filter(function (o) {\n        return o.ischeck;\n      }).length;\n      $scope.isConnection = checkLen > 0;\n      $scope.isCheckAll = $scope.skulist.length === checkLen;\n    }; // 单选变体商品\n\n\n    $scope.checkProVid = function (item, idx) {\n      console.log(item);\n      item.ischeck = !item.ischeck; // const checkLen = $scope.skulist.filter(o => o.ischeck).length\n      // $scope.isConnection = checkLen > 0\n      // $scope.isCheckAll = $scope.skulist.length === checkLen\n    }; // 批量关联包装\n\n\n    $scope.bulkConnection = function () {\n      $scope.packNames = $scope.skulist.filter(function (o) {\n        return o.ischeck;\n      }).map(function (o) {\n        return {\n          type: \"0\",\n          NAMEEN: o.NAMEEN,\n          SKU: o.SKU,\n          prices: o.SELLPRICE,\n          packweight: o.WEIGHT,\n          pid: o.productId,\n          shopId: o.shopId,\n          connectType: 2 // 关联包装类型 2 是指派包装\n\n        };\n      });\n      location.href = \"#/relevant-packaging/1/1\";\n      localStorage.setItem('relevantpackage', base64.encode(JSON.stringify($scope.packNames))); // location.href = `myCJ.html#/relevant-packaging//1/${base64.encode(JSON.stringify(ids))}`\n    }; // 批量解除包装弹框显示\n\n\n    $scope.bulkRemoveConnection = function () {\n      $scope.checkSkuList = $scope.skulist.filter(function (o) {\n        return o.ischeck;\n      });\n      if ($scope.checkSkuList.length > 0) $scope.batchDeletePopup = true;\n    }; // 批量移除包装\n\n\n    $scope.batchDeleteConfirmFun = function () {\n      var params = $scope.checkSkuList.map(function (o) {\n        return {\n          pid: o.PID,\n          shopId: '',\n          // 店铺id的是connetion包装删除，不传是skulist\n          vid: o.vid\n        };\n      });\n      dsp.postFun('cj/PackConnection/batchDelCorrelation', params, function (_ref3) {\n        var data = _ref3.data;\n\n        if (data.statusCode == '200') {\n          layer.msg(\"Bulk Removed Successfully\");\n        } else if (data.statusCode == '1102') {\n          layer.msg(\"You're not authorized to delete the packaging, please contact your agent for more information\");\n        } else {\n          layer.msg(\"Bulk Removing Failed\");\n        }\n\n        $scope.batchDeletePopup = false;\n      });\n    };\n\n    function removeConnect() {\n      var parms = {\n        data: $scope.ids,\n        type: '1'\n      };\n      layer.load(2);\n      dsp.postFun('cj/PackProduct/batchDelCorrelation', parms, function (res) {\n        layer.closeAll('loading');\n\n        if (res.data.statusCode == '200') {\n          layer.msg('Binding removed');\n          layer.close(2);\n          $scope.deletePopup = false;\n          getSkuList();\n        } else {\n          layer.msg('Binding removal failed');\n        }\n      }, function (err) {\n        layer.close(2);\n      });\n      return false;\n    }\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovc2t1LWxpc3Qvc2t1LWxpc3QuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vc3JjL3BhZ2VzL215Y2ovc2t1LWxpc3Qvc2t1LWxpc3QuanM/YTE0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gc2t1TGlzdEZhY3RvcnkoYW5ndWxhcikge1xyXG4gIGNvbnN0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteWNqLXNrdS1saXN0Lm1vZHVsZScsIFtdKTtcclxuICBjb25zdCBza3VQaWNIZWlnaHQgPSA1MjA7XHJcblxyXG4gIGFwcC5jb250cm9sbGVyKCdteWNqLXNrdS1saXN0LmN0cmwnLCBbJyRzY29wZScsICckcm9vdFNjb3BlJywgJ2RzcCcsXHJcbiAgICBmdW5jdGlvbiAoJHNjb3BlLCAkcm9vdFNjb3BlLCBkc3ApIHtcclxuICAgICAgJHNjb3BlLmdldExpc3RVcmwgPSAnYXBwL3JlYmF0ZS9nZXRBc3NpZ25BbmRWaXNpYmlsaXR5JztcclxuICAgICAgdmFyIHZpcCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd2aXAnKSA9PSB1bmRlZmluZWQgPyBcIlwiIDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3ZpcCcpO1xyXG4gICAgICBpZiAodmlwID09ICcxJykgey8vdmlwRmxhZ1xyXG4gICAgICAgICQoJy5oZWFkZXItbmF2JykuYWRkQ2xhc3MoJ3ZpcEZsYWcnKTtcclxuICAgICAgICAkKCcubXljai1yaWdodC13cmFwJykuY3NzKCdiYWNrZ3JvdW5kJywgJyNGMEVERTcnKS5hZGRDbGFzcygndmlwJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnLmhlYWRlci1uYXYnKS5yZW1vdmVDbGFzcygndmlwRmxhZycpO1xyXG4gICAgICAgICQoJy5teWNqLXJpZ2h0LXdyYXAnKS5jc3MoJ2JhY2tncm91bmQnLCAnI2YyZjNmNScpLnJlbW92ZUNsYXNzKCd2aXAnKTtcclxuICAgICAgfVxyXG4gICAgICAkKCcuaGVhZGVyLW5hdiBsaScpLmVxKDIpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJHNjb3BlLmFmdGVyR2V0TGVmdE5hdiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodmlwID09ICcxJykge1xyXG4gICAgICAgICAgJCgnLm15Y2otbGVmdC1iYXInKS5hZGRDbGFzcygndmlwRmxhZycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKCcubXljai1sZWZ0LWJhcicpLnJlbW92ZUNsYXNzKCd2aXBGbGFnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJy5teWNqLWxlZnQtYmFyIGxpJykuZXEoMSkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICAgIGRzcC5zZXRSaWdodE1pbkhlaWdodCgpO1xyXG4gICAgICBjb25zb2xlLmxvZygnbXljai1za3UtbGlzdC5jdHJsJylcclxuICAgICAgdmFyIGJhc2U2NCA9IG5ldyBCYXNlNjQoKTtcclxuICAgICAgdmFyIHVzZXJJZCA9IGJhc2U2NC5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpID09IHVuZGVmaW5lZCA/IFwiXCIgOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykpO1xyXG4gICAgICAvLyBsYXllci5sb2FkKDIse3NoYWRlOiBbMC4zLCAnIzM5M0Q0OSddfSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHVzZXJJZClcclxuICAgICAgJHNjb3BlLnNrdXNlYXJjaCA9ICcnO1xyXG4gICAgICAkc2NvcGUucGFnZVNpemUgPSAnMTAnO1xyXG4gICAgICAkc2NvcGUucGFnZU51bSA9ICcxJztcclxuICAgICAgJHNjb3BlLnNrdVRvdGFsUGFnZSA9ICcnO1xyXG4gICAgICAkc2NvcGUuc2t1c2VhcmNoID0gJyc7XHJcbiAgICAgICRzY29wZS5saXN0VHlwZSA9ICcxJztcclxuICAgICAgJHNjb3BlLmNvbnRlbnQgPSAnQXJlIHlvdSBzdXJlIHRvIGRlbGV0ZSBpdD8nO1xyXG5cclxuICAgICAgLy8gJHNjb3BlLmdldExpc3RVcmwgPSAnYXBwL3JlYmF0ZS9nZXRBc3NpZ25BbmRWaXNpYmlsaXR5JztcclxuXHJcbiAgICAgICRzY29wZS4kb24oJ3NoaXAtc2V0dGluZycsIGZ1bmN0aW9uIChldiwgZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLmZsYWcgPT0gJ3N1Ym1pdC1zaGlwLXN1Y2Nlc3MnKSB7XHJcbiAgICAgICAgICAkc2NvcGUuc2t1bGlzdFtkYXRhLnNoaXAucHJvaW5kZXhdLnNob3BNZXRob2QgPSBkYXRhLnNoaXAuc2hpcE1ldGhvZDtcclxuICAgICAgICAgICRzY29wZS5za3VsaXN0W2RhdGEuc2hpcC5wcm9pbmRleF0uZGVmYXVsdEFyZWEgPSBkYXRhLnNoaXAuZGVmYXVsdEFyZWE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy/ojrflj5bmibnph4/liKDpmaTmnYPpmZBcclxuICAgICAgZnVuY3Rpb24gZ2V0QmF0Y2hQZXJtaXNzdGlvbigpe1xyXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9ICAkcm9vdFNjb3BlLmJhc2U2NC5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHVzZXJJZClcclxuICAgICAgICBkc3AucG9zdEZ1bignY2ovUGFja0Nvbm5lY3Rpb24vZ2V0RGVsUGFja1Blcm1pc3Npb25zJyx7dXNlcklkOnVzZXJJZH0sKHJlcyk9PntcclxuICAgICAgICAgIGlmKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKXtcclxuICAgICAgICAgICAgJHNjb3BlLnBhY2tTdGF0dXMgPSByZXMuZGF0YS5yZXN1bHQucGFja1N0YXR1cyAvLzAt5pegIDEt5pyJXHJcbiAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgJHNjb3BlLnBhY2tTdGF0dXMgPSAwXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICBnZXRCYXRjaFBlcm1pc3N0aW9uKCk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBnZXRMaXN0RGF0YShwYWdlTnVtLCBwYWdlU2l6ZSkge1xyXG4gICAgICAgIHZhciBzZW5kRGF0YTtcclxuICAgICAgICBzZW5kRGF0YSA9IHtcclxuICAgICAgICAgIHBhZ2VOdW06IHBhZ2VOdW0sXHJcbiAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemUsXHJcbiAgICAgICAgICB0eXBlOiAkc2NvcGUubGlzdFR5cGUsXHJcbiAgICAgICAgICBzZWFyY2g6ICRzY29wZS5za3VzZWFyY2gucmVwbGFjZSgvJy9nLCBcIicnXCIpLFxyXG4gICAgICAgICAgaXNXYXJuaW5nOiAkc2NvcGUuaXNXYXJuaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzZW5kRGF0YSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHNldHRsZURhdGEob2JqKSB7XHJcbiAgICAgICAgdmFyIHByb2R1Y3RMaXN0ID0gb2JqLmxpc3QgfHwgW107XHJcbiAgICAgICAgdmFyIHJlbWFya0FyciA9IG9iai5yZW1hcmsgfHwgW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9kdWN0TGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgcHJvZHVjdExpc3RbaV0uZG93biA9IGZhbHNlO1xyXG4gICAgICAgICAgcHJvZHVjdExpc3RbaV0uQklHSU1HID0gcHJvZHVjdExpc3RbaV0uQklHSU1HLnJlcGxhY2UoJ2h0dHBzOi8vJywgJycpLnJlcGxhY2UoJ2h0dHA6Ly8nLCAnJyk7XHJcbiAgICAgICAgICBwcm9kdWN0TGlzdFtpXS5kaXNjb3VudFByaWNlID0gZHNwLmNhY3VEaXNjb3VudChwcm9kdWN0TGlzdFtpXS5TRUxMUFJJQ0UsIHByb2R1Y3RMaXN0W2ldLmRpc2NvdW50UHJpY2VSYXRlKTtcclxuICAgICAgICAgIHByb2R1Y3RMaXN0W2ldLmRlY291bnRyeSA9IG51bGw7XHJcbiAgICAgICAgICBwcm9kdWN0TGlzdFtpXS5kZWx0UHJpY2UgPSAwO1xyXG4gICAgICAgICAgcHJvZHVjdExpc3RbaV0uZGlzY291bnRQcmljZVNoaXAgPSAwO1xyXG4gICAgICAgICAgaWYgKHByb2R1Y3RMaXN0W2ldLmRlbHRQcmljZSkge1xyXG4gICAgICAgICAgICBwcm9kdWN0TGlzdFtpXS5kaXNjb3VudFByaWNlU2hpcCA9IGRzcC5jYWN1RGlzY291bnQocHJvZHVjdExpc3RbaV0uZGVsdFByaWNlLCBwcm9kdWN0TGlzdFtpXS5kaXNjb3VudFNob3BSYXRlKTtcclxuICAgICAgICAgICAgcHJvZHVjdExpc3RbaV0uQU1PVU5UUFJJQ0UgPSBkc3AuY2FjdUFtb3VudChwcm9kdWN0TGlzdFtpXS5kaXNjb3VudFByaWNlLCBwcm9kdWN0TGlzdFtpXS5kaXNjb3VudFByaWNlU2hpcCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwcm9kdWN0TGlzdFtpXS5kaXNjb3VudFByaWNlU2hpcCA9ICcnO1xyXG4gICAgICAgICAgICBwcm9kdWN0TGlzdFtpXS5BTU9VTlRQUklDRSA9IHByb2R1Y3RMaXN0W2ldLmRpc2NvdW50UHJpY2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlbWFya0Fyci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBpZiAocHJvZHVjdExpc3RbaV0uc2hvcE1ldGhvZCAmJiBwcm9kdWN0TGlzdFtpXS5zaG9wTWV0aG9kID09IHJlbWFya0FycltqXS5uYW1lZW4pIHtcclxuICAgICAgICAgICAgICBwcm9kdWN0TGlzdFtpXS53dWxpdVJlbWFyayA9IHJlbWFya0FycltqXS5yZW1hcms7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIOeJqea1geivleeul+e7hOS7tueUqFxyXG4gICAgICAgICAgcHJvZHVjdExpc3RbaV0uc2hpcGluZm8gPSB7XHJcbiAgICAgICAgICAgIHdlaWdodDogcHJvZHVjdExpc3RbaV0ucGFja3dlaWdodCxcclxuICAgICAgICAgICAgZW5OYW1lOiBwcm9kdWN0TGlzdFtpXS5zaG9wTWV0aG9kLFxyXG4gICAgICAgICAgICBwaWQ6IHByb2R1Y3RMaXN0W2ldLlBJRCxcclxuICAgICAgICAgICAgc2hpcERpc2NvdW50OiBwcm9kdWN0TGlzdFtpXS5kaXNjb3VudFNob3BSYXRlLFxyXG4gICAgICAgICAgICBhcmVhQ291bnRyeUNvZGU6IHByb2R1Y3RMaXN0W2ldLmFyZWFDb3VudHJ5Q29kZSxcclxuICAgICAgICAgICAgaW5kZXgxOiBpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5za3VsaXN0ID0gcHJvZHVjdExpc3Q7XHJcbiAgICAgIH1cclxuICAgICAgLy8g54mp5rWB6K+V566X57uE5Lu26L+U5Zue5YC85o6l5pS2XHJcbiAgICAgICRzY29wZS4kb24oJ3NhdmVTaGlwUHJpY2UnLCBmdW5jdGlvbiAoZCwgZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLmluZGV4MiA+PSAwICYmIGRhdGEuaW5kZXgxID49IDApIHtcclxuICAgICAgICAgIGlmIChkYXRhLnNoaXBEaXNjb3VudFByaWNlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5za3VsaXN0W2RhdGEuaW5kZXgxXS52TGlzdFtkYXRhLmluZGV4Ml0uaXNQcm9BbW91bnRUaXAgPSBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJHNjb3BlLnNrdWxpc3RbZGF0YS5pbmRleDFdLnZMaXN0W2RhdGEuaW5kZXgyXS5BTU9VTlRQUklDRSA9IGRzcC5jYWN1QW1vdW50KCRzY29wZS5za3VsaXN0W2RhdGEuaW5kZXgxXS52TGlzdFtkYXRhLmluZGV4Ml0uZGlzY291bnRQcmljZSwgZGF0YS5zaGlwRGlzY291bnRQcmljZSB8fCAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKGRhdGEuc2hpcERpc2NvdW50UHJpY2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNrdWxpc3RbZGF0YS5pbmRleDFdLmlzUHJvQW1vdW50VGlwID0gZmFsc2VcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICRzY29wZS5za3VsaXN0W2RhdGEuaW5kZXgxXS5BTU9VTlRQUklDRSA9IGRzcC5jYWN1QW1vdW50KCRzY29wZS5za3VsaXN0W2RhdGEuaW5kZXgxXS5kaXNjb3VudFByaWNlLCBkYXRhLnNoaXBEaXNjb3VudFByaWNlIHx8IDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICRzY29wZS4kYXBwbHkoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBmdW5jdGlvbiBnZXRTa3VMaXN0KCkge1xyXG4gICAgICAgICRzY29wZS5za3VsaXN0ID0gW107XHJcblxyXG5cdCAgICAgICRzY29wZS5pc0NoZWNrQWxsID0gZmFsc2VcclxuICAgICAgICAkcm9vdFNjb3BlLiRvbigkc2NvcGUuZ2V0TGlzdFVybCwgKF8sIGJvb2wpID0+IHtcclxuICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gYm9vbDtcclxuICAgICAgICAgIGlmIChib29sKSAkc2NvcGUubm90RGF0YUZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJHNjb3BlLmdldExpc3RVcmwsIGdldExpc3REYXRhKCRzY29wZS5wYWdlTnVtLCAkc2NvcGUucGFnZVNpemUpLCBmdW5jdGlvbiBTS1VnZXQoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICB2YXIgb2JqID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJTS1VcIiwgb2JqKTtcclxuICAgICAgICAgICRzY29wZS5za3VhbGwgPSBvYmo7XHJcbiAgICAgICAgICBpZiAob2JqLmNvdW50ID09IDApIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNrdVRvdGFsUGFnZSA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS5za3VsaXN0ID0gW107XHJcbiAgICAgICAgICAgICRzY29wZS5ub3REYXRhRm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2NvcGUudG90YWxOdW0gPSBvYmouY291bnQ7XHJcbiAgICAgICAgICBzZXR0bGVEYXRhKG9iaik7XHJcbiAgICAgICAgICAkc2NvcGUudG90YWxDb3VudHMgPSBNYXRoLmNlaWwoJHNjb3BlLnRvdGFsTnVtIC8gJHNjb3BlLnBhZ2VTaXplKTtcclxuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdwYWdlLWRhdGEnLCB7XHJcbiAgICAgICAgICAgIHBhZ2VOdW06ICRzY29wZS5wYWdlTnVtLFxyXG4gICAgICAgICAgICB0b3RhbE51bTogJHNjb3BlLnRvdGFsQ291bnRzLFxyXG4gICAgICAgICAgICB0b3RhbENvdW50czogJHNjb3BlLnRvdGFsTnVtLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogJHNjb3BlLnBhZ2VTaXplLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGdldFNrdUxpc3QoKTtcclxuXHJcblxyXG4gICAgICAvLyDojrflj5blj5jkvZPliJfooahcclxuICAgICAgJHNjb3BlLnNob3dWTGlzdCA9IGZ1bmN0aW9uIChpdGVtLCBpbmRleDEpIHtcclxuICAgICAgICAvLyBkc3AubG9hZCgpO1xyXG4gICAgICAgIGNvbnN0IGlzV2FybmluZyA9IGl0ZW0uaXNXYXJuaW5nID09ICcxJyA/ICcxJyA6ICcnO1xyXG4gICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9yZWJhdGUvZ2V0QXNzaWduQW5kVmlzaWJpbGl0eWRldGFpbGwnLCBKU09OLnN0cmluZ2lmeSh7IHByb2R1Y3RJZDogaXRlbS5wcm9kdWN0SWQsIGlzV2FybmluZyB9KSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKVxyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhLmxpc3QpO1xyXG4gICAgICAgICAgaXRlbS5kb3duID0gdHJ1ZTtcclxuICAgICAgICAgIHZhciB2TGlzdCA9IGRhdGEuZGF0YS5saXN0O1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdkxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdkxpc3RbaV0uZGlzY291bnRQcmljZSA9IGRzcC5jYWN1RGlzY291bnQodkxpc3RbaV0uU0VMTFBSSUNFLCB2TGlzdFtpXS5kaXNjb3VudFByaWNlUmF0ZSk7XHJcbiAgICAgICAgICAgIHZMaXN0W2ldLmRlY291bnRyeSA9IG51bGw7XHJcbiAgICAgICAgICAgIHZMaXN0W2ldLmRlbHRQcmljZSA9IDA7XHJcbiAgICAgICAgICAgIHZMaXN0W2ldLmRpc2NvdW50UHJpY2VTaGlwID0gMDtcclxuICAgICAgICAgICAgaWYgKHZMaXN0W2ldLmRlbHRQcmljZSkge1xyXG4gICAgICAgICAgICAgIHZMaXN0W2ldLmRpc2NvdW50UHJpY2VTaGlwID0gZHNwLmNhY3VEaXNjb3VudCh2TGlzdFtpXS5kZWx0UHJpY2UsIHZMaXN0W2ldLmRpc2NvdW50U2hvcFJhdGUpO1xyXG4gICAgICAgICAgICAgIHZMaXN0W2ldLkFNT1VOVFBSSUNFID0gZHNwLmNhY3VBbW91bnQodkxpc3RbaV0uZGlzY291bnRQcmljZSwgdkxpc3RbaV0uZGlzY291bnRQcmljZVNoaXApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHZMaXN0W2ldLmRpc2NvdW50UHJpY2VTaGlwID0gJyc7XHJcbiAgICAgICAgICAgICAgdkxpc3RbaV0uQU1PVU5UUFJJQ0UgPSB2TGlzdFtpXS5kaXNjb3VudFByaWNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDlsZXnpLrlj5jkvZPlsZ7mgKdcclxuICAgICAgICAgICAgaWYodkxpc3RbaV0udmFyaWFudGtleSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGN1clZhcmllbnRWYWwgPSBBcnJheS5pc0FycmF5KHZMaXN0W2ldLnZhcmlhbnRrZXkpID8gdkxpc3RbaV0udmFyaWFudGtleSA6IHZMaXN0W2ldLnZhcmlhbnRrZXkuc3BsaXQoJy0nKTtcclxuICAgICAgICAgICAgICB2TGlzdFtpXS52YXJpZW50U3RyID0gY3VyVmFyaWVudFZhbC5qb2luKCc7ICcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgLy8g54mp5rWB6K+V566X57uE5Lu255SoXHJcbiAgICAgICAgICAgIHZMaXN0W2ldLnNoaXBpbmZvID0ge1xyXG4gICAgICAgICAgICAgIHdlaWdodDogdkxpc3RbaV0uUEFDS1dFSUdIVCxcclxuICAgICAgICAgICAgICBlbk5hbWU6IHZMaXN0W2ldLnNob3BNZXRob2QsXHJcbiAgICAgICAgICAgICAgcGlkOiB2TGlzdFtpXS5QSUQsXHJcbiAgICAgICAgICAgICAgc2hpcERpc2NvdW50OiB2TGlzdFtpXS5kaXNjb3VudFNob3BSYXRlLFxyXG4gICAgICAgICAgICAgIGFyZWFDb3VudHJ5Q29kZTogJHNjb3BlLnNrdWxpc3RbaW5kZXgxXS5hcmVhQ291bnRyeUNvZGUsXHJcbiAgICAgICAgICAgICAgaW5kZXgxOiBpbmRleDEsXHJcbiAgICAgICAgICAgICAgaW5kZXgyOiBpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAkc2NvcGUuc2t1bGlzdFtpbmRleDFdLnZMaXN0ID0gdkxpc3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmhpZGVWTGlzdCA9IGZ1bmN0aW9uIChpdGVtLCBpbmRleDEpIHtcclxuICAgICAgICBpdGVtLmRvd24gPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuc2t1bGlzdFtpbmRleDFdLnZMaXN0ID0gW107XHJcbiAgICAgIH1cclxuICAgICAgLy9za3VkZWxldFxyXG4gICAgICAkc2NvcGUuc2t1ZGVsZXQgPSBmdW5jdGlvbiAoaXRlbSwgaW5kZXgxLCBpbmRleDIpIHtcclxuICAgICAgICAkc2NvcGUuY29udGVudCA9ICdBcmUgeW91IHN1cmUgdG8gZGVsZXRlIGl0Pyc7XHJcbiAgICAgICAgJHNjb3BlLnBvcFR5cGUgPSAxO1xyXG4gICAgICAgICRzY29wZS5kZWxldGVQb3B1cCA9ICB0cnVlXHJcbiAgICAgICAgJHNjb3BlLml0ZW0gPSBpdGVtXHJcbiAgICAgICAgJHNjb3BlLmluZGV4MSA9IGluZGV4MVxyXG4gICAgICAgICRzY29wZS5pbmRleDIgPSBpbmRleDJcclxuICAgICAgfVxyXG4gICAgICAvLyDojrflj5blvLnnqpfnu4Tku7blhbPpl63mjInpkq5cclxuICAgICAgJHNjb3BlLiRvbignY2xvc2VQb3BVcHMnLCAoZSwgZGF0YSkgPT4ge1xyXG4gICAgICAgICRzY29wZS5kZWxldGVQb3B1cCA9IGRhdGEuc2hvd1BvcFVwcztcclxuICAgICAgICAkc2NvcGUuc2hvd1BvcFVwcyA9IGZhbHNlO1xyXG4gICAgICB9KVxyXG4gICAgICAvLyDojrflj5blvLnnqpfnu4Tku7bnoa7lrprmjInpkq5cclxuICAgICAgJHNjb3BlLiRvbignY29uZmlybVBvcFVwcycsIChlLCBkKSA9PiB7XHJcbiAgICAgICAgaWYoJHNjb3BlLnBvcFR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgJHNjb3BlLmRlbGV0ZUNvbmZpcm1GdW4oKTtcclxuICAgICAgICB9IGVsc2UgaWYoJHNjb3BlLnBvcFR5cGUgPT0gMykge1xyXG4gICAgICAgICAgJHNjb3BlLmJhdGNoUmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgJHNjb3BlLnRleHQgPSAnTm90ZTogVGhlIENKIGludmVudG9yeSBvZiB0aGlzIHByb2R1Y3QgaXMgbGVzcyB0aGFuIHRoZSBhdmVyYWdlIGRhaWx5IHNhbGVzIHZvbHVtZSBvZiB0aGUgcGFzdCA3IGRheXMuJ1xyXG4gICAgICAkc2NvcGUuZ2V0VGVzdCA9IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICBpZighaXRlbSkgcmV0dXJuO1xyXG4gICAgICAgIGlmKGl0ZW0ud2FybmluZ1ZhbHVlPT09aXRlbS5hY3R1YWxWYWx1ZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnRleHQgPSAnTm90ZTogVGhlIENKIGludmVudG9yeSBvZiB0aGlzIHByb2R1Y3QgaXMgdGhlIHNhbWUgYXMgdGhlIGF2ZXJhZ2UgZGFpbHkgc2FsZXMgdm9sdW1lIG9mIHRoZSBwYXN0IDcgZGF5cy4nO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgcmV0dXJuICRzY29wZS50ZXh0O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuYmF0Y2hSZW1vdmUgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coMSlcclxuICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9QYWNrUHJvZHVjdC9kZWxDb3JyZWxhdGlvbicsICRzY29wZS5yZW1vdmVQYXJhbXMsIChyZXMpID0+IHtcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PSAnMjAwJykge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd1BvcFVwcyA9IGZhbHNlXHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnQmluZGluZyByZW1vdmVkJylcclxuICAgICAgICAgICAgZ2V0U2t1TGlzdCgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNob3dQb3BVcHMgPSBmYWxzZVxyXG4gICAgICAgICAgICBsYXllci5tc2coJ0JpbmRpbmcgcmVtb3ZhbCBmYWlsZWQnKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICRzY29wZS5zaG93UG9wVXBzID0gZmFsc2VcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuZGVsZXRlQ2FuY2VsRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5kZWxldGVQb3B1cCA9ICBmYWxzZVxyXG4gICAgICAgICRzY29wZS5pdGVtID0gbnVsbFxyXG4gICAgICAgICRzY29wZS5pbmRleDEgPSBudWxsXHJcbiAgICAgICAgJHNjb3BlLmluZGV4MiA9IG51bGxcclxuICAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLmRlbGV0ZUNvbmZpcm1GdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IHtpdGVtLCBpbmRleDEsIGluZGV4Mn0gPSAkc2NvcGVcclxuICAgICAgICB2YXIgb3BlTGlzdDtcclxuICAgICAgICAgICAgdmFyIGRlbGV0ZVVybDtcclxuICAgICAgICAgICAgaWYgKGluZGV4MiA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgZGVsZXRlVXJsID0gJ2FwcC9jb25uZWN0aW9uL2RlbGV0ZUNvbmRldGFpbGwnO1xyXG4gICAgICAgICAgICAgIG9wZUxpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KCRzY29wZS5za3VsaXN0W2luZGV4MV0udkxpc3QpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBkZWxldGVVcmwgPSAnYXBwL2Nvbm5lY3Rpb24vZGVsZXRlQ29uJztcclxuICAgICAgICAgICAgICBvcGVMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSgkc2NvcGUuc2t1bGlzdCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGRzcC5sb2FkKCk7XHJcbiAgICAgICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgICAgIGRzcC5wb3N0RnVuKGRlbGV0ZVVybCwgeyBcImRhdGFcIjogXCJ7J2lkJzonXCIgKyAoaXRlbS5wcm9kdWN0SWQgfHwgaXRlbS5JRCkgKyBcIid9XCIgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgICB2YXIgZGF0YSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXNDb2RlICE9IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdEZWxldGUgZmFpbGVkJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnRGVsZXRlZCBTdWNjZXNzZnVsbHknLCB7IHRpbWU6IDEwMDAgfSk7XHJcbiAgICAgICAgICAgICAgaWYgKGluZGV4MiA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBvcGVMaXN0LnNwbGljZShpbmRleDIsIDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNrdWxpc3RbaW5kZXgxXS52TGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob3BlTGlzdCkpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnZXRTa3VMaXN0KCk7IC8vIOWIt+aWsOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLnNrdWxpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9wZUxpc3QpKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgbGF5ZXIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlUG9wdXAgPSAgZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOaJk+W8gOmihOitpuW8ueahhlxyXG4gICAgICAkc2NvcGUuZHJvcERvd24gPSAoaXRlbSwgZmlsZWRzKSA9PiB7XHJcbiAgICAgICAgJHNjb3BlLnNrdWxpc3QgPSAkc2NvcGUuc2t1bGlzdC5tYXAobyA9PiB7ICAgXHJcbiAgICAgICAgICAgaWYoby52TGlzdCkge1xyXG4gICAgICAgICAgICAgIG8udkxpc3QgPSBvLnZMaXN0Lm1hcChpID0+ICh7XHJcbiAgICAgICAgICAgICAgICAuLi5pLFxyXG4gICAgICAgICAgICAgICAgW2ZpbGVkc106IGlbZmlsZWRzXSA/IGZhbHNlIDogaS52aWQgPT09IGl0ZW0udmlkLFxyXG4gICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIC8vIOWFs+mXremihOitpuW8ueahhlxyXG4gICAgICAkc2NvcGUuY2xvc2VJbnZlbnRvcnlNb2RhbCA9IChmaWxlZHMpID0+IHtcclxuICAgICAgICAkc2NvcGUuc2t1bGlzdCA9ICRzY29wZS5za3VsaXN0Lm1hcCggbyA9PiB7XHJcbiAgICAgICAgICBpZihvLnZMaXN0KSB7XHJcbiAgICAgICAgICAgIG8udkxpc3QgPSBvLnZMaXN0Lm1hcChpID0+ICh7XHJcbiAgICAgICAgICAgICAgLi4uaSxcclxuICAgICAgICAgICAgICBbZmlsZWRzXTogZmFsc2UsXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHJldHVybiBvO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOS4jeWGjeaPkOmGklxyXG4gICAgICAkc2NvcGUud2Fybk5vTG9uZ2VyID0gZnVuY3Rpb24odmlkKSB7XHJcbiAgICAgICAgbGF5ZXIubG9hZCgyKTtcclxuICAgICAgICBkc3AucG9zdEZ1bignZWFybHktd2FybmluZy13ZWIvZWFybHlXYXJuaW5nL25ldmVyUHJvbXB0QWdhaW4nLCB7ZW50aXR5SWQ6IHZpZH0sICh7ZGF0YX0pID0+IHtcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICBnZXRTa3VMaXN0KCk7IFxyXG4gICAgICAgICAgICBsYXllci5jbG9zZSgyKTtcclxuICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdOZXZlciBQcm9tcHQgQWdhaW4gZmFpbGVkJylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICBsYXllci5jbG9zZSgyKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuYnV5bGlzdCA9IFtdO1xyXG4gICAgICAvLyDngrnlh7votK3kubDnp4HmnInlupPlrZjvvIzlsIbllYblk4HliqDlhaXotK3nianovablkI7ot7PovaxcclxuICAgICAgJHNjb3BlLmFkZFByaXZhdGVUb0NhciA9IGZ1bmN0aW9uKHZpdGVtKSB7ICBcclxuICAgICAgICBkc3AucG9zdEZ1bignYXBwL2J1eU9yZGVyL2dldFNob3BwaW5nQ2FydCcsIHt9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5jb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnNob3BwaW5nQ2FydCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJ1eWxpc3QgPSBkYXRhLmRhdGEuc2hvcHBpbmdDYXJ0LnByb2R1Y3RMaXN0IHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmluZElkeCA9IGRzcC5maW5kSW5kZXhCeUtleSgkc2NvcGUuYnV5bGlzdCwgJ1NLVScsIHZpdGVtLlNLVSk7XHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL2J1eU9yZGVyL2dvdVd1Q2hlTWFpRGlhbicsIHsgcHJvZHVjdElkOiB2aXRlbS5JRCB9LCBmdW5jdGlvbiAoZGF0YSkgeyB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gJHJvb3RTY29wZS51c2VySW5mby50b2tlbjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICAgICAgaWQ6IHZpdGVtLlBJRCxcclxuICAgICAgICAgICAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkc3AucG9zdEZ1bignY2ovbG9jUHJvZHVjdC9odW9RdVNoYW5nUGluWGlhbmdRaW5nJywgey4uLnBhcmFtc30sIGZ1bmN0aW9uICh7ZGF0YX0pIHsgXHJcbiAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3RhdHVzQ29kZSA9PSAyMDAgJiYgZGF0YS5yZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFMaXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBOQU1FRU46IHZpdGVtLk5BTUVFTixcclxuICAgICAgICAgICAgICAgICAgICAgICAgQklHSU1HOiB2aXRlbS5JTUcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29sbGVjdDpkYXRhLnJlc3VsdC5pc0NvbGxlY3QsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNjb3VudFByaWNlOiB2aXRlbS5kaXNjb3VudFByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtY291bnQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNFTExQUklDRTogdml0ZW0uU0VMTFBSSUNFLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb2xsZWN0SUQ6IHZpdGVtLlBJRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIElEOlx0dml0ZW0udmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTS1U6dml0ZW0uU0tVXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluZElkeCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJ1eWxpc3QudW5zaGlmdChkYXRhTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5idXlsaXN0W2ZpbmRJZHhdLml0ZW1jb3VudCA9ICgkc2NvcGUuYnV5bGlzdFtmaW5kSWR4XS5pdGVtY291bnQgKiAxKSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5idXlsaXN0W2ZpbmRJZHhdLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9idXlPcmRlci9lZGl0U2hvcHBpbmdDYXJ0Jywge3Byb2R1Y3RMaXN0OiAkc2NvcGUuYnV5bGlzdH0sZnVuY3Rpb24gKHJlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cub3JpZ2luICsgJy9teUNKLmh0bWwjL2NhcnQvc2t1JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSkgXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5omT5byAU2t1YWxpYXPlvLnnqpdcclxuICAgICAgJHNjb3BlLnNrdWFsaWFzTGlzdCA9IHt9XHJcbiAgICAgICRzY29wZS5hZGRTa3VMaXN0ID0gKGl0ZW0sIGluZGV4MiwgaW5kZXgxKSA9PiB7XHJcbiAgICAgICAgJHNjb3BlLnNrdU5hbWUgPSAnJztcclxuICAgICAgICAkc2NvcGUuc2t1SXRlbUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuc2t1YWxpYXMgPSB0cnVlO1xyXG4gICAgICAgICRzY29wZS5za3VJdGVtSGludCA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLnNrdWFsaWFzTGlzdC5zdGFuSWQgPSBpdGVtLnN0YW5JZDtcclxuICAgICAgICAkc2NvcGUuc2t1YWxpYXNMaXN0LmluZGV4MiA9IGluZGV4MjtcclxuICAgICAgICAkc2NvcGUuc2t1YWxpYXNMaXN0LmluZGV4MSA9IGluZGV4MTtcclxuICAgICAgICAkc2NvcGUuc2t1bGlhc0luZGV4ID0gW2luZGV4MSwgaW5kZXgyXVxyXG4gICAgICAgIGlmICghaXRlbS5za3VBbGlzYSkge1xyXG4gICAgICAgICAgJHNjb3BlLnNrdWFsaWFzTGlzdC5za3VBbGlzYSA9IFtdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuc2t1YWxpYXNMaXN0LnNrdUFsaXNhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpdGVtLnNrdUFsaXNhLnNwbGl0KCcsJykpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIC8vIOWFs+mXrVNrdWFsaWFz5by556qXXHJcbiAgICAgICRzY29wZS5jbG9zZVNrdWFsaWFzID0gKCkgPT4ge1xyXG4gICAgICAgICRzY29wZS5za3VhbGlhcyA9IGZhbHNlO1xyXG4gICAgICB9O1xyXG4gICAgICAvLyDmt7vliqBTa3VOYW1lXHJcbiAgICAgICRzY29wZS5hZGRTcGxpdCA9ICgpID0+IHtcclxuICAgICAgICBpZiAoJHNjb3BlLnNrdWFsaWFzTGlzdC5za3VBbGlzYSAmJiAkc2NvcGUuc2t1YWxpYXNMaXN0LnNrdUFsaXNhLmxlbmd0aCA9PT0gMykge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdUaGUgcXVhbnRpdHkgdGhhdCBjYW4gYmUgYWRkZWQgaXMgbGltaXRlZCB0byAzLicpO1xyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5za3VJdGVtRmxhZyA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLnNrdUl0ZW1IaW50ID0gZmFsc2U7XHJcbiAgICAgIH07XHJcbiAgICAgIC8vIOWIoOmZpFNrdWFsaWFzXHJcbiAgICAgICRzY29wZS5kZWxTa3VhbGlhcyA9IChpdGVtKSA9PiB7XHJcbiAgICAgICAgbGF5ZXIub3Blbih7XHJcbiAgICAgICAgICB0eXBlOiAxLFxyXG4gICAgICAgICAgY29udGVudDogJyA8cD5BcmUgeW91IHN1cmUgdG8gZGVsZXRlIGl0PzwvcD4nLFxyXG4gICAgICAgICAgYXJlYTogWyc0ODBweCcsICcyMDBweCddLFxyXG4gICAgICAgICAgY2xvc2VCdG46IDAsXHJcbiAgICAgICAgICBzaGFkZUNsb3NlOiB0cnVlLFxyXG4gICAgICAgICAgdGl0bGU6IG51bGwsXHJcbiAgICAgICAgICBza2luOiBcIlwiLFxyXG4gICAgICAgICAgYnRuOiBbJ05vJywgJ1llcyddLFxyXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGxheWVybywgaW5kZXgpIHtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB5ZXM6IGZ1bmN0aW9uIChpbmRleCwgbGF5ZXJvKSB7XHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlKGluZGV4KTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBidG4yOiBmdW5jdGlvbiAoaW5kZXgsIGxheWVybykge1xyXG4gICAgICAgICAgICBsYXllci5jbG9zZShpbmRleCk7XHJcbiAgICAgICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgICAgIHZpZDogJHNjb3BlLnNrdWFsaWFzTGlzdC5zdGFuSWQsXHJcbiAgICAgICAgICAgICAgYmllTWluZzogaXRlbVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdwb2pvL3Byb2R1Y3Qvc2hhbkNodUJpZU1pbmcnLCBkYXRhLCAocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09ICcyMDAnKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2t1YWxpYXNMaXN0LnNrdUFsaXNhLnNwbGljZSgkc2NvcGUuc2t1YWxpYXNMaXN0LnNrdUFsaXNhLmluZGV4T2YoaXRlbSksIDEpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNrdWxpc3RbJHNjb3BlLnNrdWFsaWFzTGlzdC5pbmRleDFdLnZMaXN0WyRzY29wZS5za3VhbGlhc0xpc3QuaW5kZXgyXS5za3VBbGlzYSA9ICRzY29wZS5za3VhbGlhc0xpc3Quc2t1QWxpc2Euam9pbignLCcpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ0RlbGV0aW9uIGZhaWxlZCcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8gcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICAvLyDlj5bmtojmt7vliqBTa3VhbGlhc1xyXG4gICAgICAkc2NvcGUuY2FuY2VsU2t1ID0gKCkgPT4ge1xyXG4gICAgICAgICRzY29wZS5za3VJdGVtRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5za3VJdGVtSGludCA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLnNrdU5hbWUgPSAnJztcclxuICAgICAgfTtcclxuICAgICAgLy8g56Gu5a6a5re75YqgU2t1YWxpYXNcclxuICAgICAgJHNjb3BlLmNvbmZpcm1Ta3UgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuc2t1TmFtZSkge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdZb3VyIFNLVSBpcyByZXF1aXJlZCcpXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0ckxlbmd0aCgkc2NvcGUuc2t1TmFtZSkgPiA2MCkge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdUaGUgY2hhcmFjdGVycyBvZiB5b3VyIFNLVSBpcyBsaW1pdGVkIHRvIDYwIGxldHRlcnMuJyk7XHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICB2aWQ6ICRzY29wZS5za3VhbGlhc0xpc3Quc3RhbklkLFxyXG4gICAgICAgICAgYmllTWluZzogWyRzY29wZS5za3VOYW1lXVxyXG4gICAgICAgIH1cclxuICAgICAgICBkc3AucG9zdEZ1bigncG9qby9wcm9kdWN0L2NqS2VIdVplbmdKaWFCaWVNaW5nQmlhblRpJywgZGF0YSwgKHJlcykgPT4ge1xyXG4gICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT09ICcyMDAnKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5za3VhbGlhc0xpc3Quc2t1QWxpc2EucHVzaCgkc2NvcGUuc2t1TmFtZSk7XHJcbiAgICAgICAgICAgICRzY29wZS5za3VsaXN0WyRzY29wZS5za3VsaWFzSW5kZXhbMF1dLnZMaXN0WyRzY29wZS5za3VsaWFzSW5kZXhbMV1dLnNrdUFsaXNhID0gJHNjb3BlLnNrdWFsaWFzTGlzdC5za3VBbGlzYS5qb2luKCcsJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0FkZGl0aW9uIGZhaWxlZCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJHNjb3BlLmNhbmNlbFNrdSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH07XHJcbiAgICAgIGZ1bmN0aW9uIHN0ckxlbmd0aChzdHIpIHtcclxuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1tcXHUwMzkxLVxcdUZGRTVdL2csIFwiYWFcIikubGVuZ3RoO1xyXG4gICAgICB9O1xyXG4gICAgICAvLyDlj6rlsZXnpLrnp4HmnInllYblk4FcclxuICAgICAgJHNjb3BlLnNob3dQcml2YXRlUHJvID0gZnVuY3Rpb24gKGZsYWcpIHtcclxuICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgJHNjb3BlLmxpc3RUeXBlID0gJzAnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUubGlzdFR5cGUgPSAnMSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldFNrdUxpc3QoKTtcclxuICAgICAgfVxyXG4gICAgICAvLyDmn6Xor6LpooTorabmlbDmja4g5piv5Li6dHJ1ZSzlkKbkuLonJ1xyXG4gICAgICAkc2NvcGUuc2hvd0lzV2FybmluZyA9IGZ1bmN0aW9uIChmbGFnKSB7XHJcbiAgICAgICAgaWYgKGZsYWcpIHtcclxuICAgICAgICAgICRzY29wZS5pc1dhcm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuaXNXYXJuaW5nID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldFNrdUxpc3QoKTtcclxuICAgICAgfVxyXG4gICAgICAvL+aQnOe0ouafpeivolxyXG4gICAgICAkc2NvcGUuc2VhcmNoc2t1ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5wYWdlTnVtID0gJzEnO1xyXG4gICAgICAgIGdldFNrdUxpc3QoKTtcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuZW50ZXJTZWFyY2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgJHNjb3BlLnNlYXJjaHNrdSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy/liIbpobVcclxuICAgICAgJHNjb3BlLiRvbigncGFnZWRhdGEtZmEnLCBmdW5jdGlvbiAoZCwgZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSBkYXRhLnBhZ2VOdW07XHJcbiAgICAgICAgJHNjb3BlLnBhZ2VTaXplID0gZGF0YS5wYWdlU2l6ZTtcclxuICAgICAgICBnZXRTa3VMaXN0KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgXHJcbiAgICAgICRzY29wZS5vcGVuU2t1RnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5hZGRza3VGbGFnID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgJCgnLnNlYS1pbnAnKS5rZXlwcmVzcyhmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PSAnMTMnKSB7XHJcbiAgICAgICAgICAkc2NvcGUuc2VhU3BGdW4oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgICRzY29wZS5zZWFTcEZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoISRzY29wZS5zZWFTcElucFZhbCkge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdQbGVhc2UgZW50ZXIgYSBza3UnKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgdmFyIGZpbHRlck9iaiA9IHt9O1xyXG4gICAgICAgIGZpbHRlck9iai5maWx0ZXIgPSB7fTtcclxuICAgICAgICBmaWx0ZXJPYmouZmlsdGVyLmlucHV0U3RyID0gJHNjb3BlLnNlYVNwSW5wVmFsO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdwb2pvL3Byb2R1Y3QvZ2V0UHJvZHVjdEJ5QWNjb3VudCcsIEpTT04uc3RyaW5naWZ5KGZpbHRlck9iaiksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAkc2NvcGUucExpc3QgPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5yZXN1bHQpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5wTGlzdClcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5wTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICBkc3AuZ2V0QXJlYUJ5UGlkKCRzY29wZS5wTGlzdFswXS5pZCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS53YXJlTGlzdCA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZVdhcmUgPSBkYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2hhblNlbGVXYXJlKClcclxuXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyDmsqHmn6XliLDnu5PmnpxcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ09vcHMsIGludmFsaWQgU0tVLiBQbGVhc2UgY2hlY2sgaXQgY2FyZWZ1bGx5LicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdTZWFyY2ggZXJyb3InKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmNoYW5TZWxlV2FyZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgaWYoJHNjb3BlLnBMaXN0WzBdLlBST0RVQ1RUWVBFID09IFwiNVwiKXtcclxuICAgICAgICAgIGNvbnN0IGl0ZW0gPSAkc2NvcGUucExpc3RbMF1cclxuICAgICAgICAgIGRzcC5nZXRTaGlwTGlzdFN1cHBsaWVyKHtcclxuICAgICAgICAgICAgc2t1Oml0ZW0uc2t1LFxyXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogJHNjb3BlLnNlbGVXYXJlLmNvdW50cnlDb2RlXHJcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAkc2NvcGUubG9nU2V0ID0gZGF0YTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgZHNwLmdldFNoaXBMaXN0TmV3KHtcclxuICAgICAgICAgICAgc3RhcnRDb3VudHJ5Q29kZTogJHNjb3BlLnNlbGVXYXJlLmNvdW50cnlDb2RlLFxyXG4gICAgICAgICAgICBwcm9wZXJ0eXM6ICRzY29wZS5wTGlzdFswXS5wcm9wZXJ0eUtleS5zcGxpdCgnLCcpXHJcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAkc2NvcGUubG9nU2V0ID0gZGF0YTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuY2xvc2VCekZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUuYWRkc2t1RmxhZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5zdXJlQWRkRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghJHNjb3BlLnBMaXN0KSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBzZWFyY2ggc2t1IGZpcnN0Jyk7XHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuYWRkV2xWYWwpIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCBzaGlwcGluZyBtZXRob2QuJyk7XHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgIHZhciBhZGREYXRhID0ge307XHJcbiAgICAgICAgYWRkRGF0YS5kYXRhID0ge307XHJcbiAgICAgICAgYWRkRGF0YS5kYXRhLnByb2R1Y3RJZCA9ICRzY29wZS5wTGlzdFswXS5pZDtcclxuICAgICAgICBhZGREYXRhLmRhdGEuc2hvcE1ldGhvZCA9ICRzY29wZS5hZGRXbFZhbC5uYW1lRW47XHJcbiAgICAgICAgYWRkRGF0YS5kYXRhLmRlZmF1bHRBcmVhID0gJHNjb3BlLnNlbGVXYXJlID8gJHNjb3BlLnNlbGVXYXJlLmFyZWFJZCA6ICcnO1xyXG4gICAgICAgIGFkZERhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KGFkZERhdGEuZGF0YSk7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9sb2NQcm9kdWN0L2Fzc2lnbicsIGFkZERhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09ICcyMDAnKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJtcyA9IHtcclxuICAgICAgICAgICAgICB0eXBlOiAnMCcsXHJcbiAgICAgICAgICAgICAgcGlkOiAkc2NvcGUucExpc3RbMF0uaWQsXHJcbiAgICAgICAgICAgICAgdXNlcmlkOiB1c2VySWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkc3AucG9zdEZ1bignZXJwL3B1Ymxpc2gvQ2FsY3VsYXRpb24nLCBwYXJtcywgZnVuY3Rpb24oKSB7fSlcclxuICAgICAgICAgICAgJHNjb3BlLmFkZHNrdUZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLmxvZ1NldCA9IFtdO1xyXG4gICAgICAgICAgICAkc2NvcGUucExpc3QgPSBbXTtcclxuXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0FkZCBmYWlsZWQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJylcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvKuWMheijheebuOWFs+aTjeS9nCovXHJcbiAgICAgIC8v5om56YeP5YWz6IGUXHJcbiAgICAgICRzY29wZS5iYXRjaEFzc29jaWF0aW9uID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZihpdGVtLnByb2R1Y3RUeXBlID09PSAnNScpIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnUGFja2FnZXMgYXJlIG5vdCBhdmFpbGFibGUgdG8gdGhlIHByb2R1Y3QuICcpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaXRlbURhdGEgPSB7XHJcbiAgICAgICAgICB0eXBlOiBcIjBcIixcclxuICAgICAgICAgIHBpZDogaXRlbS5wcm9kdWN0SWQsXHJcbiAgICAgICAgICBzaG9wSWQ6IGl0ZW0uc2hvcElkLFxyXG4gICAgICAgICAgTkFNRUVOOiBpdGVtLk5BTUVFTiwgLy/llYblk4HlkI3np7BcclxuICAgICAgICAgIFNLVTogaXRlbS5TS1UsICAvLyBza3VcclxuICAgICAgICAgIHByaWNlczogaXRlbS5TRUxMUFJJQ0UsIC8v5Lu35qC8XHJcbiAgICAgICAgICBwYWNrd2VpZ2h0OiBpdGVtLldFSUdIVCwgLy/ph43ph49cclxuICAgICAgICAgIGNvbm5lY3RUeXBlOjIgLy8g5YWz6IGU5YyF6KOF57G75Z6LIDIg5piv5oyH5rS+5YyF6KOFXHJcbiAgICAgICAgfTtcclxuICAgICAgICBsb2NhdGlvbi5ocmVmID0gJyMvcmVsZXZhbnQtcGFja2FnaW5nLycgKyBiYXNlNjQuZW5jb2RlKEpTT04uc3RyaW5naWZ5KGl0ZW1EYXRhKSkgKyAnLzEnO1xyXG4gICAgICB9O1xyXG4gICAgICAvL+WFs+iBlOWMheijhVxyXG4gICAgICAkc2NvcGUuYXNzb2NpYXRlZFBhY2thZ2luZyA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgaWYoaXRlbS5wcm9kdWN0VHlwZSA9PT0gJzUnKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1BhY2thZ2VzIGFyZSBub3QgYXZhaWxhYmxlIHRvIHRoZSBwcm9kdWN0LiAnKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coaXRlbSlcclxuICAgICAgICBsZXQgYXJyID0gaXRlbS5TVEFOREFSRCA/IGl0ZW0uU1RBTkRBUkQuc3BsaXQoJywnKSA6IFtdLCBsb25nID0gbnVsbCwgd2lkdGggPSBudWxsLCBoZWlnaHQgPSBudWxsO1xyXG4gICAgICAgIGFyci5mb3JFYWNoKChvLCBpKSA9PiB7XHJcbiAgICAgICAgICBpZiAoby5pbmRleE9mKCdsb25nJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGxvbmcgPSBvLnN1YnN0cihvLmluZGV4T2YoJz0nKSArIDEsIG8ubGVuZ3RoKVxyXG4gICAgICAgICAgfSBlbHNlIGlmIChvLmluZGV4T2YoJ3dpZHRoJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIHdpZHRoID0gby5zdWJzdHIoby5pbmRleE9mKCc9JykgKyAxLCBvLmxlbmd0aClcclxuICAgICAgICAgIH0gZWxzZSBpZiAoby5pbmRleE9mKCdoZWlnaHQnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgaGVpZ2h0ID0gby5zdWJzdHIoby5pbmRleE9mKCc9JykgKyAxLCBvLmxlbmd0aClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgaXRlbURhdGEgPSB7XHJcbiAgICAgICAgICB0eXBlOiBcIjFcIixcclxuICAgICAgICAgIHZpZDogaXRlbS5zdGFuSWQsXHJcbiAgICAgICAgICBzaG9wSWQ6IGl0ZW0uc2hvcElkLFxyXG4gICAgICAgICAgTkFNRUVOOiBpdGVtLk5BTUVFTiwgLy/llYblk4HlkI3np7BcclxuICAgICAgICAgIFNLVTogaXRlbS5TS1UsICAvLyBza3VcclxuICAgICAgICAgIHByaWNlczogaXRlbS5TRUxMUFJJQ0UsIC8v5Lu35qC8XHJcbiAgICAgICAgICBwYWNrd2VpZ2h0OiBpdGVtLlBBQ0tXRUlHSFQsIC8v6YeN6YePXHJcbiAgICAgICAgICBsb25nOiBsb25nLCAvL+mVv1xyXG4gICAgICAgICAgd2lkdGg6IHdpZHRoLCAvL+WuvVxyXG4gICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsIC8v6auYXHJcbiAgICAgICAgfTtcclxuICAgICAgICAgbG9jYXRpb24uaHJlZiA9ICcjL3JlbGV2YW50LXBhY2thZ2luZy8nICsgYmFzZTY0LmVuY29kZShKU09OLnN0cmluZ2lmeShpdGVtRGF0YSkpICsgJy8xJztcclxuICAgICAgfVxyXG4gICAgICAvL+afpeeci+WMheijhVxyXG4gICAgICAkc2NvcGUudmlld1BhY2thZ2luZyA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coaXRlbSlcclxuICAgICAgICBkc3AuZ2V0RnVuKCdjai9QYWNrUHJvZHVjdC9nZXRQcm9kdWN0U3RhbmRMaXN0P3BpZD0nK2l0ZW0uUElEKycmdHlwZT0yJywgKHJlcykgPT4ge1xyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PT0gJzIwMCcpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnZpZXdQYWNrYWdpbmdNb2RhbCA9IHRydWVcclxuICAgICAgICAgICAgJHNjb3BlLnByb1N0YW5kTGlzdCA9IHJlcy5kYXRhLnJlc3VsdFxyXG4gICAgICAgICAgICAkKCcuc2luZ2xlU2VsZWN0Jykuc2VsZWN0MigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICRzY29wZS5wcm9TdGFuZExpc3QgPSBbXVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgIGlmKGl0ZW0udmlkKXtcclxuICAgICAgICAgICAvLyDlpoLmnpzngrnlh7vnmoTmmK/lj5jkvZMs55u05o6l5p+l6K+i6K+l5Y+Y5L2TXHJcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWQgPSBpdGVtLnZpZFxyXG4gICAgICAgICAgJHNjb3BlLnZpZXdQYWNrYWdpbmdNb2RhbCA9IHRydWVcclxuICAgICAgICAgICRzY29wZS5vblNlbGVjdFBhY2thZ2luZygpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuZm9ybWF0ZVNpemUgPSBmdW5jdGlvbihzaXplKSB7XHJcbiAgICAgICAgbGV0IG5ld1NpemUgPSBTdHJpbmcoc2l6ZSk7XHJcbiAgICAgICAgbmV3U2l6ZSA9IG5ld1NpemUucmVwbGFjZSgvTG9uZy8sJ0xlbmd0aCcpO1xyXG4gICAgICAgIHJldHVybiBuZXdTaXplO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgLy/pgInmi6nmn5DkuKrljIXoo4Xlj5jkvZPvvIzmn6Xor6Lor6bmg4VcclxuICAgICAgJHNjb3BlLm9uU2VsZWN0UGFja2FnaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCRzY29wZS5zZWxlY3RlZFZpZCl7XHJcbiAgICAgICAgICAvLyDpgInmi6nkuoblj5jkvZPvvIzmmL7npLrlj5jkvZPkuIvlhbPogZTnmoTljIXoo4XllYblk4FcclxuICAgICAgICAgIGRzcC5wb3N0RnVuKCdjai9QYWNrUHJvZHVjdC9nZXRDaGVja2VkTGlzdCcsIHt2aWQ6JHNjb3BlLnNlbGVjdGVkVmlkfSwgKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpO1xyXG4gICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PSAnMjAwJykge1xyXG4gICAgICAgICAgICAgICRzY29wZS52aWRDaGVja2VkTGlzdCA9IHJlcy5kYXRhLnJlc3VsdC5jaGVja2VkTGlzdFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICRzY29wZS52aWRDaGVja2VkTGlzdCA9IFtdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIC8vIOayoeaciemAieaLqe+8jOWImeS4jeimgVxyXG4gICAgICAgICAgJHNjb3BlLnZpZENoZWNrZWRMaXN0ID0gW11cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICAvLyDlhbPpl60gdmlldyDlvLnmoYZcclxuICAgICAgICRzY29wZS5jbG9zZVZpZXdQYWNrYWdpbmdNb2RhbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUudmlld1BhY2thZ2luZ01vZGFsID0gZmFsc2VcclxuICAgICAgICAkc2NvcGUudmlkQ2hlY2tlZExpc3QgPSBbXVxyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZFZpZCA9ICcnXHJcbiAgICAgICAgJCgnLnNpbmdsZVNlbGVjdCcpLnNlbGVjdDIoJ2Rlc3Ryb3knKTtcclxuICAgICAgfVxyXG4gICAgICAvL+ino+mZpOe7keWumlxyXG4gICAgICAkc2NvcGUuY29udGVudDIgPSAnQXJlIHlvdSBzdXJlIHRvIHJlbW92ZSB0aGUgYmluZGluZz8nO1xyXG4gICAgICAkc2NvcGUuc2hvd1BvcFVwcyA9IGZhbHNlO1xyXG4gICAgICAkc2NvcGUudW5CaW5kID0gZnVuY3Rpb24gKGl0ZW0saXNWYXJpZW50KSB7XHJcbiAgICAgICAgJHNjb3BlLnNob3dQb3BVcHMgPSB0cnVlO1xyXG4gICAgICAgICRzY29wZS5wb3BUeXBlID0gMztcclxuICAgICAgICAkc2NvcGUucmVtb3ZlUGFyYW1zID0ge1xyXG4gICAgICAgICAgdHlwZTogJzEnLFxyXG4gICAgICAgICAgcGlkOiBpdGVtLlBJRCB8fCAnJyxcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaXNWYXJpZW50KXtcclxuICAgICAgICAgIC8vIOWmguaenOWxleW8gOWPmOS9k++8jOWImeS8oOWFpeWPmOS9k2lkXHJcbiAgICAgICAgICAkc2NvcGUucmVtb3ZlUGFyYW1zLnZpZD0gaXRlbS5zdGFuSWQgfHwgJydcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyDlhajpgInmiYDmnInllYblk4FcclxuICAgICAgJHNjb3BlLmNoZWNoZWRBbGwgPSAoKSA9PiB7XHJcbiAgICAgICAgJHNjb3BlLmlzQ2hlY2tBbGwgPSAhJHNjb3BlLmlzQ2hlY2tBbGxcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuc2t1bGlzdClcclxuICAgICAgICAkc2NvcGUuc2t1bGlzdC5mb3JFYWNoKG8gPT4ge1xyXG4gICAgICAgICAgby5pc2NoZWNrID0gJHNjb3BlLmlzQ2hlY2tBbGxcclxuICAgICAgICB9KVxyXG4gICAgICAgICRzY29wZS5wYWNrTmFtZXMgPSAgJHNjb3BlLnNrdWxpc3QuZmlsdGVyKG8gPT4gby5pc2NoZWNrKS5tYXAobyA9PiAoeyBOQU1FRU46IG8uTkFNRUVOLCBTS1U6by5TS1UsIHByaWNlczpvLlNFTExQUklDRSwgcGFja3dlaWdodDpvLldFSUdIVCxwaWQ6IG8uSUQsIHNob3BJZDogby5zaG9wSWR9KSlcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUucGFja05hbWVzKVxyXG4gICAgICAgICRzY29wZS5pc0Nvbm5lY3Rpb24gPSAkc2NvcGUuc2t1bGlzdC5maWx0ZXIobyA9PiBvLmlzY2hlY2spLmxlbmd0aCA+IDBcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5Y2V6YCJ5ZWG5ZOBXHJcbiAgICAgICRzY29wZS5jaGVja1BybyA9IChpdGVtLCBpZHgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhpdGVtKVxyXG4gICAgICAgIGl0ZW0uaXNjaGVjayA9ICFpdGVtLmlzY2hlY2tcclxuICAgICAgICBjb25zdCBjaGVja0xlbiA9ICRzY29wZS5za3VsaXN0LmZpbHRlcihvID0+IG8uaXNjaGVjaykubGVuZ3RoXHJcbiAgICAgICAgJHNjb3BlLmlzQ29ubmVjdGlvbiA9IGNoZWNrTGVuID4gMFxyXG4gICAgICAgICRzY29wZS5pc0NoZWNrQWxsID0gJHNjb3BlLnNrdWxpc3QubGVuZ3RoID09PSBjaGVja0xlbiBcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5Y2V6YCJ5Y+Y5L2T5ZWG5ZOBXHJcbiAgICAgICRzY29wZS5jaGVja1Byb1ZpZCA9IChpdGVtLCBpZHgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhpdGVtKVxyXG4gICAgICAgIGl0ZW0uaXNjaGVjayA9ICFpdGVtLmlzY2hlY2tcclxuICAgICAgICAvLyBjb25zdCBjaGVja0xlbiA9ICRzY29wZS5za3VsaXN0LmZpbHRlcihvID0+IG8uaXNjaGVjaykubGVuZ3RoXHJcbiAgICAgICAgLy8gJHNjb3BlLmlzQ29ubmVjdGlvbiA9IGNoZWNrTGVuID4gMFxyXG4gICAgICAgIC8vICRzY29wZS5pc0NoZWNrQWxsID0gJHNjb3BlLnNrdWxpc3QubGVuZ3RoID09PSBjaGVja0xlblxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmibnph4/lhbPogZTljIXoo4VcclxuICAgICAgJHNjb3BlLmJ1bGtDb25uZWN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICRzY29wZS5wYWNrTmFtZXMgPSAkc2NvcGUuc2t1bGlzdC5maWx0ZXIobyA9PiBvLmlzY2hlY2spLm1hcChvID0+ICh7IFxyXG4gICAgICAgICAgdHlwZTogXCIwXCIsXHJcbiAgICAgICAgICBOQU1FRU46IG8uTkFNRUVOLCBcclxuICAgICAgICAgIFNLVTpvLlNLVSwgXHJcbiAgICAgICAgICBwcmljZXM6by5TRUxMUFJJQ0UsIFxyXG4gICAgICAgICAgcGFja3dlaWdodDpvLldFSUdIVCxcclxuICAgICAgICAgIHBpZDogby5wcm9kdWN0SWQsIFxyXG4gICAgICAgICAgc2hvcElkOiBvLnNob3BJZCxcclxuICAgICAgICAgIGNvbm5lY3RUeXBlOjIgLy8g5YWz6IGU5YyF6KOF57G75Z6LIDIg5piv5oyH5rS+5YyF6KOFXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IGAjL3JlbGV2YW50LXBhY2thZ2luZy8xLzFgO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZWxldmFudHBhY2thZ2UnLGJhc2U2NC5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoJHNjb3BlLnBhY2tOYW1lcykpKTtcclxuICAgICAgICAvLyBsb2NhdGlvbi5ocmVmID0gYG15Q0ouaHRtbCMvcmVsZXZhbnQtcGFja2FnaW5nLy8xLyR7YmFzZTY0LmVuY29kZShKU09OLnN0cmluZ2lmeShpZHMpKX1gXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOaJuemHj+ino+mZpOWMheijheW8ueahhuaYvuekulxyXG4gICAgICAkc2NvcGUuYnVsa1JlbW92ZUNvbm5lY3Rpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgJHNjb3BlLmNoZWNrU2t1TGlzdCA9ICRzY29wZS5za3VsaXN0LmZpbHRlcihvID0+IG8uaXNjaGVjayk7XHJcbiAgICAgICAgaWYoJHNjb3BlLmNoZWNrU2t1TGlzdC5sZW5ndGg+MCkgJHNjb3BlLmJhdGNoRGVsZXRlUG9wdXAgPSAgdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g5om56YeP56e76Zmk5YyF6KOFXHJcbiAgICAgICRzY29wZS5iYXRjaERlbGV0ZUNvbmZpcm1GdW4gPSAoKT0+e1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSAkc2NvcGUuY2hlY2tTa3VMaXN0Lm1hcChvPT4oe1xyXG4gICAgICAgICAgcGlkOm8uUElELFxyXG4gICAgICAgICAgc2hvcElkOicnLCAvLyDlupfpk7ppZOeahOaYr2Nvbm5ldGlvbuWMheijheWIoOmZpO+8jOS4jeS8oOaYr3NrdWxpc3RcclxuICAgICAgICAgIHZpZDpvLnZpZFxyXG4gICAgICAgIH0pKVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9QYWNrQ29ubmVjdGlvbi9iYXRjaERlbENvcnJlbGF0aW9uJywgcGFyYW1zLCBmdW5jdGlvbiAoe2RhdGF9KSB7XHJcbiAgICAgICAgICBpZihkYXRhLnN0YXR1c0NvZGU9PScyMDAnKXtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKFwiQnVsayBSZW1vdmVkIFN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICAgIH1lbHNlIGlmKGRhdGEuc3RhdHVzQ29kZT09JzExMDInKXtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKFwiWW91J3JlIG5vdCBhdXRob3JpemVkIHRvIGRlbGV0ZSB0aGUgcGFja2FnaW5nLCBwbGVhc2UgY29udGFjdCB5b3VyIGFnZW50IGZvciBtb3JlIGluZm9ybWF0aW9uXCIpO1xyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZyhcIkJ1bGsgUmVtb3ZpbmcgRmFpbGVkXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJHNjb3BlLmJhdGNoRGVsZXRlUG9wdXAgPSAgZmFsc2U7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gcmVtb3ZlQ29ubmVjdCgpIHtcclxuICAgICAgICBjb25zdCBwYXJtcyA9IHtcclxuICAgICAgICAgIGRhdGE6ICRzY29wZS5pZHMsXHJcbiAgICAgICAgICB0eXBlOiAnMSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL1BhY2tQcm9kdWN0L2JhdGNoRGVsQ29ycmVsYXRpb24nLCBwYXJtcywgKHJlcykgPT4ge1xyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKTtcclxuICAgICAgICAgIGlmKHJlcy5kYXRhLnN0YXR1c0NvZGUgPT0gJzIwMCcpe1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ0JpbmRpbmcgcmVtb3ZlZCcpXHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlKDIpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGVsZXRlUG9wdXAgPSAgZmFsc2U7XHJcbiAgICAgICAgICAgIGdldFNrdUxpc3QoKTtcclxuICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdCaW5kaW5nIHJlbW92YWwgZmFpbGVkJylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICBsYXllci5jbG9zZSgyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICByZXR1cm4gYXBwO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQTdCQTtBQStCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBVEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFYQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUFBO0FBVUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUhBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../src/pages/mycj/sku-list/sku-list.js\n");

/***/ })

}]);