(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[61],{

/***/ "../src/pages/mycj/undelivered-orders/undeliver-pending-reship.js":
/*!************************************************************************!*\
  !*** ../src/pages/mycj/undelivered-orders/undeliver-pending-reship.js ***!
  \************************************************************************/
/*! exports provided: undeliverPendingReshipFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"undeliverPendingReshipFactory\", function() { return undeliverPendingReshipFactory; });\n/* harmony import */ var _root_egg_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @root_egg/env */ \"../../env.js\");\n/* harmony import */ var _root_egg_env__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_root_egg_env__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\nvar awinTesMode = ['testnew', 'development', 'test'].includes(_root_egg_env__WEBPACK_IMPORTED_MODULE_0__[\"NODE_ENV\"]) ? 1 : 0;\nfunction undeliverPendingReshipFactory(angular) {\n  var app = angular.module('undeliver-pending-reship.module', []); //待重派\n\n  app.controller('undeliver-pending-reship.ctrl', ['$scope', 'dsp', '$location', '$stateParams', function ($scope, dsp, $location, $stateParams) {\n    console.log('undeliver-pending-reship.ctrl');\n    console.log('isvip', localStorage.getItem('vip'));\n\n    if (localStorage.getItem('vip') == 1) {\n      $scope.isVip = true;\n    } else {\n      $scope.isVip = false;\n    }\n\n    dsp.domainData().then(function (res) {\n      // 请求成功的结果\n      console.log(res);\n      $scope.iscj = res.iscj;\n\n      if ($scope.iscj == '1') {\n        //cj\n        $scope.websiteName = 'CJ';\n      } else {\n        //客户\n        $scope.websiteName = res.websiteName || 'CJ';\n      }\n    });\n    $scope.navList = [{\n      type: '1',\n      name: 'Pending Reshipment'\n    }, {\n      type: '2',\n      name: 'Paid'\n    }, {\n      type: '3',\n      name: 'Awaiting Self Pickup'\n    }, {\n      type: '4',\n      name: 'Processed'\n    }, {\n      type: '5',\n      name: 'Expired'\n    }];\n    console.log('待重派');\n    var pageH = $(window).height() - 171;\n    var docH = $(document).height();\n    var bs = new Base64();\n    var userId = bs.decode(localStorage.getItem('userId') ? localStorage.getItem('userId') : '');\n    console.log(userId);\n    var packagetype = $stateParams.packagetype;\n    console.log(packagetype);\n    $('.aftersale-right').css({\n      'min-height': $(window).height() * 1 + 'px'\n    }); //设置默认时间\n\n    function GetDateStr(AddDayCount) {\n      var dd = new Date();\n      dd.setDate(dd.getDate() + AddDayCount); //获取AddDayCount天后的日期\n\n      var y = dd.getFullYear();\n      var m = dd.getMonth() + 1; //获取当前月份的日期\n\n      var d = dd.getDate();\n\n      if (m < 10) {\n        m = '0' + m;\n      }\n\n      if (d < 10) {\n        d = '0' + d;\n      }\n\n      return y + \"-\" + m + \"-\" + d;\n    }\n\n    var aDate = GetDateStr(-45);\n    var enDate = GetDateStr(0); // $(\"#y-ord-sdate\").val(aDate );   //关键语句\n    // $(\"#y-ord-edate\").val(enDate );   //关键语句\n\n    var _$location$search = $location.search(),\n        filter = _$location$search.filter;\n\n    filter || $(\"#cj-stime\").val(aDate); //关键语句\n    //$(\"#cj-etime\").val(enDate );   //关键语句\n    // $scope.dataFound = false;\n\n    console.log($('.deal-orders').width(), $('.orders-list').width(), $('.orders-table').width()); //给左侧的导航添加滚动事件\n\n    $(document).scroll(function () {\n      if ($(document).scrollTop() >= 0) {\n        $('.left-nav').css({\n          position: 'fixed',\n          top: '80px'\n        });\n      } else {\n        $('.left-nav').css({\n          position: 'relative',\n          top: '80px'\n        });\n      }\n    }); //纠纷类型\n\n    $scope.jiufen = ['All', 'No Tracking Information Found', 'Tracking Information Frozen', 'Tracking Information Error', 'Order Returned', 'Products Short', 'Defective Products', 'Received Incorrect Products', 'Order Not Received']; //订单状态\n\n    $scope.state = ['Closed', 'Completed', 'Awaiting CJ Response', 'Awaiting Your Response']; //弹窗\n\n    $scope.window = false; // $scope.upload=false;\n\n    $scope.isSubscribe = false; //如何使用How To use it\n\n    $scope.isPay = false; //是否支付重派费\n\n    $scope.isInfo = false; //传入信息是否正确\n\n    $scope.isEdit = false; //编辑弹窗\n\n    $scope.isTell = false; //已通知表格弹窗\n\n    $scope.addItemId = ''; //编辑的ID值\n\n    $scope.addItemIndex = ''; //编辑的index值\n\n    $scope.cjresIndex = ''; //选中的信息数量\n\n    $scope.Imaddress = ''; //选中当前行的地址\n\n    $scope.Imaid = []; //选中当前行的id\n\n    $scope.daipai = ''; //选中当前行的id\n\n    $scope.daiqu = ''; //选中当前行的id\n\n    $scope.yichuli = ''; //选中当前行的id\n\n    $scope.yizhifu = ''; //选中当前行的id\n\n    $scope.guoqi = ''; //选中当前行的id\n    //请求参数 disputeType\n\n    $scope.leixing = 1; //获取列表\n\n    $scope.totellList = [];\n    $scope.ordstatus = $stateParams.problemStu || 1;\n    dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n    $scope.pageSize = '20';\n    $scope.pageNum = 1;\n    $scope.pageNum1 = $scope.pageNum + 1;\n    $scope.totalNum = 0;\n    $scope.totalPageNum = 0;\n    $scope.searchval = packagetype;\n    console.log($scope.searchval); //获取url中的参数方法\n\n    function getUrlParamByKey(href, key) {\n      if (!href) return '';\n      var vars = href.split(\"&\");\n\n      for (var i = 0; i < vars.length; i++) {\n        var pair = vars[i].split(\"=\");\n\n        if (pair[0] == key) {\n          return pair[1];\n        }\n      }\n    } //paypal支付\n\n\n    function initIsCheckout() {\n      // 判断当前是否存在ckosessionid\n      $scope.ckoSessionId = bs.decode(localStorage.getItem('ckoSessionId') || '') && JSON.parse(bs.decode(localStorage.getItem('ckoSessionId') || ''));\n\n      if ($scope.ckoSessionId) {\n        getList(dsp, $scope);\n        getCheckoutTrade();\n        return;\n      }\n\n      var href = window.location.href;\n\n      if (href.indexOf('?') >= 0 && !filter) {\n        //2019-8-12 需要query传参 此处排除新增的这个条件\n        var regexp = /\\?[\\w\\W]*\\#/;\n        $scope.sessionId = getUrlParamByKey(href.match(regexp) && href.match(regexp)[0].slice(1, -1), 'cko-payment-id') || getUrlParamByKey(href.match(regexp) && href.match(regexp)[0].slice(1, -1), 'cko-session-id');\n\n        if ($scope.sessionId) {\n          localStorage.setItem('ckoSessionId', bs.encode(JSON.stringify($scope.sessionId))); // 后端接口返回状态较慢，延迟一秒再刷新当前页面\n\n          var timer = setTimeout(function () {\n            clearTimeout(timer);\n            window.location.href = window.location.origin + '/myCJ.html#/problem-package/';\n          }, 200);\n          getList(dsp, $scope);\n          return;\n        }\n\n        var hrefArr = href.split('?');\n        console.log(hrefArr);\n        var paydataArr = hrefArr[1].split('&');\n        var lengthPay = paydataArr.length;\n        console.log(paydataArr);\n        console.log(lengthPay);\n\n        if (lengthPay == 3) {\n          var paymentArr = paydataArr[0].split('=');\n          var tokenArr = paydataArr[1].split('=');\n          var payidArr = paydataArr[2].split('=');\n          var payCS = {};\n          payCS.paymentId = paymentArr[1];\n          payCS.token = tokenArr[1];\n          payCS.payerID = payidArr[1];\n          payCS.code = 35;\n          payCS.type = \"problemPackage\";\n          payCS.awc = dsp.getCookie(\"awc\") || '';\n          console.log(payCS);\n          console.log(JSON.stringify(payCS));\n          var isToken = localStorage.getItem('payToken');\n          console.log(isToken);\n\n          if (isToken == tokenArr[1]) {\n            getList(dsp, $scope);\n            return;\n          } else {\n            dsp.postFun('app/pay/pay', JSON.stringify(payCS), function (data) {\n              console.log(data);\n\n              if (data.data.result !== true) {\n                layer.msg('Payment Failed');\n                getList(dsp, $scope);\n              } else {\n                layer.msg('Payment Succeed');\n                localStorage.setItem('payToken', tokenArr[1]);\n                getList(dsp, $scope); //awin 发送支付成功fall-back\n\n                var awinLocalParams = null;\n\n                try {\n                  awinLocalParams = JSON.parse(localStorage.getItem(\"_paypal_\".concat(payCS.token)));\n                  console.log(awinLocalParams);\n                } catch (err) {\n                  console.log('解析错误');\n                }\n\n                if (awinLocalParams) {\n                  var awinJS = function awinJS() {\n                    var content = '<script >' + ' var AWIN = {};' + '  AWIN.Tracking = {};' + ' AWIN.Tracking.Sale = {};' + ' AWIN.Tracking.Sale.amount =' + awinLocalParams.awinAmount + ';' + ' AWIN.Tracking.Sale.orderRef =\"' + awinLocalParams.awinRef + '\";' + ' AWIN.Tracking.Sale.parts  =\"' + \"DEFAULT:\" + awinLocalParams.awinAmount + '\";' + 'AWIN.Tracking.Sale.currency = \"USD\";' + ' AWIN.Tracking.Sale.test = \"' + awinTesMode + '\";' + 'AWIN.Tracking.Sale.channel = \"aw\";' + +'<\\/script>';\n                    $('body').append(content);\n                    var osrc = 'https://www.dwin1.com/21578.js';\n                    var script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.src = osrc;\n                    document.getElementsByTagName('body')[0].appendChild(script);\n                  };\n\n                  var imgHttpFun = function imgHttpFun() {\n                    var orderCountMoney = awinLocalParams.awinAmount.toFixed(2);\n                    var BasketImage = new Image(1, 1);\n                    BasketImage.src = \"https://www.awin1.com/sread.img?tt=ns&tv=2&merchant=21578&amount=\".concat(orderCountMoney, \"&ch=aw&parts=DEFAULT:\").concat(orderCountMoney, \"&cr=USD&ref=\").concat(awinLocalParams.awinRef, \"&tesmode=\").concat(awinTesMode);\n                    localStorage.removeItem(\"_paypal_\".concat(payCS.token));\n                  };\n\n                  var awcText = dsp.getCookie('awc');\n                  var utmSource = localStorage.getItem('utmSource');\n\n                  if (awcText && utmSource == 'awin') {\n                    //有awin的awc值 并且登录平台来源是awin\n                    awinJS();\n                    imgHttpFun();\n                  }\n                }\n              }\n            }, function (data) {\n              console.log(data);\n            });\n          }\n        }\n\n        if (lengthPay < 3) {\n          layer.msg('Payment Failed');\n          getList(dsp, $scope);\n        }\n      } else {\n        getList(dsp, $scope);\n      }\n    }\n\n    initIsCheckout(); // 待重派获取数据列表ordersList\n\n    function getList() {\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      $scope.ordersList = [];\n      $scope.totalNum = 0; //后台返回的数据长度\n\n      var getListData = {}; //标题部分\n\n      dsp.postFun('cj/orderResend/cjweb_customer_state_count', '', con1, errFun1);\n\n      function con1(data) {\n        console.log(data);\n        var message = data.data.message;\n        var result = data.data.result;\n        var statusCode = data.data.statusCode;\n\n        if (statusCode == 200) {\n          $scope.daipai = result[0].amount;\n          $scope.yizhifu = result[1].amount;\n          $scope.daiqu = result[2].amount;\n          $scope.yichuli = result[3].amount;\n          $scope.guoqi = result[4].amount;\n        }\n\n        console.log($scope.guoqi, $scope.yizhifu, $scope.daipai, $scope.daiqu, $scope.yichuli);\n      }\n\n      function errFun1(data) {\n        console.log(data);\n        layer.closeAll('loading');\n        dsp.closeLoadPercent($('.orders-list'));\n      }\n\n      getListData.pageNum = $scope.pageNum - 0;\n      getListData.pageSize = $scope.pageSize - 0; //   getListData.totalPages = 1;\n      //   getListData.totalCounts = 1;\n      //   getstatus(getListData);\n\n      getListData.orderNumber = $scope.searchval;\n      console.log($scope.ordstatus);\n      getListData.beginDate = $(\"#cj-stime\").val();\n      getListData.endDate = $(\"#cj-etime\").val();\n\n      if ($scope.ordstatus == 1) {\n        // dsp.postFun('cj/orderResend/cjweb_query_daiChongPai', JSON.stringify(getListData), con, errFun)\n        dsp.postFun('cj/orderResend/waitResend', JSON.stringify(getListData), con, errFun);\n      } else if ($scope.ordstatus == 2) {\n        dsp.postFun('cj/orderResend/cjweb_query_yiZhiFu', JSON.stringify(getListData), con, errFun);\n      } else if ($scope.ordstatus == 3) {\n        dsp.postFun('cj/orderResend/cjweb_query_daiTongZhiZiQu', JSON.stringify(getListData), con, errFun);\n      } else if ($scope.ordstatus == 4) {\n        dsp.postFun('cj/orderResend/cjweb_query_yiChuLi', JSON.stringify(getListData), con, errFun);\n      } else if ($scope.ordstatus == 5) {\n        dsp.postFun('cj/orderResend/cjweb_query_yiGuoQi', JSON.stringify(getListData), con, errFun);\n      }\n\n      function con(data) {\n        console.log(data);\n        var _data$data = data.data,\n            message = _data$data.message,\n            result = _data$data.result,\n            statusCode = _data$data.statusCode; //   $scope.ordstatusNum = data.data;\n\n        $scope.ordstatusNum = data.data; //   $scope.ordersList = data.data.list;\n\n        $scope.allselectids = [];\n        $scope.allselectaddress = [];\n        $scope.ordersList = result.rows;\n        console.log($scope.ordersList);\n\n        if ($scope.ordersList) {\n          $scope.ordersList.forEach(function (ele) {\n            ele.deadline = timestampToTime(new Date(ele.deadline));\n            ele.updatedTime = timestampToTime(new Date(ele.updatedTime));\n            ele.execTime = timestampToTime(new Date(ele.execTime));\n\n            if (ele.paymentStatus !== '0') {\n              $scope.allselectids.push(ele.id + '');\n            }\n          });\n        } else {\n          layer.closeAll('loading'); // layer.msg('No data')\n        } //   console.log($scope.ordersList);\n        //   $scope.totalNum = data.data.count;//获取总订单的条数\n\n\n        $scope.totalNum = result.total; //获取总订单的条数\n\n        console.log($scope.totalNum);\n\n        if ($scope.totalNum > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n          $scope.countPage = Math.ceil($scope.totalNum / ($scope.pageSize - 0));\n        } else {\n          dsp.addNodataPic($('.orders-list'), $(window).height() - 171, 47, 0, {\n            width: '100%'\n          });\n          dsp.closeLoadPercent($('.orders-list'));\n          $scope.countPage = 0;\n        }\n\n        pageFun(dsp, $scope);\n        numFun();\n      }\n\n      function errFun(data) {\n        console.log(data);\n        layer.closeAll('loading');\n        dsp.closeLoadPercent($('.orders-list'));\n      }\n    } //获取状态\n    // function getstatus(getstu) {\n    //     if ($scope.ordstatus==1) {\n    //         getstu.status = $scope.waitingResBtn ? '1,2,4,7' : '1,2,4,6';//此处新增条件筛选\n    //         getstu.responseType = $scope.waitingResBtn ? 'CJ' : '';//此处新增条件筛选\n    //     } else if ($scope.ordstatus==2) {\n    //         getstu.status = '3';\n    //     }else if ($scope.ordstatus==3) {\n    //         getstu.status = '5';\n    //     } else {\n    //         getstu.status = '7';\n    //     }\n    // }\n\n\n    $scope.$on('pagedata-fa', function (d, data) {\n      //分页切换数据监听\n      $scope.pageNum = data.pageNum;\n      $scope.pageSize = data.pageSize;\n      getList();\n    }); //分页\n\n    function pageFun(dsp, $scope) {\n      console.log($scope.totalNum);\n      console.log($scope.pageSize);\n\n      if ($scope.totalNum < 1) {\n        return;\n      }\n\n      $scope.$broadcast('page-data', {\n        pageNum: +$scope.pageNum,\n        totalNum: $scope.countPage,\n        totalCounts: +$scope.totalNum,\n        pageSize: $scope.pageSize + '',\n        pagesizeList: ['20', '50', '100']\n      });\n    } // getList(dsp,$scope);\n\n\n    $scope.changePageSize = function () {\n      console.log($scope.ordstatus);\n      $scope.pageNum = '0';\n      getList(dsp, $scope);\n      console.log($scope.ordersList);\n    };\n\n    $scope.toSpecifiedPage = function () {\n      console.log($scope.ordstatus);\n      var pagenum = Number($scope.pageNum);\n      var totalpage = Math.ceil($scope.totalNum / $scope.pageSize);\n\n      if (pagenum > totalpage || !pagenum || pagenum < 1) {\n        $scope.pagenum = 1;\n        layer.msg('Page does not exist.');\n      } else {\n        getList(dsp, $scope);\n        console.log($scope.ordersList);\n      }\n    }; //搜索\n\n\n    $scope.enterSearch = function (e) {\n      if (e.keyCode == 13) {\n        $scope.search();\n      }\n    };\n\n    $scope.search = function () {\n      console.log($scope.searchval);\n\n      if ($scope.searchval) {\n        var con = function con(data) {\n          console.log(data); // $scope.ordersList = data.data.list;\n\n          $scope.ordersList = data.data.result.rows; // $scope.totalNum = data.data.count;//获取总订单的条数\n\n          $scope.totalNum = data.data.result.total; //获取总订单的条数\n\n          console.log($scope.totalNum);\n\n          if ($scope.totalNum > 0) {\n            dsp.removeNodataPic($('.orders-list'));\n            dsp.closeLoadPercent($('.orders-list'));\n            $scope.countPage = Math.ceil($scope.totalNum / ($scope.pageSize - 0)); // getList(dsp,$scope)\n          } else {\n            dsp.addNodataPic($('.orders-list'), $(window).height() - 171, 47, 0, {\n              width: '100%'\n            });\n            dsp.closeLoadPercent($('.orders-list'));\n            $scope.countPage = 0;\n          }\n\n          pageFun(dsp, $scope);\n        };\n\n        var _errFun = function _errFun(data) {\n          console.log(data);\n          dsp.closeLoadPercent($('.orders-list'));\n        };\n\n        $scope.ordersList = [];\n        $scope.totalNum = 0;\n        dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n        var getListData = {};\n        getListData.page = $scope.pageNum - 0;\n        getListData.limit = $scope.pageSize - 0; // getListData.code = 'cj';\n        // getstatus(getListData);\n\n        getListData.cjorderNo = $scope.searchval; // if($scope.ordstatus == 1){\n        //     getListData.cjorderNo = $scope.searchval;\n        //   }else if($scope.ordstatus == 2){\n        //     getListData.cjorderNo = $scope.searchval;\n        //   }else if($scope.ordstatus == 3){\n        //     getListData.localTn = $scope.searchval;\n        //   }else if($scope.ordstatus == 4){\n        //     getListData.storeOrderNo = $scope.searchval;\n        //   }else if($scope.ordstatus == 5){\n        //     getListData.storeOrderNo = $scope.searchval;\n        //   }\n        // getListData.orderNumber = $scope.searchval;\n\n        getListData.beginDate = $(\"#cj-stime\").val();\n        getListData.endDate = $(\"#cj-etime\").val(); // dsp.postFun('app/dispute/getDispute',JSON.stringify(getListData), con, errFun)\n\n        if ($scope.ordstatus == 1) {\n          // dsp.postFun('cj/orderResend/cjweb_query_daiChongPai', JSON.stringify(getListData), con, errFun)\n          dsp.postFun('cj/orderResend/waitResend', JSON.stringify(getListData), con, _errFun);\n        } else if ($scope.ordstatus == 2) {\n          dsp.postFun('cj/orderResend/cjweb_query_yiZhiFu', JSON.stringify(getListData), con, _errFun);\n        } else if ($scope.ordstatus == 3) {\n          dsp.postFun('cj/orderResend/cjweb_query_daiTongZhiZiQu', JSON.stringify(getListData), con, _errFun);\n        } else if ($scope.ordstatus == 4) {\n          dsp.postFun('cj/orderResend/cjweb_query_yiChuLi', JSON.stringify(getListData), con, _errFun);\n        } else if ($scope.ordstatus == 5) {\n          dsp.postFun('cj/orderResend/cjweb_query_yiGuoQi', JSON.stringify(getListData), con, _errFun);\n        }\n      } else {\n        getList(dsp, $scope);\n      }\n    };\n\n    $('.selJfLx').change(function () {\n      var jflx = $(this).val();\n      console.log(jflx);\n      $scope.ordersList = [];\n      $scope.totalNum = 0;\n      dsp.loadPercent($('.orders-list'), $(window).height() - 171, 47, 0);\n      var getListData = {}; // getListData.page = $scope.pageNum-0;\n      // getListData.limit = $scope.pageSize-0;\n      // getListData.code = 'cj';\n\n      getListData.pageNum = $scope.pageNum - 0;\n      getListData.pageSize = $scope.pageSize - 0; // getstatus(getListData);\n\n      getListData.type = jflx;\n      getListData.beginDate = $(\"#cj-stime\").val();\n      getListData.endDate = $(\"#cj-etime\").val();\n      dsp.postFun('app/dispute/getDispute', JSON.stringify(getListData), con, errFun);\n\n      function con(data) {\n        console.log(data);\n        $scope.ordersList = data.data.list;\n        $scope.totalNum = data.data.count; //获取总订单的条数\n\n        console.log($scope.totalNum);\n\n        if ($scope.totalNum > 0) {\n          dsp.removeNodataPic($('.orders-list'));\n          dsp.closeLoadPercent($('.orders-list'));\n          $scope.countPage = Math.ceil($scope.totalNum / ($scope.pageSize - 0));\n        } else {\n          dsp.addNodataPic($('.orders-list'), $(window).height() - 171, 47, 0, {\n            width: '100%'\n          });\n          dsp.closeLoadPercent($('.orders-list'));\n          $scope.countPage = 0;\n        }\n\n        pageFun(dsp, $scope);\n      }\n\n      function errFun(data) {\n        console.log(data);\n        dsp.closeLoadPercent($('.orders-list'));\n      }\n    }); //给订单状态赋值的函数\n\n    function numFun() {\n      $scope.afterNum1 = $scope.ordstatusNum.yi; //31\n\n      $scope.afterNum2 = $scope.ordstatusNum.er; //48\n\n      $scope.afterNum3 = $scope.ordstatusNum.san; //15\n\n      $scope.afterNum4 = $scope.ordstatusNum.si; //7\n    } //给侧边栏添加样式\n\n    /* var vip = localStorage.getItem('vip') == undefined ? \"\" : localStorage.getItem('vip');\r\n    if (vip == '1') {//vipFlag\r\n      $('.header-nav').addClass('vipFlag');\r\n      $('.left-nav').addClass('vipFlag');\r\n      $('.aftersale-right').css('background', '#F0EDE7').addClass('vip');\r\n    } else {\r\n      $('.header-nav').removeClass('vipFlag');\r\n      $('.left-nav').removeClass('vipFlag');\r\n      $('.aftersale-right').css('background', '#f2f3f5').removeClass('vip');\r\n    }\r\n    $('.header-nav li').eq(1).addClass('active');\r\n    $('.left-nav li').eq(2).addClass('active');\r\n    //$('.aftersale-leftbara').eq(2).css('background-image','linear-gradient(0deg,rgba(253, 162, 44, 1) 0%, rgba(247, 140, 41, 1) 78%, rgba(241, 118, 37, 1) 100%)');\r\n    $('.aftersale-leftbara').click(function () {\r\n      $('.aftersale-leftbara').css('background-image', '');\r\n      $(this).css('background-image', 'linear-gradient(0deg,rgba(253, 162, 44, 1) 0%, rgba(247, 140, 41, 1) 78%, rgba(241, 118, 37, 1) 100%)');\r\n    }) */\n    // 给侧边栏添加滚动事件\n\n\n    $(document).scroll(function () {\n      if ($(document).scrollTop() >= 80) {\n        $('.left-nav').css({\n          position: 'fixed',\n          top: '80px'\n        });\n      } else {\n        $('.left-list').css({\n          position: 'relative',\n          top: '0'\n        });\n      }\n    }); //awaiting cj response添加选中非选中\n\n    var cjresIndex = 0;\n    $('#cj-response-table').on('click', '.zcheckbox', function () {\n      var _this = this;\n\n      $scope.Imaddress = $(this).attr('sddress').slice(4);\n\n      if ($scope.Imaid.length == 0 || !$scope.Imaid.includes($(this).attr('id').slice(2))) {\n        $scope.Imaid.push($(this).attr('id').slice(2));\n        console.log($scope.ordersList);\n        $scope.totellList = [];\n        $scope.ordersList.forEach(function (ele) {\n          console.log(ele);\n\n          for (var i = 0; i < $scope.Imaid.length; i++) {\n            if (ele.id == $scope.Imaid[i]) {\n              $scope.totellList.push(ele);\n              console.log($scope.totellList);\n            }\n          }\n        });\n      } else {\n        $scope.totellList = [];\n      }\n\n      console.log($scope.totellList);\n      console.log($scope.Imaddress);\n\n      if ($scope.ordstatus == 1 || $scope.ordstatus == 3) {\n        if ($scope.ordstatus == 1 && $scope.Imaddress == '') {\n          layer.msg('Please enter the shipping address'); // $scope.isEdit= true;         //编辑弹窗\n        } else {\n          if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n            $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n            cjresIndex++;\n            $scope.cjresIndex = cjresIndex; // console.log($scope.cjresIndex);\n\n            console.log($scope.Imaid);\n            console.log($scope.totellList); // console.log(55555555);\n\n            if (cjresIndex == $('#cj-response-table .zcheckbox').length) {\n              // alert('quanbuxuanzhogn')\n              $('#cj-response-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n            }\n          } else {\n            $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n            cjresIndex--;\n            console.log($scope.Imaid);\n            $scope.Imaid.forEach(function (item) {\n              item = parseInt(item);\n              console.log(item);\n\n              if (item == $(_this).attr('id').slice(2)) {\n                console.log($scope.Imaid.indexOf($(_this).attr('id').slice(2))); // $scope.Imaid .push(item)\n\n                $scope.Imaid.splice($scope.Imaid.indexOf($(_this).attr('id').slice(2)), 1);\n                console.log($scope.Imaid);\n              }\n            });\n            console.log($scope.Imaid);\n            $scope.totellList = [];\n            $scope.ordersList.forEach(function (ele) {\n              // console.log(ele.id)\n              console.log(ele);\n\n              for (var i = 0; i < $scope.Imaid.length; i++) {\n                if (ele.id == $scope.Imaid[i]) {\n                  // console.log(ele);\n                  $scope.totellList.push(ele); // return $scope.totellList\n\n                  console.log($scope.totellList);\n                }\n              }\n            });\n\n            if (cjresIndex != $('#cj-response-table .zcheckbox').length) {\n              $('#cj-response-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n            }\n          }\n        }\n      }\n    }); //全选\n\n    $('#cj-response-table').on('click', '.zchecked-all', function () {\n      if ($scope.ordstatus == 1) {\n        $scope.ordersList.forEach(function (ele) {\n          // $scope.allselectaddress.push(ele.address);\n          if ($scope.allselectaddress.includes('')) {\n            $scope.allselectaddress = [];\n          } else {\n            $scope.allselectaddress.push(ele.address);\n            $scope.Imaddress = $scope.allselectaddress;\n          }\n        });\n\n        if ($scope.Imaddress == '') {\n          layer.msg('Please fill in the receiving address first.');\n        } else {\n          if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n            $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n            cjresIndex = $('#cj-response-table .zcheckbox').length;\n            $scope.Imaid = $scope.allselectids;\n            console.log($scope.Imaid);\n            $scope.cjresIndex = $scope.Imaid.length;\n            $('#cj-response-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n          } else {\n            $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n            cjresIndex = 0;\n            $scope.Imaid = [];\n            $scope.cjresIndex = 0;\n            $('#cj-response-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n          }\n        }\n      } else if ($scope.ordstatus == 3) {\n        if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n          $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n          cjresIndex = $('#cj-response-table .zcheckbox').length;\n          $scope.totellList = $scope.ordersList;\n          $scope.Imaid = $scope.allselectids;\n          $scope.cjresIndex = $scope.Imaid.length; //    $scope.allselectaddress = $scope.\n\n          $('#cj-response-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n        } else {\n          $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n          cjresIndex = 0;\n          $scope.Imaid = [];\n          $scope.cjresIndex = 0;\n          $('#cj-response-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //显示大图\n\n    $('.scollBox').on('mouseenter', '.sp-smallimg', function () {\n      $(this).siblings('.hide-bigimg').show();\n    });\n    $('.scollBox').on('mouseenter', '.hide-bigimg', function () {\n      $(this).show();\n    });\n    $('.scollBox').on('mouseleave', '.sp-smallimg', function () {\n      $(this).siblings('.hide-bigimg').hide();\n    });\n    $('.scollBox').on('mouseleave', '.hide-bigimg', function () {\n      $(this).hide();\n    }); //awaiting your response添加选中非选中\n\n    var youresIndex = 0;\n    $('#await-your-table').on('click', '.zcheckbox', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        youresIndex++;\n        console.log(youresIndex);\n        console.log(youresIndex);\n\n        if (youresIndex == $('#await-your-table .zcheckbox').length) {\n          // alert('quanbuxuanzhogn')\n          $('#await-your-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple2.png');\n        }\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        youresIndex--;\n\n        if (youresIndex != $('#await-your-table .zcheckbox').length) {\n          $('#await-your-table .zchecked-all').attr('src', 'static/image/direct-orders/multiple1.png');\n        }\n      }\n    }); //全选\n\n    $('#after-copleted-table').on('click', '.zchecked-all', function () {\n      if ($(this).attr('src') == 'static/image/direct-orders/multiple1.png') {\n        $(this).attr('src', 'static/image/direct-orders/multiple2.png');\n        afcompletIndex = $('#after-copleted-table .zcheckbox').length;\n        $('#after-copleted-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple2.png');\n      } else {\n        $(this).attr('src', 'static/image/direct-orders/multiple1.png');\n        afcompletIndex = 0;\n        $('#after-copleted-table .zcheckbox').attr('src', 'static/image/direct-orders/multiple1.png');\n      }\n    }); // 支付重派费\n    //选中时  地址是否为空 为空 编辑信息  不为空  提示已将数据显示 选中\n    //先判断是否有选中项，有  弹出确定重派   没有  提示请先修改收货地址\n\n    $scope.topay = function () {\n      // 是否验证邮件处理\n      if (dsp.isVerifyEmail()) return;\n      var bs = new Base64();\n\n      if ($scope.Imaid.length == 0) {\n        layer.msg('Please select the order for payment');\n      } // console.log($scope.Imaid)\n\n\n      var ids = [];\n      $scope.Imaid.forEach(function (ele) {\n        ids.push(parseInt(ele));\n      });\n\n      if ($scope.cjresIndex > 0) {\n        // payFun()\n        var payFun = function payFun(data) {\n          if (data.data.statusCode == '200') {\n            var result = data.data.result;\n            console.log(result.paymentId, result.fee, _typeof(result.fee.toString()));\n            var payOrdNum = bs.encode(data.data.result.paymentId); //订单号\n\n            var muordMoney = bs.encode(data.data.result.fee + ''); //订单金额\n\n            var ordquantity = bs.encode(ids.length + '');\n            location.href = \"myCJ.html?route=payment#/payment/\".concat(payOrdNum, \"/\").concat(muordMoney, \"/\").concat(ordquantity, \"/problemPackage\"); //订单号，订单金额，订单数量，订单类型\n\n            getList(dsp, $scope);\n          }\n        };\n\n        var drepayFun = function drepayFun() {\n          console.log(\" err ceshi\");\n          layer.closeAll(\"loading\");\n        };\n\n        dsp.postFun('cj/orderResend/cjweb_payment', ids, payFun, drepayFun);\n      } else {\n        layer.msg('Please select the product for reshipment');\n      }\n    }; //点击编辑信息\n\n\n    $scope.ticket = function (item, index) {\n      // $scope.addModefyFlag = true;\n      // $scope.addItemId = item.customerId;\n      $scope.addItemId = item.id;\n      $scope.addItemIndex = index;\n      console.log(item);\n      $scope.isEdit = true;\n      $scope.name = item.nameOfTheAddressee || '';\n      console.log($scope.name);\n      $scope.address = item.address || '';\n      $scope.addCity = item.city || '';\n      $scope.addProvince = item.province || ''; // $scope.addZip = item.ZIP;\n\n      $scope.addEmail = item.zipcode || '';\n      $scope.addPhone = item.telephone || '';\n      $scope.addCountry = item.country || ''; //获取国家信息\n      // $scope.couneryInfo = item.country;\n      // console.log($scope.couneryInfo)\n\n      $scope.couneryInfo = '';\n      dsp.postFun('app/logistic/getcountry', null, function (data) {\n        console.log(data);\n\n        if (data.data.statusCode == 200) {\n          var countryObj = JSON.parse(data.data.result);\n          $scope.countryList = countryObj.countryList;\n          console.log($scope.countryList);\n        }\n      }, function (data) {\n        console.log(data);\n      });\n      var enName = countryEnName(item.country);\n      console.log(enName);\n\n      if (enName) {\n        $scope.couneryInfo = item.country + '#' + enName;\n      } else {\n        $scope.couneryInfo = ''; // $scope.initcouneryInfo = item.country;\n      }\n\n      var storeUpdata = {};\n      storeUpdata.id = index;\n    };\n\n    $scope.checkPhone = function (phone) {\n      phone = phone.replace(/[^\\d\\+\\-\\(\\)]/g, \"\");\n      $scope.addPhone = phone;\n    };\n\n    function countryEnName(code) {\n      console.log(code);\n\n      if ($scope.countryList) {\n        var len = $scope.countryList.length;\n        console.log(len);\n        var enName;\n\n        if (len > 0) {\n          for (var i = 0; i < len; i++) {\n            if (code == $scope.countryList[i].ID) {\n              enName = $scope.countryList[i].NAME_EN;\n              break;\n            }\n          }\n        }\n\n        return enName;\n      }\n    } //确认编辑\n\n\n    $scope.sureModeFun = function () {\n      console.log($scope.addItemIndex); // if ($scope.addCity == '' || $scope.address == '' || $scope.addProvince == '' || $scope.addCountry == '') {\n      //   layer.msg('必填项不能为空')\n      // }\n\n      if (!$scope.addPhone) return layer.msg('Phone is required'); // if(($scope.itemWlName.indexOf('DHL')!=-1||$scope.itemWlName==\"China EMS\"||$scope.itemWlName==\"S.F China Domestic\"||$scope.itemWlName==\"YTO China Domestic\"||$scope.itemWlName==\"South Africa Special Line\"||$scope.itemWlName==\"CJ Normal Express\")&&!$scope.addPhone){\n      // \tlayer.msg('Phone number is required.')\n      // \treturn\n      // }\n\n      dsp.load();\n      var addUpdata = {};\n      addUpdata.id = $scope.addItemId;\n      addUpdata.nameOfTheAddressee = $scope.name;\n      addUpdata.address = $scope.address;\n      addUpdata.city = $scope.addCity;\n      addUpdata.province = $scope.addProvince;\n      addUpdata.telephone = $scope.addPhone;\n      addUpdata.country = $scope.addCountry;\n      addUpdata.zipcode = $scope.addEmail;\n\n      if ($scope.couneryInfo) {\n        addUpdata.country = $scope.couneryInfo.split('#')[1];\n        addUpdata.countryCode = $scope.couneryInfo.split('#')[0];\n      }\n\n      console.log(addUpdata);\n      console.log(addUpdata);\n      dsp.postFun('cj/orderResend/cjweb_update_address', JSON.stringify(addUpdata), function (data) {\n        console.log(data);\n        dsp.closeLoad();\n        $scope.isEdit = false;\n\n        if (data.data.result > 0) {\n          $scope.addModefyFlag = false;\n          layer.msg('Modify success');\n          getList(dsp, $scope); //再查询一次\n          // $scope.refershFun()\n        } else {\n          layer.msg('Modify failed');\n        }\n      }, function (data) {\n        dsp.closeLoad();\n        console.log(data);\n      });\n    }; //已通知客户\n\n\n    $scope.totell = function () {\n      console.log($scope.Imaid);\n\n      if ($scope.Imaid == 0) {\n        layer.msg('Please select the order to inform');\n      } else {\n        $scope.isTell = true;\n        layer.closeAll('loading');\n      }\n    }; //确认通知\n\n\n    $scope.tosureTell = function () {\n      layer.closeAll('loading'); // $scope.totellList = [];\n\n      var ids = [];\n      $scope.Imaid.forEach(function (ele) {\n        ids.push(parseInt(ele));\n      });\n      console.log(ids);\n      var paygoods = {};\n      paygoods.ids = ids;\n      console.log($scope.cjresIndex);\n\n      if ($scope.cjresIndex > 0) {\n        var tellFun = function tellFun(data) {\n          console.log(data);\n          console.log(data.data.message);\n\n          if (data.data.statusCode == '200') {\n            $scope.isTell = false;\n            $scope.Imaid = [];\n            $scope.totellList = data.data.rows;\n            getList(dsp, $scope);\n          }\n        };\n\n        //  dsp.postFun('cj/orderResend/cjweb_tongZhi', JSON.stringify(paygoods), tellFun)\n        dsp.postFun('cj/orderResend/cjweb_tongZhi', ids, tellFun);\n      }\n    }; //取消通知\n\n\n    $scope.cancelSelfpick = function () {\n      $scope.isTell = false; // $scope.Imaid = []\n      // $scope.cjresIndex = 0;\n      // $scope.totellList = [];\n    }; // Excel文件上传\n\n\n    $scope.import_asset = function () {\n      $(\"#file_asset\").click();\n    };\n\n    $(\"#file_asset\").on(\"change\", function () {\n      console.log(123);\n      var formData = new FormData();\n      var file = document.getElementById(\"file_asset\").files[0];\n      console.log(file);\n      console.log(formData);\n\n      if (file.name) {\n        var fileName = file.name.substring(file.name.lastIndexOf(\".\") + 1);\n\n        if (fileName == \"xlsx\" || fileName == \"xls\") {\n          var orsFun = function orsFun(data) {\n            console.log(data);\n            console.log(data.data.message);\n\n            if (data.data.statusCode == '200') {\n              // var obj = JSON.parse(data.data.message)\n              $(\"#file_asset\").val('');\n              $scope.isPay = true;\n              getList(dsp, $scope);\n            } else {\n              layer.msg(data.data.message);\n            }\n          };\n\n          var dreFun = function dreFun() {\n            console.log(\" err ceshi\");\n            layer.closeAll(\"loading\");\n          };\n\n          formData.append('file', file);\n          dsp.upLoadImgPost('cj/orderResend/cjweb_import_address', formData, orsFun, dreFun);\n        } else {\n          alert(\"Incorrect file format, please upload allowed file extensions like .xlsx, .xls.\");\n          $(\"#file_asset\").val(\"\");\n        }\n      }\n    }); //文件导出\n\n    $scope.exportOrder = function () {\n      $scope.dcordFlag = true;\n    };\n\n    $scope.goActexportOrder = function () {\n      var orData = {}; // tjFun(orData)\n      // orData.data = JSON.stringify(orData.data);\n      // exportList ={};\n\n      orData.data = JSON.stringify($scope.totellList);\n      layer.load(2);\n      dsp.postFun('cj/orderResend/cjweb_daiChongPai_export', JSON.stringify(orData), function (data) {\n        layer.closeAll('loading');\n        console.log(data);\n\n        if (data.status == 200) {\n          $scope.dcordFlag = false;\n          $scope.dcordCallbackFlag = true; // $scope.excelHref = JSON.parse(data.data).href;\n\n          $scope.excelHref = data.data.result;\n        } else {\n          layer.msg('Export order error.');\n        }\n      });\n    }; //是否同意补发\n\n\n    $scope.bfAgreeFun = function () {\n      if ($scope.replacementFreight && $scope.replacementFreight > 0) {\n        var itemId = bs.encode($scope.itemId);\n        var yunFeiNum = bs.encode($scope.replacementFreight);\n        location.href = 'myCJ.html?route=payment#/payment/' + itemId + '/' + yunFeiNum + '//dispute';\n      } else {\n        var bfData = {};\n        bfData.id = $scope.itemId;\n        dsp.postFun('app/dispute/agreeReissueOrder', JSON.stringify(bfData), function (data) {\n          console.log(data);\n\n          if (data.data.result) {\n            layer.msg('Thanks, This dispute completed.');\n            getList(dsp, $scope);\n            $scope.closeTicket();\n          } else {\n            layer.msg('This operation is not supported. Please contact your agent for help.');\n          }\n        }, function (data) {\n          console.log(data);\n        });\n      }\n    }; // $scope.bfDisAgreeFun = function () {\n    //     layer.msg('未开发,怎么做')\n    // }\n    // 关闭ticket\n\n\n    $scope.closeTicket = function () {\n      $('.disputecenter-wrap').stop().animate({\n        left: '110%',\n        marginLeft: 0\n      }, 100);\n    }; //回复纠纷的按钮\n\n\n    $scope.replyFun = function () {\n      if ($scope.replyText) {\n        layer.load(2); // var listArr = [];\n\n        var listObj = {}; //存储一条消息内容\n\n        listObj.userName = '0'; //客户\n\n        listObj.image = $scope.imgArr;\n        listObj.remark = $scope.replyText;\n        listObj.videoUrl = $scope.videoArr;\n        listObj.date = timestampToTime(new Date()); // listArr.push(listObj);\n\n        console.log(listObj);\n        console.log(listArr);\n        $scope.messageListArr.push(listObj);\n        var listArr = JSON.stringify($scope.messageListArr);\n        var upData = {};\n        upData.id = $scope.itemId;\n        upData.responseType = 'ERP';\n        upData.message = listArr;\n        dsp.postFun('app/dispute/replyDispute', JSON.stringify(upData), function (data) {\n          console.log(data);\n          layer.closeAll('loading');\n\n          if (data.data.result == true || data.data.result == 200) {\n            $scope.closeTicket(); //关闭纠纷单\n\n            layer.msg('Reply Sucess');\n            $scope.ordersList[$scope.itemIndex].message = $scope.messageListArr;\n            $scope.replyText = '';\n            $scope.imgArr = [];\n            $scope.videoArr = [];\n            getList(dsp, $scope);\n          } else {\n            // $scope.messageListArr.pop()\n            layer.msg('Reply Failed');\n          }\n        }, errFun);\n      } else {\n        layer.msg('Please input some information.');\n        return;\n      }\n    }; //客户关闭纠纷\n\n\n    $scope.closeJfFun = function () {\n      $scope.closeJfFlag = true;\n    };\n\n    $scope.qxCloseFun = function () {\n      $scope.closeJfFlag = false;\n    };\n\n    $scope.sureCloseFun = function () {\n      $scope.closeJfFlag = false;\n      layer.load(2);\n      var upId = {};\n      upId.id = $scope.itemId;\n      dsp.postFun('app/dispute/cancelDispute', JSON.stringify(upId), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n\n        if (data.data.result == true) {\n          layer.msg('Closed Sucess');\n          getList(dsp, $scope);\n          $scope.closeTicket();\n        } else {\n          layer.msg('This operation is not supported. Please contact your agent for help.');\n        }\n      }, errFun);\n    }; //客户拒绝退款 重发\n\n\n    $scope.cusDisAgreeFun = function () {\n      $scope.disAgreeFlag = true;\n    }; //取消拒绝\n\n\n    $scope.qxjjFun = function () {\n      $scope.disAgreeFlag = false;\n    }; //确定拒绝\n\n\n    $scope.sureDisAgreeFun = function () {\n      if (!$scope.refuseCause) {\n        layer.msg('Please fill in refuse reason');\n        return;\n      }\n\n      layer.load(2);\n      var listObj = {}; //存储一条消息内容\n\n      listObj.userName = '0'; //客户\n      // listObj.image = $scope.imgArr;\n\n      listObj.remark = $scope.refuseCause;\n      listObj.date = timestampToTime(new Date());\n      listObj.refuseCause = $scope.refuseCause;\n      listObj.refuseMoney = $scope.tkMoney;\n      $scope.messageListArr.push(listObj);\n      var listArr = JSON.stringify($scope.messageListArr);\n      var upId = {};\n      upId.id = $scope.itemId; // upId.refuseCause = $scope.refuseCause;\n\n      upId.message = listArr;\n      dsp.postFun('app/dispute/refuseProposal', JSON.stringify(upId), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n\n        if (data.data.result == true) {\n          layer.msg('Refuse Success');\n          $scope.ordersList[$scope.itemIndex].message = $scope.messageListArr;\n          $scope.disAgreeFlag = false; //关闭客户不同意退款弹框\n\n          $scope.closeTicket(); //关闭纠纷弹框\n\n          getList(dsp, $scope);\n        } else {\n          layer.msg('This operation is not supported. Please contact your agent for help.');\n        }\n      }, errFun);\n    }; //客户同意退款\n\n\n    $scope.cusAgreeFun = function () {\n      layer.load(2);\n      var upId = {};\n      upId.id = $scope.itemId;\n      dsp.postFun('app/dispute/orderRefund', JSON.stringify(upId), function (data) {\n        console.log(data);\n        layer.closeAll('loading');\n\n        if (data.data.result == true) {\n          layer.msg('Thanks, This dispute completed.');\n          getList(dsp, $scope);\n          $scope.closeTicket();\n        } else {\n          layer.msg('This operation is not supported. Please contact your agent for help.');\n        }\n      }, errFun);\n    }; //点击上传的图片显示大图\n\n\n    $scope.viewBigImg = function (item) {\n      $scope.viewImgFlag = true;\n      $scope.bigImgSrc = item;\n      console.log(item);\n    };\n\n    $scope.closePreImg = function () {\n      $scope.viewImgFlag = false;\n    }; //子订单的详情\n    // $('.orders-list').on('click','.zi-order-num',function () {\n    //  location.href=\"#/order-detail\";\n    // })\n\n\n    $scope.hrefLinkFun = function (item) {\n      var id = item.id;\n      var cjorderNo = item.cjorderNo;\n      var istrackFlag; // if (item.TRACKINGNUMBER) {\n      //     istrackFlag = 2;\n      // } else {\n      //     istrackFlag = 1;\n      // }\n\n      if (item.trackingNumber) {\n        istrackFlag = 2;\n      } else {\n        istrackFlag = 1;\n      }\n\n      var isafter = 3;\n      console.log(isafter); // location.href=\"#/order-detail/\"+id+'/'+istrackFlag;\n      // window.open(\"#/order-detail/\"+id+'/'+istrackFlag+'/'+isafter)\n      //直发单\n\n      var newStr = cjorderNo.indexOf(\"ZF\");\n\n      if (newStr == 0) {\n        // console.log(\"字符串是以ZF开头的！\")\n        window.open(\"#/order-detail/\" + cjorderNo + '/' + istrackFlag + '/' + isafter + '/' + 'DIRECT');\n      }\n\n      if (newStr == -1) {\n        // console.log(\"字符串不是以ZF开头的！\")\n        window.open(\"#/order-detail/\" + cjorderNo + '/' + istrackFlag + '/' + isafter);\n      } // item.impStorageFlag=='ISIMP' ? '1': item.status==12 || item.status==7 ? '0': '1') + '/1/DIRECT'\n\n    };\n\n    function errFun(data) {\n      console.log(data);\n      layer.closeAll('loading');\n    } //格式化时间\n\n\n    function timestampToTime(date) {\n      var Y, M, D, h, m, s;\n      Y = date.getFullYear() + '-';\n      M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n      D = date.getDate() + ' ';\n      h = date.getHours() + ':';\n      m = date.getMinutes() + ':';\n      s = date.getSeconds(); // return Y+M+D+h+m+s;\n\n      return Y + M + D;\n    } // stripe和checkuot交易状态查询\n\n\n    function stripeTradeQuery(parmas) {\n      layer.load(2);\n      dsp.postFun('app/pay/stripeTradeQuery', parmas, function (_ref) {\n        var data = _ref.data;\n        layer.closeAll('loading');\n\n        if (data.code == 200) {\n          $scope.stripeStatus = +data.data;\n\n          if (parmas && parmas.paymentType === 'Stripe') {\n            /** 1待支付 2支付中 3支付成功 4支付失败 5支付异常 6支付取消 */\n            switch (+data.data) {\n              case 1:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 2:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 3:\n                layer.msg('Payment Successful.');\n                break;\n\n              case 4:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              case 5:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              case 6:\n                layer.msg('Payment via Stripe failed. Please try again.');\n                break;\n\n              default:\n                '';\n            }\n          }\n\n          if (parmas && parmas.paymentType === 'Checkout') {\n            /** 1待支付 2支付中 3支付成功 4支付失败 5支付异常 6支付取消 */\n            switch (+data.data) {\n              case 1:\n                layer.msg('Awaiting Payment.');\n                break;\n\n              case 2:\n                layer.msg('Awaiting payment confirmation. Please refresh and check it later.');\n                break;\n\n              case 3:\n                layer.msg('Payment Successful.');\n                break;\n\n              case 4:\n                layer.msg('Payment via CheckOut failed. Please try again.');\n                break;\n\n              case 5:\n                layer.msg('Payment via CheckOut failed. Please try again.');\n                break;\n\n              case 6:\n                layer.msg('Payment Cancelled.');\n                break;\n\n              default:\n                break;\n            } // window.location.href = window.location.origin + '/myCJ.html#/drop-proce';\n\n\n            getList(dsp, $scope);\n          }\n        } else {\n          return layer.msg(data.msg);\n        }\n      }, function (err) {\n        console.log(err);\n      });\n    } // stripe交易状态查询\n\n\n    function getStripeTrade() {\n      var stripeObj = bs.decode(localStorage.getItem('stripeObj') || '') && JSON.parse(bs.decode(localStorage.getItem('stripeObj') || ''));\n      localStorage.removeItem('stripeObj');\n\n      if (!(stripeObj && stripeObj.orderId)) {\n        return;\n      }\n\n      var ordid = $stateParams.ordid;\n\n      if (ordid !== stripeObj.showOrdId) {\n        return;\n      }\n\n      var parmas = {\n        'orderId': stripeObj && stripeObj.orderId,\n        'code': stripeObj && stripeObj.stripeCode,\n        'payId': stripeObj && stripeObj.payId,\n        'paymentType': stripeObj && stripeObj.paymentType\n      };\n      stripeTradeQuery(parmas);\n    }\n\n    getStripeTrade(); // checkout交易状态查询\n\n    function getCheckoutTrade() {\n      var checkoutObj = bs.decode(localStorage.getItem('checkoutObj') || '') && JSON.parse(bs.decode(localStorage.getItem('checkoutObj') || ''));\n      localStorage.removeItem('checkoutObj');\n      localStorage.removeItem('ckoSessionId');\n\n      if (!(checkoutObj && checkoutObj.paymentType === 'Checkout')) {\n        return;\n      }\n\n      var parmas = {\n        'orderId': checkoutObj && checkoutObj.orderId,\n        'code': checkoutObj && checkoutObj.stripeCode,\n        'paymentType': checkoutObj && checkoutObj.paymentType,\n        'payId': checkoutObj && checkoutObj.payId,\n        'sessionId': $scope.ckoSessionId\n      };\n      stripeTradeQuery(parmas);\n    }\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovdW5kZWxpdmVyZWQtb3JkZXJzL3VuZGVsaXZlci1wZW5kaW5nLXJlc2hpcC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9zcmMvcGFnZXMvbXljai91bmRlbGl2ZXJlZC1vcmRlcnMvdW5kZWxpdmVyLXBlbmRpbmctcmVzaGlwLmpzPzhlMjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTk9ERV9FTlYgfSBmcm9tICdAcm9vdF9lZ2cvZW52JztcclxuY29uc3QgYXdpblRlc01vZGUgPSBbJ3Rlc3RuZXcnLCAnZGV2ZWxvcG1lbnQnLCAndGVzdCddLmluY2x1ZGVzKE5PREVfRU5WKSA/IDEgOiAwO1xyXG5leHBvcnQgZnVuY3Rpb24gdW5kZWxpdmVyUGVuZGluZ1Jlc2hpcEZhY3RvcnkoYW5ndWxhcikge1xyXG4gIGNvbnN0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCd1bmRlbGl2ZXItcGVuZGluZy1yZXNoaXAubW9kdWxlJywgW10pO1xyXG5cclxuICAvL+W+hemHjea0vlxyXG4gIGFwcC5jb250cm9sbGVyKCd1bmRlbGl2ZXItcGVuZGluZy1yZXNoaXAuY3RybCcsIFsnJHNjb3BlJywgJ2RzcCcsICckbG9jYXRpb24nLCAnJHN0YXRlUGFyYW1zJyxcclxuICAgIGZ1bmN0aW9uICgkc2NvcGUsIGRzcCwgJGxvY2F0aW9uLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgICAgY29uc29sZS5sb2coJ3VuZGVsaXZlci1wZW5kaW5nLXJlc2hpcC5jdHJsJylcclxuICAgICAgY29uc29sZS5sb2coJ2lzdmlwJyxsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndmlwJykpXHJcbiAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndmlwJykgPT0gMSkge1xyXG4gICAgICAgICRzY29wZS5pc1ZpcCA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJHNjb3BlLmlzVmlwID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgZHNwLmRvbWFpbkRhdGEoKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAvLyDor7fmsYLmiJDlip/nmoTnu5PmnpxcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXHJcbiAgICAgICAgJHNjb3BlLmlzY2ogPSByZXMuaXNjajtcclxuICAgICAgICBpZiAoJHNjb3BlLmlzY2ogPT0gJzEnKSB7XHJcbiAgICAgICAgICAvL2NqXHJcbiAgICAgICAgICAkc2NvcGUud2Vic2l0ZU5hbWUgPSAnQ0onO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvL+WuouaIt1xyXG4gICAgICAgICAgJHNjb3BlLndlYnNpdGVOYW1lID0gcmVzLndlYnNpdGVOYW1lIHx8ICdDSic7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAkc2NvcGUubmF2TGlzdCA9IFtcclxuICAgICAgICB7IHR5cGU6JzEnLCBuYW1lOidQZW5kaW5nIFJlc2hpcG1lbnQnIH0sXHJcbiAgICAgICAgeyB0eXBlOicyJywgbmFtZTonUGFpZCcgfSxcclxuICAgICAgICB7IHR5cGU6JzMnLCBuYW1lOidBd2FpdGluZyBTZWxmIFBpY2t1cCcgfSxcclxuICAgICAgICB7IHR5cGU6JzQnLCBuYW1lOidQcm9jZXNzZWQnIH0sXHJcbiAgICAgICAgeyB0eXBlOic1JywgbmFtZTonRXhwaXJlZCcgfSxcclxuICAgICAgXVxyXG4gICAgICBjb25zb2xlLmxvZygn5b6F6YeN5rS+JylcclxuICAgICAgdmFyIHBhZ2VIID0gJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxO1xyXG4gICAgICB2YXIgZG9jSCA9ICQoZG9jdW1lbnQpLmhlaWdodCgpO1xyXG4gICAgICB2YXIgYnMgPSBuZXcgQmFzZTY0KCk7XHJcbiAgICAgIHZhciB1c2VySWQgPSBicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpID8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpIDogJycpXHJcbiAgICAgIGNvbnNvbGUubG9nKHVzZXJJZClcclxuICAgICAgdmFyIHBhY2thZ2V0eXBlID0gJHN0YXRlUGFyYW1zLnBhY2thZ2V0eXBlO1xyXG4gICAgICBjb25zb2xlLmxvZyhwYWNrYWdldHlwZSlcclxuICAgICAgJCgnLmFmdGVyc2FsZS1yaWdodCcpLmNzcyh7XHJcbiAgICAgICAgJ21pbi1oZWlnaHQnOiAkKHdpbmRvdykuaGVpZ2h0KCkgKiAxICsgJ3B4J1xyXG4gICAgICB9KTtcclxuICAgICAgLy/orr7nva7pu5jorqTml7bpl7RcclxuICAgICAgZnVuY3Rpb24gR2V0RGF0ZVN0cihBZGREYXlDb3VudCkge1xyXG4gICAgICAgIHZhciBkZCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZGQuc2V0RGF0ZShkZC5nZXREYXRlKCkgKyBBZGREYXlDb3VudCk7Ly/ojrflj5ZBZGREYXlDb3VudOWkqeWQjueahOaXpeacn1xyXG4gICAgICAgIHZhciB5ID0gZGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB2YXIgbSA9IGRkLmdldE1vbnRoKCkgKyAxOy8v6I635Y+W5b2T5YmN5pyI5Lu955qE5pel5pyfXHJcbiAgICAgICAgdmFyIGQgPSBkZC5nZXREYXRlKCk7XHJcbiAgICAgICAgaWYgKG0gPCAxMCkge1xyXG4gICAgICAgICAgbSA9ICcwJyArIG07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkIDwgMTApIHtcclxuICAgICAgICAgIGQgPSAnMCcgKyBkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geSArIFwiLVwiICsgbSArIFwiLVwiICsgZDtcclxuICAgICAgfVxyXG4gICAgICB2YXIgYURhdGUgPSBHZXREYXRlU3RyKC00NSk7XHJcbiAgICAgIHZhciBlbkRhdGUgPSBHZXREYXRlU3RyKDApO1xyXG4gICAgICAvLyAkKFwiI3ktb3JkLXNkYXRlXCIpLnZhbChhRGF0ZSApOyAgIC8v5YWz6ZSu6K+t5Y+lXHJcbiAgICAgIC8vICQoXCIjeS1vcmQtZWRhdGVcIikudmFsKGVuRGF0ZSApOyAgIC8v5YWz6ZSu6K+t5Y+lXHJcbiAgICAgIGNvbnN0IHsgZmlsdGVyIH0gPSAkbG9jYXRpb24uc2VhcmNoKCk7XHJcbiAgICAgIGZpbHRlciB8fCAkKFwiI2NqLXN0aW1lXCIpLnZhbChhRGF0ZSk7ICAgLy/lhbPplK7or63lj6VcclxuICAgICAgLy8kKFwiI2NqLWV0aW1lXCIpLnZhbChlbkRhdGUgKTsgICAvL+WFs+mUruivreWPpVxyXG4gICAgICAvLyAkc2NvcGUuZGF0YUZvdW5kID0gZmFsc2U7XHJcbiAgICAgIGNvbnNvbGUubG9nKCQoJy5kZWFsLW9yZGVycycpLndpZHRoKCksICQoJy5vcmRlcnMtbGlzdCcpLndpZHRoKCksICQoJy5vcmRlcnMtdGFibGUnKS53aWR0aCgpKVxyXG5cclxuICAgICAgLy/nu5nlt6bkvqfnmoTlr7zoiKrmt7vliqDmu5rliqjkuovku7ZcclxuICAgICAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPj0gMCkge1xyXG4gICAgICAgICAgJCgnLmxlZnQtbmF2JykuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXHJcbiAgICAgICAgICAgIHRvcDogJzgwcHgnXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAkKCcubGVmdC1uYXYnKS5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcclxuICAgICAgICAgICAgdG9wOiAnODBweCdcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLy/nuqDnurfnsbvlnotcclxuICAgICAgJHNjb3BlLmppdWZlbiA9IFsnQWxsJywgJ05vIFRyYWNraW5nIEluZm9ybWF0aW9uIEZvdW5kJywgJ1RyYWNraW5nIEluZm9ybWF0aW9uIEZyb3plbicsICdUcmFja2luZyBJbmZvcm1hdGlvbiBFcnJvcicsICdPcmRlciBSZXR1cm5lZCcsICdQcm9kdWN0cyBTaG9ydCcsICdEZWZlY3RpdmUgUHJvZHVjdHMnLCAnUmVjZWl2ZWQgSW5jb3JyZWN0IFByb2R1Y3RzJywgJ09yZGVyIE5vdCBSZWNlaXZlZCddO1xyXG4gICAgICAvL+iuouWNleeKtuaAgVxyXG4gICAgICAkc2NvcGUuc3RhdGUgPSBbJ0Nsb3NlZCcsICdDb21wbGV0ZWQnLCAnQXdhaXRpbmcgQ0ogUmVzcG9uc2UnLCAnQXdhaXRpbmcgWW91ciBSZXNwb25zZSddO1xyXG4gICAgICAvL+W8ueeql1xyXG4gICAgICAkc2NvcGUud2luZG93ID0gZmFsc2U7XHJcbiAgICAgIC8vICRzY29wZS51cGxvYWQ9ZmFsc2U7XHJcbiAgICAgICRzY29wZS5pc1N1YnNjcmliZSA9IGZhbHNlOyAgIC8v5aaC5L2V5L2/55SoSG93IFRvIHVzZSBpdFxyXG4gICAgICAkc2NvcGUuaXNQYXkgPSBmYWxzZTsgICAgICAgICAvL+aYr+WQpuaUr+S7mOmHjea0vui0uVxyXG4gICAgICAkc2NvcGUuaXNJbmZvID0gZmFsc2U7ICAgICAgICAgLy/kvKDlhaXkv6Hmga/mmK/lkKbmraPnoa5cclxuICAgICAgJHNjb3BlLmlzRWRpdCA9IGZhbHNlOyAgICAgICAgIC8v57yW6L6R5by556qXXHJcbiAgICAgICRzY29wZS5pc1RlbGwgPSBmYWxzZTsgICAgICAgICAvL+W3sumAmuefpeihqOagvOW8ueeql1xyXG4gICAgICAkc2NvcGUuYWRkSXRlbUlkID0gJyc7ICAgICAgICAgICAgLy/nvJbovpHnmoRJROWAvFxyXG4gICAgICAkc2NvcGUuYWRkSXRlbUluZGV4ID0gJyc7ICAgICAgICAgLy/nvJbovpHnmoRpbmRleOWAvFxyXG4gICAgICAkc2NvcGUuY2pyZXNJbmRleCA9ICcnOyAgICAgICAgICAvL+mAieS4reeahOS/oeaBr+aVsOmHj1xyXG4gICAgICAkc2NvcGUuSW1hZGRyZXNzID0gJyc7ICAgICAgICAgICAgICAgIC8v6YCJ5Lit5b2T5YmN6KGM55qE5Zyw5Z2AXHJcbiAgICAgICRzY29wZS5JbWFpZCA9IFtdOyAgICAgICAgICAgICAgICAvL+mAieS4reW9k+WJjeihjOeahGlkXHJcbiAgICAgICRzY29wZS5kYWlwYWkgPSAnJzsgICAgICAgICAgICAgICAgLy/pgInkuK3lvZPliY3ooYznmoRpZFxyXG4gICAgICAkc2NvcGUuZGFpcXUgPSAnJzsgICAgICAgICAgICAgICAgLy/pgInkuK3lvZPliY3ooYznmoRpZFxyXG4gICAgICAkc2NvcGUueWljaHVsaSA9ICcnOyAgICAgICAgICAgICAgICAvL+mAieS4reW9k+WJjeihjOeahGlkXHJcbiAgICAgICRzY29wZS55aXpoaWZ1ID0gJyc7ICAgICAgICAgICAgICAgIC8v6YCJ5Lit5b2T5YmN6KGM55qEaWRcclxuICAgICAgJHNjb3BlLmd1b3FpID0gJyc7ICAgICAgICAgICAgICAgIC8v6YCJ5Lit5b2T5YmN6KGM55qEaWRcclxuICAgICAgLy/or7fmsYLlj4LmlbAgZGlzcHV0ZVR5cGVcclxuICAgICAgJHNjb3BlLmxlaXhpbmcgPSAxO1xyXG5cclxuICAgICAgLy/ojrflj5bliJfooahcclxuICAgICAgJHNjb3BlLnRvdGVsbExpc3QgPSBbXTtcclxuICAgICAgJHNjb3BlLm9yZHN0YXR1cyA9ICRzdGF0ZVBhcmFtcy5wcm9ibGVtU3R1IHx8IDE7XHJcblxyXG4gICAgICBkc3AubG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JyksICQod2luZG93KS5oZWlnaHQoKSAtIDE3MSwgNDcsIDApO1xyXG4gICAgICAkc2NvcGUucGFnZVNpemUgPSAnMjAnO1xyXG4gICAgICAkc2NvcGUucGFnZU51bSA9IDE7XHJcbiAgICAgICRzY29wZS5wYWdlTnVtMSA9ICRzY29wZS5wYWdlTnVtICsgMTtcclxuICAgICAgJHNjb3BlLnRvdGFsTnVtID0gMDtcclxuICAgICAgJHNjb3BlLnRvdGFsUGFnZU51bSA9IDA7XHJcbiAgICAgICRzY29wZS5zZWFyY2h2YWwgPSBwYWNrYWdldHlwZTtcclxuICAgICAgY29uc29sZS5sb2coJHNjb3BlLnNlYXJjaHZhbClcclxuXHJcbiAgICAgIC8v6I635Y+WdXJs5Lit55qE5Y+C5pWw5pa55rOVXHJcbiAgICAgIGZ1bmN0aW9uIGdldFVybFBhcmFtQnlLZXkgKGhyZWYsIGtleSkge1xyXG4gICAgICAgIGlmKCFocmVmKSByZXR1cm4gJydcclxuICAgICAgICB2YXIgdmFycyA9IGhyZWYuc3BsaXQoXCImXCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwO2kgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgcGFpciA9IHZhcnNbaV0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgICAgaWYocGFpclswXSA9PSBrZXkpIHsgcmV0dXJuIHBhaXJbMV07IH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy9wYXlwYWzmlK/ku5hcclxuICAgICBmdW5jdGlvbiBpbml0SXNDaGVja291dCgpIHtcclxuICAgICAgLy8g5Yik5pat5b2T5YmN5piv5ZCm5a2Y5ZyoY2tvc2Vzc2lvbmlkXHJcbiAgICAgICRzY29wZS5ja29TZXNzaW9uSWQgPSBicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Nrb1Nlc3Npb25JZCcpIHx8ICcnKSAmJiBKU09OLnBhcnNlKGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2tvU2Vzc2lvbklkJykgfHwgJycpKVxyXG4gICAgICBpZigkc2NvcGUuY2tvU2Vzc2lvbklkKSB7XHJcbiAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSlcclxuICAgICAgICBnZXRDaGVja291dFRyYWRlKClcclxuICAgICAgICByZXR1cm4gXHJcbiAgICAgIH1cclxuICAgICAgdmFyIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgaWYgKGhyZWYuaW5kZXhPZignPycpID49IDAgJiYgIWZpbHRlcikgeyAvLzIwMTktOC0xMiDpnIDopoFxdWVyeeS8oOWPgiDmraTlpITmjpLpmaTmlrDlop7nmoTov5nkuKrmnaHku7ZcclxuICAgICAgICBjb25zdCByZWdleHAgPSAvXFw/W1xcd1xcV10qXFwjL1xyXG4gICAgICAgICRzY29wZS5zZXNzaW9uSWQgPSBnZXRVcmxQYXJhbUJ5S2V5KGhyZWYubWF0Y2gocmVnZXhwKSAmJiBocmVmLm1hdGNoKHJlZ2V4cClbMF0uc2xpY2UoMSwtMSksJ2Nrby1wYXltZW50LWlkJykgfHwgZ2V0VXJsUGFyYW1CeUtleShocmVmLm1hdGNoKHJlZ2V4cCkgJiYgaHJlZi5tYXRjaChyZWdleHApWzBdLnNsaWNlKDEsLTEpLCdja28tc2Vzc2lvbi1pZCcpXHJcbiAgICAgICAgaWYoJHNjb3BlLnNlc3Npb25JZCkge1xyXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Nrb1Nlc3Npb25JZCcsIGJzLmVuY29kZShKU09OLnN0cmluZ2lmeSgkc2NvcGUuc2Vzc2lvbklkKSkpO1xyXG4gICAgICAgICAgLy8g5ZCO56uv5o6l5Y+j6L+U5Zue54q25oCB6L6D5oWi77yM5bu26L+f5LiA56eS5YaN5Yi35paw5b2T5YmN6aG16Z2iXHJcbiAgICAgICAgICBsZXQgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL215Q0ouaHRtbCMvcHJvYmxlbS1wYWNrYWdlLydcclxuICAgICAgICAgIH0sIDIwMClcclxuICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGhyZWZBcnIgPSBocmVmLnNwbGl0KCc/Jyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coaHJlZkFycilcclxuICAgICAgICB2YXIgcGF5ZGF0YUFyciA9IGhyZWZBcnJbMV0uc3BsaXQoJyYnKVxyXG4gICAgICAgIHZhciBsZW5ndGhQYXkgPSBwYXlkYXRhQXJyLmxlbmd0aDtcclxuICAgICAgICBjb25zb2xlLmxvZyhwYXlkYXRhQXJyKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGxlbmd0aFBheSlcclxuICAgICAgICBpZiAobGVuZ3RoUGF5ID09IDMpIHtcclxuICAgICAgICAgIHZhciBwYXltZW50QXJyID0gcGF5ZGF0YUFyclswXS5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgdmFyIHRva2VuQXJyID0gcGF5ZGF0YUFyclsxXS5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgdmFyIHBheWlkQXJyID0gcGF5ZGF0YUFyclsyXS5zcGxpdCgnPScpO1xyXG5cclxuICAgICAgICAgIHZhciBwYXlDUyA9IHt9O1xyXG4gICAgICAgICAgcGF5Q1MucGF5bWVudElkID0gcGF5bWVudEFyclsxXTtcclxuICAgICAgICAgIHBheUNTLnRva2VuID0gdG9rZW5BcnJbMV07XHJcbiAgICAgICAgICBwYXlDUy5wYXllcklEID0gcGF5aWRBcnJbMV07XHJcbiAgICAgICAgICBwYXlDUy5jb2RlID0gMzU7XHJcbiAgICAgICAgICBwYXlDUy50eXBlID0gXCJwcm9ibGVtUGFja2FnZVwiO1xyXG4gICAgICAgICAgcGF5Q1MuYXdjID0gZHNwLmdldENvb2tpZShcImF3Y1wiKSB8fCAnJztcclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhwYXlDUylcclxuICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHBheUNTKSlcclxuICAgICAgICAgIHZhciBpc1Rva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BheVRva2VuJyk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhpc1Rva2VuKVxyXG4gICAgICAgICAgaWYgKGlzVG9rZW4gPT0gdG9rZW5BcnJbMV0pIHtcclxuICAgICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvcGF5L3BheScsIEpTT04uc3RyaW5naWZ5KHBheUNTKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgRmFpbGVkJylcclxuICAgICAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgU3VjY2VlZCcpXHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGF5VG9rZW4nLCB0b2tlbkFyclsxXSlcclxuICAgICAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vYXdpbiDlj5HpgIHmlK/ku5jmiJDlip9mYWxsLWJhY2tcclxuICAgICAgICAgICAgICAgIGxldCBhd2luTG9jYWxQYXJhbXMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgYXdpbkxvY2FsUGFyYW1zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgX3BheXBhbF8ke3BheUNTLnRva2VufWApKVxyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhd2luTG9jYWxQYXJhbXMpXHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoKGVycikgeyBjb25zb2xlLmxvZygn6Kej5p6Q6ZSZ6K+vJyk7IH1cclxuICAgICAgICAgICAgICAgIGlmKGF3aW5Mb2NhbFBhcmFtcyl7XHJcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGF3aW5KUyAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSAnPHNjcmlwdCA+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyB2YXIgQVdJTiA9IHt9OycgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyAgQVdJTi5UcmFja2luZyA9IHt9OycgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnIEFXSU4uVHJhY2tpbmcuU2FsZSA9IHt9OycgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnIEFXSU4uVHJhY2tpbmcuU2FsZS5hbW91bnQgPScgKyBhd2luTG9jYWxQYXJhbXMuYXdpbkFtb3VudCArICc7JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgQVdJTi5UcmFja2luZy5TYWxlLm9yZGVyUmVmID1cIicgKyBhd2luTG9jYWxQYXJhbXMuYXdpblJlZisgJ1wiOycgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnIEFXSU4uVHJhY2tpbmcuU2FsZS5wYXJ0cyAgPVwiJyArIFwiREVGQVVMVDpcIiArIGF3aW5Mb2NhbFBhcmFtcy5hd2luQW1vdW50KyAnXCI7JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdBV0lOLlRyYWNraW5nLlNhbGUuY3VycmVuY3kgPSBcIlVTRFwiOycrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgQVdJTi5UcmFja2luZy5TYWxlLnRlc3QgPSBcIicgKyBhd2luVGVzTW9kZSArICdcIjsnK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnQVdJTi5UcmFja2luZy5TYWxlLmNoYW5uZWwgPSBcImF3XCI7JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyc8XFwvc2NyaXB0PidcclxuICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgb3NyYyA9ICdodHRwczovL3d3dy5kd2luMS5jb20vMjE1NzguanMnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcclxuICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdC5zcmMgPSBvc3JjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbWdIdHRwRnVuKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9yZGVyQ291bnRNb25leSA9IGF3aW5Mb2NhbFBhcmFtcy5hd2luQW1vdW50LnRvRml4ZWQoMilcclxuICAgICAgICAgICAgICAgICAgICBsZXQgQmFza2V0SW1hZ2UgPSBuZXcgSW1hZ2UoMSwxKTtcclxuICAgICAgICAgICAgICAgICAgICBCYXNrZXRJbWFnZS5zcmMgPSBgaHR0cHM6Ly93d3cuYXdpbjEuY29tL3NyZWFkLmltZz90dD1ucyZ0dj0yJm1lcmNoYW50PTIxNTc4JmFtb3VudD0ke29yZGVyQ291bnRNb25leX0mY2g9YXcmcGFydHM9REVGQVVMVDoke29yZGVyQ291bnRNb25leX0mY3I9VVNEJnJlZj0ke2F3aW5Mb2NhbFBhcmFtcy5hd2luUmVmfSZ0ZXNtb2RlPSR7YXdpblRlc01vZGV9YDtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgX3BheXBhbF8ke3BheUNTLnRva2VufWApXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgbGV0IGF3Y1RleHQgPSBkc3AuZ2V0Q29va2llKCdhd2MnKVxyXG4gICAgICAgICAgICAgICAgICBsZXQgdXRtU291cmNlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3V0bVNvdXJjZScpO1xyXG4gICAgICAgICAgICAgICAgICBpZihhd2NUZXh0ICYmIHV0bVNvdXJjZSA9PSAnYXdpbicpey8v5pyJYXdpbueahGF3Y+WAvCDlubbkuJTnmbvlvZXlubPlj7DmnaXmupDmmK9hd2luXHJcbiAgICAgICAgICAgICAgICAgICAgYXdpbkpTKClcclxuICAgICAgICAgICAgICAgICAgICBpbWdIdHRwRnVuKClcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVuZ3RoUGF5IDwgMykge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IEZhaWxlZCcpXHJcbiAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgIH1cclxuICAgICB9XHJcbiAgICAgaW5pdElzQ2hlY2tvdXQoKVxyXG5cclxuICAgICAgLy8g5b6F6YeN5rS+6I635Y+W5pWw5o2u5YiX6KGob3JkZXJzTGlzdFxyXG4gICAgICBmdW5jdGlvbiBnZXRMaXN0KCkge1xyXG4gICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAkc2NvcGUudG90YWxOdW0gPSAwOyAgICAgLy/lkI7lj7Dov5Tlm57nmoTmlbDmja7plb/luqZcclxuICAgICAgICB2YXIgZ2V0TGlzdERhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgLy/moIfpopjpg6jliIZcclxuICAgICAgICBkc3AucG9zdEZ1bignY2ovb3JkZXJSZXNlbmQvY2p3ZWJfY3VzdG9tZXJfc3RhdGVfY291bnQnLCAnJywgY29uMSwgZXJyRnVuMSlcclxuICAgICAgICBmdW5jdGlvbiBjb24xKGRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICBsZXQgbWVzc2FnZSA9IGRhdGEuZGF0YS5tZXNzYWdlXHJcbiAgICAgICAgICBsZXQgcmVzdWx0ID0gZGF0YS5kYXRhLnJlc3VsdFxyXG4gICAgICAgICAgbGV0IHN0YXR1c0NvZGUgPSBkYXRhLmRhdGEuc3RhdHVzQ29kZVxyXG4gICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5kYWlwYWkgPSByZXN1bHRbMF0uYW1vdW50XHJcbiAgICAgICAgICAgICRzY29wZS55aXpoaWZ1ID0gcmVzdWx0WzFdLmFtb3VudFxyXG4gICAgICAgICAgICAkc2NvcGUuZGFpcXUgPSByZXN1bHRbMl0uYW1vdW50XHJcbiAgICAgICAgICAgICRzY29wZS55aWNodWxpID0gcmVzdWx0WzNdLmFtb3VudFxyXG4gICAgICAgICAgICAkc2NvcGUuZ3VvcWkgPSByZXN1bHRbNF0uYW1vdW50XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZ3VvcWksICRzY29wZS55aXpoaWZ1LCAkc2NvcGUuZGFpcGFpLCAkc2NvcGUuZGFpcXUsICRzY29wZS55aWNodWxpKVxyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBlcnJGdW4xKGRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0TGlzdERhdGEucGFnZU51bSA9ICRzY29wZS5wYWdlTnVtIC0gMDtcclxuICAgICAgICBnZXRMaXN0RGF0YS5wYWdlU2l6ZSA9ICRzY29wZS5wYWdlU2l6ZSAtIDA7XHJcblxyXG4gICAgICAgIC8vICAgZ2V0TGlzdERhdGEudG90YWxQYWdlcyA9IDE7XHJcbiAgICAgICAgLy8gICBnZXRMaXN0RGF0YS50b3RhbENvdW50cyA9IDE7XHJcblxyXG4gICAgICAgIC8vICAgZ2V0c3RhdHVzKGdldExpc3REYXRhKTtcclxuICAgICAgICBnZXRMaXN0RGF0YS5vcmRlck51bWJlciA9ICRzY29wZS5zZWFyY2h2YWw7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZHN0YXR1cylcclxuICAgICAgICBnZXRMaXN0RGF0YS5iZWdpbkRhdGUgPSAkKFwiI2NqLXN0aW1lXCIpLnZhbCgpO1xyXG4gICAgICAgIGdldExpc3REYXRhLmVuZERhdGUgPSAkKFwiI2NqLWV0aW1lXCIpLnZhbCgpO1xyXG4gICAgICAgIGlmICgkc2NvcGUub3Jkc3RhdHVzID09IDEpIHtcclxuICAgICAgICAgIC8vIGRzcC5wb3N0RnVuKCdjai9vcmRlclJlc2VuZC9jandlYl9xdWVyeV9kYWlDaG9uZ1BhaScsIEpTT04uc3RyaW5naWZ5KGdldExpc3REYXRhKSwgY29uLCBlcnJGdW4pXHJcbiAgICAgICAgICBkc3AucG9zdEZ1bignY2ovb3JkZXJSZXNlbmQvd2FpdFJlc2VuZCcsIEpTT04uc3RyaW5naWZ5KGdldExpc3REYXRhKSwgY29uLCBlcnJGdW4pXHJcbiAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUub3Jkc3RhdHVzID09IDIpIHtcclxuICAgICAgICAgIGRzcC5wb3N0RnVuKCdjai9vcmRlclJlc2VuZC9jandlYl9xdWVyeV95aVpoaUZ1JywgSlNPTi5zdHJpbmdpZnkoZ2V0TGlzdERhdGEpLCBjb24sIGVyckZ1bilcclxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5vcmRzdGF0dXMgPT0gMykge1xyXG4gICAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL29yZGVyUmVzZW5kL2Nqd2ViX3F1ZXJ5X2RhaVRvbmdaaGlaaVF1JywgSlNPTi5zdHJpbmdpZnkoZ2V0TGlzdERhdGEpLCBjb24sIGVyckZ1bilcclxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5vcmRzdGF0dXMgPT0gNCkge1xyXG4gICAgICAgICAgZHNwLnBvc3RGdW4oJ2NqL29yZGVyUmVzZW5kL2Nqd2ViX3F1ZXJ5X3lpQ2h1TGknLCBKU09OLnN0cmluZ2lmeShnZXRMaXN0RGF0YSksIGNvbiwgZXJyRnVuKVxyXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLm9yZHN0YXR1cyA9PSA1KSB7XHJcbiAgICAgICAgICBkc3AucG9zdEZ1bignY2ovb3JkZXJSZXNlbmQvY2p3ZWJfcXVlcnlfeWlHdW9RaScsIEpTT04uc3RyaW5naWZ5KGdldExpc3REYXRhKSwgY29uLCBlcnJGdW4pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbihkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGV0IHsgbWVzc2FnZSwgcmVzdWx0LCBzdGF0dXNDb2RlIH0gPSBkYXRhLmRhdGFcclxuICAgICAgICAgIC8vICAgJHNjb3BlLm9yZHN0YXR1c051bSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICRzY29wZS5vcmRzdGF0dXNOdW0gPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAvLyAgICRzY29wZS5vcmRlcnNMaXN0ID0gZGF0YS5kYXRhLmxpc3Q7XHJcbiAgICAgICAgICAkc2NvcGUuYWxsc2VsZWN0aWRzID0gW107XHJcbiAgICAgICAgICAkc2NvcGUuYWxsc2VsZWN0YWRkcmVzcyA9IFtdO1xyXG4gICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSByZXN1bHQucm93cztcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KVxyXG4gICAgICAgICAgaWYgKCRzY29wZS5vcmRlcnNMaXN0KSB7XHJcbiAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0LmZvckVhY2goZWxlID0+IHtcclxuICAgICAgICAgICAgICBlbGUuZGVhZGxpbmUgPSB0aW1lc3RhbXBUb1RpbWUobmV3IERhdGUoZWxlLmRlYWRsaW5lKSk7XHJcbiAgICAgICAgICAgICAgZWxlLnVwZGF0ZWRUaW1lID0gdGltZXN0YW1wVG9UaW1lKG5ldyBEYXRlKGVsZS51cGRhdGVkVGltZSkpO1xyXG4gICAgICAgICAgICAgIGVsZS5leGVjVGltZSA9IHRpbWVzdGFtcFRvVGltZShuZXcgRGF0ZShlbGUuZXhlY1RpbWUpKTtcclxuICAgICAgICAgICAgICBpZihlbGUucGF5bWVudFN0YXR1cyAhPT0gJzAnKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWxsc2VsZWN0aWRzLnB1c2goZWxlLmlkICsgJycpO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgICAgIC8vIGxheWVyLm1zZygnTm8gZGF0YScpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCRzY29wZS5vcmRlcnNMaXN0KTtcclxuICAgICAgICAgIC8vICAgJHNjb3BlLnRvdGFsTnVtID0gZGF0YS5kYXRhLmNvdW50Oy8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAkc2NvcGUudG90YWxOdW0gPSByZXN1bHQudG90YWw7Ly/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS50b3RhbE51bSlcclxuICAgICAgICAgIGlmICgkc2NvcGUudG90YWxOdW0gPiAwKSB7XHJcbiAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAkc2NvcGUuY291bnRQYWdlID0gTWF0aC5jZWlsKCRzY29wZS50b3RhbE51bSAvICgkc2NvcGUucGFnZVNpemUgLSAwKSlcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRzcC5hZGROb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JyksJCh3aW5kb3cpLmhlaWdodCgpLTE3MSw0NywwLHt3aWR0aDonMTAwJSd9KVxyXG4gICAgICAgICAgICBkc3AuY2xvc2VMb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgJHNjb3BlLmNvdW50UGFnZSA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYWdlRnVuKGRzcCwgJHNjb3BlKTtcclxuICAgICAgICAgIG51bUZ1bigpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGVyckZ1bihkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+iOt+WPlueKtuaAgVxyXG4gICAgICAvLyBmdW5jdGlvbiBnZXRzdGF0dXMoZ2V0c3R1KSB7XHJcbiAgICAgIC8vICAgICBpZiAoJHNjb3BlLm9yZHN0YXR1cz09MSkge1xyXG4gICAgICAvLyAgICAgICAgIGdldHN0dS5zdGF0dXMgPSAkc2NvcGUud2FpdGluZ1Jlc0J0biA/ICcxLDIsNCw3JyA6ICcxLDIsNCw2JzsvL+atpOWkhOaWsOWinuadoeS7tuetm+mAiVxyXG4gICAgICAvLyAgICAgICAgIGdldHN0dS5yZXNwb25zZVR5cGUgPSAkc2NvcGUud2FpdGluZ1Jlc0J0biA/ICdDSicgOiAnJzsvL+atpOWkhOaWsOWinuadoeS7tuetm+mAiVxyXG4gICAgICAvLyAgICAgfSBlbHNlIGlmICgkc2NvcGUub3Jkc3RhdHVzPT0yKSB7XHJcbiAgICAgIC8vICAgICAgICAgZ2V0c3R1LnN0YXR1cyA9ICczJztcclxuICAgICAgLy8gICAgIH1lbHNlIGlmICgkc2NvcGUub3Jkc3RhdHVzPT0zKSB7XHJcbiAgICAgIC8vICAgICAgICAgZ2V0c3R1LnN0YXR1cyA9ICc1JztcclxuICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vICAgICAgICAgZ2V0c3R1LnN0YXR1cyA9ICc3JztcclxuICAgICAgLy8gICAgIH1cclxuICAgICAgLy8gfVxyXG4gICAgICBcclxuICAgICAgJHNjb3BlLiRvbigncGFnZWRhdGEtZmEnLCBmdW5jdGlvbiAoZCwgZGF0YSkgey8v5YiG6aG15YiH5o2i5pWw5o2u55uR5ZCsXHJcbiAgICAgICAgJHNjb3BlLnBhZ2VOdW0gPSBkYXRhLnBhZ2VOdW07XHJcbiAgICAgICAgJHNjb3BlLnBhZ2VTaXplID0gZGF0YS5wYWdlU2l6ZTtcclxuICAgICAgICBnZXRMaXN0KCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8v5YiG6aG1XHJcbiAgICAgIGZ1bmN0aW9uIHBhZ2VGdW4oZHNwLCAkc2NvcGUpIHtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnRvdGFsTnVtKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5wYWdlU2l6ZSlcclxuICAgICAgICBpZiAoJHNjb3BlLnRvdGFsTnVtIDwgMSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgncGFnZS1kYXRhJywge1xyXG4gICAgICAgICAgcGFnZU51bTogKyRzY29wZS5wYWdlTnVtLFxyXG4gICAgICAgICAgdG90YWxOdW06ICRzY29wZS5jb3VudFBhZ2UsXHJcbiAgICAgICAgICB0b3RhbENvdW50czogKyRzY29wZS50b3RhbE51bSxcclxuICAgICAgICAgIHBhZ2VTaXplOiAkc2NvcGUucGFnZVNpemUrJycsXHJcbiAgICAgICAgICBwYWdlc2l6ZUxpc3Q6IFsnMjAnLCAnNTAnLCAnMTAwJ11cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAvLyBnZXRMaXN0KGRzcCwkc2NvcGUpO1xyXG4gICAgICAkc2NvcGUuY2hhbmdlUGFnZVNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZHN0YXR1cylcclxuICAgICAgICAkc2NvcGUucGFnZU51bSA9ICcwJztcclxuICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdCk7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnRvU3BlY2lmaWVkUGFnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3Jkc3RhdHVzKVxyXG4gICAgICAgIHZhciBwYWdlbnVtID0gTnVtYmVyKCRzY29wZS5wYWdlTnVtKVxyXG4gICAgICAgIHZhciB0b3RhbHBhZ2UgPSBNYXRoLmNlaWwoJHNjb3BlLnRvdGFsTnVtIC8gJHNjb3BlLnBhZ2VTaXplKTtcclxuICAgICAgICBpZiAocGFnZW51bSA+IHRvdGFscGFnZSB8fCAhcGFnZW51bSB8fCBwYWdlbnVtIDwgMSkge1xyXG4gICAgICAgICAgJHNjb3BlLnBhZ2VudW0gPSAxO1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdQYWdlIGRvZXMgbm90IGV4aXN0LicpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm9yZGVyc0xpc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvL+aQnOe0olxyXG4gICAgICAkc2NvcGUuZW50ZXJTZWFyY2ggPSBlID0+e1xyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICRzY29wZS5zZWFyY2goKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuc2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5zZWFyY2h2YWwpO1xyXG4gICAgICAgIGlmICgkc2NvcGUuc2VhcmNodmFsKSB7XHJcbiAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgJHNjb3BlLnRvdGFsTnVtID0gMDtcclxuICAgICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgICB2YXIgZ2V0TGlzdERhdGEgPSB7fTtcclxuICAgICAgICAgIGdldExpc3REYXRhLnBhZ2UgPSAkc2NvcGUucGFnZU51bSAtIDA7XHJcbiAgICAgICAgICBnZXRMaXN0RGF0YS5saW1pdCA9ICRzY29wZS5wYWdlU2l6ZSAtIDA7XHJcbiAgICAgICAgICAvLyBnZXRMaXN0RGF0YS5jb2RlID0gJ2NqJztcclxuICAgICAgICAgIC8vIGdldHN0YXR1cyhnZXRMaXN0RGF0YSk7XHJcblxyXG4gICAgICAgICAgZ2V0TGlzdERhdGEuY2pvcmRlck5vID0gJHNjb3BlLnNlYXJjaHZhbDtcclxuXHJcbiAgICAgICAgICAvLyBpZigkc2NvcGUub3Jkc3RhdHVzID09IDEpe1xyXG4gICAgICAgICAgLy8gICAgIGdldExpc3REYXRhLmNqb3JkZXJObyA9ICRzY29wZS5zZWFyY2h2YWw7XHJcbiAgICAgICAgICAvLyAgIH1lbHNlIGlmKCRzY29wZS5vcmRzdGF0dXMgPT0gMil7XHJcbiAgICAgICAgICAvLyAgICAgZ2V0TGlzdERhdGEuY2pvcmRlck5vID0gJHNjb3BlLnNlYXJjaHZhbDtcclxuICAgICAgICAgIC8vICAgfWVsc2UgaWYoJHNjb3BlLm9yZHN0YXR1cyA9PSAzKXtcclxuICAgICAgICAgIC8vICAgICBnZXRMaXN0RGF0YS5sb2NhbFRuID0gJHNjb3BlLnNlYXJjaHZhbDtcclxuICAgICAgICAgIC8vICAgfWVsc2UgaWYoJHNjb3BlLm9yZHN0YXR1cyA9PSA0KXtcclxuICAgICAgICAgIC8vICAgICBnZXRMaXN0RGF0YS5zdG9yZU9yZGVyTm8gPSAkc2NvcGUuc2VhcmNodmFsO1xyXG4gICAgICAgICAgLy8gICB9ZWxzZSBpZigkc2NvcGUub3Jkc3RhdHVzID09IDUpe1xyXG4gICAgICAgICAgLy8gICAgIGdldExpc3REYXRhLnN0b3JlT3JkZXJObyA9ICRzY29wZS5zZWFyY2h2YWw7XHJcbiAgICAgICAgICAvLyAgIH1cclxuICAgICAgICAgIC8vIGdldExpc3REYXRhLm9yZGVyTnVtYmVyID0gJHNjb3BlLnNlYXJjaHZhbDtcclxuICAgICAgICAgIGdldExpc3REYXRhLmJlZ2luRGF0ZSA9ICQoXCIjY2otc3RpbWVcIikudmFsKCk7XHJcbiAgICAgICAgICBnZXRMaXN0RGF0YS5lbmREYXRlID0gJChcIiNjai1ldGltZVwiKS52YWwoKTtcclxuICAgICAgICAgIC8vIGRzcC5wb3N0RnVuKCdhcHAvZGlzcHV0ZS9nZXREaXNwdXRlJyxKU09OLnN0cmluZ2lmeShnZXRMaXN0RGF0YSksIGNvbiwgZXJyRnVuKVxyXG4gICAgICAgICAgaWYgKCRzY29wZS5vcmRzdGF0dXMgPT0gMSkge1xyXG4gICAgICAgICAgIC8vIGRzcC5wb3N0RnVuKCdjai9vcmRlclJlc2VuZC9jandlYl9xdWVyeV9kYWlDaG9uZ1BhaScsIEpTT04uc3RyaW5naWZ5KGdldExpc3REYXRhKSwgY29uLCBlcnJGdW4pXHJcbiAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdjai9vcmRlclJlc2VuZC93YWl0UmVzZW5kJywgSlNPTi5zdHJpbmdpZnkoZ2V0TGlzdERhdGEpLCBjb24sIGVyckZ1bilcclxuICAgICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLm9yZHN0YXR1cyA9PSAyKSB7XHJcbiAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdjai9vcmRlclJlc2VuZC9jandlYl9xdWVyeV95aVpoaUZ1JywgSlNPTi5zdHJpbmdpZnkoZ2V0TGlzdERhdGEpLCBjb24sIGVyckZ1bilcclxuICAgICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLm9yZHN0YXR1cyA9PSAzKSB7XHJcbiAgICAgICAgICAgIGRzcC5wb3N0RnVuKCdjai9vcmRlclJlc2VuZC9jandlYl9xdWVyeV9kYWlUb25nWmhpWmlRdScsIEpTT04uc3RyaW5naWZ5KGdldExpc3REYXRhKSwgY29uLCBlcnJGdW4pXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5vcmRzdGF0dXMgPT0gNCkge1xyXG4gICAgICAgICAgICBkc3AucG9zdEZ1bignY2ovb3JkZXJSZXNlbmQvY2p3ZWJfcXVlcnlfeWlDaHVMaScsIEpTT04uc3RyaW5naWZ5KGdldExpc3REYXRhKSwgY29uLCBlcnJGdW4pXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5vcmRzdGF0dXMgPT0gNSkge1xyXG4gICAgICAgICAgICBkc3AucG9zdEZ1bignY2ovb3JkZXJSZXNlbmQvY2p3ZWJfcXVlcnlfeWlHdW9RaScsIEpTT04uc3RyaW5naWZ5KGdldExpc3REYXRhKSwgY29uLCBlcnJGdW4pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBmdW5jdGlvbiBjb24oZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICAvLyAkc2NvcGUub3JkZXJzTGlzdCA9IGRhdGEuZGF0YS5saXN0O1xyXG4gICAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdCA9IGRhdGEuZGF0YS5yZXN1bHQucm93cztcclxuICAgICAgICAgICAgLy8gJHNjb3BlLnRvdGFsTnVtID0gZGF0YS5kYXRhLmNvdW50Oy8v6I635Y+W5oC76K6i5Y2V55qE5p2h5pWwXHJcbiAgICAgICAgICAgICRzY29wZS50b3RhbE51bSA9IGRhdGEuZGF0YS5yZXN1bHQudG90YWw7Ly/ojrflj5bmgLvorqLljZXnmoTmnaHmlbBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnRvdGFsTnVtKVxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnRvdGFsTnVtID4gMCkge1xyXG4gICAgICAgICAgICAgIGRzcC5yZW1vdmVOb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNvdW50UGFnZSA9IE1hdGguY2VpbCgkc2NvcGUudG90YWxOdW0gLyAoJHNjb3BlLnBhZ2VTaXplIC0gMCkpXHJcbiAgICAgICAgICAgICAgLy8gZ2V0TGlzdChkc3AsJHNjb3BlKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGRzcC5hZGROb2RhdGFQaWMoJCgnLm9yZGVycy1saXN0JyksJCh3aW5kb3cpLmhlaWdodCgpLTE3MSw0NywwLHt3aWR0aDonMTAwJSd9KVxyXG4gICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAgICRzY29wZS5jb3VudFBhZ2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhZ2VGdW4oZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZnVuY3Rpb24gZXJyRnVuKGRhdGEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAkKCcuc2VsSmZMeCcpLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGpmbHggPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGpmbHgpXHJcbiAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBbXTtcclxuICAgICAgICAkc2NvcGUudG90YWxOdW0gPSAwO1xyXG4gICAgICAgIGRzcC5sb2FkUGVyY2VudCgkKCcub3JkZXJzLWxpc3QnKSwgJCh3aW5kb3cpLmhlaWdodCgpIC0gMTcxLCA0NywgMCk7XHJcbiAgICAgICAgdmFyIGdldExpc3REYXRhID0ge307XHJcbiAgICAgICAgLy8gZ2V0TGlzdERhdGEucGFnZSA9ICRzY29wZS5wYWdlTnVtLTA7XHJcbiAgICAgICAgLy8gZ2V0TGlzdERhdGEubGltaXQgPSAkc2NvcGUucGFnZVNpemUtMDtcclxuICAgICAgICAvLyBnZXRMaXN0RGF0YS5jb2RlID0gJ2NqJztcclxuICAgICAgICBnZXRMaXN0RGF0YS5wYWdlTnVtID0gJHNjb3BlLnBhZ2VOdW0gLSAwO1xyXG4gICAgICAgIGdldExpc3REYXRhLnBhZ2VTaXplID0gJHNjb3BlLnBhZ2VTaXplIC0gMDtcclxuICAgICAgICAvLyBnZXRzdGF0dXMoZ2V0TGlzdERhdGEpO1xyXG4gICAgICAgIGdldExpc3REYXRhLnR5cGUgPSBqZmx4O1xyXG4gICAgICAgIGdldExpc3REYXRhLmJlZ2luRGF0ZSA9ICQoXCIjY2otc3RpbWVcIikudmFsKCk7XHJcbiAgICAgICAgZ2V0TGlzdERhdGEuZW5kRGF0ZSA9ICQoXCIjY2otZXRpbWVcIikudmFsKCk7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9kaXNwdXRlL2dldERpc3B1dGUnLCBKU09OLnN0cmluZ2lmeShnZXRMaXN0RGF0YSksIGNvbiwgZXJyRnVuKVxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbihkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3QgPSBkYXRhLmRhdGEubGlzdDtcclxuICAgICAgICAgICRzY29wZS50b3RhbE51bSA9IGRhdGEuZGF0YS5jb3VudDsvL+iOt+WPluaAu+iuouWNleeahOadoeaVsFxyXG4gICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnRvdGFsTnVtKVxyXG4gICAgICAgICAgaWYgKCRzY29wZS50b3RhbE51bSA+IDApIHtcclxuICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSlcclxuICAgICAgICAgICAgZHNwLmNsb3NlTG9hZFBlcmNlbnQoJCgnLm9yZGVycy1saXN0JykpXHJcbiAgICAgICAgICAgICRzY29wZS5jb3VudFBhZ2UgPSBNYXRoLmNlaWwoJHNjb3BlLnRvdGFsTnVtIC8gKCRzY29wZS5wYWdlU2l6ZSAtIDApKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZHNwLmFkZE5vZGF0YVBpYygkKCcub3JkZXJzLWxpc3QnKSwkKHdpbmRvdykuaGVpZ2h0KCktMTcxLDQ3LDAse3dpZHRoOicxMDAlJ30pXHJcbiAgICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgICAgICAkc2NvcGUuY291bnRQYWdlID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHBhZ2VGdW4oZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBlcnJGdW4oZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgIGRzcC5jbG9zZUxvYWRQZXJjZW50KCQoJy5vcmRlcnMtbGlzdCcpKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLy/nu5norqLljZXnirbmgIHotYvlgLznmoTlh73mlbBcclxuICAgICAgZnVuY3Rpb24gbnVtRnVuKCkge1xyXG4gICAgICAgICRzY29wZS5hZnRlck51bTEgPSAkc2NvcGUub3Jkc3RhdHVzTnVtLnlpOyAgIC8vMzFcclxuICAgICAgICAkc2NvcGUuYWZ0ZXJOdW0yID0gJHNjb3BlLm9yZHN0YXR1c051bS5lcjsgICAgLy80OFxyXG4gICAgICAgICRzY29wZS5hZnRlck51bTMgPSAkc2NvcGUub3Jkc3RhdHVzTnVtLnNhbjsgICAvLzE1XHJcbiAgICAgICAgJHNjb3BlLmFmdGVyTnVtNCA9ICRzY29wZS5vcmRzdGF0dXNOdW0uc2k7ICAgIC8vN1xyXG4gICAgICB9XHJcbiAgICAgIC8v57uZ5L6n6L655qCP5re75Yqg5qC35byPXHJcbiAgICAgIC8qIHZhciB2aXAgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndmlwJykgPT0gdW5kZWZpbmVkID8gXCJcIiA6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd2aXAnKTtcclxuICAgICAgaWYgKHZpcCA9PSAnMScpIHsvL3ZpcEZsYWdcclxuICAgICAgICAkKCcuaGVhZGVyLW5hdicpLmFkZENsYXNzKCd2aXBGbGFnJyk7XHJcbiAgICAgICAgJCgnLmxlZnQtbmF2JykuYWRkQ2xhc3MoJ3ZpcEZsYWcnKTtcclxuICAgICAgICAkKCcuYWZ0ZXJzYWxlLXJpZ2h0JykuY3NzKCdiYWNrZ3JvdW5kJywgJyNGMEVERTcnKS5hZGRDbGFzcygndmlwJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnLmhlYWRlci1uYXYnKS5yZW1vdmVDbGFzcygndmlwRmxhZycpO1xyXG4gICAgICAgICQoJy5sZWZ0LW5hdicpLnJlbW92ZUNsYXNzKCd2aXBGbGFnJyk7XHJcbiAgICAgICAgJCgnLmFmdGVyc2FsZS1yaWdodCcpLmNzcygnYmFja2dyb3VuZCcsICcjZjJmM2Y1JykucmVtb3ZlQ2xhc3MoJ3ZpcCcpO1xyXG4gICAgICB9XHJcbiAgICAgICQoJy5oZWFkZXItbmF2IGxpJykuZXEoMSkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKCcubGVmdC1uYXYgbGknKS5lcSgyKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIC8vJCgnLmFmdGVyc2FsZS1sZWZ0YmFyYScpLmVxKDIpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsJ2xpbmVhci1ncmFkaWVudCgwZGVnLHJnYmEoMjUzLCAxNjIsIDQ0LCAxKSAwJSwgcmdiYSgyNDcsIDE0MCwgNDEsIDEpIDc4JSwgcmdiYSgyNDEsIDExOCwgMzcsIDEpIDEwMCUpJyk7XHJcbiAgICAgICQoJy5hZnRlcnNhbGUtbGVmdGJhcmEnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLmFmdGVyc2FsZS1sZWZ0YmFyYScpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICcnKTtcclxuICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICdsaW5lYXItZ3JhZGllbnQoMGRlZyxyZ2JhKDI1MywgMTYyLCA0NCwgMSkgMCUsIHJnYmEoMjQ3LCAxNDAsIDQxLCAxKSA3OCUsIHJnYmEoMjQxLCAxMTgsIDM3LCAxKSAxMDAlKScpO1xyXG4gICAgICB9KSAqL1xyXG4gICAgICAvLyDnu5nkvqfovrnmoI/mt7vliqDmu5rliqjkuovku7ZcclxuICAgICAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPj0gODApIHtcclxuICAgICAgICAgICQoJy5sZWZ0LW5hdicpLmNzcyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICB0b3A6ICc4MHB4J1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgJCgnLmxlZnQtbGlzdCcpLmNzcyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxyXG4gICAgICAgICAgICB0b3A6ICcwJ1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAvL2F3YWl0aW5nIGNqIHJlc3BvbnNl5re75Yqg6YCJ5Lit6Z2e6YCJ5LitXHJcbiAgICAgIHZhciBjanJlc0luZGV4ID0gMDtcclxuXHJcbiAgICAgICQoJyNjai1yZXNwb25zZS10YWJsZScpLm9uKCdjbGljaycsICcuemNoZWNrYm94JywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAkc2NvcGUuSW1hZGRyZXNzID0gJCh0aGlzKS5hdHRyKCdzZGRyZXNzJykuc2xpY2UoNCk7XHJcbiAgICAgICAgaWYgKCRzY29wZS5JbWFpZC5sZW5ndGggPT0gMCB8fCAhJHNjb3BlLkltYWlkLmluY2x1ZGVzKCQodGhpcykuYXR0cignaWQnKS5zbGljZSgyKSkpIHtcclxuICAgICAgICAgICRzY29wZS5JbWFpZC5wdXNoKCQodGhpcykuYXR0cignaWQnKS5zbGljZSgyKSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUub3JkZXJzTGlzdClcclxuICAgICAgICAgICRzY29wZS50b3RlbGxMaXN0ID0gW107XHJcbiAgICAgICAgICAkc2NvcGUub3JkZXJzTGlzdC5mb3JFYWNoKGVsZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVsZSlcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAkc2NvcGUuSW1haWQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICBpZiAoZWxlLmlkID09ICRzY29wZS5JbWFpZFtpXSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnRvdGVsbExpc3QucHVzaChlbGUpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudG90ZWxsTGlzdCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUudG90ZWxsTGlzdCA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudG90ZWxsTGlzdCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLkltYWRkcmVzcylcclxuICAgICAgICBpZiAoJHNjb3BlLm9yZHN0YXR1cyA9PSAxIHx8ICRzY29wZS5vcmRzdGF0dXMgPT0gMykge1xyXG4gICAgICAgICAgaWYgKCRzY29wZS5vcmRzdGF0dXMgPT0gMSAmJiAkc2NvcGUuSW1hZGRyZXNzID09ICcnKSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIGVudGVyIHRoZSBzaGlwcGluZyBhZGRyZXNzJylcclxuICAgICAgICAgICAgLy8gJHNjb3BlLmlzRWRpdD0gdHJ1ZTsgICAgICAgICAvL+e8lui+keW8ueeql1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgICAgIGNqcmVzSW5kZXgrKztcclxuICAgICAgICAgICAgICAkc2NvcGUuY2pyZXNJbmRleCA9IGNqcmVzSW5kZXg7XHJcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJHNjb3BlLmNqcmVzSW5kZXgpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5JbWFpZCk7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnRvdGVsbExpc3QpO1xyXG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKDU1NTU1NTU1KTtcclxuICAgICAgICAgICAgICBpZiAoY2pyZXNJbmRleCA9PSAkKCcjY2otcmVzcG9uc2UtdGFibGUgLnpjaGVja2JveCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoJ3F1YW5idXh1YW56aG9nbicpXHJcbiAgICAgICAgICAgICAgICAkKCcjY2otcmVzcG9uc2UtdGFibGUgLnpjaGVja2VkLWFsbCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgICBjanJlc0luZGV4LS07XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLkltYWlkKTtcclxuICAgICAgICAgICAgICAkc2NvcGUuSW1haWQuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0gPSBwYXJzZUludChpdGVtKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pXHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PSAkKHRoaXMpLmF0dHIoJ2lkJykuc2xpY2UoMikpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLkltYWlkLmluZGV4T2YoJCh0aGlzKS5hdHRyKCdpZCcpLnNsaWNlKDIpKSk7XHJcbiAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5JbWFpZCAucHVzaChpdGVtKVxyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuSW1haWQuc3BsaWNlKCRzY29wZS5JbWFpZC5pbmRleE9mKCQodGhpcykuYXR0cignaWQnKS5zbGljZSgyKSksIDEpO1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuSW1haWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLkltYWlkKTtcclxuICAgICAgICAgICAgICAkc2NvcGUudG90ZWxsTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0LmZvckVhY2goZWxlID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVsZS5pZClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVsZSlcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgJHNjb3BlLkltYWlkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChlbGUuaWQgPT0gJHNjb3BlLkltYWlkW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90ZWxsTGlzdC5wdXNoKGVsZSlcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gJHNjb3BlLnRvdGVsbExpc3RcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudG90ZWxsTGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICBpZiAoY2pyZXNJbmRleCAhPSAkKCcjY2otcmVzcG9uc2UtdGFibGUgLnpjaGVja2JveCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI2NqLXJlc3BvbnNlLXRhYmxlIC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8v5YWo6YCJXHJcbiAgICAgICQoJyNjai1yZXNwb25zZS10YWJsZScpLm9uKCdjbGljaycsICcuemNoZWNrZWQtYWxsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkc2NvcGUub3Jkc3RhdHVzID09IDEpIHtcclxuICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0LmZvckVhY2goZWxlID0+IHtcclxuICAgICAgICAgICAgLy8gJHNjb3BlLmFsbHNlbGVjdGFkZHJlc3MucHVzaChlbGUuYWRkcmVzcyk7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuYWxsc2VsZWN0YWRkcmVzcy5pbmNsdWRlcygnJykpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuYWxsc2VsZWN0YWRkcmVzcyA9IFtdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICRzY29wZS5hbGxzZWxlY3RhZGRyZXNzLnB1c2goZWxlLmFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5JbWFkZHJlc3MgPSAkc2NvcGUuYWxsc2VsZWN0YWRkcmVzcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICBpZiAoJHNjb3BlLkltYWRkcmVzcyA9PSAnJykge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBmaWxsIGluIHRoZSByZWNlaXZpbmcgYWRkcmVzcyBmaXJzdC4nKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgPT0gJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKSB7XHJcbiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgICAgIGNqcmVzSW5kZXggPSAkKCcjY2otcmVzcG9uc2UtdGFibGUgLnpjaGVja2JveCcpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAkc2NvcGUuSW1haWQgPSAkc2NvcGUuYWxsc2VsZWN0aWRzXHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLkltYWlkKVxyXG4gICAgICAgICAgICAgICRzY29wZS5janJlc0luZGV4ID0gJHNjb3BlLkltYWlkLmxlbmd0aDtcclxuICAgICAgICAgICAgICAkKCcjY2otcmVzcG9uc2UtdGFibGUgLnpjaGVja2JveCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTIucG5nJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICAgIGNqcmVzSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICRzY29wZS5JbWFpZCA9IFtdXHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNqcmVzSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICQoJyNjai1yZXNwb25zZS10YWJsZSAuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMS5wbmcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLm9yZHN0YXR1cyA9PSAzKSB7XHJcbiAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdzcmMnKSA9PSAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgICBjanJlc0luZGV4ID0gJCgnI2NqLXJlc3BvbnNlLXRhYmxlIC56Y2hlY2tib3gnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICRzY29wZS50b3RlbGxMaXN0ID0gJHNjb3BlLm9yZGVyc0xpc3Q7XHJcbiAgICAgICAgICAgICRzY29wZS5JbWFpZCA9ICRzY29wZS5hbGxzZWxlY3RpZHNcclxuICAgICAgICAgICAgJHNjb3BlLmNqcmVzSW5kZXggPSAkc2NvcGUuSW1haWQubGVuZ3RoO1xyXG4gICAgICAgICAgICAvLyAgICAkc2NvcGUuYWxsc2VsZWN0YWRkcmVzcyA9ICRzY29wZS5cclxuICAgICAgICAgICAgJCgnI2NqLXJlc3BvbnNlLXRhYmxlIC56Y2hlY2tib3gnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgICBjanJlc0luZGV4ID0gMDtcclxuICAgICAgICAgICAgJHNjb3BlLkltYWlkID0gW11cclxuICAgICAgICAgICAgJHNjb3BlLmNqcmVzSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAkKCcjY2otcmVzcG9uc2UtdGFibGUgLnpjaGVja2JveCcpLmF0dHIoJ3NyYycsICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy/mmL7npLrlpKflm75cclxuICAgICAgJCgnLnNjb2xsQm94Jykub24oJ21vdXNlZW50ZXInLCAnLnNwLXNtYWxsaW1nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5oaWRlLWJpZ2ltZycpLnNob3coKTtcclxuICAgICAgfSlcclxuICAgICAgJCgnLnNjb2xsQm94Jykub24oJ21vdXNlZW50ZXInLCAnLmhpZGUtYmlnaW1nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuc2hvdygpO1xyXG4gICAgICB9KVxyXG4gICAgICAkKCcuc2NvbGxCb3gnKS5vbignbW91c2VsZWF2ZScsICcuc3Atc21hbGxpbWcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmhpZGUtYmlnaW1nJykuaGlkZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAkKCcuc2NvbGxCb3gnKS5vbignbW91c2VsZWF2ZScsICcuaGlkZS1iaWdpbWcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vYXdhaXRpbmcgeW91ciByZXNwb25zZea3u+WKoOmAieS4remdnumAieS4rVxyXG4gICAgICB2YXIgeW91cmVzSW5kZXggPSAwO1xyXG4gICAgICAkKCcjYXdhaXQteW91ci10YWJsZScpLm9uKCdjbGljaycsICcuemNoZWNrYm94JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJykge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgeW91cmVzSW5kZXgrKztcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHlvdXJlc0luZGV4KTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHlvdXJlc0luZGV4KTtcclxuICAgICAgICAgIGlmICh5b3VyZXNJbmRleCA9PSAkKCcjYXdhaXQteW91ci10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KCdxdWFuYnV4dWFuemhvZ24nKVxyXG4gICAgICAgICAgICAkKCcjYXdhaXQteW91ci10YWJsZSAuemNoZWNrZWQtYWxsJykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgeW91cmVzSW5kZXgtLTtcclxuICAgICAgICAgIGlmICh5b3VyZXNJbmRleCAhPSAkKCcjYXdhaXQteW91ci10YWJsZSAuemNoZWNrYm94JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICQoJyNhd2FpdC15b3VyLXRhYmxlIC56Y2hlY2tlZC1hbGwnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8v5YWo6YCJXHJcbiAgICAgICQoJyNhZnRlci1jb3BsZXRlZC10YWJsZScpLm9uKCdjbGljaycsICcuemNoZWNrZWQtYWxsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpID09ICdzdGF0aWMvaW1hZ2UvZGlyZWN0LW9yZGVycy9tdWx0aXBsZTEucG5nJykge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUyLnBuZycpO1xyXG4gICAgICAgICAgYWZjb21wbGV0SW5kZXggPSAkKCcjYWZ0ZXItY29wbGV0ZWQtdGFibGUgLnpjaGVja2JveCcpLmxlbmd0aDtcclxuICAgICAgICAgICQoJyNhZnRlci1jb3BsZXRlZC10YWJsZSAuemNoZWNrYm94JykuYXR0cignc3JjJywgJ3N0YXRpYy9pbWFnZS9kaXJlY3Qtb3JkZXJzL211bHRpcGxlMi5wbmcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgICAgYWZjb21wbGV0SW5kZXggPSAwO1xyXG4gICAgICAgICAgJCgnI2FmdGVyLWNvcGxldGVkLXRhYmxlIC56Y2hlY2tib3gnKS5hdHRyKCdzcmMnLCAnc3RhdGljL2ltYWdlL2RpcmVjdC1vcmRlcnMvbXVsdGlwbGUxLnBuZycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIOaUr+S7mOmHjea0vui0uVxyXG4gICAgICAvL+mAieS4reaXtiAg5Zyw5Z2A5piv5ZCm5Li656m6IOS4uuepuiDnvJbovpHkv6Hmga8gIOS4jeS4uuepuiAg5o+Q56S65bey5bCG5pWw5o2u5pi+56S6IOmAieS4rVxyXG4gICAgICAvL+WFiOWIpOaWreaYr+WQpuaciemAieS4remhue+8jOaciSAg5by55Ye656Gu5a6a6YeN5rS+ICAg5rKh5pyJICDmj5DnpLror7flhYjkv67mlLnmlLbotKflnLDlnYBcclxuXHJcbiAgICAgICRzY29wZS50b3BheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDmmK/lkKbpqozor4Hpgq7ku7blpITnkIZcclxuICAgICAgICBpZiAoZHNwLmlzVmVyaWZ5RW1haWwoKSkgcmV0dXJuXHJcbiAgICAgICAgdmFyIGJzID0gbmV3IEJhc2U2NCgpO1xyXG4gICAgICAgIGlmICgkc2NvcGUuSW1haWQubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCB0aGUgb3JkZXIgZm9yIHBheW1lbnQnKVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygkc2NvcGUuSW1haWQpXHJcbiAgICAgICAgbGV0IGlkcyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5JbWFpZC5mb3JFYWNoKGVsZSA9PiB7IGlkcy5wdXNoKHBhcnNlSW50KGVsZSkpIH0pO1xyXG4gICAgICAgIGlmICgkc2NvcGUuY2pyZXNJbmRleCA+IDApIHtcclxuICAgICAgICAgIGRzcC5wb3N0RnVuKCdjai9vcmRlclJlc2VuZC9jandlYl9wYXltZW50JywgaWRzLCBwYXlGdW4sIGRyZXBheUZ1bilcclxuICAgICAgICAgIC8vIHBheUZ1bigpXHJcbiAgICAgICAgICBmdW5jdGlvbiBwYXlGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gJzIwMCcpIHtcclxuICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQucGF5bWVudElkLCByZXN1bHQuZmVlLCB0eXBlb2YgKHJlc3VsdC5mZWUudG9TdHJpbmcoKSkpO1xyXG5cclxuICAgICAgICAgICAgICBjb25zdCBwYXlPcmROdW0gPSBicy5lbmNvZGUoZGF0YS5kYXRhLnJlc3VsdC5wYXltZW50SWQpOy8v6K6i5Y2V5Y+3XHJcbiAgICAgICAgICAgICAgY29uc3QgbXVvcmRNb25leSA9IGJzLmVuY29kZShkYXRhLmRhdGEucmVzdWx0LmZlZSArICcnKTsgICAgLy/orqLljZXph5Hpop1cclxuICAgICAgICAgICAgICBjb25zdCBvcmRxdWFudGl0eSA9IGJzLmVuY29kZShpZHMubGVuZ3RoKycnKVxyXG4gICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBgbXlDSi5odG1sP3JvdXRlPXBheW1lbnQjL3BheW1lbnQvJHtwYXlPcmROdW19LyR7bXVvcmRNb25leX0vJHtvcmRxdWFudGl0eX0vcHJvYmxlbVBhY2thZ2VgOyAgICAgLy/orqLljZXlj7fvvIzorqLljZXph5Hpop3vvIzorqLljZXmlbDph4/vvIzorqLljZXnsbvlnotcclxuICAgICAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZnVuY3Rpb24gZHJlcGF5RnVuKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIiBlcnIgY2VzaGlcIilcclxuICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCB0aGUgcHJvZHVjdCBmb3IgcmVzaGlwbWVudCcpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgIC8v54K55Ye757yW6L6R5L+h5oGvXHJcbiAgICAgICRzY29wZS50aWNrZXQgPSBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICAvLyAkc2NvcGUuYWRkTW9kZWZ5RmxhZyA9IHRydWU7XHJcbiAgICAgICAgLy8gJHNjb3BlLmFkZEl0ZW1JZCA9IGl0ZW0uY3VzdG9tZXJJZDtcclxuICAgICAgICAkc2NvcGUuYWRkSXRlbUlkID0gaXRlbS5pZDtcclxuICAgICAgICAkc2NvcGUuYWRkSXRlbUluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgY29uc29sZS5sb2coaXRlbSlcclxuICAgICAgICAkc2NvcGUuaXNFZGl0ID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUubmFtZSA9IGl0ZW0ubmFtZU9mVGhlQWRkcmVzc2VlIHx8ICcnO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5uYW1lKVxyXG4gICAgICAgICRzY29wZS5hZGRyZXNzID0gaXRlbS5hZGRyZXNzIHx8ICcnO1xyXG4gICAgICAgICRzY29wZS5hZGRDaXR5ID0gaXRlbS5jaXR5IHx8ICcnO1xyXG4gICAgICAgICRzY29wZS5hZGRQcm92aW5jZSA9IGl0ZW0ucHJvdmluY2UgfHwgJyc7XHJcbiAgICAgICAgLy8gJHNjb3BlLmFkZFppcCA9IGl0ZW0uWklQO1xyXG4gICAgICAgICRzY29wZS5hZGRFbWFpbCA9IGl0ZW0uemlwY29kZSB8fCAnJztcclxuICAgICAgICAkc2NvcGUuYWRkUGhvbmUgPSBpdGVtLnRlbGVwaG9uZSB8fCAnJztcclxuICAgICAgICAkc2NvcGUuYWRkQ291bnRyeSA9IGl0ZW0uY291bnRyeSB8fCAnJztcclxuICAgICAgICAvL+iOt+WPluWbveWutuS/oeaBr1xyXG4gICAgICAgIC8vICRzY29wZS5jb3VuZXJ5SW5mbyA9IGl0ZW0uY291bnRyeTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygkc2NvcGUuY291bmVyeUluZm8pXHJcbiAgICAgICAgJHNjb3BlLmNvdW5lcnlJbmZvID0gJyc7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9sb2dpc3RpYy9nZXRjb3VudHJ5JywgbnVsbCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgIGxldCBjb3VudHJ5T2JqID0gSlNPTi5wYXJzZShkYXRhLmRhdGEucmVzdWx0KTtcclxuICAgICAgICAgICAgJHNjb3BlLmNvdW50cnlMaXN0ID0gY291bnRyeU9iai5jb3VudHJ5TGlzdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmNvdW50cnlMaXN0KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbGV0IGVuTmFtZSA9IGNvdW50cnlFbk5hbWUoaXRlbS5jb3VudHJ5KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhlbk5hbWUpXHJcbiAgICAgICAgaWYgKGVuTmFtZSkge1xyXG4gICAgICAgICAgJHNjb3BlLmNvdW5lcnlJbmZvID0gaXRlbS5jb3VudHJ5ICsgJyMnICsgZW5OYW1lO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuY291bmVyeUluZm8gPSAnJztcclxuICAgICAgICAgIC8vICRzY29wZS5pbml0Y291bmVyeUluZm8gPSBpdGVtLmNvdW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBzdG9yZVVwZGF0YSA9IHt9O1xyXG4gICAgICAgIHN0b3JlVXBkYXRhLmlkID0gaW5kZXg7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICAkc2NvcGUuY2hlY2tQaG9uZSA9IGZ1bmN0aW9uIChwaG9uZSkge1xyXG4gICAgICAgIHBob25lID0gcGhvbmUucmVwbGFjZSgvW15cXGRcXCtcXC1cXChcXCldL2csIFwiXCIpO1xyXG4gICAgICAgICRzY29wZS5hZGRQaG9uZSA9IHBob25lO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBjb3VudHJ5RW5OYW1lKGNvZGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhjb2RlKVxyXG4gICAgICAgIGlmICgkc2NvcGUuY291bnRyeUxpc3QpIHtcclxuICAgICAgICAgIGxldCBsZW4gPSAkc2NvcGUuY291bnRyeUxpc3QubGVuZ3RoO1xyXG4gICAgICAgICAgY29uc29sZS5sb2cobGVuKVxyXG4gICAgICAgICAgbGV0IGVuTmFtZTtcclxuICAgICAgICAgIGlmIChsZW4gPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICBpZiAoY29kZSA9PSAkc2NvcGUuY291bnRyeUxpc3RbaV0uSUQpIHtcclxuICAgICAgICAgICAgICAgIGVuTmFtZSA9ICRzY29wZS5jb3VudHJ5TGlzdFtpXS5OQU1FX0VOO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZW5OYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy/noa7orqTnvJbovpFcclxuICAgICAgJHNjb3BlLnN1cmVNb2RlRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5hZGRJdGVtSW5kZXgpXHJcbiAgICAgICAgLy8gaWYgKCRzY29wZS5hZGRDaXR5ID09ICcnIHx8ICRzY29wZS5hZGRyZXNzID09ICcnIHx8ICRzY29wZS5hZGRQcm92aW5jZSA9PSAnJyB8fCAkc2NvcGUuYWRkQ291bnRyeSA9PSAnJykge1xyXG4gICAgICAgIC8vICAgbGF5ZXIubXNnKCflv4XloavpobnkuI3og73kuLrnqbonKVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZighJHNjb3BlLmFkZFBob25lKSByZXR1cm4gbGF5ZXIubXNnKCdQaG9uZSBpcyByZXF1aXJlZCcpXHJcbiAgICAgICAgLy8gaWYoKCRzY29wZS5pdGVtV2xOYW1lLmluZGV4T2YoJ0RITCcpIT0tMXx8JHNjb3BlLml0ZW1XbE5hbWU9PVwiQ2hpbmEgRU1TXCJ8fCRzY29wZS5pdGVtV2xOYW1lPT1cIlMuRiBDaGluYSBEb21lc3RpY1wifHwkc2NvcGUuaXRlbVdsTmFtZT09XCJZVE8gQ2hpbmEgRG9tZXN0aWNcInx8JHNjb3BlLml0ZW1XbE5hbWU9PVwiU291dGggQWZyaWNhIFNwZWNpYWwgTGluZVwifHwkc2NvcGUuaXRlbVdsTmFtZT09XCJDSiBOb3JtYWwgRXhwcmVzc1wiKSYmISRzY29wZS5hZGRQaG9uZSl7XHJcbiAgICAgICAgLy8gXHRsYXllci5tc2coJ1Bob25lIG51bWJlciBpcyByZXF1aXJlZC4nKVxyXG4gICAgICAgIC8vIFx0cmV0dXJuXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGRzcC5sb2FkKClcclxuICAgICAgICB2YXIgYWRkVXBkYXRhID0ge307XHJcbiAgICAgICAgYWRkVXBkYXRhLmlkID0gJHNjb3BlLmFkZEl0ZW1JZDtcclxuICAgICAgICBhZGRVcGRhdGEubmFtZU9mVGhlQWRkcmVzc2VlID0gJHNjb3BlLm5hbWU7XHJcbiAgICAgICAgYWRkVXBkYXRhLmFkZHJlc3MgPSAkc2NvcGUuYWRkcmVzcztcclxuICAgICAgICBhZGRVcGRhdGEuY2l0eSA9ICRzY29wZS5hZGRDaXR5O1xyXG4gICAgICAgIGFkZFVwZGF0YS5wcm92aW5jZSA9ICRzY29wZS5hZGRQcm92aW5jZTtcclxuICAgICAgICBhZGRVcGRhdGEudGVsZXBob25lID0gJHNjb3BlLmFkZFBob25lO1xyXG4gICAgICAgIGFkZFVwZGF0YS5jb3VudHJ5ID0gJHNjb3BlLmFkZENvdW50cnk7XHJcbiAgICAgICAgYWRkVXBkYXRhLnppcGNvZGUgPSAkc2NvcGUuYWRkRW1haWw7XHJcbiAgICAgICAgaWYgKCRzY29wZS5jb3VuZXJ5SW5mbykge1xyXG4gICAgICAgICAgYWRkVXBkYXRhLmNvdW50cnkgPSAkc2NvcGUuY291bmVyeUluZm8uc3BsaXQoJyMnKVsxXTtcclxuICAgICAgICAgIGFkZFVwZGF0YS5jb3VudHJ5Q29kZSA9ICRzY29wZS5jb3VuZXJ5SW5mby5zcGxpdCgnIycpWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhhZGRVcGRhdGEpXHJcbiAgICAgICAgY29uc29sZS5sb2coYWRkVXBkYXRhKVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdjai9vcmRlclJlc2VuZC9jandlYl91cGRhdGVfYWRkcmVzcycsIEpTT04uc3RyaW5naWZ5KGFkZFVwZGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgZHNwLmNsb3NlTG9hZCgpO1xyXG4gICAgICAgICAgJHNjb3BlLmlzRWRpdCA9IGZhbHNlO1xyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPiAwKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5hZGRNb2RlZnlGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnTW9kaWZ5IHN1Y2Nlc3MnKVxyXG4gICAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTsgICAgICAgICAgLy/lho3mn6Xor6LkuIDmrKFcclxuICAgICAgICAgICAgLy8gJHNjb3BlLnJlZmVyc2hGdW4oKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdNb2RpZnkgZmFpbGVkJylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgZHNwLmNsb3NlTG9hZCgpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+W3sumAmuefpeWuouaIt1xyXG4gICAgICAkc2NvcGUudG90ZWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5JbWFpZClcclxuICAgICAgICBpZiAoJHNjb3BlLkltYWlkID09IDApIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIHNlbGVjdCB0aGUgb3JkZXIgdG8gaW5mb3JtJylcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLmlzVGVsbCA9IHRydWU7XHJcbiAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+ehruiupOmAmuefpVxyXG4gICAgICAkc2NvcGUudG9zdXJlVGVsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpXHJcbiAgICAgICAgLy8gJHNjb3BlLnRvdGVsbExpc3QgPSBbXTtcclxuICAgICAgICBsZXQgaWRzID0gW107XHJcbiAgICAgICAgJHNjb3BlLkltYWlkLmZvckVhY2goZWxlID0+IHsgaWRzLnB1c2gocGFyc2VJbnQoZWxlKSkgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coaWRzKVxyXG4gICAgICAgIGxldCBwYXlnb29kcyA9IHt9O1xyXG4gICAgICAgIHBheWdvb2RzLmlkcyA9IGlkc1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5janJlc0luZGV4KVxyXG4gICAgICAgIGlmICgkc2NvcGUuY2pyZXNJbmRleCA+IDApIHtcclxuICAgICAgICAgIC8vIMKgZHNwLnBvc3RGdW4oJ2NqL29yZGVyUmVzZW5kL2Nqd2ViX3RvbmdaaGknLCBKU09OLnN0cmluZ2lmeShwYXlnb29kcyksIHRlbGxGdW4pXHJcbiAgICAgICAgICBkc3AucG9zdEZ1bignY2ovb3JkZXJSZXNlbmQvY2p3ZWJfdG9uZ1poaScsIGlkcywgdGVsbEZ1bilcclxuICAgICAgICAgIGZ1bmN0aW9uIHRlbGxGdW4oZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEubWVzc2FnZSlcclxuICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlID09ICcyMDAnKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmlzVGVsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICRzY29wZS5JbWFpZCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAkc2NvcGUudG90ZWxsTGlzdCA9IGRhdGEuZGF0YS5yb3dzO1xyXG4gICAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy/lj5bmtojpgJrnn6VcclxuICAgICAgJHNjb3BlLmNhbmNlbFNlbGZwaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5pc1RlbGwgPSBmYWxzZTtcclxuICAgICAgICAvLyAkc2NvcGUuSW1haWQgPSBbXVxyXG4gICAgICAgIC8vICRzY29wZS5janJlc0luZGV4ID0gMDtcclxuICAgICAgICAvLyAkc2NvcGUudG90ZWxsTGlzdCA9IFtdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBFeGNlbOaWh+S7tuS4iuS8oFxyXG5cclxuICAgICAgJHNjb3BlLmltcG9ydF9hc3NldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKFwiI2ZpbGVfYXNzZXRcIikuY2xpY2soKTtcclxuICAgICAgfTtcclxuICAgICAgJChcIiNmaWxlX2Fzc2V0XCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygxMjMpXHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgdmFyIGZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpbGVfYXNzZXRcIikuZmlsZXNbMF07XHJcbiAgICAgICAgY29uc29sZS5sb2coZmlsZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpO1xyXG4gICAgICAgIGlmIChmaWxlLm5hbWUpIHtcclxuICAgICAgICAgIHZhciBmaWxlTmFtZSA9IGZpbGUubmFtZS5zdWJzdHJpbmcoZmlsZS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xyXG4gICAgICAgICAgaWYgKGZpbGVOYW1lID09IFwieGxzeFwiIHx8IGZpbGVOYW1lID09IFwieGxzXCIpIHtcclxuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICAgICAgICAgIGRzcC51cExvYWRJbWdQb3N0KCdjai9vcmRlclJlc2VuZC9jandlYl9pbXBvcnRfYWRkcmVzcycsIGZvcm1EYXRhLCBvcnNGdW4sIGRyZUZ1bilcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9yc0Z1bihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEubWVzc2FnZSlcclxuICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnN0YXR1c0NvZGUgPT0gJzIwMCcpIHtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBvYmogPSBKU09OLnBhcnNlKGRhdGEuZGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgJChcIiNmaWxlX2Fzc2V0XCIpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXNQYXkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxheWVyLm1zZyhkYXRhLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRyZUZ1bigpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIiBlcnIgY2VzaGlcIilcclxuICAgICAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWxlcnQoXCJJbmNvcnJlY3QgZmlsZSBmb3JtYXQsIHBsZWFzZSB1cGxvYWQgYWxsb3dlZCBmaWxlIGV4dGVuc2lvbnMgbGlrZSAueGxzeCwgLnhscy5cIik7XHJcbiAgICAgICAgICAgICQoXCIjZmlsZV9hc3NldFwiKS52YWwoXCJcIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy/mlofku7blr7zlh7pcclxuICAgICAgJHNjb3BlLmV4cG9ydE9yZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5kY29yZEZsYWcgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5nb0FjdGV4cG9ydE9yZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBvckRhdGEgPSB7fTtcclxuICAgICAgICAvLyB0akZ1bihvckRhdGEpXHJcbiAgICAgICAgLy8gb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvckRhdGEuZGF0YSk7XHJcbiAgICAgICAgLy8gZXhwb3J0TGlzdCA9e307XHJcbiAgICAgICAgb3JEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeSgkc2NvcGUudG90ZWxsTGlzdCk7XHJcbiAgICAgICAgbGF5ZXIubG9hZCgyKTtcclxuICAgICAgICBkc3AucG9zdEZ1bignY2ovb3JkZXJSZXNlbmQvY2p3ZWJfZGFpQ2hvbmdQYWlfZXhwb3J0JywgSlNPTi5zdHJpbmdpZnkob3JEYXRhKSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRjb3JkRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGNvcmRDYWxsYmFja0ZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyAkc2NvcGUuZXhjZWxIcmVmID0gSlNPTi5wYXJzZShkYXRhLmRhdGEpLmhyZWY7XHJcbiAgICAgICAgICAgICRzY29wZS5leGNlbEhyZWYgPSBkYXRhLmRhdGEucmVzdWx0O1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdFeHBvcnQgb3JkZXIgZXJyb3IuJylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgLy/mmK/lkKblkIzmhI/ooaXlj5FcclxuICAgICAgJHNjb3BlLmJmQWdyZWVGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5yZXBsYWNlbWVudEZyZWlnaHQgJiYgJHNjb3BlLnJlcGxhY2VtZW50RnJlaWdodCA+IDApIHtcclxuICAgICAgICAgIHZhciBpdGVtSWQgPSBicy5lbmNvZGUoJHNjb3BlLml0ZW1JZCk7XHJcbiAgICAgICAgICB2YXIgeXVuRmVpTnVtID0gYnMuZW5jb2RlKCRzY29wZS5yZXBsYWNlbWVudEZyZWlnaHQpXHJcbiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJ215Q0ouaHRtbD9yb3V0ZT1wYXltZW50Iy9wYXltZW50LycgKyBpdGVtSWQgKyAnLycgKyB5dW5GZWlOdW0gKyAnLy9kaXNwdXRlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFyIGJmRGF0YSA9IHt9O1xyXG4gICAgICAgICAgYmZEYXRhLmlkID0gJHNjb3BlLml0ZW1JZDtcclxuICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvZGlzcHV0ZS9hZ3JlZVJlaXNzdWVPcmRlcicsIEpTT04uc3RyaW5naWZ5KGJmRGF0YSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGFua3MsIFRoaXMgZGlzcHV0ZSBjb21wbGV0ZWQuJylcclxuICAgICAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICAgICAgICAkc2NvcGUuY2xvc2VUaWNrZXQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSBjb250YWN0IHlvdXIgYWdlbnQgZm9yIGhlbHAuJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vICRzY29wZS5iZkRpc0FncmVlRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAvLyAgICAgbGF5ZXIubXNnKCfmnKrlvIDlj5Es5oCO5LmI5YGaJylcclxuICAgICAgLy8gfVxyXG4gICAgICAvLyDlhbPpl610aWNrZXRcclxuICAgICAgJHNjb3BlLmNsb3NlVGlja2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5kaXNwdXRlY2VudGVyLXdyYXAnKS5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBsZWZ0OiAnMTEwJScsXHJcbiAgICAgICAgICBtYXJnaW5MZWZ0OiAwXHJcbiAgICAgICAgfSwgMTAwKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+WbnuWkjee6oOe6t+eahOaMiemSrlxyXG4gICAgICAkc2NvcGUucmVwbHlGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5yZXBseVRleHQpIHtcclxuICAgICAgICAgIGxheWVyLmxvYWQoMilcclxuICAgICAgICAgIC8vIHZhciBsaXN0QXJyID0gW107XHJcbiAgICAgICAgICB2YXIgbGlzdE9iaiA9IHt9Oy8v5a2Y5YKo5LiA5p2h5raI5oGv5YaF5a65XHJcbiAgICAgICAgICBsaXN0T2JqLnVzZXJOYW1lID0gJzAnOy8v5a6i5oi3XHJcbiAgICAgICAgICBsaXN0T2JqLmltYWdlID0gJHNjb3BlLmltZ0FycjtcclxuICAgICAgICAgIGxpc3RPYmoucmVtYXJrID0gJHNjb3BlLnJlcGx5VGV4dDtcclxuICAgICAgICAgIGxpc3RPYmoudmlkZW9VcmwgPSAkc2NvcGUudmlkZW9BcnI7XHJcbiAgICAgICAgICBsaXN0T2JqLmRhdGUgPSB0aW1lc3RhbXBUb1RpbWUobmV3IERhdGUoKSlcclxuICAgICAgICAgIC8vIGxpc3RBcnIucHVzaChsaXN0T2JqKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGxpc3RPYmopXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhsaXN0QXJyKVxyXG4gICAgICAgICAgJHNjb3BlLm1lc3NhZ2VMaXN0QXJyLnB1c2gobGlzdE9iailcclxuICAgICAgICAgIHZhciBsaXN0QXJyID0gSlNPTi5zdHJpbmdpZnkoJHNjb3BlLm1lc3NhZ2VMaXN0QXJyKVxyXG4gICAgICAgICAgdmFyIHVwRGF0YSA9IHt9O1xyXG4gICAgICAgICAgdXBEYXRhLmlkID0gJHNjb3BlLml0ZW1JZDtcclxuICAgICAgICAgIHVwRGF0YS5yZXNwb25zZVR5cGUgPSAnRVJQJztcclxuICAgICAgICAgIHVwRGF0YS5tZXNzYWdlID0gbGlzdEFycjtcclxuICAgICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvZGlzcHV0ZS9yZXBseURpc3B1dGUnLCBKU09OLnN0cmluZ2lmeSh1cERhdGEpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICBsYXllci5jbG9zZUFsbCgnbG9hZGluZycpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLnJlc3VsdCA9PSB0cnVlIHx8IGRhdGEuZGF0YS5yZXN1bHQgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlVGlja2V0KCk7Ly/lhbPpl63nuqDnurfljZVcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1JlcGx5IFN1Y2VzcycpXHJcbiAgICAgICAgICAgICAgJHNjb3BlLm9yZGVyc0xpc3RbJHNjb3BlLml0ZW1JbmRleF0ubWVzc2FnZSA9ICRzY29wZS5tZXNzYWdlTGlzdEFycjtcclxuICAgICAgICAgICAgICAkc2NvcGUucmVwbHlUZXh0ID0gJyc7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmltZ0FyciA9IFtdO1xyXG4gICAgICAgICAgICAgICRzY29wZS52aWRlb0FyciA9IFtdO1xyXG4gICAgICAgICAgICAgIGdldExpc3QoZHNwLCAkc2NvcGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vICRzY29wZS5tZXNzYWdlTGlzdEFyci5wb3AoKVxyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnUmVwbHkgRmFpbGVkJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgZXJyRnVuKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1BsZWFzZSBpbnB1dCBzb21lIGluZm9ybWF0aW9uLicpXHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8v5a6i5oi35YWz6Zet57qg57q3XHJcbiAgICAgICRzY29wZS5jbG9zZUpmRnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5jbG9zZUpmRmxhZyA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnF4Q2xvc2VGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLmNsb3NlSmZGbGFnID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnN1cmVDbG9zZUZ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2NvcGUuY2xvc2VKZkZsYWcgPSBmYWxzZTtcclxuICAgICAgICBsYXllci5sb2FkKDIpXHJcbiAgICAgICAgdmFyIHVwSWQgPSB7fTtcclxuICAgICAgICB1cElkLmlkID0gJHNjb3BlLml0ZW1JZDtcclxuICAgICAgICBkc3AucG9zdEZ1bignYXBwL2Rpc3B1dGUvY2FuY2VsRGlzcHV0ZScsIEpTT04uc3RyaW5naWZ5KHVwSWQpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJylcclxuICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdDbG9zZWQgU3VjZXNzJylcclxuICAgICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgICAgICRzY29wZS5jbG9zZVRpY2tldCgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdUaGlzIG9wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgY29udGFjdCB5b3VyIGFnZW50IGZvciBoZWxwLicpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZXJyRnVuKVxyXG4gICAgICB9XHJcbiAgICAgIC8v5a6i5oi35ouS57ud6YCA5qy+IOmHjeWPkVxyXG4gICAgICAkc2NvcGUuY3VzRGlzQWdyZWVGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLmRpc0FncmVlRmxhZyA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgLy/lj5bmtojmi5Lnu51cclxuICAgICAgJHNjb3BlLnF4ampGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLmRpc0FncmVlRmxhZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIC8v56Gu5a6a5ouS57udXHJcbiAgICAgICRzY29wZS5zdXJlRGlzQWdyZWVGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUucmVmdXNlQ2F1c2UpIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnUGxlYXNlIGZpbGwgaW4gcmVmdXNlIHJlYXNvbicpXHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxheWVyLmxvYWQoMilcclxuICAgICAgICB2YXIgbGlzdE9iaiA9IHt9Oy8v5a2Y5YKo5LiA5p2h5raI5oGv5YaF5a65XHJcbiAgICAgICAgbGlzdE9iai51c2VyTmFtZSA9ICcwJzsvL+WuouaIt1xyXG4gICAgICAgIC8vIGxpc3RPYmouaW1hZ2UgPSAkc2NvcGUuaW1nQXJyO1xyXG4gICAgICAgIGxpc3RPYmoucmVtYXJrID0gJHNjb3BlLnJlZnVzZUNhdXNlO1xyXG4gICAgICAgIGxpc3RPYmouZGF0ZSA9IHRpbWVzdGFtcFRvVGltZShuZXcgRGF0ZSgpKVxyXG4gICAgICAgIGxpc3RPYmoucmVmdXNlQ2F1c2UgPSAkc2NvcGUucmVmdXNlQ2F1c2U7XHJcbiAgICAgICAgbGlzdE9iai5yZWZ1c2VNb25leSA9ICRzY29wZS50a01vbmV5O1xyXG4gICAgICAgICRzY29wZS5tZXNzYWdlTGlzdEFyci5wdXNoKGxpc3RPYmopXHJcbiAgICAgICAgdmFyIGxpc3RBcnIgPSBKU09OLnN0cmluZ2lmeSgkc2NvcGUubWVzc2FnZUxpc3RBcnIpXHJcbiAgICAgICAgdmFyIHVwSWQgPSB7fTtcclxuICAgICAgICB1cElkLmlkID0gJHNjb3BlLml0ZW1JZDtcclxuICAgICAgICAvLyB1cElkLnJlZnVzZUNhdXNlID0gJHNjb3BlLnJlZnVzZUNhdXNlO1xyXG4gICAgICAgIHVwSWQubWVzc2FnZSA9IGxpc3RBcnI7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9kaXNwdXRlL3JlZnVzZVByb3Bvc2FsJywgSlNPTi5zdHJpbmdpZnkodXBJZCksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKTtcclxuICAgICAgICAgIGlmIChkYXRhLmRhdGEucmVzdWx0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdSZWZ1c2UgU3VjY2VzcycpXHJcbiAgICAgICAgICAgICRzY29wZS5vcmRlcnNMaXN0WyRzY29wZS5pdGVtSW5kZXhdLm1lc3NhZ2UgPSAkc2NvcGUubWVzc2FnZUxpc3RBcnI7XHJcbiAgICAgICAgICAgICRzY29wZS5kaXNBZ3JlZUZsYWcgPSBmYWxzZTsvL+WFs+mXreWuouaIt+S4jeWQjOaEj+mAgOasvuW8ueahhlxyXG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VUaWNrZXQoKTsvL+WFs+mXree6oOe6t+W8ueahhlxyXG4gICAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZygnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZC4gUGxlYXNlIGNvbnRhY3QgeW91ciBhZ2VudCBmb3IgaGVscC4nKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGVyckZ1bilcclxuICAgICAgfVxyXG4gICAgICAvL+WuouaIt+WQjOaEj+mAgOasvlxyXG4gICAgICAkc2NvcGUuY3VzQWdyZWVGdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGF5ZXIubG9hZCgyKVxyXG4gICAgICAgIHZhciB1cElkID0ge307XHJcbiAgICAgICAgdXBJZC5pZCA9ICRzY29wZS5pdGVtSWQ7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9kaXNwdXRlL29yZGVyUmVmdW5kJywgSlNPTi5zdHJpbmdpZnkodXBJZCksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKVxyXG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5yZXN1bHQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ1RoYW5rcywgVGhpcyBkaXNwdXRlIGNvbXBsZXRlZC4nKVxyXG4gICAgICAgICAgICBnZXRMaXN0KGRzcCwgJHNjb3BlKTtcclxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlVGlja2V0KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSBjb250YWN0IHlvdXIgYWdlbnQgZm9yIGhlbHAuJylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBlcnJGdW4pXHJcbiAgICAgIH1cclxuICAgICAgLy/ngrnlh7vkuIrkvKDnmoTlm77niYfmmL7npLrlpKflm75cclxuICAgICAgJHNjb3BlLnZpZXdCaWdJbWcgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICRzY29wZS52aWV3SW1nRmxhZyA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLmJpZ0ltZ1NyYyA9IGl0ZW07XHJcbiAgICAgICAgY29uc29sZS5sb2coaXRlbSlcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuY2xvc2VQcmVJbWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHNjb3BlLnZpZXdJbWdGbGFnID0gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICAvL+WtkOiuouWNleeahOivpuaDhVxyXG4gICAgICAvLyAkKCcub3JkZXJzLWxpc3QnKS5vbignY2xpY2snLCcuemktb3JkZXItbnVtJyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgIC8vICBsb2NhdGlvbi5ocmVmPVwiIy9vcmRlci1kZXRhaWxcIjtcclxuICAgICAgLy8gfSlcclxuICAgICAgJHNjb3BlLmhyZWZMaW5rRnVuID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICB2YXIgaWQgPSBpdGVtLmlkO1xyXG4gICAgICAgIHZhciBjam9yZGVyTm8gPSBpdGVtLmNqb3JkZXJObztcclxuXHJcbiAgICAgICAgdmFyIGlzdHJhY2tGbGFnO1xyXG4gICAgICAgIC8vIGlmIChpdGVtLlRSQUNLSU5HTlVNQkVSKSB7XHJcbiAgICAgICAgLy8gICAgIGlzdHJhY2tGbGFnID0gMjtcclxuICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICBpc3RyYWNrRmxhZyA9IDE7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGlmIChpdGVtLnRyYWNraW5nTnVtYmVyKSB7XHJcbiAgICAgICAgICBpc3RyYWNrRmxhZyA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlzdHJhY2tGbGFnID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlzYWZ0ZXIgPSAzO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGlzYWZ0ZXIpXHJcbiAgICAgICAgLy8gbG9jYXRpb24uaHJlZj1cIiMvb3JkZXItZGV0YWlsL1wiK2lkKycvJytpc3RyYWNrRmxhZztcclxuICAgICAgICAvLyB3aW5kb3cub3BlbihcIiMvb3JkZXItZGV0YWlsL1wiK2lkKycvJytpc3RyYWNrRmxhZysnLycraXNhZnRlcilcclxuICAgICAgICAvL+ebtOWPkeWNlVxyXG4gICAgICAgIHZhciBuZXdTdHIgPSBjam9yZGVyTm8uaW5kZXhPZihcIlpGXCIpO1xyXG4gICAgICAgIGlmIChuZXdTdHIgPT0gMCkge1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCLlrZfnrKbkuLLmmK/ku6VaRuW8gOWktOeahO+8gVwiKVxyXG4gICAgICAgICAgd2luZG93Lm9wZW4oXCIjL29yZGVyLWRldGFpbC9cIiArIGNqb3JkZXJObyArICcvJyArIGlzdHJhY2tGbGFnICsgJy8nICsgaXNhZnRlciArICcvJyArICdESVJFQ1QnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmV3U3RyID09IC0xKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuWtl+espuS4suS4jeaYr+S7pVpG5byA5aS055qE77yBXCIpXHJcbiAgICAgICAgICB3aW5kb3cub3BlbihcIiMvb3JkZXItZGV0YWlsL1wiICsgY2pvcmRlck5vICsgJy8nICsgaXN0cmFja0ZsYWcgKyAnLycgKyBpc2FmdGVyKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaXRlbS5pbXBTdG9yYWdlRmxhZz09J0lTSU1QJyA/ICcxJzogaXRlbS5zdGF0dXM9PTEyIHx8IGl0ZW0uc3RhdHVzPT03ID8gJzAnOiAnMScpICsgJy8xL0RJUkVDVCdcclxuICAgICAgfVxyXG4gICAgICBmdW5jdGlvbiBlcnJGdW4oZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgbGF5ZXIuY2xvc2VBbGwoJ2xvYWRpbmcnKTtcclxuICAgICAgfVxyXG4gICAgICAvL+agvOW8j+WMluaXtumXtFxyXG4gICAgICBmdW5jdGlvbiB0aW1lc3RhbXBUb1RpbWUoZGF0ZSkge1xyXG4gICAgICAgIHZhciBZLCBNLCBELCBoLCBtLCBzXHJcbiAgICAgICAgWSA9IGRhdGUuZ2V0RnVsbFllYXIoKSArICctJztcclxuICAgICAgICBNID0gKGRhdGUuZ2V0TW9udGgoKSArIDEgPCAxMCA/ICcwJyArIChkYXRlLmdldE1vbnRoKCkgKyAxKSA6IGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJy0nO1xyXG4gICAgICAgIEQgPSBkYXRlLmdldERhdGUoKSArICcgJztcclxuICAgICAgICBoID0gZGF0ZS5nZXRIb3VycygpICsgJzonO1xyXG4gICAgICAgIG0gPSBkYXRlLmdldE1pbnV0ZXMoKSArICc6JztcclxuICAgICAgICBzID0gZGF0ZS5nZXRTZWNvbmRzKCk7XHJcbiAgICAgICAgLy8gcmV0dXJuIFkrTStEK2grbStzO1xyXG4gICAgICAgIHJldHVybiBZICsgTSArIEQ7XHJcbiAgICAgIH1cclxuXHJcbiAgLy8gc3RyaXBl5ZKMY2hlY2t1b3TkuqTmmJPnirbmgIHmn6Xor6JcclxuICAgIGZ1bmN0aW9uIHN0cmlwZVRyYWRlUXVlcnkocGFybWFzKSB7XHJcbiAgICAgIGxheWVyLmxvYWQoMilcclxuICAgICAgZHNwLnBvc3RGdW4oJ2FwcC9wYXkvc3RyaXBlVHJhZGVRdWVyeScsIHBhcm1hcywgKHtkYXRhfSkgPT4ge1xyXG4gICAgICAgIGxheWVyLmNsb3NlQWxsKCdsb2FkaW5nJylcclxuICAgICAgICBpZihkYXRhLmNvZGUgPT0gMjAwKSB7XHJcbiAgICAgICAgICAkc2NvcGUuc3RyaXBlU3RhdHVzID0gK2RhdGEuZGF0YVxyXG4gICAgICAgICAgaWYocGFybWFzICYmIHBhcm1hcy5wYXltZW50VHlwZSA9PT0gJ1N0cmlwZScpIHtcclxuICAgICAgICAgICAgLyoqIDHlvoXmlK/ku5ggMuaUr+S7mOS4rSAz5pSv5LuY5oiQ5YqfIDTmlK/ku5jlpLHotKUgNeaUr+S7mOW8guW4uCA25pSv5LuY5Y+W5raIICovXHJcbiAgICAgICAgICAgIHN3aXRjaCgrZGF0YS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgY2FzZSAxOiAgXHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ0F3YWl0aW5nIHBheW1lbnQgY29uZmlybWF0aW9uLiBQbGVhc2UgcmVmcmVzaCBhbmQgY2hlY2sgaXQgbGF0ZXIuJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBjYXNlIDI6IFxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdBd2FpdGluZyBwYXltZW50IGNvbmZpcm1hdGlvbi4gUGxlYXNlIHJlZnJlc2ggYW5kIGNoZWNrIGl0IGxhdGVyLicpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICBjYXNlIDM6IFxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IFN1Y2Nlc3NmdWwuJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBjYXNlIDQ6IFxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IHZpYSBTdHJpcGUgZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgY2FzZSA1OiBcclxuICAgICAgICAgICAgICAgIGxheWVyLm1zZygnUGF5bWVudCB2aWEgU3RyaXBlIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgNjogXHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ1BheW1lbnQgdmlhIFN0cmlwZSBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBkZWZhdWx0OiAgJydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYocGFybWFzICYmIHBhcm1hcy5wYXltZW50VHlwZSA9PT0gJ0NoZWNrb3V0Jykge1xyXG4gICAgICAgICAgICAvKiogMeW+heaUr+S7mCAy5pSv5LuY5LitIDPmlK/ku5jmiJDlip8gNOaUr+S7mOWksei0pSA15pSv5LuY5byC5bi4IDbmlK/ku5jlj5bmtoggKi9cclxuICAgICAgICAgICAgc3dpdGNoKCtkYXRhLmRhdGEpIHtcclxuICAgICAgICAgICAgICBjYXNlIDE6ICBcclxuICAgICAgICAgICAgICAgIGxheWVyLm1zZygnQXdhaXRpbmcgUGF5bWVudC4nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgMjogXHJcbiAgICAgICAgICAgICAgICBsYXllci5tc2coJ0F3YWl0aW5nIHBheW1lbnQgY29uZmlybWF0aW9uLiBQbGVhc2UgcmVmcmVzaCBhbmQgY2hlY2sgaXQgbGF0ZXIuJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBjYXNlIDM6IFxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IFN1Y2Nlc3NmdWwuJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBjYXNlIDQ6IFxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IHZpYSBDaGVja091dCBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBjYXNlIDU6IFxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IHZpYSBDaGVja091dCBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICBjYXNlIDY6IFxyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKCdQYXltZW50IENhbmNlbGxlZC4nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6IGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbXlDSi5odG1sIy9kcm9wLXByb2NlJztcclxuICAgICAgICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBsYXllci5tc2coZGF0YS5tc2cpXHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gIC8vIHN0cmlwZeS6pOaYk+eKtuaAgeafpeivolxyXG4gIGZ1bmN0aW9uIGdldFN0cmlwZVRyYWRlKCkge1xyXG4gICAgY29uc3Qgc3RyaXBlT2JqID0gYnMuZGVjb2RlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdHJpcGVPYmonKSB8fCAnJykgJiYgSlNPTi5wYXJzZShicy5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0cmlwZU9iaicpIHx8ICcnKSk7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnc3RyaXBlT2JqJylcclxuICAgIGlmKCEoc3RyaXBlT2JqICYmIHN0cmlwZU9iai5vcmRlcklkKSkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGNvbnN0IG9yZGlkID0gJHN0YXRlUGFyYW1zLm9yZGlkO1xyXG4gICAgaWYob3JkaWQgIT09IHN0cmlwZU9iai5zaG93T3JkSWQpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXJtYXMgPSB7XHJcbiAgICAgICdvcmRlcklkJzogc3RyaXBlT2JqICYmIHN0cmlwZU9iai5vcmRlcklkLFxyXG4gICAgICAnY29kZSc6IHN0cmlwZU9iaiAmJiBzdHJpcGVPYmouc3RyaXBlQ29kZSxcclxuICAgICAgJ3BheUlkJzogc3RyaXBlT2JqICYmIHN0cmlwZU9iai5wYXlJZCxcclxuICAgICAgJ3BheW1lbnRUeXBlJzogc3RyaXBlT2JqICYmIHN0cmlwZU9iai5wYXltZW50VHlwZSxcclxuICAgIH1cclxuICAgIHN0cmlwZVRyYWRlUXVlcnkocGFybWFzKVxyXG4gIH1cclxuICBnZXRTdHJpcGVUcmFkZSgpXHJcblxyXG4gIC8vIGNoZWNrb3V05Lqk5piT54q25oCB5p+l6K+iXHJcbiAgZnVuY3Rpb24gZ2V0Q2hlY2tvdXRUcmFkZSgpIHtcclxuICAgIGNvbnN0IGNoZWNrb3V0T2JqID0gYnMuZGVjb2RlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjaGVja291dE9iaicpIHx8ICcnKSAmJiBKU09OLnBhcnNlKGJzLmRlY29kZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2hlY2tvdXRPYmonKSB8fCAnJykpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NoZWNrb3V0T2JqJylcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdja29TZXNzaW9uSWQnKVxyXG4gICAgaWYoIShjaGVja291dE9iaiAmJiBjaGVja291dE9iai5wYXltZW50VHlwZSA9PT0gJ0NoZWNrb3V0JykpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXJtYXMgPSB7XHJcbiAgICAgICdvcmRlcklkJzogY2hlY2tvdXRPYmogJiYgY2hlY2tvdXRPYmoub3JkZXJJZCxcclxuICAgICAgJ2NvZGUnOiBjaGVja291dE9iaiAmJiBjaGVja291dE9iai5zdHJpcGVDb2RlLFxyXG4gICAgICAncGF5bWVudFR5cGUnOiBjaGVja291dE9iaiAmJiBjaGVja291dE9iai5wYXltZW50VHlwZSxcclxuICAgICAgJ3BheUlkJzogY2hlY2tvdXRPYmogJiYgY2hlY2tvdXRPYmoucGF5SWQsXHJcbiAgICAgICdzZXNzaW9uSWQnOiAkc2NvcGUuY2tvU2Vzc2lvbklkXHJcbiAgICB9XHJcbiAgICBzdHJpcGVUcmFkZVF1ZXJ5KHBhcm1hcylcclxuICB9XHJcblxyXG4gICAgfV0pO1xyXG5cclxuICByZXR1cm4gYXBwO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQXpEQTtBQUFBO0FBQ0E7QUF5REE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBCQTtBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUF3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQTFEQTtBQTJEQTtBQUNBO0FBQ0E7QUFDQTtBQTdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQWxCQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFkQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFuQkE7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQW5CQTtBQXFCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQW5CQTtBQUNBO0FBQ0E7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBRUE7QUFFQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../src/pages/mycj/undelivered-orders/undeliver-pending-reship.js\n");

/***/ })

}]);