(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[64],{

/***/ "../src/pages/mycj/video/video-demand.js":
/*!***********************************************!*\
  !*** ../src/pages/mycj/video/video-demand.js ***!
  \***********************************************/
/*! exports provided: videoDemandFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"videoDemandFactory\", function() { return videoDemandFactory; });\nfunction videoDemandFactory(angular) {\n  var module = angular.module('video-demand.module', []);\n  module.controller('video-demand.ctrl', ['$scope', '$rootScope', 'dsp', 'enumApp', function ($scope, $rootScope, dsp, enumApp) {\n    var userId = $rootScope.userInfo.userInfo;\n    $scope.statusEnums = enumApp.status;\n    $scope.status = '';\n    $scope.searchNum = '';\n    $scope.sourceType = '';\n    $scope.pageSize = '10';\n    $scope.pageNum = '1';\n    $rootScope.$on('media/orderMedia/selectMediaDemandList', function (_, bool) {\n      return $scope.loading = bool;\n    }); //数据请求函数\n\n    function getList() {\n      var parmas = {\n        pageNum: $scope.pageNum,\n        pageSize: $scope.pageSize,\n        data: {\n          number: $scope.searchNum,\n          isErp: false,\n          status: $scope.status,\n          sourceType: $scope.sourceType,\n          mediaType: $scope.mediaType ? Number($scope.mediaType) : undefined\n        }\n      };\n      dsp.postFun('media/orderMedia/selectMediaDemandList', parmas, function (res) {\n        if (res.data.code === 200) {\n          $scope.dataList = res.data.data.list;\n          $scope.totalNum = res.data.data.total;\n          $scope.totalPageNum = Math.ceil($scope.totalNum / $scope.pageSize);\n\n          if ($scope.dataList.length > 0) {\n            $scope.dataList = $scope.dataList.map(function (o) {\n              if (o.imageUrl) o.imageUrl = \"https://\".concat(o.imageUrl.split(',')[0].replace('https://', '').replace('http://', ''));\n              return o;\n            });\n            dsp.removeNodataPic($('.source-orders-list'), 450);\n          } else {\n            dsp.addNodataPic($('.source-orders-list'), 450);\n          }\n\n          $scope.$broadcast('page-data', {\n            pageNum: $scope.pageNum,\n            totalNum: $scope.totalPageNum,\n            totalCounts: $scope.totalNum,\n            pageSize: $scope.pageSize\n          });\n        } else {\n          dsp.cjMesFun(1);\n        }\n      }, function (err) {\n        dsp.addNodataPic($('.source-orders-list'), 450);\n        dsp.cjMesFun(1);\n      });\n    }\n\n    $scope.$on('pagedata-fa', function (d, data) {\n      $scope.pageNum = data.pageNum;\n      $scope.pageSize = data.pageSize;\n      getList(dsp, $scope);\n    });\n    getList();\n\n    $scope.handleSearch = function () {\n      $scope.pageNum = 1;\n      getList();\n    };\n\n    $scope.enterSearch = function (e) {\n      $scope.pageNum = 1;\n      e.keyCode === 13 && getList();\n    }; // 删除搜品\n\n\n    $scope.deleteSourcing = function (item) {\n      $scope.isDelSourcing = true;\n\n      $scope.confirmFun = function () {\n        dsp.postFun('app/videoDemand/updateVideoDemand', {\n          'id': item.id,\n          'status': '0',\n          'sourceType': item.sourcetype\n        }, function (res) {\n          if (res.data.statusCode == 200) {\n            $scope.isDelSourcing = false;\n            getList();\n          } else {\n            dsp.cjMesFun(1);\n          }\n        }, function (res) {\n          console.log(res);\n        });\n      };\n    };\n  }]);\n  return module;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovdmlkZW8vdmlkZW8tZGVtYW5kLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3NyYy9wYWdlcy9teWNqL3ZpZGVvL3ZpZGVvLWRlbWFuZC5qcz9hZmFhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiB2aWRlb0RlbWFuZEZhY3RvcnkoYW5ndWxhcikge1xyXG4gIGNvbnN0IG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCd2aWRlby1kZW1hbmQubW9kdWxlJywgW10pO1xyXG5cclxuICBtb2R1bGUuY29udHJvbGxlcigndmlkZW8tZGVtYW5kLmN0cmwnLCBbJyRzY29wZScsICckcm9vdFNjb3BlJywgJ2RzcCcsICdlbnVtQXBwJywgZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgZHNwLCBlbnVtQXBwKSB7XHJcbiAgICB2YXIgdXNlcklkID0gJHJvb3RTY29wZS51c2VySW5mby51c2VySW5mbztcclxuICAgICRzY29wZS5zdGF0dXNFbnVtcyA9IGVudW1BcHAuc3RhdHVzO1xyXG5cclxuICAgICRzY29wZS5zdGF0dXMgPSAnJztcclxuICAgICRzY29wZS5zZWFyY2hOdW0gPSAnJztcclxuICAgICRzY29wZS5zb3VyY2VUeXBlID0gJyc7XHJcbiAgICAkc2NvcGUucGFnZVNpemUgPSAnMTAnO1xyXG4gICAgJHNjb3BlLnBhZ2VOdW0gPSAnMSc7XHJcbiAgXHJcbiAgICAkcm9vdFNjb3BlLiRvbignbWVkaWEvb3JkZXJNZWRpYS9zZWxlY3RNZWRpYURlbWFuZExpc3QnLCAoXywgYm9vbCkgPT4gJHNjb3BlLmxvYWRpbmcgPSBib29sKTtcclxuICBcclxuICAgIC8v5pWw5o2u6K+35rGC5Ye95pWwXHJcbiAgICBmdW5jdGlvbiBnZXRMaXN0KCkge1xyXG4gICAgICBjb25zdCBwYXJtYXMgPSB7XHJcbiAgICAgICAgcGFnZU51bTogJHNjb3BlLnBhZ2VOdW0sXHJcbiAgICAgICAgcGFnZVNpemU6ICRzY29wZS5wYWdlU2l6ZSxcclxuICAgICAgICBkYXRhOntcclxuICAgICAgICAgIG51bWJlcjogJHNjb3BlLnNlYXJjaE51bSxcclxuICAgICAgICAgIGlzRXJwOiBmYWxzZSxcclxuICAgICAgICAgIHN0YXR1czogJHNjb3BlLnN0YXR1cyxcclxuICAgICAgICAgIHNvdXJjZVR5cGU6ICRzY29wZS5zb3VyY2VUeXBlLFxyXG4gICAgICAgICAgbWVkaWFUeXBlOiAkc2NvcGUubWVkaWFUeXBlID8gTnVtYmVyKCRzY29wZS5tZWRpYVR5cGUpIDogdW5kZWZpbmVkXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgICAgZHNwLnBvc3RGdW4oJ21lZGlhL29yZGVyTWVkaWEvc2VsZWN0TWVkaWFEZW1hbmRMaXN0JywgcGFybWFzLCByZXMgPT4ge1xyXG4gICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHtcclxuICAgICAgICAgICRzY29wZS5kYXRhTGlzdCA9IHJlcy5kYXRhLmRhdGEubGlzdDtcclxuICAgICAgICAgICRzY29wZS50b3RhbE51bSA9IHJlcy5kYXRhLmRhdGEudG90YWw7XHJcbiAgICAgICAgICAkc2NvcGUudG90YWxQYWdlTnVtID0gTWF0aC5jZWlsKCRzY29wZS50b3RhbE51bSAvICRzY29wZS5wYWdlU2l6ZSk7XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLmRhdGFMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRhdGFMaXN0ID0gJHNjb3BlLmRhdGFMaXN0Lm1hcChvID0+e1xyXG4gICAgICAgICAgICAgIGlmIChvLmltYWdlVXJsKVxyXG4gICAgICAgICAgICAgICAgby5pbWFnZVVybCA9IGBodHRwczovLyR7by5pbWFnZVVybC5zcGxpdCgnLCcpWzBdLnJlcGxhY2UoJ2h0dHBzOi8vJywgJycpLnJlcGxhY2UoJ2h0dHA6Ly8nLCAnJyl9YDtcclxuICAgICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgZHNwLnJlbW92ZU5vZGF0YVBpYygkKCcuc291cmNlLW9yZGVycy1saXN0JyksIDQ1MCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkc3AuYWRkTm9kYXRhUGljKCQoJy5zb3VyY2Utb3JkZXJzLWxpc3QnKSwgNDUwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdwYWdlLWRhdGEnLCB7XHJcbiAgICAgICAgICAgIHBhZ2VOdW06ICRzY29wZS5wYWdlTnVtLFxyXG4gICAgICAgICAgICB0b3RhbE51bTogJHNjb3BlLnRvdGFsUGFnZU51bSxcclxuICAgICAgICAgICAgdG90YWxDb3VudHM6ICRzY29wZS50b3RhbE51bSxcclxuICAgICAgICAgICAgcGFnZVNpemU6ICRzY29wZS5wYWdlU2l6ZVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgZHNwLmFkZE5vZGF0YVBpYygkKCcuc291cmNlLW9yZGVycy1saXN0JyksIDQ1MCk7XHJcbiAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICBcclxuICAgICRzY29wZS4kb24oJ3BhZ2VkYXRhLWZhJywgZnVuY3Rpb24oZCwgZGF0YSkge1xyXG4gICAgICAkc2NvcGUucGFnZU51bSA9IGRhdGEucGFnZU51bTtcclxuICAgICAgJHNjb3BlLnBhZ2VTaXplID0gZGF0YS5wYWdlU2l6ZTtcclxuICAgICAgZ2V0TGlzdChkc3AsICRzY29wZSk7XHJcbiAgICB9KTtcclxuICBcclxuICAgIGdldExpc3QoKTtcclxuICBcclxuICAgICRzY29wZS5oYW5kbGVTZWFyY2ggPSAoKSA9PiB7XHJcbiAgICAgICRzY29wZS5wYWdlTnVtID0gMTtcclxuICAgICAgZ2V0TGlzdCgpO1xyXG4gICAgfTtcclxuICBcclxuICAgICRzY29wZS5lbnRlclNlYXJjaCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICRzY29wZS5wYWdlTnVtID0gMTtcclxuICAgICAgZS5rZXlDb2RlID09PSAxMyAmJiBnZXRMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Yig6Zmk5pCc5ZOBXHJcbiAgICAkc2NvcGUuZGVsZXRlU291cmNpbmcgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAkc2NvcGUuaXNEZWxTb3VyY2luZyA9IHRydWU7XHJcbiAgICAgICRzY29wZS5jb25maXJtRnVuID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ2FwcC92aWRlb0RlbWFuZC91cGRhdGVWaWRlb0RlbWFuZCcsIHtcclxuICAgICAgICAgICAgJ2lkJzogaXRlbS5pZCxcclxuICAgICAgICAgICAgJ3N0YXR1cyc6ICcwJyxcclxuICAgICAgICAgICAgJ3NvdXJjZVR5cGUnOiBpdGVtLnNvdXJjZXR5cGVcclxuICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzQ29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuaXNEZWxTb3VyY2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGdldExpc3QoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBkc3AuY2pNZXNGdW4oMSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKVxyXG4gICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XSlcclxuXHJcbiAgcmV0dXJuIG1vZHVsZTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUhBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../src/pages/mycj/video/video-demand.js\n");

/***/ })

}]);