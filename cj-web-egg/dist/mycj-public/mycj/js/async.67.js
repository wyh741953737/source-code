(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[67],{

/***/ "../src/pages/mycj/warningSet/warningSet.js":
/*!**************************************************!*\
  !*** ../src/pages/mycj/warningSet/warningSet.js ***!
  \**************************************************/
/*! exports provided: warningSetFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"warningSetFactory\", function() { return warningSetFactory; });\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction warningSetFactory(angular) {\n  var app = angular.module('mycj-warningSet.module', ['service']);\n  app.controller('mycj-warningSet.ctrl', ['$rootScope', '$scope', 'dsp', '$stateParams', 'utils', '$location', function ($rootScope, $scope, dsp, $stateParams, utils, $location) {\n    $scope.inventoryOptions = [{\n      value: 0,\n      label: 'By Current Inventory'\n    }, {\n      value: 1,\n      label: 'By Estimated Remaining Days'\n    }];\n    $scope.promptOptions = [{\n      value: 0,\n      label: 'Once Only'\n    }, {\n      value: 1,\n      label: 'Every Time'\n    }, {\n      value: 2,\n      label: 'One Week'\n    }, {\n      value: 3,\n      label: 'Never'\n    }];\n    $scope.selectedInventory = '0';\n    $scope.selectedPrompt = '0';\n    $scope.inputValue = '';\n    $scope.text = 'Available private inventory';\n    $scope.edit = false;\n    $scope.showOutConfirmModel = false;\n\n    $scope.chaneInventory = function (value) {\n      $scope.edit = true;\n      $scope.selectedInventory = String(value);\n\n      if (value == 0) {\n        $scope.text = 'Available private inventory';\n      } else {\n        $scope.text = 'Private Inventory (SKU 1)/Average Daily Sales Volume of the Past Week=Estimated Remaining Days (SKU 1)';\n      }\n    };\n\n    function setDefaultValue(valueObj) {\n      $scope.selectedInventory = String(valueObj.warningType);\n      $scope.selectedPrompt = String(valueObj.tipsType);\n\n      if (valueObj.warningNumber) {\n        $scope.inputValue = valueObj.warningNumber;\n        $scope.text = 'Available private inventory';\n      } else {\n        $scope.text = 'Private Inventory (SKU 1)/Average Daily Sales Volume of the Past Week=Estimated Remaining Days (SKU 1)';\n      }\n    }\n\n    function getDefaultValue() {\n      dsp.getFun('early-warning-web/warningSetting/getWarningSetting', function (_ref) {\n        var data = _ref.data;\n        layer.closeAll();\n\n        if (data.code == 200) {\n          if (data.data) {\n            setDefaultValue(data.data);\n          }\n        }\n      }, function (err) {\n        layer.closeAll();\n      });\n    }\n\n    getDefaultValue();\n\n    $scope.inputChange = function (value) {\n      $scope.inputValue = value.replace(/[^\\d]/g, '').replace(/^0/, '');\n      $scope.edit = true;\n    };\n\n    $scope.chanePrompt = function (value) {\n      $scope.edit = true;\n      $scope.selectedPrompt = String(value);\n    };\n\n    $scope.submitSet = function () {\n      if (Number($scope.selectedInventory) == 0 && !$scope.inputValue) {\n        layer.msg('Please input inventory quantity!');\n        return;\n      }\n\n      var params;\n\n      if (Number($scope.selectedInventory) === 0) {\n        params = {\n          warningType: Number($scope.selectedInventory),\n          warningNumber: Number($scope.inputValue),\n          tipsType: Number($scope.selectedPrompt)\n        };\n      } else {\n        params = {\n          warningType: Number($scope.selectedInventory),\n          tipsType: Number($scope.selectedPrompt)\n        };\n      }\n\n      layer.load(2);\n      dsp.postFun('early-warning-web/warningSetting/saveWarningSetting', _objectSpread({}, params), function (_ref2) {\n        var data = _ref2.data;\n        layer.closeAll();\n\n        if (data.code === 200) {\n          layer.msg('Save success');\n          history.go(-1);\n        } else {\n          layer.msg('Failed to save. Please try again!');\n        }\n      }, function (err) {\n        layer.closeAll();\n      });\n    };\n\n    $scope.cancelSet = function () {\n      if ($scope.edit) {\n        $scope.showOutConfirmModel = true;\n      } else {\n        history.go(-1);\n      }\n    };\n\n    $scope.cancelOut = function () {\n      $scope.showOutConfirmModel = false;\n    };\n\n    $scope.confirmOut = function () {\n      $scope.showOutConfirmModel = false;\n      history.go(-1);\n    };\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovd2FybmluZ1NldC93YXJuaW5nU2V0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3NyYy9wYWdlcy9teWNqL3dhcm5pbmdTZXQvd2FybmluZ1NldC5qcz8yYTdhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiB3YXJuaW5nU2V0RmFjdG9yeShhbmd1bGFyKSB7XHJcblx0XHJcblx0Y29uc3QgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215Y2otd2FybmluZ1NldC5tb2R1bGUnLCBbJ3NlcnZpY2UnXSk7XHJcblx0YXBwLmNvbnRyb2xsZXIoJ215Y2otd2FybmluZ1NldC5jdHJsJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICdkc3AnLCAnJHN0YXRlUGFyYW1zJywgJ3V0aWxzJywnJGxvY2F0aW9uJyxcclxuXHRcdGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUsIGRzcCwgJHN0YXRlUGFyYW1zLCB1dGlscywgJGxvY2F0aW9uKSB7XHJcblx0XHRcdCRzY29wZS5pbnZlbnRvcnlPcHRpb25zID0gW1xyXG5cdFx0XHRcdHt2YWx1ZTogMCwgbGFiZWw6ICdCeSBDdXJyZW50IEludmVudG9yeSd9LFxyXG5cdFx0XHRcdHt2YWx1ZTogMSwgbGFiZWw6ICdCeSBFc3RpbWF0ZWQgUmVtYWluaW5nIERheXMnfSxcclxuXHRcdFx0XVxyXG5cdFx0XHQkc2NvcGUucHJvbXB0T3B0aW9ucyA9IFtcclxuXHRcdFx0XHR7dmFsdWU6IDAsIGxhYmVsOiAnT25jZSBPbmx5J30sXHJcblx0XHRcdFx0e3ZhbHVlOiAxLCBsYWJlbDogJ0V2ZXJ5IFRpbWUnfSxcclxuXHRcdFx0XHR7dmFsdWU6IDIsIGxhYmVsOiAnT25lIFdlZWsnfSxcclxuXHRcdFx0XHR7dmFsdWU6IDMsIGxhYmVsOiAnTmV2ZXInfSxcclxuXHRcdFx0XVxyXG5cdFx0XHQkc2NvcGUuc2VsZWN0ZWRJbnZlbnRvcnkgPSAnMCc7XHJcblx0XHRcdCRzY29wZS5zZWxlY3RlZFByb21wdCA9ICcwJztcclxuXHRcdFx0JHNjb3BlLmlucHV0VmFsdWUgPSAnJztcclxuXHRcdFx0JHNjb3BlLnRleHQgPSAnQXZhaWxhYmxlIHByaXZhdGUgaW52ZW50b3J5JztcclxuXHRcdFx0JHNjb3BlLmVkaXQgPSBmYWxzZTtcclxuXHRcdFx0JHNjb3BlLnNob3dPdXRDb25maXJtTW9kZWwgPSBmYWxzZTtcclxuXHJcblx0XHRcdCRzY29wZS5jaGFuZUludmVudG9yeSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHRcdCAgICRzY29wZS5lZGl0ID0gdHJ1ZTtcclxuXHRcdFx0ICAgJHNjb3BlLnNlbGVjdGVkSW52ZW50b3J5ID0gU3RyaW5nKHZhbHVlKTtcclxuXHRcdFx0ICAgaWYodmFsdWUgPT0gMCl7XHJcblx0XHRcdFx0XHQkc2NvcGUudGV4dCA9ICdBdmFpbGFibGUgcHJpdmF0ZSBpbnZlbnRvcnknO1xyXG5cdFx0XHQgICB9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JHNjb3BlLnRleHQgPSAnUHJpdmF0ZSBJbnZlbnRvcnkgKFNLVSAxKS9BdmVyYWdlIERhaWx5IFNhbGVzIFZvbHVtZSBvZiB0aGUgUGFzdCBXZWVrPUVzdGltYXRlZCBSZW1haW5pbmcgRGF5cyAoU0tVIDEpJztcclxuXHRcdFx0ICAgfVxyXG5cdFx0XHR9XHJcblx0XHRcdGZ1bmN0aW9uIHNldERlZmF1bHRWYWx1ZSh2YWx1ZU9iaikge1xyXG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZEludmVudG9yeSA9IFN0cmluZyh2YWx1ZU9iai53YXJuaW5nVHlwZSk7XHJcblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkUHJvbXB0ID0gU3RyaW5nKHZhbHVlT2JqLnRpcHNUeXBlKTtcclxuXHRcdFx0XHRpZih2YWx1ZU9iai53YXJuaW5nTnVtYmVyKSB7XHJcblx0XHRcdFx0XHQkc2NvcGUuaW5wdXRWYWx1ZSA9IHZhbHVlT2JqLndhcm5pbmdOdW1iZXI7XHJcblx0XHRcdFx0XHQkc2NvcGUudGV4dCA9ICdBdmFpbGFibGUgcHJpdmF0ZSBpbnZlbnRvcnknO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkc2NvcGUudGV4dCA9ICdQcml2YXRlIEludmVudG9yeSAoU0tVIDEpL0F2ZXJhZ2UgRGFpbHkgU2FsZXMgVm9sdW1lIG9mIHRoZSBQYXN0IFdlZWs9RXN0aW1hdGVkIFJlbWFpbmluZyBEYXlzIChTS1UgMSknO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdFZhbHVlKCkge1xyXG5cdFx0XHRcdGRzcC5nZXRGdW4oJ2Vhcmx5LXdhcm5pbmctd2ViL3dhcm5pbmdTZXR0aW5nL2dldFdhcm5pbmdTZXR0aW5nJywgKHtkYXRhfSkgPT4ge1xyXG5cdFx0XHRcdFx0bGF5ZXIuY2xvc2VBbGwoKTtcclxuXHRcdFx0XHRcdGlmKGRhdGEuY29kZSA9PSAyMDApIHtcclxuXHRcdFx0XHRcdFx0aWYoZGF0YS5kYXRhKSB7XHJcblx0XHRcdFx0XHRcdFx0c2V0RGVmYXVsdFZhbHVlKGRhdGEuZGF0YSlcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdCAgfSwgKGVycikgPT4ge1xyXG5cdFx0XHRcdFx0bGF5ZXIuY2xvc2VBbGwoKTtcclxuXHRcdFx0XHQgIH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRnZXREZWZhdWx0VmFsdWUoKTtcclxuXHJcblxyXG5cdFx0XHQkc2NvcGUuaW5wdXRDaGFuZ2UgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdFx0XHRcdCRzY29wZS5pbnB1dFZhbHVlID0gdmFsdWUucmVwbGFjZSgvW15cXGRdL2csJycpLnJlcGxhY2UoL14wLywnJyk7XHJcblx0XHRcdFx0JHNjb3BlLmVkaXQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQkc2NvcGUuY2hhbmVQcm9tcHQgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdFx0XHRcdCRzY29wZS5lZGl0ID0gdHJ1ZTtcclxuXHRcdFx0XHQkc2NvcGUuc2VsZWN0ZWRQcm9tcHQgPSBTdHJpbmcodmFsdWUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkc2NvcGUuc3VibWl0U2V0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYoTnVtYmVyKCRzY29wZS5zZWxlY3RlZEludmVudG9yeSkgPT0gMCAmJiAhJHNjb3BlLmlucHV0VmFsdWUpIHtcclxuXHRcdFx0XHRcdGxheWVyLm1zZygnUGxlYXNlIGlucHV0IGludmVudG9yeSBxdWFudGl0eSEnKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9IFxyXG5cdFx0XHRcdGxldCBwYXJhbXM7XHJcblx0XHRcdFx0aWYoTnVtYmVyKCRzY29wZS5zZWxlY3RlZEludmVudG9yeSkgPT09IDApIHtcclxuXHRcdFx0XHRcdHBhcmFtcyA9IHtcclxuXHRcdFx0XHRcdFx0d2FybmluZ1R5cGU6IE51bWJlcigkc2NvcGUuc2VsZWN0ZWRJbnZlbnRvcnkpLFxyXG5cdFx0XHRcdFx0XHR3YXJuaW5nTnVtYmVyOiBOdW1iZXIoJHNjb3BlLmlucHV0VmFsdWUpLFxyXG5cdFx0XHRcdFx0XHR0aXBzVHlwZTogTnVtYmVyKCRzY29wZS5zZWxlY3RlZFByb21wdClcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cGFyYW1zID0ge1xyXG5cdFx0XHRcdFx0XHR3YXJuaW5nVHlwZTogTnVtYmVyKCRzY29wZS5zZWxlY3RlZEludmVudG9yeSksXHJcblx0XHRcdFx0XHRcdHRpcHNUeXBlOiBOdW1iZXIoJHNjb3BlLnNlbGVjdGVkUHJvbXB0KVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRsYXllci5sb2FkKDIpXHJcblx0XHRcdFx0ZHNwLnBvc3RGdW4oJ2Vhcmx5LXdhcm5pbmctd2ViL3dhcm5pbmdTZXR0aW5nL3NhdmVXYXJuaW5nU2V0dGluZycsIHsuLi5wYXJhbXN9LCAoe2RhdGF9KSA9PiB7XHJcblx0XHRcdFx0ICBsYXllci5jbG9zZUFsbCgpO1xyXG5cdFx0XHRcdCAgaWYoZGF0YS5jb2RlID09PSAyMDApe1xyXG5cdFx0XHRcdFx0ICBsYXllci5tc2coJ1NhdmUgc3VjY2VzcycpO1xyXG5cdFx0XHRcdFx0ICBoaXN0b3J5LmdvKC0xKTtcclxuXHRcdFx0XHQgIH0gZWxzZSB7XHJcblx0XHRcdFx0XHRsYXllci5tc2coJ0ZhaWxlZCB0byBzYXZlLiBQbGVhc2UgdHJ5IGFnYWluIScpO1xyXG5cdFx0XHRcdCAgfVxyXG5cdFx0XHRcdH0sIChlcnIpID0+IHtcclxuXHRcdFx0XHQgIGxheWVyLmNsb3NlQWxsKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCRzY29wZS5jYW5jZWxTZXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZigkc2NvcGUuZWRpdCkge1xyXG5cdFx0XHRcdFx0JHNjb3BlLnNob3dPdXRDb25maXJtTW9kZWwgPSB0cnVlO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRoaXN0b3J5LmdvKC0xKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCRzY29wZS5jYW5jZWxPdXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkc2NvcGUuc2hvd091dENvbmZpcm1Nb2RlbCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkc2NvcGUuY29uZmlybU91dCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCRzY29wZS5zaG93T3V0Q29uZmlybU1vZGVsID0gZmFsc2U7XHJcblx0XHRcdFx0aGlzdG9yeS5nbygtMSk7XHJcblx0XHRcdH1cclxuXHRcdH1dKVxyXG5cdHJldHVybiBhcHA7XHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../src/pages/mycj/warningSet/warningSet.js\n");

/***/ })

}]);