(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[7],{

/***/ "../src/pages/mycj/authorize/authStore.js":
/*!************************************************!*\
  !*** ../src/pages/mycj/authorize/authStore.js ***!
  \************************************************/
/*! exports provided: goAuthStore, goAuthShipstation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"goAuthStore\", function() { return goAuthStore; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"goAuthShipstation\", function() { return goAuthShipstation; });\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\r\n * 授权店铺集合\r\n * @param {dsp} dsp dsp 服务\r\n * @param {string} storeName 店铺名\r\n * @param {object}} params 参数\r\n */\nvar goAuthStore = function goAuthStore(dsp, storeName, params) {\n  var url = 'platform-shop/authorize/getAuthorUrl';\n  var storeTypeObj = {\n    'ebay': {\n      shopType: 'EBAY',\n      StoreType: '4',\n      url: \"\".concat(url, \"?platform=EBAY&fromType=2&shopName=\").concat(params && params.shopName ? params.shopName : '')\n    },\n    'Lazada': {\n      shopType: 'LAZADA',\n      StoreType: '7',\n      url: \"\".concat(url, \"?platform=LAZADA&fromType=2\")\n    },\n    'shopee': {\n      shopType: ' SHOPEE',\n      StoreType: '8',\n      url: \"\".concat(url, \"?platform= SHOPEE&fromType=2\")\n    },\n    'wix': {\n      shopType: 'WIX',\n      StoreType: '6',\n      url: \"\".concat(url, \"?platform=WIX&fromType=2\")\n    },\n    'etsy': {\n      shopType: 'ETSY',\n      StoreType: '10',\n      url: \"\".concat(url, \"?platform=ETSY&fromType=2\")\n    }\n  };\n  var load = layer.load(2);\n  dsp.getFun(storeTypeObj[storeName].url, function (res) {\n    layer.close(load);\n    if (res.data.code != 200) return layer.msg(res.data.message || \"Authorization Failed.\");\n    location.href = res.data.data;\n  });\n};\n/**\r\n * 授权goAuthShipstation\r\n * @param {dsp} dsp dsp 服务注入\r\n * @param {params} params 授权参数\r\n */\n\nvar goAuthShipstation = function goAuthShipstation(dsp, $scope) {\n  var newParams = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (!$scope.APIKey) return layer.msg(\"Please enter API Key.\");\n  if (!$scope.APISecret) return layer.msg(\"Please enter API Secret.\");\n\n  var params = _objectSpread({\n    userId: $scope.userId,\n    consumerKey: $scope.APIKey,\n    consumerSecret: $scope.APISecret,\n    platform: 'SHIPSTATION',\n    fromType: '2'\n  }, newParams);\n\n  var queryStr = \"\",\n      fristFlag = true;\n\n  for (var key in params) {\n    var value = params[key];\n    queryStr += \"\".concat(fristFlag ? '?' : '&').concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(value));\n    fristFlag = false;\n  }\n\n  var load = layer.load(2);\n  dsp.getFun('platform-shop/authorize/saveShop' + queryStr, function (res) {\n    layer.close(load);\n    if (res.data.code != 200) return layer.msg(res.data.message || \"Authorization Failed.\");\n    layer.msg('Authorization Successfully.');\n    var isEmpower = localStorage.getItem(\"isEmpower\");\n\n    if (isEmpower == \"0\") {\n      localStorage.setItem(\"isEmpower\", \"1\");\n    } else if (isEmpower == \"2\") {\n      localStorage.setItem(\"isEmpower\", \"2\");\n    }\n\n    window.location.href = 'welcome.html?from=authorize&result=1';\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovYXV0aG9yaXplL2F1dGhTdG9yZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9zcmMvcGFnZXMvbXljai9hdXRob3JpemUvYXV0aFN0b3JlLmpzP2IyN2YiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOaOiOadg+W6l+mTuumbhuWQiFxyXG4gKiBAcGFyYW0ge2RzcH0gZHNwIGRzcCDmnI3liqFcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZSDlupfpk7rlkI1cclxuICogQHBhcmFtIHtvYmplY3R9fSBwYXJhbXMg5Y+C5pWwXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ29BdXRoU3RvcmUgPSAoZHNwLCBzdG9yZU5hbWUsIHBhcmFtcykgPT4ge1xyXG4gIGNvbnN0IHVybCA9ICdwbGF0Zm9ybS1zaG9wL2F1dGhvcml6ZS9nZXRBdXRob3JVcmwnXHJcbiAgY29uc3Qgc3RvcmVUeXBlT2JqID0ge1xyXG4gICAgJ2ViYXknOiB7IHNob3BUeXBlOiAnRUJBWScsIFN0b3JlVHlwZTogJzQnLCB1cmw6IGAke3VybH0/cGxhdGZvcm09RUJBWSZmcm9tVHlwZT0yJnNob3BOYW1lPSR7cGFyYW1zICYmIHBhcmFtcy5zaG9wTmFtZSA/IHBhcmFtcy5zaG9wTmFtZSA6ICcnfWAgfSxcclxuICAgICdMYXphZGEnOiB7IHNob3BUeXBlOiAnTEFaQURBJywgU3RvcmVUeXBlOiAnNycsIHVybDogYCR7dXJsfT9wbGF0Zm9ybT1MQVpBREEmZnJvbVR5cGU9MmAgfSxcclxuICAgICdzaG9wZWUnOiB7IHNob3BUeXBlOiAnIFNIT1BFRScsIFN0b3JlVHlwZTogJzgnLCB1cmw6IGAke3VybH0/cGxhdGZvcm09IFNIT1BFRSZmcm9tVHlwZT0yYCB9LFxyXG4gICAgJ3dpeCc6IHsgc2hvcFR5cGU6ICdXSVgnLCBTdG9yZVR5cGU6ICc2JywgdXJsOiBgJHt1cmx9P3BsYXRmb3JtPVdJWCZmcm9tVHlwZT0yYCB9LFxyXG4gICAgJ2V0c3knOiB7IHNob3BUeXBlOidFVFNZJywgU3RvcmVUeXBlOiAnMTAnLCB1cmw6IGAke3VybH0/cGxhdGZvcm09RVRTWSZmcm9tVHlwZT0yYCB9XHJcbiAgfVxyXG4gIGNvbnN0IGxvYWQgPSBsYXllci5sb2FkKDIpXHJcbiAgZHNwLmdldEZ1bihzdG9yZVR5cGVPYmpbc3RvcmVOYW1lXS51cmwsIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgIGxheWVyLmNsb3NlKGxvYWQpXHJcbiAgICBpZiAocmVzLmRhdGEuY29kZSAhPSAyMDApIHJldHVybiBsYXllci5tc2cocmVzLmRhdGEubWVzc2FnZSB8fCBcIkF1dGhvcml6YXRpb24gRmFpbGVkLlwiKVxyXG4gICAgbG9jYXRpb24uaHJlZiA9IHJlcy5kYXRhLmRhdGFcclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICog5o6I5p2DZ29BdXRoU2hpcHN0YXRpb25cclxuICogQHBhcmFtIHtkc3B9IGRzcCBkc3Ag5pyN5Yqh5rOo5YWlXHJcbiAqIEBwYXJhbSB7cGFyYW1zfSBwYXJhbXMg5o6I5p2D5Y+C5pWwXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ29BdXRoU2hpcHN0YXRpb24gPSAoZHNwLCAkc2NvcGUsIG5ld1BhcmFtcyA9IHt9KSA9PiB7XHJcblxyXG4gIGlmICghJHNjb3BlLkFQSUtleSkgcmV0dXJuIGxheWVyLm1zZyhcIlBsZWFzZSBlbnRlciBBUEkgS2V5LlwiKTtcclxuICBpZiAoISRzY29wZS5BUElTZWNyZXQpIHJldHVybiBsYXllci5tc2coXCJQbGVhc2UgZW50ZXIgQVBJIFNlY3JldC5cIik7XHJcblxyXG4gIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgIHVzZXJJZDogJHNjb3BlLnVzZXJJZCxcclxuICAgIGNvbnN1bWVyS2V5OiAkc2NvcGUuQVBJS2V5LFxyXG4gICAgY29uc3VtZXJTZWNyZXQ6ICRzY29wZS5BUElTZWNyZXQsXHJcbiAgICBwbGF0Zm9ybTogJ1NISVBTVEFUSU9OJyxcclxuICAgIGZyb21UeXBlOiAnMicsXHJcbiAgICAuLi5uZXdQYXJhbXNcclxuICB9XHJcblxyXG4gIGxldCBxdWVyeVN0ciA9IFwiXCIsIGZyaXN0RmxhZyA9IHRydWU7XHJcbiAgZm9yIChjb25zdCBrZXkgaW4gcGFyYW1zKSB7XHJcbiAgICBjb25zdCB2YWx1ZSA9IHBhcmFtc1trZXldXHJcbiAgICBxdWVyeVN0ciArPSBgJHtmcmlzdEZsYWcgPyAnPycgOiAnJid9JHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWBcclxuICAgIGZyaXN0RmxhZyA9IGZhbHNlXHJcbiAgfVxyXG5cclxuICBjb25zdCBsb2FkID0gbGF5ZXIubG9hZCgyKVxyXG4gIGRzcC5nZXRGdW4oXHJcbiAgICAncGxhdGZvcm0tc2hvcC9hdXRob3JpemUvc2F2ZVNob3AnICsgcXVlcnlTdHIsXHJcbiAgICBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICBsYXllci5jbG9zZShsb2FkKVxyXG4gICAgaWYgKHJlcy5kYXRhLmNvZGUgIT0gMjAwKSByZXR1cm4gbGF5ZXIubXNnKHJlcy5kYXRhLm1lc3NhZ2UgfHwgXCJBdXRob3JpemF0aW9uIEZhaWxlZC5cIilcclxuICAgIGxheWVyLm1zZygnQXV0aG9yaXphdGlvbiBTdWNjZXNzZnVsbHkuJylcclxuICAgIHZhciBpc0VtcG93ZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImlzRW1wb3dlclwiKTtcclxuICAgIGlmIChpc0VtcG93ZXIgPT0gXCIwXCIpIHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJpc0VtcG93ZXJcIiwgXCIxXCIpO1xyXG4gICAgfSBlbHNlIGlmIChpc0VtcG93ZXIgPT0gXCIyXCIpIHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJpc0VtcG93ZXJcIiwgXCIyXCIpO1xyXG4gICAgfVxyXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnd2VsY29tZS5odG1sP2Zyb209YXV0aG9yaXplJnJlc3VsdD0xJ1xyXG4gIH0pXHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBUUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../src/pages/mycj/authorize/authStore.js\n");

/***/ }),

/***/ "../src/pages/mycj/authorize/authorize.js":
/*!************************************************!*\
  !*** ../src/pages/mycj/authorize/authorize.js ***!
  \************************************************/
/*! exports provided: authorizeFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"authorizeFactory\", function() { return authorizeFactory; });\n/* harmony import */ var _authStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./authStore */ \"../src/pages/mycj/authorize/authStore.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nfunction authorizeFactory(angular) {\n  // 1.店铺授权模块\n  var app = angular.module(\"authorize.module\", [\"service\"]);\n  app.controller(\"authorize.ctrl\", [\"$scope\", \"$http\", \"$window\", \"$location\", \"$timeout\", \"dsp\", \"$interval\", \"$stateParams\", function ($scope, $http, $window, $location, $timeout, dsp, $interval, $stateParams) {\n    $scope.searchName = $stateParams.storeName ? $stateParams.storeName : '';\n    $scope.isInSmallPage = document.documentElement.clientHeight < 850;\n    var authorizeTypeModel = {\n      Shopify: {\n        type: \"shopify\",\n        val: \"0\"\n      },\n      Woocommerce: {\n        type: \"Woocommerce\",\n        val: \"1\"\n      },\n      Shipstation: {\n        type: \"Shipstation\",\n        val: \"2\"\n      },\n      Ebay: {\n        type: \"ebay\",\n        val: \"4\"\n      },\n      // Amazon: { type: \"amazon\", val: \"5\" },\n      Wix: {\n        type: \"wix\",\n        val: \"6\"\n      },\n      Lazada: {\n        type: \"Lazada\",\n        val: \"7\"\n      },\n      Shopee: {\n        type: \"shopee\",\n        val: \"8\"\n      },\n      API: {\n        type: \"api\",\n        val: \"9\"\n      },\n      Etsy: {\n        type: \"etsy\",\n        val: \"10\"\n      }\n    };\n    $scope.transferList = {\n      leftList: {\n        normal: 'static/image/authorize/transferLeft.svg',\n        vip: 'static/image/authorize/transferLeftVip.svg'\n      },\n      imgList: [{\n        path: 'static/image/authorize/transfer01.svg',\n        name: 'Settings',\n        vipPath: 'static/image/authorize/transferVip01.svg'\n      }, {\n        path: 'static/image/authorize/transfer02.svg',\n        name: 'Submission',\n        vipPath: 'static/image/authorize/transferVip02.svg'\n      }, {\n        path: 'static/image/authorize/transfer03.svg',\n        name: 'New Account',\n        vipPath: 'static/image/authorize/transferVip03.svg'\n      }, {\n        path: 'static/image/authorize/transfer04.svg',\n        name: 'Verification',\n        vipPath: 'static/image/authorize/transferVip04.svg'\n      }]\n    };\n    $scope.countryList = [{\n      countryCode: 'CN',\n      countryName: 'CN'\n    }]; // $scope.selectedItem = 'CN';\n\n    var base64 = new Base64();\n    var isNotErpAdmin = base64.decode(localStorage.getItem('erpoperateuser') || '') != 'admin';\n    var isFromErp = encodeURIComponent(localStorage.getItem('loginfromerp') || '') == '1';\n    $scope.fromErpNotAdmin = isNotErpAdmin && isFromErp;\n\n    $scope.getCountryList = function () {\n      dsp.getFun(\"platform-shop/country/queryCountryList?platform=AMAZON\", function (res) {\n        var data = res.data;\n\n        if (data.code === 200) {\n          $scope.countryList = data.data;\n        } else {\n          $scope.countryList = [];\n        }\n      });\n    };\n\n    $scope.getCountryList();\n    $scope.currentAuthorize = $stateParams.type ? authorizeTypeModel[$stateParams.type].type : authorizeTypeModel.Shopify.type;\n    $scope.StoreType = $stateParams.type ? authorizeTypeModel[$stateParams.type].val : authorizeTypeModel.Shopify.val;\n    $scope.navparamy = $stateParams.type || \"Shopify\";\n\n    if (!!dsp.getQueryString('code')) {\n      // 展示shopee和lazada的回调是否成功弹窗\n      var code = dsp.getQueryString('code');\n      var obj = {\n        '10000': 'Authorization Successfully.',\n        '10001': 'Authorization Failed.',\n        '10002': 'Your store has been authorized to another CJ account.',\n        '10003': 'Store name is wrong.'\n      };\n      if (!!code) layer.msg(obj[code]); // const url = \"/myCJ.html#/authorize/\" + $stateParams.type\n      // $window.location = url\n    }\n\n    dsp.setRightMinHeight();\n    $(\".store-authorize-box\").css(\"min-height\", $(window).height() * 1 - 171 + \"px\");\n    var vip = localStorage.getItem(\"vip\") == undefined ? \"\" : localStorage.getItem(\"vip\");\n\n    if (vip == \"1\") {\n      //vipFlag\n      $(\".header-nav\").addClass(\"vipFlag\");\n      $(\".mycj-left-bar\").addClass(\"vipFlag\");\n      $(\".mycj-right-wrap\").css(\"background\", \"#F0EDE7\").addClass(\"vip\");\n    } else {\n      $(\".header-nav\").removeClass(\"vipFlag\");\n      $(\".mycj-left-bar\").removeClass(\"vipFlag\");\n      $(\".mycj-right-wrap\").css(\"background\", \"#f2f3f5\").removeClass(\"vip\");\n    }\n\n    $scope.userVip = vip === '1';\n    $(\".header-nav li\").eq(4).addClass(\"active\");\n    var b = new Base64();\n    $scope.userId = b.decode($window.localStorage.getItem(\"userId\") || \"\");\n    $scope.token = b.decode($window.localStorage.getItem(\"token\") || \"\");\n    $scope.userEmail = b.decode($window.localStorage.getItem(\"email\") || \"\");\n    $scope.subAccountName = b.decode($window.localStorage.getItem('subAccountLoginName') || '') || ''; // 获取店铺列表\n\n    $scope.storeList = [];\n    $scope.noData = false;\n\n    $scope.getStoreList = function (filterObj) {\n      var getStoreData = {};\n      getStoreData.userId = $scope.userId;\n      getStoreData.token = $scope.token;\n      getStoreData.data = JSON.stringify({\n        filter: filterObj,\n        sort: \"UPDATA_DATE$DESC\"\n      });\n      dsp.postFun(\"app/shop/list\", JSON.stringify(getStoreData), function (data) {\n        var data = data.data;\n        var code = data.statusCode;\n\n        if (code != 200) {\n          $scope.noData = true;\n\n          if (code == 207) {\n            layer.msg(\"This store had been authoried to one of our users.\");\n          }\n\n          return false;\n        }\n\n        $scope.storeList = JSON.parse(data.result).root.filter(function (store) {\n          return store.type === $scope.currentAuthorize;\n        });\n        $scope.switchIdentification = JSON.parse(data.result).switchIdentification;\n        $scope.noData = $scope.storeList.length == 0;\n        $scope.transferStoreList = $scope.storeList.filter(function (v) {\n          return v.status == 1;\n        });\n      });\n    };\n\n    $scope.showDeactiStoresVal = true;\n    var _obj = {};\n\n    if ($scope.searchName) {\n      _obj = _objectSpread(_objectSpread({}, _obj), {}, {\n        SEARCH$LIKE$name: $scope.searchName\n      });\n    }\n\n    $scope.getStoreList(_objectSpread({}, _obj)); // 复制物流链接\n\n    $scope.handleCopy = function (url, ev) {\n      ev.stopPropagation();\n\n      if (url) {\n        var input = document.getElementById('copyUrl');\n        input.setAttribute('value', url);\n        input.select();\n        document.execCommand('copy');\n        layer.msg('Copied Successfully');\n      }\n    };\n\n    $scope.handleCheck = function (bool) {\n      $scope.showDeactiStoresVal = bool;\n      $scope.showDeactiStores();\n    }; // action显示下拉框\n\n\n    $scope.showAction = false;\n\n    $scope.handleActionHover = function (item) {\n      $scope.showAction = item.id;\n    };\n\n    $scope.handleActionOut = function () {\n      $scope.showAction = false;\n    };\n\n    $scope.$on('hideAction', function (d, data) {\n      $scope.handleActionOut();\n    }); // 选中所有禁用店铺\n\n    $scope.showDeactiStores = function () {\n      var obj = {};\n\n      if ($scope.searchName) {\n        obj = _objectSpread(_objectSpread({}, obj), {}, {\n          SEARCH$LIKE$name: $scope.searchName\n        });\n      }\n\n      if ($scope.showDeactiStoresVal) {\n        $scope.getStoreList(_objectSpread({}, obj));\n      } else {\n        $scope.getStoreList(_objectSpread({}, obj));\n      }\n    }; // 搜索店铺\n\n\n    $scope.searchStore = function () {\n      $scope.showDeactiStores();\n    };\n\n    $scope.showDeactiStoresVal = true; // $scope.getStoreList({})\n\n    $scope.searchStore(); // 复制物流链接\n\n    $scope.handleCopy = function (url, ev) {\n      ev.stopPropagation();\n\n      if (url) {\n        var input = document.getElementById('copyUrl');\n        input.setAttribute('value', url);\n        input.select();\n        document.execCommand('copy');\n        layer.msg('Copy Success');\n      }\n    };\n\n    $scope.handleCheck = function (bool) {\n      $scope.showDeactiStoresVal = bool;\n      $scope.showDeactiStores();\n    }; // 增加店铺\n\n\n    $scope.StoreDialog = false; // 配置物流查询链接弹窗\n\n    $scope.defaultConfigLogisticsUrl = '';\n    $scope.isVip = localStorage.getItem(\"vip\") == '1';\n    $scope.configLogisticsDialog = {\n      isShow: false,\n      link: $scope.defaultConfigLogisticsUrl,\n      itemData: null,\n      selectLink: 'https://cjpacket.com/',\n      showSelectLinkBox: false,\n      selectLinkArr: ['https://cjpacket.com/', 'https://www.17track.net/zh-en'],\n      showInoutAddNew: false,\n      showResetInfoBox: false,\n      // showResetInfo: false,\n      resetInfo: 'Are you sure to reset the tracking URL? The tracking URL is https://cjpacket.com/.',\n      // showConfigInfo: false,\n      configInfo: 'Are you sure to add the tracking URL? The tracking URL will be sent to you by email. Then, you can set the tracking URL in your store and send it to your customers to track orders. Please check the tracking URL carefully.',\n      infoText: '',\n      close: function close() {\n        $scope.configLogisticsDialog.isShow = false;\n        $scope.configLogisticsDialog.itemData = null;\n        $scope.configLogisticsDialog.showSelectLinkBox = false;\n        $scope.configLogisticsDialog.showInoutAddNew = false;\n      },\n      handleAddNew: function handleAddNew() {\n        $scope.configLogisticsDialog.showInoutAddNew = true;\n        $scope.configLogisticsDialog.link = $scope.defaultConfigLogisticsUrl;\n        $scope.configLogisticsDialog.showSelectLinkBox = false;\n      },\n      handleBack: function handleBack() {\n        $scope.configLogisticsDialog.showInoutAddNew = false;\n        $scope.configLogisticsDialog.link = $scope.configLogisticsDialog.selectLink;\n        $scope.configLogisticsDialog.showSelectLinkBox = false;\n      },\n      trackingBtnClick: function trackingBtnClick(item) {\n        if ($scope.fromErpNotAdmin) {\n          layer.msg('You cannot edit it.');\n          return;\n        }\n\n        $scope.configLogisticsDialog.itemData = item;\n\n        if (item.trackUrlTemplate && item.trackUrlTemplate !== '') {\n          $scope.configLogisticsDialog.selectLink = item.trackUrlTemplate;\n        } else {\n          $scope.configLogisticsDialog.selectLink = 'https://cjpacket.com/';\n        }\n\n        $scope.configLogisticsDialog.link = $scope.configLogisticsDialog.selectLink;\n        $scope.configLogisticsDialog.isShow = true;\n        $scope.configLogisticsDialog.showSelectLinkBox = false;\n      },\n      // showTrackingInfo: (item) => {\n      //   $scope.showTrackingInfo = item.id;\n      // },\n      // hideTrackingInfo: () => {\n      //   $scope.showTrackingInfo = null;\n      // },\n      handleSelectLink: function handleSelectLink(i) {\n        $scope.configLogisticsDialog.selectLink = $scope.configLogisticsDialog.selectLinkArr[i];\n        $scope.configLogisticsDialog.link = $scope.configLogisticsDialog.selectLink;\n        $scope.configLogisticsDialog.showSelectLinkBox = false;\n      },\n      confirm: function confirm() {\n        if (!$scope.configLogisticsDialog.link) {\n          layer.msg('URL cannot be blank');\n          return;\n        }\n\n        $scope.configLogisticsDialog.showResetInfoBox = true;\n        $scope.configLogisticsDialog.infoText = $scope.configLogisticsDialog.configInfo;\n        $scope.configLogisticsDialog.showSelectLinkBox = false;\n      },\n      handleShowResetInfo: function handleShowResetInfo() {\n        $scope.configLogisticsDialog.showResetInfoBox = true;\n        $scope.configLogisticsDialog.infoText = $scope.configLogisticsDialog.resetInfo;\n        $scope.configLogisticsDialog.showSelectLinkBox = false;\n      },\n      infoCancel: function infoCancel() {\n        $scope.configLogisticsDialog.showResetInfoBox = false;\n      },\n      infoConfirm: function infoConfirm() {\n        if ($scope.configLogisticsDialog.infoText == $scope.configLogisticsDialog.resetInfo) {\n          $scope.configLogisticsDialog.selectLink = 'https://cjpacket.com/';\n          $scope.configLogisticsDialog.link = $scope.configLogisticsDialog.selectLink;\n        }\n\n        var link = $scope.configLogisticsDialog.link;\n        var itemData = $scope.configLogisticsDialog.itemData;\n\n        if (itemData) {\n          var msgLoading = cjMessage.loading({\n            isFixed: true\n          });\n          dsp.postFun('app/shop/updateTrackurlTemplate', {\n            shopId: itemData.id,\n            trackUrlTemplate: link\n          }, function (res) {\n            msgLoading.hide();\n            var data = res.data;\n\n            if (data.statusCode != 200) {\n              layer.msg(data.message);\n              return;\n            }\n\n            layer.msg('Set Successfully');\n            $scope.configLogisticsDialog.isShow = false;\n            $scope.configLogisticsDialog.showResetInfoBox = false;\n            $scope.configLogisticsDialog.showInoutAddNew = false;\n            $scope.getStoreList({});\n          }, function (err) {\n            msgLoading.hide();\n          });\n        }\n      }\n    }; // $scope.StoreType = '1';\n    // 添加店铺\n\n    $scope.addStore = function (flag) {\n      var storeType = $scope.StoreType;\n\n      if (storeType == '6') {\n        return Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthStore\"])(dsp, 'wix');\n      } else if (storeType == '7') {\n        // 7 lazada\n        return Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthStore\"])(dsp, 'Lazada');\n      } else if (storeType == '8') {\n        return Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthStore\"])(dsp, 'shopee');\n      } else if (storeType == '10') {\n        return Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthStore\"])(dsp, 'etsy');\n      }\n\n      $scope.addStoreFlag = true;\n\n      if ($scope.StoreType != \"7\" && $scope.StoreType != \"8\" && $scope.StoreType != \"10\") {\n        $scope.StoreDialog = true;\n      } // if (flag == 'shopify') $scope.StoreType = '0';\n\n\n      $scope.linkurl = \"\";\n      $scope.SiteUrl = \"\";\n      $scope.ConsumerKey = \"\";\n      $scope.ConsumerSecret = \"\";\n      $scope.APIKey = \"\";\n      $scope.APISecret = \"\";\n      $scope.ShopName = \"\";\n      $scope.accountAmazon = \"\";\n      $scope.storein = \"\";\n      $scope.MarketplaceId = \"\";\n      $scope.sellerId = \"\";\n      $scope.mwsAuthToken = \"\";\n    };\n\n    window.onload = function () {\n      handleAddstore();\n    };\n\n    function handleAddstore() {\n      var addstore = dsp.getQueryString(\"addstore\");\n      addstore && document.getElementsByClassName(\"add-store-btn\")[0].click();\n    } // 2019-06-20 xiaoy 转移店铺\n\n\n    var sendTxt = \"Send\"; // html中对于的 !== Send 须同时修改\n\n    var timer = null; //计时器\n\n    $scope.messageBoxShow = false; //是否转移店铺界面显示\n\n    $scope.transferShow = false; //转移店铺界面显示隐藏\n    // $scope.tipNum = 0;//提示信息   //弃用\n\n    $scope.text = sendTxt; //发送验证码文本\n\n    $scope.pending = false; //提交状态\n\n    var _DEFAULT_INFO = {\n      type: '',\n      //类型： transfer 转移  suerTransfer 确认转移\n      shop: '',\n      receiveName: '',\n      //接收人邮箱\n      receiveId: '',\n      //接收人id\n      receiveEmail: '',\n      originName: '',\n      //当前用户\n      mailCode: '',\n      //验证码\n      transferShop: '',\n      //确认转移 - 转移店铺名\n      transferId: '' //确认转移 - 转移账户邮箱\n\n    };\n\n    $scope.toggleTransferStore = function (bol, type) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      //更换店铺界面显示隐藏\n      $scope.transferShow = bol;\n\n      if (!bol) {\n        $scope.info = _objectSpread({}, _DEFAULT_INFO);\n        $scope.emailError = '';\n        $scope.storeError = '';\n        $scope.mailCodeError = '';\n        $scope.text = sendTxt;\n        $interval.cancel(timer); //清楚计时器\n      } else {\n        $scope.info = _objectSpread(_objectSpread(_objectSpread({}, _DEFAULT_INFO), {}, {\n          originName: $scope.userEmail\n        }, options), {}, {\n          type: type\n        });\n      }\n    }; //获取转移信息\n\n\n    $scope.acceptTransfer = function (item) {\n      var params = {\n        shopId: item.id,\n        receivedStatus: 1\n      };\n      dsp.postFun('platform-shop/transfer/queryShopTransferRecords', params, function (_ref) {\n        var data = _ref.data;\n        var code = data.code,\n            list = data.data;\n        if (+code !== 200) return;\n\n        var _ref2 = list[0] || {},\n            transferEmail = _ref2.transferEmail,\n            shopName = _ref2.shopName,\n            shopTransferRecordId = _ref2.shopTransferRecordId;\n\n        $scope.toggleTransferStore(true, 'suerTransfer', {\n          shop: item.id,\n          transferShop: shopName,\n          originName: transferEmail,\n          transferId: shopTransferRecordId\n        });\n      }, function () {});\n    };\n\n    $scope.newAccountType = 'loginName';\n\n    $scope.newAccountTypeFun = function (e) {\n      $scope.info.receiveName = '';\n      $scope.newAccountType = e;\n      $scope.emailError = '';\n    }; //转移店铺 - 邮箱验证\n\n\n    $scope.emailVerify = function () {\n      return new Promise(function (resolve, reject) {\n        if (!$scope.info.receiveName) {\n          if ($scope.newAccountType == 'loginName') {\n            $scope.emailError = 'Please enter the new account';\n          } else {\n            $scope.emailError = 'Please enter the Email';\n          }\n\n          resolve(false);\n        } else {\n          var parmas = _defineProperty({}, $scope.newAccountType, $scope.info.receiveName);\n\n          var msgLoading = cjMessage.loading({\n            isFixed: true\n          });\n          dsp.postFun('cj/account/getByLogin', parmas, function (_ref3) {\n            var data = _ref3.data;\n            msgLoading.hide();\n            var statusCode = data.statusCode,\n                _data$result = data.result;\n            _data$result = _data$result === void 0 ? {} : _data$result;\n            var _data$result$accountI = _data$result.accountId,\n                accountId = _data$result$accountI === void 0 ? '' : _data$result$accountI,\n                accountEmail = _data$result.accountEmail,\n                accountStatus = _data$result.accountStatus;\n\n            if (statusCode == '505') {\n              $scope.emailError = 'The store cannot be transferred to the same account.';\n              return false;\n            }\n\n            if (!accountId) {\n              $scope.emailError = 'The account is not registered.';\n            } else {\n              if (+accountStatus !== 1) {\n                $scope.emailError = 'Account Blocked. Please change to another account.';\n              } else {\n                $scope.info.receiveId = accountId;\n                $scope.info.receiveEmail = accountEmail;\n                $scope.emailError = '';\n              }\n            }\n\n            resolve(!$scope.emailError);\n          }, function (data) {\n            msgLoading.hide();\n            return layer.msg('The server is busy now, please try again later.');\n          });\n        }\n      });\n    }; //转移店铺 - 店铺验证\n\n\n    $scope.storeVerify = function () {\n      return new Promise(function (resolve, reject) {\n        $scope.storeError = !$scope.info.shop ? 'Please select a store' : '';\n        resolve(!$scope.storeError);\n      });\n    }; //转移店铺 - 验证码验证\n\n\n    $scope.mailCodeVerify = function () {\n      return new Promise(function (resolve, reject) {\n        $scope.mailCodeError = !$scope.info.mailCode ? 'Please enter the verification code' : '';\n        resolve(!$scope.mailCodeError);\n      });\n    }; //转移店铺 - 提交\n\n\n    $scope.transferSubmit = function () {\n      var type = $scope.info.type;\n      type === 'transfer' ? transferConfirm() : suerTransferConfrim();\n    }; //转移店铺 - 转移 - 确认\n\n\n    function transferConfirm() {\n      Promise.all([$scope.emailVerify(), $scope.storeVerify(), $scope.mailCodeVerify()]).then(function (resolve, reject) {\n        if (resolve.filter(function (item) {\n          return item === false;\n        }).length > 0) return;\n        if ($scope.pending) return layer.msg(\"Submitting, please wait a second...\");\n        var params = {\n          receiverAccountId: $scope.info.receiveId,\n          receiverEmail: $scope.info.receiveEmail,\n          receiverLoginName: $scope.info.receiveName,\n          shopId: $scope.info.shop,\n          verifyCode: $scope.info.mailCode\n        };\n        $scope.pending = true;\n        dsp.postFun('platform-shop/transfer/transferShop', params, function (_ref4) {\n          var data = _ref4.data;\n          var code = data.code,\n              message = data.message;\n          $scope.pending = false;\n          if (+code !== 200) return layer.msg(message);\n          layer.msg('Transfer Success');\n          $scope.toggleTransferStore(false);\n          $scope.showDeactiStores();\n        }, function () {\n          $scope.pending = false;\n          dsp.cjMesFun(1);\n        });\n      });\n    } //转移店铺 - 确认转移 - 确认\n\n\n    function suerTransferConfrim() {\n      Promise.all([$scope.mailCodeVerify()]).then(function (resolve, reject) {\n        if (resolve.filter(function (item) {\n          return item === false;\n        }).length > 0) return;\n        if ($scope.pending) return layer.msg(\"Submitting, please wait a second...\");\n        var params = {\n          shopTransferId: $scope.info.transferId,\n          verifyCode: $scope.info.mailCode\n        };\n        $scope.pending = true;\n        dsp.postFun('platform-shop/transfer/transferConfirm', params, function (_ref5) {\n          var data = _ref5.data;\n          var code = data.code,\n              message = data.message;\n          $scope.pending = false;\n          if (+code !== 200) return layer.msg(message);\n          layer.msg('Transfer Success');\n          $scope.toggleTransferStore(false);\n          $scope.showDeactiStores();\n        }, function () {\n          $scope.pending = false;\n          dsp.cjMesFun(1);\n        });\n      });\n    } //转移店铺 - 发送验证码\n\n\n    $scope.getEmailCode = function () {\n      var type = $scope.info.type;\n      type === 'transfer' ? sendEmailByTransfer() : sendMailCodeImpl();\n    }; //转移店铺 - 转移 - 发送验证码\n\n\n    function sendEmailByTransfer() {\n      Promise.all([$scope.emailVerify(), $scope.storeVerify()]).then(function (resolve, reject) {\n        if (resolve.filter(function (item) {\n          return item === false;\n        }).length > 0) return;\n        sendMailCodeImpl();\n      });\n    } //转移店铺 - 接收转移 - 发送验证码\n\n\n    function sendMailCodeImpl() {\n      if ($scope.text !== 'Send') return;\n      var _$scope$info = $scope.info,\n          type = _$scope$info.type,\n          shop = _$scope$info.shop;\n      var params = {\n        shopId: shop,\n        type: type === 'transfer' ? 'SHOP_TRANSFER' : 'SHOP_TRANSFER_CONFIRM'\n      };\n\n      if (type === 'transfer') {\n        params.receiverLoginName = $scope.info.receiveName;\n      }\n\n      if (type === 'suerTransfer') {\n        params.shopTransferRecordId = $scope.info.transferId;\n      }\n\n      setTime();\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      dsp.postFun('platform-shop/transfer/sendVerifyCode', params, function (_ref6) {\n        var data = _ref6.data;\n        msgLoading.hide();\n        var code = data.code,\n            message = data.message;\n\n        if (+code !== 200) {\n          clearTime();\n          layer.msg(message);\n          return;\n        }\n\n        layer.msg('The verification code was sent successfully. Please check your email. The code will expire in 10 minutes');\n      }, function () {\n        clearTime();\n        msgLoading.hide();\n        dsp.cjMesFun(1);\n      });\n    }\n\n    function setTime(wait) {\n      wait = wait || 60;\n      $scope.text = wait;\n      timer = $interval(function () {\n        wait--;\n        $scope.text = wait;\n\n        if (wait === 0) {\n          $interval.cancel(timer);\n          $scope.text = sendTxt;\n        }\n      }, 1000);\n    }\n\n    function clearTime() {\n      $interval.cancel(timer);\n      $scope.text = sendTxt;\n    }\n\n    $scope.transferBox = function () {\n      //授权按钮  => 转移店铺\n      this.messageBoxShow = false;\n      this.transferShow = true;\n    }; // ---------------------------------------------- 18-11-02-add 控制店铺显示【backend:tyy】\n\n\n    var login_name = new Base64().decode(window.localStorage.loginName || \"\");\n    $scope.brightpearl_show = login_name === \"trafilea\" ? true : login_name === \"anan\" ? true : false; // ----------------------------------------------\n\n    $scope.ShopifySub = function () {\n      // 添加店铺\n      var type;\n\n      if ($scope.StoreType == \"0\") {\n        type = \"shopify\";\n      } else if ($scope.StoreType == \"1\") {\n        type = \"Woocommerce\";\n      } else if ($scope.StoreType == \"2\") {\n        type = \"shipstation\";\n      } else if ($scope.StoreType == \"3\") {\n        // 18-10-15-add 增加店鋪类型【backend:tyy】\n        type = \"brightpearl\";\n      } else if ($scope.StoreType == \"4\") {\n        // 18-10-15-add 增加店鋪类型【backend:tyy】\n        type = \"ebay\";\n      } else if ($scope.StoreType == \"6\") {\n        type = \"wix\";\n      } else if ($scope.StoreType == \"7\") {\n        // 19-8-6-add 增加店鋪类型\n        type = \"Lazada\";\n      } else if ($scope.StoreType == \"8\") {\n        // 19-8-28-add 增加店鋪类型\n        type = \"shopee\";\n      }\n\n      if (type == \"shopify\") {\n        if (!$scope.linkurl) {\n          layer.msg(\"Please input store link here.\");\n        } // else if(!$scope.apiPassword){\n        //     layer.msg('Please input API Password here.');\n        // }\n        else {\n            if ($scope.linkurl.indexOf(\"https://\") != -1 || $scope.linkurl.indexOf(\"http://\") != -1) {\n              layer.msg('Store ID only, no \"https://\" or \"http://\".');\n            } else {\n              if ($scope.linkurl.endsWith(\".myshopify.com\")) {\n                $scope.linkurl = $scope.linkurl.replace(/.myshopify.com/i, \"\");\n              }\n\n              var msgLoading = cjMessage.loading({\n                isFixed: true\n              });\n              dsp.getFun(\"platform-shop/authorize/getAuthorUrl?fromType=2&shopName=\".concat($scope.linkurl, \"&platform=SHOPIFY\"), function (data) {\n                msgLoading.hide();\n                var data = data.data;\n                var code = data.code;\n\n                if (code != 200) {\n                  if (code === 10007) {\n                    // 此状态 1. 显示授权弹框   2. 关闭当前弹框\n                    $scope.StoreDialog = false; // 2. 关闭当前弹框\n\n                    layer.alert(\"The store already exists, the bound mailbox is:\" + data.message + \", if it is your email, please log in with this email account.\", {\n                      btn: \"OK, I got it.\",\n                      title: \"\",\n                      skin: \"auth-btn\",\n                      btnAlign: \"c\"\n                    }); // $scope.messageBoxShow = true;//1. 显示授权弹框\n                  } else {\n                    dsp.cjMesFun(1);\n                  }\n\n                  return false;\n                }\n\n                $window.location = data.data;\n              }, function () {\n                msgLoading.hide();\n              });\n            }\n          }\n      } else if (type == \"Woocommerce\") {\n        if (!$scope.SiteUrl) {\n          return layer.msg(\"Please enter Site Url.\");\n        } else if (!$scope.ConsumerKey) {\n          return layer.msg(\"Please enter Seller Id.\");\n        } else if (!$scope.ConsumerSecret) {\n          return layer.msg(\"Please enter MWS Auth Token.\");\n        } else {\n          if ($scope.SiteUrl.indexOf(\"https://\") != -1 || $scope.SiteUrl.indexOf(\"http://\") != -1) {\n            // 不允许填写https或者http\n            return layer.msg('Store ID only, no \"https://\" or \"http://\".');\n          } else {\n            // dsp.load();\n            layer.load(2); // var addStoreData = {};\n            // addStoreData.userId = $scope.userId;\n            // addStoreData.token = $scope.token;\n            // addStoreData.data = JSON.stringify({\n            //   name: $scope.SiteUrl,\n            //   type: type,\n            //   consumerKey: $scope.ConsumerKey,\n            //   consumerSecret: $scope.ConsumerSecret\n            // });\n\n            var params = {\n              userId: $scope.userId,\n              consumerKey: $scope.ConsumerKey,\n              consumerSecret: $scope.ConsumerSecret,\n              platform: 'WOOCOMMERCE',\n              fromType: '2',\n              shopName: $scope.SiteUrl\n            };\n            var queryStr = \"\",\n                fristFlag = true;\n\n            for (var key in params) {\n              var value = params[key];\n              queryStr += \"\".concat(fristFlag ? '?' : '&').concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(value));\n              fristFlag = false;\n            }\n\n            dsp.getFun(\"platform-shop/authorize/saveShop\" + queryStr, function (data) {\n              dsp.closeLoad();\n              var data = data.data;\n              var code = data.code;\n\n              if (code == 200) {\n                // layer.msg(\"Authorization Successfully.\");\n                // $scope.StoreDialog = false;\n                window.location.href = 'welcome.html?from=authorize&result=1';\n              } else if (code == 10013) {\n                layer.msg(data.message, {\n                  time: 3000\n                }, function () {\n                  $timeout(function () {\n                    $scope.notShowOAuth = false;\n                  });\n                });\n              } else {\n                layer.msg(data.message);\n              } // 跳转到返回的网址\n              // $window.location = data.result;\n\n            });\n          }\n        }\n      } else if (type == \"shipstation\") {\n        Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthShipstation\"])(dsp, $scope);\n      } else if (type == \"brightpearl\") {\n        // 18-10-15-add 增加店鋪类型【backend:tyy】\n        if (!$scope.brightpearl_app_ref) {\n          return layer.msg(\"Please brightpearl-app-ref.\");\n        } else if (!$scope.account) {\n          return layer.msg(\"Please account.\");\n        } else if (!$scope.brightpearl_account_token) {\n          return layer.msg(\"Please brightpearl-account-token.\");\n        } else {\n          var addStoreData = {};\n          addStoreData.userId = $scope.userId;\n          addStoreData.token = $scope.token;\n          addStoreData.data = JSON.stringify({\n            type: type,\n            account: $scope.account,\n            consumerkey: $scope.brightpearl_app_ref,\n            consumerSecret: $scope.brightpearl_account_token\n          }); // dsp.load();\n\n          layer.load(2);\n          dsp.postFun(\"app/shop/addBrightpearl\", JSON.stringify(addStoreData), function (data) {\n            // dsp.closeLoad();\n            layer.closeAll(\"loading\");\n            var data = data.data;\n            var code = data.statusCode;\n\n            if (code == 200) {\n              layer.msg(\"Authorization Successfully.\");\n              var isEmpower = localStorage.getItem(\"isEmpower\");\n\n              if (isEmpower == \"0\") {\n                localStorage.setItem(\"isEmpower\", \"1\");\n              } else if (isEmpower == \"2\") {\n                localStorage.setItem(\"isEmpower\", \"2\");\n              }\n\n              location.href = \"#/myCJAssociatedStore\";\n              $scope.StoreDialog = false;\n              $scope.addStoreFlag = false;\n            } else {\n              layer.msg(\"Authorization Failed.\");\n            } // 跳转到返回的网址\n            // $window.location = data.result;\n\n          });\n        }\n      } else if (type == \"ebay\") {\n        if (!$scope.ebaylinkurl) {\n          layer.msg(\"Please input store link here.\");\n          return;\n        }\n\n        Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthStore\"])(dsp, type, {\n          shopName: $scope.ebaylinkurl\n        });\n      } else if (type == \"wix\") {\n        if (!$scope.wixName) {\n          layer.msg(\"Please enter Store URL.\");\n          return;\n        }\n\n        if ($scope.wixName.indexOf(\"https://\") == -1 && $scope.wixName.indexOf(\"http://\") == -1) {\n          layer.msg(\"Please enter a URL starting with http:// or https://\");\n          return;\n        }\n\n        layer.load(2);\n        var addWixData = {};\n        addWixData.userId = $scope.userId;\n        addWixData.token = $scope.token;\n        addWixData.data = JSON.stringify({\n          type: \"wix\",\n          wixName: $scope.wixName\n        });\n        dsp.postFun(\"app/shop/addWix\", JSON.stringify(addWixData), function (data) {\n          layer.closeAll(\"loading\");\n\n          if (data.data.statusCode != 200) {} // 跳转到返回的网址\n\n\n          $window.location = data.data.result;\n        });\n      }\n    }; // 添加Amazon\n\n\n    $scope.amazonSub = function () {\n      if (!$scope.shopName) {\n        layer.msg(\"Please enter Store name.\");\n        return;\n      }\n\n      if (!$scope.country) {\n        layer.msg(\"Please enter Country.\");\n        return;\n      }\n\n      if (!$scope.consumerKey) {\n        layer.msg(\"Please enter Seller Id.\");\n        return;\n      }\n\n      if (!$scope.consumerSecret) {\n        layer.msg(\"Please enter MWS Auth Token.\");\n        return;\n      }\n\n      var params = {\n        shopName: $scope.shopName,\n        country: $scope.country,\n        consumerKey: $scope.consumerKey,\n        consumerSecret: $scope.consumerSecret\n      };\n      layer.load(2);\n      dsp.getFun(\"platform-shop/authorize/saveShop?platform=AMAZON&shopName=\".concat($scope.shopName, \"&country=\").concat($scope.country, \"&consumerKey=\").concat($scope.consumerKey, \"&consumerSecret=\").concat($scope.consumerSecret), function (data) {\n        if (data.data.code === 200) {\n          window.location.href = 'welcome.html?from=authorize&result=1';\n        } else if (data.data.statusCode == \"209\") {\n          layer.msg(\"Authorization Failed.\");\n        }\n\n        layer.closeAll(\"loading\");\n      });\n    };\n    /* 用于邮箱验证的函数 */\n\n\n    function validateEmail(email) {\n      // 邮箱验证正则\n      var reg = /^[A-Za-z0-9]+([_\\.][A-Za-z0-9]+)*@([A-Za-z0-9\\-]+\\.)+[A-Za-z]{2,6}$/;\n      return reg.test(email);\n    }\n\n    $scope.ShopifyUpdate = function () {\n      // 重新授权店铺\n      var type;\n\n      if ($scope.StoreType == \"0\") {\n        type = \"shopify\";\n      } else if ($scope.StoreType == \"1\") {\n        type = \"Woocommerce\";\n      } else if ($scope.StoreType == \"2\") {\n        type = \"shipstation\";\n      } else if ($scope.StoreType == \"3\") {\n        // 18-10-15-add 增加店鋪类型【backend:tyy】\n        type = \"brightpearl\";\n      } else if ($scope.StoreType == \"4\") {\n        // 18-10-15-add 增加店鋪类型【backend:tyy】\n        type = \"ebay\";\n      }\n\n      if (type == \"shopify\") {\n        if (!$scope.linkurl) {\n          layer.msg(\"Please input store link here.\");\n        } // else if(!$scope.apiPassword){\n        //     layer.msg('Please input API Password here.');\n        // }\n        else {\n            if ($scope.linkurl.indexOf(\"https://\") != -1 || $scope.linkurl.indexOf(\"http://\") != -1) {\n              layer.msg('Store ID only, no \"https://\" or \"http://\".');\n            } else {\n              var msgLoading = cjMessage.loading({\n                isFixed: true\n              });\n              dsp.getFun(\"platform-shop/authorize/getAuthorUrl?fromType=2&shopName=\".concat($scope.linkurl, \"&platform=SHOPIFY\"), function (data) {\n                msgLoading.hide();\n                var data = data.data;\n                var code = data.code;\n\n                if (code != 200) {\n                  if (code === 10007) {\n                    // 此状态 1. 显示授权弹框   2. 关闭当前弹框\n                    $scope.StoreDialog = false; // 2. 关闭当前弹框\n\n                    layer.alert(\"The store already exists, the bound mailbox is:\" + data.message + \", if it is your email, please log in with this email account.\", {\n                      btn: \"OK,I got it.\",\n                      title: \"\",\n                      skin: \"auth-btn\",\n                      btnAlign: \"c\"\n                    }); // $scope.messageBoxShow = true;//1. 显示授权弹框\n                  } else {\n                    dsp.cjMesFun(1);\n                  }\n\n                  return false;\n                }\n\n                $window.location = data.data;\n              }, function () {\n                msgLoading.hide();\n              }); // dsp.postFun(\n              //   \"app/shop/update\",\n              //   JSON.stringify(reAddStoreData),\n              //   function(data) {\n              //     layer.closeAll(\"loading\");\n              //     var data = data.data;\n              //     var code = data.statusCode;\n              //     if (code != 200) {\n              //       layer.msg(\n              //         \"The server is busy now, please try again later.\"\n              //       );\n              //       return false;\n              //     }\n              //     // 跳转到返回的网址\n              //     $window.location = data.result;\n              //   },\n              //   function() {\n              //     layer.closeAll(\"loading\");\n              //     layer.msg(\"The server is busy now, please try again later.\");\n              //   }\n              // );\n            }\n          }\n      }\n\n      if (type == \"ebay\") {\n        if (!$scope.ebaylinkurl) {\n          layer.msg(\"Please input store link here.\");\n          return;\n        }\n\n        Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthStore\"])(dsp, type, {\n          shopName: $scope.ebaylinkurl\n        });\n      }\n\n      if (type == \"Woocommerce\") {\n        if (!$scope.SiteUrl) {\n          layer.msg(\"Please enter Site Url.\");\n        } else if (!$scope.ConsumerKey) {\n          layer.msg(\"Please enter Seller Id.\");\n        } else if (!$scope.ConsumerSecret) {\n          layer.msg(\"Please enter MWS Auth Token.\");\n        } else {\n          if ($scope.SiteUrl.indexOf(\"https://\") != -1 || $scope.SiteUrl.indexOf(\"http://\") != -1) {\n            layer.msg('Store ID only, no \"https://\" or \"http://\".');\n          } else {\n            layer.load(2); // var addStoreData = {};\n            // addStoreData.userId = $scope.userId;\n            // addStoreData.token = $scope.token;\n            // addStoreData.data = JSON.stringify({\n            //   name: $scope.SiteUrl,\n            //   type: type,\n            //   consumerKey: $scope.ConsumerKey,\n            //   consumerSecret: $scope.ConsumerSecret\n            // });\n\n            var params = {\n              userId: $scope.userId,\n              consumerKey: $scope.ConsumerKey,\n              consumerSecret: $scope.ConsumerSecret,\n              platform: 'WOOCOMMERCE',\n              fromType: '2',\n              shopName: $scope.SiteUrl\n            };\n            var queryStr = \"\",\n                fristFlag = true;\n\n            for (var key in params) {\n              var value = params[key];\n              queryStr += \"\".concat(fristFlag ? '?' : '&').concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(value));\n              fristFlag = false;\n            }\n\n            dsp.getFun(\"platform-shop/authorize/saveShop\" + queryStr, function (data) {\n              dsp.closeLoad();\n              var data = data.data;\n              var code = data.code;\n\n              if (code == 200) {\n                window.location.href = 'welcome.html?from=authorize&result=1';\n              } else {\n                layer.msg(data.message);\n              }\n            });\n          }\n        }\n      }\n\n      if (type == \"shipstation\") {\n        Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthShipstation\"])(dsp, $scope, {\n          shopName: updateItem.name\n        });\n      }\n    }; // 禁用店铺\n\n\n    $scope.operateStore = function (storeId, opeStatue, scb) {\n      var deactStoreData = {};\n      deactStoreData.userId = $scope.userId;\n      deactStoreData.token = $scope.token;\n      deactStoreData.data = JSON.stringify({\n        id: storeId,\n        status: opeStatue\n      });\n      dsp.postFun(\"app/shop/startstop\", JSON.stringify(deactStoreData), function (data) {\n        var data = data.data;\n        var code = data.statusCode;\n\n        if (code != 200) {\n          layer.msg(\"The server is busy now, please try again later.\");\n          return false;\n        }\n\n        scb();\n      }, function () {\n        layer.msg(\"The server is busy now, please try again later.\");\n      });\n    };\n\n    $scope.popConfirmType = '';\n    $scope.storeId = '';\n\n    $scope.deactivate = function (storeId) {\n      $scope.popConfirmType = 'deactivate';\n      $scope.content = 'Are you sure to deactivate the connection ?';\n      $scope.showPopUps = true;\n      $scope.storeId = storeId;\n    }; // 启用店铺\n\n\n    $scope.activate = function (storeId) {\n      $scope.operateStore(storeId, 1, function () {\n        layer.msg(\"Activated\", {\n          time: 1000\n        }, function () {\n          //$window.location = 'myCJ.html#/authorize';\n          $window.location.reload();\n        });\n      });\n    }; // 重新授权\n\n\n    var updateItem;\n\n    $scope.reauthorize = function (item) {\n      updateItem = item;\n      $scope.updateStoreFlag = true; // $scope.StoreDialog = true;\n\n      if (item.type == \"shopify\") {\n        $scope.StoreType = \"0\";\n      } else if (item.type == \"Woocommerce\") {\n        $scope.StoreType = \"1\";\n      } else if (item.type == \"Shipstation\") {\n        $scope.StoreType = \"2\";\n      } else if (item.type == \"brightpearl\") {\n        // 18-10-15-add 增加店鋪类型【backend:tyy】\n        $scope.StoreType = \"3\";\n      } else if (item.type == \"ebay\") {\n        // 18-10-15-add 增加店鋪类型【backend:tyy】\n        $scope.StoreType = \"4\";\n      } else if (item.type === \"amazon\") {\n        $scope.StoreType = \"5\";\n      } else if (item.type === \"wix\") {\n        $scope.StoreType = \"6\";\n        return Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthStore\"])(dsp, item.type); // $scope.wixName = item.name\n      } else if (item.type === 'Lazada') {\n        $scope.StoreType = \"7\";\n        return Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthStore\"])(dsp, item.type);\n      } else if (item.type === 'shopee') {\n        $scope.StoreType = \"8\";\n        return Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthStore\"])(dsp, item.type);\n      } else if (item.type === 'etsy') {\n        $scope.StoreType = '10';\n        return Object(_authStore__WEBPACK_IMPORTED_MODULE_0__[\"goAuthStore\"])(dsp, item.type);\n      }\n\n      if ($scope.StoreType != \"7\" && $scope.StoreType != \"8\") {\n        $scope.StoreDialog = true;\n      } // $scope.StoreType = item.type;\n\n\n      $scope.linkurl = item.name;\n      $scope.SiteUrl = item.name;\n      $scope.ebaylinkurl = item.name;\n      $scope.ConsumerKey = item.consumerkey;\n      $scope.ConsumerSecret = item.consumerSecret;\n      $scope.APIKey = item.consumerkey;\n      $scope.APISecret = item.consumerSecret;\n    }; // $scope.addPODFail = true;\n\n\n    var addPODItem;\n\n    $scope.addPODFeature = function (item) {\n      if ($scope.fromErpNotAdmin) {\n        layer.msg('You cannot edit it.');\n        return;\n      }\n\n      addPODItem = item; // layer.load(2);\n\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      dsp.postFun(\"app/shop/upShopIndividuationNum\", {\n        ID: item.id\n      }, function (data) {\n        // layer.closeAll(\"loading\");\n        msgLoading.hide();\n        var data = data.data;\n\n        if (data.statusCode != 200) {\n          // layer.msg('Added failed');\n          $scope.addPODFail = true;\n        } else {\n          layer.msg(\"Added successfully\");\n          $scope.storeList = [];\n          $scope.getStoreList({});\n        }\n      }, function () {\n        msgLoading.hide();\n      });\n    };\n\n    $scope.ReauthAfterAddFail = function () {\n      var reAddStoreData = {};\n      reAddStoreData.userId = $scope.userId;\n      reAddStoreData.token = $scope.token;\n      reAddStoreData.data = JSON.stringify({\n        id: addPODItem.id,\n        name: addPODItem.name,\n        type: addPODItem.type\n      });\n      layer.load(2);\n      dsp.postFun(\"app/shop/update\", JSON.stringify(reAddStoreData), function (data) {\n        layer.closeAll(\"loading\");\n        var data = data.data;\n        var code = data.statusCode;\n\n        if (code != 200) {\n          layer.msg(\"The server is busy now, please try again later.\");\n          return false;\n        } // 跳转到返回的网址\n\n\n        $window.location = data.result;\n      }, function () {\n        layer.closeAll(\"loading\");\n        layer.msg(\"The server is busy now, please try again later.\");\n      });\n    };\n\n    $scope.removePODFeature = function (item) {\n      if ($scope.fromErpNotAdmin) {\n        layer.msg('You cannot edit it.');\n        return;\n      }\n\n      var msgLoading = cjMessage.loading({\n        isFixed: true\n      });\n      dsp.postFun(\"app/shop/delectShopIndividuationNum\", {\n        ID: item.id\n      }, function (data) {\n        msgLoading.hide();\n        var data = data.data;\n\n        if (data.statusCode != 200) {\n          layer.msg(\"Remove failed\");\n        } else {\n          layer.msg(\"Remove successfully\");\n          $scope.storeList = [];\n          $scope.getStoreList({});\n        }\n      }, function () {\n        msgLoading.hide();\n      });\n    };\n\n    var updateStore;\n\n    $scope.updatePODFeature = function (item) {\n      if ($scope.fromErpNotAdmin) {\n        layer.msg('You cannot edit it.');\n        return;\n      }\n\n      $scope.updatePODTan = true;\n      updateStore = item;\n    };\n\n    $scope.goUpdatePOD = function () {\n      var reAddStoreData = {};\n      reAddStoreData.userId = $scope.userId;\n      reAddStoreData.token = $scope.token;\n      reAddStoreData.data = JSON.stringify({\n        noWriteThemes: \"1\",\n        id: updateStore.id,\n        name: updateStore.name,\n        type: updateStore.type\n      });\n      layer.load(2);\n      dsp.postFun(\"app/shop/update\", JSON.stringify(reAddStoreData), function (data) {\n        layer.closeAll(\"loading\");\n        var data = data.data;\n        var code = data.statusCode;\n\n        if (code != 200) {\n          layer.msg(\"The server is busy now, please try again later.\");\n          return false;\n        } // 跳转到返回的网址\n\n\n        $window.location = data.result;\n      });\n    };\n\n    $scope.podSetting = function (item) {\n      if (item.status != 1) return false;\n\n      if ($scope.fromErpNotAdmin) {\n        layer.msg('You cannot edit it.');\n        return;\n      }\n\n      $scope.$broadcast(\"showpodsetting\", item);\n    };\n\n    $scope.$on(\"podsetting-succ\", function (event, data) {\n      if (data) {\n        $scope.storeList = [];\n        $scope.getStoreList({});\n      }\n    });\n\n    $scope.handleStoreLogistics = function (item) {\n      $scope.$broadcast('showStoreLogistics', {\n        iteminfo: item\n      });\n    }; // 物流映射设置\n\n\n    $scope.handleShowShipping = function (item) {\n      // ERP端开启了用户物流映射设置的权限，才会展示这个入口\n      $scope.$broadcast(\"showLogisticsSettings\", item);\n    };\n    /* 头部菜单进入埋点 */\n\n\n    function trackFun() {\n      dsp.postFun(\"pojo/home/addStatisByType\", {\n        entryPage: +dsp.getQueryString(\"track\")\n      }, function (res) {\n        console.log(res.data);\n      });\n    }\n\n    if (+dsp.getQueryString(\"track\") == 1) {\n      trackFun();\n      location.href = \"#/authorize/Shopify\";\n    }\n\n    $scope.changeAliasName = function (index) {\n      $scope.isChangeCurrentIndex = index;\n    };\n\n    $scope.upateAliasName = function (item) {\n      var data = {\n        aliasName: item.aliasName,\n        shopId: item.id\n      };\n      layer.load(2);\n      dsp.postFun(\"app/shop/updateShopAliasName\", data, function (res) {\n        layer.closeAll(\"loading\");\n        var data = res.data;\n        var code = data.statusCode;\n\n        if (code === 200) {\n          $scope.showDeactiStores();\n        }\n\n        if (code != 200) {\n          layer.msg(\"修改店铺昵称失败.\");\n          return false;\n        }\n\n        $scope.isChangeCurrentIndex = undefined;\n      });\n    };\n\n    $scope.dropDown = function (item, fileds) {\n      if (fileds == 'podShow' && item.status != 1) return false;\n      event.stopPropagation();\n      $scope.storeList = $scope.storeList.map(function (o) {\n        return _objectSpread(_objectSpread({}, o), {}, _defineProperty({\n          authorizeShow: false,\n          syncShow: false,\n          emlShow: false,\n          podShow: false,\n          logisticsShow: false\n        }, fileds, o[fileds] ? false : o.id === item.id));\n      });\n    };\n\n    function initConfirmBox(_ref7) {\n      var content = _ref7.content,\n          cb = _ref7.cb;\n      $scope.confirmBox = {\n        showFlag: true,\n        confirm: function confirm() {\n          cb && cb();\n          this.showFlag = false;\n        },\n        cancel: function cancel() {\n          this.showFlag = false;\n        },\n        content: content\n      };\n    }\n\n    $scope.content = 'Are you sure to enable inventory sync? CJ will continue to manage the inventory for products fulfilled by CJ.';\n    $scope.showPopUps = false;\n    var disabledId = '';\n    var syncInventory = '';\n\n    $scope.enableStockSync = function (item) {\n      if (item.syncInventory == 0) {\n        $scope.content = \"Are you sure to enable inventory sync? CJ will continue to manage the inventory for products fulfilled by CJ.\";\n        syncInventory = '1';\n      } else if (item.syncInventory == 1) {\n        $scope.content = \"Are you sure to disable inventory sync? The inventory of the connected products will be managed by yourself, but products cannot be shipped when there is a inventory shortage.\";\n        syncInventory = '0';\n      }\n\n      $scope.popConfirmType = 'enableStockSync';\n      $scope.showPopUps = true;\n      disabledId = item.id;\n    }; // 获取弹窗组件关闭按钮\n\n\n    $scope.$on('closePopUps', function (e, d) {\n      $scope.showPopUps = false;\n    }); // 获取弹窗组件确定按钮\n\n    $scope.$on('confirmPopUps', function (e, d) {\n      if ($scope.popConfirmType == 'enableStockSync') {\n        enableStockSyncFun();\n      } else if ($scope.popConfirmType == 'deactivate') {\n        deactivateFun();\n      }\n    });\n\n    function enableStockSyncFun() {\n      dsp.postFun('app/shop/synchronizeInventory', {\n        shopId: disabledId,\n        syncInventory: syncInventory\n      }, function (res) {\n        layer.closeAll(\"loading\");\n        var data = res.data;\n\n        if (data.statusCode != 200) {\n          layer.msg('Sorry, there was an unknown error. Inventory sync failed. Please try it again.');\n          return;\n        }\n\n        layer.msg('success');\n        $scope.showPopUps = false;\n        $scope.getStoreList({});\n      });\n    }\n\n    function deactivateFun() {\n      $scope.operateStore($scope.storeId, 2, function () {\n        layer.msg(\"Deactivated\", {\n          time: 1000\n        }, function () {\n          layer.close(2);\n          $scope.showPopUps = false;\n          $window.location.reload();\n        });\n      });\n    } // 是否开启更新商店发送邮件提示\n\n\n    $scope.updateEmailNotification = function (filterObj) {\n      var params = {\n        shopId: filterObj.id,\n        emailNotification: filterObj.emailNotification == 1 ? 0 : 1\n      };\n      dsp.postFun(\"app/shop/updateEmailNotification\", params, function (data) {\n        var data = data.data;\n\n        if (data.statusCode != 200) {\n          initConfirmBox({\n            content: \"Sorry, there was an unknown error. Please try it again.\"\n          });\n          return;\n        }\n\n        layer.msg('success');\n        $scope.getStoreList({});\n      });\n    }; //Woocommerce Oauth授权方式\n\n\n    $scope.ClientKey = '';\n    $scope.ClientSecret = '';\n    $scope.ErifierCode = '';\n    $scope.notShowOAuth = true;\n    $scope.isShowNext = false;\n\n    $scope.isDisplay = function () {\n      $scope.notShowOAuth = true;\n    };\n\n    $scope.notDisplay = function () {\n      $scope.notShowOAuth = false;\n    };\n\n    $scope.limitClientKey = function () {\n      if ($scope.ClientKey.length > 199) {\n        return layer.msg(\"You can enter 200 characters at most.\");\n      }\n    };\n\n    $scope.limitClientSecret = function () {\n      if ($scope.ClientSecret.length > 199) {\n        return layer.msg(\"You can enter 200 characters at most.\");\n      }\n    };\n\n    $scope.limitErifierCode = function () {\n      if ($scope.ErifierCode.length > 199) {\n        return layer.msg(\"You can enter 200 characters at most.\");\n      }\n    };\n\n    $scope.goBack = function () {\n      $scope.isShowNext = false;\n    };\n\n    $scope.nextStep = function () {\n      if (!$scope.SiteUrl) {\n        return layer.msg(\"Please enter Site Url.\");\n      } else if (!$scope.ClientKey) {\n        return layer.msg(\"Please enter Client Key.\");\n      } else if (!$scope.ClientSecret) {\n        return layer.msg(\"Please enter Client Secret.\");\n      } else if ( // 不允许填写https或者http\n      $scope.SiteUrl.indexOf(\"https://\") != -1 || $scope.SiteUrl.indexOf(\"http://\") != -1) {\n        return layer.msg('Store ID only, no \"https://\" or \"http://\".');\n      } else {\n        dsp.getFun(\"platform-shop/authorize/getAuthorUrl?fromType=2&consumerKey=\".concat($scope.ClientKey, \"&consumerSecret=\").concat($scope.ClientSecret, \"&shopName=\").concat($scope.SiteUrl, \"&platform=WOOCOMMERCE\"), function (data) {\n          if (data.data.code === 200) {\n            $scope.isShowNext = true;\n            window.open(data.data.data);\n          } else {\n            layer.msg(data.data.message);\n          }\n        });\n      }\n    };\n\n    $scope.oauthSub = function () {\n      if (!$scope.ErifierCode) {\n        document.getElementById(\"erifierCode\").setAttribute('style', 'border-color: red');\n        return layer.msg(\"Please enter Erifier code.\");\n      } else {\n        document.getElementById(\"erifierCode\").removeAttribute('style');\n        dsp.getFun(\"platform-shop/authorize/saveShop?platform=WOOCOMMERCE&consumerKey=\".concat($scope.ClientKey, \"&consumerSecret=\").concat($scope.ClientSecret, \"&shopName=\").concat($scope.SiteUrl, \"&verifier=\").concat($scope.ErifierCode), function (data) {\n          if (data.data.code === 200) {\n            window.location.href = 'welcome.html?from=authorize&result=1';\n          } else {\n            layer.msg(data.data.message);\n          }\n        });\n      }\n    };\n  }]);\n  return app;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc3JjL3BhZ2VzL215Y2ovYXV0aG9yaXplL2F1dGhvcml6ZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9zcmMvcGFnZXMvbXljai9hdXRob3JpemUvYXV0aG9yaXplLmpzPzc2YjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ29BdXRoU3RvcmUsIGdvQXV0aFNoaXBzdGF0aW9uIH0gZnJvbSAnLi9hdXRoU3RvcmUnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXV0aG9yaXplRmFjdG9yeShhbmd1bGFyKSB7XHJcbiAgLy8gMS7lupfpk7rmjojmnYPmqKHlnZdcclxuICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhdXRob3JpemUubW9kdWxlXCIsIFtcInNlcnZpY2VcIl0pO1xyXG4gIGFwcC5jb250cm9sbGVyKFwiYXV0aG9yaXplLmN0cmxcIiwgW1xyXG4gICAgXCIkc2NvcGVcIixcclxuICAgIFwiJGh0dHBcIixcclxuICAgIFwiJHdpbmRvd1wiLFxyXG4gICAgXCIkbG9jYXRpb25cIixcclxuICAgIFwiJHRpbWVvdXRcIixcclxuICAgIFwiZHNwXCIsXHJcbiAgICBcIiRpbnRlcnZhbFwiLFxyXG4gICAgXCIkc3RhdGVQYXJhbXNcIixcclxuICAgIGZ1bmN0aW9uKFxyXG4gICAgICAkc2NvcGUsXHJcbiAgICAgICRodHRwLFxyXG4gICAgICAkd2luZG93LFxyXG4gICAgICAkbG9jYXRpb24sXHJcbiAgICAgICR0aW1lb3V0LFxyXG4gICAgICBkc3AsXHJcbiAgICAgICRpbnRlcnZhbCxcclxuICAgICAgJHN0YXRlUGFyYW1zXHJcbiAgICApIHtcclxuICAgICAgJHNjb3BlLnNlYXJjaE5hbWUgPSAkc3RhdGVQYXJhbXMuc3RvcmVOYW1lID8gJHN0YXRlUGFyYW1zLnN0b3JlTmFtZSA6ICcnO1xyXG4gICAgICAkc2NvcGUuaXNJblNtYWxsUGFnZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgPCA4NTBcclxuICAgICAgY29uc3QgYXV0aG9yaXplVHlwZU1vZGVsID0ge1xyXG4gICAgICAgIFNob3BpZnk6IHsgdHlwZTogXCJzaG9waWZ5XCIsIHZhbDogXCIwXCIgfSxcclxuICAgICAgICBXb29jb21tZXJjZTogeyB0eXBlOiBcIldvb2NvbW1lcmNlXCIsIHZhbDogXCIxXCIgfSxcclxuICAgICAgICBTaGlwc3RhdGlvbjogeyB0eXBlOiBcIlNoaXBzdGF0aW9uXCIsIHZhbDogXCIyXCIgfSxcclxuICAgICAgICBFYmF5OiB7IHR5cGU6IFwiZWJheVwiLCB2YWw6IFwiNFwiIH0sXHJcbiAgICAgICAgLy8gQW1hem9uOiB7IHR5cGU6IFwiYW1hem9uXCIsIHZhbDogXCI1XCIgfSxcclxuICAgICAgICBXaXg6IHsgdHlwZTogXCJ3aXhcIiwgdmFsOiBcIjZcIiB9LFxyXG4gICAgICAgIExhemFkYTogeyB0eXBlOiBcIkxhemFkYVwiLCB2YWw6IFwiN1wiIH0sXHJcbiAgICAgICAgU2hvcGVlOiB7IHR5cGU6IFwic2hvcGVlXCIsIHZhbDogXCI4XCIgfSxcclxuICAgICAgICBBUEk6IHsgdHlwZTogXCJhcGlcIiwgdmFsOiBcIjlcIiB9LFxyXG4gICAgICAgIEV0c3k6IHsgdHlwZTogXCJldHN5XCIsIHZhbDogXCIxMFwiIH1cclxuICAgICAgfTtcclxuICAgICAgJHNjb3BlLnRyYW5zZmVyTGlzdCA9IHtcclxuICAgICAgICBsZWZ0TGlzdDoge1xyXG4gICAgICAgICAgbm9ybWFsOiAnc3RhdGljL2ltYWdlL2F1dGhvcml6ZS90cmFuc2ZlckxlZnQuc3ZnJyxcclxuICAgICAgICAgIHZpcDogJ3N0YXRpYy9pbWFnZS9hdXRob3JpemUvdHJhbnNmZXJMZWZ0VmlwLnN2ZydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGltZ0xpc3Q6IFtcclxuICAgICAgICAgIHsgcGF0aDogJ3N0YXRpYy9pbWFnZS9hdXRob3JpemUvdHJhbnNmZXIwMS5zdmcnLCBuYW1lOiAnU2V0dGluZ3MnLCB2aXBQYXRoOiAnc3RhdGljL2ltYWdlL2F1dGhvcml6ZS90cmFuc2ZlclZpcDAxLnN2ZycgfSxcclxuICAgICAgICAgIHsgcGF0aDogJ3N0YXRpYy9pbWFnZS9hdXRob3JpemUvdHJhbnNmZXIwMi5zdmcnLCBuYW1lOiAnU3VibWlzc2lvbicsIHZpcFBhdGg6ICdzdGF0aWMvaW1hZ2UvYXV0aG9yaXplL3RyYW5zZmVyVmlwMDIuc3ZnJyB9LFxyXG4gICAgICAgICAgeyBwYXRoOiAnc3RhdGljL2ltYWdlL2F1dGhvcml6ZS90cmFuc2ZlcjAzLnN2ZycsIG5hbWU6ICdOZXcgQWNjb3VudCcsIHZpcFBhdGg6ICdzdGF0aWMvaW1hZ2UvYXV0aG9yaXplL3RyYW5zZmVyVmlwMDMuc3ZnJyB9LFxyXG4gICAgICAgICAgeyBwYXRoOiAnc3RhdGljL2ltYWdlL2F1dGhvcml6ZS90cmFuc2ZlcjA0LnN2ZycsIG5hbWU6ICdWZXJpZmljYXRpb24nLCB2aXBQYXRoOiAnc3RhdGljL2ltYWdlL2F1dGhvcml6ZS90cmFuc2ZlclZpcDA0LnN2ZycgfVxyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuY291bnRyeUxpc3QgPVtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY291bnRyeUNvZGU6ICdDTicsXHJcbiAgICAgICAgICAgIGNvdW50cnlOYW1lOiAnQ04nXHJcbiAgICAgICAgICB9XVxyXG4gICAgICAvLyAkc2NvcGUuc2VsZWN0ZWRJdGVtID0gJ0NOJztcclxuXHJcbiAgICAgIGNvbnN0IGJhc2U2NCA9IG5ldyBCYXNlNjQoKTtcclxuICAgICAgY29uc3QgaXNOb3RFcnBBZG1pbiA9IGJhc2U2NC5kZWNvZGUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VycG9wZXJhdGV1c2VyJykgfHwgJycpICE9ICdhZG1pbicgXHJcbiAgICAgIGNvbnN0IGlzRnJvbUVycCA9IGVuY29kZVVSSUNvbXBvbmVudChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9naW5mcm9tZXJwJykgfHwgJycpID09ICcxJyBcclxuICAgICAgJHNjb3BlLmZyb21FcnBOb3RBZG1pbiA9IGlzTm90RXJwQWRtaW4gJiYgaXNGcm9tRXJwXHJcbiAgICAgIFxyXG4gICAgICAkc2NvcGUuZ2V0Q291bnRyeUxpc3QgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGRzcC5nZXRGdW4oYHBsYXRmb3JtLXNob3AvY291bnRyeS9xdWVyeUNvdW50cnlMaXN0P3BsYXRmb3JtPUFNQVpPTmAsIGZ1bmN0aW9uKFxyXG4gICAgICAgICAgICByZXNcclxuICAgICAgICApe1xyXG4gICAgICAgICAgY29uc3Qge2RhdGF9ID0gcmVzXHJcbiAgICAgICAgICBpZihkYXRhLmNvZGU9PT0yMDApe1xyXG4gICAgICAgICAgICAkc2NvcGUuY291bnRyeUxpc3QgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgJHNjb3BlLmNvdW50cnlMaXN0PVtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICAkc2NvcGUuZ2V0Q291bnRyeUxpc3QoKVxyXG4gICAgICAkc2NvcGUuY3VycmVudEF1dGhvcml6ZSA9ICRzdGF0ZVBhcmFtcy50eXBlXHJcbiAgICAgICAgPyBhdXRob3JpemVUeXBlTW9kZWxbJHN0YXRlUGFyYW1zLnR5cGVdLnR5cGVcclxuICAgICAgICA6IGF1dGhvcml6ZVR5cGVNb2RlbC5TaG9waWZ5LnR5cGU7XHJcbiAgICAgICRzY29wZS5TdG9yZVR5cGUgPSAkc3RhdGVQYXJhbXMudHlwZVxyXG4gICAgICAgID8gYXV0aG9yaXplVHlwZU1vZGVsWyRzdGF0ZVBhcmFtcy50eXBlXS52YWxcclxuICAgICAgICA6IGF1dGhvcml6ZVR5cGVNb2RlbC5TaG9waWZ5LnZhbDtcclxuICAgICAgJHNjb3BlLm5hdnBhcmFteSA9ICRzdGF0ZVBhcmFtcy50eXBlIHx8IFwiU2hvcGlmeVwiO1xyXG4gICAgICBpZighIWRzcC5nZXRRdWVyeVN0cmluZygnY29kZScpKXtcclxuICAgICAgICAvLyDlsZXnpLpzaG9wZWXlkoxsYXphZGHnmoTlm57osIPmmK/lkKbmiJDlip/lvLnnqpdcclxuICAgICAgICBjb25zdCBjb2RlID0gZHNwLmdldFF1ZXJ5U3RyaW5nKCdjb2RlJylcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBvYmogPSB7XHJcbiAgICAgICAgICAnMTAwMDAnOidBdXRob3JpemF0aW9uIFN1Y2Nlc3NmdWxseS4nLFxyXG4gICAgICAgICAgJzEwMDAxJzonQXV0aG9yaXphdGlvbiBGYWlsZWQuJyxcclxuICAgICAgICAgICcxMDAwMic6J1lvdXIgc3RvcmUgaGFzIGJlZW4gYXV0aG9yaXplZCB0byBhbm90aGVyIENKIGFjY291bnQuJyxcclxuICAgICAgICAgICcxMDAwMyc6J1N0b3JlIG5hbWUgaXMgd3JvbmcuJ1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighIWNvZGUpIGxheWVyLm1zZyhvYmpbY29kZV0pXHJcbiAgICAgICAgLy8gY29uc3QgdXJsID0gXCIvbXlDSi5odG1sIy9hdXRob3JpemUvXCIgKyAkc3RhdGVQYXJhbXMudHlwZVxyXG4gICAgICAgIC8vICR3aW5kb3cubG9jYXRpb24gPSB1cmxcclxuICAgICAgfVxyXG5cclxuICAgICAgZHNwLnNldFJpZ2h0TWluSGVpZ2h0KCk7XHJcbiAgICAgICQoXCIuc3RvcmUtYXV0aG9yaXplLWJveFwiKS5jc3MoXHJcbiAgICAgICAgXCJtaW4taGVpZ2h0XCIsXHJcbiAgICAgICAgJCh3aW5kb3cpLmhlaWdodCgpICogMSAtIDE3MSArIFwicHhcIlxyXG4gICAgICApO1xyXG5cclxuICAgICAgdmFyIHZpcCA9XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ2aXBcIikgPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgIDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ2aXBcIik7XHJcbiAgICAgIGlmICh2aXAgPT0gXCIxXCIpIHtcclxuICAgICAgICAvL3ZpcEZsYWdcclxuICAgICAgICAkKFwiLmhlYWRlci1uYXZcIikuYWRkQ2xhc3MoXCJ2aXBGbGFnXCIpO1xyXG4gICAgICAgICQoXCIubXljai1sZWZ0LWJhclwiKS5hZGRDbGFzcyhcInZpcEZsYWdcIik7XHJcbiAgICAgICAgJChcIi5teWNqLXJpZ2h0LXdyYXBcIilcclxuICAgICAgICAgIC5jc3MoXCJiYWNrZ3JvdW5kXCIsIFwiI0YwRURFN1wiKVxyXG4gICAgICAgICAgLmFkZENsYXNzKFwidmlwXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoXCIuaGVhZGVyLW5hdlwiKS5yZW1vdmVDbGFzcyhcInZpcEZsYWdcIik7XHJcbiAgICAgICAgJChcIi5teWNqLWxlZnQtYmFyXCIpLnJlbW92ZUNsYXNzKFwidmlwRmxhZ1wiKTtcclxuICAgICAgICAkKFwiLm15Y2otcmlnaHQtd3JhcFwiKVxyXG4gICAgICAgICAgLmNzcyhcImJhY2tncm91bmRcIiwgXCIjZjJmM2Y1XCIpXHJcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJ2aXBcIik7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLnVzZXJWaXAgPSB2aXAgPT09ICcxJ1xyXG4gICAgICAkKFwiLmhlYWRlci1uYXYgbGlcIilcclxuICAgICAgICAuZXEoNClcclxuICAgICAgICAuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgIHZhciBiID0gbmV3IEJhc2U2NCgpO1xyXG4gICAgICAkc2NvcGUudXNlcklkID0gYi5kZWNvZGUoJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJJZFwiKSB8fCBcIlwiKTtcclxuICAgICAgJHNjb3BlLnRva2VuID0gYi5kZWNvZGUoJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRva2VuXCIpIHx8IFwiXCIpO1xyXG4gICAgICAkc2NvcGUudXNlckVtYWlsID0gYi5kZWNvZGUoJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImVtYWlsXCIpIHx8IFwiXCIpXHJcbiAgICAgICRzY29wZS5zdWJBY2NvdW50TmFtZSA9IGIuZGVjb2RlKCR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N1YkFjY291bnRMb2dpbk5hbWUnKSB8fCAnJykgfHwgJydcclxuICAgICAgLy8g6I635Y+W5bqX6ZO65YiX6KGoXHJcbiAgICAgICRzY29wZS5zdG9yZUxpc3QgPSBbXTtcclxuICAgICAgJHNjb3BlLm5vRGF0YSA9IGZhbHNlO1xyXG4gICAgICAkc2NvcGUuZ2V0U3RvcmVMaXN0ID0gZnVuY3Rpb24oZmlsdGVyT2JqKSB7XHJcbiAgICAgICAgdmFyIGdldFN0b3JlRGF0YSA9IHt9O1xyXG4gICAgICAgIGdldFN0b3JlRGF0YS51c2VySWQgPSAkc2NvcGUudXNlcklkO1xyXG4gICAgICAgIGdldFN0b3JlRGF0YS50b2tlbiA9ICRzY29wZS50b2tlbjtcclxuICAgICAgICBnZXRTdG9yZURhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGZpbHRlcjogZmlsdGVyT2JqLFxyXG4gICAgICAgICAgc29ydDogXCJVUERBVEFfREFURSRERVNDXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZHNwLnBvc3RGdW4oXCJhcHAvc2hvcC9saXN0XCIsIEpTT04uc3RyaW5naWZ5KGdldFN0b3JlRGF0YSksIGZ1bmN0aW9uKFxyXG4gICAgICAgICAgZGF0YVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcblxyXG4gICAgICAgICAgdmFyIGNvZGUgPSBkYXRhLnN0YXR1c0NvZGU7XHJcbiAgICAgICAgICBpZiAoY29kZSAhPSAyMDApIHtcclxuICAgICAgICAgICAgJHNjb3BlLm5vRGF0YSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChjb2RlID09IDIwNykge1xyXG4gICAgICAgICAgICAgIGxheWVyLm1zZyhcIlRoaXMgc3RvcmUgaGFkIGJlZW4gYXV0aG9yaWVkIHRvIG9uZSBvZiBvdXIgdXNlcnMuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAkc2NvcGUuc3RvcmVMaXN0ID0gSlNPTi5wYXJzZShkYXRhLnJlc3VsdCkucm9vdC5maWx0ZXIoc3RvcmUgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RvcmUudHlwZSA9PT0gJHNjb3BlLmN1cnJlbnRBdXRob3JpemU7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgICRzY29wZS5zd2l0Y2hJZGVudGlmaWNhdGlvbiA9IEpTT04ucGFyc2UoZGF0YS5yZXN1bHQpLnN3aXRjaElkZW50aWZpY2F0aW9uO1xyXG4gICAgICAgICAgJHNjb3BlLm5vRGF0YSA9ICRzY29wZS5zdG9yZUxpc3QubGVuZ3RoID09IDA7XHJcbiAgICAgICAgICAkc2NvcGUudHJhbnNmZXJTdG9yZUxpc3QgPSAkc2NvcGUuc3RvcmVMaXN0LmZpbHRlcih2ID0+IHYuc3RhdHVzID09IDEpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAkc2NvcGUuc2hvd0RlYWN0aVN0b3Jlc1ZhbCA9IHRydWVcclxuICAgICAgbGV0IF9vYmogPSB7fTtcclxuICAgICAgaWYgKCRzY29wZS5zZWFyY2hOYW1lKSB7XHJcbiAgICAgICAgX29iaiA9IHsuLi5fb2JqLCBTRUFSQ0gkTElLRSRuYW1lOiAkc2NvcGUuc2VhcmNoTmFtZX1cclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuZ2V0U3RvcmVMaXN0KHtcclxuICAgICAgICAuLi5fb2JqXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8g5aSN5Yi254mp5rWB6ZO+5o6lXHJcbiAgICAgICRzY29wZS5oYW5kbGVDb3B5ID0gKHVybCxldikgPT4ge1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGlmKHVybCkge1xyXG4gICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29weVVybCcpO1xyXG4gICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHVybCk7XHJcbiAgICAgICAgICBpbnB1dC5zZWxlY3QoKTtcclxuICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XHJcbiAgICAgICAgICBsYXllci5tc2coJ0NvcGllZCBTdWNjZXNzZnVsbHknKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRzY29wZS5oYW5kbGVDaGVjayA9IChib29sKSA9PiB7XHJcbiAgICAgICAgJHNjb3BlLnNob3dEZWFjdGlTdG9yZXNWYWwgPSBib29sO1xyXG4gICAgICAgICRzY29wZS5zaG93RGVhY3RpU3RvcmVzKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGFjdGlvbuaYvuekuuS4i+aLieahhlxyXG4gICAgICAkc2NvcGUuc2hvd0FjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAkc2NvcGUuaGFuZGxlQWN0aW9uSG92ZXIgPSAoaXRlbSkgPT4ge1xyXG4gICAgICAgICRzY29wZS5zaG93QWN0aW9uID0gaXRlbS5pZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLmhhbmRsZUFjdGlvbk91dCA9ICgpID0+IHtcclxuICAgICAgICAkc2NvcGUuc2hvd0FjdGlvbiA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuJG9uKCdoaWRlQWN0aW9uJywgKGQsIGRhdGEpID0+IHtcclxuICAgICAgICAkc2NvcGUuaGFuZGxlQWN0aW9uT3V0KCk7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyDpgInkuK3miYDmnInnpoHnlKjlupfpk7pcclxuICAgICAgJHNjb3BlLnNob3dEZWFjdGlTdG9yZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgb2JqID0ge31cclxuICAgICAgICBpZiAoJHNjb3BlLnNlYXJjaE5hbWUpIHtcclxuICAgICAgICAgIG9iaiA9IHsuLi5vYmosIFNFQVJDSCRMSUtFJG5hbWU6ICRzY29wZS5zZWFyY2hOYW1lfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJHNjb3BlLnNob3dEZWFjdGlTdG9yZXNWYWwpIHtcclxuICAgICAgICAgICRzY29wZS5nZXRTdG9yZUxpc3Qoey4uLm9ian0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuZ2V0U3RvcmVMaXN0KHtcclxuICAgICAgICAgICAgLi4ub2JqXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyDmkJzntKLlupfpk7pcclxuICAgICAgJHNjb3BlLnNlYXJjaFN0b3JlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLnNob3dEZWFjdGlTdG9yZXMoKVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgJHNjb3BlLnNob3dEZWFjdGlTdG9yZXNWYWwgPSB0cnVlXHJcbiAgICAgIC8vICRzY29wZS5nZXRTdG9yZUxpc3Qoe30pXHJcbiAgICAgICRzY29wZS5zZWFyY2hTdG9yZSgpXHJcblxyXG4gICAgICAvLyDlpI3liLbnianmtYHpk77mjqVcclxuICAgICAgJHNjb3BlLmhhbmRsZUNvcHkgPSAodXJsLGV2KSA9PiB7XHJcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYodXJsKSB7XHJcbiAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3B5VXJsJyk7XHJcbiAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdXJsKTtcclxuICAgICAgICAgIGlucHV0LnNlbGVjdCgpO1xyXG4gICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcclxuICAgICAgICAgIGxheWVyLm1zZygnQ29weSBTdWNjZXNzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuaGFuZGxlQ2hlY2sgPSAoYm9vbCkgPT4ge1xyXG4gICAgICAgICRzY29wZS5zaG93RGVhY3RpU3RvcmVzVmFsID0gYm9vbDtcclxuICAgICAgICAkc2NvcGUuc2hvd0RlYWN0aVN0b3JlcygpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBcclxuICAgICAgLy8g5aKe5Yqg5bqX6ZO6XHJcbiAgICAgICRzY29wZS5TdG9yZURpYWxvZyA9IGZhbHNlO1xyXG4gICAgICAvLyDphY3nva7nianmtYHmn6Xor6Lpk77mjqXlvLnnqpdcclxuICAgICAgJHNjb3BlLmRlZmF1bHRDb25maWdMb2dpc3RpY3NVcmwgPSAnJztcclxuICAgICAgJHNjb3BlLmlzVmlwID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ2aXBcIikgPT0gJzEnXHJcbiAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cgPSB7XHJcbiAgICAgICAgaXNTaG93OiBmYWxzZSxcclxuICAgICAgICBsaW5rOiAkc2NvcGUuZGVmYXVsdENvbmZpZ0xvZ2lzdGljc1VybCxcclxuICAgICAgICBpdGVtRGF0YTogbnVsbCxcclxuICAgICAgICBzZWxlY3RMaW5rOiAnaHR0cHM6Ly9janBhY2tldC5jb20vJyxcclxuICAgICAgICBzaG93U2VsZWN0TGlua0JveDogZmFsc2UsXHJcbiAgICAgICAgc2VsZWN0TGlua0FycjogWydodHRwczovL2NqcGFja2V0LmNvbS8nLCAnaHR0cHM6Ly93d3cuMTd0cmFjay5uZXQvemgtZW4nXSxcclxuICAgICAgICBzaG93SW5vdXRBZGROZXc6IGZhbHNlLFxyXG4gICAgICAgIHNob3dSZXNldEluZm9Cb3g6IGZhbHNlLFxyXG4gICAgICAgIC8vIHNob3dSZXNldEluZm86IGZhbHNlLFxyXG4gICAgICAgIHJlc2V0SW5mbzogJ0FyZSB5b3Ugc3VyZSB0byByZXNldCB0aGUgdHJhY2tpbmcgVVJMPyBUaGUgdHJhY2tpbmcgVVJMIGlzIGh0dHBzOi8vY2pwYWNrZXQuY29tLy4nLFxyXG4gICAgICAgIC8vIHNob3dDb25maWdJbmZvOiBmYWxzZSxcclxuICAgICAgICBjb25maWdJbmZvOiAnQXJlIHlvdSBzdXJlIHRvIGFkZCB0aGUgdHJhY2tpbmcgVVJMPyBUaGUgdHJhY2tpbmcgVVJMIHdpbGwgYmUgc2VudCB0byB5b3UgYnkgZW1haWwuIFRoZW4sIHlvdSBjYW4gc2V0IHRoZSB0cmFja2luZyBVUkwgaW4geW91ciBzdG9yZSBhbmQgc2VuZCBpdCB0byB5b3VyIGN1c3RvbWVycyB0byB0cmFjayBvcmRlcnMuIFBsZWFzZSBjaGVjayB0aGUgdHJhY2tpbmcgVVJMIGNhcmVmdWxseS4nLFxyXG4gICAgICAgIGluZm9UZXh0OiAnJyxcclxuICAgICAgICBjbG9zZTogKCkgPT4ge1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5pc1Nob3cgPSBmYWxzZTtcclxuICAgICAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuaXRlbURhdGEgPSBudWxsO1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zaG93U2VsZWN0TGlua0JveCA9IGZhbHNlO1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zaG93SW5vdXRBZGROZXcgPSBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhhbmRsZUFkZE5ldzogKCkgPT4ge1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zaG93SW5vdXRBZGROZXcgPSB0cnVlO1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5saW5rID0gJHNjb3BlLmRlZmF1bHRDb25maWdMb2dpc3RpY3NVcmw7XHJcbiAgICAgICAgICAkc2NvcGUuY29uZmlnTG9naXN0aWNzRGlhbG9nLnNob3dTZWxlY3RMaW5rQm94ID0gZmFsc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYW5kbGVCYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAkc2NvcGUuY29uZmlnTG9naXN0aWNzRGlhbG9nLnNob3dJbm91dEFkZE5ldyA9IGZhbHNlO1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5saW5rID0gJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zZWxlY3RMaW5rO1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zaG93U2VsZWN0TGlua0JveCA9IGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHJhY2tpbmdCdG5DbGljazogKGl0ZW0pID0+IHtcclxuICAgICAgICAgIGlmKCRzY29wZS5mcm9tRXJwTm90QWRtaW4pIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdZb3UgY2Fubm90IGVkaXQgaXQuJylcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2NvcGUuY29uZmlnTG9naXN0aWNzRGlhbG9nLml0ZW1EYXRhID0gaXRlbTtcclxuICAgICAgICAgIGlmIChpdGVtLnRyYWNrVXJsVGVtcGxhdGUgJiYgaXRlbS50cmFja1VybFRlbXBsYXRlICE9PSAnJykge1xyXG4gICAgICAgICAgICAkc2NvcGUuY29uZmlnTG9naXN0aWNzRGlhbG9nLnNlbGVjdExpbmsgPSBpdGVtLnRyYWNrVXJsVGVtcGxhdGU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkc2NvcGUuY29uZmlnTG9naXN0aWNzRGlhbG9nLnNlbGVjdExpbmsgPSAnaHR0cHM6Ly9janBhY2tldC5jb20vJztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cubGluayA9ICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuc2VsZWN0TGluaztcclxuICAgICAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuaXNTaG93ID0gdHJ1ZTtcclxuICAgICAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuc2hvd1NlbGVjdExpbmtCb3ggPSBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIHNob3dUcmFja2luZ0luZm86IChpdGVtKSA9PiB7XHJcbiAgICAgICAgLy8gICAkc2NvcGUuc2hvd1RyYWNraW5nSW5mbyA9IGl0ZW0uaWQ7XHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyBoaWRlVHJhY2tpbmdJbmZvOiAoKSA9PiB7XHJcbiAgICAgICAgLy8gICAkc2NvcGUuc2hvd1RyYWNraW5nSW5mbyA9IG51bGw7XHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICBoYW5kbGVTZWxlY3RMaW5rOiAoaSkgPT4ge1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zZWxlY3RMaW5rID0gJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zZWxlY3RMaW5rQXJyW2ldO1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5saW5rID0gJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zZWxlY3RMaW5rO1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zaG93U2VsZWN0TGlua0JveCA9IGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29uZmlybTogKCkgPT4ge1xyXG4gICAgICAgICAgaWYoISRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cubGluaykge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ1VSTCBjYW5ub3QgYmUgYmxhbmsnKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgIH1cclxuICAgICAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuc2hvd1Jlc2V0SW5mb0JveCA9IHRydWU7XHJcbiAgICAgICAgICAkc2NvcGUuY29uZmlnTG9naXN0aWNzRGlhbG9nLmluZm9UZXh0ID0gJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5jb25maWdJbmZvO1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zaG93U2VsZWN0TGlua0JveCA9IGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFuZGxlU2hvd1Jlc2V0SW5mbzogKCkgPT4ge1xyXG4gICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zaG93UmVzZXRJbmZvQm94ID0gdHJ1ZTtcclxuICAgICAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuaW5mb1RleHQgPSAkc2NvcGUuY29uZmlnTG9naXN0aWNzRGlhbG9nLnJlc2V0SW5mbztcclxuICAgICAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuc2hvd1NlbGVjdExpbmtCb3ggPSBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluZm9DYW5jZWw6ICgpID0+IHtcclxuICAgICAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuc2hvd1Jlc2V0SW5mb0JveCA9IGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5mb0NvbmZpcm06ICgpID0+IHtcclxuICAgICAgICAgIGlmKCRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuaW5mb1RleHQgPT0gJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5yZXNldEluZm8pIHtcclxuICAgICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zZWxlY3RMaW5rID0gJ2h0dHBzOi8vY2pwYWNrZXQuY29tLyc7XHJcbiAgICAgICAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cubGluayA9ICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuc2VsZWN0TGluaztcclxuICAgICAgICAgIH0gXHJcbiAgICAgICAgICBjb25zdCBsaW5rID0gJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5saW5rXHJcbiAgICAgICAgICBjb25zdCBpdGVtRGF0YSA9ICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuaXRlbURhdGFcclxuICAgICAgICAgIGlmIChpdGVtRGF0YSkge1xyXG7CoMKgwqDCoMKgwqDCoMKgICAgIGNvbnN0wqBtc2dMb2FkaW5nwqA9wqBjak1lc3NhZ2UubG9hZGluZyh7wqBpc0ZpeGVkOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICBkc3AucG9zdEZ1bignYXBwL3Nob3AvdXBkYXRlVHJhY2t1cmxUZW1wbGF0ZScse1xyXG4gICAgICAgICAgICAgIHNob3BJZDogaXRlbURhdGEuaWQsXHJcbiAgICAgICAgICAgICAgdHJhY2tVcmxUZW1wbGF0ZTogbGlua1xyXG4gICAgICAgICAgICB9LCByZXMgPT4ge1xyXG4gICAgICAgICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHtkYXRhfSA9IHJlcztcclxuICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXNDb2RlICE9IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXIubXNnKGRhdGEubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1NldCBTdWNjZXNzZnVsbHknKVxyXG4gICAgICAgICAgICAgICRzY29wZS5jb25maWdMb2dpc3RpY3NEaWFsb2cuaXNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zaG93UmVzZXRJbmZvQm94ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmNvbmZpZ0xvZ2lzdGljc0RpYWxvZy5zaG93SW5vdXRBZGROZXcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZ2V0U3RvcmVMaXN0KHt9KTtcclxuICAgICAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIC8vICRzY29wZS5TdG9yZVR5cGUgPSAnMSc7XHJcbiAgICAgIC8vIOa3u+WKoOW6l+mTulxyXG4gICAgICAkc2NvcGUuYWRkU3RvcmUgPSBmdW5jdGlvbihmbGFnKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0b3JlVHlwZSA9ICRzY29wZS5TdG9yZVR5cGVcclxuICAgICAgICBpZihzdG9yZVR5cGUgPT0gJzYnKSB7XHJcbiAgICAgICAgICByZXR1cm4gZ29BdXRoU3RvcmUoZHNwLCAnd2l4JylcclxuICAgICAgICB9ZWxzZSBpZihzdG9yZVR5cGUgPT0gJzcnKXsgLy8gNyBsYXphZGFcclxuICAgICAgICAgIHJldHVybiBnb0F1dGhTdG9yZShkc3AsICdMYXphZGEnKVxyXG4gICAgICAgIH1lbHNlIGlmKHN0b3JlVHlwZSA9PSAnOCcpe1xyXG4gICAgICAgICAgcmV0dXJuIGdvQXV0aFN0b3JlKGRzcCwgJ3Nob3BlZScpXHJcbiAgICAgICAgfSBlbHNlIGlmKHN0b3JlVHlwZSA9PSAnMTAnKSB7XHJcbiAgICAgICAgICByZXR1cm4gZ29BdXRoU3RvcmUoZHNwLCAnZXRzeScpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuYWRkU3RvcmVGbGFnID0gdHJ1ZTtcclxuICAgICAgICBpZiAoJHNjb3BlLlN0b3JlVHlwZSAhPSBcIjdcIiAmJiAkc2NvcGUuU3RvcmVUeXBlICE9IFwiOFwiICYmICRzY29wZS5TdG9yZVR5cGUgIT0gXCIxMFwiKSB7XHJcbiAgICAgICAgICAkc2NvcGUuU3RvcmVEaWFsb2cgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiAoZmxhZyA9PSAnc2hvcGlmeScpICRzY29wZS5TdG9yZVR5cGUgPSAnMCc7XHJcblxyXG4gICAgICAgICRzY29wZS5saW5rdXJsID0gXCJcIjtcclxuICAgICAgICAkc2NvcGUuU2l0ZVVybCA9IFwiXCI7XHJcbiAgICAgICAgJHNjb3BlLkNvbnN1bWVyS2V5ID0gXCJcIjtcclxuICAgICAgICAkc2NvcGUuQ29uc3VtZXJTZWNyZXQgPSBcIlwiO1xyXG4gICAgICAgICRzY29wZS5BUElLZXkgPSBcIlwiO1xyXG4gICAgICAgICRzY29wZS5BUElTZWNyZXQgPSBcIlwiO1xyXG5cclxuICAgICAgICAkc2NvcGUuU2hvcE5hbWUgPSBcIlwiO1xyXG4gICAgICAgICRzY29wZS5hY2NvdW50QW1hem9uID0gXCJcIjtcclxuICAgICAgICAkc2NvcGUuc3RvcmVpbiA9IFwiXCI7XHJcbiAgICAgICAgJHNjb3BlLk1hcmtldHBsYWNlSWQgPSBcIlwiO1xyXG4gICAgICAgICRzY29wZS5zZWxsZXJJZCA9IFwiXCI7XHJcbiAgICAgICAgJHNjb3BlLm13c0F1dGhUb2tlbiA9IFwiXCI7XHJcbiAgICAgIH07XHJcbiAgICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBoYW5kbGVBZGRzdG9yZSgpO1xyXG4gICAgICB9O1xyXG4gICAgICBmdW5jdGlvbiBoYW5kbGVBZGRzdG9yZSgpIHtcclxuICAgICAgICBjb25zdCBhZGRzdG9yZSA9IGRzcC5nZXRRdWVyeVN0cmluZyhcImFkZHN0b3JlXCIpO1xyXG4gICAgICAgIGFkZHN0b3JlICYmIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJhZGQtc3RvcmUtYnRuXCIpWzBdLmNsaWNrKCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gMjAxOS0wNi0yMCB4aWFveSDovaznp7vlupfpk7pcclxuICAgICAgY29uc3Qgc2VuZFR4dCA9IFwiU2VuZFwiOyAvLyBodG1s5Lit5a+55LqO55qEICE9PSBTZW5kIOmhu+WQjOaXtuS/ruaUuVxyXG4gICAgICB2YXIgdGltZXIgPSBudWxsOyAvL+iuoeaXtuWZqFxyXG4gICAgICAkc2NvcGUubWVzc2FnZUJveFNob3cgPSBmYWxzZTsgLy/mmK/lkKbovaznp7vlupfpk7rnlYzpnaLmmL7npLpcclxuICAgICAgJHNjb3BlLnRyYW5zZmVyU2hvdyA9IGZhbHNlOyAvL+i9rOenu+W6l+mTuueVjOmdouaYvuekuumakOiXj1xyXG4gICAgICAvLyAkc2NvcGUudGlwTnVtID0gMDsvL+aPkOekuuS/oeaBryAgIC8v5byD55SoXHJcbiAgICAgICRzY29wZS50ZXh0ID0gc2VuZFR4dDsgLy/lj5HpgIHpqozor4HnoIHmlofmnKxcclxuICAgICAgJHNjb3BlLnBlbmRpbmcgPSBmYWxzZTsgLy/mj5DkuqTnirbmgIFcclxuICAgICAgY29uc3QgX0RFRkFVTFRfSU5GTyA9IHtcclxuICAgICAgICB0eXBlOiAnJywgICAgICAgICAgIC8v57G75Z6L77yaIHRyYW5zZmVyIOi9rOenuyAgc3VlclRyYW5zZmVyIOehruiupOi9rOenu1xyXG4gICAgICAgIHNob3A6ICcnLFxyXG4gICAgICAgIHJlY2VpdmVOYW1lOiAnJywgICAgLy/mjqXmlLbkurrpgq7nrrFcclxuICAgICAgICByZWNlaXZlSWQ6ICcnLCAgICAgIC8v5o6l5pS25Lq6aWRcclxuICAgICAgICByZWNlaXZlRW1haWw6ICcnLFxyXG4gICAgICAgIG9yaWdpbk5hbWU6ICcnLCAgICAgLy/lvZPliY3nlKjmiLdcclxuICAgICAgICBtYWlsQ29kZTogJycsICAgICAgIC8v6aqM6K+B56CBXHJcbiAgICAgICAgdHJhbnNmZXJTaG9wOiAnJywgICAvL+ehruiupOi9rOenuyAtIOi9rOenu+W6l+mTuuWQjVxyXG4gICAgICAgIHRyYW5zZmVySWQ6ICcnLCAgLy/noa7orqTovaznp7sgLSDovaznp7votKbmiLfpgq7nrrFcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgJHNjb3BlLnRvZ2dsZVRyYW5zZmVyU3RvcmUgPSBmdW5jdGlvbihib2wsIHR5cGUsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIC8v5pu05o2i5bqX6ZO655WM6Z2i5pi+56S66ZqQ6JePXHJcbiAgICAgICAgJHNjb3BlLnRyYW5zZmVyU2hvdyA9IGJvbDtcclxuICAgICAgICBpZiAoIWJvbCkge1xyXG4gICAgICAgICAgJHNjb3BlLmluZm8gPSB7XHJcbiAgICAgICAgICAgIC4uLl9ERUZBVUxUX0lORk9cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICAkc2NvcGUuZW1haWxFcnJvciA9ICcnXHJcbiAgICAgICAgICAkc2NvcGUuc3RvcmVFcnJvciA9ICcnXHJcbiAgICAgICAgICAkc2NvcGUubWFpbENvZGVFcnJvciA9ICcnXHJcbiAgICAgICAgICAkc2NvcGUudGV4dCA9IHNlbmRUeHQ7XHJcbiAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHRpbWVyKTsgLy/muIXmpZrorqHml7blmahcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLmluZm8gPSB7XHJcbiAgICAgICAgICAgIC4uLl9ERUZBVUxUX0lORk8sXHJcbiAgICAgICAgICAgIG9yaWdpbk5hbWU6ICRzY29wZS51c2VyRW1haWwsXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHR5cGVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvL+iOt+WPlui9rOenu+S/oeaBr1xyXG4gICAgICAkc2NvcGUuYWNjZXB0VHJhbnNmZXIgPSBpdGVtID0+IHtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICBzaG9wSWQ6IGl0ZW0uaWQsXHJcbiAgICAgICAgICByZWNlaXZlZFN0YXR1czogMSxcclxuICAgICAgICB9XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oJ3BsYXRmb3JtLXNob3AvdHJhbnNmZXIvcXVlcnlTaG9wVHJhbnNmZXJSZWNvcmRzJywgcGFyYW1zLCAoeyBkYXRhIH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHsgY29kZSwgZGF0YTogbGlzdCB9ID0gZGF0YVxyXG4gICAgICAgICAgaWYoK2NvZGUgIT09IDIwMCApIHJldHVybjtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgeyB0cmFuc2ZlckVtYWlsLCBzaG9wTmFtZSwgc2hvcFRyYW5zZmVyUmVjb3JkSWQgfSA9IGxpc3RbMF0gfHwge31cclxuICAgICAgICAgICRzY29wZS50b2dnbGVUcmFuc2ZlclN0b3JlKHRydWUsICdzdWVyVHJhbnNmZXInLCB7XHJcbiAgICAgICAgICAgIHNob3A6IGl0ZW0uaWQsXHJcbiAgICAgICAgICAgIHRyYW5zZmVyU2hvcDogc2hvcE5hbWUsXHJcbiAgICAgICAgICAgIG9yaWdpbk5hbWU6IHRyYW5zZmVyRW1haWwsXHJcbiAgICAgICAgICAgIHRyYW5zZmVySWQ6IHNob3BUcmFuc2ZlclJlY29yZElkXHJcbiAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9LCAoKSA9PiB7fSlcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUubmV3QWNjb3VudFR5cGUgPSAnbG9naW5OYW1lJ1xyXG4gICAgICAkc2NvcGUubmV3QWNjb3VudFR5cGVGdW4gPSAoZSkgPT4ge1xyXG4gICAgICAgICRzY29wZS5pbmZvLnJlY2VpdmVOYW1lID0gJydcclxuICAgICAgICAkc2NvcGUubmV3QWNjb3VudFR5cGUgPSBlXHJcbiAgICAgICAgJHNjb3BlLmVtYWlsRXJyb3IgPSAnJ1xyXG4gICAgICB9XHJcbiAgICAgIC8v6L2s56e75bqX6ZO6IC0g6YKu566x6aqM6K+BXHJcbiAgICAgICRzY29wZS5lbWFpbFZlcmlmeSA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICBpZiAoISRzY29wZS5pbmZvLnJlY2VpdmVOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUubmV3QWNjb3VudFR5cGUgPT0gJ2xvZ2luTmFtZScpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZW1haWxFcnJvciA9ICdQbGVhc2UgZW50ZXIgdGhlIG5ldyBhY2NvdW50J1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICRzY29wZS5lbWFpbEVycm9yID0gJ1BsZWFzZSBlbnRlciB0aGUgRW1haWwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJtYXMgPSB7XHJcbiAgICAgICAgICAgICAgWyRzY29wZS5uZXdBY2NvdW50VHlwZV06ICRzY29wZS5pbmZvLnJlY2VpdmVOYW1lXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0wqBtc2dMb2FkaW5nwqA9wqBjak1lc3NhZ2UubG9hZGluZyh7wqBpc0ZpeGVkOiB0cnVlwqB9KVxyXG4gICAgICAgICAgICBkc3AucG9zdEZ1bignY2ovYWNjb3VudC9nZXRCeUxvZ2luJywgcGFybWFzLCAoeyBkYXRhIH0pID0+IHtcclxuICAgICAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgICAgICBjb25zdCB7IHN0YXR1c0NvZGUsIHJlc3VsdDogeyBhY2NvdW50SWQgPSAnJywgYWNjb3VudEVtYWlsLCBhY2NvdW50U3RhdHVzIH0gPSB7fSB9ID0gZGF0YVxyXG4gICAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID09ICc1MDUnKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxFcnJvciA9ICdUaGUgc3RvcmUgY2Fubm90IGJlIHRyYW5zZmVycmVkIHRvIHRoZSBzYW1lIGFjY291bnQuJ1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZighYWNjb3VudElkKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxFcnJvciA9ICdUaGUgYWNjb3VudCBpcyBub3QgcmVnaXN0ZXJlZC4nXHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmKCthY2NvdW50U3RhdHVzICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbEVycm9yID0gJ0FjY291bnQgQmxvY2tlZC4gUGxlYXNlIGNoYW5nZSB0byBhbm90aGVyIGFjY291bnQuJ1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmluZm8ucmVjZWl2ZUlkID0gYWNjb3VudElkXHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5pbmZvLnJlY2VpdmVFbWFpbCA9IGFjY291bnRFbWFpbFxyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxFcnJvciA9ICcnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJlc29sdmUoISRzY29wZS5lbWFpbEVycm9yKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBsYXllci5tc2coJ1RoZSBzZXJ2ZXIgaXMgYnVzeSBub3csIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIC8v6L2s56e75bqX6ZO6IC0g5bqX6ZO66aqM6K+BXHJcbiAgICAgICRzY29wZS5zdG9yZVZlcmlmeSA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgJHNjb3BlLnN0b3JlRXJyb3IgPSAhJHNjb3BlLmluZm8uc2hvcCA/ICdQbGVhc2Ugc2VsZWN0IGEgc3RvcmUnIDogJydcclxuICAgICAgICAgIHJlc29sdmUoISRzY29wZS5zdG9yZUVycm9yKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgLy/ovaznp7vlupfpk7ogLSDpqozor4HnoIHpqozor4FcclxuICAgICAgJHNjb3BlLm1haWxDb2RlVmVyaWZ5ID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAkc2NvcGUubWFpbENvZGVFcnJvciA9ICEkc2NvcGUuaW5mby5tYWlsQ29kZSA/ICdQbGVhc2UgZW50ZXIgdGhlIHZlcmlmaWNhdGlvbiBjb2RlJyA6ICcnXHJcbiAgICAgICAgICByZXNvbHZlKCEkc2NvcGUubWFpbENvZGVFcnJvcilcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+i9rOenu+W6l+mTuiAtIOaPkOS6pFxyXG4gICAgICAkc2NvcGUudHJhbnNmZXJTdWJtaXQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlIH0gPSAkc2NvcGUuaW5mb1xyXG4gICAgICAgIHR5cGUgPT09ICd0cmFuc2ZlcicgPyB0cmFuc2ZlckNvbmZpcm0oKSA6IHN1ZXJUcmFuc2ZlckNvbmZyaW0oKVxyXG4gICAgICB9XHJcbiAgICAgIC8v6L2s56e75bqX6ZO6IC0g6L2s56e7IC0g56Gu6K6kXHJcbiAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyQ29uZmlybSgpIHtcclxuICAgICAgICBQcm9taXNlLmFsbChbJHNjb3BlLmVtYWlsVmVyaWZ5KCksICRzY29wZS5zdG9yZVZlcmlmeSgpLCAkc2NvcGUubWFpbENvZGVWZXJpZnkoKV0pLnRoZW4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHJlc29sdmUuZmlsdGVyKGl0ZW0gPT4gaXRlbSA9PT0gZmFsc2UpLmxlbmd0aCA+IDApIHJldHVybjtcclxuICAgICAgICAgIGlmICgkc2NvcGUucGVuZGluZykgcmV0dXJuIGxheWVyLm1zZyhcIlN1Ym1pdHRpbmcsIHBsZWFzZSB3YWl0IGEgc2Vjb25kLi4uXCIpXHJcbiAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIHJlY2VpdmVyQWNjb3VudElkOiAkc2NvcGUuaW5mby5yZWNlaXZlSWQsXHJcbiAgICAgICAgICAgIHJlY2VpdmVyRW1haWw6ICRzY29wZS5pbmZvLnJlY2VpdmVFbWFpbCxcclxuICAgICAgICAgICAgcmVjZWl2ZXJMb2dpbk5hbWU6ICRzY29wZS5pbmZvLnJlY2VpdmVOYW1lLFxyXG4gICAgICAgICAgICBzaG9wSWQ6ICRzY29wZS5pbmZvLnNob3AsXHJcbiAgICAgICAgICAgIHZlcmlmeUNvZGU6ICRzY29wZS5pbmZvLm1haWxDb2RlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2NvcGUucGVuZGluZyA9IHRydWVcclxuICAgICAgICAgIGRzcC5wb3N0RnVuKCdwbGF0Zm9ybS1zaG9wL3RyYW5zZmVyL3RyYW5zZmVyU2hvcCcsIHBhcmFtcywgKHtkYXRhfSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IGNvZGUsIG1lc3NhZ2UgfSA9IGRhdGFcclxuICAgICAgICAgICAgJHNjb3BlLnBlbmRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKCtjb2RlICE9PSAyMDApIHJldHVybiBsYXllci5tc2cobWVzc2FnZSlcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdUcmFuc2ZlciBTdWNjZXNzJylcclxuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZVRyYW5zZmVyU3RvcmUoZmFsc2UpO1xyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd0RlYWN0aVN0b3JlcygpXHJcbiAgICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICRzY29wZS5wZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgIFxyXG4gICAgICB9XHJcbiAgICAgIC8v6L2s56e75bqX6ZO6IC0g56Gu6K6k6L2s56e7IC0g56Gu6K6kXHJcbiAgICAgIGZ1bmN0aW9uIHN1ZXJUcmFuc2ZlckNvbmZyaW0oKSB7XHJcbiAgICAgICAgUHJvbWlzZS5hbGwoWyRzY29wZS5tYWlsQ29kZVZlcmlmeSgpXSkudGhlbigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICBpZiAocmVzb2x2ZS5maWx0ZXIoaXRlbSA9PiBpdGVtID09PSBmYWxzZSkubGVuZ3RoID4gMCkgcmV0dXJuO1xyXG4gICAgICAgICAgaWYgKCRzY29wZS5wZW5kaW5nKSByZXR1cm4gbGF5ZXIubXNnKFwiU3VibWl0dGluZywgcGxlYXNlIHdhaXQgYSBzZWNvbmQuLi5cIilcclxuICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgc2hvcFRyYW5zZmVySWQ6ICRzY29wZS5pbmZvLnRyYW5zZmVySWQsXHJcbiAgICAgICAgICAgIHZlcmlmeUNvZGU6ICRzY29wZS5pbmZvLm1haWxDb2RlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2NvcGUucGVuZGluZyA9IHRydWVcclxuICAgICAgICAgIGRzcC5wb3N0RnVuKCdwbGF0Zm9ybS1zaG9wL3RyYW5zZmVyL3RyYW5zZmVyQ29uZmlybScsIHBhcmFtcywgKHsgZGF0YSB9KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY29kZSwgbWVzc2FnZSB9ID0gZGF0YVxyXG4gICAgICAgICAgICAkc2NvcGUucGVuZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoK2NvZGUgIT09IDIwMCkgcmV0dXJuIGxheWVyLm1zZyhtZXNzYWdlKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGF5ZXIubXNnKCdUcmFuc2ZlciBTdWNjZXNzJylcclxuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZVRyYW5zZmVyU3RvcmUoZmFsc2UpO1xyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd0RlYWN0aVN0b3JlcygpXHJcbiAgICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICRzY29wZS5wZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGRzcC5jak1lc0Z1bigxKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIC8v6L2s56e75bqX6ZO6IC0g5Y+R6YCB6aqM6K+B56CBXHJcbiAgICAgICRzY29wZS5nZXRFbWFpbENvZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCB7IHR5cGUgfSA9ICRzY29wZS5pbmZvXHJcbiAgICAgICAgdHlwZSA9PT0gJ3RyYW5zZmVyJyA/IHNlbmRFbWFpbEJ5VHJhbnNmZXIoKSA6IHNlbmRNYWlsQ29kZUltcGwoKVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy/ovaznp7vlupfpk7ogLSDovaznp7sgLSDlj5HpgIHpqozor4HnoIFcclxuICAgICAgZnVuY3Rpb24gc2VuZEVtYWlsQnlUcmFuc2ZlcigpIHtcclxuICAgICAgICBQcm9taXNlLmFsbChbJHNjb3BlLmVtYWlsVmVyaWZ5KCksICRzY29wZS5zdG9yZVZlcmlmeSgpXSkudGhlbihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgIGlmIChyZXNvbHZlLmZpbHRlcihpdGVtID0+IGl0ZW0gPT09IGZhbHNlKS5sZW5ndGggPiAwKSByZXR1cm47XHJcbiAgICAgICAgICBzZW5kTWFpbENvZGVJbXBsKClcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+i9rOenu+W6l+mTuiAtIOaOpeaUtui9rOenuyAtIOWPkemAgemqjOivgeeggVxyXG4gICAgICBmdW5jdGlvbiBzZW5kTWFpbENvZGVJbXBsKCkge1xyXG4gICAgICAgIGlmKCRzY29wZS50ZXh0ICE9PSAnU2VuZCcpIHJldHVyblxyXG5cclxuICAgICAgICBjb25zdCB7IHR5cGUsIHNob3AgfSA9ICRzY29wZS5pbmZvXHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHtcclxuICAgICAgICAgIHNob3BJZDogc2hvcCxcclxuICAgICAgICAgIHR5cGU6IHR5cGUgPT09ICd0cmFuc2ZlcicgPyAnU0hPUF9UUkFOU0ZFUicgOiAnU0hPUF9UUkFOU0ZFUl9DT05GSVJNJyxcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICd0cmFuc2ZlcicpIHtcclxuICAgICAgICAgIHBhcmFtcy5yZWNlaXZlckxvZ2luTmFtZSA9ICRzY29wZS5pbmZvLnJlY2VpdmVOYW1lXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlID09PSAnc3VlclRyYW5zZmVyJykge1xyXG4gICAgICAgICAgcGFyYW1zLnNob3BUcmFuc2ZlclJlY29yZElkID0gJHNjb3BlLmluZm8udHJhbnNmZXJJZFxyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lKClcclxuwqDCoMKgwqDCoMKgwqDCoGNvbnN0wqBtc2dMb2FkaW5nwqA9wqBjak1lc3NhZ2UubG9hZGluZyh7wqBpc0ZpeGVkOiB0cnVlwqB9KTtcclxuICAgICAgICBkc3AucG9zdEZ1bigncGxhdGZvcm0tc2hvcC90cmFuc2Zlci9zZW5kVmVyaWZ5Q29kZScsIHBhcmFtcywgKHtkYXRhfSkgPT4ge1xyXG4gICAgICAgICAgbXNnTG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgICBjb25zdCB7IGNvZGUsIG1lc3NhZ2UgfSA9IGRhdGFcclxuICAgICAgICAgIGlmICgrY29kZSAhPT0gMjAwKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZSgpXHJcbiAgICAgICAgICAgIGxheWVyLm1zZyhtZXNzYWdlKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxheWVyLm1zZygnVGhlIHZlcmlmaWNhdGlvbiBjb2RlIHdhcyBzZW50IHN1Y2Nlc3NmdWxseS4gUGxlYXNlIGNoZWNrIHlvdXIgZW1haWwuIFRoZSBjb2RlIHdpbGwgZXhwaXJlIGluIDEwIG1pbnV0ZXMnKVxyXG4gICAgICAgIH0sICgpID0+IHtcclxuICAgICAgICAgIGNsZWFyVGltZSgpXHJcbiAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgIGRzcC5jak1lc0Z1bigxKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHNldFRpbWUod2FpdCkge1xyXG4gICAgICAgIHdhaXQgPSB3YWl0IHx8IDYwO1xyXG4gICAgICAgICRzY29wZS50ZXh0ID0gd2FpdDtcclxuICAgICAgICB0aW1lciA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHdhaXQtLTtcclxuICAgICAgICAgICRzY29wZS50ZXh0ID0gd2FpdDtcclxuICAgICAgICAgIGlmICh3YWl0ID09PSAwKSB7XHJcbiAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICAgICAkc2NvcGUudGV4dCA9IHNlbmRUeHQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgIH1cclxuICAgICAgZnVuY3Rpb24gY2xlYXJUaW1lKCkge1xyXG4gICAgICAgICRpbnRlcnZhbC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICRzY29wZS50ZXh0ID0gc2VuZFR4dDtcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUudHJhbnNmZXJCb3ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvL+aOiOadg+aMiemSriAgPT4g6L2s56e75bqX6ZO6XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlQm94U2hvdyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudHJhbnNmZXJTaG93ID0gdHJ1ZTtcclxuICAgICAgfTtcclxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAxOC0xMS0wMi1hZGQg5o6n5Yi25bqX6ZO65pi+56S644CQYmFja2VuZDp0eXnjgJFcclxuICAgICAgdmFyIGxvZ2luX25hbWUgPSBuZXcgQmFzZTY0KCkuZGVjb2RlKHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9naW5OYW1lIHx8IFwiXCIpO1xyXG4gICAgICAkc2NvcGUuYnJpZ2h0cGVhcmxfc2hvdyA9XHJcbiAgICAgICAgbG9naW5fbmFtZSA9PT0gXCJ0cmFmaWxlYVwiID8gdHJ1ZSA6IGxvZ2luX25hbWUgPT09IFwiYW5hblwiID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgICAkc2NvcGUuU2hvcGlmeVN1YiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIOa3u+WKoOW6l+mTulxyXG4gICAgICAgIHZhciB0eXBlO1xyXG4gICAgICAgIGlmICgkc2NvcGUuU3RvcmVUeXBlID09IFwiMFwiKSB7XHJcbiAgICAgICAgICB0eXBlID0gXCJzaG9waWZ5XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuU3RvcmVUeXBlID09IFwiMVwiKSB7XHJcbiAgICAgICAgICB0eXBlID0gXCJXb29jb21tZXJjZVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLlN0b3JlVHlwZSA9PSBcIjJcIikge1xyXG4gICAgICAgICAgdHlwZSA9IFwic2hpcHN0YXRpb25cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5TdG9yZVR5cGUgPT0gXCIzXCIpIHtcclxuICAgICAgICAgIC8vIDE4LTEwLTE1LWFkZCDlop7liqDlupfpi6rnsbvlnovjgJBiYWNrZW5kOnR5eeOAkVxyXG4gICAgICAgICAgdHlwZSA9IFwiYnJpZ2h0cGVhcmxcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5TdG9yZVR5cGUgPT0gXCI0XCIpIHtcclxuICAgICAgICAgIC8vIDE4LTEwLTE1LWFkZCDlop7liqDlupfpi6rnsbvlnovjgJBiYWNrZW5kOnR5eeOAkVxyXG4gICAgICAgICAgdHlwZSA9IFwiZWJheVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLlN0b3JlVHlwZSA9PSBcIjZcIikge1xyXG4gICAgICAgICAgdHlwZSA9IFwid2l4XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuU3RvcmVUeXBlID09IFwiN1wiKSB7XHJcbiAgICAgICAgICAvLyAxOS04LTYtYWRkIOWinuWKoOW6l+mLquexu+Wei1xyXG4gICAgICAgICAgdHlwZSA9IFwiTGF6YWRhXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuU3RvcmVUeXBlID09IFwiOFwiKSB7XHJcbiAgICAgICAgICAvLyAxOS04LTI4LWFkZCDlop7liqDlupfpi6rnsbvlnotcclxuICAgICAgICAgIHR5cGUgPSBcInNob3BlZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PSBcInNob3BpZnlcIikge1xyXG4gICAgICAgICAgaWYgKCEkc2NvcGUubGlua3VybCkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coXCJQbGVhc2UgaW5wdXQgc3RvcmUgbGluayBoZXJlLlwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIGVsc2UgaWYoISRzY29wZS5hcGlQYXNzd29yZCl7XHJcbiAgICAgICAgICAvLyAgICAgbGF5ZXIubXNnKCdQbGVhc2UgaW5wdXQgQVBJIFBhc3N3b3JkIGhlcmUuJyk7XHJcbiAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICRzY29wZS5saW5rdXJsLmluZGV4T2YoXCJodHRwczovL1wiKSAhPSAtMSB8fFxyXG4gICAgICAgICAgICAgICRzY29wZS5saW5rdXJsLmluZGV4T2YoXCJodHRwOi8vXCIpICE9IC0xXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnU3RvcmUgSUQgb25seSwgbm8gXCJodHRwczovL1wiIG9yIFwiaHR0cDovL1wiLicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlmICgkc2NvcGUubGlua3VybC5lbmRzV2l0aChcIi5teXNob3BpZnkuY29tXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubGlua3VybCA9ICRzY29wZS5saW5rdXJsLnJlcGxhY2UoLy5teXNob3BpZnkuY29tL2ksIFwiXCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuwqDCoMKgwqDCoMKgwqDCoCAgICAgIGNvbnN0wqBtc2dMb2FkaW5nwqA9wqBjak1lc3NhZ2UubG9hZGluZyh7wqBpc0ZpeGVkOiB0cnVlwqB9KTtcclxuICAgICAgICAgICAgICBkc3AuZ2V0RnVuKFxyXG4gICAgICAgICAgICAgICAgYHBsYXRmb3JtLXNob3AvYXV0aG9yaXplL2dldEF1dGhvclVybD9mcm9tVHlwZT0yJnNob3BOYW1lPSR7JHNjb3BlLmxpbmt1cmx9JnBsYXRmb3JtPVNIT1BJRllgLFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBjb2RlID0gZGF0YS5jb2RlO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoY29kZSAhPSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSA9PT0gMTAwMDcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIOatpOeKtuaAgSAxLiDmmL7npLrmjojmnYPlvLnmoYYgICAyLiDlhbPpl63lvZPliY3lvLnmoYZcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5TdG9yZURpYWxvZyA9IGZhbHNlOyAvLyAyLiDlhbPpl63lvZPliY3lvLnmoYZcclxuICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmFsZXJ0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlRoZSBzdG9yZSBhbHJlYWR5IGV4aXN0cywgdGhlIGJvdW5kIG1haWxib3ggaXM6XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWVzc2FnZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCIsIGlmIGl0IGlzIHlvdXIgZW1haWwsIHBsZWFzZSBsb2cgaW4gd2l0aCB0aGlzIGVtYWlsIGFjY291bnQuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBidG46IFwiT0ssIEkgZ290IGl0LlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNraW46IFwiYXV0aC1idG5cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBidG5BbGlnbjogXCJjXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5tZXNzYWdlQm94U2hvdyA9IHRydWU7Ly8xLiDmmL7npLrmjojmnYPlvLnmoYZcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbiA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJXb29jb21tZXJjZVwiKSB7XHJcbiAgICAgICAgICBpZiAoISRzY29wZS5TaXRlVXJsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXllci5tc2coXCJQbGVhc2UgZW50ZXIgU2l0ZSBVcmwuXCIpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICghJHNjb3BlLkNvbnN1bWVyS2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXllci5tc2coXCJQbGVhc2UgZW50ZXIgU2VsbGVyIElkLlwiKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoISRzY29wZS5Db25zdW1lclNlY3JldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIubXNnKFwiUGxlYXNlIGVudGVyIE1XUyBBdXRoIFRva2VuLlwiKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAkc2NvcGUuU2l0ZVVybC5pbmRleE9mKFwiaHR0cHM6Ly9cIikgIT0gLTEgfHxcclxuICAgICAgICAgICAgICAkc2NvcGUuU2l0ZVVybC5pbmRleE9mKFwiaHR0cDovL1wiKSAhPSAtMVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAvLyDkuI3lhYHorrjloavlhplodHRwc+aIluiAhWh0dHBcclxuICAgICAgICAgICAgICByZXR1cm4gbGF5ZXIubXNnKCdTdG9yZSBJRCBvbmx5LCBubyBcImh0dHBzOi8vXCIgb3IgXCJodHRwOi8vXCIuJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gZHNwLmxvYWQoKTtcclxuICAgICAgICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgICAgICAgIC8vIHZhciBhZGRTdG9yZURhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAvLyBhZGRTdG9yZURhdGEudXNlcklkID0gJHNjb3BlLnVzZXJJZDtcclxuICAgICAgICAgICAgICAvLyBhZGRTdG9yZURhdGEudG9rZW4gPSAkc2NvcGUudG9rZW47XHJcbiAgICAgICAgICAgICAgLy8gYWRkU3RvcmVEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgLy8gICBuYW1lOiAkc2NvcGUuU2l0ZVVybCxcclxuICAgICAgICAgICAgICAvLyAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgICAgLy8gICBjb25zdW1lcktleTogJHNjb3BlLkNvbnN1bWVyS2V5LFxyXG4gICAgICAgICAgICAgIC8vICAgY29uc3VtZXJTZWNyZXQ6ICRzY29wZS5Db25zdW1lclNlY3JldFxyXG4gICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICAgIHVzZXJJZDogJHNjb3BlLnVzZXJJZCxcclxuICAgICAgICAgICAgICAgIGNvbnN1bWVyS2V5OiAkc2NvcGUuQ29uc3VtZXJLZXksXHJcbiAgICAgICAgICAgICAgICBjb25zdW1lclNlY3JldDogJHNjb3BlLkNvbnN1bWVyU2VjcmV0LFxyXG4gICAgICAgICAgICAgICAgcGxhdGZvcm06ICdXT09DT01NRVJDRScsXHJcbiAgICAgICAgICAgICAgICBmcm9tVHlwZTogJzInLFxyXG4gICAgICAgICAgICAgICAgc2hvcE5hbWU6ICRzY29wZS5TaXRlVXJsLFxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgbGV0IHF1ZXJ5U3RyID0gXCJcIiwgZnJpc3RGbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyYW1zW2tleV1cclxuICAgICAgICAgICAgICAgIHF1ZXJ5U3RyICs9IGAke2ZyaXN0RmxhZyA/ICc/JyA6ICcmJ30ke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YFxyXG4gICAgICAgICAgICAgICAgZnJpc3RGbGFnID0gZmFsc2VcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZHNwLmdldEZ1bihcInBsYXRmb3JtLXNob3AvYXV0aG9yaXplL3NhdmVTaG9wXCIrIHF1ZXJ5U3RyLCBmdW5jdGlvbihcclxuICAgICAgICAgICAgICAgIGRhdGFcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGRzcC5jbG9zZUxvYWQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBkYXRhLmNvZGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgLy8gbGF5ZXIubXNnKFwiQXV0aG9yaXphdGlvbiBTdWNjZXNzZnVsbHkuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuU3RvcmVEaWFsb2cgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnd2VsY29tZS5odG1sP2Zyb209YXV0aG9yaXplJnJlc3VsdD0xJ1xyXG4gICAgICAgICAgICAgICAgfSAgZWxzZSBpZiAoY29kZSA9PSAxMDAxMykge1xyXG4gICAgICAgICAgICAgICAgICBsYXllci5tc2coZGF0YS5tZXNzYWdlLHt0aW1lOiAzMDAwfSwoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ub3RTaG93T0F1dGggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBsYXllci5tc2coZGF0YS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g6Lez6L2s5Yiw6L+U5Zue55qE572R5Z2AXHJcbiAgICAgICAgICAgICAgICAvLyAkd2luZG93LmxvY2F0aW9uID0gZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJzaGlwc3RhdGlvblwiKSB7XHJcbiAgICAgICAgICBnb0F1dGhTaGlwc3RhdGlvbihkc3AsICRzY29wZSlcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJicmlnaHRwZWFybFwiKSB7XHJcbiAgICAgICAgICAvLyAxOC0xMC0xNS1hZGQg5aKe5Yqg5bqX6Yuq57G75Z6L44CQYmFja2VuZDp0eXnjgJFcclxuICAgICAgICAgIGlmICghJHNjb3BlLmJyaWdodHBlYXJsX2FwcF9yZWYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxheWVyLm1zZyhcIlBsZWFzZSBicmlnaHRwZWFybC1hcHAtcmVmLlwiKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoISRzY29wZS5hY2NvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXllci5tc2coXCJQbGVhc2UgYWNjb3VudC5cIik7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCEkc2NvcGUuYnJpZ2h0cGVhcmxfYWNjb3VudF90b2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIubXNnKFwiUGxlYXNlIGJyaWdodHBlYXJsLWFjY291bnQtdG9rZW4uXCIpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGFkZFN0b3JlRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICBhZGRTdG9yZURhdGEudXNlcklkID0gJHNjb3BlLnVzZXJJZDtcclxuICAgICAgICAgICAgYWRkU3RvcmVEYXRhLnRva2VuID0gJHNjb3BlLnRva2VuO1xyXG4gICAgICAgICAgICBhZGRTdG9yZURhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgIGFjY291bnQ6ICRzY29wZS5hY2NvdW50LFxyXG4gICAgICAgICAgICAgIGNvbnN1bWVya2V5OiAkc2NvcGUuYnJpZ2h0cGVhcmxfYXBwX3JlZixcclxuICAgICAgICAgICAgICBjb25zdW1lclNlY3JldDogJHNjb3BlLmJyaWdodHBlYXJsX2FjY291bnRfdG9rZW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIGRzcC5sb2FkKCk7XHJcbiAgICAgICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgICAgIGRzcC5wb3N0RnVuKFxyXG4gICAgICAgICAgICAgIFwiYXBwL3Nob3AvYWRkQnJpZ2h0cGVhcmxcIixcclxuICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShhZGRTdG9yZURhdGEpLFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRzcC5jbG9zZUxvYWQoKTtcclxuICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBkYXRhLnN0YXR1c0NvZGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiQXV0aG9yaXphdGlvbiBTdWNjZXNzZnVsbHkuXCIpO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgaXNFbXBvd2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJpc0VtcG93ZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChpc0VtcG93ZXIgPT0gXCIwXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImlzRW1wb3dlclwiLCBcIjFcIik7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNFbXBvd2VyID09IFwiMlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJpc0VtcG93ZXJcIiwgXCIyXCIpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiMvbXlDSkFzc29jaWF0ZWRTdG9yZVwiO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuU3RvcmVEaWFsb2cgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkZFN0b3JlRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiQXV0aG9yaXphdGlvbiBGYWlsZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g6Lez6L2s5Yiw6L+U5Zue55qE572R5Z2AXHJcbiAgICAgICAgICAgICAgICAvLyAkd2luZG93LmxvY2F0aW9uID0gZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImViYXlcIikge1xyXG4gICAgICAgICAgaWYgKCEkc2NvcGUuZWJheWxpbmt1cmwpIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKFwiUGxlYXNlIGlucHV0IHN0b3JlIGxpbmsgaGVyZS5cIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGdvQXV0aFN0b3JlKGRzcCwgdHlwZSwgeyBzaG9wTmFtZTokc2NvcGUuZWJheWxpbmt1cmwgfSlcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJ3aXhcIikge1xyXG4gICAgICAgICAgaWYgKCEkc2NvcGUud2l4TmFtZSkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coXCJQbGVhc2UgZW50ZXIgU3RvcmUgVVJMLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAkc2NvcGUud2l4TmFtZS5pbmRleE9mKFwiaHR0cHM6Ly9cIikgPT0gLTEgJiZcclxuICAgICAgICAgICAgJHNjb3BlLndpeE5hbWUuaW5kZXhPZihcImh0dHA6Ly9cIikgPT0gLTFcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coXCJQbGVhc2UgZW50ZXIgYSBVUkwgc3RhcnRpbmcgd2l0aCBodHRwOi8vIG9yIGh0dHBzOi8vXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgICAgbGV0IGFkZFdpeERhdGEgPSB7fTtcclxuICAgICAgICAgIGFkZFdpeERhdGEudXNlcklkID0gJHNjb3BlLnVzZXJJZDtcclxuICAgICAgICAgIGFkZFdpeERhdGEudG9rZW4gPSAkc2NvcGUudG9rZW47XHJcbiAgICAgICAgICBhZGRXaXhEYXRhLmRhdGEgPSBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIHR5cGU6IFwid2l4XCIsXHJcbiAgICAgICAgICAgIHdpeE5hbWU6ICRzY29wZS53aXhOYW1lXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGRzcC5wb3N0RnVuKFwiYXBwL3Nob3AvYWRkV2l4XCIsIEpTT04uc3RyaW5naWZ5KGFkZFdpeERhdGEpLCBmdW5jdGlvbihcclxuICAgICAgICAgICAgZGF0YVxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5zdGF0dXNDb2RlICE9IDIwMCkge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOi3s+i9rOWIsOi/lOWbnueahOe9keWdgFxyXG4gICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uID0gZGF0YS5kYXRhLnJlc3VsdDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgLy8g5re75YqgQW1hem9uXHJcbiAgICAgICRzY29wZS5hbWF6b25TdWIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoISRzY29wZS5zaG9wTmFtZSkge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKFwiUGxlYXNlIGVudGVyIFN0b3JlIG5hbWUuXCIpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISRzY29wZS5jb3VudHJ5KSB7XHJcbiAgICAgICAgICBsYXllci5tc2coXCJQbGVhc2UgZW50ZXIgQ291bnRyeS5cIik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghJHNjb3BlLmNvbnN1bWVyS2V5KSB7XHJcbiAgICAgICAgICBsYXllci5tc2coXCJQbGVhc2UgZW50ZXIgU2VsbGVyIElkLlwiKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuY29uc3VtZXJTZWNyZXQpIHtcclxuICAgICAgICAgIGxheWVyLm1zZyhcIlBsZWFzZSBlbnRlciBNV1MgQXV0aCBUb2tlbi5cIik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgIHNob3BOYW1lOiAkc2NvcGUuc2hvcE5hbWUsXHJcbiAgICAgICAgICBjb3VudHJ5OiAkc2NvcGUuY291bnRyeSxcclxuICAgICAgICAgIGNvbnN1bWVyS2V5OiAkc2NvcGUuY29uc3VtZXJLZXksXHJcbiAgICAgICAgICBjb25zdW1lclNlY3JldDogJHNjb3BlLmNvbnN1bWVyU2VjcmV0XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgIGRzcC5nZXRGdW4oXHJcbiAgICAgICAgICBgcGxhdGZvcm0tc2hvcC9hdXRob3JpemUvc2F2ZVNob3A/cGxhdGZvcm09QU1BWk9OJnNob3BOYW1lPSR7JHNjb3BlLnNob3BOYW1lfSZjb3VudHJ5PSR7JHNjb3BlLmNvdW50cnl9JmNvbnN1bWVyS2V5PSR7JHNjb3BlLmNvbnN1bWVyS2V5fSZjb25zdW1lclNlY3JldD0keyRzY29wZS5jb25zdW1lclNlY3JldH1gLFxyXG4gICAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ3dlbGNvbWUuaHRtbD9mcm9tPWF1dGhvcml6ZSZyZXN1bHQ9MSdcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmRhdGEuc3RhdHVzQ29kZSA9PSBcIjIwOVwiKSB7XHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiQXV0aG9yaXphdGlvbiBGYWlsZWQuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9O1xyXG4gICAgICAvKiDnlKjkuo7pgq7nrrHpqozor4HnmoTlh73mlbAgKi9cclxuICAgICAgZnVuY3Rpb24gdmFsaWRhdGVFbWFpbChlbWFpbCkge1xyXG4gICAgICAgIC8vIOmCrueusemqjOivgeato+WImVxyXG4gICAgICAgIHZhciByZWcgPSAvXltBLVphLXowLTldKyhbX1xcLl1bQS1aYS16MC05XSspKkAoW0EtWmEtejAtOVxcLV0rXFwuKStbQS1aYS16XXsyLDZ9JC87XHJcbiAgICAgICAgcmV0dXJuIHJlZy50ZXN0KGVtYWlsKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLlNob3BpZnlVcGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyDph43mlrDmjojmnYPlupfpk7pcclxuICAgICAgICB2YXIgdHlwZTtcclxuICAgICAgICBpZiAoJHNjb3BlLlN0b3JlVHlwZSA9PSBcIjBcIikge1xyXG4gICAgICAgICAgdHlwZSA9IFwic2hvcGlmeVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLlN0b3JlVHlwZSA9PSBcIjFcIikge1xyXG4gICAgICAgICAgdHlwZSA9IFwiV29vY29tbWVyY2VcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5TdG9yZVR5cGUgPT0gXCIyXCIpIHtcclxuICAgICAgICAgIHR5cGUgPSBcInNoaXBzdGF0aW9uXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuU3RvcmVUeXBlID09IFwiM1wiKSB7XHJcbiAgICAgICAgICAvLyAxOC0xMC0xNS1hZGQg5aKe5Yqg5bqX6Yuq57G75Z6L44CQYmFja2VuZDp0eXnjgJFcclxuICAgICAgICAgIHR5cGUgPSBcImJyaWdodHBlYXJsXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuU3RvcmVUeXBlID09IFwiNFwiKSB7XHJcbiAgICAgICAgICAvLyAxOC0xMC0xNS1hZGQg5aKe5Yqg5bqX6Yuq57G75Z6L44CQYmFja2VuZDp0eXnjgJFcclxuICAgICAgICAgIHR5cGUgPSBcImViYXlcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJzaG9waWZ5XCIpIHtcclxuICAgICAgICAgIGlmICghJHNjb3BlLmxpbmt1cmwpIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKFwiUGxlYXNlIGlucHV0IHN0b3JlIGxpbmsgaGVyZS5cIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBlbHNlIGlmKCEkc2NvcGUuYXBpUGFzc3dvcmQpe1xyXG4gICAgICAgICAgLy8gICAgIGxheWVyLm1zZygnUGxlYXNlIGlucHV0IEFQSSBQYXNzd29yZCBoZXJlLicpO1xyXG4gICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAkc2NvcGUubGlua3VybC5pbmRleE9mKFwiaHR0cHM6Ly9cIikgIT0gLTEgfHxcclxuICAgICAgICAgICAgICAkc2NvcGUubGlua3VybC5pbmRleE9mKFwiaHR0cDovL1wiKSAhPSAtMVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBsYXllci5tc2coJ1N0b3JlIElEIG9ubHksIG5vIFwiaHR0cHM6Ly9cIiBvciBcImh0dHA6Ly9cIi4nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbsKgwqDCoMKgwqDCoMKgwqAgICAgICBjb25zdMKgbXNnTG9hZGluZ8KgPcKgY2pNZXNzYWdlLmxvYWRpbmcoe8KgaXNGaXhlZDogdHJ1ZcKgfSk7XHJcbiAgICAgICAgICAgICAgZHNwLmdldEZ1bihcclxuICAgICAgICAgICAgICAgIGBwbGF0Zm9ybS1zaG9wL2F1dGhvcml6ZS9nZXRBdXRob3JVcmw/ZnJvbVR5cGU9MiZzaG9wTmFtZT0keyRzY29wZS5saW5rdXJsfSZwbGF0Zm9ybT1TSE9QSUZZYCxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgbXNnTG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGRhdGEuY29kZTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgIT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgPT09IDEwMDA3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyDmraTnirbmgIEgMS4g5pi+56S65o6I5p2D5by55qGGICAgMi4g5YWz6Zet5b2T5YmN5by55qGGXHJcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuU3RvcmVEaWFsb2cgPSBmYWxzZTsgLy8gMi4g5YWz6Zet5b2T5YmN5by55qGGXHJcbiAgICAgICAgICAgICAgICAgICAgICBsYXllci5hbGVydChcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJUaGUgc3RvcmUgYWxyZWFkeSBleGlzdHMsIHRoZSBib3VuZCBtYWlsYm94IGlzOlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1lc3NhZ2UgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiLCBpZiBpdCBpcyB5b3VyIGVtYWlsLCBwbGVhc2UgbG9nIGluIHdpdGggdGhpcyBlbWFpbCBhY2NvdW50LlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiBcIk9LLEkgZ290IGl0LlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNraW46IFwiYXV0aC1idG5cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBidG5BbGlnbjogXCJjXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5tZXNzYWdlQm94U2hvdyA9IHRydWU7Ly8xLiDmmL7npLrmjojmnYPlvLnmoYZcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZHNwLmNqTWVzRnVuKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbiA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIG1zZ0xvYWRpbmcuaGlkZSgpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgLy8gZHNwLnBvc3RGdW4oXHJcbiAgICAgICAgICAgICAgLy8gICBcImFwcC9zaG9wL3VwZGF0ZVwiLFxyXG4gICAgICAgICAgICAgIC8vICAgSlNPTi5zdHJpbmdpZnkocmVBZGRTdG9yZURhdGEpLFxyXG4gICAgICAgICAgICAgIC8vICAgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgIC8vICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgLy8gICAgIHZhciBkYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIC8vICAgICB2YXIgY29kZSA9IGRhdGEuc3RhdHVzQ29kZTtcclxuICAgICAgICAgICAgICAvLyAgICAgaWYgKGNvZGUgIT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgLy8gICAgICAgbGF5ZXIubXNnKFxyXG4gICAgICAgICAgICAgIC8vICAgICAgICAgXCJUaGUgc2VydmVyIGlzIGJ1c3kgbm93LCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiXHJcbiAgICAgICAgICAgICAgLy8gICAgICAgKTtcclxuICAgICAgICAgICAgICAvLyAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgICAvLyAgICAgLy8g6Lez6L2s5Yiw6L+U5Zue55qE572R5Z2AXHJcbiAgICAgICAgICAgICAgLy8gICAgICR3aW5kb3cubG9jYXRpb24gPSBkYXRhLnJlc3VsdDtcclxuICAgICAgICAgICAgICAvLyAgIH0sXHJcbiAgICAgICAgICAgICAgLy8gICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAvLyAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgIC8vICAgICBsYXllci5tc2coXCJUaGUgc2VydmVyIGlzIGJ1c3kgbm93LCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKTtcclxuICAgICAgICAgICAgICAvLyAgIH1cclxuICAgICAgICAgICAgICAvLyApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlID09IFwiZWJheVwiKSB7XHJcbiAgICAgICAgICBpZiAoISRzY29wZS5lYmF5bGlua3VybCkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coXCJQbGVhc2UgaW5wdXQgc3RvcmUgbGluayBoZXJlLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZ29BdXRoU3RvcmUoZHNwLCB0eXBlLCB7IHNob3BOYW1lOiRzY29wZS5lYmF5bGlua3VybCB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PSBcIldvb2NvbW1lcmNlXCIpIHtcclxuICAgICAgICAgIGlmICghJHNjb3BlLlNpdGVVcmwpIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKFwiUGxlYXNlIGVudGVyIFNpdGUgVXJsLlwiKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoISRzY29wZS5Db25zdW1lcktleSkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coXCJQbGVhc2UgZW50ZXIgU2VsbGVyIElkLlwiKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoISRzY29wZS5Db25zdW1lclNlY3JldCkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coXCJQbGVhc2UgZW50ZXIgTVdTIEF1dGggVG9rZW4uXCIpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICRzY29wZS5TaXRlVXJsLmluZGV4T2YoXCJodHRwczovL1wiKSAhPSAtMSB8fFxyXG4gICAgICAgICAgICAgICRzY29wZS5TaXRlVXJsLmluZGV4T2YoXCJodHRwOi8vXCIpICE9IC0xXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIGxheWVyLm1zZygnU3RvcmUgSUQgb25seSwgbm8gXCJodHRwczovL1wiIG9yIFwiaHR0cDovL1wiLicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgICAgICAgLy8gdmFyIGFkZFN0b3JlRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgIC8vIGFkZFN0b3JlRGF0YS51c2VySWQgPSAkc2NvcGUudXNlcklkO1xyXG4gICAgICAgICAgICAgIC8vIGFkZFN0b3JlRGF0YS50b2tlbiA9ICRzY29wZS50b2tlbjtcclxuICAgICAgICAgICAgICAvLyBhZGRTdG9yZURhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAvLyAgIG5hbWU6ICRzY29wZS5TaXRlVXJsLFxyXG4gICAgICAgICAgICAgIC8vICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgICAvLyAgIGNvbnN1bWVyS2V5OiAkc2NvcGUuQ29uc3VtZXJLZXksXHJcbiAgICAgICAgICAgICAgLy8gICBjb25zdW1lclNlY3JldDogJHNjb3BlLkNvbnN1bWVyU2VjcmV0XHJcbiAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgICAgdXNlcklkOiAkc2NvcGUudXNlcklkLFxyXG4gICAgICAgICAgICAgICAgY29uc3VtZXJLZXk6ICRzY29wZS5Db25zdW1lcktleSxcclxuICAgICAgICAgICAgICAgIGNvbnN1bWVyU2VjcmV0OiAkc2NvcGUuQ29uc3VtZXJTZWNyZXQsXHJcbiAgICAgICAgICAgICAgICBwbGF0Zm9ybTogJ1dPT0NPTU1FUkNFJyxcclxuICAgICAgICAgICAgICAgIGZyb21UeXBlOiAnMicsXHJcbiAgICAgICAgICAgICAgICBzaG9wTmFtZTogJHNjb3BlLlNpdGVVcmwsXHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBsZXQgcXVlcnlTdHIgPSBcIlwiLCBmcmlzdEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbXNba2V5XVxyXG4gICAgICAgICAgICAgICAgcXVlcnlTdHIgKz0gYCR7ZnJpc3RGbGFnID8gJz8nIDogJyYnfSR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gXHJcbiAgICAgICAgICAgICAgICBmcmlzdEZsYWcgPSBmYWxzZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBkc3AuZ2V0RnVuKFwicGxhdGZvcm0tc2hvcC9hdXRob3JpemUvc2F2ZVNob3BcIisgcXVlcnlTdHIsIGZ1bmN0aW9uKFxyXG4gICAgICAgICAgICAgICAgZGF0YVxyXG4gICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgZHNwLmNsb3NlTG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGRhdGEuY29kZTtcclxuICAgICAgICAgICAgICAgIGlmIChjb2RlID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICd3ZWxjb21lLmh0bWw/ZnJvbT1hdXRob3JpemUmcmVzdWx0PTEnXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBsYXllci5tc2coZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0eXBlID09IFwic2hpcHN0YXRpb25cIil7XHJcbiAgICAgICAgICBnb0F1dGhTaGlwc3RhdGlvbihkc3AsICRzY29wZSwgeyBzaG9wTmFtZTogdXBkYXRlSXRlbS5uYW1lIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8g56aB55So5bqX6ZO6XHJcbiAgICAgICRzY29wZS5vcGVyYXRlU3RvcmUgPSBmdW5jdGlvbihzdG9yZUlkLCBvcGVTdGF0dWUsIHNjYikge1xyXG4gICAgICAgIHZhciBkZWFjdFN0b3JlRGF0YSA9IHt9O1xyXG4gICAgICAgIGRlYWN0U3RvcmVEYXRhLnVzZXJJZCA9ICRzY29wZS51c2VySWQ7XHJcbiAgICAgICAgZGVhY3RTdG9yZURhdGEudG9rZW4gPSAkc2NvcGUudG9rZW47XHJcbiAgICAgICAgZGVhY3RTdG9yZURhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGlkOiBzdG9yZUlkLFxyXG4gICAgICAgICAgc3RhdHVzOiBvcGVTdGF0dWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBkc3AucG9zdEZ1bihcclxuICAgICAgICAgIFwiYXBwL3Nob3Avc3RhcnRzdG9wXCIsXHJcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShkZWFjdFN0b3JlRGF0YSksXHJcbiAgICAgICAgICBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZGF0YS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvZGUgPSBkYXRhLnN0YXR1c0NvZGU7XHJcbiAgICAgICAgICAgIGlmIChjb2RlICE9IDIwMCkge1xyXG4gICAgICAgICAgICAgIGxheWVyLm1zZyhcIlRoZSBzZXJ2ZXIgaXMgYnVzeSBub3csIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzY2IoKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGF5ZXIubXNnKFwiVGhlIHNlcnZlciBpcyBidXN5IG5vdywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfTtcclxuICAgICAgJHNjb3BlLnBvcENvbmZpcm1UeXBlID0gJyc7XHJcbiAgICAgICRzY29wZS5zdG9yZUlkID0gJyc7XHJcbiAgICAgICRzY29wZS5kZWFjdGl2YXRlID0gZnVuY3Rpb24gKHN0b3JlSWQpIHtcclxuICAgICAgICAkc2NvcGUucG9wQ29uZmlybVR5cGUgPSAnZGVhY3RpdmF0ZSc7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSAnQXJlIHlvdSBzdXJlIHRvIGRlYWN0aXZhdGUgdGhlIGNvbm5lY3Rpb24gPyc7XHJcbiAgICAgICAgJHNjb3BlLnNob3dQb3BVcHMgPSB0cnVlO1xyXG4gICAgICAgICRzY29wZS5zdG9yZUlkID0gc3RvcmVJZDtcclxuICAgICAgICBcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIOWQr+eUqOW6l+mTulxyXG4gICAgICAkc2NvcGUuYWN0aXZhdGUgPSBmdW5jdGlvbiAoc3RvcmVJZCkge1xyXG4gICAgICAgICRzY29wZS5vcGVyYXRlU3RvcmUoc3RvcmVJZCwgMSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coXHJcbiAgICAgICAgICAgIFwiQWN0aXZhdGVkXCIsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0aW1lOiAxMDAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbiA9ICdteUNKLmh0bWwjL2F1dGhvcml6ZSc7XHJcbiAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIOmHjeaWsOaOiOadg1xyXG4gICAgICB2YXIgdXBkYXRlSXRlbTtcclxuICAgICAgJHNjb3BlLnJlYXV0aG9yaXplID0gZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgIHVwZGF0ZUl0ZW0gPSBpdGVtO1xyXG4gICAgICAgICRzY29wZS51cGRhdGVTdG9yZUZsYWcgPSB0cnVlO1xyXG4gICAgICAgIC8vICRzY29wZS5TdG9yZURpYWxvZyA9IHRydWU7XHJcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PSBcInNob3BpZnlcIikge1xyXG4gICAgICAgICAgJHNjb3BlLlN0b3JlVHlwZSA9IFwiMFwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09IFwiV29vY29tbWVyY2VcIikge1xyXG4gICAgICAgICAgJHNjb3BlLlN0b3JlVHlwZSA9IFwiMVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09IFwiU2hpcHN0YXRpb25cIikge1xyXG4gICAgICAgICAgJHNjb3BlLlN0b3JlVHlwZSA9IFwiMlwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09IFwiYnJpZ2h0cGVhcmxcIikge1xyXG4gICAgICAgICAgLy8gMTgtMTAtMTUtYWRkIOWinuWKoOW6l+mLquexu+Wei+OAkGJhY2tlbmQ6dHl544CRXHJcbiAgICAgICAgICAkc2NvcGUuU3RvcmVUeXBlID0gXCIzXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT0gXCJlYmF5XCIpIHtcclxuICAgICAgICAgIC8vIDE4LTEwLTE1LWFkZCDlop7liqDlupfpi6rnsbvlnovjgJBiYWNrZW5kOnR5eeOAkVxyXG4gICAgICAgICAgJHNjb3BlLlN0b3JlVHlwZSA9IFwiNFwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSBcImFtYXpvblwiKSB7XHJcbiAgICAgICAgICAkc2NvcGUuU3RvcmVUeXBlID0gXCI1XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09IFwid2l4XCIpIHtcclxuICAgICAgICAgICRzY29wZS5TdG9yZVR5cGUgPSBcIjZcIjtcclxuICAgICAgICAgIHJldHVybiBnb0F1dGhTdG9yZShkc3AsIGl0ZW0udHlwZSlcclxuICAgICAgICAgIC8vICRzY29wZS53aXhOYW1lID0gaXRlbS5uYW1lXHJcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdMYXphZGEnKSB7XHJcbiAgICAgICAgICAkc2NvcGUuU3RvcmVUeXBlID0gXCI3XCJcclxuICAgICAgICAgIHJldHVybiBnb0F1dGhTdG9yZShkc3AsIGl0ZW0udHlwZSlcclxuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3Nob3BlZScpIHtcclxuICAgICAgICAgICRzY29wZS5TdG9yZVR5cGUgPSBcIjhcIlxyXG4gICAgICAgICAgcmV0dXJuIGdvQXV0aFN0b3JlKGRzcCwgaXRlbS50eXBlKVxyXG4gICAgICAgIH0gZWxzZSBpZihpdGVtLnR5cGUgPT09ICdldHN5Jykge1xyXG4gICAgICAgICAgJHNjb3BlLlN0b3JlVHlwZSA9ICcxMCdcclxuICAgICAgICAgIHJldHVybiBnb0F1dGhTdG9yZShkc3AsIGl0ZW0udHlwZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgkc2NvcGUuU3RvcmVUeXBlICE9IFwiN1wiICYmICRzY29wZS5TdG9yZVR5cGUgIT0gXCI4XCIpIHtcclxuICAgICAgICAgICRzY29wZS5TdG9yZURpYWxvZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vICRzY29wZS5TdG9yZVR5cGUgPSBpdGVtLnR5cGU7XHJcbiAgICAgICAgJHNjb3BlLmxpbmt1cmwgPSBpdGVtLm5hbWU7XHJcbiAgICAgICAgJHNjb3BlLlNpdGVVcmwgPSBpdGVtLm5hbWU7XHJcbiAgICAgICAgJHNjb3BlLmViYXlsaW5rdXJsID0gaXRlbS5uYW1lO1xyXG4gICAgICAgICRzY29wZS5Db25zdW1lcktleSA9IGl0ZW0uY29uc3VtZXJrZXk7XHJcbiAgICAgICAgJHNjb3BlLkNvbnN1bWVyU2VjcmV0ID0gaXRlbS5jb25zdW1lclNlY3JldDtcclxuICAgICAgICAkc2NvcGUuQVBJS2V5ID0gaXRlbS5jb25zdW1lcmtleTtcclxuICAgICAgICAkc2NvcGUuQVBJU2VjcmV0ID0gaXRlbS5jb25zdW1lclNlY3JldDtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vICRzY29wZS5hZGRQT0RGYWlsID0gdHJ1ZTtcclxuICAgICAgdmFyIGFkZFBPREl0ZW07XHJcbiAgICAgICRzY29wZS5hZGRQT0RGZWF0dXJlID0gZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgIGlmKCRzY29wZS5mcm9tRXJwTm90QWRtaW4pIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnWW91IGNhbm5vdCBlZGl0IGl0LicpXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgYWRkUE9ESXRlbSA9IGl0ZW07XHJcbiAgICAgICAgLy8gbGF5ZXIubG9hZCgyKTtcclxuwqDCoMKgwqDCoMKgwqDCoGNvbnN0wqBtc2dMb2FkaW5nwqA9wqBjak1lc3NhZ2UubG9hZGluZyh7IGlzRml4ZWQ6IHRydWXCoH0pXHJcbiAgICAgICAgZHNwLnBvc3RGdW4oXHJcbiAgICAgICAgICBcImFwcC9zaG9wL3VwU2hvcEluZGl2aWR1YXRpb25OdW1cIixcclxuICAgICAgICAgIHsgSUQ6IGl0ZW0uaWQgfSxcclxuICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1c0NvZGUgIT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgLy8gbGF5ZXIubXNnKCdBZGRlZCBmYWlsZWQnKTtcclxuICAgICAgICAgICAgICAkc2NvcGUuYWRkUE9ERmFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiQWRkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zdG9yZUxpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZ2V0U3RvcmVMaXN0KHt9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbXNnTG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfTtcclxuICAgICAgJHNjb3BlLlJlYXV0aEFmdGVyQWRkRmFpbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciByZUFkZFN0b3JlRGF0YSA9IHt9O1xyXG4gICAgICAgIHJlQWRkU3RvcmVEYXRhLnVzZXJJZCA9ICRzY29wZS51c2VySWQ7XHJcbiAgICAgICAgcmVBZGRTdG9yZURhdGEudG9rZW4gPSAkc2NvcGUudG9rZW47XHJcbiAgICAgICAgcmVBZGRTdG9yZURhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGlkOiBhZGRQT0RJdGVtLmlkLFxyXG4gICAgICAgICAgbmFtZTogYWRkUE9ESXRlbS5uYW1lLFxyXG4gICAgICAgICAgdHlwZTogYWRkUE9ESXRlbS50eXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGF5ZXIubG9hZCgyKTtcclxuICAgICAgICBkc3AucG9zdEZ1bihcclxuICAgICAgICAgIFwiYXBwL3Nob3AvdXBkYXRlXCIsXHJcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShyZUFkZFN0b3JlRGF0YSksXHJcbiAgICAgICAgICBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGxheWVyLmNsb3NlQWxsKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gZGF0YS5zdGF0dXNDb2RlO1xyXG4gICAgICAgICAgICBpZiAoY29kZSAhPSAyMDApIHtcclxuICAgICAgICAgICAgICBsYXllci5tc2coXCJUaGUgc2VydmVyIGlzIGJ1c3kgbm93LCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKTtcclxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g6Lez6L2s5Yiw6L+U5Zue55qE572R5Z2AXHJcbiAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24gPSBkYXRhLnJlc3VsdDtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICBsYXllci5tc2coXCJUaGUgc2VydmVyIGlzIGJ1c3kgbm93LCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9O1xyXG4gICAgICAkc2NvcGUucmVtb3ZlUE9ERmVhdHVyZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICBpZigkc2NvcGUuZnJvbUVycE5vdEFkbWluKSB7XHJcbiAgICAgICAgICBsYXllci5tc2coJ1lvdSBjYW5ub3QgZWRpdCBpdC4nKVxyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG7CoMKgwqDCoMKgwqDCoMKgY29uc3TCoG1zZ0xvYWRpbmfCoD3CoGNqTWVzc2FnZS5sb2FkaW5nKHvCoGlzRml4ZWQ6IHRydWXCoH0pO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKFxyXG4gICAgICAgICAgXCJhcHAvc2hvcC9kZWxlY3RTaG9wSW5kaXZpZHVhdGlvbk51bVwiLFxyXG4gICAgICAgICAgeyBJRDogaXRlbS5pZCB9LFxyXG4gICAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBtc2dMb2FkaW5nLmhpZGUoKTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1c0NvZGUgIT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKFwiUmVtb3ZlIGZhaWxlZFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBsYXllci5tc2coXCJSZW1vdmUgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zdG9yZUxpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAkc2NvcGUuZ2V0U3RvcmVMaXN0KHt9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbXNnTG9hZGluZy5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHZhciB1cGRhdGVTdG9yZTtcclxuICAgICAgJHNjb3BlLnVwZGF0ZVBPREZlYXR1cmUgPSBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgaWYoJHNjb3BlLmZyb21FcnBOb3RBZG1pbikge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKCdZb3UgY2Fubm90IGVkaXQgaXQuJylcclxuICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICAkc2NvcGUudXBkYXRlUE9EVGFuID0gdHJ1ZTtcclxuICAgICAgICB1cGRhdGVTdG9yZSA9IGl0ZW07XHJcbiAgICAgIH07XHJcbiAgICAgICRzY29wZS5nb1VwZGF0ZVBPRCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciByZUFkZFN0b3JlRGF0YSA9IHt9O1xyXG4gICAgICAgIHJlQWRkU3RvcmVEYXRhLnVzZXJJZCA9ICRzY29wZS51c2VySWQ7XHJcbiAgICAgICAgcmVBZGRTdG9yZURhdGEudG9rZW4gPSAkc2NvcGUudG9rZW47XHJcbiAgICAgICAgcmVBZGRTdG9yZURhdGEuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5vV3JpdGVUaGVtZXM6IFwiMVwiLFxyXG4gICAgICAgICAgaWQ6IHVwZGF0ZVN0b3JlLmlkLFxyXG4gICAgICAgICAgbmFtZTogdXBkYXRlU3RvcmUubmFtZSxcclxuICAgICAgICAgIHR5cGU6IHVwZGF0ZVN0b3JlLnR5cGVcclxuICAgICAgICB9KTtcclxuICAgICAgICBsYXllci5sb2FkKDIpO1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKFwiYXBwL3Nob3AvdXBkYXRlXCIsIEpTT04uc3RyaW5naWZ5KHJlQWRkU3RvcmVEYXRhKSwgZnVuY3Rpb24oXHJcbiAgICAgICAgICBkYXRhXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICB2YXIgZGF0YSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgIHZhciBjb2RlID0gZGF0YS5zdGF0dXNDb2RlO1xyXG4gICAgICAgICAgaWYgKGNvZGUgIT0gMjAwKSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZyhcIlRoZSBzZXJ2ZXIgaXMgYnVzeSBub3csIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyDot7PovazliLDov5Tlm57nmoTnvZHlnYBcclxuICAgICAgICAgICR3aW5kb3cubG9jYXRpb24gPSBkYXRhLnJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgJHNjb3BlLnBvZFNldHRpbmcgPSBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgaWYoaXRlbS5zdGF0dXMgIT0gMSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmKCRzY29wZS5mcm9tRXJwTm90QWRtaW4pIHtcclxuICAgICAgICAgIGxheWVyLm1zZygnWW91IGNhbm5vdCBlZGl0IGl0LicpXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoXCJzaG93cG9kc2V0dGluZ1wiLCBpdGVtKTtcclxuICAgICAgfTtcclxuICAgICAgJHNjb3BlLiRvbihcInBvZHNldHRpbmctc3VjY1wiLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAkc2NvcGUuc3RvcmVMaXN0ID0gW107XHJcbiAgICAgICAgICAkc2NvcGUuZ2V0U3RvcmVMaXN0KHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICAkc2NvcGUuaGFuZGxlU3RvcmVMb2dpc3RpY3MgPSAoaXRlbSkgPT4ge1xyXG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzaG93U3RvcmVMb2dpc3RpY3MnLCB7XHJcbiAgICAgICAgICBpdGVtaW5mbzogaXRlbVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgLy8g54mp5rWB5pig5bCE6K6+572uXHJcbiAgICAgICRzY29wZS5oYW5kbGVTaG93U2hpcHBpbmcgPSAoaXRlbSkgPT4ge1xyXG4gICAgICAgIC8vIEVSUOerr+W8gOWQr+S6hueUqOaIt+eJqea1geaYoOWwhOiuvue9rueahOadg+mZkO+8jOaJjeS8muWxleekuui/meS4quWFpeWPo1xyXG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KFwic2hvd0xvZ2lzdGljc1NldHRpbmdzXCIsIGl0ZW0pO1xyXG4gICAgICB9XHJcbiAgICAgIC8qIOWktOmDqOiPnOWNlei/m+WFpeWfi+eCuSAqL1xyXG4gICAgICBmdW5jdGlvbiB0cmFja0Z1bigpIHtcclxuICAgICAgICBkc3AucG9zdEZ1bihcclxuICAgICAgICAgIFwicG9qby9ob21lL2FkZFN0YXRpc0J5VHlwZVwiLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlbnRyeVBhZ2U6ICtkc3AuZ2V0UXVlcnlTdHJpbmcoXCJ0cmFja1wiKVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICgrZHNwLmdldFF1ZXJ5U3RyaW5nKFwidHJhY2tcIikgPT0gMSkge1xyXG4gICAgICAgIHRyYWNrRnVuKCk7XHJcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiIy9hdXRob3JpemUvU2hvcGlmeVwiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUuY2hhbmdlQWxpYXNOYW1lID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAkc2NvcGUuaXNDaGFuZ2VDdXJyZW50SW5kZXggPSBpbmRleDtcclxuICAgICAgfTtcclxuXHJcbiAgICAgICRzY29wZS51cGF0ZUFsaWFzTmFtZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgIGFsaWFzTmFtZTogaXRlbS5hbGlhc05hbWUsXHJcbiAgICAgICAgICBzaG9wSWQ6IGl0ZW0uaWRcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxheWVyLmxvYWQoMik7XHJcbiAgICAgICAgZHNwLnBvc3RGdW4oXCJhcHAvc2hvcC91cGRhdGVTaG9wQWxpYXNOYW1lXCIsIGRhdGEsIGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTtcclxuICAgICAgICAgIHZhciBjb2RlID0gZGF0YS5zdGF0dXNDb2RlO1xyXG4gICAgICAgICAgaWYgKGNvZGUgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd0RlYWN0aVN0b3JlcygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGNvZGUgIT0gMjAwKSB7XHJcbiAgICAgICAgICAgIGxheWVyLm1zZyhcIuS/ruaUueW6l+mTuuaYteensOWksei0pS5cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICRzY29wZS5pc0NoYW5nZUN1cnJlbnRJbmRleCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgICRzY29wZS5kcm9wRG93biA9IChpdGVtLCBmaWxlZHMpID0+IHtcclxuICAgICAgICBpZihmaWxlZHMgPT0gJ3BvZFNob3cnICYmIGl0ZW0uc3RhdHVzICE9IDEpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICAgICRzY29wZS5zdG9yZUxpc3QgPSAkc2NvcGUuc3RvcmVMaXN0Lm1hcChvID0+ICh7XHJcbiAgICAgICAgICAuLi5vLFxyXG4gICAgICAgICAgYXV0aG9yaXplU2hvdzogZmFsc2UsXHJcbiAgICAgICAgICBzeW5jU2hvdzogZmFsc2UsXHJcbiAgICAgICAgICBlbWxTaG93OiBmYWxzZSxcclxuICAgICAgICAgIHBvZFNob3c6IGZhbHNlLFxyXG4gICAgICAgICAgbG9naXN0aWNzU2hvdzogZmFsc2UsXHJcbiAgICAgICAgICBbZmlsZWRzXTogb1tmaWxlZHNdID8gZmFsc2UgOiBvLmlkID09PSBpdGVtLmlkLFxyXG4gICAgICAgIH0pKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBpbml0Q29uZmlybUJveCAoe2NvbnRlbnQsIGNifSkge1xyXG4gICAgICAgICRzY29wZS5jb25maXJtQm94ID0ge1xyXG4gICAgICAgICAgc2hvd0ZsYWc6IHRydWUsXHJcbiAgICAgICAgICBjb25maXJtKCkge1xyXG4gICAgICAgICAgICBjYiAmJiBjYigpXHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0ZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0ZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjb250ZW50LFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuY29udGVudCA9ICdBcmUgeW91IHN1cmUgdG8gZW5hYmxlIGludmVudG9yeSBzeW5jPyBDSiB3aWxsIGNvbnRpbnVlIHRvIG1hbmFnZSB0aGUgaW52ZW50b3J5IGZvciBwcm9kdWN0cyBmdWxmaWxsZWQgYnkgQ0ouJztcclxuICAgICAgJHNjb3BlLnNob3dQb3BVcHMgPSBmYWxzZTtcclxuICAgICAgbGV0IGRpc2FibGVkSWQgPSAnJztcclxuICAgICAgbGV0IHN5bmNJbnZlbnRvcnkgPSAnJztcclxuICAgICAgJHNjb3BlLmVuYWJsZVN0b2NrU3luYyA9IGl0ZW0gPT4ge1xyXG4gICAgICAgIGlmIChpdGVtLnN5bmNJbnZlbnRvcnkgPT0gMCkge1xyXG4gICAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBcIkFyZSB5b3Ugc3VyZSB0byBlbmFibGUgaW52ZW50b3J5IHN5bmM/IENKIHdpbGwgY29udGludWUgdG8gbWFuYWdlIHRoZSBpbnZlbnRvcnkgZm9yIHByb2R1Y3RzIGZ1bGZpbGxlZCBieSBDSi5cIjtcclxuICAgICAgICAgIHN5bmNJbnZlbnRvcnkgPSAnMSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLnN5bmNJbnZlbnRvcnkgPT0gMSkge1xyXG4gICAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBcIkFyZSB5b3Ugc3VyZSB0byBkaXNhYmxlIGludmVudG9yeSBzeW5jPyBUaGUgaW52ZW50b3J5IG9mIHRoZSBjb25uZWN0ZWQgcHJvZHVjdHMgd2lsbCBiZSBtYW5hZ2VkIGJ5IHlvdXJzZWxmLCBidXQgcHJvZHVjdHMgY2Fubm90IGJlIHNoaXBwZWQgd2hlbiB0aGVyZSBpcyBhIGludmVudG9yeSBzaG9ydGFnZS5cIjtcclxuICAgICAgICAgIHN5bmNJbnZlbnRvcnkgPSAnMCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5wb3BDb25maXJtVHlwZSA9ICdlbmFibGVTdG9ja1N5bmMnO1xyXG4gICAgICAgICRzY29wZS5zaG93UG9wVXBzID0gdHJ1ZTtcclxuICAgICAgICBkaXNhYmxlZElkID0gaXRlbS5pZDtcclxuICAgICAgfVxyXG4gICAgICAvLyDojrflj5blvLnnqpfnu4Tku7blhbPpl63mjInpkq5cclxuICAgICAgJHNjb3BlLiRvbignY2xvc2VQb3BVcHMnLCAoZSwgZCkgPT4ge1xyXG4gICAgICAgICRzY29wZS5zaG93UG9wVXBzID0gZmFsc2U7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vIOiOt+WPluW8ueeql+e7hOS7tuehruWumuaMiemSrlxyXG4gICAgICAkc2NvcGUuJG9uKCdjb25maXJtUG9wVXBzJywgKGUsIGQpID0+IHtcclxuICAgICAgICBpZigkc2NvcGUucG9wQ29uZmlybVR5cGUgPT0gJ2VuYWJsZVN0b2NrU3luYycpIHtcclxuICAgICAgICAgIGVuYWJsZVN0b2NrU3luY0Z1bigpO1xyXG4gICAgICAgIH0gZWxzZSBpZigkc2NvcGUucG9wQ29uZmlybVR5cGUgPT0gJ2RlYWN0aXZhdGUnKSB7XHJcbiAgICAgICAgICBkZWFjdGl2YXRlRnVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgZnVuY3Rpb24gZW5hYmxlU3RvY2tTeW5jRnVuKCkge1xyXG4gICAgICAgIGRzcC5wb3N0RnVuKCdhcHAvc2hvcC9zeW5jaHJvbml6ZUludmVudG9yeScse1xyXG4gICAgICAgICAgc2hvcElkOiBkaXNhYmxlZElkLFxyXG4gICAgICAgICAgc3luY0ludmVudG9yeVxyXG4gICAgICAgIH0sIHJlcyA9PiB7XHJcbiAgICAgICAgICBsYXllci5jbG9zZUFsbChcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICBjb25zdCB7ZGF0YX0gPSByZXM7XHJcbiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXNDb2RlICE9IDIwMCkge1xyXG4gICAgICAgICAgICBsYXllci5tc2coJ1NvcnJ5LCB0aGVyZSB3YXMgYW4gdW5rbm93biBlcnJvci4gSW52ZW50b3J5IHN5bmMgZmFpbGVkLiBQbGVhc2UgdHJ5IGl0IGFnYWluLicpO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxheWVyLm1zZygnc3VjY2VzcycpXHJcbiAgICAgICAgICAkc2NvcGUuc2hvd1BvcFVwcyA9IGZhbHNlO1xyXG4gICAgICAgICAgJHNjb3BlLmdldFN0b3JlTGlzdCh7fSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBkZWFjdGl2YXRlRnVuKCkge1xyXG4gICAgICAgICRzY29wZS5vcGVyYXRlU3RvcmUoJHNjb3BlLnN0b3JlSWQsIDIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGF5ZXIubXNnKFxyXG4gICAgICAgICAgICBcIkRlYWN0aXZhdGVkXCIsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0aW1lOiAxMDAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGxheWVyLmNsb3NlKDIpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zaG93UG9wVXBzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIC8vIOaYr+WQpuW8gOWQr+abtOaWsOWVhuW6l+WPkemAgemCruS7tuaPkOekulxyXG4gICAgICAkc2NvcGUudXBkYXRlRW1haWxOb3RpZmljYXRpb24gPSBmdW5jdGlvbihmaWx0ZXJPYmopIHtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICBzaG9wSWQ6IGZpbHRlck9iai5pZCxcclxuICAgICAgICAgIGVtYWlsTm90aWZpY2F0aW9uOiBmaWx0ZXJPYmouZW1haWxOb3RpZmljYXRpb24gPT0gMSA/IDAgOiAxXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRzcC5wb3N0RnVuKFwiYXBwL3Nob3AvdXBkYXRlRW1haWxOb3RpZmljYXRpb25cIiwgcGFyYW1zLCBmdW5jdGlvbihcclxuICAgICAgICAgIGRhdGFcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHZhciBkYXRhID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgaWYgKGRhdGEuc3RhdHVzQ29kZSAhPSAyMDApIHtcclxuICAgICAgICAgICAgaW5pdENvbmZpcm1Cb3goe1xyXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFwiU29ycnksIHRoZXJlIHdhcyBhbiB1bmtub3duIGVycm9yLiBQbGVhc2UgdHJ5IGl0IGFnYWluLlwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGF5ZXIubXNnKCdzdWNjZXNzJylcclxuICAgICAgICAgICRzY29wZS5nZXRTdG9yZUxpc3Qoe30pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy9Xb29jb21tZXJjZSBPYXV0aOaOiOadg+aWueW8j1xyXG4gICAgICAkc2NvcGUuQ2xpZW50S2V5ID0gJydcclxuICAgICAgJHNjb3BlLkNsaWVudFNlY3JldCA9ICcnXHJcbiAgICAgICRzY29wZS5FcmlmaWVyQ29kZSA9ICcnXHJcbiAgICAgICRzY29wZS5ub3RTaG93T0F1dGggPSB0cnVlXHJcbiAgICAgICRzY29wZS5pc1Nob3dOZXh0ID0gZmFsc2VcclxuICAgICAgJHNjb3BlLmlzRGlzcGxheSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzY29wZS5ub3RTaG93T0F1dGggPSB0cnVlXHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLm5vdERpc3BsYXkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkc2NvcGUubm90U2hvd09BdXRoID0gZmFsc2VcclxuICAgICAgfVxyXG5cclxuICAgICAgJHNjb3BlLmxpbWl0Q2xpZW50S2V5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYoJHNjb3BlLkNsaWVudEtleS5sZW5ndGggPiAxOTkpIHtcclxuICAgICAgICAgIHJldHVybiBsYXllci5tc2coXCJZb3UgY2FuIGVudGVyIDIwMCBjaGFyYWN0ZXJzIGF0IG1vc3QuXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5saW1pdENsaWVudFNlY3JldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkc2NvcGUuQ2xpZW50U2VjcmV0Lmxlbmd0aCA+IDE5OSkge1xyXG4gICAgICAgICAgcmV0dXJuIGxheWVyLm1zZyhcIllvdSBjYW4gZW50ZXIgMjAwIGNoYXJhY3RlcnMgYXQgbW9zdC5cIilcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmxpbWl0RXJpZmllckNvZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZigkc2NvcGUuRXJpZmllckNvZGUubGVuZ3RoID4gMTk5KSB7XHJcbiAgICAgICAgICByZXR1cm4gbGF5ZXIubXNnKFwiWW91IGNhbiBlbnRlciAyMDAgY2hhcmFjdGVycyBhdCBtb3N0LlwiKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuZ29CYWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJHNjb3BlLmlzU2hvd05leHQgPSBmYWxzZVxyXG4gICAgICB9XHJcbiBcclxuICAgICAgJHNjb3BlLm5leHRTdGVwID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuU2l0ZVVybCkge1xyXG4gICAgICAgICAgcmV0dXJuIGxheWVyLm1zZyhcIlBsZWFzZSBlbnRlciBTaXRlIFVybC5cIik7XHJcbiAgICAgICAgfSBlbHNlIGlmICghJHNjb3BlLkNsaWVudEtleSkge1xyXG4gICAgICAgICAgcmV0dXJuIGxheWVyLm1zZyhcIlBsZWFzZSBlbnRlciBDbGllbnQgS2V5LlwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCEkc2NvcGUuQ2xpZW50U2VjcmV0KSB7XHJcbiAgICAgICAgICByZXR1cm4gbGF5ZXIubXNnKFwiUGxlYXNlIGVudGVyIENsaWVudCBTZWNyZXQuXCIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIC8vIOS4jeWFgeiuuOWhq+WGmWh0dHBz5oiW6ICFaHR0cFxyXG4gICAgICAgICAgICAkc2NvcGUuU2l0ZVVybC5pbmRleE9mKFwiaHR0cHM6Ly9cIikgIT0gLTEgfHxcclxuICAgICAgICAgICAgJHNjb3BlLlNpdGVVcmwuaW5kZXhPZihcImh0dHA6Ly9cIikgIT0gLTFcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIubXNnKCdTdG9yZSBJRCBvbmx5LCBubyBcImh0dHBzOi8vXCIgb3IgXCJodHRwOi8vXCIuJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkc3AuZ2V0RnVuKFxyXG4gICAgICAgICAgICAgIGBwbGF0Zm9ybS1zaG9wL2F1dGhvcml6ZS9nZXRBdXRob3JVcmw/ZnJvbVR5cGU9MiZjb25zdW1lcktleT0keyRzY29wZS5DbGllbnRLZXl9JmNvbnN1bWVyU2VjcmV0PSR7JHNjb3BlLkNsaWVudFNlY3JldH0mc2hvcE5hbWU9JHskc2NvcGUuU2l0ZVVybH0mcGxhdGZvcm09V09PQ09NTUVSQ0VgLFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY29kZSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5pc1Nob3dOZXh0ID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihkYXRhLmRhdGEuZGF0YSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGxheWVyLm1zZyhkYXRhLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2NvcGUub2F1dGhTdWIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZighJHNjb3BlLkVyaWZpZXJDb2RlKSB7XHJcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVyaWZpZXJDb2RlXCIpLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYm9yZGVyLWNvbG9yOiByZWQnKVxyXG4gICAgICAgICAgcmV0dXJuIGxheWVyLm1zZyhcIlBsZWFzZSBlbnRlciBFcmlmaWVyIGNvZGUuXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVyaWZpZXJDb2RlXCIpLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKVxyXG4gICAgICAgICAgZHNwLmdldEZ1bihgcGxhdGZvcm0tc2hvcC9hdXRob3JpemUvc2F2ZVNob3A/cGxhdGZvcm09V09PQ09NTUVSQ0UmY29uc3VtZXJLZXk9JHskc2NvcGUuQ2xpZW50S2V5fSZjb25zdW1lclNlY3JldD0keyRzY29wZS5DbGllbnRTZWNyZXR9JnNob3BOYW1lPSR7JHNjb3BlLlNpdGVVcmx9JnZlcmlmaWVyPSR7JHNjb3BlLkVyaWZpZXJDb2RlfWAsIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5jb2RlID09PSAyMDApIHtcclxuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICd3ZWxjb21lLmh0bWw/ZnJvbT1hdXRob3JpemUmcmVzdWx0PTEnXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbGF5ZXIubXNnKGRhdGEuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBdKTtcclxuXHJcbiAgcmV0dXJuIGFwcDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFWQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBVEE7QUFZQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFHQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJHQTtBQXdHQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBVkE7QUFDQTtBQVdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUZBO0FBSUE7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTEE7QUFPQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTEE7QUFPQTtBQUlBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFJQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQURBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../src/pages/mycj/authorize/authorize.js\n");

/***/ })

}]);